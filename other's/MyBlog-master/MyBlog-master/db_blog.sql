/*
Navicat MySQL Data Transfer

Source Server         : localhost_3306
Source Server Version : 50617
Source Host           : localhost:3306
Source Database       : db_blog

Target Server Type    : MYSQL
Target Server Version : 50617
File Encoding         : 65001

Date: 2016-04-24 19:20:05
*/

SET FOREIGN_KEY_CHECKS=0;

-- ----------------------------
-- Table structure for `article`
-- ----------------------------
DROP TABLE IF EXISTS `article`;
CREATE TABLE `article` (
  `articleId` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `userId` int(11) unsigned NOT NULL,
  `title` varchar(50) NOT NULL,
  `content` text NOT NULL,
  `date` datetime DEFAULT CURRENT_TIMESTAMP,
  `hasread` int(11) DEFAULT '0',
  PRIMARY KEY (`articleId`),
  KEY `FKD458CCF63ECE7FE8` (`userId`),
  CONSTRAINT `article_fk_1` FOREIGN KEY (`userId`) REFERENCES `user` (`userId`),
  CONSTRAINT `FKD458CCF63ECE7FE8` FOREIGN KEY (`userId`) REFERENCES `user` (`userId`)
) ENGINE=InnoDB AUTO_INCREMENT=10183 DEFAULT CHARSET=utf8 COMMENT='文章表';

-- ----------------------------
-- Records of article
-- ----------------------------
INSERT INTO `article` VALUES ('10000', '10000', 'SSH整合方案（一）', '<p>这段时间准备写一下SSH的整合方法</p>', '2016-04-16 00:54:29', '2');
INSERT INTO `article` VALUES ('10001', '10000', 'SSH整合方案（二）', '<p>让我们一起感受SSH整合的魅力吧！！！！！</p>', '2016-04-16 00:54:29', '1');
INSERT INTO `article` VALUES ('10002', '10001', '今天好冷啊！', '<p>外面下雪了，今年的冬天来得太早了。</p>', '2016-04-16 00:54:29', '1');
INSERT INTO `article` VALUES ('10003', '10002', '继续更新我的SSH整合方案！', '', '2016-04-16 00:54:29', '1');
INSERT INTO `article` VALUES ('10004', '10001', '测试日志！！', '<p>测试日志！！</p>', '2016-04-16 00:54:29', '1');
INSERT INTO `article` VALUES ('10006', '10003', 'Linux学习笔记14', '\n        <div class=\"markdown_views\"><h1 id=\"linux学习笔记14\">Linux学习笔记14</h1>\n\n<p><div class=\"toc\"><div class=\"toc\">\n<ul>\n<li><a href=\"#linux学习笔记14\">Linux学习笔记14</a><ul>\n<li><a href=\"#dns服务搭建\">DNS服务搭建</a><ul>\n<li><a href=\"#基本介绍\">基本介绍</a></li>\n<li><a href=\"#使用bind搭建dns服务\">使用bind搭建dns服务</a></li>\n<li><a href=\"#增加一个域名zone\">增加一个域名zone</a></li>\n<li><a href=\"#配置dns转发\">配置DNS转发</a></li>\n<li><a href=\"#配置主从\">配置主从</a></li>\n<li><a href=\"#测试主从同步\">测试主从同步</a></li>\n</ul>\n</li>\n<li><a href=\"#后续课程\">后续课程</a></li>\n</ul>\n</li>\n</ul>\n</div>\n</div>\n</p>\n\n<h2 id=\"dns服务搭建\"><strong>DNS服务搭建</strong></h2>\n\n<h3 id=\"基本介绍\"><strong>基本介绍</strong></h3>\n\n<blockquote>\n  <p>DNS 为Domain Name System（域名系统）的缩写，它是一种将ip地址转换成对应的主机名或将主机名转换成与之相对应ip地址的一种服务机制。 </p>\n  \n  <p>其中通过域名解析出ip地址的叫做正向解析，通过ip地址解析出域名的叫做反向解析。 </p>\n  \n  <p>DNS使用TCP和UDP, 端口号都是53, 但它主要使用UDP，服务器之间备份使用TCP。 </p>\n  \n  <p>全世界只有13台“根”服务器，1个主根服务器放在美国，其他12台为辅根服务器</p>\n  \n  <p>DNS服务器根据角色可以分为：主DNS, 从DNS, 缓存DNS服务器，DNS转发服务器</p>\n</blockquote>\n\n<h3 id=\"使用bind搭建dns服务\"><strong>使用bind搭建dns服务</strong></h3>\n\n<blockquote>\n  <p><code>yum install -y bind</code></p>\n  \n  <p><code>cp /etc/named.conf /etc/named.conf.bak</code></p>\n  \n  <p><code>&gt; /etc/named.conf</code></p>\n  \n  <p><code>vim /etc/named.conf</code></p>\n  \n  <p>加入如下配置：</p>\n  \n  <blockquote>\n    <p><code>options { <br>\n            directory \"/var/named\"; <br>\n        }; <br>\n        zone \".\" IN  { <br>\n            type hint; <br>\n            file \"named.ca\"; <br>\n        }; <br>\n        zone \"localhost\" IN { <br>\n            type master; <br>\n            file \"localhost.zone\"; <br>\n        }; <br>\n        zone \"0.0.127.in-addr.arpa\" IN { <br>\n            type master; <br>\n            file \"named.local\"; <br>\n        };</code></p>\n  </blockquote>\n  \n  <p><code>chown named /etc/named.conf</code></p>\n  \n  <p><code>cd /var/named/</code></p>\n  \n  <p><code>dig -t NS . &gt; named.ca</code></p>\n  \n  <p><code>vim localhost.zone</code></p>\n  \n  <p>加入如下配置：</p>\n  \n  <blockquote>\n    <p><code>@                   IN      SOA     localhost.  admin.localhost.     ( <br>\n                                                                                2013081601 <br>\n                                                                                1H <br>\n                                                                                10M <br>\n                                                                                7D <br>\n                                                                                1D <br>\n                                                                                   ) <br>\n        @                   IN          NS          localhost. <br>\n        localhost.          IN          A           127.0.0.1</code></p>\n  </blockquote>\n  \n  <p><code>vim named.local</code></p>\n  \n  <p>加入如下配置： </p>\n  \n  <blockquote>\n    <p><code>$TTL 86400 <br>\n        @                    IN      SOA     localhost.  admin.localhost.      ( <br>\n                                                                                2013081601 <br>\n                                                                                1H <br>\n                                                                                10M <br>\n                                                                                7D <br>\n                                                                                1D <br>\n                                                                                ) <br>\n        @                    IN          NS          localhost. <br>\n        1                    IN          PTR         localhost</code></p>\n  </blockquote>\n  \n  <p>检测配置是否有问题: <code>named-checkconf</code>，如果无输出，则代表没问题。</p>\n  \n  <p>检测正解析: <code>named-checkzone \"localhost\" /var/named/localhost.zone</code>，如果输出有<code>ok</code>字样，则无问题。</p>\n  \n  <p>检测反解析: <code>named-checkzone \"0.0.127.in-addr.arpa\" /var/named/named.local</code>，如果输出有<code>ok</code>字样，则无问题。</p>\n  \n  <p><code>rndc-confgen -r /dev/urandom -a</code></p>\n  \n  <p><code>chown named:named /etc/rndc.key</code></p>\n  \n  <p>启动服务：<code>service named start</code></p>\n  \n  <p><code>netstat -lnp | grep named</code> 查看一下named进程是否监听了53端口</p>\n  \n  <p>首先测试正向解析：<code>dig @127.0.0.1 localhost.</code></p>\n  \n  <p>接着测试反解析：<code>dig @127.0.0.1 -x 127.0.0.1</code></p>\n</blockquote>\n\n<h3 id=\"增加一个域名zone\"><strong>增加一个域名(zone)</strong></h3>\n\n<blockquote>\n  <p><code>vim /etc/named.conf</code></p>\n  \n  <p>增加如下代码：</p>\n  \n  <blockquote>\n    <p><code>zone \"abc.com\" IN { <br>\n            type master; <br>\n            file \"abc.com.zone\"; <br>\n        }; <br>\n        zone \"137.168.192.in-addr.arpa\" IN { <br>\n            type master; <br>\n            file \"192.168.zone\"; <br>\n        };</code></p>\n  </blockquote>\n  \n  <p>编辑zone正向解析文件: <code>vim /var/named/abc.com.zone</code></p>\n  \n  <p>增加如下代码： </p>\n  \n  <blockquote>\n    <p><code>$TTL    600 <br>\n        @               IN      SOA     abc.com.      root.abc.com.    ( <br>\n                                                                2013081601 <br>\n                                                                1H <br>\n                                                                10M <br>\n                                                                7D <br>\n                                                                1D <br>\n        ) <br>\n                         IN      NS      ns.abc.com. <br>\n                         IN      MX  10  mail.abc.com. <br>\n        ns               IN      A       192.168.0.11 <br>\n        www              IN      A       192.168.137.73 <br>\n        mail             IN      A       192.168.137.10 <br>\n        bbs              IN      CNAME   www.abc.com.</code></p>\n  </blockquote>\n  \n  <p>编辑反解析文件: <code>vim /var/named/192.168.zone</code></p>\n  \n  <p>增加如下代码：</p>\n  \n  <blockquote>\n    <p><code>$TTL 600 <br>\n        @               IN      SOA     ns.abc.com.      root.abc.com. ( <br>\n                                                                2013081601 <br>\n                                                                1H <br>\n                                                                10M <br>\n                                                                7D <br>\n                                                                1D <br>\n        ) <br>\n        @               IN      NS      ns.abc.com. <br>\n        10              IN      PTR     ns.abc.com. <br>\n        11              IN      PTR     mail.abc.com. <br>\n        73              IN      PTR     www.abc.com.</code></p>\n  </blockquote>\n  \n  <p>分别检测两个配置文件是否有问题：</p>\n  \n  <p><code>named-checkzone \"abc.com\" abc.com.zone</code></p>\n  \n  <p><code>named-checkzone \"137.168.192.in-addr.arpa\" 192.168.zone</code></p>\n  \n  <p>重启named服务，<code>service named restart</code></p>\n  \n  <p>测试：</p>\n  \n  <blockquote>\n    <p><code>dig @127.0.0.1 www.abc.com</code></p>\n    \n    <p><code>dig  @127.0.0.1 -x 192.168.137.11</code></p>\n  </blockquote>\n</blockquote>\n\n<h3 id=\"配置dns转发\"><strong>配置DNS转发</strong></h3>\n\n<blockquote>\n  <p>配置的DNS是只能解析定义的zone的，没有定义的是不能解析的。</p>\n  \n  <p>配置DNS转发就可以解析其他互联网上的域名了，前提是这个域名在互联网中的确在使用，也就是说这个域名已经被某个DNS服务器解析了。</p>\n  \n  <p><code>vim /etc/named.conf</code></p>\n  \n  <p>在options{} 里面增加：</p>\n  \n  <blockquote>\n    <p><code>forward first; <br>\n        forwarders { 114.114.114.114; };</code></p>\n  </blockquote>\n  \n  <p>这两行就是用来配置转发的，该DNS服务器不能解析的域名会转发到114.114.114.114这个DNS服务器上去解析。</p>\n</blockquote>\n\n<h3 id=\"配置主从\"><strong>配置主从</strong></h3>\n\n<blockquote>\n  <p>在从服务器上<code>yum install -y bind</code></p>\n  \n  <p>拷贝主上的配置文件到从上，其中有<code>/etc/named.conf</code>, <code>/var/named/localhost.zone</code>, <code>/var/named/named.local</code></p>\n  \n  <p>拷贝过来后，修改一下从的<code>/etc/named.conf</code> 内容参考:</p>\n  \n  <blockquote>\n    <p><code>options { <br>\n            directory \"/var/named\"; <br>\n        }; <br>\n        zone \".\" IN  { <br>\n            type hint; <br>\n            file \"named.ca\"; <br>\n        }; <br>\n        zone \"localhost\" IN { <br>\n            type master; <br>\n            file \"localhost.zone\"; <br>\n        }; <br>\n        zone \"0.0.127.in-addr.arpa\" IN { <br>\n            type master; <br>\n            file \"named.local\"; <br>\n        }; <br>\n        zone \"abc.com\" IN { <br>\n            type slave; <br>\n            file \"slaves/abc.com.zone\"; <br>\n            masters { 192.168.0.11; }; <br>\n        }; <br>\n        zone \"137.168.192.in-addr.arpa\" IN { <br>\n            type slave; <br>\n            file \"slaves/192.168.zone\"; <br>\n            masters { 192.168.0.11; }; <br>\n        };</code></p>\n  </blockquote>\n  \n  <p>从上生成rndc.key：<code>rndc-confgen -r /dev/urandom -a</code></p>\n  \n  <p><code>chown named:named /etc/rndc.key</code></p>\n  \n  <p>从上启动named： <code>service named start</code></p>\n  \n  <p>启动成功后会在<code>/var/named/</code>下生成一个<code>slaves</code>目录，这个目录下会有<code>192.168.zone</code>, <code>abc.com.zone</code>这两个文件，内容是和主上的一样的</p>\n  \n  <p>在从上测试: <code>dig @127.0.0.1 www.abc.com</code></p>\n</blockquote>\n\n<h3 id=\"测试主从同步\"><strong>测试主从同步</strong></h3>\n\n<blockquote>\n  <p>在主dns上更改文件<code>/var/named/abc.com.zone</code></p>\n  \n  <p>在最后增加一行：</p>\n  \n  <blockquote>\n    <p><code>123              IN      A       1.1.1.1</code></p>\n  </blockquote>\n  \n  <p>另外需要修改一下第三行的那个数字串，这个是用来做标记的，只有这个数字变化了，才可以让从自动跟着变，数字只能是变大，不能减小，2013081601 -&gt; 2013081602</p>\n  \n  <p>重启主namd服务: <code>service named restart</code></p>\n  \n  <p>在主上的<code>/etc/named.conf</code>中，abc.com的zone中增加两行：</p>\n  \n  <blockquote>\n    <p><code>notify yes; <br>\n        also-notify { 192.168.0.12; };</code></p>\n  </blockquote>\n</blockquote>\n\n<h2 id=\"后续课程\"><strong>后续课程</strong></h2>\n\n<blockquote>\n  <p>之后的课程没做笔记，可以在这些课件里查看：</p>\n  \n  <p><a href=\"http://download.csdn.net/detail/q547550831/9488600\">Linux学习未做笔记部分</a></p>\n</blockquote>\n\n<p><strong><font size=\"6\">参考《跟阿铭学Linux》</font></strong></p>\n\n<hr></div>\n        <script type=\"text/javascript\">\n            $(function () {\n                $(\'pre.prettyprint code\').each(function () {\n                    var lines = $(this).text().split(\'\\n\').length;\n                    var $numbering = $(\'<ul/>\').addClass(\'pre-numbering\').hide();\n                    $(this).addClass(\'has-numbering\').parent().append($numbering);\n                    for (i = 1; i <= lines; i++) {\n                        $numbering.append($(\'<li/>\').text(i));\n                    };\n                    $numbering.fadeIn(1700);\n                });\n            });\n        </script>\n   \n', '2016-04-16 01:21:01', '0');
INSERT INTO `article` VALUES ('10007', '10003', 'Linux学习笔记4', '\n        <div class=\"markdown_views\"><h1 id=\"linux学习笔记4\"><strong>Linux学习笔记4</strong></h1>\n\n<p><div class=\"toc\">\n<ul>\n<li><a href=\"#linux学习笔记4\">Linux学习笔记4</a><ul>\n<li><ul>\n<li><a href=\"#绝对路径与相对路径\">绝对路径与相对路径</a></li>\n<li><a href=\"#查看当前目录\">查看当前目录</a></li>\n<li><a href=\"#查看家目录\">查看家目录</a></li>\n<li><a href=\"#进入家目录\">进入家目录</a></li>\n<li><a href=\"#当前目录和上一级目录\">当前目录和上一级目录</a></li>\n<li><a href=\"#创建目录\">创建目录</a></li>\n<li><a href=\"#删除目录\">删除目录</a></li>\n<li><a href=\"#创建一个文件\">创建一个文件</a></li>\n<li><a href=\"#打印文字\">打印文字</a></li>\n<li><a href=\"#重定向和追加重定向\">重定向和追加重定向</a></li>\n<li><a href=\"#删除文件\">删除文件</a></li>\n<li><a href=\"#给命令起别名\">给命令起别名</a></li>\n<li><a href=\"#查看命令在哪个目录下被取了什么别名\">查看命令在哪个目录下被取了什么别名</a></li>\n<li><a href=\"#环境变量\">环境变量</a></li>\n<li><a href=\"#复制文件或目录\">复制文件或目录</a></li>\n<li><a href=\"#移动文件或目录\">移动文件或目录</a></li>\n<li><a href=\"#与文档相关命令\">与文档相关命令</a></li>\n<li><a href=\"#通配符的使用\">通配符的使用</a></li>\n<li><a href=\"#文件类型\">文件类型</a></li>\n<li><a href=\"#文件权限\">文件权限</a></li>\n<li><a href=\"#文件所属主所属组和其他人\">文件所属主所属组和其他人</a></li>\n<li><a href=\"#更改文件权限\">更改文件权限</a></li>\n<li><a href=\"#inode解析\">inode解析</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>\n</p>\n\n<h3 id=\"绝对路径与相对路径\"><strong>绝对路径与相对路径</strong></h3>\n\n<blockquote>\n  <p>绝对路径是基于根目录的，通过根目录来定位文件，以<strong>“\\”</strong>开头。</p>\n  \n  <p>例：</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# cd /home/switch/</code></p>\n  </blockquote>\n  \n  <p>相对路径是基于当前目录的，通过当前目录来定位文件,可以以<strong>“.”</strong>开头。</p>\n  \n  <p>例：</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# ls <br>\n            anaconda-ks.cfg  Documents  initial-setup-ks.cfg  Pictures  Templates <br>\n            Desktop          Downloads  Music                 Public    Videos <br>\n            [root@localhost ~]# cd Desktop/</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"查看当前目录\"><strong>查看当前目录</strong></h3>\n\n<blockquote>\n  <p>pwd</p>\n</blockquote>\n\n\n\n<h3 id=\"查看家目录\"><strong>查看家目录</strong></h3>\n\n<blockquote>\n  <p>echo $HOME</p>\n</blockquote>\n\n\n\n<h3 id=\"进入家目录\"><strong>进入家目录</strong></h3>\n\n<blockquote>\n  <p>cd，cd ~</p>\n</blockquote>\n\n\n\n<h3 id=\"当前目录和上一级目录\"><strong>当前目录和上一级目录</strong></h3>\n\n<blockquote>\n  <p><strong>.，..</strong></p>\n  \n  <p>例：</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# pwd <br>\n        /root <br>\n        [root@localhost ~]# cd . <br>\n        [root@localhost ~]# pwd <br>\n        /root <br>\n        [root@localhost ~]# cd .. <br>\n        [root@localhost /]# pwd <br>\n        / <br>\n        [root@localhost /]#</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"创建目录\"><strong>创建目录</strong></h3>\n\n<blockquote>\n  <p>mkdir</p>\n  \n  <p>例：创建目录</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# mkdir 123 <br>\n        [root@localhost ~]# ls <br>\n        123              Desktop    Downloads             Music     Public     Videos <br>\n        anaconda-ks.cfg  Documents  initial-setup-ks.cfg  Pictures  Templates <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n  \n  <p>例：级联创建目录</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# mkdir -p 1/2/3 <br>\n        [root@localhost ~]# ls <br>\n        1    anaconda-ks.cfg  Documents  initial-setup-ks.cfg  Pictures  Templates <br>\n        123  Desktop          Downloads  Music                 Public    Videos <br>\n        [root@localhost ~]# cd 1/ <br>\n        [root@localhost 1]# ls <br>\n        2 <br>\n        [root@localhost 1]# cd 2/ <br>\n        [root@localhost 2]# ls <br>\n        3 <br>\n        [root@localhost 2]#</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"删除目录\"><strong>删除目录</strong></h3>\n\n<blockquote>\n  <p>rmdir</p>\n  \n  <p>例：删除目录</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# rmdir 123/ <br>\n        [root@localhost ~]# ls <br>\n        1                Desktop    Downloads             Music     Public     Videos <br>\n        anaconda-ks.cfg  Documents  initial-setup-ks.cfg  Pictures  Templates <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n  \n  <p>例：级联删除目录</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# ls -d 1/2/3/ <br>\n        1/2/3/ <br>\n        [root@localhost ~]# rmdir -p 1/2/3/ <br>\n        [root@localhost ~]# ls <br>\n        anaconda-ks.cfg  Documents  initial-setup-ks.cfg  Pictures  Templates <br>\n        Desktop          Downloads  Music                 Public    Videos <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"创建一个文件\"><strong>创建一个文件</strong></h3>\n\n<blockquote>\n  <p>touch</p>\n  \n  <blockquote>\n    <p>文件不存在创建文件，文件存在刷新atime(文件访问时间)，ctime(文件改变时间)，mtime(文件修改时间)。</p>\n    \n    <p><a href=\"http://blog.sina.com.cn/s/blog_5980699f0100zkgz.html\">Linux之atime,mtime,ctime</a></p>\n  </blockquote>\n  \n  <p>例：创建同一个文件两次</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# touch 123.txt <br>\n        [root@localhost ~]# ls -l 123.txt <br>\n        -rw-r--r-- 1 root root 0 3月  29 12:32 123.txt <br>\n        [root@localhost ~]# touch 123.txt <br>\n        [root@localhost ~]# ls -l 123.txt <br>\n        -rw-r--r-- 1 root root 0 3月  29 12:33 123.txt <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"打印文字\"><strong>打印文字</strong></h3>\n\n<blockquote>\n  <p>echo</p>\n</blockquote>\n\n\n\n<h3 id=\"重定向和追加重定向\"><strong>重定向和追加重定向</strong></h3>\n\n<blockquote>\n  <p>&gt;，&gt;&gt;</p>\n  \n  <p>例：将要打印的文字重定向到文件中</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# echo \"123\" &gt; 123.txt <br>\n        [root@localhost ~]# cat 123.txt <br>\n        123 <br>\n        [root@localhost ~]#</code></p>\n    \n    <p>PS：如果两次重定向到同一个文件中，则后一个重定向会覆盖前一个。</p>\n  </blockquote>\n  \n  <p>例：将要打印的文字追加重定向到文件中</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# echo 321 &gt;&gt; 123.txt <br>\n        [root@localhost ~]# cat 123.txt <br>\n        123 <br>\n        321 <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"删除文件\"><strong>删除文件</strong></h3>\n\n<blockquote>\n  <p>rm</p>\n  \n  <p>例：删除一个文件</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# ls <br>\n        123.txt          Desktop    Downloads             Music     Public     Videos <br>\n        anaconda-ks.cfg  Documents  initial-setup-ks.cfg  Pictures  Templates <br>\n        [root@localhost ~]# rm 123.txt <br>\n        rm：是否删除普通文件 \"123.txt\"？y <br>\n        [root@localhost ~]# ls <br>\n        anaconda-ks.cfg  Documents  initial-setup-ks.cfg  Pictures  Templates <br>\n        Desktop          Downloads  Music                 Public    Videos <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n  \n  <p>例：强制删除一个文件</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# touch 123.txt <br>\n        [root@localhost ~]# ls <br>\n        123.txt          Desktop    Downloads             Music     Public     Videos <br>\n        anaconda-ks.cfg  Documents  initial-setup-ks.cfg  Pictures  Templates <br>\n        [root@localhost ~]# rm -f 123.txt <br>\n        [root@localhost ~]# ls <br>\n        anaconda-ks.cfg  Documents  initial-setup-ks.cfg  Pictures  Templates <br>\n        Desktop          Downloads  Music                 Public    Videos <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n  \n  <p>例：删除目录及目录下的文件</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# mkdir 123 <br>\n        [root@localhost ~]# touch 123/123.txt <br>\n        [root@localhost ~]# ls 123 <br>\n        123.txt <br>\n        [root@localhost ~]# rm -rf 123 <br>\n        [root@localhost ~]# ls 123 <br>\n        ls: 无法访问123: 没有那个文件或目录 <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"给命令起别名\"><strong>给命令起别名</strong></h3>\n\n<blockquote>\n  <p>alias</p>\n  \n  <p>例：给一个命令起一个别名</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# alias abc=\"123456789\" <br>\n        [root@localhost ~]# abc <br>\n        bash: 123456789: 未找到命令... <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n  \n  <p>例：查看所有已有的别名</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# alias <br>\n        alias abc=\'123456789\' <br>\n        alias cp=\'cp -i\' <br>\n        alias egrep=\'egrep --color=auto\' <br>\n        alias fgrep=\'fgrep --color=auto\' <br>\n        alias grep=\'grep --color=auto\' <br>\n        alias l.=\'ls -d .* --color=auto\' <br>\n        alias ll=\'ls -l --color=auto\' <br>\n        alias ls=\'ls --color=auto\' <br>\n        alias mv=\'mv -i\' <br>\n        alias rm=\'rm -i\' <br>\n        alias which=\'alias | /usr/bin/which --tty-only --read-alias --show-dot --show-tilde\' <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n  \n  <p>例：解除别名</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# unalias abc <br>\n        [root@localhost ~]# abc <br>\n        bash: abc: 未找到命令... <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"查看命令在哪个目录下被取了什么别名\"><strong>查看命令在哪个目录下，被取了什么别名</strong></h3>\n\n<blockquote>\n  <p>which</p>\n  \n  <p>例：查看命令ls在哪个目录下，有什么别名</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# which ls <br>\n        alias ls=\'ls --color=auto\' <br>\n                /usr/bin/ls <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"环境变量\"><strong>环境变量</strong></h3>\n\n<blockquote>\n  <p>echo $PATH</p>\n  \n  <p>例：查看当前的环境变量</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# echo $PATH <br>\n        /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n  \n  <p>PS：如果不想使用命令的路径全称，则可以将命令加入到环境变量中的其中一个，则可以通过命令名直接使用命令。</p>\n  \n  <p>例：加入一个路径到环境变量中</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# echo $PATH <br>\n        /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin <br>\n        [root@localhost ~]# PATH=$PATH:/root <br>\n        [root@localhost ~]# echo $PATH <br>\n        /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin:/root <br>\n        [root@localhost ~]#</code></p>\n    \n    <p>PS：环境变量可以添加路径，但不要随意更改，否则可能造成某些命令，某些服务使用不了。</p>\n    \n    <p>PS：环境变量的更改只在当前终端生效，如果想让它永久生效，vim /etc/profile然后将PATH=$PATH:新增目录加到最底部一行。</p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"复制文件或目录\"><strong>复制文件或目录</strong></h3>\n\n<blockquote>\n  <p>cp</p>\n  \n  <p>例：复制一个文件到另一个文件</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# ls <br>\n        anaconda-ks.cfg  Documents  initial-setup-ks.cfg  Pictures  Templates <br>\n        Desktop          Downloads  Music                 Public    Videos <br>\n        [root@localhost ~]# touch 123.txt <br>\n        [root@localhost ~]# cp 123.txt 234.txt <br>\n        [root@localhost ~]# ls <br>\n        123.txt  anaconda-ks.cfg  Documents  initial-setup-ks.cfg  Pictures  Templates <br>\n        234.txt  Desktop          Downloads  Music                 Public    Videos <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n  \n  <p>例：复制一个文件夹到另一个文件夹</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# mkdir 1 <br>\n        [root@localhost ~]# cp -r 1 2 <br>\n        [root@localhost ~]# ls <br>\n        1        234.txt          Documents             Music     Templates <br>\n        123.txt  anaconda-ks.cfg  Downloads             Pictures  Videos <br>\n        2        Desktop          initial-setup-ks.cfg  Public <br>\n        [root@localhost ~]#</code></p>\n    \n    <p>PS：如果目标目录不存在，那么就复制成相应目录，如果存在，则源目录成为目标目录的子目录。</p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"移动文件或目录\"><strong>移动文件或目录</strong></h3>\n\n<blockquote>\n  <p>mv</p>\n  \n  <p>例：更改文件名</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# ls <br>\n        1        234.txt          Documents             Music     Templates <br>\n        123.txt  anaconda-ks.cfg  Downloads             Pictures  Videos <br>\n        2        Desktop          initial-setup-ks.cfg  Public <br>\n        [root@localhost ~]# mv 123.txt 321.txt <br>\n        [root@localhost ~]# ls <br>\n        1        321.txt          Documents             Music     Templates <br>\n        2        anaconda-ks.cfg  Downloads             Pictures  Videos <br>\n        234.txt  Desktop          initial-setup-ks.cfg  Public <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n  \n  <p>例：更改目录名</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# ls <br>\n        1        234.txt          Documents             Music     Templates <br>\n        123.txt  anaconda-ks.cfg  Downloads             Pictures  Videos <br>\n        2        Desktop          initial-setup-ks.cfg  Public <br>\n        [root@localhost ~]# touch 1/1.txt <br>\n        [root@localhost ~]# mv 1 3 <br>\n        [root@localhost ~]# ls <br>\n        2        321.txt          Documents             Music     Templates <br>\n        234.txt  anaconda-ks.cfg  Downloads             Pictures  Videos <br>\n        3        Desktop          initial-setup-ks.cfg  Public <br>\n        [root@localhost ~]# mv 3 2 <br>\n        [root@localhost ~]# ls <br>\n        2        anaconda-ks.cfg  Downloads             Pictures   Videos <br>\n        234.txt  Desktop          initial-setup-ks.cfg  Public <br>\n        321.txt  Documents        Music                 Templates <br>\n        [root@localhost ~]# ls 2/3/1.txt <br>\n        2/3/1.txt <br>\n        [root@localhost ~]#</code></p>\n    \n    <p>PS：如果目标目录不存在，那么就重命名成相应目录，如果存在，则源目录成为目标目录的子目录。</p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"与文档相关命令\"><strong>与文档相关命令</strong></h3>\n\n<blockquote>\n  <p>cat，tac，more，less，head，tail</p>\n  \n  <p>例：正序逆序查看文档</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# echo 12321312312 &gt; 321.txt <br>\n        [root@localhost ~]# echo 32132132132 &gt;&gt; 321.txt <br>\n        [root@localhost ~]# cat 123.txt <br>\n        12321312312 <br>\n        32132132132 <br>\n        [root@localhost ~]# tac 123.txt <br>\n        32132132132 <br>\n        12321312312 <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n  \n  <p>例：显示行号</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# cat -n 123.txt <br>\n         1  12321312312 <br>\n         2  32132132132 <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n  \n  <p>例：显示所有字符，包括特殊字符</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# cat -A 123.txt <br>\n        12321312312$ <br>\n        32132132132$ <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n  \n  <p>例：将要显示的文件内容重定向到文件中</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# cat 234.txt <br>\n        [root@localhost ~]# cat 123.txt &gt;&gt; 234.txt <br>\n        [root@localhost ~]# cat 234.txt <br>\n        12321312312 <br>\n        32132132132 <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n  \n  <p>PS：通过less查看文件内容时可以上下翻页，也可以通过”/字符串”，”?字符串”来搜索字符串，区别是”/字符串”是在当前行向下搜索，”?字符串”是在当前行向上搜索。可以按”n”显示下一个匹配字符串。</p>\n  \n  <p>PS：快捷键：<strong>j向下，k向上，g首部，G尾部</strong>。</p>\n  \n  <p>例：查看文件前5行内容</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# head -n3 123.txt <br>\n        12321312312 <br>\n        32132132132 <br>\n        21321321312 <br>\n        [root@localhost ~]# head -n 3 123.txt <br>\n        12321312312 <br>\n        32132132132 <br>\n        21321321312 <br>\n        [root@localhost ~]# head -3 123.txt <br>\n        12321312312 <br>\n        32132132132 <br>\n        21321321312 <br>\n        [root@localhost ~]#</code></p>\n    \n    <p>PS：tail也可以这么用，默认显示10行。</p>\n  </blockquote>\n  \n  <p>例：动态显示文件最后10行内容</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# tail -f 123.txt <br>\n        21321321312 <br>\n        12321312312 <br>\n        32132132132 <br>\n        21321321312 <br>\n        12321312312 <br>\n        32132132132 <br>\n        21321321312 <br>\n        12321312312 <br>\n        32132132132 <br>\n        21321321312</code></p>\n    \n    <p>PS：一直等待更新，如果有更新，则显示更新后该文件最后10行内容。</p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"通配符的使用\"><strong>通配符的使用</strong></h3>\n\n<blockquote>\n  <p>*，?</p>\n  \n  <p>例：使用通配符匹配文件</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# ls -l *.txt <br>\n        -rw-r--r-- 1 root root 180 3月  29 15:03 123.txt <br>\n        -rw-r--r-- 1 root root  24 3月  29 14:49 234.txt <br>\n        [root@localhost ~]# ls -l ???.txt <br>\n        -rw-r--r-- 1 root root 180 3月  29 15:03 123.txt <br>\n        -rw-r--r-- 1 root root  24 3月  29 14:49 234.txt <br>\n        [root@localhost ~]#</code></p>\n    \n    <p>PS：*匹配任意个字符，?匹配一个字符。</p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"文件类型\"><strong>文件类型</strong></h3>\n\n<blockquote>\n  <p>- 普通文件</p>\n  \n  <p>d 目录文件</p>\n  \n  <p>b 块设备文件(磁盘)</p>\n  \n  <p>s 套接字文件(通信文件)</p>\n  \n  <p>l 软链接文件</p>\n  \n  <p>c 串口设备文件(键盘、鼠标等)</p>\n</blockquote>\n\n\n\n<h3 id=\"文件权限\"><strong>文件权限</strong></h3>\n\n<blockquote>\n  <p><strong>rwx(读写执行)</strong></p>\n  \n  <p><strong>r:4,w:2,x:1</strong></p>\n</blockquote>\n\n\n\n<h3 id=\"文件所属主所属组和其他人\"><strong>文件所属主，所属组和其他人</strong></h3>\n\n<blockquote>\n  <p>[2-4]文件所属主权限</p>\n  \n  <p>[5-7]文件所属组权限</p>\n  \n  <p>[8-10]其他人权限 <br>\n  <code>[root@localhost ~]# ls -l 123.txt <br>\n      -rw-r--r-- 1 root root 180 3月  29 15:03 123.txt</code></p>\n</blockquote>\n\n\n\n<h3 id=\"更改文件权限\"><strong>更改文件权限</strong></h3>\n\n<blockquote>\n  <p>chmod</p>\n  \n  <p>例：修改文件的权限1</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# ls -l 123.txt <br>\n        -rw-r--r-- 1 root root 180 3月  29 15:03 123.txt <br>\n        [root@localhost ~]# chmod 700 123.txt <br>\n        [root@localhost ~]# ls -l 123.txt <br>\n        -rwx------ 1 root root 180 3月  29 15:03 123.txt <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n  \n  <p>例：修改文件的权限2</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# ls -l 123.txt <br>\n        -rwx------ 1 root root 180 3月  29 15:03 123.txt <br>\n        [root@localhost ~]# chmod u-x,go+r 123.txt <br>\n        [root@localhost ~]# ls -l 123.txt <br>\n        -rw-r--r-- 1 root root 180 3月  29 15:03 123.txt <br>\n        [root@localhost ~]#</code></p>\n    \n    <p>PS：u代表文件所属主，g代表文件所属组，o代表其他。</p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"inode解析\"><strong>inode解析</strong></h3>\n\n<blockquote>\n  <p>inode表示链接占用的节点，与硬链接有关。</p>\n  \n  <p>例：查看inode信息</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# ls -a 123.txt <br>\n        123.txt <br>\n        [root@localhost ~]# ls -i 123.txt <br>\n        137915477 123.txt</code></p>\n  </blockquote>\n</blockquote>\n\n<p><strong><font size=\"6\">参考《跟阿铭学Linux》</font></strong></p>\n\n<hr></div>\n        <script type=\"text/javascript\">\n            $(function () {\n                $(\'pre.prettyprint code\').each(function () {\n                    var lines = $(this).text().split(\'\\n\').length;\n                    var $numbering = $(\'<ul/>\').addClass(\'pre-numbering\').hide();\n                    $(this).addClass(\'has-numbering\').parent().append($numbering);\n                    for (i = 1; i <= lines; i++) {\n                        $numbering.append($(\'<li/>\').text(i));\n                    };\n                    $numbering.fadeIn(1700);\n                });\n            });\n        </script>\n   \n', '2016-04-16 01:21:03', '0');
INSERT INTO `article` VALUES ('10008', '10003', 'Bean装配细节', '\n\n<h1 style=\"text-align:center\"><span style=\"font-size:18px\">Bean<span style=\"font-family:宋体\">装配细节</span></span></h1>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>基本概述</h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;在<span style=\"font-family:Calibri\">spring</span><span style=\"font-family:宋体\">容器内拼凑</span><span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">叫做装配。装配</span><span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">的时候，需要告诉容器哪些</span><span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">以及容器如何使用依赖注入将它们配合在一起。</span></p>\n<p>&nbsp;</p>\n<h2>基本装配</h2>\n<h3>使用<span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">装配</span></h3>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;xml<span style=\"font-family:宋体\">是最常见的</span><span style=\"font-family:Calibri\">spring</span><span style=\"font-family:宋体\">应用系统配置源。几种</span><span style=\"font-family:Calibri\">spring</span><span style=\"font-family:宋体\">容器都支持使用</span><span style=\"font-family:Calibri\">xml</span><span style=\"font-family:宋体\">装配</span><span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">，包括：</span></p>\n<p>1<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">XmlBeanFactory</span><span style=\"font-family:宋体\">：调用</span><span style=\"font-family:Calibri\">ClassPathResource</span><span style=\"font-family:宋体\">载入上下文定义文件</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">比如</span><span style=\"font-family:Calibri\">applicationContext.xml)</span><span style=\"font-family:宋体\">。</span></p>\n<p>2<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">ClassPathXmlApplicationContext</span><span style=\"font-family:宋体\">：从类路径载入上下文定义文件。</span></p>\n<p>3<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">XmlWebApplicationContext</span><span style=\"font-family:宋体\">：从</span><span style=\"font-family:Calibri\">web</span><span style=\"font-family:宋体\">应用上下文中载入定义文件。</span></p>\n<p>4<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">FileSystemXmlApplicationContext</span><span style=\"font-family:宋体\">：通过文件系统载入。</span></p>\n<p>&nbsp;</p>\n<h3>Scope</h3>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;prototype<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">singleton</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">request&nbsp;</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">session</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">global-sessionspring</span><span style=\"font-family:宋体\">中的</span><span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">缺省情况下是单例模式。始终返回一个实例。若想返回不同的实例的话需要定义成原型模式。在</span><span style=\"font-family:Calibri\">Web</span><span style=\"font-family:宋体\">应用中，可以使用后面三种方式。可以在</span><span style=\"font-family:Calibri\">&lt;bean&gt;</span><span style=\"font-family:宋体\">元素中添加</span><span style=\"font-family:Calibri\">scope</span><span style=\"font-family:宋体\">属性。</span></p>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160221170409528\" width=\"800\" height=\"300\" alt=\"\"></div>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：尽量使用</span><span style=\"font-family:Calibri\">singleton</span><span style=\"font-family:宋体\">，没有特殊用途建议不要使用</span><span style=\"font-family:Calibri\">prototype</span><span style=\"font-family:宋体\">。</span></span></p>\n<p>&nbsp;</p>\n<h3>set<span style=\"font-family:宋体\">方法注入依赖</span></h3>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;通过<span style=\"font-family:Calibri\">&lt;bean&gt;</span><span style=\"font-family:宋体\">元素的</span><span style=\"font-family:Calibri\">&lt;property&gt;</span><span style=\"font-family:宋体\">子元素可以指明使用相应的</span><span style=\"font-family:Calibri\">set</span><span style=\"font-family:宋体\">方法来注入依赖。可以注入任何东西，从基本类型到集合类，甚至是应用系统</span><span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">。设置</span><span style=\"font-family:Calibri\">null</span><span style=\"font-family:宋体\">的话，可以在</span><span style=\"font-family:Calibri\">&lt;property&gt;</span><span style=\"font-family:宋体\">元素下使用</span><span style=\"font-family:Calibri\">&lt;null&nbsp;/&gt;</span><span style=\"font-family:宋体\">元素。</span></p>\n<p>案例<span style=\"font-family:Calibri\">1</span><span style=\"font-family:宋体\">：简单</span><span style=\"font-family:Calibri\">Bean</span><span style=\"font-family:宋体\">配置</span></p>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_1_2745813\" name=\"code\" class=\"html\">&lt;bean id=”xxx” class=”类全路径”&gt;\n    &lt;property name=”属性1” value=”值1” /&gt;\n    &lt;property name=”属性2”&gt;\n        &lt;value&gt;值2&lt;/value&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;</pre><br>\n<p>案例<span style=\"font-family:Calibri\">2</span><span style=\"font-family:宋体\">：引用其它</span><span style=\"font-family:Calibri\">Bean</span></p>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_2_7794560\" name=\"code\" class=\"html\">&lt;bean id=&quot;foo&quot; class=&quot;...Foo&quot;&gt;\n    &lt;property name=&quot;name&quot;&gt;\n        &lt;ref bean=&quot;bar&quot;&gt;\n    &lt;/property&gt;  \n&lt;/bean&gt;\n &lt;bean id=&quot;bar&quot; class=&quot;...Bar&quot;&gt;\n &lt;/bean&gt;</pre><br>\n<p>案例<span style=\"font-family:Calibri\">3</span><span style=\"font-family:宋体\">：内部</span><span style=\"font-family:Calibri\">Bean</span></p>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_3_2636346\" name=\"code\" class=\"html\">&lt;bean id=&quot;foo&quot; class=&quot;...Foo&quot;&gt;\n    &lt;property name=&quot;bar&quot;&gt;\n        &lt;bean class=&quot;...Bar&quot;&gt;\n    &lt;/property&gt;  \n&lt;/bean&gt;</pre>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：内部</span><span style=\"font-family:Calibri\">Bean</span><span style=\"font-family:宋体\">的缺点就是无法在其它地方重用，不过如果这个</span><span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">，只要为它服务的话，那么可以用内部</span><span style=\"font-family:Calibri\">Bean</span><span style=\"font-family:宋体\">。</span></span></p>\n<br>\n<h4>装配集合</h4>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;除了基本类型和对象类型之外，集合类型的属性也是常用的，故有必要掌握集合在<span style=\"font-family:Calibri\">Spring</span><span style=\"font-family:宋体\">的配置。</span></p>\n<h5>数组</h5>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_4_1066183\" name=\"code\" class=\"html\">		&lt;property name=&quot;empName&quot;&gt;\n			&lt;list&gt;\n				&lt;value&gt;zs&lt;/value&gt;\n				&lt;value&gt;ls&lt;/value&gt;\n				&lt;value&gt;ww&lt;/value&gt;\n			&lt;/list&gt;\n		&lt;/property&gt;</pre>\n<h5>List</h5>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_5_4271766\" name=\"code\" class=\"html\">		&lt;property name=&quot;empList&quot;&gt;\n			&lt;list&gt;\n				&lt;ref bean=&quot;emp1&quot; /&gt;\n				&lt;ref bean=&quot;emp2&quot; /&gt;\n			&lt;/list&gt;\n		&lt;/property&gt;</pre>\n<h5>Set</h5>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_6_8590164\" name=\"code\" class=\"html\">		&lt;property name=&quot;empSet&quot;&gt;\n			&lt;set&gt;\n				&lt;ref bean=&quot;emp1&quot; /&gt;\n				&lt;ref bean=&quot;emp2&quot; /&gt;\n			&lt;/set&gt;\n		&lt;/property&gt;</pre>\n<h5>Map</h5>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_7_7020001\" name=\"code\" class=\"html\">		&lt;property name=&quot;empMap&quot;&gt;\n			&lt;map&gt;\n				&lt;entry key=&quot;1&quot; value-ref=&quot;emp1&quot;/&gt;\n				&lt;entry key=&quot;2&quot; value-ref=&quot;emp2&quot;/&gt;\n			&lt;/map&gt;\n		&lt;/property&gt;</pre>\n<h5>属性集合</h5>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_8_5449838\" name=\"code\" class=\"html\">		&lt;property name=&quot;properties&quot;&gt;\n			&lt;props&gt;\n				&lt;prop key=&quot;pp1&quot;&gt;abcd&lt;/prop&gt;\n				&lt;prop key=&quot;pp2&quot;&gt;hello&lt;/prop&gt;\n			&lt;/props&gt;\n		&lt;/property&gt;</pre>\n<h5>案例</h5>\n<h6>Bean<span style=\"font-family:宋体\">类</span></h6>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_9_291625\" name=\"code\" class=\"java\">package com.pc.collection;\n\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Properties;\nimport java.util.Set;\n\n\n/**\n * \n * @author Switch\n * @function 部门Bean\n * @description\n *\n */\npublic class Department {\n	\n	private String name;\n	private String[] empName;	// 数组\n	private List&lt;Employee&gt; empList;	// list集合\n	private Set&lt;Employee&gt; empSet;	// set集合\n	private Map&lt;Integer, Employee&gt; empMap;	// map集合\n	private Properties properties;	// Properties\n	\n	public Properties getProperties() {\n		return properties;\n	}\n	public void setProperties(Properties properties) {\n		this.properties = properties;\n	}\n	public Map&lt;Integer, Employee&gt; getEmpMap() {\n		return empMap;\n	}\n	public void setEmpMap(Map&lt;Integer, Employee&gt; empMap) {\n		this.empMap = empMap;\n	}\n	public Set&lt;Employee&gt; getEmpSet() {\n		return empSet;\n	}\n	public void setEmpSet(Set&lt;Employee&gt; empSet) {\n		this.empSet = empSet;\n	}\n	public List&lt;Employee&gt; getEmpList() {\n		return empList;\n	}\n	public void setEmpList(List&lt;Employee&gt; empList) {\n		this.empList = empList;\n	}\n	public String getName() {\n		return name;\n	}\n	public void setName(String name) {\n		this.name = name;\n	}\n	public String[] getEmpName() {\n		return empName;\n	}\n	public void setEmpName(String[] empName) {\n		this.empName = empName;\n	}\n	\n}</pre><br>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_10_3497208\" name=\"code\" class=\"java\">package com.pc.collection;\n/**\n * \n * @author Switch\n * @function 雇员Bean\n * @description\n *\n */\npublic class Employee {\n	private String name;\n	private int id;\n	\n	public int getId() {\n		return id;\n	}\n\n	public void setId(int id) {\n		this.id = id;\n	}\n\n	public String getName() {\n		return name;\n	}\n\n	public void setName(String name) {\n		this.name = name;\n	}\n	\n}</pre><br>\n<h6>配置文件：<span style=\"font-family:Calibri\">beans.xml</span></h6>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_11_9975196\" name=\"code\" class=\"html\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \n	xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;\n	xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\n	xsi:schemaLocation=&quot;\n			http://www.springframework.org/schema/beans \n			http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\n			http://www.springframework.org/schema/aop \n			http://www.springframework.org/schema/aop/spring-aop-2.5.xsd\n			http://www.springframework.org/schema/tx \n			http://www.springframework.org/schema/tx/spring-tx-2.5.xsd&quot;&gt;\n	&lt;!-- 在容器文件中配置bean(service/dao/domain/action/数据源) --&gt;\n	&lt;bean id=&quot;department&quot; class=&quot;com.pc.collection.Department&quot;&gt;\n		&lt;property name=&quot;name&quot; value=&quot;开发部&quot; /&gt;\n		&lt;!-- 给数组注入值 --&gt;\n		&lt;property name=&quot;empName&quot;&gt;\n			&lt;list&gt;\n				&lt;value&gt;zs&lt;/value&gt;\n				&lt;value&gt;ls&lt;/value&gt;\n				&lt;value&gt;ww&lt;/value&gt;\n			&lt;/list&gt;\n		&lt;/property&gt;\n		&lt;!-- 给list注入值,可以有相同的对象 --&gt;\n		&lt;property name=&quot;empList&quot;&gt;\n			&lt;list&gt;\n				&lt;ref bean=&quot;emp1&quot; /&gt;\n				&lt;ref bean=&quot;emp2&quot; /&gt;\n			&lt;/list&gt;\n		&lt;/property&gt;\n		&lt;!-- 给set注入值，不可以有相同的对象 --&gt;\n		&lt;property name=&quot;empSet&quot;&gt;\n			&lt;set&gt;\n				&lt;ref bean=&quot;emp1&quot; /&gt;\n				&lt;ref bean=&quot;emp2&quot; /&gt;\n			&lt;/set&gt;\n		&lt;/property&gt;\n		&lt;!-- 给map注入值，只要key不一样就可以装配 --&gt;\n		&lt;property name=&quot;empMap&quot;&gt;\n			&lt;map&gt;\n				&lt;entry key=&quot;1&quot; value-ref=&quot;emp1&quot;/&gt;\n				&lt;entry key=&quot;2&quot; value-ref=&quot;emp2&quot;/&gt;\n			&lt;/map&gt;\n		&lt;/property&gt;\n		&lt;!-- 配置属性集合 --&gt;\n		&lt;property name=&quot;properties&quot;&gt;\n			&lt;props&gt;\n				&lt;prop key=&quot;pp1&quot;&gt;abcd&lt;/prop&gt;\n				&lt;prop key=&quot;pp2&quot;&gt;hello&lt;/prop&gt;\n			&lt;/props&gt;\n		&lt;/property&gt;\n	&lt;/bean&gt;\n	\n	&lt;bean id=&quot;emp1&quot; class=&quot;com.pc.collection.Employee&quot;&gt;\n		&lt;property name=&quot;name&quot; value=&quot;张三&quot; /&gt;\n		&lt;property name=&quot;id&quot; value=&quot;1&quot; /&gt;\n	&lt;/bean&gt;\n	&lt;bean id=&quot;emp2&quot; class=&quot;com.pc.collection.Employee&quot;&gt;\n		&lt;property name=&quot;name&quot; value=&quot;李四&quot; /&gt;\n		&lt;property name=&quot;id&quot; value=&quot;2&quot; /&gt;\n	&lt;/bean&gt;\n&lt;/beans&gt;</pre><br>\n<h6>测试文件</h6>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_12_5689035\" name=\"code\" class=\"java\">package com.pc.collection;\n\nimport java.util.Enumeration;\nimport java.util.Iterator;\nimport java.util.Properties;\nimport java.util.Map.Entry;\n\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n/**\n * \n * @author Switch\n * @function 测试类\n * @description\n */\npublic class Test {\n\n	public static void main(String[] args) {\n		// 通过applicationContext获取Bean\n		ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;com/pc/collection/beans.xml&quot;);\n		Department department = (Department) applicationContext.getBean(&quot;department&quot;);\n		System.out.println(department.getName());\n		\n		// 测试数组\n		for(String empName : department.getEmpName()) {\n			System.out.println(empName);\n		}\n		\n		// 测试List\n		System.out.println(&quot;----------通过list集合取出数据---------&quot;);\n		for(Employee employee : department.getEmpList()) {\n			System.out.println(employee.getName());\n		}\n		\n		// 测试Set\n		System.out.println(&quot;----------通过set集合取出数据---------&quot;);\n		for(Employee employee : department.getEmpSet()) {\n			System.out.println(employee.getName());\n		}\n		\n		// 测试Map\n		System.out.println(&quot;----------通过map集合取出数据,迭代器---------&quot;);\n		// 迭代器\n		Iterator&lt;Integer&gt; iterator = department.getEmpMap().keySet().iterator();\n		while(iterator.hasNext()) {\n			Integer integer = iterator.next();\n			Employee employee = department.getEmpMap().get(integer);\n			System.out.println(integer + &quot; &quot; + employee.getName());\n		}\n		System.out.println(&quot;----------通过map集合取出数据,for增强---------&quot;);\n		// for增强\n		for(Entry&lt;Integer, Employee&gt; entry : department.getEmpMap().entrySet()) {\n			System.out.println(entry.getKey() + &quot; &quot; + entry.getValue().getName());\n		}\n		\n		System.out.println(&quot;----------通过Properties取出数据，For增强---------&quot;);\n		Properties properties = department.getProperties();\n		for (Entry&lt;Object, Object&gt; entry : properties.entrySet()) {\n			System.out.println(entry.getKey() + &quot; &quot; + entry.getValue());\n		}\n		\n		System.out.println(&quot;----------通过Properties取出数据，枚举---------&quot;);\n		Enumeration enumeration =  properties.keys();\n		while(enumeration.hasMoreElements()) {\n			String key = (String) enumeration.nextElement();\n			System.out.println(key + &quot; &quot; + properties.getProperty(key));\n		}\n	}\n}</pre><br>\n<h4>继承配置</h4>\n<p>&nbsp; &nbsp; 当需要从父对象中继承属性配置的时候，可以采用继承配置的方式。</p>\n<h5>配置方法</h5>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_13_4467536\" name=\"code\" class=\"html\">	&lt;!-- 配置一个学生对象 --&gt;\n	&lt;bean id=&quot;student&quot; class=&quot;com.pc.inherit.Student&quot;&gt;\n		&lt;property name=&quot;name&quot; value=&quot;张三&quot; /&gt;\n		&lt;property name=&quot;age&quot; value=&quot;20&quot; /&gt;\n	&lt;/bean&gt;\n	&lt;!-- 配置Graduate对象 --&gt;\n	&lt;bean id=&quot;graduate&quot; parent=&quot;student&quot; class=&quot;com.pc.inherit.Graduate&quot;&gt;\n		&lt;!-- 如果配置父对象属性，则会替换 --&gt;\n		&lt;property name=&quot;name&quot; value=&quot;李四&quot; /&gt;\n		&lt;property name=&quot;degree&quot; value=&quot;学士&quot; /&gt;\n	&lt;/bean&gt;</pre><br>\n<h5>案例</h5>\n<h6>Bean<span style=\"font-family:宋体\">类</span></h6>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_14_4325832\" name=\"code\" class=\"java\">package com.pc.inherit;\n/**\n * \n * @author Switch\n * @function 学生类\n * @description\n *\n */\npublic class Student {\n	protected String name;\n	protected int age;\n	public String getName() {\n		return name;\n	}\n	public void setName(String name) {\n		this.name = name;\n	}\n	public int getAge() {\n		return age;\n	}\n	public void setAge(int age) {\n		this.age = age;\n	}\n	\n}</pre><br>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_15_1119466\" name=\"code\" class=\"java\">package com.pc.inherit;\n/**\n * \n * @author Switch\n * @function 毕业生类\n * @description\n *\n */\npublic class Graduate extends Student {\n	private String degree;\n\n	public String getDegree() {\n		return degree;\n	}\n\n	public void setDegree(String degree) {\n		this.degree = degree;\n	}\n	\n}</pre>\n<h6>配置文件：<span style=\"font-family:Calibri\">beans.xml</span></h6>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_16_7946119\" name=\"code\" class=\"html\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \n	xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;\n	xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\n	xsi:schemaLocation=&quot;\n			http://www.springframework.org/schema/beans \n			http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\n			http://www.springframework.org/schema/aop \n			http://www.springframework.org/schema/aop/spring-aop-2.5.xsd\n			http://www.springframework.org/schema/tx \n			http://www.springframework.org/schema/tx/spring-tx-2.5.xsd&quot;&gt;\n	&lt;!-- 在容器文件中配置bean(service/dao/domain/action/数据源) --&gt;\n	&lt;!-- 配置一个学生对象 --&gt;\n	&lt;bean id=&quot;student&quot; class=&quot;com.pc.inherit.Student&quot;&gt;\n		&lt;property name=&quot;name&quot; value=&quot;张三&quot; /&gt;\n		&lt;property name=&quot;age&quot; value=&quot;20&quot; /&gt;\n	&lt;/bean&gt;\n	&lt;!-- 配置Graduate对象 --&gt;\n	&lt;bean id=&quot;graduate&quot; parent=&quot;student&quot; class=&quot;com.pc.inherit.Graduate&quot;&gt;\n		&lt;!-- 如果配置父对象属性，则会替换 --&gt;\n		&lt;property name=&quot;name&quot; value=&quot;李四&quot; /&gt;\n		&lt;property name=&quot;degree&quot; value=&quot;学士&quot; /&gt;\n	&lt;/bean&gt;\n&lt;/beans&gt;</pre>\n<h6>测试文件</h6>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_17_2264518\" name=\"code\" class=\"java\">package com.pc.inherit;\n\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\npublic class Test {\n\n	/**\n	 * @param args\n	 */\n	public static void main(String[] args) {\n		// TODO Auto-generated method stub\n		// 通过applicationContext获取bean\n		ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;com/pc/inherit/beans.xml&quot;);\n		Graduate graduate = (Graduate) applicationContext.getBean(&quot;graduate&quot;);\n		\n		System.out.println(graduate.getName() + &quot; &quot; + graduate.getAge() + &quot; &quot; + graduate.getDegree());\n	}\n\n}</pre><br>\n<h3>通过构造方法注入&#20540;</h3>\n<p>&nbsp; &nbsp; 除了通过<span style=\"font-family:Calibri\">Set</span><span style=\"font-family:宋体\">方法注入外，也可以使用构造方法的方法来注入&#20540;。同时，这种注入方式带来的好处就是，可以明确知道哪些属性必须要赋&#20540;，也就是说通过构造强制依赖关系，不可能实例化不完全或者无法使用的</span><span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">。</span></p>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_18_4074662\" name=\"code\" class=\"html\">	&lt;!-- 配置一个员工对象 --&gt;\n	&lt;bean id=&quot;employee&quot; class=&quot;com.pc.constructor.Employee&quot;&gt;\n		&lt;!-- 通过构造方法来注入属性值 --&gt;\n		&lt;constructor-arg index=&quot;0&quot; type=&quot;java.lang.String&quot; value=&quot;张三&quot;/&gt;\n		&lt;constructor-arg index=&quot;1&quot; type=&quot;int&quot; value=&quot;20&quot; /&gt;\n	&lt;/bean&gt;</pre><br>\n<h4>案例</h4>\n<h5>Bean<span style=\"font-family:宋体\">类</span></h5>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_19_8916447\" name=\"code\" class=\"java\">package com.pc.constructor;\n/**\n * \n * @author Switch\n * @function 员工类\n * @description\n *\n */\npublic class Employee {\n	private String name;\n	private int age;\n	\n	public Employee() {\n	}\n	public Employee(String name, int age) {\n		this.name = name;\n		this.age = age;\n	}\n	public String getName() {\n		return name;\n	}\n	public void setName(String name) {\n		this.name = name;\n	}\n	public int getAge() {\n		return age;\n	}\n	public void setAge(int age) {\n		this.age = age;\n	}\n	\n}</pre>\n<h5>配置文件：<span style=\"font-family:Calibri\">beans.xml</span></h5>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_20_3758234\" name=\"code\" class=\"html\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \n	xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;\n	xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\n	xsi:schemaLocation=&quot;\n			http://www.springframework.org/schema/beans \n			http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\n			http://www.springframework.org/schema/aop \n			http://www.springframework.org/schema/aop/spring-aop-2.5.xsd\n			http://www.springframework.org/schema/tx \n			http://www.springframework.org/schema/tx/spring-tx-2.5.xsd&quot;&gt;\n	&lt;!-- 在容器文件中配置bean(service/dao/domain/action/数据源) --&gt;\n	&lt;!-- 配置一个员工对象 --&gt;\n	&lt;bean id=&quot;employee&quot; class=&quot;com.pc.constructor.Employee&quot;&gt;\n		&lt;!-- 通过构造方法来注入属性值 --&gt;\n		&lt;constructor-arg index=&quot;0&quot; type=&quot;java.lang.String&quot; value=&quot;张三&quot;/&gt;\n		&lt;constructor-arg index=&quot;1&quot; type=&quot;int&quot; value=&quot;20&quot; /&gt;\n	&lt;/bean&gt;\n&lt;/beans&gt;</pre>\n<h5>测试文件</h5>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_21_8600020\" name=\"code\" class=\"java\">package com.pc.constructor;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n/**\n * \n * @author Switch\n * @function 测试类\n * @description\n *\n */\npublic class Test {\n	public static void main(String[] args) {\n		ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;com/pc/constructor/beans.xml&quot;);\n		Employee employee = (Employee) applicationContext.getBean(&quot;employee&quot;);\n		System.out.println(employee.getName() + &quot; &quot; + employee.getAge());\n		\n	}\n}</pre><br>\n<h2>自动装配</h2>\n<p>&nbsp; &nbsp; 通过在<span style=\"font-family:Calibri\">&lt;bean&gt;</span><span style=\"font-family:宋体\">元素中添加</span><span style=\"font-family:Calibri\">autowire</span><span style=\"font-family:宋体\">属性来进行配置。</span></p>\n<h3>基本类型</h3>\n<p>1<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">byNam</span>e：寻找和属性名相同的<span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">，若找不到，则装不上。</span></p>\n<p>2<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">byType</span><span style=\"font-family:宋体\">：寻找和属性类型相同的</span><span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">，找不到，装不上，找到多个抛异常。</span></p>\n<p>3<span style=\"font-family:宋体\">、</span>constructor<span style=\"font-family:宋体\">：</span>查找和<span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">的构造参数一致的一个或多个</span><span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">，若找不到或找到多个，抛异常。</span></p>\n<p>4<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">autodetect:</span><span style=\"font-family:宋体\">：</span><span style=\"font-family:Calibri\">(3)</span><span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">(2)</span><span style=\"font-family:宋体\">之间选一个方式。不确定性的处理与</span><span style=\"font-family:Calibri\">(3)</span><span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">(2)</span><span style=\"font-family:宋体\">一致。</span>如果发现默认的构造器，那么将使用<span style=\"font-family:Calibri\">byType</span><span style=\"font-family:宋体\">的方法。</span></p>\n<p>5<span style=\"font-family:宋体\">、</span>default<span style=\"font-family:宋体\">：</span>这个需要在<span style=\"font-family:Calibri\">&lt;beans&nbsp;defualt-autorwire=</span>”指定”&nbsp;/&gt;<span style=\"font-family:宋体\">，</span>也就是说<span style=\"font-family:Calibri\">autowire</span><span style=\"font-family:宋体\">的&#20540;继承自</span><span style=\"font-family:Calibri\">default-autowire</span><span style=\"font-family:宋体\">的&#20540;。</span></p>\n<p>6<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">no</span><span style=\"font-family:宋体\">：不自动装配，这</span>也是<span style=\"font-family:Calibri\">autowrite</span><span style=\"font-family:宋体\">的默认&#20540;。</span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：不推荐使用自动装配，因为自动装配往往不能直观的看出哪些属性被配置了。</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：如果</span><span style=\"font-family:Calibri\">&lt;beans&gt;</span><span style=\"font-family:宋体\">指定了</span><span style=\"font-family:Calibri\">default-autowire</span><span style=\"font-family:宋体\">属性，那么所有</span><span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">的</span><span style=\"font-family:Calibri\">default</span><span style=\"font-family:宋体\">属性&#20540;就是这个。如果没有指定</span><span style=\"font-family:Calibri\">default-autowire</span><span style=\"font-family:宋体\">属性，则</span><span style=\"font-family:Calibri\">default-autowire</span><span style=\"font-family:宋体\">的默认&#20540;是</span><span style=\"font-family:Calibri\">no</span><span style=\"font-family:宋体\">。</span></span></p>\n<p>PS<span style=\"font-family:宋体\">：如果使用自动装配同时使用手动装配，那么自动装配的属性，将被手动装配的属性覆盖。</span></p>\n<p>&nbsp;</p>\n<h3>案例</h3>\n<h4>Bean<span style=\"font-family:宋体\">类</span></h4>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_22_5393654\" name=\"code\" class=\"java\">package com.pc.autowire;\npublic class Dog {\n	private String name;\n	private int age;\n	\n	public String getName() {\n		return name;\n	}\n	public void setName(String name) {\n		this.name = name;\n	}\n	public int getAge() {\n		return age;\n	}\n	public void setAge(int age) {\n		this.age = age;\n	}\n}</pre><br>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_23_8283593\" name=\"code\" class=\"java\">package com.pc.autowire;\npublic class Master {\n	private String name;\n	private Dog dog;\n	\n	public String getName() {\n		return name;\n	}\n	public void setName(String name) {\n		this.name = name;\n	}\n	public Dog getDog() {\n		return dog;\n	}\n	public void setDog(Dog dog) {\n		this.dog = dog;\n	}\n}</pre>\n<h4>配置文件：<span style=\"font-family:Calibri\">beans.xml</span></h4>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_24_1489177\" name=\"code\" class=\"java\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;beans \n	xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n 	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n 	xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n 	xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\n 	xsi:schemaLocation=&quot;\n 		http://www.springframework.org/schema/beans \n 		http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\n    	http://www.springframework.org/schema/context \n    	http://www.springframework.org/schema/context/spring-context-2.5.xsd\n    	http://www.springframework.org/schema/tx \n    	http://www.springframework.org/schema/tx/spring-tx-2.5.xsd&quot;&gt;\n	&lt;!-- 在容器文件中配置bean(service/dao/domain/action/数据源) --&gt;\n	&lt;!-- 配置一个master对象 --&gt;\n	&lt;bean id=&quot;master&quot; class=&quot;com.pc.autowire.Master&quot; autowire=&quot;byName&quot;&gt;\n		&lt;property name=&quot;name&quot; value=&quot;张三&quot;/&gt;\n		&lt;!-- 传统set --&gt;\n		&lt;!-- &lt;property name=&quot;dog&quot; ref=&quot;dog&quot; /&gt; --&gt;\n	&lt;/bean&gt;\n	&lt;!-- 配置dog对象 --&gt;\n	&lt;bean id=&quot;dog&quot; class=&quot;com.pc.autowire.Dog&quot;&gt;\n		&lt;property name=&quot;name&quot; value=&quot;小白&quot; /&gt;\n		&lt;property name=&quot;age&quot; value=&quot;3&quot; /&gt;\n	&lt;/bean&gt;\n&lt;/beans&gt;</pre>\n<h4>测试文件</h4>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_25_1347473\" name=\"code\" class=\"java\">package com.pc.autowire;\n\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\npublic class Test {\n	public static void main(String[] args) {\n		ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;com/pc/autowire/beans.xml&quot;);\n		Master master = (Master) applicationContext.getBean(&quot;master&quot;);\n		System.out.println(master.getName() + &quot; &quot; + master.getDog().getName());\n	}\n}</pre><br>\n<h2>注解装配</h2>\n<p>&nbsp; &nbsp; 通过在<span style=\"font-family:Calibri\">&lt;beans&gt;</span><span style=\"font-family:宋体\">元素下配置</span><span style=\"font-family:Calibri\">&lt;context:annotation-config/&gt;</span><span style=\"font-family:宋体\">可以激活在类中探测各种注解。比如说：</span><span style=\"font-family:Calibri\">@Required&nbsp;@Autowire&nbsp;@PostConstrct&nbsp;@PreDestroy&nbsp;@Resource&nbsp;@EJB&nbsp;@PersistenceContext&nbsp;@WebServiceRef</span><span style=\"font-family:宋体\">等等</span></p>\n<br>\n<h2>装配特殊<span style=\"font-family:Calibri\">Bean</span></h2>\n<h3>1、通过配置后加工<span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">，涉及到</span><span style=\"font-family:Calibri\">Bean</span><span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">Bean</span><span style=\"font-family:宋体\">工厂生命周期。</span></h3>\n<h3>2、改变依赖注入，将字符串转换成其它类型。</h3>\n<h3>3、从属性文本装载信息，包括信息国际化。</h3>\n<h3>4、监听并处理其它<span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">及</span><span style=\"font-family:Calibri\">spring</span><span style=\"font-family:宋体\">发布的系统消息。</span></h3>\n<h3>5、知道自己在<span style=\"font-family:Calibri\">spring</span><span style=\"font-family:宋体\">中的唯一表识。</span></h3>\n<br>\n<h3>案例</h3>\n<h4>Bean<span style=\"font-family:宋体\">类</span></h4>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_26_9777309\" name=\"code\" class=\"java\">package com.pc.dispatch;\n/**\n * \n * @author Switch\n * @function 数据库连接信息Bean\n * @description\n *\n */\npublic class DBUtil {\n	private String drivername;\n	private String uri;\n	private String name;\n	private String pwd;\n	\n	public String getDrivername() {\n		return drivername;\n	}\n	public void setDrivername(String drivername) {\n		this.drivername = drivername;\n	}\n	public String getUri() {\n		return uri;\n	}\n	public void setUri(String uri) {\n		this.uri = uri;\n	}\n	public String getName() {\n		return name;\n	}\n	public void setName(String name) {\n		this.name = name;\n	}\n	public String getPwd() {\n		return pwd;\n	}\n	public void setPwd(String pwd) {\n		this.pwd = pwd;\n	}\n}</pre>\n<h4>属性文件：<span style=\"font-family:Calibri\">db.properties</span></h4>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_27_7442995\" name=\"code\" class=\"plain\">#key = value\nname=scott\ndrivername=oracle.jdbc.driver.OracleDriver\nuri=jdbc:oracle:thin:@127.0.0.1:1521:SWITCH\npwd=123456</pre>\n<p>配置文件：<span style=\"font-family:Calibri\">beans.xml</span></p>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_28_8937494\" name=\"code\" class=\"html\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;beans \n	xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n 	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n 	xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n 	xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\n 	xsi:schemaLocation=&quot;\n 		http://www.springframework.org/schema/beans \n 		http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\n    	http://www.springframework.org/schema/context \n    	http://www.springframework.org/schema/context/spring-context-2.5.xsd\n    	http://www.springframework.org/schema/tx \n    	http://www.springframework.org/schema/tx/spring-tx-2.5.xsd&quot;&gt;\n	&lt;!-- 在容器文件中配置bean(service/dao/domain/action/数据源) --&gt;\n	&lt;!-- 配置一个DBUtil对象 --&gt;\n	&lt;!-- 普通方式 --&gt;\n	&lt;!-- \n	&lt;bean id=&quot;dbutil&quot; class=&quot;com.pc.dispatch.DBUtil&quot;&gt;\n		 \n		&lt;property name=&quot;name&quot; value=&quot;scott&quot; /&gt;\n		&lt;property name=&quot;drivername&quot; value=&quot;oracle.jdbc.driver.OracleDriver&quot;/&gt;\n		&lt;property name=&quot;uri&quot; value=&quot;jdbc:oracle:thin:@127.0.0.1:1521:SWITCH&quot; /&gt;\n		&lt;property name=&quot;pwd&quot; value=&quot;123456&quot; /&gt; \n	\n	&lt;/bean&gt;\n	--&gt;\n	&lt;!-- 分散配置,引入db.properties文件 --&gt;\n	&lt;!-- location属性值中的classpath可以通过,隔开，配置多个属性文件  --&gt;\n	&lt;context:property-placeholder location=&quot;classpath:com/pc/dispatch/db.properties&quot;/&gt;\n	&lt;bean id=&quot;dbutil&quot; class=&quot;com.pc.dispatch.DBUtil&quot;&gt;\n		&lt;!-- $占位符，使用占位符代替硬编码 --&gt;\n		&lt;property name=&quot;name&quot; value=&quot;${name}&quot; /&gt;\n		&lt;property name=&quot;drivername&quot; value=&quot;${drivername}&quot; /&gt;\n		&lt;property name=&quot;uri&quot; value=&quot;${uri}&quot; /&gt;\n		&lt;property name=&quot;pwd&quot; value=&quot;${pwd}&quot; /&gt; \n	&lt;/bean&gt;\n&lt;/beans&gt;</pre>\n<h4>测试文件</h4>\n<pre code_snippet_id=\"1583997\" snippet_file_name=\"blog_20160221_29_4094925\" name=\"code\" class=\"java\">package com.pc.dispatch;\n\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\npublic class Test {\n	public static void main(String[] args) {\n		ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;com/pc/dispatch/beans.xml&quot;); \n		DBUtil dbUtil = (DBUtil) applicationContext.getBean(&quot;dbutil&quot;);\n		System.out.println(dbUtil.getDrivername());\n		System.out.println(dbUtil.getUri());\n		System.out.println(dbUtil.getName());\n		System.out.println(dbUtil.getPwd());\n	}\n}</pre>\n<p>&nbsp;</p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：除了分散配置的</span><span style=\"font-family:Calibri\">Bean</span><span style=\"font-family:宋体\">之外，还有后处理器</span><span style=\"font-family:Calibri\">BeanPostProcessor</span><span style=\"font-family:宋体\">，三个感知</span><span style=\"font-family:Calibri\">Bean</span><span style=\"font-family:宋体\">，分别感知自己的名字</span><span style=\"font-family:Calibri\">BeanNameAware</span><span style=\"font-family:宋体\">，感知自己所处的</span><span style=\"font-family:Calibri\">Bean</span><span style=\"font-family:宋体\">工厂</span><span style=\"font-family:Calibri\">BeanFactoryAware</span><span style=\"font-family:宋体\">，感知所在上下文</span><span style=\"font-family:Calibri\">ApplicationContexAware</span><span style=\"font-family:宋体\">。</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n   \n', '2016-04-16 01:21:03', '0');
INSERT INTO `article` VALUES ('10009', '10003', 'Linux学习笔记13', '\n        <div class=\"markdown_views\"><h1 id=\"linux学习笔记13\"><strong>Linux学习笔记13</strong></h1>\n\n<p><div class=\"toc\"><div class=\"toc\">\n<ul>\n<li><a href=\"#linux学习笔记13\">Linux学习笔记13</a><ul>\n<li><a href=\"#配置nagios\">配置Nagios</a><ul>\n<li><a href=\"#基本介绍\">基本介绍</a></li>\n<li><a href=\"#nagios安装-服务端\">Nagios安装 - 服务端</a></li>\n<li><a href=\"#nagios安装-客户端\">Nagios安装 - 客户端</a></li>\n<li><a href=\"#监控中心添加被监控主机\">监控中心添加被监控主机</a><ul>\n<li><a href=\"#配置文件的简单说明\">配置文件的简单说明</a></li>\n</ul>\n</li>\n<li><a href=\"#继续添加需要服务端通过nrpe去连接到远程主机获得信息的服务\">继续添加需要服务端通过nrpe去连接到远程主机获得信息的服务</a><ul>\n<li><a href=\"#配置说明\">配置说明</a></li>\n<li><a href=\"#配置邮件告警\">配置邮件告警</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#配置zabbix\">配置Zabbix</a><ul>\n<li><a href=\"#基本介绍-1\">基本介绍</a></li>\n<li><a href=\"#安装zabbix\">安装zabbix</a></li>\n<li><a href=\"#网页安装zabbix\">网页安装zabbix</a></li>\n<li><a href=\"#接入要监控的主机\">接入要监控的主机</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>\n</div>\n</p>\n\n<h2 id=\"配置nagios\"><strong>配置Nagios</strong></h2>\n\n<h3 id=\"基本介绍\"><strong>基本介绍</strong></h3>\n\n<blockquote>\n  <p>是一个开源软件，可以监控网络设备网络流量、Linux/windows主机状态，甚至可以监控打印机</p>\n  \n  <p>它可以运行在Linux上或windows上</p>\n  \n  <p>基于浏览器的web界面方便运维人员查看监控项目的状态</p>\n  \n  <p>支持web界面配置、管理操作</p>\n  \n  <p>支持短信、邮件通知</p>\n  \n  <p>可以自定义脚本实现自定义化监控</p>\n  \n  <p>Nagios官网 <a href=\"http://www.nagios.org/\">http://www.nagios.org/</a> </p>\n</blockquote>\n\n<h3 id=\"nagios安装-服务端\"><strong>Nagios安装 - 服务端</strong></h3>\n\n<blockquote>\n  <p>服务端</p>\n  \n  <p><code>yum install -y httpd nagios nagios-plugins nagios-plugins-all nrpe nagios-plugins-nrpe</code></p>\n  \n  <p>设置登录nagios后台的用户和密码：<code>htpasswd -c /etc/nagios/passwd nagiosadmin</code></p>\n  \n  <p>配置文件：<code>vim /etc/nagios/nagios.cfg</code>，先保持默认。</p>\n  \n  <p>检测配置文件：<code>nagios -v /etc/nagios/nagios.cfg</code></p>\n  \n  <p>显示如下则无问题：</p>\n  \n  <blockquote>\n    <p><code>Total Warnings: 0 <br>\n        Total Errors:   0</code></p>\n  </blockquote>\n  \n  <p>启动服务：<code>service httpd start; service nagios start</code></p>\n  \n  <p>浏览器访问： <code>http://ip/nagios</code></p>\n  \n  <p>账号是：<code>nagiosadmin</code>, 密码是：你刚刚设置的</p>\n</blockquote>\n\n<h3 id=\"nagios安装-客户端\"><strong>Nagios安装 - 客户端</strong></h3>\n\n<blockquote>\n  <p>客户端</p>\n  \n  <p><code>rpm -ivh http://www.lishiming.net/data/attachment/forum/month_1211/epel-release-6-7.noarch.rpm</code></p>\n  \n  <p><code>yum install -y nagios-plugins nagios-plugins-all nrpe nagios-plugins-nrpe</code></p>\n  \n  <p><code>vim /etc/nagios/nrpe.cfg</code>  </p>\n  \n  <p>找到<code>allowed_hosts=127.0.0.1</code> 改为<code>allowed_hosts=127.0.0.1,172.21.96.98</code> 后面的ip为服务端ip</p>\n  \n  <p>找到<code>dont_blame_nrpe=0</code>改为<code>dont_blame_nrpe=1</code> </p>\n  \n  <p>启动客户端 <code>service nrpe start</code></p>\n</blockquote>\n\n<h3 id=\"监控中心添加被监控主机\"><strong>监控中心添加被监控主机</strong></h3>\n\n<blockquote>\n  <p>服务端</p>\n  \n  <p><code>vim /etc/nagios/conf.d/nagios1.cfg</code></p>\n  \n  <p>配置模板：</p>\n  \n  <blockquote>\n    <p><code>define host{ <br>\n                use                     linux-server <br>\n                host_name               主机名(可自定义) <br>\n                alias                   昵称(可自定义) <br>\n                address                 客户端IP地址 <br>\n                } <br>\n        define service{ <br>\n                use                     generic-service <br>\n                host_name               主机名(可自定义) <br>\n                service_description     check_ping <br>\n                check_command           check_ping!100.0,20%!200.0,50% <br>\n                max_check_attempts 5 <br>\n                normal_check_interval 1 <br>\n        } <br>\n        define service{ <br>\n                use                     generic-service <br>\n                host_name               主机名(可自定义) <br>\n                service_description     check_ssh <br>\n                check_command           check_ssh <br>\n                max_check_attempts      5 <br>\n                normal_check_interval 1 <br>\n        } <br>\n        define service{ <br>\n                use                     generic-service <br>\n                host_name               主机名(可自定义) <br>\n                service_description     check_http <br>\n                check_command           check_http <br>\n                max_check_attempts      5 <br>\n                normal_check_interval 1 <br>\n        }</code></p>\n  </blockquote>\n</blockquote>\n\n<h4 id=\"配置文件的简单说明\"><strong>配置文件的简单说明</strong></h4>\n\n<blockquote>\n  <p>配置文件中一共监控了三个service：ssh, ping, http 这三个项目是使用本地的nagios工具去连接远程机器，也就是说即使客户端没有安装nagios-plugins以及nrpe也是可以监控到的。其他的一些service诸如负载、磁盘使用等是需要服务端通过nrpe去连接到远程主机获得信息，所以需要远程主机安装nrpe服务以及相应的执行脚本(nagios-plugins)</p>\n  \n  <p>max_check_attempts 5  #当nagios检测到问题时，一共尝试检测5次都有问题才会告警，如果该数值为1，那么检测到问题立即告警</p>\n  \n  <p>normal_check_interval 1 #重新检测的时间间隔，单位是分钟，默认是3分钟</p>\n  \n  <p>notification_interval 60 #在服务出现异常后，故障一直没有解决，nagios再次对使用者发出通知的时间。单位是分钟。如果你认为，所有的事件只需要一次通知就够了，可以把这里的选项设为0。 </p>\n</blockquote>\n\n<h3 id=\"继续添加需要服务端通过nrpe去连接到远程主机获得信息的服务\"><strong>继续添加需要服务端通过nrpe去连接到远程主机获得信息的服务</strong></h3>\n\n<blockquote>\n  <p>服务端</p>\n  \n  <p><code>vim /etc/nagios/objects/commands.cfg</code></p>\n  \n  <p>增加：</p>\n  \n  <blockquote>\n    <p><code>define command{ <br>\n                command_name    check_nrpe <br>\n                command_line    $USER1$/check_nrpe -H $HOSTADDRESS$ -c $ARG1$ <br>\n                }</code></p>\n    \n    <p>PS：客户端必须<code>service nrpe start</code>开启服务。</p>\n  </blockquote>\n  \n  <p>继续编辑刚刚写的监控主机配置文件<code>vim /etc/nagios/conf.d/nagios1.cfg</code></p>\n  \n  <p>配置模板：</p>\n  \n  <blockquote>\n    <p><code>define service{ <br>\n                use     generic-service <br>\n                host_name       switch_client1 <br>\n                service_description     check_load <br>\n                check_command           check_nrpe!check_load <br>\n                max_check_attempts 5 <br>\n                normal_check_interval 1 <br>\n        } <br>\n        define service{ <br>\n                use     generic-service <br>\n                host_name       switch_client1 <br>\n                service_description     check_disk_hda1 <br>\n                check_command           check_nrpe!check_hda1 <br>\n                max_check_attempts 5 <br>\n                normal_check_interval 1 <br>\n        } <br>\n        define service{ <br>\n                use     generic-service <br>\n                host_name       switch_client1 <br>\n                service_description     check_disk_hda2 <br>\n                check_command           check_nrpe!check_hda2 <br>\n                max_check_attempts 5 <br>\n                normal_check_interval 1 <br>\n        }</code></p>\n  </blockquote>\n  \n  <p>PS:配置完成后使用<code>nagios -v /etc/nagios/nagios.cfg</code>检测配置是否正确。</p>\n</blockquote>\n\n<h4 id=\"配置说明\"><strong>配置说明</strong></h4>\n\n<blockquote>\n  <p><code>check_nrpe!check_load</code> ：这里的<code>check_nrpe</code>就是在<code>commands.cfg</code>刚刚定义的，check_load是远程主机上的一个检测脚本</p>\n  \n  <p>在远程主机上<code>vim /etc/nagios/nrpe.cfg</code> 搜索<code>check_load</code>，这行就是在服务端上要执行的脚本了，可以手动执行这个脚本</p>\n  \n  <p>把<code>check_hda1</code>更改一下：<code>/dev/hda1</code> 改为 <code>/dev/sda1</code></p>\n  \n  <p>再加一行</p>\n  \n  <p><code>command[check_hda2]=/usr/lib/nagios/plugins/check_disk -w 20% -c 10% -p /dev/sda2</code></p>\n  \n  <p>客户端上重启一下nrpe服务: <code>service nrpe restart</code></p>\n  \n  <p>服务端也重启一下nagios服务: <code>service nagios restart</code></p>\n  \n  <p>PS：表示出现<code>(Return code of 255 is out of bounds)</code>错误提示，现在无法解决，以后遇到再想办法。</p>\n</blockquote>\n\n<h4 id=\"配置邮件告警\"><strong>配置邮件告警</strong></h4>\n\n<blockquote>\n  <p><code>vim /etc/nagios/objects/contacts.cfg</code></p>\n  \n  <p>增加如下代码：</p>\n\n<pre><code>define contact{\n        contact_name               switch\n        use                     generic-contact\n        alias                      switch\n        email                   emailname@139.com\n        }\n</code></pre>\n  \n  <p>最关键的是email这个参数</p>\n  \n  <p>关于定义的service可以在这里定义告警策略：</p>\n  \n  <p><code>vim /etc/nagios/objects/templates.cfg</code></p>\n  \n  <p>搜索<code>generic-service</code></p>\n  \n  <p>这个文件中定义了诸多监控告警策略，一些重要参数如下所示： <br>\n  &gt;</p>\n  \n  <blockquote>\n    <p><code>notifications_enabled</code> : 是否开启提醒功能。1为开启，0为禁用。一般，这个选项会在主配置文件<code>nagios.cfg</code>中定义，效果相同。</p>\n    \n    <p><code>notification_interval</code> : 表示重复发送提醒信息的最短间隔时间。默认间隔时间是60分钟。如果这个值设置为0，将不会发送重复提醒。</p>\n    \n    <p><code>notification_period</code> : 发送提醒的时间段。非常重要的主机（服务），定义为7×24表示一天24小时都会提示。一般的主机（服务）就定义为上班时间。如果不在定义的时间段内，无论什么问题发生，都不会发送提醒。</p>\n    \n    <p><code>notification_options</code>: 这个参数定义了发送提醒包括的情况：d = 状态为<code>DOWN</code>, u = 状态为<code>UNREACHABLE</code> , r = 状态恢复为<code>OK</code> ,  f = <code>flapping</code>。，n=不发送提醒。</p>\n  </blockquote>\n  \n  <p>发送邮件需要安装邮件服务<code>yum install -y sendmail</code></p>\n  \n  <p>重启nagios服务：<code>service nagios restart</code></p>\n</blockquote>\n\n<h2 id=\"配置zabbix\"><strong>配置Zabbix</strong></h2>\n\n<h3 id=\"基本介绍-1\"><strong>基本介绍</strong></h3>\n\n<blockquote>\n  <p>基于web的开源软件，开源监控系统状态也可以监控网络设备。</p>\n  \n  <p>和nagios不同的是zabbix会把获取的数据保存在数据库中，所以zabbix需要有数据库支持 </p>\n  \n  <p>Zabbix还可以自动发现主机和网络设备</p>\n  \n  <p>支持邮件和短信告警</p>\n  \n  <p>Zabbix大多配置都可以在web界面配置完成 <br>\n  官网<a href=\"http://www.zabbix.com/\">http://www.zabbix.com/</a> </p>\n</blockquote>\n\n<h3 id=\"安装zabbix\"><strong>安装zabbix</strong></h3>\n\n<blockquote>\n  <p><code>rpm -ivh http://www.lishiming.net/data/attachment/forum/month_1211/epel-release-6-7.noarch.rpm</code></p>\n  \n  <p>安装rpm包的lamp环境：</p>\n  \n  <p><code>yum install -y  httpd mysql mysql-libs php php-mysql mysql-server php-bcmath php-gd php-mbstring</code></p>\n  \n  <p>安装zabbix服务端： <br>\n  <code>yum install  zabbix20 zabbix20-agent zabbix20-server  zabbix20-server-mysql zabbix20-web zabbix20-web-mysql net-snmp-devel</code></p>\n  \n  <p><code>service zabbix-server start; service zabbix-agent start</code></p>\n  \n  <p><code>service httpd start; service mysqld start</code></p>\n  \n  <p><code>mysql -uroot -p -e \"create database zabbix\"</code></p>\n  \n  <p><code>mysql -uroot -p --default-character-set=utf8 zabbix &lt; /usr/share/zabbix-mysql/schema.sql</code></p>\n  \n  <p><code>mysql -uroot -p --default-character-set=utf8 zabbix &lt; /usr/share/zabbix-mysql/images.sql</code></p>\n  \n  <p><code>mysql -uroot -p --default-character-set=utf8 zabbix &lt; /usr/share/zabbix-mysql/data.sql</code></p>\n  \n  <p><code>service httpd restart</code></p>\n</blockquote>\n\n<h3 id=\"网页安装zabbix\"><strong>网页安装zabbix</strong></h3>\n\n<blockquote>\n  <p>浏览器访问 <a href=\"http://ip/zabbix\">http://ip/zabbix</a>, 默认会有<code>\"It is not safe to rely on the system‘s timezone settings...\"这样的警告信息，需要</code>vim /etc/php.ini<code>设置</code>date.timezone=”Asia/Shanghai”`点next</p>\n  \n  <p>解决相关的报错信息，点retry  (在配置文件中解决<code>vim /etc/php.ini</code>)</p>\n  \n  <p>PS：修改配置文件最好是重启服务<code>service httpd restart</code></p>\n  \n  <p>输入mysql相关信息, 首先要测试一下，如果不通过，则需要调试，测试通过后，点next</p>\n  \n  <p>PS：如果出现了<code>mysql_connect(): Can\'t connect to local MySQL server through socket \'/var/lib/mysql/mysql.sock\'</code>这样的错误信息，则表示sock路径不同，这时候可以用一个软链接解决：<code>mkdir /var/lib/mysql; ln /tmp/mysql.sock /var/lib/mysql/mysql.sock</code></p>\n  \n  <p>Name 写<code>Switch</code>，（可以自定义）点next，再点next，最后点finish</p>\n  \n  <p>默认管理员账号：密码为 <code>admin:zabbix</code></p>\n  \n  <p>这时会遇到<code>\"zabbix server is not running\"</code>这样的错误，需要编辑一下 <code>vim /etc/zabbix/zabbix_server.conf</code>，配置DBUser, DBPassword，这相当于配置数据库用户名和密码。</p>\n  \n  <p>PS：这个原因是因为没有填写用户名和密码，如果还有错误可以到 <br>\n  <code>vim /etc/zabbix/zabbix_server.conf</code>日志文件查看错误。</p>\n  \n  <p>PS：zabbix是支持中文的，可以搜索查找。</p>\n</blockquote>\n\n<h3 id=\"接入要监控的主机\"><strong>接入要监控的主机</strong></h3>\n\n<blockquote>\n  <p>在客户端上<code>yum install zabbix20-agent</code></p>\n  \n  <p><code>vim /etc/zabbix_agentd.conf</code> </p>\n  \n  <p>更改Server=服务端ip; <code>ServerActive=0.0.0.0:10050; Hostname=switch</code>(自定义，但要唯一) </p>\n  \n  <p>启动客户端 <code>service zabbix-agent start</code></p>\n  \n  <p>服务端上命令行测试：<code>zabbix_get -s 客户端IP -p10050 -k \"system.hostname\"</code></p>\n  \n  <p>在web界面下，点”configuration” –&gt; “hosts” –&gt; 右上角点”Create Host”  </p>\n  \n  <p>其中host name,  visible name自定义，可以选择groups，这里默认即可，ip address 写入客户端ip</p>\n  \n  <p>配置监控项目模板：点“templates”, 点add, 在弹出的小窗口中选择Template OS Linux, 然后点select, 最后点save</p>\n  \n  <p>PS：修改主机名<code>hostname 主机名</code></p>\n</blockquote>\n\n<p><strong><font size=\"6\">参考《跟阿铭学Linux》</font></strong></p>\n\n<hr></div>\n        <script type=\"text/javascript\">\n            $(function () {\n                $(\'pre.prettyprint code\').each(function () {\n                    var lines = $(this).text().split(\'\\n\').length;\n                    var $numbering = $(\'<ul/>\').addClass(\'pre-numbering\').hide();\n                    $(this).addClass(\'has-numbering\').parent().append($numbering);\n                    for (i = 1; i <= lines; i++) {\n                        $numbering.append($(\'<li/>\').text(i));\n                    };\n                    $numbering.fadeIn(1700);\n                });\n            });\n        </script>\n   \n', '2016-04-16 01:21:04', '0');
INSERT INTO `article` VALUES ('10010', '10003', 'Linux学习笔记3', '\n        <div class=\"markdown_views\"><h1 id=\"linux学习笔记3\"><strong>Linux学习笔记3</strong></h1>\n\n<p><div class=\"toc\"><div class=\"toc\">\n<ul>\n<li><a href=\"#linux学习笔记3\">Linux学习笔记3</a><ul>\n<li><ul>\n<li><a href=\"#安装setup工具\">安装setup工具</a></li>\n<li><a href=\"#centos-7-下的网络配置工具\">CentOS 7 下的网络配置工具</a></li>\n<li><a href=\"#查询安装版本\">查询安装版本</a></li>\n<li><a href=\"#显示有多少终端登录\">显示有多少终端登录</a></li>\n<li><a href=\"#使用putty和ssh远程登录服务器\">使用putty和ssh远程登录服务器</a></li>\n<li><a href=\"#putty出现disconnectedno-supported-authentication-methods-available错误信息\">Putty出现DisconnectedNo supported authentication methods available错误信息</a></li>\n<li><a href=\"#查看历史命令\">查看历史命令</a></li>\n<li><a href=\"#linux服务器安全之用户密钥认证登录基于centos-70系统\">Linux服务器安全之用户密钥认证登录基于CentOS 70系统</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>\n</div>\n</p>\n\n\n\n<h3 id=\"安装setup工具\"><strong>安装setup工具</strong></h3>\n\n<blockquote>\n  <p>yum install -y setuptool</p>\n</blockquote>\n\n\n\n<h3 id=\"centos-7-下的网络配置工具\"><strong>CentOS 7 下的网络配置工具</strong></h3>\n\n<blockquote>\n  <p><a href=\"http://www.webmaster.me/server/centos-7-下的网络配置工具.html\">http://www.webmaster.me/server/centos-7-下的网络配置工具.html</a></p>\n</blockquote>\n\n\n\n<h3 id=\"查询安装版本\"><strong>查询安装版本</strong></h3>\n\n<blockquote>\n  <p>which 命令路径</p>\n  \n  <p>rpm -qf 命令路径</p>\n  \n  <blockquote>\n    <p>案例 <br>\n        <code> <br>\n        [root@localhost ~]# which setup <br>\n        /usr/sbin/setup <br>\n        [root@localhost ~]# rpm -qf /usr/sbin/setup <br>\n        setuptool-1.19.11-8.el7.x86_64 <br>\n        [root@localhost ~]# <br>\n    </code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"显示有多少终端登录\"><strong>显示有多少终端登录</strong></h3>\n\n<blockquote>\n  <p>who，w</p>\n  \n  <blockquote>\n    <p>案例 <br>\n        <code> <br>\n        [root@localhost ~]# who <br>\n        root     tty1         2016-03-26 19:33 <br>\n        root     pts/0        2016-03-26 19:51 (172.21.98.121) <br>\n        root     pts/1        2016-03-26 21:13 (172.21.98.121) <br>\n        [root@localhost ~]# w <br>\n         21:13:41 up  1:40,  3 users,  load average: 0.00, 0.01, 0.05 <br>\n        USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT <br>\n        root     tty1                      19:33    1:04m  0.09s  0.09s -bash <br>\n        root     pts/0    172.21.98.121    19:51   45.00s  0.27s  0.27s -bash <br>\n        root     pts/1    172.21.98.121    21:13    5.00s  0.11s  0.03s w <br>\n        [root@localhost ~]# <br>\n    </code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"使用putty和ssh远程登录服务器\"><strong>使用putty和ssh远程登录服务器</strong></h3>\n\n<blockquote>\n  <p><ol> <br>\n  <li>使用PUTTYGEN生成密钥</li>\n  <li>保存私钥</li>\n  <li>复制公钥，使用如下命令： <br></li></ol><p>\n  \n  <blockquote>\n    <p>mkdir .ssh <br>\n    <br>\n    vim .ssh/authorized_keys <br>\n    <br>\n    然后将公钥粘贴进去 <br></p>\n    \n    <blockquote>\n      <p>PS：以上命令是在配置文件中配置好的，如果想要改目录和文件，必须更改配置。 <br>\n      <br>\n      chmod 700 .ssh <br>\n      <br>\n      vim /etc/selinux/config <br>\n      改为SELINUX=disabled <br>\n      <br>\n      PS:可以通过getenforce来查看状态，Enforcing生效，Permissive失效。 <br>\n      <br>\n      setenforce 0 <br>\n       <br>\n      PS:通过这个命令可以临时修改。 <br>\n      <br>\n      PS：可以通过vi /etc/ssh/sshd_config,找到PasswordAuthentication yes设置为no，则只能通过密钥密码登录，也可以通过vi /etc/ssh/sshd_config，来更改SSH相应配置。\n      </p>\n    </blockquote>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"putty出现disconnectedno-supported-authentication-methods-available错误信息\"><strong>Putty出现Disconnected:No supported authentication methods available错误信息</strong></h3>\n\n<blockquote>\n  <p>因为远程服务器禁止使用密码验证功能,可以通过vi /etc/ssh/sshd_config,找到PasswordAuthentication no改为yes保存重启服务即可。</p>\n</blockquote>\n\n\n\n<h3 id=\"查看历史命令\"><strong>查看历史命令</strong></h3>\n\n<blockquote>\n  <p>history</p>\n</blockquote>\n\n\n\n<h3 id=\"linux服务器安全之用户密钥认证登录基于centos-70系统\"><strong>Linux服务器安全之用户密钥认证登录（基于CentOS 7.0系统）</strong></h3>\n\n<blockquote>\n  <p><a href=\"http://blog.sina.com.cn/s/blog_6561ca8c0102vb0d.html\">http://blog.sina.com.cn/s/blog_6561ca8c0102vb0d.html</a></p>\n</blockquote>\n\n<p><strong><font size=\"6\">参考《跟阿铭学Linux》</font></strong></p>\n\n<hr></div>\n        <script type=\"text/javascript\">\n            $(function () {\n                $(\'pre.prettyprint code\').each(function () {\n                    var lines = $(this).text().split(\'\\n\').length;\n                    var $numbering = $(\'<ul/>\').addClass(\'pre-numbering\').hide();\n                    $(this).addClass(\'has-numbering\').parent().append($numbering);\n                    for (i = 1; i <= lines; i++) {\n                        $numbering.append($(\'<li/>\').text(i));\n                    };\n                    $numbering.fadeIn(1700);\n                });\n            });\n        </script>\n   \n', '2016-04-16 01:21:04', '0');
INSERT INTO `article` VALUES ('10011', '10003', 'Bean生命周期', '\n\n<h1 style=\"text-align:center\"><span style=\"font-size:18px\">Bean<span style=\"font-family:宋体\">生命周期</span></span></h1>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>基本概述</h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;生命周期一直是很重要的内容，从以前<span style=\"font-family:Calibri\">Java</span><span style=\"font-family:宋体\">对象、</span><span style=\"font-family:Calibri\">Servlet</span><span style=\"font-family:宋体\">的生命周期可以看出，只有理解了其生命周期，才能知道应该在哪阶段完成哪阶段的事。</span><span style=\"font-family:Calibri\">Bean</span><span style=\"font-family:宋体\">被载入到容器的时候，它的生命周期就开始了。</span></p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<h2>Bean<span style=\"font-family:宋体\">生命周期</span></h2>\n<h3>Bean<span style=\"font-family:宋体\">在应用上下文的生命周期</span></h3>\n<h4>原理图</h4>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160220113802785\" alt=\"\"></div>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h4>详细步骤</h4>\n<p>\n<p>1<span style=\"font-family:宋体\">、</span>实例化<span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">当程序加载</span>applicationContext.xml<span style=\"font-family:宋体\">文件</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">，把</span><span style=\"font-family:Calibri\">bean(</span><span style=\"font-family:宋体\">前提是</span><span style=\"font-family:Calibri\">scope=singleton)</span><span style=\"font-family:宋体\">实例化到内存</span>。</p>\n<p>2<span style=\"font-family:宋体\">、</span>调用该<span style=\"font-family:Calibri\">Bean</span><span style=\"font-family:宋体\">的</span><span style=\"color:rgb(255,0,0)\">set</span><span style=\"color:rgb(255,0,0)\">Xxx()</span>方法，设置属性。</p>\n<p>3<span style=\"font-family:宋体\">、</span>如果实现了<span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">名字关注接口</span><span style=\"font-family:Calibri\">(</span><span style=\"color:rgb(255,0,0)\">BeanNameAware</span>)，则可以通过<span style=\"font-family:Calibri\">setBeanName</span><span style=\"font-family:宋体\">获取</span><span style=\"font-family:Calibri\">id</span><span style=\"font-family:宋体\">号</span>。</p>\n<p>4<span style=\"font-family:宋体\">、</span>如果实现了<span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">工厂关注接口</span><span style=\"font-family:Calibri\">(</span><span style=\"color:rgb(255,0,0)\">BeanFactoryAware</span>),<span style=\"font-family:宋体\">则可以获取</span><span style=\"font-family:Calibri\">BeanFactory</span>。</p>\n<p>5<span style=\"font-family:宋体\">、</span>如果实现了<span style=\"color:rgb(255,0,0)\">ApplicationContextAware</span>接口，则可以获得<span style=\"font-family:Calibri\">ApplicationContext</span><span style=\"font-family:宋体\">。</span></p>\n<p>6<span style=\"font-family:宋体\">、</span>如果<span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">和一个后置处理器关联</span>，则会自动去调用<span style=\"color:rgb(255,0,0)\">postProcessBeforeInitialization</span><span style=\"color:rgb(255,0,0)\">()</span>方法。</p>\n<p>7<span style=\"font-family:宋体\">、</span>如果实现<span style=\"color:rgb(255,0,0)\">InitializingBean</span>接口，则会调用<span style=\"color:rgb(255,0,0)\">afterPropertiesSet</span>方法。</p>\n<p>8<span style=\"font-family:宋体\">、</span>如果配置&lt;bean&nbsp;init-method=”init”&nbsp;/&gt;&nbsp;<span style=\"font-family:宋体\">则可以在</span><span style=\"font-family:Calibri\">bean</span>自定义初始化方法。</p>\n<p>9<span style=\"font-family:宋体\">、</span>如果<span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">和一个后置处理器关联</span>，则会自动去调用<span style=\"color:rgb(255,0,0)\">postProcess</span><span style=\"color:rgb(255,0,0)\">After</span><span style=\"color:rgb(255,0,0)\">Initialization</span><span style=\"color:rgb(255,0,0)\">()</span>方法。</p>\n<p>10<span style=\"font-family:宋体\">、</span>使用<span style=\"font-family:Calibri\">bean</span>。</p>\n<p>11、容器关闭。</p>\n<p>12、可以通过实现<span style=\"color:rgb(255,0,0)\">DisposableBean</span>接口来调用<span style=\"color:rgb(255,0,0)\">destory</span><span style=\"color:rgb(255,0,0)\">()</span>方法。</p>\n<p>13、可以在<span style=\"font-family:Calibri\">&lt;bean&nbsp;destory-method=</span>”fun1”/&gt;&nbsp;<span style=\"font-family:宋体\">调用</span>自定义的销毁方法。</p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：实际开发中的流程往往没这么复杂，一般是</span></span><span style=\"color:rgb(255,0,0)\">1-&gt;2-&gt;6-&gt;</span><span style=\"color:rgb(255,0,0)\">9</span><span style=\"color:rgb(255,0,0)\">-&gt;</span><span style=\"color:rgb(255,0,0)\">10</span><span style=\"color:rgb(255,0,0)\">-&gt;11</span><span style=\"color:rgb(255,0,0)\">。</span></p>\n<p>&nbsp;</p>\n<h3>Bean<span style=\"font-family:宋体\">在</span><span style=\"font-family:Calibri\">Bean</span><span style=\"font-family:宋体\">工厂的生命周期</span></h3>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;Bean<span style=\"font-family:宋体\">在</span><span style=\"font-family:Calibri\">Bean</span><span style=\"font-family:宋体\">工厂的生命周期和在应用上下文的生命周期是不一样的。因为和应用上下文是无关的，所以没有应用上下文中的第</span><span style=\"font-family:Calibri\">5</span><span style=\"font-family:宋体\">步、第</span><span style=\"font-family:Calibri\">6</span><span style=\"font-family:宋体\">步和第</span><span style=\"font-family:Calibri\">9</span><span style=\"font-family:宋体\">步。</span></p>\n<p>&nbsp;</p>\n<h4>原理图</h4>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160220113916848\" alt=\"\"></div>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h3>案例</h3>\n<h4><strong>Spring<span style=\"font-family:宋体\">配置文件</span></strong></h4>\n<pre code_snippet_id=\"1583055\" snippet_file_name=\"blog_20160220_1_5418460\" name=\"code\" class=\"html\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \n	xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;\n	xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\n	xsi:schemaLocation=&quot;\n			http://www.springframework.org/schema/beans \n			http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\n			http://www.springframework.org/schema/aop \n			http://www.springframework.org/schema/aop/spring-aop-2.5.xsd\n			http://www.springframework.org/schema/tx \n			http://www.springframework.org/schema/tx/spring-tx-2.5.xsd&quot;&gt;\n	&lt;!-- 在容器文件中配置bean(service/dao/domain/action/数据源) --&gt;\n	&lt;bean id=&quot;personService&quot; init-method=&quot;init&quot; destroy-method=&quot;myDestory&quot; class=&quot;com.pc.beanlife.PersonService&quot;&gt;\n		&lt;!-- 这里注入属性，前提是有setName才能成功 --&gt;\n		&lt;property name=&quot;name&quot; value=&quot;zs&quot; /&gt;\n	&lt;/bean&gt;\n	&lt;!-- 配置后置处理器(类似filter) --&gt;\n	&lt;bean id=&quot;myBeanPostProcesseor&quot; class=&quot;com.pc.beanlife.MyBeanPostProcesseor&quot; /&gt;\n&lt;/beans&gt;</pre><br>\n<h4>Bean<span style=\"font-family:宋体\">类文件</span></h4>\n<pre code_snippet_id=\"1583055\" snippet_file_name=\"blog_20160220_2_9943818\" name=\"code\" class=\"java\">package com.pc.beanlife;\n\nimport org.springframework.beans.BeansException;\nimport org.springframework.beans.factory.BeanFactory;\nimport org.springframework.beans.factory.BeanFactoryAware;\nimport org.springframework.beans.factory.BeanNameAware;\nimport org.springframework.beans.factory.DisposableBean;\nimport org.springframework.beans.factory.InitializingBean;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.ApplicationContextAware;\n/**\n * \n * @author Switch\n * @function Bean类\n * @description\n *\n */\npublic class PersonService implements BeanNameAware,BeanFactoryAware,ApplicationContextAware,InitializingBean,DisposableBean{\n	private String name;\n	\n	public PersonService() {\n		System.out.println(&quot;无参构造方法被调用&quot;);\n	}\n	\n	public PersonService(String name) {\n		System.out.println(&quot;有参构造方法被调用&quot;);\n	}\n	\n	public void printOk(){\n		System.out.println(name + &quot; is Ok&quot;);\n	}\n\n	public String getName() {\n		return name;\n	}\n\n	public void setName(String name) {\n		System.out.println(&quot;调用set方法设置属性&quot;);\n		this.name = name;\n	}\n\n	// 该方法可以给name表示正被实例化的Bean的id\n	@Override\n	public void setBeanName(String name) {\n		// TODO Auto-generated method stub\n		System.out.println(&quot;setBeanName 被调用，值是&quot; + name);\n	}\n\n	// 该方法可以传递beanFactory\n	@Override\n	public void setBeanFactory(BeanFactory beanFactory) throws BeansException {\n		// TODO Auto-generated method stub\n		System.out.println(&quot;setBeanFactory &quot; + beanFactory);\n		\n	}\n\n	// 该方法可以设置上下文\n	@Override\n	public void setApplicationContext(ApplicationContext applicationContext)\n			throws BeansException {\n		// TODO Auto-generated method stub\n		System.out.println(&quot;setApplicationContext &quot; + applicationContext);\n	}\n\n	// 该方法可以在InitializingBean使用\n	@Override\n	public void afterPropertiesSet() throws Exception {\n		// TODO Auto-generated method stub\n		System.out.println(&quot;afterPropertiesSet&quot;);\n	}\n	\n	// 自定义的初始化方法\n	public void init() {\n		System.out.println(&quot;调用自定义的初始化方法&quot;);\n	}\n\n	// 可以在这关闭数据连接，socket,文件流，释放资源等等。。。\n	@Override\n	public void destroy() throws Exception {\n		// TODO Auto-generated method stub\n		System.out.println(&quot;调用destroy()&quot;);\n	}\n	\n	// 自定义我们的销毁方法\n	public void myDestory() {\n		System.out.println(&quot;调用自定义的销毁方法&quot;);\n	}\n}</pre><br>\n<h4>后置处理器文件</h4>\n<pre code_snippet_id=\"1583055\" snippet_file_name=\"blog_20160220_3_7850267\" name=\"code\" class=\"java\">package com.pc.beanlife;\n\nimport org.springframework.beans.BeansException;\nimport org.springframework.beans.factory.config.BeanPostProcessor;\n/**\n * \n * @author Switch\n * @function 后置处理器，相当于Web开发中的过滤器\n * @description 当Bean创建完毕，初始化之前时会调用Before方法，初始化之后会调用After方法\n *\n */\npublic class MyBeanPostProcesseor implements BeanPostProcessor {\n	// 后置处理之后的过滤\n	@Override\n	public Object postProcessBeforeInitialization(Object bean, String beanName)\n			throws BeansException {\n		// TODO Auto-generated method stub\n		System.out.println(&quot;postProcessBeforeInitialization方法被调用&quot;);\n		return bean;\n	}\n\n	// 后置处理之前的过滤\n	@Override\n	public Object postProcessAfterInitialization(Object bean, String beanName)\n			throws BeansException {\n		// TODO Auto-generated method stub\n		System.out.println(&quot;postProcessAfterInitialization方法被调用&quot;);\n		return bean;\n	}\n}</pre><br>\n<h4>测试文件</h4>\n<pre code_snippet_id=\"1583055\" snippet_file_name=\"blog_20160220_4_1960923\" name=\"code\" class=\"java\">package com.pc.beanlife;\n\nimport org.springframework.beans.factory.BeanFactory;\nimport org.springframework.beans.factory.xml.XmlBeanFactory;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\nimport org.springframework.core.io.ClassPathResource;\n/**\n * \n * @author Switch\n * @function 测试类\n * @description\n *\n */\npublic class Test {\n	public static void main(String[] args) {\n		// TODO Auto-generated method stub\n		// 通过ApplicationContext加载Bean\n		System.out.println(&quot;------------在ApplicationContext中Bean的生命周期------------&quot;);\n		ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;com/pc/beanlife/beans.xml&quot;);\n		// 获取Bean\n		PersonService personService = (PersonService) applicationContext.getBean(&quot;personService&quot;);\n		personService.printOk();\n		\n		// 通过BeanFactory加载Bean\n		System.out.println(&quot;------------在BeanFactory中Bean的生命周期------------&quot;);\n		BeanFactory beanFactory = new XmlBeanFactory(new ClassPathResource(&quot;com/pc/beanlife/beans.xml&quot;));\n		PersonService personService2 = (PersonService) beanFactory.getBean(&quot;personService&quot;);\n		personService2.printOk();\n	}\n}</pre><br>\n<h4>日志文件</h4>\n<p>\n<p>------------<span style=\"font-family:宋体\">在</span><span style=\"font-family:Calibri\">ApplicationContext</span><span style=\"font-family:宋体\">中</span><span style=\"font-family:Calibri\">Bean</span><span style=\"font-family:宋体\">的生命周期</span><span style=\"font-family:Calibri\">------------</span></p>\n<p>无参构造方法被调用</p>\n<p>调用<span style=\"font-family:Calibri\">set</span><span style=\"font-family:宋体\">方法设置属性</span></p>\n<p>setBeanName&nbsp;<span style=\"font-family:宋体\">被调用，&#20540;是</span><span style=\"font-family:Calibri\">personService</span></p>\n<p>setBeanFactory&nbsp;org.springframework.beans.factory.support.DefaultListableBeanFactory@1f8b81e3:&nbsp;defining&nbsp;beans&nbsp;[personService,myBeanPostProcesseor];&nbsp;root&nbsp;of&nbsp;factory&nbsp;hierarchy</p>\n<p>setApplicationContext&nbsp;org.springframework.context.support.ClassPathXmlApplicationContext@771c8a71:&nbsp;display&nbsp;name&nbsp;[org.springframework.context.support.ClassPathXmlApplicationContext@771c8a71];&nbsp;startup&nbsp;date&nbsp;[Sat&nbsp;Feb&nbsp;20&nbsp;11:34:05&nbsp;CST&nbsp;2016];&nbsp;root&nbsp;of&nbsp;context&nbsp;hierarchy</p>\n<p>postProcessBeforeInitialization<span style=\"font-family:宋体\">方法被调用</span></p>\n<p>afterPropertiesSet</p>\n<p>调用自定义的初始化方法</p>\n<p>postProcessAfterInitialization<span style=\"font-family:宋体\">方法被调用</span></p>\n<p>zs&nbsp;is&nbsp;Ok</p>\n<p>------------<span style=\"font-family:宋体\">在</span><span style=\"font-family:Calibri\">BeanFactory</span><span style=\"font-family:宋体\">中</span><span style=\"font-family:Calibri\">Bean</span><span style=\"font-family:宋体\">的生命周期</span><span style=\"font-family:Calibri\">------------</span></p>\n<p>无参构造方法被调用</p>\n<p>调用<span style=\"font-family:Calibri\">set</span><span style=\"font-family:宋体\">方法设置属性</span></p>\n<p>setBeanName&nbsp;<span style=\"font-family:宋体\">被调用，&#20540;是</span><span style=\"font-family:Calibri\">personService</span></p>\n<p>setBeanFactory&nbsp;org.springframework.beans.factory.xml.XmlBeanFactory@6c4fc156:&nbsp;defining&nbsp;beans&nbsp;[personService,myBeanPostProcesseor];&nbsp;root&nbsp;of&nbsp;factory&nbsp;hierarchy</p>\n<p>afterPropertiesSet</p>\n<p>调用自定义的初始化方法</p>\n<p>zs&nbsp;is&nbsp;Ok</p>\n<br>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：通过上面所示</span><span style=\"font-family:Calibri\">Log</span><span style=\"font-family:宋体\">信息，可以看出</span><span style=\"font-family:Calibri\">Bean</span><span style=\"font-family:宋体\">在</span><span style=\"font-family:Calibri\">ApplicationContext</span><span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">BeanFactory</span><span style=\"font-family:宋体\">中的生命周期是不相同的。</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n   \n', '2016-04-16 01:21:04', '1');
INSERT INTO `article` VALUES ('10012', '10003', 'Linux学习笔记12', '\n        <div class=\"markdown_views\"><h1 id=\"linux学习笔记12\"><strong>Linux学习笔记12</strong></h1>\n\n<p><div class=\"toc\"><div class=\"toc\">\n<ul>\n<li><a href=\"#linux学习笔记12\">Linux学习笔记12</a><ul>\n<li><a href=\"#配置ftp服务\">配置FTP服务</a><ul>\n<li><a href=\"#配置pure-ftpd\">配置pure-ftpd</a><ul>\n<li><a href=\"#开机启动\">开机启动</a></li>\n<li><a href=\"#上传下载文件\">上传下载文件</a></li>\n</ul>\n</li>\n<li><a href=\"#配置vsftpd\">配置vsftpd</a><ul>\n<li><a href=\"#centos-70安装配置vsftp服务器\">CentOS 70安装配置Vsftp服务器</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#配置squid服务\">配置Squid服务</a><ul>\n<li><a href=\"#出现错误acl-manager-proto-cacheobject\">出现错误acl manager proto cache_object</a></li>\n<li><a href=\"#出现错误fatal-failed-to-make-swap-directory\">出现错误FATAL Failed to make swap directory</a></li>\n</ul>\n</li>\n<li><a href=\"#配置tomcat\">配置Tomcat</a><ul>\n<li><a href=\"#配置jdk\">配置JDK</a></li>\n</ul>\n</li>\n<li><a href=\"#配置samba服务器\">配置Samba服务器</a><ul>\n<li><a href=\"#centos7将安全等级设置为share报错\">centos7将安全等级设置为share报错</a></li>\n<li><a href=\"#linux访问samba出现ntstatushostunreachable\">Linux访问Samba出现NT_status_host_unreachable</a></li>\n</ul>\n</li>\n<li><a href=\"#mysql-replication主从配置\">MySQL replication主从配置</a><ul>\n<li><a href=\"#kill第二个mysql进程\">kill第二个mysql进程</a></li>\n<li><a href=\"#设置开机第二个启动mysql\">设置开机第二个启动mysql</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>\n</div>\n</p>\n\n<h2 id=\"配置ftp服务\"><strong>配置FTP服务</strong></h2>\n\n<blockquote>\n  <p><a href=\"http://www.apelearn.com/study_v2/chapter21.html#ftp\">http://www.apelearn.com/study_v2/chapter21.html#ftp</a></p>\n</blockquote>\n\n<h3 id=\"配置pure-ftpd\"><strong>配置pure-ftpd</strong></h3>\n\n\n\n<h4 id=\"开机启动\"><strong>开机启动</strong></h4>\n\n<blockquote>\n  <p><code>vim /etc/rc.local</code></p>\n  \n  <p>将<code>/usr/local/pureftpd/sbin/pure-config.pl /usr/local/pureftpd/etc/pure-ftpd.conf</code>启动命令添加进去。</p>\n</blockquote>\n\n\n\n<h4 id=\"上传下载文件\"><strong>上传，下载文件</strong></h4>\n\n<blockquote>\n  <p><code>put 文件路径</code></p>\n  \n  <p><code>get 文件路径</code></p>\n</blockquote>\n\n<p><strong>帮助信息</strong></p>\n\n<blockquote>\n  <p><code>?</code></p>\n</blockquote>\n\n<h3 id=\"配置vsftpd\"><strong>配置vsftpd</strong></h3>\n\n<blockquote>\n  <p><code>yum install -y vsftpd db4-utils</code></p>\n  \n  <p>建立虚拟账号相关联的系统账号 <code>useradd virftp -s /sbin/nologin</code></p>\n  \n  <p>建立虚拟账户相关的文件  <code>vim /etc/vsftpd/vsftpd_login</code></p>\n  \n  <p>内容如下：</p>\n  \n  <blockquote>\n    <p><code>test1 <br>\n        123456 <br>\n        test2 <br>\n        abcdef</code></p>\n  </blockquote>\n  \n  <p><code>chmod 600 /etc/vsftpd/vsftpd_login</code></p>\n  \n  <p>生成对应的库文件 <code>db_load -T -t hash -f /etc/vsftpd/vsftpd_login /etc/vsftpd/vsftpd_login.db</code></p>\n  \n  <p>建立虚拟账号相关的目录以及配置文件 <code>mkdir /etc/vsftpd/vsftpd_user_conf</code></p>\n  \n  <p><code>cd /etc/vsftpd/vsftpd_user_conf</code></p>\n  \n  <p>创建和用户对应的配置文件 <code>vim test1</code></p>\n  \n  <p>内容如下：</p>\n  \n  <blockquote>\n    <p><code>local_root=/home/virftp/test1 <br>\n        anonymous_enable=NO <br>\n        write_enable=YES <br>\n        local_umask=022 <br>\n        anon_upload_enable=NO <br>\n        anon_mkdir_write_enable=NO <br>\n        idle_session_timeout=600 <br>\n        data_connection_timeout=120 <br>\n        max_clients=10 <br>\n        max_per_ip=5 <br>\n        local_max_rate=50000</code></p>\n  </blockquote>\n  \n  <p><code>mkdir /home/virftp/test1</code></p>\n  \n  <p>修改权限： <code>chown -R virftp:virftp /home/virftp/test1</code></p>\n  \n  <p><code>vim /etc/pam.d/vsftpd</code></p>\n  \n  <p>在最开头添加两行 </p>\n  \n  <blockquote>\n    <p><code>auth sufficient /lib/security/pam_userdb.so db=/etc/vsftpd/vsftpd_login <br>\n        account sufficient /lib/security/pam_userdb.so db=/etc/vsftpd/vsftpd_login</code></p>\n  </blockquote>\n  \n  <p>再修改<code>vim /etc/vsftpd/vsftpd.conf</code></p>\n  \n  <blockquote>\n    <p><code>anonymous_enable=YES改为anonymous_enable=NO <br>\n        #anon_upload_enable=YES 改为 anon_upload_enable=NO <br>\n        #anon_mkdir_write_enable=YES 改为 anon_mkdir_write_enable=NO</code></p>\n  </blockquote>\n  \n  <p>再增加：</p>\n  \n  <blockquote>\n    <p><code>chroot_local_user=YES <br>\n        guest_enable=YES <br>\n        guest_username=virftp <br>\n        virtual_use_local_privs=YES <br>\n        user_config_dir=/etc/vsftpd/vsftpd_user_conf</code></p>\n  </blockquote>\n  \n  <p>启动vsftpd服务<code>service vsftpd start</code></p>\n</blockquote>\n\n<h4 id=\"centos-70安装配置vsftp服务器\"><strong>CentOS 7.0安装配置Vsftp服务器</strong></h4>\n\n<blockquote>\n  <p><a href=\"http://www.osyunwei.com/archives/9006.html\">http://www.osyunwei.com/archives/9006.html</a></p>\n</blockquote>\n\n<hr>\n\n<hr>\n\n<h2 id=\"配置squid服务\"><strong>配置Squid服务</strong></h2>\n\n<blockquote>\n  <p><a href=\"http://www.apelearn.com/study_v2/chapter22.html#squid\">http://www.apelearn.com/study_v2/chapter22.html#squid</a></p>\n</blockquote>\n\n\n\n<h3 id=\"出现错误acl-manager-proto-cacheobject\"><strong>出现错误<code>acl manager proto cache_object</code></strong></h3>\n\n<blockquote>\n  <p>错误代码：</p>\n  \n  <blockquote>\n    <p><code>ACL \'manager\' already exists with different type.  <br>\n        FATAL: Bungled squid.conf line 6: acl manager proto cache_object</code></p>\n  </blockquote>\n  \n  <p>解决方式：删除<code>acl manager proto cache_object</code>这行。</p>\n</blockquote>\n\n\n\n<h3 id=\"出现错误fatal-failed-to-make-swap-directory\"><strong>出现错误<code>FATAL: Failed to make swap directory</code></strong></h3>\n\n<blockquote>\n  <p>错误代码：</p>\n  \n  <blockquote>\n    <p><code>FATAL: Failed to make swap directory /data/squid/cache/00: (13) Permission denied</code></p>\n  </blockquote>\n  \n  <p>解决方式：<code>chown squid:squid /data/squid/cache/</code></p>\n  \n  <p>我的squid正向代理配置</p>\n  \n  <blockquote>\n    <p><code>http_port 3128 <br>\n        visible_hostname switch.localdomain <br>\n        acl localnet src 10.0.0.0/8     # RFC1918 possible internal network <br>\n        acl localnet src 172.16.0.0/12  # RFC1918 possible internal network <br>\n        acl localnet src 192.168.0.0/16 # RFC1918 possible internal network <br>\n        acl SSL_ports port 443 <br>\n        acl Safe_ports port 80 8080         # http <br>\n        acl Safe_ports port 21          # ftp <br>\n        acl Safe_ports port 443         # https <br>\n        acl CONNECT method CONNECT <br>\n        http_access allow manager localhost <br>\n        http_access deny manager <br>\n        http_access deny !Safe_ports <br>\n        http_access deny CONNECT !SSL_ports <br>\n        http_access allow localnet <br>\n        http_access allow localhost <br>\n        http_access allow all <br>\n        cache_dir aufs /data/squid/cache 1024 16 256 <br>\n        cache_mem 1024 MB <br>\n        cache_swap_log /var/log/squid/swap.log squid <br>\n        hierarchy_stoplist cgi-bin ? <br>\n        coredump_dir /var/spool/squid <br>\n        refresh_pattern ^ftp:           1440    20%     10080 <br>\n        refresh_pattern ^gopher:        1440    0%      1440 <br>\n        refresh_pattern -i (/cgi-bin/|\\?) 0     0%      0 <br>\n        refresh_pattern \\.(jpg|png|gif|mp3|xml) 1440    50%     2880    ignore-reload <br>\n        refresh_pattern .               0       20%     4320</code></p>\n  </blockquote>\n  \n  <p>我的squid反向代理</p>\n  \n  <blockquote>\n    <p><code>http_port 80 accel vhost vport <br>\n        cache_peer 101.226.103.106 parent 80 0 originserver name=a <br>\n        cache_peer 61.135.169.125 parent 80 0 originserver name=b <br>\n        cache_peer_domain a www.qq.com <br>\n        cache_peer_domain b www.baidu.com <br>\n        visible_hostname switch.localdomain <br>\n        acl localnet src 10.0.0.0/8     # RFC1918 possible internal network <br>\n        acl localnet src 172.16.0.0/12  # RFC1918 possible internal network <br>\n        acl localnet src 192.168.0.0/16 # RFC1918 possible internal network <br>\n        acl SSL_ports port 443 <br>\n        acl Safe_ports port 80 8080         # http <br>\n        acl Safe_ports port 21          # ftp <br>\n        acl Safe_ports port 443         # https <br>\n        acl CONNECT method CONNECT <br>\n        http_access allow manager localhost <br>\n        http_access deny manager <br>\n        http_access deny !Safe_ports <br>\n        http_access deny CONNECT !SSL_ports <br>\n        http_access allow localnet <br>\n        http_access allow localhost <br>\n        http_access allow all <br>\n        cache_dir aufs /data/squid/cache 1024 16 256 <br>\n        cache_mem 128 MB <br>\n        cache_swap_log /var/log/squid/swap.log squid <br>\n        hierarchy_stoplist cgi-bin ? <br>\n        coredump_dir /var/spool/squid <br>\n        refresh_pattern ^ftp:           1440    20%     10080 <br>\n        refresh_pattern ^gopher:        1440    0%      1440 <br>\n        refresh_pattern -i (/cgi-bin/|\\?) 0     0%      0 <br>\n        refresh_pattern \\.(jpg|png|gif|mp3|xml) 1440    50%     2880    ignore-reload <br>\n        refresh_pattern .               0       20%     4320</code></p>\n  </blockquote>\n</blockquote>\n\n<hr>\n\n<hr>\n\n<h2 id=\"配置tomcat\"><strong>配置Tomcat</strong></h2>\n\n<blockquote>\n  <p><a href=\"http://www.apelearn.com/study_v2/chapter23.html#tomcat\">http://www.apelearn.com/study_v2/chapter23.html#tomcat</a></p>\n</blockquote>\n\n<h3 id=\"配置jdk\"><strong>配置JDK</strong></h3>\n\n<blockquote>\n  <p><a href=\"http://www.oracle.com/technetwork/java/javase/downloads/java-archive-downloads-javase6-419409.html\">JDK官方下载地址</a></p>\n</blockquote>\n\n<h2 id=\"配置samba服务器\"><strong>配置Samba服务器</strong></h2>\n\n<blockquote>\n  <p><a href=\"http://www.apelearn.com/study_v2/chapter24.html#samba\">http://www.apelearn.com/study_v2/chapter24.html#samba</a></p>\n</blockquote>\n\n\n\n<h3 id=\"centos7将安全等级设置为share报错\"><strong>centos7将安全等级设置为share报错</strong></h3>\n\n<blockquote>\n  <p>解决办法是不设置成share等级。</p>\n</blockquote>\n\n\n\n<h3 id=\"linux访问samba出现ntstatushostunreachable\"><strong>Linux访问Samba出现NT_status_host_unreachable</strong></h3>\n\n<blockquote>\n  <p>将selinux和iptables关掉。</p>\n</blockquote>\n\n<hr>\n\n<hr>\n\n<h2 id=\"mysql-replication主从配置\"><strong>MySQL replication(主从)配置</strong></h2>\n\n<blockquote>\n  <p><a href=\"http://www.apelearn.com/study_v2/chapter25.html#mysql-replication\">http://www.apelearn.com/study_v2/chapter25.html#mysql-replication</a></p>\n</blockquote>\n\n<h3 id=\"kill第二个mysql进程\"><strong>kill第二个mysql进程</strong></h3>\n\n<blockquote>\n  <p><code>ps aux | grep mysql2.sock | grep -v grep | awk \'{print $2}\' | xargs kill</code></p>\n</blockquote>\n\n\n\n<h3 id=\"设置开机第二个启动mysql\"><strong>设置开机第二个启动mysql</strong></h3>\n\n<blockquote>\n  <p><code>echo \"cd /usr/local/mysql_2/bin/; ./mysqld_safe --defaults-file=../my.cnf --user=mysql &amp;\" &gt;&gt;/etc/rc.d/rc.local</code></p>\n</blockquote>\n\n<p><strong><font size=\"6\">参考《跟阿铭学Linux》</font></strong></p>\n\n<hr></div>\n        <script type=\"text/javascript\">\n            $(function () {\n                $(\'pre.prettyprint code\').each(function () {\n                    var lines = $(this).text().split(\'\\n\').length;\n                    var $numbering = $(\'<ul/>\').addClass(\'pre-numbering\').hide();\n                    $(this).addClass(\'has-numbering\').parent().append($numbering);\n                    for (i = 1; i <= lines; i++) {\n                        $numbering.append($(\'<li/>\').text(i));\n                    };\n                    $numbering.fadeIn(1700);\n                });\n            });\n        </script>\n   \n', '2016-04-16 01:21:04', '0');
INSERT INTO `article` VALUES ('10013', '10003', 'Linux学习笔记2', '\n        <div class=\"markdown_views\"><h1 id=\"linux学习笔记2\"><strong>Linux学习笔记2</strong></h1>\n\n<p><div class=\"toc\"><div class=\"toc\">\n<ul>\n<li><a href=\"#linux学习笔记2\">Linux学习笔记2</a><ul>\n<li><ul>\n<li><a href=\"#yum查看可用列表\">yum查看可用列表</a></li>\n<li><a href=\"#安装图形化界面\">安装图形化界面</a></li>\n<li><a href=\"#查看字符集\">查看字符集</a></li>\n<li><a href=\"#cent0s-64-安装virtualbox-增强功能失败的解决方案\">Cent0S 64 安装VirtualBox 增强功能失败的解决方案</a></li>\n<li><a href=\"#显示当前用户在哪个终端下\">显示当前用户在哪个终端下</a></li>\n<li><a href=\"#清除屏幕\">清除屏幕</a></li>\n<li><a href=\"#取消命令\">取消命令</a></li>\n<li><a href=\"#删除所有的字符从光标位置起一直到开头\">删除所有的字符从光标位置起一直到开头</a></li>\n<li><a href=\"#删除所有的字符从光标位置起一直到结尾\">删除所有的字符从光标位置起一直到结尾</a></li>\n<li><a href=\"#光标移动到最前\">光标移动到最前</a></li>\n<li><a href=\"#光标移动到最后\">光标移动到最后</a></li>\n<li><a href=\"#暂停屏幕一般用于动态日志查看\">暂停屏幕一般用于动态日志查看</a></li>\n<li><a href=\"#取消暂停屏幕\">取消暂停屏幕</a></li>\n<li><a href=\"#退出当前终端\">退出当前终端</a></li>\n<li><a href=\"#暂停当前进程\">暂停当前进程</a></li>\n<li><a href=\"#继续当前进程\">继续当前进程</a></li>\n<li><a href=\"#案例\">案例</a></li>\n<li><a href=\"#显示工作中的进程\">显示工作中的进程</a></li>\n<li><a href=\"#案例-1\">案例</a></li>\n<li><a href=\"#补全当前命令路径\">补全当前命令路径</a></li>\n<li><a href=\"#查询帮助文档\">查询帮助文档</a></li>\n<li><a href=\"#安装man命令\">安装man命令</a></li>\n<li><a href=\"#ls命令的使用\">ls命令的使用</a></li>\n<li><a href=\"#查看系统是多少位系统\">查看系统是多少位系统</a></li>\n<li><a href=\"#查看cpu信息\">查看CPU信息</a></li>\n<li><a href=\"#查看内存信息\">查看内存信息</a></li>\n<li><a href=\"#关机\">关机</a></li>\n<li><a href=\"#重启\">重启</a></li>\n<li><a href=\"#如何在centos-7-rhel-7-运行单用户模式进行root的密码重置\">如何在CentOS 7  RHEL 7 运行单用户模式进行root的密码重置</a></li>\n<li><a href=\"#centos-7用密码保护-grub\">CentOS 7用密码保护 GRUB</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>\n</div>\n</p>\n\n\n\n<h3 id=\"yum查看可用列表\"><strong>yum查看可用列表</strong></h3>\n\n<blockquote>\n  <p>yum grouplist | less</p>\n</blockquote>\n\n\n\n<h3 id=\"安装图形化界面\"><strong>安装图形化界面</strong></h3>\n\n<blockquote>\n  <p>yum groupinstall -y “GNOME Desktop”</p>\n  \n  <blockquote>\n    <p>PS:在grouplist中找到带有Desktop文字的组。然后通过上述命令安装</p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"查看字符集\"><strong>查看字符集</strong></h3>\n\n<blockquote>\n  <p>echo $LANG</p>\n</blockquote>\n\n\n\n<h3 id=\"cent0s-64-安装virtualbox-增强功能失败的解决方案\"><strong>Cent0S 6.4 安装VirtualBox 增强功能失败的解决方案</strong></h3>\n\n<blockquote>\n  <p>yum install kernel</p>\n  \n  <p>yum install kernel-devel</p>\n  \n  <p>yum install gcc</p>\n  \n  <p>yum install make</p>\n  \n  <blockquote>\n    <p>PS:在安装脚本执行到“building the main Guest Additions module FAILED”，原因是安装的是最小桌面的，用“rpm –qa|grep gcc” 一下发现gcc没有安装。</p>\n    \n    <p>重启后,选择适合的内核就能安装的，一般是第一个，如果不行一个一个试。</p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"显示当前用户在哪个终端下\"><strong>显示当前用户在哪个终端下</strong></h3>\n\n<blockquote>\n  <p>who am i</p>\n</blockquote>\n\n\n\n<h3 id=\"清除屏幕\"><strong>清除屏幕</strong></h3>\n\n<blockquote>\n  <p>clear，ctrl + l</p>\n</blockquote>\n\n\n\n<h3 id=\"取消命令\"><strong>取消命令</strong></h3>\n\n<blockquote>\n  <p>ctrl + c</p>\n</blockquote>\n\n\n\n<h3 id=\"删除所有的字符从光标位置起一直到开头\"><strong>删除所有的字符，从光标位置起，一直到开头</strong></h3>\n\n<blockquote>\n  <p>ctrl + u</p>\n</blockquote>\n\n\n\n<h3 id=\"删除所有的字符从光标位置起一直到结尾\"><strong>删除所有的字符，从光标位置起，一直到结尾</strong></h3>\n\n<blockquote>\n  <p>ctrl + k</p>\n</blockquote>\n\n\n\n<h3 id=\"光标移动到最前\"><strong>光标移动到最前</strong></h3>\n\n<blockquote>\n  <p>ctrl + a</p>\n</blockquote>\n\n\n\n<h3 id=\"光标移动到最后\"><strong>光标移动到最后</strong></h3>\n\n<blockquote>\n  <p>ctrl + e</p>\n</blockquote>\n\n\n\n<h3 id=\"暂停屏幕一般用于动态日志查看\"><strong>暂停屏幕，一般用于动态日志查看</strong></h3>\n\n<blockquote>\n  <p>ctrl + s</p>\n</blockquote>\n\n\n\n<h3 id=\"取消暂停屏幕\"><strong>取消暂停屏幕</strong></h3>\n\n<blockquote>\n  <p>ctrl + q</p>\n</blockquote>\n\n\n\n<h3 id=\"退出当前终端\"><strong>退出当前终端</strong></h3>\n\n<blockquote>\n  <p>ctrl + d，logout，exit</p>\n</blockquote>\n\n\n\n<h3 id=\"暂停当前进程\"><strong>暂停当前进程</strong></h3>\n\n<blockquote>\n  <p>ctrl + z</p>\n</blockquote>\n\n\n\n<h3 id=\"继续当前进程\"><strong>继续当前进程</strong></h3>\n\n<blockquote>\n  <p>fg</p>\n</blockquote>\n\n\n\n<h3 id=\"案例\"><strong>案例</strong></h3>\n\n\n\n<pre class=\"prettyprint\"><code class=\" hljs perl\">[root<span class=\"hljs-variable\">@localhost</span> ~]<span class=\"hljs-comment\"># sleep 60</span>\n^Z\n[<span class=\"hljs-number\">1</span>]+  已停止               <span class=\"hljs-keyword\">sleep</span> <span class=\"hljs-number\">60</span>\n[root<span class=\"hljs-variable\">@localhost</span> ~]<span class=\"hljs-comment\"># fg</span>\n<span class=\"hljs-keyword\">sleep</span> <span class=\"hljs-number\">60</span>\n^C\n[root<span class=\"hljs-variable\">@localhost</span> ~]<span class=\"hljs-comment\"># </span></code></pre>\n\n\n\n<h3 id=\"显示工作中的进程\"><strong>显示工作中的进程</strong></h3>\n\n<blockquote>\n  <p>jobs</p>\n</blockquote>\n\n\n\n<h3 id=\"案例-1\"><strong>案例</strong></h3>\n\n\n\n<pre class=\"prettyprint\"><code class=\" hljs perl\">[root<span class=\"hljs-variable\">@localhost</span> ~]<span class=\"hljs-comment\"># sleep 60</span>\n^Z\n[<span class=\"hljs-number\">1</span>]+  已停止               <span class=\"hljs-keyword\">sleep</span> <span class=\"hljs-number\">60</span>\n[root<span class=\"hljs-variable\">@localhost</span> ~]<span class=\"hljs-comment\"># sleep 60</span>\n^Z\n[<span class=\"hljs-number\">2</span>]+  已停止               <span class=\"hljs-keyword\">sleep</span> <span class=\"hljs-number\">60</span>\n[root<span class=\"hljs-variable\">@localhost</span> ~]<span class=\"hljs-comment\"># jobs</span>\n[<span class=\"hljs-number\">1</span>]-  已停止               <span class=\"hljs-keyword\">sleep</span> <span class=\"hljs-number\">60</span>\n[<span class=\"hljs-number\">2</span>]+  已停止               <span class=\"hljs-keyword\">sleep</span> <span class=\"hljs-number\">60</span>\n[root<span class=\"hljs-variable\">@localhost</span> ~]<span class=\"hljs-comment\"># fg 1</span>\n<span class=\"hljs-keyword\">sleep</span> <span class=\"hljs-number\">60</span>\n^C\n[root<span class=\"hljs-variable\">@localhost</span> ~]<span class=\"hljs-comment\"># fg 2</span>\n<span class=\"hljs-keyword\">sleep</span> <span class=\"hljs-number\">60</span>\n^C\n[root<span class=\"hljs-variable\">@localhost</span> ~]<span class=\"hljs-comment\"># </span></code></pre>\n\n\n\n<h3 id=\"补全当前命令路径\"><strong>补全当前命令，路径</strong></h3>\n\n<blockquote>\n  <p>Tab</p>\n</blockquote>\n\n\n\n<h3 id=\"查询帮助文档\"><strong>查询帮助文档</strong></h3>\n\n<blockquote>\n  <p>man 命令名</p>\n</blockquote>\n\n\n\n<h3 id=\"安装man命令\"><strong>安装man命令</strong></h3>\n\n<blockquote>\n  <p>yum install -y man</p>\n</blockquote>\n\n\n\n<h3 id=\"ls命令的使用\"><strong>ls命令的使用</strong></h3>\n\n<blockquote>\n  <p><strong>显示目录下所有文件，包括隐藏文件</strong></p>\n  \n  <ul>\n  <li><p>ls -a <br>\n  <strong>显示目录下详细信息</strong></p></li>\n  <li><p>ls -l</p>\n  \n  <p><strong>显示目录信息</strong></p></li>\n  <li><p>ls -d</p>\n  \n  <pre class=\"prettyprint\"><code class=\" hljs coffeescript\">[root<span class=\"hljs-property\">@localhost</span> ~]<span class=\"hljs-comment\"># ls -d /root/</span>\n<span class=\"hljs-regexp\">/root/</span>\n[root<span class=\"hljs-property\">@localhost</span> ~]<span class=\"hljs-comment\"># </span></code></pre>\n  \n  <p><strong>按时间顺序排序</strong></p></li>\n  <li><p>ls -t</p>\n  \n  <pre class=\"prettyprint\"><code class=\" hljs ruby\">[root<span class=\"hljs-variable\">@localhost</span> ~]<span class=\"hljs-comment\"># ls -lt /root/</span>\n总用量 <span class=\"hljs-number\">8</span>\ndrwxr-xr-x. <span class=\"hljs-number\">2</span> root root    <span class=\"hljs-number\">6</span> <span class=\"hljs-number\">3</span>月  <span class=\"hljs-number\">26</span> <span class=\"hljs-number\">14</span><span class=\"hljs-symbol\">:</span><span class=\"hljs-number\">35</span> <span class=\"hljs-constant\">Music</span>\ndrwxr-xr-x. <span class=\"hljs-number\">2</span> root root    <span class=\"hljs-number\">6</span> <span class=\"hljs-number\">3</span>月  <span class=\"hljs-number\">26</span> <span class=\"hljs-number\">14</span><span class=\"hljs-symbol\">:</span><span class=\"hljs-number\">35</span> <span class=\"hljs-constant\">Pictures</span>\ndrwxr-xr-x. <span class=\"hljs-number\">2</span> root root    <span class=\"hljs-number\">6</span> <span class=\"hljs-number\">3</span>月  <span class=\"hljs-number\">26</span> <span class=\"hljs-number\">14</span><span class=\"hljs-symbol\">:</span><span class=\"hljs-number\">35</span> <span class=\"hljs-constant\">Videos</span>\ndrwxr-xr-x. <span class=\"hljs-number\">2</span> root root    <span class=\"hljs-number\">6</span> <span class=\"hljs-number\">3</span>月  <span class=\"hljs-number\">26</span> <span class=\"hljs-number\">14</span><span class=\"hljs-symbol\">:</span><span class=\"hljs-number\">35</span> <span class=\"hljs-constant\">Desktop</span>\ndrwxr-xr-x. <span class=\"hljs-number\">2</span> root root    <span class=\"hljs-number\">6</span> <span class=\"hljs-number\">3</span>月  <span class=\"hljs-number\">26</span> <span class=\"hljs-number\">14</span><span class=\"hljs-symbol\">:</span><span class=\"hljs-number\">35</span> <span class=\"hljs-constant\">Documents</span>\ndrwxr-xr-x. <span class=\"hljs-number\">2</span> root root    <span class=\"hljs-number\">6</span> <span class=\"hljs-number\">3</span>月  <span class=\"hljs-number\">26</span> <span class=\"hljs-number\">14</span><span class=\"hljs-symbol\">:</span><span class=\"hljs-number\">35</span> <span class=\"hljs-constant\">Downloads</span>\ndrwxr-xr-x. <span class=\"hljs-number\">2</span> root root    <span class=\"hljs-number\">6</span> <span class=\"hljs-number\">3</span>月  <span class=\"hljs-number\">26</span> <span class=\"hljs-number\">14</span><span class=\"hljs-symbol\">:</span><span class=\"hljs-number\">35</span> <span class=\"hljs-constant\">Public</span>\ndrwxr-xr-x. <span class=\"hljs-number\">2</span> root root    <span class=\"hljs-number\">6</span> <span class=\"hljs-number\">3</span>月  <span class=\"hljs-number\">26</span> <span class=\"hljs-number\">14</span><span class=\"hljs-symbol\">:</span><span class=\"hljs-number\">35</span> <span class=\"hljs-constant\">Templates</span>\n-rw-------. <span class=\"hljs-number\">1</span> root root <span class=\"hljs-number\">1329</span> <span class=\"hljs-number\">3</span>月  <span class=\"hljs-number\">25</span> <span class=\"hljs-number\">20</span><span class=\"hljs-symbol\">:</span><span class=\"hljs-number\">44</span> initial-setup-ks.cfg\n-rw-------. <span class=\"hljs-number\">1</span> root root <span class=\"hljs-number\">1282</span> <span class=\"hljs-number\">3</span>月  <span class=\"hljs-number\">24</span> <span class=\"hljs-number\">20</span><span class=\"hljs-symbol\">:</span><span class=\"hljs-number\">58</span> anaconda-ks.cfg\n[root<span class=\"hljs-variable\">@localhost</span> ~]<span class=\"hljs-comment\"># </span></code></pre></li>\n  </ul>\n</blockquote>\n\n\n\n<h3 id=\"查看系统是多少位系统\"><strong>查看系统是多少位系统</strong></h3>\n\n<blockquote>\n  <p>uname -a</p>\n</blockquote>\n\n\n\n<h3 id=\"查看cpu信息\"><strong>查看CPU信息</strong></h3>\n\n<blockquote>\n  <p>cat /proc/cpuinfo | less</p>\n</blockquote>\n\n\n\n<h3 id=\"查看内存信息\"><strong>查看内存信息</strong></h3>\n\n<blockquote>\n  <p>cat /proc/meminfo | less</p>\n</blockquote>\n\n\n\n<h3 id=\"关机\"><strong>关机</strong></h3>\n\n<blockquote>\n  <p>shutdown -h now</p>\n  \n  <p>init 0</p>\n  \n  <p>halt</p>\n  \n  <p>poweroff</p>\n</blockquote>\n\n\n\n<h3 id=\"重启\"><strong>重启</strong></h3>\n\n<blockquote>\n  <p>shutdown -r now</p>\n  \n  <p>reboot</p>\n  \n  <p>init 6</p>\n</blockquote>\n\n\n\n<h3 id=\"如何在centos-7-rhel-7-运行单用户模式进行root的密码重置\"><strong>如何在CentOS 7 / RHEL 7 运行单用户模式进行root的密码重置</strong></h3>\n\n<blockquote>\n  <p><a href=\"http://bbs.51cto.com/thread-1124212-1.html\">http://bbs.51cto.com/thread-1124212-1.html</a></p>\n</blockquote>\n\n\n\n<h3 id=\"centos-7用密码保护-grub\"><strong>CentOS 7用密码保护 GRUB</strong></h3>\n\n<blockquote>\n  <p><a href=\"http://www.linuxidc.com/Linux/2015-05/116964.htm\">http://www.linuxidc.com/Linux/2015-05/116964.htm</a></p>\n</blockquote>\n\n<p><strong><font size=\"6\">参考《跟阿铭学Linux》</font></strong></p>\n\n<hr></div>\n        <script type=\"text/javascript\">\n            $(function () {\n                $(\'pre.prettyprint code\').each(function () {\n                    var lines = $(this).text().split(\'\\n\').length;\n                    var $numbering = $(\'<ul/>\').addClass(\'pre-numbering\').hide();\n                    $(this).addClass(\'has-numbering\').parent().append($numbering);\n                    for (i = 1; i <= lines; i++) {\n                        $numbering.append($(\'<li/>\').text(i));\n                    };\n                    $numbering.fadeIn(1700);\n                });\n            });\n        </script>\n   \n', '2016-04-16 01:21:04', '0');
INSERT INTO `article` VALUES ('10014', '10003', 'Spring入门', '\n\n<h1 style=\"text-align:center\"><span style=\"font-size:18px\">Spring<span style=\"font-family:宋体\">入门</span></span></h1>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>基本概述</h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;Spring<span style=\"font-family:宋体\">是一个开源框架，</span><span style=\"font-family:Calibri\">Spring</span><span style=\"font-family:宋体\">是于</span><span style=\"font-family:Calibri\">2003&nbsp;</span><span style=\"font-family:宋体\">年兴起的一个轻量级的</span><span style=\"font-family:Calibri\">Java&nbsp;</span><span style=\"font-family:宋体\">开发框架，由</span><span style=\"font-family:Calibri\">Rod&nbsp;Johnson&nbsp;</span><span style=\"font-family:宋体\">在其著作</span><span style=\"font-family:Calibri\">Expert&nbsp;One-On-One&nbsp;J2EE&nbsp;Development&nbsp;and&nbsp;Design</span><span style=\"font-family:宋体\">中阐述的部分理念和原型衍生而来。它是为了解决企业应用开发的复杂性而创建的。框架的主要优势之一就是其分层架构，分层架构允许使用者选择使用哪一个组件，同时为&nbsp;</span><span style=\"font-family:Calibri\">J2EE&nbsp;</span><span style=\"font-family:宋体\">应用程序开发提供集成的框架。</span><span style=\"font-family:Calibri\">Spring</span><span style=\"font-family:宋体\">使用基本的</span><span style=\"font-family:Calibri\">JavaBean</span><span style=\"font-family:宋体\">来完成以前只可能由</span><span style=\"font-family:Calibri\">EJB</span><span style=\"font-family:宋体\">完成的事情。然而，</span><span style=\"font-family:Calibri\">Spring</span><span style=\"font-family:宋体\">的用途不仅限于服务器端的开发。从简单性、可测试性和松耦合的角度而言，任何</span><span style=\"font-family:Calibri\">Java</span><span style=\"font-family:宋体\">应用都可以从</span><span style=\"font-family:Calibri\">Spring</span><span style=\"font-family:宋体\">中受益。</span><span style=\"font-family:Calibri\">Spring</span><span style=\"font-family:宋体\">的核心是控制反转（</span><span style=\"font-family:Calibri\">IOC</span><span style=\"font-family:宋体\">）和面向切面（</span><span style=\"font-family:Calibri\">AOP</span><span style=\"font-family:宋体\">）。简单来说，</span><span style=\"font-family:Calibri\">Spring</span><span style=\"font-family:宋体\">是一个分层的</span><span style=\"font-family:Calibri\">JavaSE/EEfull-stack(</span><span style=\"font-family:宋体\">一站式</span><span style=\"font-family:Calibri\">)&nbsp;</span><span style=\"font-family:宋体\">轻量级开源框架。</span></p>\n<p><br>\n</p>\n<h2>Spring<span style=\"font-family:宋体\">是什么</span><span style=\"font-family:Calibri\">?</span></h2>\n<p>1<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">Spring</span><span style=\"font-family:宋体\">是容器框架，用于配置</span><span style=\"font-family:Calibri\">Bean</span><span style=\"font-family:宋体\">，并维护</span><span style=\"font-family:Calibri\">Bean</span><span style=\"font-family:宋体\">之间关系的框架。</span><span style=\"font-family:Calibri\">(Struts</span><span style=\"font-family:宋体\">是</span><span style=\"font-family:Calibri\">web</span><span style=\"font-family:宋体\">框架，管理</span><span style=\"font-family:Calibri\">jsp</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">action</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">actionform)(hibernate</span><span style=\"font-family:宋体\">是</span><span style=\"font-family:Calibri\">ORM</span><span style=\"font-family:宋体\">框架，处于持久层</span><span style=\"font-family:Calibri\">)</span></p>\n<p>2<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">spring</span><span style=\"font-family:宋体\">中的核心概念是</span><span style=\"font-family:Calibri\">IOC(Inverse&nbsp;of&nbsp;Control</span><span style=\"font-family:宋体\">控制反转</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">或者叫做</span><span style=\"font-family:Calibri\">DI(Dependency&nbsp;injection&nbsp;</span><span style=\"font-family:宋体\">依赖注入</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">AOP(Aspect-Oriented&nbsp;Programming&nbsp;</span><span style=\"font-family:宋体\">面向切面编程</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">。</span></p>\n<p>3<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">spring</span><span style=\"font-family:宋体\">是用</span><span style=\"font-family:Calibri\">Bean</span><span style=\"font-family:宋体\">来管理组件的，</span><span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">可以是</span><span style=\"font-family:Calibri\">Java</span><span style=\"font-family:宋体\">中的任意一种对象</span><span style=\"font-family:Calibri\">(javabean</span><span style=\"font-family:宋体\">，</span><span style=\"font-family:Calibri\">service</span><span style=\"font-family:宋体\">，</span><span style=\"font-family:Calibri\">action</span><span style=\"font-family:宋体\">，数据源，</span><span style=\"font-family:Calibri\">dao</span><span style=\"font-family:宋体\">等</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">。</span></p>\n<p><br>\n</p>\n<h2>SHH<span style=\"font-family:宋体\">框架整合</span><span style=\"font-family:Calibri\">MVC</span><span style=\"font-family:宋体\">模型图</span></h2>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160218165506959\" alt=\"\"></div>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p>PS<span style=\"font-family:宋体\">：这可以和前端时间写的</span><a target=\"_blank\" target=\"_blank\" href=\"http://blog.csdn.net/q547550831/article/details/50613010\"><span style=\"color:rgb(128,0,128)\">Hibernate<span style=\"font-family:宋体\">入门</span></span></a>、<a target=\"_blank\" target=\"_blank\" href=\"http://blog.csdn.net/q547550831/article/details/50562023\"><span style=\"color:rgb(128,0,128)\">Struts<span style=\"font-family:宋体\">入门</span></span></a>、<a target=\"_blank\" target=\"_blank\" href=\"http://blog.csdn.net/q547550831/article/details/50478721\"><span style=\"color:rgb(128,0,128)\">Web&nbsp;MVC<span style=\"font-family:宋体\">模式实现</span></span></a>、<a target=\"_blank\" target=\"_blank\" href=\"http://blog.csdn.net/q547550831/article/details/50669086\"><span style=\"color:rgb(128,0,128)\">Hibernate<span style=\"font-family:宋体\">框架整合</span></span></a>这四篇博客里的<span style=\"font-family:Calibri\">MVC</span><span style=\"font-family:宋体\">模式进行比较</span>。</p>\n<br>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>Spring<span style=\"font-family:宋体\">入门案例</span></h2>\n<p>\n<p>1<span style=\"font-family:宋体\">、引入</span><span style=\"font-family:Calibri\">spring</span><span style=\"font-family:宋体\">开发包</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">最小配置</span><span style=\"font-family:Calibri\">spring.jar</span><span style=\"font-family:宋体\">，</span><span style=\"font-family:Calibri\">common-logging.jar)</span><span style=\"font-family:宋体\">。</span></p>\n<p>2<span style=\"font-family:宋体\">、创建</span><span style=\"font-family:Calibri\">spring</span><span style=\"font-family:宋体\">核心文件</span><span style=\"font-family:Calibri\">applicationContext.xml(</span><span style=\"font-family:宋体\">该文件一般放在</span><span style=\"font-family:Calibri\">src</span><span style=\"font-family:宋体\">目录下，该文件引入</span><span style=\"font-family:Calibri\">xsd</span><span style=\"font-family:宋体\">文件，可以从案例项目中拷贝</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">。</span></p>\n<p><span style=\"font-family:宋体\"></span><pre code_snippet_id=\"1581716\" snippet_file_name=\"blog_20160221_1_3533603\" name=\"code\" class=\"html\">&lt;beans \n	xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n 	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n 	xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n 	xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\n 	xsi:schemaLocation=&quot;\n 		http://www.springframework.org/schema/beans \n 		http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\n    	http://www.springframework.org/schema/context \n    	http://www.springframework.org/schema/context/spring-context-2.5.xsd\n    	http://www.springframework.org/schema/tx \n    	http://www.springframework.org/schema/tx/spring-tx-2.5.xsd&quot;&gt;\n&lt;/beans&gt;</pre></p>\n<p>3<span style=\"font-family:宋体\">、配置</span><span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">。</span></p>\n<pre code_snippet_id=\"1581716\" snippet_file_name=\"blog_20160218_2_7655411\" code_snippet_id=\"1581716\" snippet_file_name=\"blog_20160218_2_7655411\" name=\"code\" class=\"html\">	&lt;!-- 在容器文件中配置bean(service/dao/domain/action/数据源) --&gt;\n	&lt;!-- bean元素的作用是，加载spring框架时，spring会自动创建bean对象，放入内存 相当于 UserService userService \n		= new UserService(); userService.setName(&quot;zs&quot;); --&gt;\n	&lt;bean id=&quot;userService&quot; class=&quot;com.pc.service.UserService&quot;&gt;\n		&lt;!-- 这里就体现出注入的概念 --&gt;\n		&lt;property name=&quot;name&quot;&gt;\n			&lt;value&gt;zs&lt;/value&gt;\n		&lt;/property&gt;\n		&lt;!-- 在userService中引用user2Service bean--&gt;\n		&lt;property name=&quot;user2Service&quot; ref=&quot;user2Service&quot;/&gt;\n	&lt;/bean&gt;\n	&lt;bean id=&quot;user2Service&quot; class=&quot;com.pc.service.User2Service&quot;&gt;\n		&lt;property name=&quot;name&quot; value=&quot;ls&quot;/&gt;\n	&lt;/bean&gt;</pre>\n<p>4<span style=\"font-family:宋体\">、测试。</span></p>\n<pre code_snippet_id=\"1581716\" snippet_file_name=\"blog_20160218_3_6433912\" code_snippet_id=\"1581716\" snippet_file_name=\"blog_20160218_3_6433912\" name=\"code\" class=\"java\">		// 使用传统方法，调用UserService中的printOK()\n		// UserService userService = new UserService();\n		// userService.setName(&quot;zs&quot;);\n		// userService.printOK();\n		\n		// 采用Spring框架来实现上述功能\n		// 1.得到spring的applicationContext对象(容器对象)\n		// ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);\n		// 用工具类获取单态 applicationContext\n		ApplicationContext applicationContext = ApplicationContextUtil.getApplicationContext();\n		// 2.获取bean\n		UserService userService = (UserService) applicationContext.getBean(&quot;userService&quot;);\n		userService.printOK();</pre><br>\n<h2>spring<span style=\"font-family:宋体\">运行原理图</span></h2>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160218165648759\" alt=\"\"></div>\n<h3>总结</h3>\n<p>1、当<span style=\"font-family:Calibri\">ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);</span><span style=\"font-family:宋体\">执行的时候，</span><span style=\"font-family:Calibri\">spring</span><span style=\"font-family:宋体\">容器对象被创建</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">同时</span><span style=\"font-family:Calibri\">applicaionContext.xml</span><span style=\"font-family:宋体\">中配置&nbsp;</span><span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">就会被创建</span>。</p>\n<p>2、UserService&nbsp;us=(UserService)&nbsp;ac.getBean(&quot;userService&quot;);us.sayHello();可以使用<span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">。</span></p>\n<p>3<span style=\"font-family:宋体\">、</span>spring<span style=\"font-family:宋体\">实际上是一个容器框架，可以配置各种</span><span style=\"font-family:Calibri\">bean(action/service/domain/dao),</span><span style=\"font-family:宋体\">并且可以维护</span><span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">与</span><span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">的关系</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">当需要使用某个</span><span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">的时候，可以</span>使用getBean(id)。</p>\n<br>\n<h2>IOC是什么？</h2>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;ioc(inverse&nbsp;of&nbsp;controll&nbsp;)&nbsp;<span style=\"font-family:宋体\">控制反转</span><span style=\"font-family:Calibri\">:&nbsp;</span><span style=\"font-family:宋体\">所谓控制反转就是把创建对象</span><span style=\"font-family:Calibri\">(bean),</span><span style=\"font-family:宋体\">和维护对象</span><span style=\"font-family:Calibri\">(bean)</span><span style=\"font-family:宋体\">的关系的权利从程序中转移到</span><span style=\"font-family:Calibri\">spring</span><span style=\"font-family:宋体\">的容器</span><span style=\"font-family:Calibri\">(applicationContext.xml),</span><span style=\"font-family:宋体\">而程序本身不再维护</span>。</p>\n<p><br>\n</p>\n<h2>DI<span style=\"font-family:宋体\">是什么</span>？</h2>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;di(dependency&nbsp;injection)&nbsp;<span style=\"font-family:宋体\">依赖注入</span><span style=\"font-family:Calibri\">:&nbsp;</span><span style=\"font-family:宋体\">实际上</span><span style=\"font-family:Calibri\">di</span><span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">ioc</span><span style=\"font-family:宋体\">是同一个概念，</span><span style=\"font-family:Calibri\">spring</span><span style=\"font-family:宋体\">设计者认为</span><span style=\"font-family:Calibri\">di</span><span style=\"font-family:宋体\">更准确表示</span><span style=\"font-family:Calibri\">spring</span><span style=\"font-family:宋体\">核心技术</span>。</p>\n<br>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>Spring<span style=\"font-family:宋体\">的接口编程</span></h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;spring<span style=\"font-family:宋体\">开发提倡接口编程</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">配合</span><span style=\"font-family:Calibri\">di</span><span style=\"font-family:宋体\">技术可以层与层的解耦</span>。</p>\n<p>案例：字母大小写转换</p>\n<p>思路：</p>\n<h3>1<span style=\"font-family:宋体\">、创建一个接口</span>ChangeLetter&nbsp;</h3>\n<pre code_snippet_id=\"1581716\" snippet_file_name=\"blog_20160218_4_9672515\" code_snippet_id=\"1581716\" snippet_file_name=\"blog_20160218_4_9672515\" name=\"code\" class=\"java\">package com.pc.inter;\n/**\n * \n * @author Switch\n * @function 字母转换接口\n * @description 可以将字母转换的接口\n *\n */\npublic interface ChangeLetter {\n	// 提供一个字母大小写转换的方法\n	public String change();\n}</pre>\n<h3>2<span style=\"font-family:宋体\">、两个类</span>UpperLetter和LowerLetter实现接口</h3>\n<pre code_snippet_id=\"1581716\" snippet_file_name=\"blog_20160218_5_5386354\" code_snippet_id=\"1581716\" snippet_file_name=\"blog_20160218_5_5386354\" name=\"code\" class=\"java\">package com.pc.inter;\nimport com.pc.inter.ChangeLetter;\n/**\n * \n * @author Switch\n * @function 小写转大写\n * @description\n *\n */\npublic class UpperLetter implements ChangeLetter {\n	private String str;\n	@Override\n	public String change() {\n		// 把小写字母-&gt;大写\n		return str.toUpperCase();\n	}\n\n	public String getStr() {\n		return str;\n	}\n\n	public void setStr(String str) {\n		this.str = str;\n	}\n}</pre><br>\n<pre code_snippet_id=\"1581716\" snippet_file_name=\"blog_20160218_6_9181364\" code_snippet_id=\"1581716\" snippet_file_name=\"blog_20160218_6_9181364\" name=\"code\" class=\"java\">package com.pc.inter;\nimport com.pc.inter.ChangeLetter;\n/**\n * \n * @author Switch\n * @function 大写转小写\n * @description\n *\n */\npublic class LowerLetter implements ChangeLetter{\n	private String str;\n	@Override\n	// 大写转小写\n	public String change() {\n		return str.toLowerCase();\n	}\n	public String getStr() {\n		return str;\n	}\n	public void setStr(String str) {\n		this.str = str;\n	}\n}</pre><br>\n<h3>3<span style=\"font-family:宋体\">、对象配置到</span><span style=\"font-family:Calibri\">Spring</span><span style=\"font-family:宋体\">容器</span></h3>\n<pre code_snippet_id=\"1581716\" snippet_file_name=\"blog_20160218_7_991509\" code_snippet_id=\"1581716\" snippet_file_name=\"blog_20160218_7_991509\" name=\"code\" class=\"html\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \n	xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;\n	xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\n	xsi:schemaLocation=&quot;\n			http://www.springframework.org/schema/beans \n			http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\n			http://www.springframework.org/schema/aop \n			http://www.springframework.org/schema/aop/spring-aop-2.5.xsd\n			http://www.springframework.org/schema/tx \n			http://www.springframework.org/schema/tx/spring-tx-2.5.xsd&quot;&gt;\n	&lt;!-- 在容器文件中配置bean(service/dao/domain/action/数据源) --&gt;\n	&lt;!-- &lt;bean id=&quot;changeLetter&quot; class=&quot;com.pc.inter.UpperLetter&quot;&gt;\n		&lt;property name=&quot;str&quot;&gt;\n			&lt;value&gt;abcdefg&lt;/value&gt;\n		&lt;/property&gt;\n	&lt;/bean&gt; --&gt;\n	&lt;bean id=&quot;changeLetter&quot; class=&quot;com.pc.inter.LowerLetter&quot;&gt;\n		&lt;property name=&quot;str&quot; value=&quot;GFEDCBA&quot;/&gt;\n	&lt;/bean&gt;\n&lt;/beans&gt;</pre><br>\n<h3>4<span style=\"font-family:宋体\">、使用</span></h3>\n<pre code_snippet_id=\"1581716\" snippet_file_name=\"blog_20160218_8_849805\" code_snippet_id=\"1581716\" snippet_file_name=\"blog_20160218_8_849805\" name=\"code\" class=\"java\">package com.pc.inter;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n/**\n * \n * @author Switch\n * @function 测试Spring接口编程类\n * @description\n *\n */\npublic class Test {\n\n	/**\n	 * @param args\n	 */\n	public static void main(String[] args) {\n		// TODO Auto-generated method stub\n		ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;com/pc/inter/beans.xml&quot;);\n		// 获取，不用接口\n		// UpperLetter upperLetter = (UpperLetter) applicationContext.getBean(&quot;changeLetter&quot;);\n		// System.out.println(upperLetter.change());\n		\n		// 使用接口访问bean\n		ChangeLetter changeLetter = (ChangeLetter) applicationContext.getBean(&quot;changeLetter&quot;);\n		System.out.println(changeLetter.change());\n	}\n}</pre>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：通过上述案例，可以发现</span><span style=\"font-family:Calibri\">Spring</span><span style=\"font-family:宋体\">的</span><span style=\"font-family:Calibri\">DI</span><span style=\"font-family:宋体\">特性配合接口编程，可以减少上层对下层实现的依赖，也就是说在</span><span style=\"font-family:Calibri\">WEB</span><span style=\"font-family:宋体\">开发中，可以减少</span><span style=\"font-family:Calibri\">WEB</span><span style=\"font-family:宋体\">层和业务层的耦合度。</span></span></p>\n<br>\n<h2>ApplicationContext<span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">Bean</span><span style=\"font-family:宋体\">工厂</span></h2>\n<h3>应用上下文<span style=\"font-family:Calibri\">(ApplicationContext)</span></h3>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;建立在<span style=\"font-family:Calibri\">Bean</span><span style=\"font-family:宋体\">工厂的基础之上，提供系统架构服务。</span></p>\n<p>基本语法：</p>\n<p>ApplicationContext&nbsp;applicationContext&nbsp;=&nbsp;new&nbsp;ClassPathXmlApplicationContext(“上下文<span style=\"font-family:Calibri\">XML</span>”);</p>\n<p>&nbsp;</p>\n<h3>应用上下文的功能</h3>\n<p>1.<span style=\"font-family:宋体\">提供文本信息解析工具，包括对国际化支持。</span></p>\n<p>2.<span style=\"font-family:宋体\">提供载入文件资源的通用方法，如图片。</span></p>\n<p>3.<span style=\"font-family:宋体\">可以向注册为监听器的</span><span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">发送事件。</span></p>\n<p>&nbsp;</p>\n<h3>Bean<span style=\"font-family:宋体\">工厂</span></h3>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;最简单的容器，提供基础的依赖注入支持，创建各种类型的<span style=\"font-family:Calibri\">Bean</span><span style=\"font-family:宋体\">。</span></p>\n<p>基本语法：</p>\n<p>BeanFactory&nbsp;beanFactory&nbsp;=&nbsp;new&nbsp;XmlBeanFactory(new&nbsp;ClassPathResource(“上下文<span style=\"font-family:Calibri\">XML</span>”));</p>\n<p>beanFactory.getBean(“bean”);</p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：</span><span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">工厂只是把</span><span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">的定义信息载进来，用的时候才会进行实例化。</span></span></p>\n<p>&nbsp;</p>\n<p>案例：</p>\n<pre code_snippet_id=\"1581716\" snippet_file_name=\"blog_20160218_9_7120050\" code_snippet_id=\"1581716\" snippet_file_name=\"blog_20160218_9_7120050\" name=\"code\" class=\"java\">package com.pc.ioc;\nimport org.springframework.beans.factory.BeanFactory;\nimport org.springframework.beans.factory.xml.XmlBeanFactory;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\nimport org.springframework.core.io.ClassPathResource;\npublic class Test {\n	public static void main(String[] args) {\n		// TODO Auto-generated method stub\n		// 从ApplicationContext中取bean\n		// 当实例化beans.xml时，该文件中配置的bean被实例化\n		ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;com/pc/ioc/beans.xml&quot;);\n		Student student = (Student) applicationContext.getBean(&quot;student&quot;);\n		System.out.println(student.getName());\n		\n		// 使用BeanFactory获取bean，只是实例化该容器，那么容器的bean不被实例化\n		// 只有去使用getBean获取某个bean时，才会实时创建\n		BeanFactory beanFactory = new XmlBeanFactory(new ClassPathResource(&quot;com/pc/ioc/beans.xml&quot;));\n		Student student2 = (Student) beanFactory.getBean(&quot;student&quot;);\n		System.out.println(student2.getName());\n}</pre><br>\n<h3>小结</h3>\n<p>1、如果使用<span style=\"font-family:Calibri\">ApplicationContext</span><span style=\"font-family:宋体\">，则配置的</span><span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">如果是</span><span style=\"font-family:Calibri\">singl</span>eton<span style=\"font-family:宋体\">不管用不用，都被实例化</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">好处就是可以预先加载</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">缺点就是耗内存</span><span style=\"font-family:Calibri\">)</span>，如果<span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">的</span><span style=\"font-family:Calibri\">scope=</span>”prototype|request|session|&nbsp;globalSession”,<span style=\"font-family:宋体\">并不会预加载，而是交给程序去维护。</span></p>\n<p>2、如果是&nbsp;<span style=\"font-family:Calibri\">BeanFactory&nbsp;,</span><span style=\"font-family:宋体\">则获取</span><span style=\"font-family:Calibri\">beanfact</span>ory<span style=\"font-family:宋体\">时候，配置的</span><span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">不会被马上实例化，使用的时候，才被实例</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">好处节约内存</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">缺点就是速度</span><span style=\"font-family:Calibri\">)</span>。</p>\n<p>3、规定<span style=\"font-family:Calibri\">:&nbsp;</span><span style=\"font-family:宋体\">一般没有特殊要求，应当使用</span><span style=\"font-family:Calibri\">ApplicatioContext</span><span style=\"font-family:宋体\">完成</span>。</p>\n<br>\n<h2>Bean<span style=\"font-family:宋体\">的</span><span style=\"font-family:Calibri\">scope</span><span style=\"font-family:宋体\">的细节</span></h2>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160218170204985\" width=\"700\" height=\"300\" alt=\"\"></div>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p><strong>配置</strong></p>\n<pre code_snippet_id=\"1581716\" snippet_file_name=\"blog_20160218_10_882042\" code_snippet_id=\"1581716\" snippet_file_name=\"blog_20160218_10_882042\" name=\"code\" class=\"html\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \n	xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;\n	xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\n	xsi:schemaLocation=&quot;\n			http://www.springframework.org/schema/beans \n			http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\n			http://www.springframework.org/schema/aop \n			http://www.springframework.org/schema/aop/spring-aop-2.5.xsd\n			http://www.springframework.org/schema/tx \n			http://www.springframework.org/schema/tx/spring-tx-2.5.xsd&quot;&gt;\n	&lt;!-- 在容器文件中配置bean(service/dao/domain/action/数据源) --&gt;\n	&lt;!-- 配置成singleton,会预先加载，其他配置不会 --&gt;\n&lt;!-- singleton,prototype适用于所有Java应用，request,session,globalSession只适用于Web应用 --&gt;\n	&lt;!--  &lt;bean id=&quot;student&quot; class=&quot;com.pc.ioc.Student&quot; scope=&quot;singleton&quot;&gt; --&gt;\n	&lt;bean id=&quot;student&quot; class=&quot;com.pc.ioc.Student&quot; scope=&quot;prototype&quot;&gt;\n		&lt;property name=&quot;name&quot; value=&quot;zs&quot; /&gt;\n	&lt;/bean&gt;\n&lt;/beans&gt;</pre><br>\n<p><strong>测试案例</strong></p>\n<pre code_snippet_id=\"1581716\" snippet_file_name=\"blog_20160218_11_1820133\" code_snippet_id=\"1581716\" snippet_file_name=\"blog_20160218_11_1820133\" name=\"code\" class=\"java\">// 使用singleton的scope时候，两个对象是相同的\n// 使用prototype的scope时候，两个对象是不同的\n// web开发，才能使用request,session,global-session\nStudent student3 = (Student) applicationContext.getBean(&quot;student&quot;);\nStudent student4 = (Student) applicationContext.getBean(&quot;student&quot;);\nSystem.out.println(student3 + &quot; &quot; + student4);</pre><br>\n<h2>三种获取<span style=\"font-family:Calibri\">ApplicationContext</span><span style=\"font-family:宋体\">对象引用的方法</span></h2>\n<h3>1<span style=\"font-family:宋体\">、</span>ClassPathXmlApplicationContext&nbsp;-&gt;&nbsp;从类路径加载</h3>\n<h3>2<span style=\"font-family:宋体\">、</span>FileSystemXmlApplicationContext&nbsp;-&gt;&nbsp;从文件路径加载</h3>\n<h3>3<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">XmlWebApplicationContext&nbsp;-&gt;&nbsp;</span><span style=\"font-family:宋体\">从</span><span style=\"font-family:Calibri\">Web</span><span style=\"font-family:宋体\">系统中加载</span></h3>\n<p>案例：</p>\n<pre code_snippet_id=\"1581716\" snippet_file_name=\"blog_20160218_12_1994074\" code_snippet_id=\"1581716\" snippet_file_name=\"blog_20160218_12_1994074\" name=\"code\" class=\"java\">// 通过类路径加载\nApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;com/pc/ioc/beans.xml&quot;);\n\n// 通过文件路径加载\nApplicationContext applicationContext2 = new FileSystemXmlApplicationContext(&quot;XML上下文绝对路径&quot;);\nStudent student5 = (Student) applicationContext2.getBean(&quot;student&quot;);\nSystem.out.println(student5.getName());\n		\n// 通过Web路径加载\nApplicationContext applicationContext3 = new XmlWebApplicationContext();</pre>\n<p><br>\n</p>\n   \n', '2016-04-16 01:21:04', '3');
INSERT INTO `article` VALUES ('10015', '10003', 'Linux学习笔记11', '\n        <div class=\"markdown_views\"><h1 id=\"linux学习笔记11\"><strong>Linux学习笔记11</strong></h1>\n\n<p><div class=\"toc\"><div class=\"toc\">\n<ul>\n<li><a href=\"#linux学习笔记11\">Linux学习笔记11</a><ul>\n<li><a href=\"#linux系统日常管理\">linux系统日常管理</a><ul>\n<li><a href=\"#wireshark工具\">wireshark工具</a></li>\n<li><a href=\"#linux系统的任务计划\">Linux系统的任务计划</a></li>\n<li><a href=\"#rhelcentos-7x的几点新改变\">RHELCentOS 7x的几点新改变</a></li>\n<li><a href=\"#curl常用命令\">CURL常用命令</a></li>\n</ul>\n</li>\n<li><a href=\"#lamp环境搭建\">LAMP环境搭建</a><ul>\n<li><a href=\"#安装mysql\">安装mysql</a></li>\n<li><a href=\"#安装apache\">安装Apache</a><ul>\n<li><a href=\"#安装md5验证文件\">安装MD5验证文件</a></li>\n<li><a href=\"#apache安装扩展模块-modstatus\">Apache安装扩展模块 - mod_status</a></li>\n</ul>\n</li>\n<li><a href=\"#安装php\">安装php</a><ul>\n<li><a href=\"#获取php\">获取php</a></li>\n<li><a href=\"#php扩展模块安装-memcache\">PHP扩展模块安装 - memcache</a></li>\n</ul>\n</li>\n<li><a href=\"#常用的技巧\">常用的技巧</a></li>\n</ul>\n</li>\n<li><a href=\"#lnmp环境搭建\">LNMP环境搭建</a><ul>\n<li><a href=\"#安装nginx\">安装nginx</a><ul>\n<li><a href=\"#启动出现错误job-for-nginxservice-failed-because-the-control\">启动出现错误Job for nginxservice failed because the control</a></li>\n<li><a href=\"#访问一直出现502错误\">访问一直出现502错误</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#常用的mysql操作\">常用的MySQL操作</a><ul>\n<li><a href=\"#mysql备份\">MySQL备份</a></li>\n<li><a href=\"#mysql恢复\">MySQL恢复</a></li>\n</ul>\n</li>\n<li><a href=\"#nfs服务配置\">NFS服务配置</a><ul>\n<li><a href=\"#centos-7-安装配置-nfs\">CentOS 7 安装配置 NFS</a></li>\n<li><a href=\"#系统启动完成之后运行脚本\">系统启动完成之后运行脚本</a></li>\n</ul>\n</li>\n<li><a href=\"#mysql调优\">MySQL调优</a><ul>\n<li><a href=\"#mysql调整几个关键的buffer和cache和其他参数调整\">MySQL调整几个关键的buffer和cache和其他参数调整</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>\n</div>\n</p>\n\n<h2 id=\"linux系统日常管理\"><strong>linux系统日常管理</strong></h2>\n\n<blockquote>\n  <p><a href=\"http://www.apelearn.com/study_v2/chapter16.html\">http://www.apelearn.com/study_v2/chapter16.html</a></p>\n</blockquote>\n\n<h3 id=\"wireshark工具\"><strong>wireshark工具</strong></h3>\n\n<blockquote>\n  <p>安装： <code>yum install -y wireshark</code></p>\n  \n  <p>使用命令：</p>\n  \n  <blockquote>\n    <p><code>tshark -n -t a -R http.request -T fields -e \"frame.time\" -e \"ip.src\" -e \"http.host\" -e \"http.request.method\" -e \"http.request.uri\"</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"linux系统的任务计划\"><strong>Linux系统的任务计划</strong></h3>\n\n<blockquote>\n  <p><code>crontab</code></p>\n  \n  <p>PS：可以用<code>vim /etc/crontab</code>查看编辑配置信息。</p>\n  \n  <p>选项： <br>\n  &gt;</p>\n  \n  <blockquote>\n    <p><code>-u</code> ：指定某个用户，不加-u选项则为当前用户</p>\n    \n    <p><code>-e</code> ：制定计划任务；</p>\n    \n    <p><code>-l</code> ：列出计划任务；</p>\n    \n    <p><code>-r</code> ：删除计划任务。</p>\n  </blockquote>\n  \n  <p>例：制定计划任务</p>\n  \n  <blockquote>\n    <p><code>crontab -e</code>打开配置文件</p>\n    \n    <p>在弹出的输入框中输入<code>56 18 6 4 3 touch c.txt</code></p>\n    \n    <p>PS：该句的意思是：在4月6号(星期三)的18点56分创建一个<code>c.txt</code>文件，可以用<code>*</code>代替时间字段，代表任意一个，比如第一个字段为<code>*</code>,则代表任意(每)一分钟。</p>\n    \n    <p>PS：<code>* * * * * user-name command</code>从左到右，依次为：分，时，日，月，周，用户，命令行。用户是可以省略的，省略的话，代表当前用户。</p>\n  </blockquote>\n  \n  <p>PS：<code>crontab -e</code> 实际上是打开了 <code>/var/spool/cron/username</code> （如果是root则打开的是<code>/var/spool/cron/root</code>）这个文件。使用的是vim编辑器，所以要保存的话则在命令模式下输入:wq即可。但是，千万不要直接去编辑那个文件，因为可能会出错，所以一定要使用 <code>crontab -e</code> 来编辑。查看已经设定的任务计划使用 <code>crontab  -l</code> 命令，删除计划任务用<code>crontab -r</code>,也可以用<code>crontab -e -u 用户名</code>来编辑指定用户的计划任务。当然查看和删除也能指定用户的。</p>\n  \n  <p>设置好了所有的计划任务后需要查看一下crond服务是否启动: <code>service crond status</code>，如果是关闭状态，则需要启动：<code>service crond start</code>。</p>\n  \n  <p>案例：</p>\n  \n  <blockquote>\n    <p>问题：</p>\n    \n    <blockquote>\n      <p><code>每天凌晨1点20分清除/var/log/slow.log这个文件 <br>\n          每周日3点执行 “/bin/sh /usr/local/sbin/backup.sh” <br>\n          每月14号4点10分执行 “/bin/sh /usr/local/sbin/backup_month.sh” <br>\n          每隔8小时执行 “ntpdate time.windows.com” <br>\n          每天的1点，12点，18点执行 “/bin/sh /usr/local/sbin/test.sh” <br>\n          每天的9点到18点执行 “/bin/sh /usr/local/sbin/test2.sh”</code></p>\n    </blockquote>\n    \n    <p>答案：</p>\n    \n    <blockquote>\n      <p><code>20 1 * * * echo \"\" &gt; /var/log/slow.log <br>\n          0 3 * * 0 /bin/sh /usr/local/sbin/backup.sh <br>\n          10 4 14 * * /bin/sh /usr/local/sbin/backup_month.sh <br>\n          0 */8 * * * nepdate time.windows.com <br>\n          0 1,12,18 * * * /bin/sh /usr/local/sbin/test.sh <br>\n          0 9-18 * * * /bin/sh /usr/local/sbin/test2.sh</code></p>\n    </blockquote>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"rhelcentos-7x的几点新改变\"><strong>RHEL/CentOS 7.x的几点新改变</strong></h3>\n\n<blockquote>\n  <p><a href=\"http://www.ha97.com/5657.html\">http://www.ha97.com/5657.html</a></p>\n</blockquote>\n\n\n\n<h3 id=\"curl常用命令\"><strong>CURL常用命令</strong></h3>\n\n<blockquote>\n  <p><a href=\"http://www.cnblogs.com/gbyukg/p/3326825.html\">http://www.cnblogs.com/gbyukg/p/3326825.html</a></p>\n</blockquote>\n\n<hr>\n\n<hr>\n\n<h2 id=\"lamp环境搭建\"><strong>LAMP环境搭建</strong></h2>\n\n<blockquote>\n  <p><a href=\"http://www.apelearn.com/study_v2/chapter17.html#lamp\">http://www.apelearn.com/study_v2/chapter17.html#lamp</a></p>\n</blockquote>\n\n<h3 id=\"安装mysql\"><strong>安装mysql</strong></h3>\n\n<blockquote>\n  <p><code>wget http://cdn.mysql.com/archives/mysql-5.1/mysql-5.1.30-linux-x86_64-icc-glibc23.tar.gz</code></p>\n  \n  <p>Linux下安装mysql时报错libstdc++.so.5: cannot open shared object file: No such file or directory</p>\n  \n  <blockquote>\n    <p>使用<code>yum install -y compat-libstdc++-33</code>安装支持。</p>\n  </blockquote>\n</blockquote>\n\n<h3 id=\"安装apache\"><strong>安装Apache</strong></h3>\n\n\n\n<h4 id=\"安装md5验证文件\"><strong>安装MD5验证文件</strong></h4>\n\n<blockquote>\n  <p><code>yum install -y isomd5sum</code> </p>\n</blockquote>\n\n\n\n<h4 id=\"apache安装扩展模块-modstatus\"><strong>Apache安装扩展模块 - mod_status</strong></h4>\n\n<blockquote>\n  <p><code>/usr/local/apache2/bin/apachectl -l</code> 有<code>mod_so.c</code></p>\n  \n  <p>进入模块目录：</p>\n  \n  <p><code>cd /usr/local/src/httpd-2.2.24/modules/generators/</code></p>\n  \n  <p>安装模块：</p>\n  \n  <p><code>/usr/local/apache2/bin/apxs -i -a -c -n mod_status mod_status.c</code></p>\n  \n  <p><code>vim /usr/local/apache2/conf/httpd.conf</code></p>\n</blockquote>\n\n<h3 id=\"安装php\"><strong>安装php</strong></h3>\n\n\n\n<h4 id=\"获取php\"><strong>获取php</strong></h4>\n\n<blockquote>\n  <p>进入目录<code>cd /usr/local/src</code></p>\n  \n  <p>下载文件<code>wget http://cn2.php.net/distributions/php-5.5.34.tar.gz</code></p>\n</blockquote>\n\n\n\n<h4 id=\"php扩展模块安装-memcache\"><strong>PHP扩展模块安装 - memcache</strong></h4>\n\n<blockquote>\n  <p><code>wget http://www.lishiming.net/data/attachment/forum/memcache-2.2.3.tgz</code></p>\n  \n  <p><code>tar zxvf memcache-2.2.3.tgz</code></p>\n  \n  <p><code>cd memcache-2.2.3</code></p>\n  \n  <p><code>yum install -y autoconf</code></p>\n  \n  <p><code>/usr/local/php/bin/phpize</code></p>\n  \n  <p><code>./configure --with-php-config=/usr/local/php/bin/php-config</code></p>\n  \n  <p><code>make &amp;&amp; make install</code></p>\n  \n  <p><code>vim /usr/local/php/etc/php.ini</code></p>\n  \n  <p>PS：这个模块安装，在php7中会提示<code>致命错误：ext/standard/php_smart_str.h：没有那个文件或目录</code>,这应该是版本兼容性问题，如果要安装建议使用老版本的PHP。</p>\n</blockquote>\n\n\n\n<h3 id=\"常用的技巧\"><strong>常用的技巧</strong></h3>\n\n<blockquote>\n  <p>查看apache编译参数 <code>cat /usr/local/apache2/build/config.nice</code></p>\n  \n  <p>查看apache加载的模块 <code>/usr/local/apache2/bin/apachectl -M</code></p>\n  \n  <p>测试apache配置文件是否正确  <code>/usr/local/apache2/bin/apachectl -t</code></p>\n  \n  <p>更改配置文件后，重新加载<code>/usr/local/apache2/bin/apachectl graceful</code></p>\n  \n  <p>查看mysql编译参数  <code>cat /usr/local/mysql/bin/mysqlbug|grep configure</code></p>\n  \n  <p>查看php编译参数 <code>/usr/local/php/bin/php -i |head</code></p>\n  \n  <p>查看php加载模块 <code>/usr/local/php/bin/php -m</code></p>\n  \n  <p>查看php.ini在哪里  <code>/usr/local/php/bin/php -i |grep \'Configuration File\'</code></p>\n  \n  <p>查看extension_dir路径 <code>/usr/local/php/bin/php -i |grep \'extension_dir\'</code></p>\n</blockquote>\n\n<hr>\n\n<hr>\n\n<h2 id=\"lnmp环境搭建\"><strong>LNMP环境搭建</strong></h2>\n\n<blockquote>\n  <p><a href=\"http://www.apelearn.com/study_v2/chapter18.html#lnmp\">http://www.apelearn.com/study_v2/chapter18.html#lnmp</a></p>\n</blockquote>\n\n\n\n<h3 id=\"安装nginx\"><strong>安装nginx</strong></h3>\n\n\n\n<h4 id=\"启动出现错误job-for-nginxservice-failed-because-the-control\"><strong>启动出现错误<code>Job for nginx.service failed because the control</code></strong></h4>\n\n<blockquote>\n  <p>原因是Apache和nginx监听同一个端口有冲突。可以选择停掉Apache或者是更改nginx监听端口。</p>\n  \n  <blockquote>\n    <p><code>[root@switch nginx-1.4.4]# /usr/local/apache2/bin/apachectl stop <br>\n        [root@switch nginx-1.4.4]# netstat -lnp |grep httpd <br>\n        [root@switch nginx-1.4.4]# /etc/init.d/nginx start <br>\n        Starting nginx (via systemctl):                            [  确定  ] <br>\n        [root@switch nginx-1.4.4]#</code></p>\n    \n    <p>PS：这里提供的是第一种方式。</p>\n  </blockquote>\n</blockquote>\n\n\n\n<h4 id=\"访问一直出现502错误\"><strong>访问一直出现502错误</strong></h4>\n\n<blockquote>\n  <p>PS：这个问题，找了许久没解决，以后再说。</p>\n  \n  <p>PS：后面查找错误日志<code>vim /usr/local/nginx/logs/nginx_error.log</code>找到如下错误</p>\n  \n  <blockquote>\n    <p><code>2016/04/08 19:27:18 [crit] 887#0: *1 connect() to unix:/tmp/php-fcgi.sock failed (13: Permission denied) while connecting to upstream, client: 127.0.0.1, server: localhost, request: \"GET /2.php HTTP/1.1\", upstream: \"fastcgi://unix:/tmp/php-fcgi.sock:\", host: \"localhost\"</code></p>\n    \n    <p>核心也就<code>connect() to unix:/tmp/php-fcgi.sock failed (13: Permission denied)</code>这段。</p>\n    \n    <p>然后查找发现是<code>/tmp/php-fcgi.sock</code>这个文件权限有问题，附上修改记录：</p>\n    \n    <blockquote>\n      <p><code>[root@localhost Desktop]# curl localhost/2.php <br>\n          &lt;html&gt; <br>\n          &lt;head&gt;&lt;title&gt;502 Bad Gateway&lt;/title&gt;&lt;/head&gt; <br>\n          &lt;body bgcolor=\"white\"&gt; <br>\n          &lt;center&gt;&lt;h1&gt;502 Bad Gateway&lt;/h1&gt;&lt;/center&gt; <br>\n          &lt;hr&gt;&lt;center&gt;nginx/1.4.4&lt;/center&gt; <br>\n          &lt;/body&gt; <br>\n          &lt;/html&gt; <br>\n          [root@localhost Desktop]# ls -lh /tmp/php-fcgi.sock  <br>\n          srw-rw---- 1 root root 0 4月   8 19:26 /tmp/php-fcgi.sock <br>\n          [root@localhost Desktop]# chmod 777 /tmp/php-fcgi.sock  <br>\n          [root@localhost Desktop]# ls -lh /tmp/php-fcgi.sock  <br>\n          srwxrwxrwx 1 root root 0 4月   8 19:26 /tmp/php-fcgi.sock <br>\n          [root@localhost Desktop]# curl localhost/2.php <br>\n          ok[root@localhost Desktop]#</code></p>\n    </blockquote>\n  </blockquote>\n</blockquote>\n\n<hr>\n\n<hr>\n\n\n\n<h2 id=\"常用的mysql操作\"><strong>常用的MySQL操作</strong></h2>\n\n<blockquote>\n  <p><a href=\"http://www.apelearn.com/study_v2/chapter19.html#mysql\">http://www.apelearn.com/study_v2/chapter19.html#mysql</a></p>\n</blockquote>\n\n\n\n<h3 id=\"mysql备份\"><strong>MySQL备份</strong></h3>\n\n<blockquote>\n  <p><code>mysqldump -u root -p\'密码\' -h \'主机地址\' -P\'端口号\' --default-character=字符集 数据库名 &gt; /tmp/mysql.sql</code></p>\n  \n  <p>PS：远程备份需要<code>-h``-P</code>选项，可以指定默认字符集。</p>\n</blockquote>\n\n\n\n<h3 id=\"mysql恢复\"><strong>MySQL恢复</strong></h3>\n\n<blockquote>\n  <p><code>mysql -u root -p\'密码\' --default-character=字符集 数据库名 &lt;/tmp/mysql.sql</code></p>\n</blockquote>\n\n<hr>\n\n<hr>\n\n<h2 id=\"nfs服务配置\"><strong>NFS服务配置</strong></h2>\n\n<blockquote>\n  <p><a href=\"http://www.apelearn.com/study_v2/chapter20.html#nfs\">http://www.apelearn.com/study_v2/chapter20.html#nfs</a></p>\n</blockquote>\n\n\n\n<h3 id=\"centos-7-安装配置-nfs\"><strong>CentOS 7 安装配置 NFS</strong></h3>\n\n<blockquote>\n  <p><a href=\"http://www.linuxidc.com/Linux/2015-05/117378.htm\">http://www.linuxidc.com/Linux/2015-05/117378.htm</a></p>\n</blockquote>\n\n\n\n<h3 id=\"系统启动完成之后运行脚本\"><strong>系统启动完成之后运行脚本</strong></h3>\n\n<blockquote>\n  <p><code>vim /etc/rc.local</code></p>\n  \n  <p>PS：可以将一些需要随开机就运行的命令添加到这个文件中。</p>\n</blockquote>\n\n\n\n<h2 id=\"mysql调优\"><strong>MySQL调优</strong></h2>\n\n<blockquote>\n  <p>架构层：做从库，实现读写分离</p>\n  \n  <p>系统层次：增加内存；给磁盘做raid0或者raid5以增加磁盘的读写速度；可以重新挂载磁盘，并加上noatime参数，这样可以减少磁盘的i/o;</p>\n  \n  <dl>\n<dt>MySQL本身调优：</dt>\n<dd>(1) 如果未配置主从同步，可以把log-bin功能关闭，减少磁盘i/o</dd>\n\n<dd>(2) 在my.cnf中加上skip-name-resolve,这样可以避免由于解析主机名延迟造成mysql执行慢</dd>\n\n<dd>(3) 调整几个关键的buffer和cache。调整的依据，主要根据数据库的状态来调试。</dd>\n</dl>\n  \n  <p>应用层次：查看慢查询日志，根据慢查询日志优化程序中的SQL语句，比如增加索引</p>\n</blockquote>\n\n\n\n<h3 id=\"mysql调整几个关键的buffer和cache和其他参数调整\"><strong>MySQL调整几个关键的buffer和cache和其他参数调整</strong></h3>\n\n<blockquote>\n  <dl>\n<dt>内容：</dt>\n<dd>1) key_buffer_size  首先可以根据系统的内存大小设定它，大概的一个参考值：1G以下内存设定128M；2G/256M; 4G/384M;8G/1024M；16G/2048M.这个值可以通过检查状态值Key_read_requests和 Key_reads,可以知道key_buffer_size设置是否合理。比例key_reads / key_read_requests应该尽可能的低，至少是1:100，1:1000更好(上述状态值可以使用SHOW STATUS LIKE ‘key_read%’获得)。注意：该参数值设置的过大反而会是服务器整体效率降低!</dd>\n\n<dd>2) table_open_cache 打开一个表的时候，会临时把表里面的数据放到这部分内存中，一般设置成1024就够了，它的大小我们可以通过这样的方法来衡量： 如果你发现 open_tables等于table_cache，并且opened_tables在不断增长，那么你就需要增加table_cache的值了(上述状态值可以使用SHOW STATUS LIKE ‘Open%tables’获得)。注意，不能盲目地把table_cache设置成很大的值。如果设置得太高，可能会造成文件描述符不足，从而造成性能不稳定或者连接失败。</dd>\n\n<dd>3) sort_buffer_size 查询排序时所能使用的缓冲区大小,该参数对应的分配内存是每连接独占!如果有100个连接，那么实际分配的总共排序缓冲区大小为100 × 4 = 400MB。所以，对于内存在4GB左右的服务器推荐设置为4-8M。</dd>\n\n<dd>4) read_buffer_size 顺序读取查询操作所能使用的缓冲区大小。和sort_buffer_size一样，该参数对应的分配内存也是每连接独享!</dd>\n\n<dd>5) join_buffer_size 联合查询操作所能使用的缓冲区大小，和sort_buffer_size一样，该参数对应的分配内存也是每连接独享!</dd>\n\n<dd>6) myisam_sort_buffer_size 这个缓冲区主要用于修复表过程中排序索引使用的内存或者是建立索引时排序索引用到的内存大小，一般4G内存给64M即可。</dd>\n\n<dd>7) query_cache_size MySQL查询操作缓冲区的大小，通过以下做法调整：SHOW STATUS LIKE ‘Qcache%’如果Qcache_lowmem_prunes该参数记录有多少条查询因为内存不足而被移除出查询缓存。通过这个值，用户可以适当的调整缓存大小。如果该值非常大，则表明经常出现缓冲不够的情况，需要增加缓存大小;Qcache_free_memory:查询缓存的内存大小，通过这个参数可以很清晰的知道当前系统的查询内存是否够用，是多了，还是不够用，我们可以根据实际情况做出调整。一般情况下4G内存设置64M足够了。</dd>\n\n<dd>8) thread_cache_size 表示可以重新利用保存在缓存中线程的数，参考如下值：1G  —&gt; 8 2G  —&gt; 16 3G  —&gt; 32  &gt;4G  —&gt; 64</dd>\n\n<dd>9) thread_concurrency 这个值设置为cpu核数的2倍即可</dd>\n\n<dd>10) wait_timeout 表示空闲的连接超时时间，默认是28800s，这个参数是和interactive_timeout一起使用的，也就是说要想让该参数生效，必须同时设置interactive_timeout，建议他们两个都设置为10</dd>\n\n<dd>11) max_connect_errors 是一个MySQL中与安全有关的计数器值，它负责阻止过多尝试失败的客户端以防止暴力破解密码的情况。与性能并无太大关系。为了避免一些错误我们一般都设置比较大，比如说10000</dd>\n\n<dd>12) max_connections 最大的连接数，根据业务请求量适当调整，设置500足够</dd>\n\n<dd>13) max_user_connections 是指同一个账号能够同时连接到mysql服务的最大连接数。设置为0表示不限制。通常我们设置为100足够</dd>\n</dl>\n</blockquote>\n\n<p><strong><font size=\"6\">参考《跟阿铭学Linux》</font></strong></p>\n\n<hr></div>\n        <script type=\"text/javascript\">\n            $(function () {\n                $(\'pre.prettyprint code\').each(function () {\n                    var lines = $(this).text().split(\'\\n\').length;\n                    var $numbering = $(\'<ul/>\').addClass(\'pre-numbering\').hide();\n                    $(this).addClass(\'has-numbering\').parent().append($numbering);\n                    for (i = 1; i <= lines; i++) {\n                        $numbering.append($(\'<li/>\').text(i));\n                    };\n                    $numbering.fadeIn(1700);\n                });\n            });\n        </script>\n   \n', '2016-04-16 01:21:05', '0');
INSERT INTO `article` VALUES ('10016', '10003', 'Linux学习笔记1', '\n        <div class=\"markdown_views\"><h1 id=\"linux学习笔记1\"><strong>Linux学习笔记1</strong></h1>\n\n<p><div class=\"toc\"><div class=\"toc\">\n<ul>\n<li><a href=\"#linux学习笔记1\">Linux学习笔记1</a><ul>\n<li><ul>\n<li><a href=\"#配置网卡\">配置网卡</a></li>\n<li><a href=\"#配置详情\">配置详情</a></li>\n<li><a href=\"#重启服务\">重启服务</a></li>\n<li><a href=\"#配置dns\">配置DNS</a></li>\n<li><a href=\"#配置详情-1\">配置详情</a></li>\n<li><a href=\"#安装网络工具组件\">安装网络工具组件</a></li>\n<li><a href=\"#centos-7中没有ifconfig命令而且不能发现eth0\">CentOS 7中没有ifconfig命令而且不能发现eth0</a></li>\n<li><a href=\"#centos7在virtualbox中装好后的网络连接问题\">centOS7在VirtualBox中装好后的网络连接问题</a></li>\n<li><a href=\"#安装vim\">安装VIM</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>\n</div>\n</p>\n\n\n\n<h3 id=\"配置网卡\"><strong>配置网卡</strong></h3>\n\n<blockquote>\n  <p>vi /etc/sysconfig/network-scripts/ifcfg-<em>*</em></p>\n</blockquote>\n\n\n\n<h3 id=\"配置详情\"><strong>配置详情</strong></h3>\n\n<blockquote>\n  <p>BOOTPROTO=static</p>\n  \n  <p>IPADDR=IP地址</p>\n  \n  <p>NETMASK=255.255.255.0</p>\n  \n  <p>GATEWAY=网关</p>\n</blockquote>\n\n\n\n<h3 id=\"重启服务\"><strong>重启服务</strong></h3>\n\n<blockquote>\n  <p>service network restart</p>\n</blockquote>\n\n\n\n<h3 id=\"配置dns\"><strong>配置DNS</strong></h3>\n\n<blockquote>\n  <p>vi /etc/resolv.conf</p>\n</blockquote>\n\n\n\n<h3 id=\"配置详情-1\"><strong>配置详情</strong></h3>\n\n<blockquote>\n  <p>nameserver DNS服务器地址</p>\n  \n  <blockquote>\n    <p>DNS服务器地址常用的有：114.114.114.114,8.8.8.8</p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"安装网络工具组件\"><strong>安装网络工具组件</strong></h3>\n\n<blockquote>\n  <p>yum install -y net-tools*</p>\n</blockquote>\n\n\n\n<h3 id=\"centos-7中没有ifconfig命令而且不能发现eth0\"><strong>CentOS 7中没有ifconfig命令，而且不能发现eth0</strong></h3>\n\n<blockquote>\n  <p><a href=\"http://blog.163.com/aaron_yuan/blog/static/16519523220148215950996/\">http://blog.163.com/aaron_yuan/blog/static/16519523220148215950996/</a></p>\n</blockquote>\n\n\n\n<h3 id=\"centos7在virtualbox中装好后的网络连接问题\"><strong>centOS7在VirtualBox中装好后的网络连接问题</strong></h3>\n\n<blockquote>\n  <p><a href=\"http://jingyan.baidu.com/article/456c463b4a98460a5931444c.html\">http://jingyan.baidu.com/article/456c463b4a98460a5931444c.html</a></p>\n  \n  <blockquote>\n    <p>PS：这个也能解决putty连接的问题。</p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"安装vim\"><strong>安装VIM</strong></h3>\n\n<blockquote>\n  <p>yum install -y vim-enhanced</p>\n</blockquote>\n\n<p><strong><font size=\"6\">参考《跟阿铭学Linux》</font></strong></p>\n\n<hr></div>\n        <script type=\"text/javascript\">\n            $(function () {\n                $(\'pre.prettyprint code\').each(function () {\n                    var lines = $(this).text().split(\'\\n\').length;\n                    var $numbering = $(\'<ul/>\').addClass(\'pre-numbering\').hide();\n                    $(this).addClass(\'has-numbering\').parent().append($numbering);\n                    for (i = 1; i <= lines; i++) {\n                        $numbering.append($(\'<li/>\').text(i));\n                    };\n                    $numbering.fadeIn(1700);\n                });\n            });\n        </script>\n   \n', '2016-04-16 01:21:05', '0');
INSERT INTO `article` VALUES ('10017', '10003', 'Hibernate缓存和加强', '\n\n<h1 style=\"text-align:center\"><span style=\"font-size:18px\">Hibernate<span style=\"font-family:宋体\">缓存和加强</span></span></h1>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>懒加载</h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;懒加载<span style=\"font-family:Calibri\">(Load&nbsp;On&nbsp;Demand)</span><span style=\"font-family:宋体\">是一种独特而又强大的数据获取方法&nbsp;，是指程序</span><span style=\"color:rgb(255,0,0)\">推迟访问数据库</span>，这样做可以保证有时候不必要的访问数据库，因为访问一次数据库是比较耗时的。当查询一个对象的时候，在默认情况下，返回的只是该对象的普通属性，当用户去使用对象属性时，才会向数据库发出再一次查询。</p>\n<p>&nbsp;</p>\n<h3>懒加载几种情况</h3>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;Domain<span style=\"font-family:宋体\">对象是非</span><span style=\"font-family:Calibri\">final</span><span style=\"font-family:宋体\">的，才能实现懒加载。解决懒加载的方法如下：</span></p>\n<h4>1<span style=\"font-family:宋体\">、明确初始化</span></h4>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;在<span style=\"font-family:Calibri\">session</span><span style=\"font-family:宋体\">还没有关闭时，访问一次&nbsp;</span><span style=\"font-family:Calibri\">xxx.getXxx()</span><span style=\"font-family:宋体\">，强制访问数据库。或者&nbsp;</span><span style=\"font-family:Calibri\">Hibernate.initialize(xxx)</span>。</p>\n<p>&nbsp;</p>\n<h4>2<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">openSessionView</span></h4>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;Web<span style=\"font-family:宋体\">开发中，在请求时的过滤器里打开</span><span style=\"font-family:Calibri\">Session</span><span style=\"font-family:宋体\">，在返回之前再次经过过滤器关闭</span><span style=\"font-family:Calibri\">Session</span><span style=\"font-family:宋体\">。这样就将</span><span style=\"font-family:Calibri\">Session</span><span style=\"font-family:宋体\">的作用域扩展到了一次请求响应。</span></p>\n<p>&nbsp;</p>\n<h5>openSessionView<span style=\"font-family:宋体\">原理图</span></h5>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160215183709301\" alt=\"\"></div>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p>&nbsp;</p>\n<h4>3<span style=\"font-family:宋体\">、在</span><span style=\"font-family:Calibri\">SSH</span><span style=\"font-family:宋体\">中，可以实现在</span><span style=\"font-family:Calibri\">Service</span><span style=\"font-family:宋体\">层，标注方式解决懒加载</span></h4>\n<h4>4<span style=\"font-family:宋体\">、在对象映射文件中配置，</span><span style=\"font-family:Calibri\">lazy=&quot;false&quot;</span></h4>\n<br>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>缓存</h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;缓存的作用主要用来提高性能，可以简单的理解成一个<span style=\"font-family:Calibri\">Map</span><span style=\"font-family:宋体\">；使用缓存涉及到三个操作：把数据放入缓存、从缓存中获取数据、删除缓存中的无效数据。</span></p>\n<p>&nbsp;</p>\n<h3>缓存原理示意图</h3>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160215183830020\" alt=\"\"></div>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h3>一级缓存<span style=\"font-family:Calibri\">(Session</span><span style=\"font-family:宋体\">级共享</span><span style=\"font-family:Calibri\">)</span></h3>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;save,update,saveOrUpdate,load,get,list,iterate,lock<span style=\"font-family:宋体\">这些方法都会将对象放在一级缓存中，一级缓存不能控制缓存的数量，所以要注意大批量操作数据时可能造成内存溢出；可以用</span><span style=\"font-family:Calibri\">evict,clear</span><span style=\"font-family:宋体\">方法清除缓存中的内容。&nbsp;</span></p>\n<p>&nbsp;</p>\n<h4>一级缓存的细节</h4>\n<h5>1<span style=\"font-family:宋体\">、</span>什么操作会向一级缓存放入数据</h5>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;save,update,saveOrUpdate,load,get,list,iterate,lock</p>\n<p>save&nbsp;<span style=\"font-family:宋体\">案例</span><span style=\"font-family:Calibri\">:</span></p>\n<pre code_snippet_id=\"1579134\" snippet_file_name=\"blog_20160215_1_3454393\" name=\"code\" class=\"java\">//添加一个学生\nStudent student=new Student();\nstudent.setName(&quot;小东&quot;);\ns.save(student);//放入一级缓存\n//查询\nStudent stu2=(Student) s.get(Student.class, student.getId()); //select\nSystem.out.println(&quot;你刚刚加入的学生名字是&quot;+stu2.getName());</pre><br>\n<h5>2<span style=\"font-family:宋体\">、</span>什么操作会从一级缓存取数据</h5>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;get&nbsp;/&nbsp;load&nbsp;/&nbsp;list，get&nbsp;/&nbsp;load&nbsp;<span style=\"font-family:宋体\">会首先从一级缓存中取，如没有</span><span style=\"font-family:Calibri\">.</span><span style=\"font-family:宋体\">再有不同的操作</span><span style=\"font-family:Calibri\">[get&nbsp;</span><span style=\"font-family:宋体\">会立即向数据库发请求，而</span><span style=\"font-family:Calibri\">load&nbsp;</span><span style=\"font-family:宋体\">会返回一个代理对象，直到用户真的去使用数据，才会向数据库发请求</span><span style=\"font-family:Calibri\">]</span></p>\n<p>&nbsp;</p>\n<p>案例<span style=\"font-family:Calibri\">:</span></p>\n<pre code_snippet_id=\"1579134\" snippet_file_name=\"blog_20160215_2_7248621\" name=\"code\" class=\"java\">//查询45号学生\nStudent stu=(Student) s.get(Student.class, 45);\nSystem.out.println(&quot;|||||||||||||||||||&quot;);\nString hql=&quot;from Student where id=45&quot;;\nStudent stu2=(Student) s.createQuery(hql).uniqueResult();\nSystem.out.println(stu2.getName());</pre>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：</span></span><span style=\"color:rgb(255,0,0)\">query.list()</span><span style=\"color:rgb(255,0,0)\">和</span><span style=\"color:rgb(255,0,0)\">query.uniueResu</span><span style=\"color:rgb(255,0,0)\">l</span><span style=\"color:rgb(255,0,0)\">t()&nbsp;<span style=\"font-family:宋体\">不会从一级缓取数据</span><span style=\"font-family:Calibri\">!&nbsp;</span><span style=\"font-family:宋体\">但是</span><span style=\"font-family:Calibri\">query.lis</span></span><span style=\"color:rgb(255,0,0)\">t()</span><span style=\"color:rgb(255,0,0)\">或者<span style=\"font-family:Calibri\">query.uniqueResu</span></span><span style=\"color:rgb(255,0,0)\">lt</span><span style=\"color:rgb(255,0,0)\">()&nbsp;<span style=\"font-family:宋体\">会向一级缓存放数据的</span></span><span style=\"color:rgb(255,0,0)\">。</span></p>\n<p>&nbsp;</p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：</span></span><span style=\"color:rgb(255,0,0)\">一级缓存不需要配置，就可以使用<span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">它本身没有保护机制，所以程序员要考虑这个问题</span></span><span style=\"color:rgb(255,0,0)\">，</span><span style=\"color:rgb(255,0,0)\">可以</span><span style=\"color:rgb(255,0,0)\">用</span><span style=\"color:rgb(255,0,0)\">evict<span style=\"font-family:宋体\">或者</span><span style=\"font-family:Calibri\">clear</span><span style=\"font-family:宋体\">来清除</span><span style=\"font-family:Calibri\">session</span><span style=\"font-family:宋体\">缓存中对象</span><span style=\"font-family:Calibri\">.&nbsp;evict</span><span style=\"font-family:宋体\">是清除一个对象，</span><span style=\"font-family:Calibri\">clea</span></span><span style=\"color:rgb(255,0,0)\">r</span><span style=\"color:rgb(255,0,0)\">是清除所有的<span style=\"font-family:Calibri\">se</span></span><span style=\"color:rgb(255,0,0)\">s</span><span style=\"color:rgb(255,0,0)\">sion<span style=\"font-family:宋体\">缓存对象</span></span><span style=\"color:rgb(255,0,0)\">。</span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;</span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：</span></span><span style=\"color:rgb(255,0,0)\">session<span style=\"font-family:宋体\">级缓存中对象的生命周期</span><span style=\"font-family:Calibri\">,&nbsp;</span><span style=\"font-family:宋体\">当</span><span style=\"font-family:Calibri\">session</span><span style=\"font-family:宋体\">关闭后，就自动销毁</span></span><span style=\"color:rgb(255,0,0)\">。</span></p>\n<br>\n<h4>扩展：用<span style=\"font-family:Calibri\">HashMap</span><span style=\"font-family:宋体\">来模拟一个</span><span style=\"font-family:Calibri\">Session</span><span style=\"font-family:宋体\">缓存，加深对缓存的深入</span></h4>\n<pre code_snippet_id=\"1579134\" snippet_file_name=\"blog_20160215_3_1567020\" name=\"code\" class=\"java\">package com.pc.view;\nimport java.util.ArrayList;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\npublic class MyCache {\n	//使用map来模拟缓存\n	static Map&lt;Integer,Student&gt; maps=new HashMap&lt;Integer,Student&gt;();\n\n	public static void main(String[] args) {\n		// TODO Auto-generated method stub\n		getStudent(1);\n		getStudent(1);\n		getStudent(1);\n		getStudent(1);\n		getStudent(3);\n		getStudent(3);\n	}\n	\n	public static Student getStudent(Integer id){  //s.get()\n		//先到缓存去\n		if(maps.containsKey(id)){\n			//在缓存有\n			System.out.println(&quot;从缓存取出&quot;);\n			return maps.get(id);\n		}else{\n			System.out.println(&quot;从数据库中取&quot;);\n			//到数据库取\n			Student stu=MyDB.getStudentFromDB(id);\n			//放入缓存\n			maps.put(id, stu);\n			return stu;\n		}\n	}\n}\n\n// 我的数据库\nclass MyDB{\n	static List&lt;Student&gt; lists=new  ArrayList&lt;Student&gt;();\n	//初始化数据库,假设有三个学生\n	static{\n		Student s1=new Student();\n		s1.setId(1);\n		s1.setName(&quot;aaa&quot;);\n		Student s2=new Student();\n		s2.setId(2);\n		s2.setName(&quot;bbb&quot;);\n		Student s3=new Student();\n		s3.setId(3);\n		s3.setName(&quot;ccc&quot;);\n		lists.add(s1);\n		lists.add(s2);\n		lists.add(s3);\n	}\n	public static Student getStudentFromDB(Integer id){\n		for(Student s: lists){\n			if(s.getId().equals(id)){\n				return s;\n			}\n		}\n		return null; // 在数据库中没有.\n	}\n}\n\nclass Student{\n	private Integer id;\n	private String name;\n	public Integer getId() {\n		return id;\n	}\n	public void setId(Integer id) {\n		this.id = id;\n	}\n	public String getName() {\n		return name;\n	}\n	public void setName(String name) {\n		this.name = name;\n	}\n}</pre><br>\n<h3>二级缓存<span style=\"font-family:Calibri\">(SessionFactory</span><span style=\"font-family:宋体\">级共享</span><span style=\"font-family:Calibri\">)</span></h3>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;因为一级缓存有限<span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">生命周期短</span><span style=\"font-family:Calibri\">)</span>，所以我们需要二级缓存<span style=\"font-family:Calibri\">(SessionFactory</span><span style=\"font-family:宋体\">缓存</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">来弥补这个问题</span>。</p>\n<p>&nbsp;</p>\n<h4>二级缓存的细节</h4>\n<p>1、二级缓存需要配置</p>\n<p>2、二级缓存是交给第三方去处理<span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">常见的</span><span style=\"font-family:Calibri\">Hashtable&nbsp;,&nbsp;OSCache&nbsp;,&nbsp;EHCache</span></p>\n<p>3<span style=\"font-family:宋体\">、</span>二级缓存的对象可能放在内存，也可能放在磁盘</p>\n<p>4<span style=\"font-family:宋体\">、二级缓存的原理，在上图已经给出</span></p>\n<p>&nbsp;</p>\n<p>\n<h4>使用<span style=\"font-family:Calibri\">OsCache</span><span style=\"font-family:宋体\">来演示二级缓存的使用</span></h4>\n<h5>1<span style=\"font-family:宋体\">、</span>配置二级缓存</h5>\n<pre code_snippet_id=\"1579134\" snippet_file_name=\"blog_20160215_4_8742337\" name=\"code\" class=\"java\">    &lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\n	&lt;!-- 启动二级缓存 --&gt;\n	&lt;property name=&quot;cache.use_second_level_cache&quot;&gt;true&lt;/property&gt;\n	&lt;!-- 指定使用哪种二级缓存 --&gt;\n	&lt;property name=&quot;cache.provider_class&quot;&gt;org.hibernate.cache.OSCacheProvider&lt;/property&gt;\n    &lt;!-- 使用统计工具 --&gt;\n    &lt;property name=&quot;hibernate.generate_statistics&quot;&gt;true&lt;/property&gt;\n	&lt;!-- 指定哪个domain启用二级缓存 \n	    特别说明二级缓存策略:\n	    1. read-only 只读\n	    2. read-write 读写\n	    3. nonstrict-read-write 不严格读写\n	    4. transcational 事务\n	--&gt;\n	&lt;class-cache class=&quot;com.hsp.domain.Student&quot; usage=&quot;read-write&quot;/&gt;</pre>\n<h5>2<span style=\"font-family:宋体\">、</span>拷贝一个<span style=\"font-family:Calibri\">oscache.propertis</span><span style=\"font-family:宋体\">配置文件</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">可以使用参考文档</span>，使用相应<span style=\"font-family:Calibri\">Jar</span><span style=\"font-family:宋体\">包。</span></h5>\n<h5>3、测试二级缓存</h5>\n<pre code_snippet_id=\"1579134\" snippet_file_name=\"blog_20160215_5_1980941\" name=\"code\" class=\"java\">//通过获取一个session,让hibernate框架运行(config-&gt;加载hibernate.cfg.xml)\nSession s=null;\nTransaction tx=null;\n	try {\n			s=HibernateUtil.openSession();\n			tx=s.beginTransaction();\n			//查询45号学生\n			Student stu1=(Student) s.get(Student.class, 45);//45-&gt;一级缓存		\n			System.out.println(stu1.getName());\n			tx.commit();	\n		} catch (Exception e) {\n			e.printStackTrace();\n			if(tx!=null){\n				tx.rollback();\n			}\n		}finally{\n			if(s!=null &amp;&amp; s.isOpen()){\n				s.close();\n			}\n		}\n		System.out.println(&quot;*********************************&quot;);\n		try {\n			s=HibernateUtil.openSession();\n			tx=s.beginTransaction();\n			//查询45号学生\n			Student stu1=(Student) s.get(Student.class, 45);	\n			System.out.println(stu1.getName());\n			Student stu3=(Student) s.get(Student.class, 46);	\n			System.out.println(stu3.getName());\n			tx.commit();\n		} catch (Exception e) {\n			e.printStackTrace();\n			if(tx!=null){\n				tx.rollback();\n			}\n		}finally{\n			if(s!=null &amp;&amp; s.isOpen()){\n				s.close();\n			}\n	}</pre>\n<h5>4<span style=\"font-family:宋体\">、使用统计</span></h5>\n<pre code_snippet_id=\"1579134\" snippet_file_name=\"blog_20160215_6_3267696\" name=\"code\" class=\"java\">//完成一个统计，统计的信息在Sessfactory\n//SessionFactory对象\nStatistics statistics= HibernateUtil.getSessionFactory().getStatistics();\nSystem.out.println(statistics);\nSystem.out.println(&quot;放入&quot;+statistics.getSecondLevelCachePutCount());\nSystem.out.println(&quot;命中&quot;+statistics.getSecondLevelCacheHitCount());\nSystem.out.println(&quot;错过&quot;+statistics.getSecondLevelCacheMissCount());</pre>\n<p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：</span></span><span style=\"color:rgb(255,0,0)\">在配置了二级缓存后，要注意可以通过&nbsp;<span style=\"font-family:Calibri\">Statistics</span></span><span style=\"color:rgb(255,0,0)\">，</span><span style=\"color:rgb(255,0,0)\">查看配置命中率高不高</span><span style=\"color:rgb(255,0,0)\">。</span></p>\n<br>\n<h2>主键增长策略</h2>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;Hibernate<span style=\"font-family:宋体\">主键增长策略有</span><span style=\"font-family:Calibri\">increment</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">indentity</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">sequence</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">hilo</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">native</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">assigned</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">uuid&nbsp;</span><span style=\"font-family:宋体\">、符合主键、</span><span style=\"font-family:Calibri\">foreign</span><span style=\"font-family:宋体\">。</span></p>\n<p>&nbsp;</p>\n<h3>对象标识符<span style=\"font-family:Calibri\">(OID&nbsp;Object&nbsp;ID)</span></h3>\n<p>&nbsp;&nbsp;&nbsp;&nbsp; Hibernate&nbsp;<span style=\"font-family:宋体\">中的持久化对象对应数据库中的一张数据表，因此区分不同的持久化对象，在</span><span style=\"font-family:Calibri\">Hibernate</span><span style=\"font-family:宋体\">中是通过</span><span style=\"font-family:Calibri\">OID(</span><span style=\"font-family:宋体\">对象标识符</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">来完成的，从表的角度看</span><span style=\"font-family:Calibri\">,OID</span><span style=\"font-family:宋体\">对应表的主键。从类的角度看</span><span style=\"font-family:Calibri\">OID</span><span style=\"font-family:宋体\">对应类的主键属性</span><span style=\"font-family:Calibri\">.</span></p>\n<p>&nbsp;</p>\n<h4>1<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">increment</span><span style=\"font-family:宋体\">标识符生成器</span></h4>\n<p>由<span style=\"font-family:Calibri\">Hibernate</span><span style=\"font-family:宋体\">自动以递增方式生成标识符，每次增量为</span><span style=\"font-family:Calibri\">1</span><span style=\"font-family:宋体\">。</span></p>\n<p>优点：不依赖于底层数据库系统，适用于所有的数据库系统。</p>\n<p>缺点：适用于单进程环境下，在多线程环境下很可能生成相同主键&#20540;，而且<span style=\"font-family:Calibri\">OID</span><span style=\"font-family:宋体\">必须为数&#20540;类型</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">比如</span><span style=\"font-family:Calibri\">long,int,short</span><span style=\"font-family:宋体\">类型</span></p>\n<p>配置方式<span style=\"font-family:Calibri\">:</span></p>\n<pre code_snippet_id=\"1579134\" snippet_file_name=\"blog_20160215_7_1174145\" name=\"code\" class=\"html\">&lt;id name=&quot;id&quot; type=&quot;long&quot; column=&quot;ID&quot;&gt;\n     &lt;generator class=&quot;increment&quot;/&gt;\n&lt;/id&gt;</pre>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：底层为</span><span style=\"font-family:Calibri\">select&nbsp;max(id)&nbsp;from&nbsp;Student</span><span style=\"font-family:宋体\">，然后结果</span><span style=\"font-family:Calibri\">&#43;1</span><span style=\"font-family:宋体\">。</span></span></p>\n<p>&nbsp;</p>\n<h4>2<span style=\"font-family:宋体\">、</span>identity<span style=\"font-family:宋体\">标识符生成器</span></h4>\n<p>由底层数据库生成标识符。</p>\n<p>前提条件：数据库支持自动增长字段类型<span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">比如</span><span style=\"font-family:Calibri\">(sql&nbsp;server,mysql),</span><span style=\"font-family:宋体\">而且</span><span style=\"font-family:Calibri\">OID</span><span style=\"font-family:宋体\">必须为数&#20540;类型</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">比如</span><span style=\"font-family:Calibri\">long,int,short</span><span style=\"font-family:宋体\">类型。</span></p>\n<p>配置文件<span style=\"font-family:Calibri\">:</span></p>\n<pre code_snippet_id=\"1579134\" snippet_file_name=\"blog_20160215_8_6713260\" name=\"code\" class=\"html\">&lt;id name=&quot;id&quot; type=&quot;long&quot; column=&quot;ID&quot;&gt;\n 	&lt;generator class=&quot;identity&quot;/&gt;\n&lt;/id&gt;</pre><br>\n<h4>3<span style=\"font-family:宋体\">、</span>sequence<span style=\"font-family:宋体\">标识符生成器</span></h4>\n<p>依赖于底层数据库系统的序列</p>\n<p>前提条件<span style=\"font-family:Calibri\">:</span><span style=\"font-family:宋体\">需要数据库支持序列机制（如</span><span style=\"font-family:Calibri\">:oracle</span><span style=\"font-family:宋体\">等）</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">而且</span><span style=\"font-family:Calibri\">OID</span><span style=\"font-family:宋体\">必须为数&#20540;类型</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">比如</span><span style=\"font-family:Calibri\">long,int,short</span><span style=\"font-family:宋体\">类型。</span></p>\n<p>配置文件<span style=\"font-family:Calibri\">:</span></p>\n<pre code_snippet_id=\"1579134\" snippet_file_name=\"blog_20160215_9_6396832\" name=\"code\" class=\"html\">&lt;id name=”id” type=”java.lang.Long” column=”ID”&gt;\n 	&lt;generator class=”sequence”&gt;\n   	    &lt;param name=”sequence”&gt;my_seq&lt;/param&gt;\n 	&lt;/generator&gt; \n&lt;/id&gt;</pre><br>\n<p>\n<h4>4<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">native</span><span style=\"font-family:宋体\">标识符生成器</span></h4>\n<p>\n<p>\n<p>&nbsp; &nbsp; native<span style=\"font-family:宋体\">生成器能根据底层数据库系统的类型，自动选择合适的标识符生成器，因此非常适用于跨数据库平台开发，它会由</span><span style=\"font-family:Calibri\">Hibernate</span><span style=\"font-family:宋体\">根据数据库适配器中的定义</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">自动采用</span><span style=\"font-family:Calibri\">identity,hilo,sequence</span><span style=\"font-family:宋体\">的其中一种作为主键生成方式，但是</span><span style=\"font-family:Calibri\">OID</span><span style=\"font-family:宋体\">必须为数&#20540;类型</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">比如</span><span style=\"font-family:Calibri\">long,short,int</span><span style=\"font-family:宋体\">等</span><span style=\"font-family:Calibri\">)</span></p>\n<span style=\"font-family:Calibri\"></span>\n<p>配置文件<span style=\"font-family:Calibri\">:</span></p>\n<pre code_snippet_id=\"1579134\" snippet_file_name=\"blog_20160215_10_1271639\" name=\"code\" class=\"html\">&lt;id name=”id” type=”java.lang.Integer” column=”ID”&gt;\n 	&lt;generator class=”native”/&gt;\n&lt;/id&gt;</pre><br>\n<h4>5<span style=\"font-family:宋体\">、</span>hilo<span style=\"font-family:宋体\">标识符生成器</span></h4>\n<p>\n<p>&nbsp; &nbsp;&nbsp;hilo<span style=\"font-family:宋体\">标识符生成器由</span><span style=\"font-family:Calibri\">Hibernate</span><span style=\"font-family:宋体\">按照一种</span><span style=\"font-family:Calibri\">high/low</span><span style=\"font-family:宋体\">算法生成标识符，</span>它从数据库中的特定表的字段中获取<span style=\"font-family:Calibri\">high</span><span style=\"font-family:宋体\">&#20540;，因此需要额外的数据库表保存主键生成的历史状态，</span><span style=\"font-family:Calibri\">hilo</span><span style=\"font-family:宋体\">生成方法不依赖于底层数据库，因此适用于每一种数据库</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">但是</span><span style=\"font-family:Calibri\">OID</span><span style=\"font-family:宋体\">必须为数&#20540;类型</span><span style=\"font-family:Calibri\">(long,int,shor</span><span style=\"font-family:宋体\">类型</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">。</span></p>\n<span style=\"font-family:宋体\"></span>\n<p>配置文件<span style=\"font-family:Calibri\">:</span></p>\n<pre code_snippet_id=\"1579134\" snippet_file_name=\"blog_20160215_11_3953834\" name=\"code\" class=\"html\">&lt;id name=”id” type=”java.lang.Integer” column=”ID”&gt;\n 	&lt;generator class=”hilo”&gt;\n       &lt;param name=”table”&gt;my_hi_value&lt;/param&gt;\n       &lt;param name=”column”&gt;next_value&lt;/param&gt;\n 	&lt;/generator&gt;\n&lt;/id&gt;</pre><br>\n<h4>6<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">uuid</span><span style=\"font-family:宋体\">标识符生成器</span></h4>\n<p>\n<p>&nbsp; &nbsp; 由<span style=\"font-family:Calibri\">Hibernate</span><span style=\"font-family:宋体\">基于</span><span style=\"font-family:Calibri\">128</span><span style=\"font-family:宋体\">位唯一&#20540;产生算法，根据当前设备</span><span style=\"font-family:Calibri\">IP</span><span style=\"font-family:宋体\">，时间，</span><span style=\"font-family:Calibri\">JVM</span><span style=\"font-family:宋体\">启动时间，内部自增量等</span><span style=\"font-family:Calibri\">4</span><span style=\"font-family:宋体\">个参数生成</span><span style=\"font-family:Calibri\">16</span><span style=\"font-family:宋体\">进制数&#20540;作为主键，一般而言</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">利用</span><span style=\"font-family:Calibri\">uuid</span><span style=\"font-family:宋体\">方式生成的主键提供最好的数据插入性能和数据库平台适应性</span><span style=\"font-family:Calibri\">.&nbsp;OID</span><span style=\"font-family:宋体\">一般使用是</span><span style=\"font-family:Calibri\">String</span><span style=\"font-family:宋体\">类型。</span></p>\n<p>配置文件<span style=\"font-family:Calibri\">:</span></p>\n<pre code_snippet_id=\"1579134\" snippet_file_name=\"blog_20160215_12_6320385\" name=\"code\" class=\"html\">&lt;id name=”id” type=”java.lang.String” column=”ID”&gt;\n 	&lt;generator class=”uuid”/&gt;\n&lt;/id&gt;</pre><br>\n<p><span style=\"font-family:Calibri\"></span></p>\n<h4>7<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">assigned</span><span style=\"font-family:宋体\">标识符生成器</span></h4>\n<p>&nbsp; &nbsp; 采用<span style=\"font-family:Calibri\">assign</span><span style=\"font-family:宋体\">生成策略表示由应用程序逻辑来负责生成主键标识符</span><span style=\"font-family:Calibri\">,OID</span><span style=\"font-family:宋体\">类型没有限制。</span></p>\n<p>配置文件<span style=\"font-family:Calibri\">:</span></p>\n<pre code_snippet_id=\"1579134\" snippet_file_name=\"blog_20160215_13_5131906\" name=\"code\" class=\"html\">&lt;id name=”id” type=”java.lang.Integer” column=”ID”&gt;\n 	&lt;generator class=”assigned”/&gt;\n&lt;/id&gt;</pre><br>\n<h4>8<span style=\"font-family:宋体\">、映射复合主键</span></h4>\n<pre code_snippet_id=\"1579134\" snippet_file_name=\"blog_20160215_14_5862254\" name=\"code\" class=\"sql\">create table CUSTOMERS\n(  \n    CUSNAME     VARCHAR2(40) not null,\n    HOMEADDRESS VARCHAR2(50) not null,\n    BIRTHDAY    DATE not null,\n    SEX         VARCHAR2(2),\n    CUSCOMPANY  VARCHAR2(40)\n);\n--设置复合主键\nalter table CUSTOMERS add constraint CUS_PK primary key (CUSNAME, HOMEADDRESS, BIRTHDAY)</pre>\n<p>以独立主键类映射复合主键，这样可以达到将逻辑加以隔离的目的<span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">配置文件如下：</span></p>\n<pre code_snippet_id=\"1579134\" snippet_file_name=\"blog_20160215_15_180653\" name=\"code\" class=\"html\">&lt;composite-id name=&quot;id&quot; class=&quot;com.test.model.pojo.CustomersId&quot;&gt;\n    &lt;key-property name=&quot;cusname&quot; type=&quot;java.lang.String&quot;&gt;\n        &lt;column name=&quot;CUSNAME&quot; length=&quot;40&quot; /&gt;\n    &lt;/key-property&gt;\n    &lt;key-property name=&quot;homeaddress&quot; type=&quot;java.lang.String&quot;&gt;\n        &lt;column name=&quot;HOMEADDRESS&quot; length=&quot;50&quot; /&gt;\n    &lt;/key-property&gt;\n    &lt;key-property name=&quot;birthday&quot; type=&quot;java.util.Date&quot;&gt;\n        &lt;column name=&quot;BIRTHDAY&quot; length=&quot;7&quot; /&gt;\n    &lt;/key-property&gt;\n&lt;/composite-id&gt;</pre><br>\n<h4>9<span style=\"font-family:宋体\">、</span>foreign外键</h4>\n<p>&nbsp; &nbsp;&nbsp;在<span style=\"font-family:Calibri\">one-to-one</span><span style=\"font-family:宋体\">的关系中，有另一张表的主键</span><span style=\"font-family:Calibri\">(Person)&nbsp;</span><span style=\"font-family:宋体\">来决定&nbsp;自己主键</span><span style=\"font-family:Calibri\">/</span><span style=\"font-family:宋体\">外键</span><span style=\"font-family:Calibri\">(&nbsp;IdCard)。</span></p>\n<p>对象标识符使用简单原则<span style=\"font-family:Calibri\">:</span></p>\n<p>1<span style=\"font-family:宋体\">、</span>针对<span style=\"font-family:Calibri\">oracle&nbsp;[</span><span style=\"font-family:宋体\">主键是</span><span style=\"font-family:Calibri\">int/long/short</span><span style=\"font-family:宋体\">建议使用</span><span style=\"font-family:Calibri\">sequence]</span><span style=\"font-family:宋体\">主键是</span><span style=\"font-family:Calibri\">String</span><span style=\"font-family:宋体\">使用</span><span style=\"font-family:Calibri\">uuid</span><span style=\"font-family:宋体\">或者</span><span style=\"font-family:Calibri\">assinged</span>。</p>\n<p>2<span style=\"font-family:宋体\">、</span>针对<span style=\"font-family:Calibri\">mysql&nbsp;[</span><span style=\"font-family:宋体\">主键是</span><span style=\"font-family:Calibri\">int/long/short</span><span style=\"font-family:宋体\">建议使用</span><span style=\"font-family:Calibri\">increment/assigend&nbsp;,</span><span style=\"font-family:宋体\">如果</span>主键是字串，使用UUId/assigned。</p>\n<p>3<span style=\"font-family:宋体\">、</span>针对<span style=\"font-family:Calibri\">sql&nbsp;server&nbsp;[</span><span style=\"font-family:宋体\">主键是</span><span style=\"font-family:Calibri\">int/long/short</span><span style=\"font-family:宋体\">建议使用</span><span style=\"font-family:Calibri\">identity/native/assinged&nbsp;,</span><span style=\"font-family:宋体\">如果主键是字串，使用</span><span style=\"font-family:Calibri\">uuid/assigned</span>。</p>\n<p>4<span style=\"font-family:宋体\">、</span>one-to-one<span style=\"font-family:宋体\">又是基于主键的则使用</span><span style=\"font-family:Calibri\">foreign</span>。</p>\n<br>\n<h2>hibernate使用范围</h2>\n<p>\n<p>1<span style=\"font-family:宋体\">、</span>数据量巨大，性能要求苛刻的系统，<span style=\"font-family:Calibri\">hibernate</span><span style=\"font-family:宋体\">也很难达到要求</span><span style=\"font-family:Calibri\">,&nbsp;</span><span style=\"font-family:宋体\">批量操作数据的效率也不高。&nbsp;</span></p>\n<p>2<span style=\"font-family:宋体\">、</span>主要用于事务操作比较多的项目。</p>\n<p>3<span style=\"font-family:宋体\">、不适合</span><span style=\"font-family:Calibri\">OLAP(On-Line&nbsp;Analytical&nbsp;Processing</span><span style=\"font-family:宋体\">联机分析处理</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">，以查询分析数据为主的系统；适合</span><span style=\"font-family:Calibri\">OLTP</span><span style=\"font-family:宋体\">（</span><span style=\"font-family:Calibri\">on-line&nbsp;transaction&nbsp;processing</span><span style=\"font-family:宋体\">联机事务处理）。</span></p>\n<p>4<span style=\"font-family:宋体\">、对于些关系模型设计不合理的老系统，也不能发挥</span><span style=\"font-family:Calibri\">hibernate</span><span style=\"font-family:宋体\">优势。</span></p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<p>----------<span style=\"font-family:宋体\">参考《韩顺平</span><span style=\"font-family:Calibri\">.hibernate</span><span style=\"font-family:宋体\">从入门到精通》</span></p>\n<p><span style=\"font-family:宋体\"><br>\n</span></p>\n   \n', '2016-04-16 01:21:05', '2');
INSERT INTO `article` VALUES ('10018', '10003', 'Linux学习笔记10', '\n        <div class=\"markdown_views\"><h1 id=\"linux学习笔记10\"><strong>Linux学习笔记10</strong></h1>\n\n<p><div class=\"toc\"><div class=\"toc\">\n<ul>\n<li><a href=\"#linux学习笔记10\">Linux学习笔记10</a><ul>\n<li><ul>\n<li><a href=\"#正则表达式\">正则表达式</a></li>\n<li><a href=\"#源码包约定目录\">源码包约定目录</a></li>\n<li><a href=\"#shell脚本约定目录\">Shell脚本约定目录</a></li>\n<li><a href=\"#shell脚本的创建与执行\">Shell脚本的创建与执行</a></li>\n<li><a href=\"#date命令\">date命令</a></li>\n<li><a href=\"#同步时间\">同步时间</a></li>\n<li><a href=\"#shell脚本预设变量\">Shell脚本预设变量</a></li>\n<li><a href=\"#与用户交互\">与用户交互</a></li>\n<li><a href=\"#数学计算\">数学计算</a></li>\n<li><a href=\"#shell脚本中的选择语句\">Shell脚本中的选择语句</a></li>\n<li><a href=\"#shell脚本中的循环语句\">Shell脚本中的循环语句</a></li>\n<li><a href=\"#seq命令\">seq命令</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>\n</div>\n</p>\n\n\n\n<h3 id=\"正则表达式\"><strong>正则表达式</strong></h3>\n\n<blockquote>\n  <p><a href=\"http://www.apelearn.com/study_v2/chapter14.html#id1\">http://www.apelearn.com/study_v2/chapter14.html#id1</a></p>\n  \n  <p>例：遍历查找某一文件中的一段字符</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# grep -r \'passwd\' /etc/</code></p>\n  </blockquote>\n  \n  <p>例：交换一行中两个字符串的位置</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# echo \"123\" | sed \'s/\\(1\\)\\(2\\)\\(3\\)/\\3\\2\\1/\' <br>\n        321 <br>\n        [root@localhost ~]# echo \"123\" | sed \'s#\\(1\\)\\(2\\)\\(3\\)#\\3\\2\\1#\' <br>\n        321 <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n</blockquote>\n\n<hr>\n\n<hr>\n\n\n\n<h3 id=\"源码包约定目录\"><strong>源码包约定目录</strong></h3>\n\n<blockquote>\n  <p><code>/usr/local/src</code></p>\n</blockquote>\n\n\n\n<h3 id=\"shell脚本约定目录\"><strong>Shell脚本约定目录</strong></h3>\n\n<blockquote>\n  <p><code>/usr/local/sbin</code></p>\n</blockquote>\n\n\n\n<h3 id=\"shell脚本的创建与执行\"><strong>Shell脚本的创建与执行</strong></h3>\n\n<blockquote>\n  <p>1.使用VIM编写Shell脚本，后缀名约定为<code>.sh</code>。</p>\n  \n  <p>例：编写一个脚本</p>\n  \n  <blockquote>\n    <p><code>[root@localhost sbin]# vim 1.sh</code></p>\n    \n    <p>脚本文件内容 <br>\n    <code>#! /bin/bash <br>\n        ## This script is the first. <br>\n        ## written by switch. <br>\n        ## 2016-04-04 <br>\n        d=`date +%y:%m:%d` <br>\n        echo \"Hello, this is a shell script.\" <br>\n        echo \"It\'s written by switch on $d\"</code></p>\n  </blockquote>\n  \n  <p>2.执行Shell脚本，方法有：</p>\n  \n  <blockquote>\n    <p>2.1.<code>sh 脚本文件路径</code></p>\n    \n    <blockquote>\n      <p><code>[root@localhost sbin]# sh /usr/local/sbin/1.sh  <br>\n          Hello, this is a shell script. <br>\n          It\'s written by switch on 16:04:04 <br>\n          [root@localhost sbin]#</code></p>\n    </blockquote>\n    \n    <p>2.2.给脚本文件加上执行权限，通过脚本路径名访问</p>\n    \n    <blockquote>\n      <p><code>[root@localhost sbin]# chmod +x 1.sh  <br>\n          [root@localhost sbin]# ll <br>\n          总用量 4 <br>\n          -rwxr-xr-x 1 root root 174 4月   4 13:40 1.sh <br>\n          [root@localhost sbin]# ./1.sh  <br>\n          Hello, this is a shell script. <br>\n          It\'s written by switch on 16:04:04 <br>\n          [root@localhost sbin]#</code></p>\n    </blockquote>\n    \n    <p>2.3.<code>bash 脚本文件路径</code>，如果需要显示执行过程需要加上<code>-x</code>选项</p>\n    \n    <blockquote>\n      <p><code>[root@localhost sbin]# bash -x 1.sh  <br>\n          ++ date +%y:%m:%d <br>\n          + d=16:04:04 <br>\n          + echo \'Hello, this is a shell script.\' <br>\n          Hello, this is a shell script. <br>\n          + echo \'It\'\\\'\'s written by switch on 16:04:04\' <br>\n          It\'s written by switch on 16:04:04 <br>\n          [root@localhost sbin]#</code></p>\n    </blockquote>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"date命令\"><strong>date命令</strong></h3>\n\n<blockquote>\n  <p>常用用法：</p>\n  \n  <blockquote>\n    <p><code>data +%Y</code> 以四位数字格式打印年份</p>\n    \n    <p><code>date +%y</code> 以两位数字格式打印年份</p>\n    \n    <p><code>date +%m</code> 月份</p>\n    \n    <p><code>date +%d</code> 日期</p>\n    \n    <p><code>date +%H</code> 小时</p>\n    \n    <p><code>date +%M</code> 分钟</p>\n    \n    <p><code>date +%S</code> 秒</p>\n    \n    <p><code>date +%w</code> 星期，如果结果显示0 则表示周日</p>\n    \n    <p>例：</p>\n    \n    <blockquote>\n      <p><code>[root@localhost sbin]# date +\'%Y-%m-%d %H:%M:%S\' <br>\n          2016-04-04 13:45:50 <br>\n          [root@localhost sbin]#</code></p>\n    </blockquote>\n  </blockquote>\n  \n  <p>有时在脚本中会用到一天前的日期:</p>\n  \n  <blockquote>\n    <p><code>[root@localhost sbin]# date -d \"-1 day\" +%d <br>\n        03</code></p>\n  </blockquote>\n  \n  <p>一小时前:</p>\n  \n  <blockquote>\n    <p><code>[root@localhost sbin]# date -d \"-1 hour\" +%H <br>\n        12</code></p>\n  </blockquote>\n  \n  <p>一分钟前:</p>\n  \n  <blockquote>\n    <p><code>[root@localhost sbin]# date -d \"-1 min\" +%M <br>\n        48</code></p>\n  </blockquote>\n  \n  <p>三星期前和三月前:</p>\n  \n  <blockquote>\n    <p><code>[root@localhost sbin]# date -d \"-3week\" +\"%Y:%m:%d   %w\" <br>\n        2016:03:14   1 <br>\n        [root@localhost sbin]# date -d \"-3month\" +\"%Y:%m:%d   %w\" <br>\n        2016:01:04   1 <br>\n        [root@localhost sbin]#</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"同步时间\"><strong>同步时间</strong></h3>\n\n<blockquote>\n  <p><code>ntpdate time.windows.com</code></p>\n</blockquote>\n\n\n\n<h3 id=\"shell脚本预设变量\"><strong>Shell脚本预设变量</strong></h3>\n\n<blockquote>\n  <p><a href=\"http://www.cnblogs.com/fhefh/archive/2011/04/15/2017613.html\">linux中shell变量<span>$</span>#,<span>$</span>@,<span>$</span>0,<span>$</span>1,<span>$</span>2的含义解释</a></p>\n</blockquote>\n\n\n\n<h3 id=\"与用户交互\"><strong>与用户交互</strong></h3>\n\n<blockquote>\n  <p><code>read -p</code></p>\n  \n  <p>例：输入字符串，并打印出来。</p>\n  \n  <blockquote>\n    <p><code>[root@localhost sbin]# bash -x 2.sh  <br>\n        + read -p \'Please input a number: \\&gt;\' num <br>\n        Please input a number: \\&gt;F1 <br>\n        + echo \'Your number is F1\' <br>\n        Your number is F1 <br>\n        [root@localhost sbin]#</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"数学计算\"><strong>数学计算</strong></h3>\n\n<blockquote>\n  <p><code>$[数学表达式]</code></p>\n  \n  <p>例：简单计算</p>\n  \n  <blockquote>\n    <p><code>#! /bin/bash <br>\n        a=1 <br>\n        b=2 <br>\n        sum=$[$a+$b] <br>\n        echo \"$a+$b=$sum\"</code></p>\n    \n    <p>执行结果：</p>\n    \n    <p><code>[root@localhost sbin]# bash -x 3.sh  <br>\n        + a=1 <br>\n        + b=2 <br>\n        + sum=3 <br>\n        + echo 1+2=3 <br>\n        1+2=3 <br>\n        [root@localhost sbin]#</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"shell脚本中的选择语句\"><strong>Shell脚本中的选择语句</strong></h3>\n\n<blockquote>\n  <p><code>if</code></p>\n  \n  <blockquote>\n    <p>基本语法：</p>\n    \n    <blockquote>\n      <p><code>if 判断语句;  <br>\n              then command <br>\n          fi</code></p>\n    </blockquote>\n    \n    <p>例：</p>\n    \n    <blockquote>\n      <p><code>[root@localhost sbin]# cat if.sh  <br>\n          #! /bin/bash <br>\n          read -p \"Please input your score:\" score <br>\n          if((score&lt;60)) <br>\n              then echo \"Your didn\'t pass the exam.\" <br>\n          fi <br>\n          [root@localhost sbin]# bash -x if.sh  <br>\n          + read -p \'Please input your score:\' score <br>\n          Please input your score:55 <br>\n          + (( score&lt;60 )) <br>\n          + echo \'Your didn\'\\\'\'t pass the exam.\' <br>\n          Your didn\'t pass the exam. <br>\n          [root@localhost sbin]#</code></p>\n    </blockquote>\n  </blockquote>\n  \n  <p><code>if else</code></p>\n  \n  <blockquote>\n    <p>基本语法：</p>\n    \n    <blockquote>\n      <p><code>if 判断语句;  <br>\n              then command <br>\n          else <br>\n              command <br>\n          fi</code></p>\n    </blockquote>\n    \n    <p>例：</p>\n    \n    <blockquote>\n      <p><code>[root@localhost sbin]# cat if_else.sh  <br>\n          #! /bin/bash <br>\n          read -p \"Please input your score:\" score <br>\n          if [ $score -ge 60 ] <br>\n              then echo \"Your pass the exam.\" <br>\n          else echo \"Your didn\'t pass the exam.\" <br>\n          fi <br>\n          [root@localhost sbin]# bash -x if_else.sh  <br>\n          + read -p \'Please input your score:\' score <br>\n          Please input your score:30 <br>\n          + \'[\' 30 -ge 60 \']\' <br>\n          + echo \'Your didn\'\\\'\'t pass the exam.\' <br>\n          Your didn\'t pass the exam. <br>\n          [root@localhost sbin]# bash -x if_else.sh  <br>\n          + read -p \'Please input your score:\' score <br>\n          Please input your score:70 <br>\n          + \'[\' 70 -ge 60 \']\' <br>\n          + echo \'Your pass the exam.\' <br>\n          Your pass the exam. <br>\n          [root@localhost sbin]#</code></p>\n    </blockquote>\n  </blockquote>\n  \n  <p><code>if elif else</code></p>\n  \n  <blockquote>\n    <p>基本语法：</p>\n    \n    <blockquote>\n      <p><code>if 判断语句1;  <br>\n              then command <br>\n          elif 判断语句2; <br>\n              then command <br>\n          else <br>\n              command <br>\n          fi</code></p>\n    </blockquote>\n    \n    <p>例：</p>\n    \n    <blockquote>\n      <p><code>[root@localhost sbin]# cat if_elif_else.sh  <br>\n          #!  /bin/bash <br>\n          read -p \"Please input your score:\" score <br>\n          if [ $score -lt 60 ] <br>\n              then echo \"Your didn\'t pass the exam.\" <br>\n          elif [ $score -ge 60 ] &amp;&amp; [ $score -lt 85 ] <br>\n              then echo \"Your pass the exam.\" <br>\n          else <br>\n              echo \"Your score is vary high!\" <br>\n          fi <br>\n          [root@localhost sbin]# bash -x if_elif_else.sh  <br>\n          + read -p \'Please input your score:\' score <br>\n          Please input your score:50 <br>\n          + \'[\' 50 -lt 60 \']\' <br>\n          + echo \'Your didn\'\\\'\'t pass the exam.\' <br>\n          Your didn\'t pass the exam. <br>\n          [root@localhost sbin]# bash -x if_elif_else.sh  <br>\n          + read -p \'Please input your score:\' score <br>\n          Please input your score:80 <br>\n          + \'[\' 80 -lt 60 \']\' <br>\n          + \'[\' 80 -ge 60 \']\' <br>\n          + \'[\' 80 -lt 85 \']\' <br>\n          + echo \'Your pass the exam.\' <br>\n          Your pass the exam. <br>\n          [root@localhost sbin]# bash -x if_elif_else.sh  <br>\n          + read -p \'Please input your score:\' score <br>\n          Please input your score:90 <br>\n          + \'[\' 90 -lt 60 \']\' <br>\n          + \'[\' 90 -ge 60 \']\' <br>\n          + \'[\' 90 -lt 85 \']\' <br>\n          + echo \'Your score is vary high!\' <br>\n          Your score is vary high! <br>\n          [root@localhost sbin]#</code></p>\n    </blockquote>\n  </blockquote>\n  \n  <p>以上只是简单的介绍了if语句的结构。在判断数值大小除了可以用 <code>(( ))</code> 的形式外，还可以使用 <code>[ ]</code> 但是就不能使用<code>&gt;, &lt; , =</code> 这样的符号了，要使用 <code>-lt</code> （小于），<code>-gt</code> （大于），<code>-le</code> （小于等于），<code>-ge</code> （大于等于），<code>-eq</code> （等于），<code>-ne</code> （不等于）。</p>\n  \n  <blockquote>\n    <p><code>[root@localhost sbin]# a=10; if [ $a -lt 5 ]; then echo ok; fi <br>\n        [root@localhost sbin]# a=10; if [ $a -gt 5 ]; then echo ok; fi <br>\n        ok <br>\n        [root@localhost sbin]# a=10; if [ $a -ge 10 ]; then echo ok; fi <br>\n        ok <br>\n        [root@localhost sbin]# a=10; if [ $a -eq 10 ]; then echo ok; fi <br>\n        ok <br>\n        [root@localhost sbin]# a=10; if [ $a -ne 10 ]; then echo ok; fi</code></p>\n  </blockquote>\n  \n  <p>再看看if中使用 &amp;&amp; 和 ||的情况:</p>\n  \n  <blockquote>\n    <p><code>[root@localhost sbin]# a=10; if [ $a -lt 1 ] || [ $a -gt 5 ]; then echo ok; fi <br>\n        ok <br>\n        [root@localhost sbin]# a=10; if [ $a -gt 1 ] || [ $a -lt 10 ]; then echo ok; fi <br>\n        ok</code></p>\n  </blockquote>\n  \n  <p>shell 脚本中if还经常判断关于文件属性，比如判断是普通文件还是目录，判断文件是否有读写执行权限等。常用的几个选项：</p>\n  \n  <blockquote>\n    <p><code>-e</code> ：判断文件或目录是否存在</p>\n    \n    <p><code>-d</code> ：判断是不是目录，并是否存在</p>\n    \n    <p><code>-f</code> ：判断是否是普通文件，并存在</p>\n    \n    <p><code>-r</code> ：判断文档是否有读权限</p>\n    \n    <p><code>-w</code> ：判断是否有写权限</p>\n    \n    <p><code>-x</code> ：判断是否可执行</p>\n    \n    <p><code>-s</code> ：判断文件存在且文件大小是否大于0</p>\n    \n    <p>例：判断是否为文件</p>\n    \n    <blockquote>\n      <p><code>[root@localhost sbin]# if [ -e 1.sh ]; then echo \'file\'; fi <br>\n          file <br>\n          [root@localhost sbin]#</code></p>\n      \n      <p>PS：可以通过<code>man test</code>来查看关于判断的帮助文档。</p>\n    </blockquote>\n  </blockquote>\n  \n  <p>还有一些特殊用法：</p>\n  \n  <blockquote>\n    <p><code>-z</code> ：判断字符串长是否为0</p>\n    \n    <p><code>if</code>后面可以是一个返回结果，如果结果为0，则执行，不为零则不执行。</p>\n    \n    <blockquote>\n      <p><code>[root@localhost sbin]# if grep -q \'root\' ~/passwd; then echo \'ok\'; fi <br>\n          ok <br>\n          [root@localhost sbin]#</code></p>\n      \n      <p>PS：这里的<code>grep -q</code>获取的是执行是否成功的值。</p>\n    </blockquote>\n    \n    <p><code>! 返回结果</code></p>\n    \n    <blockquote>\n      <p>PS：就是对上面那种用法的结果取反。 </p>\n    </blockquote>\n  </blockquote>\n  \n  <p><code>case</code></p>\n  \n  <blockquote>\n    <p>基本语法：</p>\n    \n    <blockquote>\n      <p><code>case 变量 in <br>\n          value1) <br>\n              command <br>\n              ;; <br>\n          value2) <br>\n              command <br>\n              ;; <br>\n          *) <br>\n              command <br>\n              ;; <br>\n          esac</code></p>\n    </blockquote>\n    \n    <p>PS：<code>value</code>的个数是没有限制的，<code>*</code>代表其他值。</p>\n    \n    <p>例：判断奇数偶数</p>\n    \n    <blockquote>\n      <p><code>[root@localhost sbin]# cat case.sh  <br>\n          #! /bin/bash <br>\n          read -p \"Please input a number:\" num <br>\n          res=$[$num%2] <br>\n          case $res in <br>\n          1) <br>\n              echo \"The number is odd.\" <br>\n              ;; <br>\n          0) <br>\n              echo \"The number is even.\" <br>\n              ;; <br>\n          *) <br>\n              echo \"It\'s not a number!\" <br>\n              ;; <br>\n          esac <br>\n          [root@localhost sbin]# bash -x case.sh  <br>\n          + read -p \'Please input a number:\' num <br>\n          Please input a number:10 <br>\n          + res=0 <br>\n          + case $res in <br>\n          + echo \'The number is even.\' <br>\n          The number is even. <br>\n          [root@localhost sbin]# sh case.sh  <br>\n          Please input a number:9 <br>\n          The number is odd. <br>\n          [root@localhost sbin]#</code></p>\n    </blockquote>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"shell脚本中的循环语句\"><strong>Shell脚本中的循环语句</strong></h3>\n\n<blockquote>\n  <p><code>for循环</code></p>\n  \n  <blockquote>\n    <p>基本语法：</p>\n    \n    <blockquote>\n      <p><code>for 变量名 in 循环的条件 <br>\n          do <br>\n               command <br>\n          done</code></p>\n      \n      <p>PS： “循环的条件” 可以写成一组字符串或者数字(用1个或者多个空格隔开), 也可以是一条命令的执行结果。</p>\n    </blockquote>\n    \n    <p>例：输出既定的字符串</p>\n    \n    <blockquote>\n      <p><code>[root@localhost sbin]# cat for.sh  <br>\n          #! /bin/bash <br>\n          for i in a b c d e <br>\n          do <br>\n              echo $i <br>\n          done <br>\n          [root@localhost sbin]# sh for.sh  <br>\n          a <br>\n          b <br>\n          c <br>\n          d <br>\n          e <br>\n          [root@localhost sbin]#</code></p>\n    </blockquote>\n    \n    <p>例：输出当前文件夹下的所有非隐藏文件的文件名</p>\n    \n    <blockquote>\n      <p><code>[root@localhost sbin]# cat for_2.sh  <br>\n          #! /bin/bash <br>\n          for file in `ls` <br>\n          do <br>\n              echo $file <br>\n          done <br>\n          [root@localhost sbin]# sh for_2.sh  <br>\n          1.sh <br>\n          2.sh <br>\n          3.sh <br>\n          4.sh <br>\n          case.sh <br>\n          for_2.sh <br>\n          for.sh <br>\n          if_elif_else.sh <br>\n          if_else.sh <br>\n          if.sh <br>\n          [root@localhost sbin]#</code></p>\n    </blockquote>\n    \n    <p>例：1+2+3+…+99+100</p>\n    \n    <blockquote>\n      <p><code>[root@localhost sbin]# cat 4.sh  <br>\n          #! /bin/bash <br>\n          sum=0 <br>\n          for i in `seq 1 100` <br>\n          do <br>\n              sum=$[$i+$sum] <br>\n          done <br>\n          echo $sum <br>\n          [root@localhost sbin]# sh 4.sh  <br>\n          5050 <br>\n          [root@localhost sbin]#</code></p>\n      \n      <p>PS：脚本中的 seq 1 100 表示从1到100的一个序列。</p>\n    </blockquote>\n  </blockquote>\n  \n  <p><code>while循环</code></p>\n  \n  <blockquote>\n    <p>基本语法：</p>\n    \n    <blockquote>\n      <p><code>while 循环条件 <br>\n          do <br>\n              command <br>\n          done</code></p>\n    </blockquote>\n    \n    <p>例：1+2+3+…+99+100</p>\n    \n    <blockquote>\n      <p><code>[root@localhost sbin]# cat while.sh  <br>\n          #! /bin/bash <br>\n          sum=0 <br>\n          i=1 <br>\n          while [ $i -le 100 ] <br>\n          do <br>\n              sum=$[$sum+$i] <br>\n              i=$[$i+1] <br>\n          done <br>\n          echo $sum <br>\n          [root@localhost sbin]# sh while.sh  <br>\n          5050 <br>\n          [root@localhost sbin]#</code></p>\n    </blockquote>\n    \n    <p>PS：另外可以把循环条件拿一个<code>:</code>替代，这样可以做到死循环。</p>\n  </blockquote>\n  \n  <p><code>break</code> : 结束本层循环</p>\n  \n  <p><code>continue</code> : 跳过本次循环，进入下一次循环</p>\n  \n  <p><code>exit</code> : 直接退出当前Shell脚本</p>\n</blockquote>\n\n\n\n<h3 id=\"seq命令\"><strong>seq命令</strong></h3>\n\n<blockquote>\n  <p><code>seq</code></p>\n  \n  <blockquote>\n    <p>基本语法：</p>\n    \n    <blockquote>\n      <p><code>seq [-s \'分隔符\'] 起始数 [增长数] 结束数</code></p>\n    </blockquote>\n    \n    <p>例：自增为5，分隔符为’:’，输出1..100的增长序列</p>\n    \n    <blockquote>\n      <p><code>[root@localhost sbin]# seq -s \':\' 1 +5 100 <br>\n          1:6:11:16:21:26:31:36:41:46:51:56:61:66:71:76:81:86:91:96 <br>\n          [root@localhost sbin]#</code></p>\n    </blockquote>\n  </blockquote>\n</blockquote>\n\n<p><strong>Shell脚本中的函数</strong></p>\n\n<blockquote>\n  <p><code>[root@localhost sbin]# cat fun.sh  <br>\n      #! /bin/bash <br>\n      function max() <br>\n      { <br>\n          if [ $1 -ge $2 ] <br>\n              then echo $1 <br>\n          else <br>\n              echo $2 <br>\n          fi <br>\n      } <br>\n      max $1 $2 <br>\n      [root@localhost sbin]# bash -x fun.sh 2 3 <br>\n      + max 2 3 <br>\n      + \'[\' 2 -ge 3 \']\' <br>\n      + echo 3 <br>\n      3 <br>\n      [root@localhost sbin]#</code></p>\n  \n  <p>PS：在shell脚本中，函数一定要写在最前面，不能出现在中间或者最后，因为函数是要被调用的，如果还没有出现就被调用，肯定是会出错的。</p>\n  \n  <p>PS：通过<code>expert 变量</code>可以将变量定义为全局变量，也就是说，在脚本文件的该函数外也能使用该变量。</p>\n</blockquote>\n\n<p><strong><font size=\"6\">参考《跟阿铭学Linux》</font></strong></p>\n\n<hr></div>\n        <script type=\"text/javascript\">\n            $(function () {\n                $(\'pre.prettyprint code\').each(function () {\n                    var lines = $(this).text().split(\'\\n\').length;\n                    var $numbering = $(\'<ul/>\').addClass(\'pre-numbering\').hide();\n                    $(this).addClass(\'has-numbering\').parent().append($numbering);\n                    for (i = 1; i <= lines; i++) {\n                        $numbering.append($(\'<li/>\').text(i));\n                    };\n                    $numbering.fadeIn(1700);\n                });\n            });\n        </script>\n   \n', '2016-04-16 01:21:05', '0');
INSERT INTO `article` VALUES ('10019', '10003', 'Java网络编程之NIO编程(待补充)', '\n\n<h1 style=\"text-align:center\"><span style=\"font-size:18px\">Java<span style=\"font-family:宋体\">网络编程之</span><span style=\"font-family:Calibri\">NIO</span><span style=\"font-family:宋体\">编程</span>(<span style=\"font-family:宋体\">待补充</span><span style=\"font-family:Calibri\">)</span></span></h1>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Calibri\"></span></span></p>\n<p>学习网站<span style=\"font-family:Calibri\">1</span><span style=\"font-family:宋体\">：</span><a target=\"_blank\" href=\"http://ifeve.com/java-nio-all/\"><span style=\"color:rgb(128,0,128)\">http://ifeve.com/java-nio-all/</span></a></p>\n<p>学习网站<span style=\"font-family:Calibri\">2</span><span style=\"font-family:宋体\">：</span><a target=\"_blank\" href=\"http://www.ibm.com/developerworks/cn/education/java/j-nio/j-nio.html\"><span style=\"color:rgb(128,0,128)\">http://www.ibm.com/developerworks/cn/education/java/j-nio/j-nio.html</span></a></p>\n<p>&nbsp;</p>\n<p>NIO<span style=\"font-family:宋体\">案例</span><span style=\"font-family:Calibri\">1</span></p>\n<pre code_snippet_id=\"1616626\" snippet_file_name=\"blog_20160319_1_4154095\" name=\"code\" class=\"java\">package com.pc;\nimport java.io.IOException;\nimport java.net.InetSocketAddress;\nimport java.nio.ByteBuffer;\nimport java.nio.channels.SelectionKey;\nimport java.nio.channels.Selector;\nimport java.nio.channels.ServerSocketChannel;\nimport java.nio.channels.SocketChannel;\nimport java.util.Iterator;\nimport java.util.Set;\n\n/**\n * Created by Switch on 2016/3/19.\n * 测试NIO\n */\npublic class TestNIO1 {\n    /**\n     * NIO使用案例\n     *\n     * @throws IOException\n     */\n    public void selector() throws IOException {\n        // 创建字节缓冲区，并分配字节缓冲区大小\n        ByteBuffer buffer = ByteBuffer.allocate(1024);\n        // 创建选择器\n        Selector selector = Selector.open();\n        // 创建服务器套接字通道\n        ServerSocketChannel serverSocketChannel = ServerSocketChannel.open();\n        // 配置Channel为非阻塞模式\n        serverSocketChannel.configureBlocking(false);\n        // 获得和Channel关联的Service Socket，并绑定端口\n        serverSocketChannel.socket().bind(new InetSocketAddress(8888));\n        // Channel注册选择器和选择器键\n        serverSocketChannel.register(selector, SelectionKey.OP_ACCEPT);\n        // 监测注册在选择器上的所有通信信道是否有需要的事件发生\n        while (true) {\n            // 返回此选择器的已选择键集\n            Set selectedKeys = selector.selectedKeys();\n            Iterator iterator = selectedKeys.iterator();\n            // 迭代访问键集\n            while (iterator.hasNext()) {\n                SelectionKey key = (SelectionKey) iterator.next();\n                // 值是OP_ACCEPT\n                if ((key.readyOps() &amp; SelectionKey.OP_ACCEPT) == SelectionKey.OP_ACCEPT) {\n                    // 返回创建此键的通道\n                    ServerSocketChannel ssChannel = (ServerSocketChannel) key.channel();\n                    // 接受到此通道套接字的连接\n                    SocketChannel sc = ssChannel.accept();\n                    sc.configureBlocking(false);\n                    // Channel注册选择器和选择器键\n                    sc.register(selector, SelectionKey.OP_READ);\n                    // 从键集中移除该键\n                    iterator.remove();\n                } else if ((key.readyOps() &amp; SelectionKey.OP_READ) == SelectionKey.OP_READ) {\n                    // 值是OP_READ\n                    // 返回创建此键的通道\n                    SocketChannel sc = (SocketChannel) key.channel();\n                    while (true) {\n                        buffer.clear();\n                        // 读取数据\n                        int n = sc.read(buffer);\n                        if (n &lt;= 0) {\n                            break;\n                        }\n                        // 将limit设置为当前位置，然后将position设置为 0\n                        buffer.flip();\n                    }\n                    // 从键集中移除该键\n                    iterator.remove();\n                }\n            }\n        }\n    }\n}</pre><br>\n<br>\n   \n', '2016-04-16 01:21:05', '0');
INSERT INTO `article` VALUES ('10020', '10003', 'Hibernate框架整合', '\n\n<h1 style=\"text-align:center\"><span style=\"font-size:18px\">Hibernate<span style=\"font-family:宋体\">框架整合</span></span></h1>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p>&nbsp; &nbsp; 这里给出整合了<span style=\"font-family:Calibri\">Hibernate</span><span style=\"font-family:宋体\">的留言板的程序框架图，采用接口编程的方式。</span></p>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160215163142938\" alt=\"\"></div>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p>PS<span style=\"font-family:宋体\">：这可以和前端时间写的</span><a target=\"_blank\" href=\"http://blog.csdn.net/q547550831/article/details/50613010\"><span style=\"color:rgb(128,0,128)\">Hibernate<span style=\"font-family:宋体\">入门</span></span></a>、<a target=\"_blank\" href=\"http://blog.csdn.net/q547550831/article/details/50562023\"><span style=\"color:rgb(128,0,128)\">Struts<span style=\"font-family:宋体\">入门</span></span></a>、<a target=\"_blank\" href=\"http://blog.csdn.net/q547550831/article/details/50478721\"><span style=\"color:rgb(128,0,128)\">Web&nbsp;MVC<span style=\"font-family:宋体\">模式实现</span></span></a>这三篇博客里的<span style=\"font-family:Calibri\">MVC</span><span style=\"font-family:宋体\">模式进行比较</span>。</p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<p>----------<span style=\"font-family:宋体\">参考《韩顺平</span><span style=\"font-family:Calibri\">.hibernate</span><span style=\"font-family:宋体\">从入门到精通》</span></p>\n<p><br>\n</p>\n   \n', '2016-04-16 01:21:05', '2');
INSERT INTO `article` VALUES ('10021', '10003', 'Linux学习笔记9', '\n        <div class=\"markdown_views\"><h1 id=\"linux学习笔记9\"><strong>Linux学习笔记9</strong></h1>\n\n<p><div class=\"toc\"><div class=\"toc\">\n<ul>\n<li><a href=\"#linux学习笔记9\">Linux学习笔记9</a><ul>\n<li><ul>\n<li><a href=\"#history命令\">history命令</a></li>\n<li><a href=\"#管道符的使用\">管道符的使用</a></li>\n<li><a href=\"#错误重定向错误追加重定向\">错误重定向错误追加重定向</a></li>\n<li><a href=\"#变量\">变量</a></li>\n<li><a href=\"#系统环境变量与个人环境变量的配置文件\">系统环境变量与个人环境变量的配置文件</a></li>\n<li><a href=\"#linux-shell中的特殊符号\">Linux Shell中的特殊符号</a></li>\n<li><a href=\"#cut命令\">cut命令</a></li>\n<li><a href=\"#sort命令\">sort命令</a></li>\n<li><a href=\"#wc命令\">wc命令</a></li>\n<li><a href=\"#uniq命令\">uniq命令</a></li>\n<li><a href=\"#tee命令\">tee命令</a></li>\n<li><a href=\"#tr命令\">tr命令</a></li>\n<li><a href=\"#split命令\">split命令</a></li>\n<li><a href=\"#对比两个文件区别\">对比两个文件区别</a></li>\n<li><a href=\"#多条命令在一行执行\">多条命令在一行执行</a></li>\n<li><a href=\"#命令放在后台执行\">命令放在后台执行</a></li>\n<li><a href=\"#表示连续字符中任意一个\">表示连续字符中任意一个</a></li>\n<li><a href=\"#与和或\">与和或</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>\n</div>\n</p>\n\n<h3 id=\"history命令\"><strong>history命令</strong></h3>\n\n<blockquote>\n  <p><code>history</code> : 显示所有历史命令</p>\n  \n  <p><code>history -c</code> : 清空命令记录</p>\n  \n  <p><code>history -w</code> : 将当前历史写入历史记录文件中，重写历史文件内容</p>\n  \n  <p><code>!!</code> : 执行上一条命令</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# ls -lh 123/ <br>\n        总用量 0 <br>\n        -rw-r--r-- 1 root root 0 4月   2 15:00 321.txt <br>\n        [root@localhost ~]# !! <br>\n        ls -lh 123/ <br>\n        总用量 0 <br>\n        -rw-r--r-- 1 root root 0 4月   2 15:00 321.txt <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n  \n  <p><code>!n</code> : 执行命令历史中的第n条命令</p>\n  \n  <blockquote>\n    <p><code>1013  ls -lh 123/ <br>\n         1014  history  <br>\n        [root@localhost ~]# !1013 <br>\n        ls -lh 123/ <br>\n        总用量 0 <br>\n        -rw-r--r-- 1 root root 0 4月   2 15:00 321.txt <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n  \n  <p><code>!字符串</code> : 执行历史记录中最近一次以该字符串开头的命令</p>\n  \n  <blockquote>\n    <p><code>1015  ls -lh 123/ <br>\n         1016  history  <br>\n        [root@localhost ~]# !ls <br>\n        ls -lh 123/ <br>\n        总用量 0 <br>\n        -rw-r--r-- 1 root root 0 4月   2 15:00 321.txt <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n  \n  <p><code>!$</code> : 得到上一个命令的最后一个参数</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# echo \"123456789\" &gt;&gt; 123/321.txt  <br>\n        [root@localhost ~]# ls -lh 123/321.txt  <br>\n        -rw-r--r-- 1 root root 10 4月   3 13:56 123/321.txt <br>\n        [root@localhost ~]# cat !$ <br>\n        cat 123/321.txt <br>\n        123456789 <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"管道符的使用\"><strong>管道符的使用</strong></h3>\n\n<blockquote>\n  <p><code>|</code> : 将前一个命令的输出作为后一个指令的输入</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# cat /etc/passwd | wc -l <br>\n        48 <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"错误重定向错误追加重定向\"><strong>错误重定向，错误追加重定向</strong></h3>\n\n<blockquote>\n  <p><code>2&gt;</code>，<code>2&gt;&gt;</code></p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# ls a 2&gt; /tmp/1.err <br>\n        [root@localhost ~]#</code></p>\n    \n    <p>PS :该例子是将错误信息重定向到文件中。</p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"变量\"><strong>变量</strong></h3>\n\n<blockquote>\n  <p><a href=\"http://www.apelearn.com/study_v2/chapter13.html#id2\">http://www.apelearn.com/study_v2/chapter13.html#id2</a></p>\n  \n  <p>例：引号的用法</p>\n  \n  <blockquote>\n    <p><code>[root@localhost Desktop]# mydate=\"date is `date +%T`\" <br>\n        [root@localhost Desktop]# echo $mydate  <br>\n        date is 14:52:10 <br>\n        [root@localhost Desktop]# mydate=\'date is `date +%T`\' <br>\n        [root@localhost Desktop]# echo $mydate  <br>\n        date is `date +%T` <br>\n        [root@localhost Desktop]#</code></p>\n  </blockquote>\n  \n  <p>PS：单引号中的特殊字符全部失效，双引号不会取消特殊字符的作用。反引号可以得到命令运行结果。</p>\n  \n  <p>PS：用户变量可以加入到用户家目录下的<code>.bashrc</code>文件里面，全局变量可以加入到<code>/etc/profile</code>文件里面，然后用<code>source 文件名</code>来更新。</p>\n</blockquote>\n\n\n\n<h3 id=\"系统环境变量与个人环境变量的配置文件\"><strong>系统环境变量与个人环境变量的配置文件</strong></h3>\n\n<blockquote>\n  <p><code>/etc/profile</code> ： 这个文件预设了几个重要的变量，例如PATH, USER, LOGNAME, MAIL, INPUTRC, HOSTNAME, HISTSIZE, umask等等。</p>\n  \n  <p><code>/etc/bashrc</code> ： 这个文件主要预设umask以及PS1。这个PS1就是在敲命令时，前面那串字符了。</p>\n  \n  <p><code>[root@localhost ~]# echo $PS1</code></p>\n  \n  <p><code>[\\u@\\h \\W]\\$</code></p>\n  \n  <p><code>\\u</code> 就是用户， <code>\\h</code> 主机名， <code>\\W</code> 则是当前目录，<code>\\$</code> 就是那个 ‘#’ 了，如果是普通用户则显示为 ‘$’.</p>\n  \n  <p>除了两个系统级别的配置文件外，每个用户的主目录下还有几个这样的隐藏文件：</p>\n  \n  <p><code>.bash_profile</code> ：定义了用户的个人化路径与环境变量的文件名称。每个用户都可使用该文件输入专用于自己使用的shell信息,当用户登录时,该文件仅仅执行一次。</p>\n  \n  <p><code>.bashrc</code> ：该文件包含专用于你的shell的bash信息,当登录时以及每次打开新的shell时,该该文件被读取。例可以将用户自定义的alias或者自定义变量写到这个文件中。</p>\n  \n  <p><code>.bash_history</code> ：记录命令历史用的。</p>\n  \n  <p><code>.bash_logout</code> ：当退出shell时，会执行该文件。可以把一些清理的工作放到这个文件中。</p>\n</blockquote>\n\n\n\n<h3 id=\"linux-shell中的特殊符号\"><strong>Linux Shell中的特殊符号</strong></h3>\n\n<blockquote>\n  <p><a href=\"http://www.apelearn.com/study_v2/chapter13.html#linux-shell\">http://www.apelearn.com/study_v2/chapter13.html#linux-shell</a></p>\n</blockquote>\n\n\n\n<h3 id=\"cut命令\"><strong>cut命令</strong></h3>\n\n<blockquote>\n  <p><code>cut -d \'分隔符\' [-cf] n</code></p>\n  \n  <p>选项：</p>\n  \n  <blockquote>\n    <p><code>-d</code> : 分隔符选项</p>\n    \n    <p><code>-f</code> : 选择第几块</p>\n    \n    <blockquote>\n      <p><code>[root@localhost ~]# head -n3 /etc/passwd <br>\n          root:x:0:0:root:/root:/bin/bash <br>\n          bin:x:1:1:bin:/bin:/sbin/nologin <br>\n          daemon:x:2:2:daemon:/sbin:/sbin/nologin <br>\n          [root@localhost ~]# cat /etc/passwd | cut -d \':\' -f1 | head -n3 <br>\n          root <br>\n          bin <br>\n          daemon <br>\n          [root@localhost ~]# <br>\n          [root@localhost ~]# cat /etc/passwd | cut -d \':\' -f7 | head -n3 <br>\n          /bin/bash <br>\n          /sbin/nologin <br>\n          /sbin/nologin</code></p>\n    </blockquote>\n    \n    <p><code>-c</code> : 选择第几个字符</p>\n    \n    <blockquote>\n      <p><code>[root@localhost ~]# head -n3 /etc/passwd <br>\n          root:x:0:0:root:/root:/bin/bash <br>\n          bin:x:1:1:bin:/bin:/sbin/nologin <br>\n          daemon:x:2:2:daemon:/sbin:/sbin/nologin <br>\n          [root@localhost ~]# cat /etc/passwd | cut -c1 | head -n3 <br>\n          r <br>\n          b <br>\n          d <br>\n          [root@localhost ~]# cat /etc/passwd | cut -c1-5 | head -n3 <br>\n          root: <br>\n          bin:x <br>\n          daemo <br>\n          [root@localhost ~]#  <br>\n          [root@localhost ~]# cat /etc/passwd | cut -c1,2,5 | head -n3 <br>\n          ro: <br>\n          bix <br>\n          dao <br>\n          [root@localhost ~]#</code></p>\n      \n      <p>PS：-c 后面可以是1个数字n，也可以是一个区间n1-n2，还可以是多个数字n1,n2,n3。</p>\n    </blockquote>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"sort命令\"><strong>sort命令</strong></h3>\n\n<blockquote>\n  <p><code>sort [-t 分隔符] [-kn1,n2] [-nru]</code> 这里的n1 &lt; n2</p>\n  \n  <p>选项：</p>\n  \n  <blockquote>\n    <p><code>-t</code> 分隔符 ：作用跟cut的-d一个意思</p>\n    \n    <p><code>-n</code> ：使用纯数字排序</p>\n    \n    <p><code>-r</code>：反向排序</p>\n    \n    <p><code>-u</code> ：去重复</p>\n    \n    <p><code>-kn1,n2</code> ：由n1区间排序到n2区间，可以只写-kn1，即对n1字段排序</p>\n  </blockquote>\n  \n  <p>例：以<code>:</code>做分隔符的第三个块，字典序升序排序</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# head -n5 /etc/passwd | sort -t : -k3 <br>\n        root:x:0:0:root:/root:/bin/bash <br>\n        bin:x:1:1:bin:/bin:/sbin/nologin <br>\n        daemon:x:2:2:daemon:/sbin:/sbin/nologin <br>\n        adm:x:3:4:adm:/var/adm:/sbin/nologin <br>\n        lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin <br>\n        [root@localhost ~]#</code></p>\n    \n    <p>PS：如果选项加上<code>-n</code>,则是按数字大小排序</p>\n  </blockquote>\n  \n  <p>例：以<code>:</code>做分隔符的第三到五个块，字典序降序排序</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# head -n5 /etc/passwd | sort -t : -k3,5 -r <br>\n        lp:x:4:7:lp:/var/spool/lpd:/sbin/nologin <br>\n        adm:x:3:4:adm:/var/adm:/sbin/nologin <br>\n        daemon:x:2:2:daemon:/sbin:/sbin/nologin <br>\n        bin:x:1:1:bin:/bin:/sbin/nologin <br>\n        root:x:0:0:root:/root:/bin/bash <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"wc命令\"><strong>wc命令</strong></h3>\n\n<blockquote>\n  <p>用于统计文档的行数、字符数、词数，常用的选项为： <br>\n  &gt;</p>\n  \n  <blockquote>\n    <p><code>-l</code> ：统计行数</p>\n    \n    <p><code>-m</code> ：统计字符数</p>\n    \n    <p><code>-w</code> ：统计词数 </p>\n    \n    <p><code>[root@localhost ~]# wc -l test/123.txt <br>\n        337864 test/123.txt <br>\n        [root@localhost ~]# wc -m test/123.txt <br>\n        8090358 test/123.txt <br>\n        [root@localhost ~]# wc -w test/123.txt <br>\n        903417 test/123.txt <br>\n        [root@localhost ~]# wc test/123.txt <br>\n          337864   903417 10849826 test/123.txt <br>\n        [root@localhost ~]#</code></p>\n    \n    <p>PS：wc 不跟任何选项，直接跟文档，则会把行数、词数、byte数依次输出。</p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"uniq命令\"><strong>uniq命令</strong></h3>\n\n<blockquote>\n  <p>去重复的行</p>\n  \n  <p><code>-c</code> ：统计重复的行数，并把行数写在前面</p>\n  \n  <p>例：统计重复行数</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# cat test.txt  <br>\n        123 <br>\n        123 <br>\n        321 <br>\n        321 <br>\n        111 <br>\n        111 <br>\n        111 <br>\n        2222 <br>\n        333 <br>\n        456 <br>\n        [root@localhost ~]# sort -n test.txt | uniq -c <br>\n              3 111 <br>\n              2 123 <br>\n              2 321 <br>\n              1 333 <br>\n              1 456 <br>\n              1 2222 <br>\n        [root@localhost ~]#</code> <br>\n    PS：使用uniq 的前提是需要先给文件排序，否则不管用。</p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"tee命令\"><strong>tee命令</strong></h3>\n\n<blockquote>\n  <p>后跟文件名，类似与重定向 “&gt;”, 但是比重定向多了一个功能，在把文件写入后面所跟的文件中的同时，还显示在屏幕上。</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# echo \"aaaaaaaaaaaaaaaaaaaaaaaaaaa\" |tee testb.txt <br>\n        aaaaaaaaaaaaaaaaaaaaaaaaaaa <br>\n        [root@localhost ~]# cat testb.txt <br>\n        aaaaaaaaaaaaaaaaaaaaaaaaaaa</code></p>\n    \n    <p>PS：tee 常用语管道符 “|” 后。</p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"tr命令\"><strong>tr命令</strong></h3>\n\n<blockquote>\n  <p>替换字符</p>\n  \n  <p>选项：</p>\n  \n  <blockquote>\n    <p><code>-d</code> ：删除某个字符，<code>-d</code> 后面跟要删除的字符</p>\n    \n    <p><code>-s</code> ：把重复的字符去掉</p>\n  </blockquote>\n  \n  <p>例：小写变大写</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# head -n2 /etc/passwd |tr \'[a-z]\' \'[A-Z]\' <br>\n        ROOT:X:0:0:ROOT:/ROOT:/BIN/BASH <br>\n        BIN:X:1:1:BIN:/BIN:/SBIN/NOLOGIN <br>\n        [root@localhost ~]#</code></p>\n    \n    <p>PS：其局限性是只针对单个字符，一一对应替换。</p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"split命令\"><strong>split命令</strong></h3>\n\n<blockquote>\n  <p>切割文档</p>\n  \n  <p>选项：</p>\n  \n  <blockquote>\n    <p><code>-b</code> ：依据大小来分割文档，单位为byte</p>\n    \n    <blockquote>\n      <p><code>[root@localhost ~]# ls -lh test/123/ <br>\n          总用量 11M <br>\n          -rw-r--r-- 1 root root 11M 4月   3 17:37 123.txt <br>\n          drwxr-xr-x 2 root root   6 3月  31 17:03 321 <br>\n          [root@localhost ~]# split -b300000 test/123/123.txt  <br>\n          [root@localhost ~]# split -b3000000 test/123/123.txt test/123/new123 <br>\n          [root@localhost ~]# ls -lh test/123/ <br>\n          总用量 21M <br>\n          -rw-r--r-- 1 root root  11M 4月   3 17:37 123.txt <br>\n          drwxr-xr-x 2 root root    6 3月  31 17:03 321 <br>\n          -rw-r--r-- 1 root root 2.9M 4月   3 17:44 new123aa <br>\n          -rw-r--r-- 1 root root 2.9M 4月   3 17:44 new123ab <br>\n          -rw-r--r-- 1 root root 2.9M 4月   3 17:44 new123ac <br>\n          -rw-r--r-- 1 root root 1.8M 4月   3 17:44 new123ad <br>\n          [root@localhost ~]#</code></p>\n      \n      <p>PS：如果split不指定目标文件名，则会以xaa xab… 这样的文件名来存取切割后的文件。当然我们也可以指定目标文件名：</p>\n    </blockquote>\n    \n    <p><code>-l</code> ：依据行数来分割文档</p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"对比两个文件区别\"><strong>对比两个文件区别</strong></h3>\n\n<blockquote>\n  <p><code>diff test/123.txt test/123.txt</code></p>\n</blockquote>\n\n\n\n<h3 id=\"多条命令在一行执行\"><strong>多条命令在一行执行</strong></h3>\n\n<blockquote>\n  <p><code>;</code></p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# ls -d test*;  touch test111; ls -d test* <br>\n        test  test1  test2  test3  testa  testb.txt <br>\n        test  test1  test111  test2  test3  testa  testb.txt</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"命令放在后台执行\"><strong>命令放在后台执行</strong></h3>\n\n<blockquote>\n  <p><code>&amp;</code> : 如果想把一条命令放到后台执行的话，则需要加上这个符号。通常用于命令运行时间非常长的情况。</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# sleep 30 &amp; <br>\n        [1] 3260 <br>\n        [root@localhost ~]# jobs <br>\n        [1]+  Running                 sleep 30 &amp;</code></p>\n  </blockquote>\n</blockquote>\n\n<h3 id=\"表示连续字符中任意一个\"><strong>表示连续字符中任意一个</strong></h3>\n\n<blockquote>\n  <p><code>[]</code></p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# ls -d test* <br>\n        test  test1  test111  test2  test3  testa  testb.txt <br>\n        [root@localhost ~]# ls -d test[1-3] <br>\n        test1  test2  test3 <br>\n        [root@localhost ~]# ls -d test[1a3] <br>\n        test1  test3  testa <br>\n        [root@localhost ~]# ls -d test[0-9] <br>\n        test1  test2  test3 <br>\n        [root@localhost ~]# ls -d test[0-9a-z] <br>\n        test1  test2  test3  testa</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"与和或\"><strong>与和或</strong></h3>\n\n<blockquote>\n  <p><code>command1 ; command2</code></p>\n  \n  <p><code>command1 &amp;&amp; command2</code></p>\n  \n  <p><code>command1 || command2</code></p>\n  \n  <p>使用 “<code>;</code>” 时，不管command1是否执行成功都会执行command2；</p>\n  \n  <p>使用 “<code>&amp;&amp;</code>” 时，只有command1执行成功后，command2才会执行，否则command2不执行；</p>\n  \n  <p>使用 “<code>||</code>” 时，command1执行成功后command2 不执行，否则去执行command2，总之command1和command2总有一条命令会执行。</p>\n</blockquote>\n\n<p><strong><font size=\"6\">参考《跟阿铭学Linux》</font></strong></p>\n\n<hr></div>\n        <script type=\"text/javascript\">\n            $(function () {\n                $(\'pre.prettyprint code\').each(function () {\n                    var lines = $(this).text().split(\'\\n\').length;\n                    var $numbering = $(\'<ul/>\').addClass(\'pre-numbering\').hide();\n                    $(this).addClass(\'has-numbering\').parent().append($numbering);\n                    for (i = 1; i <= lines; i++) {\n                        $numbering.append($(\'<li/>\').text(i));\n                    };\n                    $numbering.fadeIn(1700);\n                });\n            });\n        </script>\n   \n', '2016-04-16 01:21:06', '0');
INSERT INTO `article` VALUES ('10022', '10003', 'Java网络编程案例--CS模型的简单实现', '\n        <div class=\"markdown_views\"><h2 id=\"java网络编程案例cs模型的简单实现\">Java网络编程案例–CS模型的简单实现</h2>\n\n<p><div class=\"toc\"><div class=\"toc\">\n<ul>\n<li><ul>\n<li><a href=\"#java网络编程案例cs模型的简单实现\">Java网络编程案例CS模型的简单实现</a><ul>\n<li><a href=\"#基本概述\">基本概述</a></li>\n<li><a href=\"#程序原理图\">程序原理图</a></li>\n<li><a href=\"#源代码\">源代码</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>\n</div>\n</p>\n\n\n\n<h3 id=\"基本概述\">基本概述</h3>\n\n<blockquote>\n  <p>该程序采用C/S模型，在服务器端简单的建立了一个多线程类，来实现对多个客户端传入的数据进行处理。在客&gt;   户端行处理类，对数据进行一次解析，再调用各个发送类进行处理。采用固定的命令格式，字符编码格式以及字&gt;   节流，实现了消息发送，二进制文件和文本文件传送，下载文件的功能。</p>\n</blockquote>\n\n<h3 id=\"程序原理图\">程序原理图</h3>\n\n<p><img src=\"http://img.blog.csdn.net/20160313213420572\" alt=\"Interaction\" title=\"\"></p>\n\n\n\n<h3 id=\"源代码\">源代码：</h3>\n\n<p><a href=\"http://download.csdn.net/detail/q547550831/9460313\">Java网络编程案例–CS模型的简单实现</a></p>\n\n<blockquote>\n  <p><strong>PS：运行环境为MyEclipse 2015,JDK为1.7.0 u_45</strong></p>\n</blockquote></div>\n        <script type=\"text/javascript\">\n            $(function () {\n                $(\'pre.prettyprint code\').each(function () {\n                    var lines = $(this).text().split(\'\\n\').length;\n                    var $numbering = $(\'<ul/>\').addClass(\'pre-numbering\').hide();\n                    $(this).addClass(\'has-numbering\').parent().append($numbering);\n                    for (i = 1; i <= lines; i++) {\n                        $numbering.append($(\'<li/>\').text(i));\n                    };\n                    $numbering.fadeIn(1700);\n                });\n            });\n        </script>\n   \n', '2016-04-16 01:21:06', '0');
INSERT INTO `article` VALUES ('10023', '10003', 'Hibernate关系映射', '\n\n<h1 style=\"text-align:center\"><span style=\"font-size:18px\">Hibernate<span style=\"font-family:宋体\">关系映射</span></span></h1>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p>&nbsp; &nbsp; Hibernate<span style=\"font-family:宋体\">关系映射其实就是将关系模型中实体之间的三种关系——多对一</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">一对多</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">、一对一、多对多映射成对象模型——</span><span style=\"font-family:Calibri\">Java</span><span style=\"font-family:宋体\">这样的面向对象语言中相应的属性之间的关系。</span></p>\n<p>&nbsp;</p>\n<h2>多对一<span style=\"font-family:Calibri\">(many-to-one)</span></h2>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;多对一表示的是多个属性&#20540;对应于一个属性&#20540;，可以参考员工和部门之间的关系。在<span style=\"font-family:Calibri\">Java</span><span style=\"font-family:宋体\">中就是员工中有部门这个属性。</span></p>\n<p>参考<span style=\"font-family:Calibri\">Domain</span><span style=\"font-family:宋体\">代码：</span></p>\n<pre code_snippet_id=\"1578909\" snippet_file_name=\"blog_20160215_1_8674216\" code_snippet_id=\"1578909\" snippet_file_name=\"blog_20160215_1_8674216\" name=\"code\" class=\"java\">class Employee{\n    private Integer id;\n    private String name;\n    private Department depart;\n}\n\nclass Department{\n    private Integer id;\n    private String name;\n}</pre><br>\n<h3>多对一关系映射图</h3>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160215150359984\" alt=\"\"></div>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h3>多对一的配置</h3>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;在多的那边，也就是<span style=\"font-family:Calibri\">Employee.hbm.xml</span><span style=\"font-family:宋体\">中，在</span><span style=\"font-family:Calibri\">class</span><span style=\"font-family:宋体\">元素下添加</span><span style=\"color:rgb(255,0,0)\">&lt;many-to-one&nbsp;name=</span><span style=\"color:rgb(255,0,0)\">”</span><span style=\"color:rgb(255,0,0)\">depart</span><span style=\"color:rgb(255,0,0)\">”</span><span style=\"color:rgb(255,0,0)\">&nbsp;column=</span><span style=\"color:rgb(255,0,0)\">”</span><span style=\"color:rgb(255,0,0)\">depart_id</span><span style=\"color:rgb(255,0,0)\">”</span><span style=\"color:rgb(255,0,0)\">&nbsp;/&gt;</span>。</p>\n<p>&nbsp;</p>\n<p>案例：</p>\n<pre code_snippet_id=\"1578909\" snippet_file_name=\"blog_20160215_2_5403376\" code_snippet_id=\"1578909\" snippet_file_name=\"blog_20160215_2_5403376\" name=\"code\" class=\"java\">    public static void add() {\n		//把对象模型-》关系模型\n		//当你获取一个session ,就会让hiberate去读取\n		//hibernate.cfg.xml,这就会加载对象映射文件，从而完成创建\n		Session session=null;\n		Transaction ts=null;\n		try {\n			\n			session=HibernateUtil.getThreadLocalSession();\n			ts=session.beginTransaction();\n			\n			//添加一个记录\n			Department d1=new Department();\n			d1.setName(&quot;财务部&quot;);\n			Employee e1=new Employee();\n			e1.setName(&quot;zs&quot;);\n			e1.setDepartment(d1);\n			Employee e2=new Employee();\n			e2.setName(&quot;ls&quot;);\n			e2.setDepartment(d1);\n			// 可以先保存员工在保存部门，不过会多产生一些SQL语句\n			session.save(d1);\n			session.save(e1);\n			session.save(e2);\n			\n			ts.commit();\n		} catch (Exception e) {\n			e.printStackTrace();\n			if(ts!=null){\n				ts.rollback();\n			}\n			// TODO: handle exception\n		}finally{\n			if(session!=null&amp;&amp;session.isOpen()){\n				session.close();\n			}\n		}\n	}</pre><br>\n<h2>一对多<span style=\"font-family:Calibri\">(one-to-many)</span></h2>\n<p>&nbsp; &nbsp; 一对多表示的是一个属性&#20540;对应于多个属性&#20540;，可以参考部门和员工之间的关系。在<span style=\"font-family:Calibri\">Java</span><span style=\"font-family:宋体\">中就是部门有员工这个集合属性。</span></p>\n<p>参考<span style=\"font-family:Calibri\">Domain</span><span style=\"font-family:宋体\">代码：</span></p>\n<pre code_snippet_id=\"1578909\" snippet_file_name=\"blog_20160215_3_6417132\" code_snippet_id=\"1578909\" snippet_file_name=\"blog_20160215_3_6417132\" name=\"code\" class=\"java\">class Department{\n    private Integer id;\n    private String name;\n    private Set&lt;Employee&gt; emps;\n}\n\nclass Employee{\n    private Integer id;\n    private String name;\n    private Department depart;\n}</pre><br>\n<h3>一对多关系映射图</h3>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160215150610315\" alt=\"\"></div>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h3>一对多的配置</h3>\n<pre code_snippet_id=\"1578909\" snippet_file_name=\"blog_20160215_4_6243191\" code_snippet_id=\"1578909\" snippet_file_name=\"blog_20160215_4_6243191\" name=\"code\" class=\"html\">&lt;set name=”emps”&gt;\n	&lt;key column=”depart_id”/&gt;\n	&lt;one-to-many class=”Employee”/&gt;\n&lt;/set&gt; </pre><br>\n<p>\n<p>案例：</p>\n<pre code_snippet_id=\"1578909\" snippet_file_name=\"blog_20160215_5_844998\" code_snippet_id=\"1578909\" snippet_file_name=\"blog_20160215_5_844998\" name=\"code\" class=\"java\">    public static void main(String[] args) {\n		// TODO Auto-generated method stub\n		//通过获取一个sesion,让hibernate框架运行(config-&gt;加载hibernate.cfg.xml)\n		Session s=null;\n		Transaction tx=null;\n		\n		try {\n			//我们使用基础模板来讲解.\n			s=HibernateUtil.getCurrentSession();\n			tx=s.beginTransaction();\n			\n			//查询所有1号部门的学生\n			//String hql=&quot;from Student where dept.id=1&quot;;\n			//方法2\n			\n		/*	Department department1=(Department) s.get(Department.class, 3);\n			//取出该部门的学生\n			Set&lt;Student&gt; stus= department1.getStus();\n			for(Student ss: stus){\n				System.out.println(ss.getName());\n			}*/\n			\n			//添加学生\n			Department department=new Department();\n			department.setName(&quot;业务部门&quot;);\n			\n			Student stu1=new Student();\n			stu1.setName(&quot;zs&quot;);\n			Student stu2=new Student();\n			stu2.setName(&quot;ls&quot;);\n			\n			Set sets=new HashSet&lt;Student&gt;();\n			sets.add(stu1);\n			sets.add(stu2);\n			department.setStus(sets);\n			// 要配置&lt;set name=&quot;stus&quot; cascade=&quot;save-update&quot;&gt;才能级联保存\n			s.save(department);\n			\n			tx.commit();\n			\n		} catch (Exception e) {\n			if(tx!=null){\n				tx.rollback();\n			}\n		}finally{\n			\n			if(s!=null &amp;&amp; s.isOpen()){\n				s.close();\n			}\n		}\n	}</pre>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：在</span><span style=\"font-family:Calibri\">Hibernate</span><span style=\"font-family:宋体\">开发中，一对多和多对一一般是并存的，也就是存在一对多关系就会存在多对一关系，反应在</span><span style=\"font-family:Calibri\">Java</span><span style=\"font-family:宋体\">代码中就是，一的那边有一个集合属性，里面放的是多的那边的对象，多的那边有一个一的对象属性。这样做的话，能够实得</span><span style=\"font-family:Calibri\">HQL</span><span style=\"font-family:宋体\">查询起来特别方便，但是有一个懒加载的问题，这个问题在之后的博客中会讲到。</span></span></p>\n<br>\n<p>\n<h2>一对一<span style=\"font-family:Calibri\">(one-to-one)</span></h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;一对一表示的是一个属性&#20540;对应于一个属性&#20540;，可以参考人和身份证编号之间的关系。在<span style=\"font-family:Calibri\">Java</span><span style=\"font-family:宋体\">中就是一个人只对应一个身份证编号。</span></p>\n<p>参考<span style=\"font-family:Calibri\">Domain</span><span style=\"font-family:宋体\">代码：</span></p>\n<pre code_snippet_id=\"1578909\" snippet_file_name=\"blog_20160215_6_3494956\" code_snippet_id=\"1578909\" snippet_file_name=\"blog_20160215_6_3494956\" name=\"code\" class=\"java\">class Person{\n    private Integer id;\n    private String name;\n    private IdCard idCard;\n}\n\nclass IdCard{\n    private Integer id;\n    private java.util.Date useful_life;\n    private Person person;\n}</pre><br>\n<h3>1<span style=\"font-family:宋体\">、基于主键的</span><span style=\"font-family:Calibri\">one-to-one</span></h3>\n<h4>基于主键的一对一关系映射图</h4>\n<h3 style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160414185705577\" alt=\"\"><br>\n</h3>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h4>基于主键的一对一关系原理图</h4>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160215150929953\" alt=\"\"></div>\n<p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p>&nbsp;</p>\n<h3>2<span style=\"font-family:宋体\">、基于外键的</span><span style=\"font-family:Calibri\">one-to-one</span></h3>\n<h4>基于外键的一对一关系映射图</h4>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160215151008913\" alt=\"\"></div>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h4>基于外键的一对一关系原理图</h4>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160215151049985\" alt=\"\"></div>\n<p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：唯一的多对一关系，就变成了一对一关系了，采用</span><span style=\"font-family:Calibri\">domain-&gt;DB</span><span style=\"font-family:宋体\">的开发方法时也会在</span><span style=\"font-family:Calibri\">Idcard</span><span style=\"font-family:宋体\">表中生成外键。</span></span></p>\n<br>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>多对多<span style=\"font-family:Calibri\">(many-to-many)</span></h2>\n<p>\n<p>&nbsp; &nbsp; 多对多表示的是多个属性&#20540;对应于多个属性&#20540;，可以参考学生和课程之间的关系。因为多对多关系在操作和性能上不太理想，所以多对多映射使用较少，而是将多对多关系转化为一对多关系和多对一关系。</p>\n<p>参考<span style=\"font-family:Calibri\">Domain</span><span style=\"font-family:宋体\">代码：</span></p>\n<pre code_snippet_id=\"1578909\" snippet_file_name=\"blog_20160215_7_6144915\" code_snippet_id=\"1578909\" snippet_file_name=\"blog_20160215_7_6144915\" name=\"code\" class=\"java\">class Student {\n	private BigDecimal sid;\n	private String sname;\n	private Set studcourses = new HashSet(0);\n}\n\npublic class Course {\n	private BigDecimal cid;\n	private String cname;\n	private Short ccredit;\n	private Set studcourses = new HashSet(0);\n}\n\npublic class Studcourse {\n	private BigDecimal stucourseid;\n	private BigDecimal grade;\n	private Student student;\n	private Course course;\n}</pre><br>\n<h3>多对多关系映射图</h3>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160215151320830\" alt=\"\" style=\"font-size:12px\"></div>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h3>多对多关系原理图</h3>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160215151446096\" alt=\"\" style=\"font-size:12px\"></div>\n<p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>级联操作</h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;级联<span style=\"font-family:Calibri\">(cascade)</span><span style=\"font-family:宋体\">操作用来说明当对主对象进行某种操作时是否对其关联的从对象也做类&#20284;的操作。例如想删除选课系统中某个学生的时候，同时也自动把他选的课程都删除掉。</span></p>\n<p>&nbsp;</p>\n<h3>常用的<span style=\"font-family:Calibri\">cascade</span><span style=\"font-family:宋体\">属性&#20540;</span></h3>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;none,all,save-update,delete,lock,refresh,evict,replicate,persist,merge,delete-orphan&nbsp;(one-to-many)&nbsp;<span style=\"font-family:宋体\">。</span></p>\n<p>&nbsp;</p>\n<h3>案例<span style=\"font-family:Calibri\">:</span><span style=\"font-family:宋体\">如何配置级联操作，当删除某个部门的时候，我们自动删除其学生</span></h3>\n<p>配置文件：</p>\n<pre code_snippet_id=\"1578909\" snippet_file_name=\"blog_20160215_8_2175964\" code_snippet_id=\"1578909\" snippet_file_name=\"blog_20160215_8_2175964\" name=\"code\" class=\"html\">&lt;!-- 配置one-to-many关系 cascade=&quot;delete&quot; 当删除该部门的时候(主对象，则级联删除它的学生从对象) --&gt;\n&lt;set name=&quot;stus&quot; cascade=&quot;delete&quot;&gt;\n    &lt;!-- 指定Student类对应的外键 --&gt;\n    &lt;key column=&quot;dept_id&quot; /&gt; \n    &lt;one-to-many class=&quot;Student&quot; /&gt;\n&lt;/set&gt;</pre><br>\n<p>java<span style=\"font-family:宋体\">代码</span>：</p>\n<pre code_snippet_id=\"1578909\" snippet_file_name=\"blog_20160215_9_6777770\" code_snippet_id=\"1578909\" snippet_file_name=\"blog_20160215_9_6777770\" name=\"code\" class=\"java\">//演示删除级联\n//获取到某个部分\nDepartment department=(Department) s.get(Department.class, 41);\ns.delete(department);</pre><br>\n<h3>案例：演示<span style=\"font-family:Calibri\">save-update</span>的级联操作</h3>\n<p>配置文件：</p>\n<pre code_snippet_id=\"1578909\" snippet_file_name=\"blog_20160215_10_5175369\" code_snippet_id=\"1578909\" snippet_file_name=\"blog_20160215_10_5175369\" name=\"code\" class=\"html\">&lt;set name=&quot;stus&quot; cascade=&quot;save-update&quot;&gt;\n    &lt;!-- 指定Student类对应的外键 --&gt;\n    &lt;key column=&quot;dept_id&quot; /&gt;\n    &lt;one-to-many class=&quot;Student&quot; /&gt;\n&lt;/set&gt;</pre><br>\n<p>Java代码：</p>\n<pre code_snippet_id=\"1578909\" snippet_file_name=\"blog_20160215_11_5317073\" code_snippet_id=\"1578909\" snippet_file_name=\"blog_20160215_11_5317073\" name=\"code\" class=\"java\">//添加学生\nDepartment department=new Department();\ndepartment.setName(&quot;业务部门3&quot;);\n			\nStudent stu1=new Student();\nstu1.setName(&quot;zs&quot;);\nStudent stu2=new Student();\nstu2.setName(&quot;小明6&quot;);\nSet&lt;Student&gt; students=new HashSet&lt;Student&gt;();\nstudents.add(stu1);\nstudents.add(stu2);\ndepartment.setStus(students);\ns.save(department);</pre>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：一般对</span><span style=\"font-family:Calibri\">many-to-one,many-to-many</span><span style=\"font-family:宋体\">不设置级联，在</span><span style=\"font-family:Calibri\">one-to-many(one</span><span style=\"font-family:宋体\">的一方</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">比如</span><span style=\"font-family:Calibri\">Employee-Department),</span><span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">one-to-one(</span><span style=\"font-family:宋体\">主对象一方</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">中设置级联。</span></span></p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<p>----------<span style=\"font-family:宋体\">参考《韩顺平</span><span style=\"font-family:Calibri\">.hibernate</span><span style=\"font-family:宋体\">从入门到精通》</span></p>\n<p>&nbsp;</p>\n   \n', '2016-04-16 01:21:06', '2');
INSERT INTO `article` VALUES ('10024', '10003', 'Linux学习笔记8', '\n        <div class=\"markdown_views\"><h1 id=\"linux学习笔记8\"><strong>Linux学习笔记8</strong></h1>\n\n<p><div class=\"toc\"><div class=\"toc\">\n<ul>\n<li><a href=\"#linux学习笔记8\">Linux学习笔记8</a><ul>\n<li><ul>\n<li><a href=\"#dhcp分配ip地址\">DHCP分配IP地址</a></li>\n<li><a href=\"#打印或控制内核环缓冲区\">打印或控制内核环缓冲区</a></li>\n<li><a href=\"#查看某个分区格式化时指定的块大小\">查看某个分区格式化时指定的块大小</a></li>\n<li><a href=\"#获取命令的安装包\">获取命令的安装包</a></li>\n<li><a href=\"#文本编辑工具vim\">文本编辑工具vim</a></li>\n<li><a href=\"#上一条命令的最后一个参数\">上一条命令的最后一个参数</a></li>\n<li><a href=\"#gzip压缩工具的使用\">gzip压缩工具的使用</a></li>\n<li><a href=\"#bzip2压缩工具\">bzip2压缩工具</a></li>\n<li><a href=\"#使用zip压缩工具常用\">使用zip压缩工具常用</a></li>\n<li><a href=\"#使用tar压缩工具常用\">使用tar压缩工具常用</a></li>\n<li><a href=\"#三种压缩工具压缩的简单比较\">三种压缩工具压缩的简单比较</a></li>\n<li><a href=\"#rpm介绍\">RPM介绍</a></li>\n<li><a href=\"#嵌套命令的简单使用\">嵌套命令的简单使用</a></li>\n<li><a href=\"#打印行数\">打印行数</a></li>\n<li><a href=\"#yum工具的使用\">yum工具的使用</a></li>\n<li><a href=\"#创建本地yum源\">创建本地yum源</a></li>\n<li><a href=\"#利用yum工具下载一个rpm包\">利用yum工具下载一个rpm包</a></li>\n<li><a href=\"#安装源码包\">安装源码包</a></li>\n<li><a href=\"#查看上一次命令是否执行成功\">查看上一次命令是否执行成功</a></li>\n<li><a href=\"#查看进程并kill相应进程\">查看进程并kill相应进程</a></li>\n<li><a href=\"#启动apache\">启动apache</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>\n</div>\n</p>\n\n\n\n<h3 id=\"dhcp分配ip地址\"><strong>DHCP分配IP地址</strong></h3>\n\n<blockquote>\n  <p>dhclient</p>\n</blockquote>\n\n\n\n<h3 id=\"打印或控制内核环缓冲区\"><strong>打印或控制内核环缓冲区</strong></h3>\n\n<blockquote>\n  <p>dmesg</p>\n</blockquote>\n\n\n\n<h3 id=\"查看某个分区格式化时指定的块大小\"><strong>查看某个分区格式化时指定的块大小</strong></h3>\n\n<blockquote>\n  <p>tune2fs -l 分区 | grep “Block size”</p>\n  \n  <blockquote>\n    <p><code>[root@bogon ~]# tune2fs -l /dev/sdb1 | grep \"Block size\" <br>\n        Block size:               1024 <br>\n        [root@bogon ~]#</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"获取命令的安装包\"><strong>获取命令的安装包</strong></h3>\n\n<blockquote>\n  <p>which 命令 <br>\n  rpm -qf 得到的路径</p>\n  \n  <blockquote>\n    <p><code>[root@bogon ~]# which vim <br>\n        /usr/bin/vim <br>\n        [root@bogon ~]# rpm -qf /usr/bin/vim <br>\n        vim-enhanced-7.4.160-1.el7.x86_64</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"文本编辑工具vim\"><strong>文本编辑工具vim</strong></h3>\n\n<blockquote>\n  <p><a href=\"http://www.apelearn.com/study_v2/chapter10.html#vim\">http://www.apelearn.com/study_v2/chapter10.html#vim</a></p>\n</blockquote>\n\n\n\n<h3 id=\"上一条命令的最后一个参数\"><strong>上一条命令的最后一个参数</strong></h3>\n\n<blockquote>\n  <p>!$</p>\n  \n  <p>例：</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# mkdir 123 <br>\n        [root@localhost ~]# ls -ld !$ <br>\n        ls -ld 123 <br>\n        drwxr-xr-x 2 root root 6 4月   2 14:08 123 <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n</blockquote>\n\n<hr>\n\n<hr>\n\n\n\n<h3 id=\"gzip压缩工具的使用\"><strong>gzip压缩工具的使用</strong></h3>\n\n<blockquote>\n  <p>gzip</p>\n  \n  <p>例：压缩文件</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# !ls <br>\n        ls -lh test/ <br>\n        总用量 11M <br>\n        -rw-r--r-- 1 root root 11M 3月  31 17:08 123.txt <br>\n        [root@localhost ~]# gzip test/123.txt <br>\n        [root@localhost ~]# !ls <br>\n        ls -lh test/ <br>\n        总用量 3.2M <br>\n        -rw-r--r-- 1 root root 3.2M 3月  31 17:08 123.txt.gz <br>\n        [root@localhost ~]#</code></p>\n    \n    <p>PS:可以看出压缩文件占用空间少了很多，该命令不能用于压缩目录。</p>\n  </blockquote>\n  \n  <p>例：解压文件</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# gzip -d test/123.txt.gz <br>\n        [root@localhost ~]# !ls <br>\n        ls -lh test/ <br>\n        总用量 11M <br>\n        -rw-r--r-- 1 root root 11M 3月  31 17:08 123.txt</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"bzip2压缩工具\"><strong>bzip2压缩工具</strong></h3>\n\n<blockquote>\n  <p>bzip2</p>\n  \n  <p>例：压缩文件</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# bzip2 test/123.txt <br>\n        [root@localhost ~]# !ls <br>\n        ls -lh test/ <br>\n        -rw-r--r-- 1 root root 283K 3月  31 17:08 123.txt.bz2 <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n  \n  <p>例：解压文件</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# bzip2 -d test/123.txt.bz2 <br>\n        [root@localhost ~]# !ls <br>\n        ls -lh test/ <br>\n        -rw-r--r-- 1 root root  11M 3月  31 17:08 123.txt <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n  \n  <p>PS：该命令不能用于压缩目录。</p>\n  \n  <p>bzcat 查看bzip2压缩文件</p>\n</blockquote>\n\n\n\n<h3 id=\"使用zip压缩工具常用\"><strong>使用zip压缩工具(常用)</strong></h3>\n\n<blockquote>\n  <p>zip</p>\n  \n  <p>例：压缩文件</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# zip test/123.txt.zip test/123.txt <br>\n          adding: test/123.txt (deflated 70%) <br>\n        [root@localhost ~]# !ls <br>\n        ls -lh test <br>\n        -rw-r--r-- 1 root root  11M 3月  31 17:08 123.txt <br>\n        -rw-r--r-- 1 root root 3.2M 4月   2 13:27 123.txt.zip <br>\n        [root@localhost ~]#</code></p>\n    \n    <p>PS：源文件是不会消失的。</p>\n  </blockquote>\n  \n  <p>例：解压文件</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# !ls <br>\n        ls -lh test <br>\n        -rw-r--r-- 1 root root  11M 3月  31 17:08 123.txt <br>\n        -rw-r--r-- 1 root root 3.2M 4月   2 13:27 123.txt.zip <br>\n        [root@localhost ~]# unzip test/123.txt.zip <br>\n        Archive:  test/123.txt.zip <br>\n        replace test/123.txt? [y]es, [n]o, [A]ll, [N]one, [r]ename: r <br>\n        new name: test/123new.txt <br>\n          inflating: test/123new.txt <br>\n        [root@localhost ~]# !ls <br>\n        ls -lh test <br>\n        总用量 31M <br>\n        -rw-r--r-- 1 root root  11M 3月  31 17:08 123new.txt <br>\n        -rw-r--r-- 1 root root  11M 3月  31 17:08 123.txt <br>\n        -rw-r--r-- 1 root root 3.2M 4月   2 13:27 123.txt.zip <br>\n        [root@localhost ~]#</code></p>\n    \n    <p>PS：解压时如果有同名文件，则会提示。</p>\n  </blockquote>\n  \n  <p>例：压缩目录及目录下文件</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# ls -lh <br>\n        drwxr-xr-x  4 root root  154 4月   2 13:49 test <br>\n        [root@localhost ~]# zip -r test.zip test/ <br>\n          adding: test/ (stored 0%) <br>\n          adding: test/123/ (stored 0%) <br>\n          adding: test/123/321/ (stored 0%) <br>\n          adding: test/321/ (stored 0%) <br>\n          adding: test/321/123/ (stored 0%) <br>\n          adding: test/321.txt (deflated 68%) <br>\n          adding: test/123.txt.gz.bak (deflated 3%) <br>\n          adding: test/123.txt.bz2.bak (deflated 8%) <br>\n          adding: test/123.txt (deflated 70%) <br>\n          adding: test/123.txt.zip (stored 0%) <br>\n          adding: test/123.txt.zip.bak (deflated 3%) <br>\n          adding: test/123new.txt (deflated 70%) <br>\n        [root@localhost ~]# !ls <br>\n        ls -lh <br>\n        drwxr-xr-x  4 root root  154 4月   2 13:49 test <br>\n        -rw-r--r--  1 root root  16M 4月   2 13:56 test.zip <br>\n        [root@localhost ~]#</code></p>\n    \n    <p>PS：如果不使用<strong>“-r”</strong>选项级联压缩，那么只会压缩test目录下的文件和二级目录，至于二级目录下的文件则不会压缩。还可以通过<strong><code>zip test.zip test/*</code></strong>这条命令来正则表达式匹配压缩文件。</p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"使用tar压缩工具常用\"><strong>使用tar压缩工具(常用)</strong></h3>\n\n<blockquote>\n  <p><a href=\"http://www.apelearn.com/study_v2/chapter11.html#tar\">http://www.apelearn.com/study_v2/chapter11.html#tar</a></p>\n  \n  <p>tar 本身为一个打包工具，可以把目录打包成一个文件，它的好处是它把所有文件整合成一个大文件整体，方便拷贝或者移动，也可以通过一些选项进行打包压缩。</p>\n  \n  <p>语法：<code>tar [-zjxcvfpP] filename tar</code> 命令有多个选项。</p>\n  \n  <blockquote>\n    <p>“-z” : 同时用gzip压缩</p>\n    \n    <p>“-j” : 同时用bzip2压缩</p>\n    \n    <p>“-x” : 解包或者解压缩</p>\n    \n    <p>“-t” : 查看tar包里面的文件</p>\n    \n    <p>“-c” : 建立一个tar包或者压缩文件包</p>\n    \n    <p>“-v” : 可视化</p>\n    \n    <p>“-f” : 后面跟文件名，压缩时跟 “-f 文件名”，意思是压缩后的文件名为filename, 解压时跟 “-f 文件名”，意思是解压filename. 请注意，如果是多个参数组合的情况下带有 “-f”，请把 “-f” 写到最后面。</p>\n    \n    <p>“-p” : 使用原文件的属性，压缩前什么属性压缩后还什么属性。（不常用）</p>\n    \n    <p>“-P” : 可以使用绝对路径。（不常用）</p>\n    \n    <p>–exclude filename : 在打包或者压缩时，不要将filename文件包括在内。（不常用）</p>\n  </blockquote>\n  \n  <p>PS：在解压时，一定要注意，tar的解压时不提示覆盖的，所以要考虑清楚能否解压路径是否有同名文件，同名文件能不能覆盖。</p>\n</blockquote>\n\n\n\n<h3 id=\"三种压缩工具压缩的简单比较\"><strong>三种压缩工具压缩的简单比较</strong></h3>\n\n<blockquote>\n  <p><code>[root@localhost ~]# !ls <br>\n      ls -lh test <br>\n      总用量 41M <br>\n      -rw-r--r-- 1 root root 283K 4月   2 14:38 123new.tar <br>\n      -rw-r--r-- 1 root root  11M 4月   2 14:36 123.tar <br>\n      -rw-r--r-- 1 root root  11M 3月  31 17:08 123.txt <br>\n      -rw-r--r-- 1 root root 283K 4月   2 13:04 123.txt.bz2.bak <br>\n      -rw-r--r-- 1 root root 3.2M 4月   2 13:01 123.txt.gz.bak <br>\n      -rw-r--r-- 1 root root 3.2M 4月   2 13:27 123.txt.zip.bak <br>\n      [root@localhost ~]#</code></p>\n  \n  <p>PS：<code>123new.tar</code>采用的是bzip2压缩方式，源文件为<code>123.txt</code>。</p>\n  \n  <p>PS：由此可以看出，gzip和zip压缩率大小是一样的，bzip2压缩率是最高的，但是耗费的cpu资源也是最大的，所以在进行压缩时，要权衡空间和CPU资源，选择合适的工具进行压缩。</p>\n</blockquote>\n\n<hr>\n\n<hr>\n\n\n\n<h3 id=\"rpm介绍\"><strong>RPM介绍</strong></h3>\n\n<blockquote>\n  <p><a href=\"http://www.apelearn.com/study_v2/chapter12.html#id1\">http://www.apelearn.com/study_v2/chapter12.html#id1</a></p>\n  \n  <p>安装选项：</p>\n  \n  <p>“-i” : 安装</p>\n  \n  <p>“-v” : 可视化</p>\n  \n  <p>“-h” : 显示安装进度</p>\n  \n  <p>升级选项：</p>\n  \n  <p>“-U” : 升级</p>\n  \n  <p>扩展选项：</p>\n  \n  <p>–force : 强制安装，即使覆盖属于其他包的文件也要安装</p>\n  \n  <p>–nodeps : 当要安装的rpm包依赖其他包时，即使其他包没有安装，也要安装这个包</p>\n  \n  <p>例：安装一个rpm</p>\n  \n  <blockquote>\n    <p><code>[root@localhost Packages]# rpm -ivh libjpeg-turbo-devel-1.2.90-5.el7.x86_64.rpm  <br>\n        准备中...                          ################################# [100%] <br>\n        正在升级/安装... <br>\n           1:libjpeg-turbo-devel-1.2.90-5.el7 ################################# [100%] <br>\n        [root@localhost Packages]#</code></p>\n  </blockquote>\n  \n  <p>例：升级一个rpm</p>\n  \n  <blockquote>\n    <p><code>[root@localhost Packages]# rpm -Uvh --nodeps xsane-0.999-9.el7.x86_64.rpm  <br>\n        准备中...                          ################################# [100%] <br>\n        正在升级/安装... <br>\n           1:xsane-0.999-9.el7                ################################# [100%] <br>\n        [root@localhost Packages]#</code></p>\n  </blockquote>\n  \n  <p>卸载选项：</p>\n  \n  <p>“-e” : 卸载</p>\n  \n  <p>例：卸载一个rpm包</p>\n  \n  <blockquote>\n    <p><code>[root@localhost Packages]# rpm -ev xsane <br>\n        软件包准备中... <br>\n        xsane-0.999-9.el7.x86_64 <br>\n        [root@localhost Packages]#</code></p>\n  </blockquote>\n  \n  <p>查询选项：</p>\n  \n  <p>“-q” : 查询一个包是否安装</p>\n  \n  <p>“-qa” : 查询/验证所有已安装的软件包</p>\n  \n  <p>“-qi” : 得到一个已安装的rpm的相关信息</p>\n  \n  <p>“-ql” : 列出软件包中的文件</p>\n  \n  <p>“-qf” : 列出某一个文件属于哪个rpm包</p>\n  \n  <p>PS：前面几个后面的参数都是包名，最后一个是文件的绝对路径。</p>\n</blockquote>\n\n\n\n<h3 id=\"嵌套命令的简单使用\"><strong>嵌套命令的简单使用</strong></h3>\n\n<blockquote>\n  <p>“(反引号)</p>\n  \n  <p>例：查询一个文件的rpm包名</p>\n  \n  <blockquote>\n    <p><code>[root@localhost Packages]# rpm -qf `which vim` <br>\n        vim-enhanced-7.4.160-1.el7.x86_64 <br>\n        [root@localhost Packages]#</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"打印行数\"><strong>打印行数</strong></h3>\n\n<blockquote>\n  <p>wc -l</p>\n  \n  <p>例：打印rpm包资源的行数</p>\n  \n  <blockquote>\n    <p><code>[root@localhost Packages]# yum list | wc -l <br>\n    19057 <br>\n    [root@localhost Packages]#</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"yum工具的使用\"><strong>yum工具的使用</strong></h3>\n\n<blockquote>\n  <p><a href=\"http://www.apelearn.com/study_v2/chapter12.html#yum\">http://www.apelearn.com/study_v2/chapter12.html#yum</a></p>\n</blockquote>\n\n<h3 id=\"创建本地yum源\"><strong>创建本地yum源</strong></h3>\n\n<blockquote>\n  <p>1.挂载光盘</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# mount /dev/cdrom /mnt</code></p>\n  </blockquote>\n  \n  <p>2.备份yum源。</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# cp -r /etc/yum.repos.d/ /etc/yum.repos.d.bak</code></p>\n  </blockquote>\n  \n  <p>3.删除/etc/yum.repos.d目录所有的repo文件</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# rm -rf /etc/yum.repos.d/*</code></p>\n  </blockquote>\n  \n  <p>4.创建新文件dvd.repo</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# vim /etc/yum.repos.d/dvd.repo</code></p>\n    \n    <p>加入以下内容：</p>\n    \n    <blockquote>\n      <p><code>[dvd] <br>\n          name=install dvd <br>\n          baseurl=file:///mnt <br>\n          enabled=1 <br>\n          gpgcheck=0</code></p>\n    </blockquote>\n  </blockquote>\n  \n  <p>5.刷新 repos 生成缓存</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# yum makecache</code></p>\n  </blockquote>\n  \n  <p>PS：然后就可以使用yum命令安装所需要的软件包了,如果需要恢复原先yum配置，则将备份文件恢复就行了。</p>\n</blockquote>\n\n\n\n<h3 id=\"利用yum工具下载一个rpm包\"><strong>利用yum工具下载一个rpm包</strong></h3>\n\n<blockquote>\n  <p>yum install 包名 -y –downloadonly –downloaddir=指定路径</p>\n  \n  <p>例：下载一个rpm包</p>\n  \n  <blockquote>\n    <p><code>[root@localhost Packages]# yum install -y yum-plugin-auto-update-debug-info.noarch --downloadonly --downloaddir=/usr/local/src/ <br>\n        已加载插件：fastestmirror, langpacks <br>\n        base                                                               | 3.6 kB  00:00:00 <br>\n        epel                                                               | 4.3 kB  00:00:00 <br>\n        extras                                                             | 3.4 kB  00:00:00 <br>\n        updates                                                            | 3.4 kB  00:00:00 <br>\n        Loading mirror speeds from cached hostfile <br>\n         * base: mirrors.aliyun.com <br>\n         * epel: mirrors.aliyun.com <br>\n         * extras: mirrors.pubyun.com <br>\n         * updates: mirrors.aliyun.com <br>\n        正在解决依赖关系 <br>\n        --&gt; 正在检查事务 <br>\n        ---&gt; 软件包 yum-plugin-auto-update-debug-info.noarch.0.1.1.31-34.el7 将被 安装 <br>\n        --&gt; 解决依赖关系完成 <br>\n        依赖关系解决 <br>\n        ========================================================================================== <br>\n         Package                                架构        版本                  源         大小 <br>\n        ========================================================================================== <br>\n        正在安装: <br>\n         yum-plugin-auto-update-debug-info      noarch      1.1.31-34.el7         base       24 k <br>\n        事务概要 <br>\n        ========================================================================================== <br>\n        安装  1 软件包 <br>\n        总下载量：24 k <br>\n        安装大小：25 k <br>\n        Background downloading packages, then exiting: <br>\n        yum-plugin-auto-update-debug-info-1.1.31-34.el7.noarch.rpm         |  24 kB  00:00:00 <br>\n        exiting because \"Download Only\" specified <br>\n        [root@localhost Packages]# ls -lh /root/test/yum-plugin-auto-update-debug-info-1.1.31-34.el7.noarch.rpm  <br>\n        -rw-r--r-- 1 root root 25K 11月 26 00:06 /root/test/yum-plugin-auto-update-debug-info-1.1.31-34.el7.noarch.rpm <br>\n        [root@localhost Packages]#</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"安装源码包\"><strong>安装源码包</strong></h3>\n\n<blockquote>\n  <p><a href=\"http://www.apelearn.com/study_v2/chapter12.html#id3\">http://www.apelearn.com/study_v2/chapter12.html#id3</a></p>\n</blockquote>\n\n\n\n<h3 id=\"查看上一次命令是否执行成功\"><strong>查看上一次命令是否执行成功</strong></h3>\n\n<blockquote>\n  <p>echo $? <br>\n  0表示成功，否则不成功。</p>\n</blockquote>\n\n<h3 id=\"查看进程并kill相应进程\"><strong>查看进程,并kill相应进程</strong></h3>\n\n<blockquote>\n  <p>ps aux</p>\n  \n  <p>kill -9 进程PID</p>\n</blockquote>\n\n\n\n<h3 id=\"启动apache\"><strong>启动apache</strong></h3>\n\n<blockquote>\n  <p>httpd安装主目录/bin/httpd -k start</p>\n  \n  <blockquote>\n    <p><code>/usr/local/apache2/bin/httpd -k start</code></p>\n  </blockquote>\n  \n  <p>PS：启动服务，再次启动可能出现<code>httpd: Could not reliably determine the server\'s fully qualified domain name, using localhost.localdomain for ServerName</code></p>\n  \n  <blockquote>\n    <p><code>ps aux | grep httpd</code></p>\n  </blockquote>\n  \n  <p>PS：查看是否有启动进程</p>\n  \n  <blockquote>\n    <p><code>netstat -lnp | grep 80</code></p>\n  </blockquote>\n  \n  <p>PS：查看网络端口号是否打开。</p>\n  \n  <p>PS：如果上述都是成功的，那么可以通过输入主机地址(主机名):80来访问Apache服务器。</p>\n  \n  <p>PS：可以使用<code>/usr/local/apache2/bin/httpd -k stop</code>停止服务。</p>\n</blockquote>\n\n<p><strong><font size=\"6\">参考《跟阿铭学Linux》</font></strong></p>\n\n<hr></div>\n        <script type=\"text/javascript\">\n            $(function () {\n                $(\'pre.prettyprint code\').each(function () {\n                    var lines = $(this).text().split(\'\\n\').length;\n                    var $numbering = $(\'<ul/>\').addClass(\'pre-numbering\').hide();\n                    $(this).addClass(\'has-numbering\').parent().append($numbering);\n                    for (i = 1; i <= lines; i++) {\n                        $numbering.append($(\'<li/>\').text(i));\n                    };\n                    $numbering.fadeIn(1700);\n                });\n            });\n        </script>\n   \n', '2016-04-16 01:21:06', '0');
INSERT INTO `article` VALUES ('10025', '10003', '从JVM的角度看JAVA代码--代码优化', '\n        <div class=\"markdown_views\"><h1 id=\"从jvm的角度看java代码代码优化\">从JVM的角度看JAVA代码–代码优化</h1>\n\n<p><div class=\"toc\">\n<ul>\n<li><a href=\"#从jvm的角度看java代码代码优化\">从JVM的角度看JAVA代码代码优化</a><ul>\n<li><a href=\"#片段一重复计算\">片段一重复计算</a></li>\n<li><a href=\"#片段二重复比较\">片段二重复比较</a></li>\n</ul>\n</li>\n</ul>\n</div>\n</p>\n\n<blockquote>\n  <p><strong>在JVM加载优化为class文件，运行class文件时，会有JIT(Just-In-Time)的介入，它会做进一步优化，这样就需要考虑是否可能被JIT优化。</strong></p>\n</blockquote>\n\n<h2 id=\"片段一重复计算\">片段一：重复计算</h2>\n\n\n\n<pre class=\"prettyprint\"><code class=\"language-java hljs \">        <span class=\"hljs-comment\">// 重复计算,这里b()被计算两次</span>\n        Object a = b() == <span class=\"hljs-keyword\">null</span> ? <span class=\"hljs-string\">\"\"</span> : b();\n        <span class=\"hljs-comment\">// 优化代码</span>\n        Object c = b();\n        Object a = c == <span class=\"hljs-keyword\">null</span> ? <span class=\"hljs-string\">\"\"</span> : c;</code></pre>\n\n\n\n<h2 id=\"片段二重复比较\">片段二：重复比较</h2>\n\n\n\n<pre class=\"prettyprint\"><code class=\"language-java hljs \">        <span class=\"hljs-comment\">// 重复查找，这里a被查找两次</span>\n        Map&lt;String, String&gt; map = <span class=\"hljs-keyword\">new</span> HashMap&lt;String, String&gt;();\n        map.put(<span class=\"hljs-string\">\"1\"</span>, <span class=\"hljs-string\">\"a\"</span>);\n        map.put(<span class=\"hljs-string\">\"2\"</span>, <span class=\"hljs-string\">\"b\"</span>);\n        String str = <span class=\"hljs-keyword\">null</span>;\n\n        <span class=\"hljs-keyword\">if</span>(map.containsKey(<span class=\"hljs-string\">\"1\"</span>)){\n            str = map.get(<span class=\"hljs-string\">\"1\"</span>);\n            <span class=\"hljs-comment\">// 执行操作</span>\n        }\n        <span class=\"hljs-comment\">// 优化代码</span>\n        str = map.get(<span class=\"hljs-string\">\"1\"</span>);\n        <span class=\"hljs-keyword\">if</span>(str != <span class=\"hljs-keyword\">null</span>) {\n            <span class=\"hljs-comment\">// 执行操作</span>\n        }</code></pre></div>\n        <script type=\"text/javascript\">\n            $(function () {\n                $(\'pre.prettyprint code\').each(function () {\n                    var lines = $(this).text().split(\'\\n\').length;\n                    var $numbering = $(\'<ul/>\').addClass(\'pre-numbering\').hide();\n                    $(this).addClass(\'has-numbering\').parent().append($numbering);\n                    for (i = 1; i <= lines; i++) {\n                        $numbering.append($(\'<li/>\').text(i));\n                    };\n                    $numbering.fadeIn(1700);\n                });\n            });\n        </script>\n   \n', '2016-04-16 01:21:06', '0');
INSERT INTO `article` VALUES ('10026', '10003', 'Hibernate开发和对象状态', '\n\n<h1 style=\"text-align:center\"><span style=\"font-size:18px\">Hibernate<span style=\"font-family:宋体\">开发和对象状态</span></span></h1>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>Hibernate<span style=\"font-family:宋体\">开发三种方式</span></h2>\n<p>\n<p>1<span style=\"font-family:宋体\">、由</span><span style=\"font-family:Calibri\">Domain&nbsp;object&nbsp;-&gt;&nbsp;mapping-&gt;db</span><span style=\"font-family:宋体\">。</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">官方推荐</span><span style=\"font-family:Calibri\">)</span></p>\n<p>2<span style=\"font-family:宋体\">、由</span><span style=\"font-family:Calibri\">DB</span><span style=\"font-family:宋体\">开始，用工具生成</span><span style=\"font-family:Calibri\">mapping</span><span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">Domain&nbsp;object</span><span style=\"font-family:宋体\">。</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">使用较多</span><span style=\"font-family:Calibri\">)</span></p>\n<p>3<span style=\"font-family:宋体\">、由映射文件开始。</span></p>\n<p>PS<span style=\"font-family:宋体\">：这里讲解第一种开发方式，第三种不讲，第二种在这篇博客：</span><a target=\"_blank\" href=\"http://blog.csdn.net/q547550831/article/details/50613010\"><span style=\"color:rgb(128,0,128)\">Hibernate<span style=\"font-family:宋体\">入门</span></span></a>有讲解。</p>\n<p>&nbsp;</p>\n<h3>由<span style=\"font-family:Calibri\">Domain&nbsp;object&nbsp;-&gt;&nbsp;mapping-&gt;db</span><span style=\"font-family:宋体\">。</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">官方推荐</span><span style=\"font-family:Calibri\">)</span></h3>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;由<span style=\"font-family:Calibri\">POJO</span><span style=\"font-family:宋体\">生成</span><span style=\"font-family:Calibri\">DB</span><span style=\"font-family:宋体\">的方式，是</span><span style=\"font-family:Calibri\">Hibernate</span><span style=\"font-family:宋体\">官方推荐的方式，一般习惯还是先由</span><span style=\"font-family:Calibri\">DB-&gt;POJO</span><span style=\"font-family:宋体\">，但这并不代表</span><span style=\"font-family:Calibri\">POJO-&gt;DB</span><span style=\"font-family:宋体\">这种方式不重要，这种方式才是更符合面向对象思想的方式。</span></p>\n<p>&nbsp;</p>\n<h3>详细步骤</h3>\n<p>1<span style=\"font-family:宋体\">、写出</span><span style=\"font-family:Calibri\">Domain</span><span style=\"font-family:宋体\">类属性，生成相应</span><span style=\"font-family:Calibri\">getter,setter</span><span style=\"font-family:宋体\">。</span></p>\n<p>2<span style=\"font-family:宋体\">、配置</span><span style=\"font-family:Calibri\">Xxx.hbm.xml</span><span style=\"font-family:宋体\">映射文件。</span></p>\n<p>3<span style=\"font-family:宋体\">、配置</span><span style=\"font-family:Calibri\">hibernate.cfg.xml</span><span style=\"font-family:宋体\">配置文件。</span></p>\n<p>&nbsp;</p>\n<h3>hibernate<span style=\"font-family:宋体\">配置文件的配置</span></h3>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;通过在<span style=\"font-family:Calibri\">&lt;session-factory&gt;</span><span style=\"font-family:宋体\">元素下添加</span>&lt;property&nbsp;name=&quot;hbm2ddl.auto&quot;&gt;配置&#20540;&lt;/property&gt;来实现自动从<span style=\"font-family:Calibri\">POJO</span><span style=\"font-family:宋体\">到数据库表。</span></p>\n<p>&nbsp;</p>\n<h3>4<span style=\"font-family:宋体\">种配置&#20540;详解</span></h3>\n<p>create&nbsp;:&nbsp;<span style=\"font-family:宋体\">当我们的应用程序加载</span><span style=\"font-family:Calibri\">hibernate.cfg.xml&nbsp;[&nbsp;new&nbsp;Configuration().config();&nbsp;]</span><span style=\"font-family:宋体\">就会根据映射文件，创建出数据库</span>，每次都会重新创建，原来表中的数据就没有。</p>\n<p>update:&nbsp;<span style=\"font-family:宋体\">如果数据库中没有该表，则创建，</span>如果数据库中表已经存在了，配置文件改变了（增加了一个属性，相当于再数据库中加了一个字段）那么<span style=\"font-family:Calibri\">update</span><span style=\"font-family:宋体\">会自动在数据库中加上这个字段。</span></p>\n<p>create-drop:&nbsp;<span style=\"font-family:宋体\">在显示关闭&nbsp;</span><span style=\"font-family:Calibri\">sessionFactory</span><span style=\"font-family:宋体\">时，将</span><span style=\"font-family:Calibri\">drop</span><span style=\"font-family:宋体\">掉数据库的</span><span style=\"font-family:Calibri\">schema</span>。</p>\n<p>validate:&nbsp;<span style=\"font-family:宋体\">每次插入数据之前都会验证数据库中的表结构和</span><span style=\"font-family:Calibri\">hbm</span><span style=\"font-family:宋体\">文件的结构是否一致</span>。</p>\n<p>&nbsp;</p>\n<p>这里有四个配置&#20540;<span style=\"font-family:Calibri\">:&nbsp;create&nbsp;,&nbsp;update&nbsp;,&nbsp;create-drop,&nbsp;validate</span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：一般情况下不推荐用</span><span style=\"font-family:Calibri\">create,create-drop</span><span style=\"font-family:宋体\">这两种配置&#20540;，因为它们会删掉之前的数据，如果有特殊需求，可以尝试使用，一般来说用得最多的是</span><span style=\"font-family:Calibri\">update</span><span style=\"font-family:宋体\">，因为它不会影响之前的数据。</span></span></p>\n<p>&nbsp;</p>\n<h3>domain<span style=\"font-family:宋体\">对象的细节</span></h3>\n<p>1、需要一个无参的构造函数<span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">用于</span><span style=\"font-family:Calibri\">hibernate</span><span style=\"font-family:宋体\">反射该对象</span><span style=\"font-family:Calibri\">)</span>。</p>\n<p>2、应当有一个无业务逻辑的主键属性。</p>\n<p>3、给每个属性提供<span style=\"font-family:Calibri\">get</span>、set方法。</p>\n<p>4、在<span style=\"font-family:Calibri\">domian</span><span style=\"font-family:宋体\">对象中的属性，只有配置到了对象映射文件后，才会被</span><span style=\"font-family:Calibri\">hiberante</span><span style=\"font-family:宋体\">管理</span>。</p>\n<p>5、属性一般是<span style=\"font-family:Calibri\">private</span><span style=\"font-family:宋体\">范围</span>。</p>\n<p>&nbsp;</p>\n<h3>对对象关系映射文件的说明</h3>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;对象关系文件中，有些属性是可以不配，<span style=\"font-family:Calibri\">hibernate</span><span style=\"font-family:宋体\">会采用默认机制，比如</span><span style=\"font-family:Calibri\">&lt;class&nbsp;</span>name=”?”&nbsp;table=”?”&nbsp;&gt;中table<span style=\"font-family:宋体\">&#20540;不配，则以类的小写做表名</span>，也就是<span style=\"font-family:Calibri\">name</span><span style=\"font-family:宋体\">属性的&#20540;小写形式。</span>&lt;property&nbsp;type=”?”&gt;中&nbsp;type<span style=\"font-family:宋体\">不配置，则</span><span style=\"font-family:Calibri\">hibernate</span><span style=\"font-family:宋体\">会根据类的属性类型，选择一个适当的类型</span>。这些可以参考官方文档。</p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<h2>对象状态</h2>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;Hibernate<span style=\"font-family:宋体\">中对象状态有三种，瞬时态</span><span style=\"font-family:Calibri\">(transient)</span><span style=\"font-family:宋体\">、持久态</span><span style=\"font-family:Calibri\">(persistent)</span><span style=\"font-family:宋体\">、托管</span><span style=\"font-family:Calibri\">/</span><span style=\"font-family:宋体\">游离态</span><span style=\"font-family:Calibri\">(detached)</span><span style=\"font-family:宋体\">。</span></p>\n<p>&nbsp;</p>\n<h3>对象状态原理图</h3>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160215014819802\" width=\"600\" height=\"445\" alt=\"\"></div>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h3>实际案例表示图</h3>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160215014909584\" alt=\"\"></div>\n<p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h3>对象状态详解</h3>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;瞬时<span style=\"font-family:Calibri\">(transient)</span><span style=\"font-family:宋体\">：数据库中没有数据与之对应，超过作用域会被</span><span style=\"font-family:Calibri\">JVM</span><span style=\"font-family:宋体\">垃圾回收器回收，一般是</span><span style=\"font-family:Calibri\">new</span><span style=\"font-family:宋体\">出来且与</span><span style=\"font-family:Calibri\">session</span><span style=\"font-family:宋体\">没有关联的对象。</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;持久<span style=\"font-family:Calibri\">(persistent)</span>：数据库中有数据与之对应，当前与<span style=\"font-family:Calibri\">session</span><span style=\"font-family:宋体\">有关联，并且相关联的</span><span style=\"font-family:Calibri\">session</span><span style=\"font-family:宋体\">没有关闭，事务没有提交；持久对象状态发生改变，在事务提交时会影响到数据库</span><span style=\"font-family:Calibri\">(hibernate</span><span style=\"font-family:宋体\">能检测到</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">。</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;脱管<span style=\"font-family:Calibri\">/</span><span style=\"font-family:宋体\">游离</span><span style=\"font-family:Calibri\">(detached)</span><span style=\"font-family:宋体\">：数据库中有数据与之对应，但当前没有</span><span style=\"font-family:Calibri\">session</span><span style=\"font-family:宋体\">与之关联；脱管对象状态发生改变，</span><span style=\"font-family:Calibri\">hibernate</span><span style=\"font-family:宋体\">不能检测到。&nbsp;</span></p>\n<p>&nbsp;</p>\n<p>注意事项：</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;1<span style=\"font-family:宋体\">、</span>脱管状态的实例可以通过调用<span style=\"font-family:Calibri\">save()</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">persist()</span><span style=\"font-family:宋体\">或者</span><span style=\"font-family:Calibri\">saveOrUpdate()</span><span style=\"font-family:宋体\">方法进行持久化。&nbsp;</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;2<span style=\"font-family:宋体\">、</span>持久化实例可以通过调用&nbsp;<span style=\"font-family:Calibri\">delete()</span><span style=\"font-family:宋体\">变成脱管状态。通过</span><span style=\"font-family:Calibri\">get()</span><span style=\"font-family:宋体\">或</span><span style=\"font-family:Calibri\">load()</span><span style=\"font-family:宋体\">方法得到的实例都是持久化状态的。&nbsp;</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;3<span style=\"font-family:宋体\">、</span>脱管状态的实例可以通过调用&nbsp;<span style=\"font-family:Calibri\">update()</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">saveOrUpdate()</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">lock()</span><span style=\"font-family:宋体\">或者</span><span style=\"font-family:Calibri\">replicate()</span><span style=\"font-family:宋体\">进行持久化。&nbsp;</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;4<span style=\"font-family:宋体\">、</span>游离或者自由状态下的实例可以通过调用<span style=\"font-family:Calibri\">merge()</span><span style=\"font-family:宋体\">方法成为一个新的持久化实例。&nbsp;</span></p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<p>----------<span style=\"font-family:宋体\">参考《韩顺平</span><span style=\"font-family:Calibri\">.hibernate</span><span style=\"font-family:宋体\">从入门到精通》</span></p>\n<p>&nbsp;</p>\n   \n', '2016-04-16 01:21:06', '2');
INSERT INTO `article` VALUES ('10027', '10003', 'Linux学习笔记7', '\n        <div class=\"markdown_views\"><h1 id=\"linux学习笔记7\"><strong>Linux学习笔记7</strong></h1>\n\n<p><div class=\"toc\"><div class=\"toc\">\n<ul>\n<li><a href=\"#linux学习笔记7\">Linux学习笔记7</a><ul>\n<li><ul>\n<li><a href=\"#创建用户更改的文件\">创建用户更改的文件</a></li>\n<li><a href=\"#查看磁盘或目录的容量\">查看磁盘或目录的容量</a></li>\n<li><a href=\"#显示当前系统所有分区及磁盘\">显示当前系统所有分区及磁盘</a></li>\n<li><a href=\"#virtualbox下扩展虚拟机磁盘容量\">Virtualbox下扩展虚拟机磁盘容量</a></li>\n<li><a href=\"#使用fdisk进行分区\">使用fdisk进行分区</a></li>\n<li><a href=\"#格式化磁盘分区\">格式化磁盘分区</a></li>\n<li><a href=\"#挂载卸载磁盘\">挂载卸载磁盘</a></li>\n<li><a href=\"#建立一个swap文件增加虚拟内存\">建立一个swap文件增加虚拟内存</a></li>\n<li><a href=\"#显示内存信息\">显示内存信息</a></li>\n<li><a href=\"#硬链接导致的无限循环\">硬链接导致的无限循环</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>\n</div>\n</p>\n\n\n\n<h3 id=\"创建用户更改的文件\"><strong>创建用户更改的文件</strong></h3>\n\n<blockquote>\n  <p><code>/etc/shadow <br>\n      /etc/passwd <br>\n      /etc/group <br>\n      /etc/gshadow</code></p>\n  \n  <p>以及从/etc/skel/复制文件到该用户的家目录下。</p>\n</blockquote>\n\n\n\n<h3 id=\"查看磁盘或目录的容量\"><strong>查看磁盘或目录的容量</strong></h3>\n\n<blockquote>\n  <p>df</p>\n  \n  <blockquote>\n    <p>例：以M为单位(默认是K)查看已挂载磁盘的信息</p>\n    \n    <blockquote>\n      <p><code>[root@localhost ~]# df -m <br>\n          文件系统        1M-块  已用  可用   已用% 挂载点 <br>\n          /dev/sda3      42487  4161 38326   10% / <br>\n          devtmpfs        1887     0  1887    0% /dev <br>\n          tmpfs           1896     1  1896    1% /dev/shm <br>\n          tmpfs           1896     9  1888    1% /run <br>\n          tmpfs           1896     0  1896    0% /sys/fs/cgroup <br>\n          /dev/sda1        477   142   306   32% /boot <br>\n          tmpfs            380     1   380    1% /run/user/1000 <br>\n          [root@localhost ~]#</code></p>\n    </blockquote>\n    \n    <p>“df” 常用选项有 “-i” “-h” “-k” “-m”等</p>\n    \n    <p>“-i” 查看inodes使用状况</p>\n    \n    <blockquote>\n      <p><code>[root@localhost ~]# df -i <br>\n          文件系统          Inode   已用(I)  可用(I) 已用(I)% 挂载点 <br>\n          /dev/sda3      43527168  142008 43385160       1% / <br>\n          devtmpfs         482867     344   482523       1% /dev <br>\n          tmpfs            485313       9   485304       1% /dev/shm <br>\n          tmpfs            485313     461   484852       1% /run <br>\n          tmpfs            485313      13   485300       1% /sys/fs/cgroup <br>\n          /dev/sda1        128016     346   127670       1% /boot <br>\n          tmpfs            485313      33   485280       1% /run/user/1000 <br>\n          [root@localhost ~]#</code></p>\n    </blockquote>\n    \n    <p><strong>“-h” 使用合适的单位显示，例如 ‘G’(常用)</strong></p>\n    \n    <blockquote>\n      <p><code>[root@localhost ~]# df -h <br>\n          文件系统          容量  已用  可用  已用% 挂载点 <br>\n          /dev/sda3        42G  4.1G   38G   10% / <br>\n          devtmpfs        1.9G     0  1.9G    0% /dev <br>\n          tmpfs           1.9G  152K  1.9G    1% /dev/shm <br>\n          tmpfs           1.9G  8.8M  1.9G    1% /run <br>\n          tmpfs           1.9G     0  1.9G    0% /sys/fs/cgroup <br>\n          /dev/sda1       477M  142M  306M   32% /boot <br>\n          tmpfs           380M   28K  380M    1% /run/user/1000 <br>\n          [root@localhost ~]#</code></p>\n    </blockquote>\n    \n    <p>“-k”, “-m” 分别以K, M 为单位显示</p>\n    \n    <blockquote>\n      <p><code>[root@localhost ~]# df -k <br>\n          文件系统          1K-块    已用     可用    已用% 挂载点 <br>\n          /dev/sda3      43505916 4260408 39245508   10% / <br>\n          devtmpfs        1931468       0  1931468    0% /dev <br>\n          tmpfs           1941252     152  1941100    1% /dev/shm <br>\n          tmpfs           1941252    8912  1932340    1% /run <br>\n          tmpfs           1941252       0  1941252    0% /sys/fs/cgroup <br>\n          /dev/sda1        487634  144817   313121   32% /boot <br>\n          tmpfs            388252      28   388224    1% /run/user/1000 <br>\n          [root@localhost ~]# df -m <br>\n          文件系统        1M-块  已用  可用   已用% 挂载点 <br>\n          /dev/sda3      42487  4161 38326   10% / <br>\n          devtmpfs        1887     0  1887    0% /dev <br>\n          tmpfs           1896     1  1896    1% /dev/shm <br>\n          tmpfs           1896     9  1888    1% /run <br>\n          tmpfs           1896     0  1896    0% /sys/fs/cgroup <br>\n          /dev/sda1        477   142   306   32% /boot <br>\n          tmpfs            380     1   380    1% /run/user/1000 <br>\n          [root@localhost ~]#</code></p>\n    </blockquote>\n  </blockquote>\n  \n  <p>du</p>\n  \n  <blockquote>\n    <p>例：查看目录和文件所占的空间大小</p>\n    \n    <blockquote>\n      <p><code>[root@localhost ~]# du -ah test/ <br>\n          0       test/123/321 <br>\n          0       test/123 <br>\n          0       test/321/123 <br>\n          0       test/321 <br>\n          11M     test/123.txt <br>\n          44K     test/321.txt <br>\n          11M     test/ <br>\n          [root@localhost ~]#</code></p>\n    </blockquote>\n    \n    <p>选项：</p>\n    \n    <blockquote>\n      <p>-a 列出全部文件和目录的大小</p>\n      \n      <p>-b 以“bytes”为单位输出</p>\n      \n      <p>-k 以“KB”为单位输出(默认输出就是KB)</p>\n      \n      <p>-m 以“MB”为单位输出</p>\n      \n      <p>-h 系统自动调节单位</p>\n      \n      <p>-c 最后加总和</p>\n      \n      <p>例：查看目录和文件所占空间大小，含总和</p>\n      \n      <blockquote>\n        <p><code>[root@localhost ~]# du -ahc test/ <br>\n            0       test/123/321 <br>\n            0       test/123 <br>\n            0       test/321/123 <br>\n            0       test/321 <br>\n            11M     test/123.txt <br>\n            44K     test/321.txt <br>\n            11M     test/ <br>\n            11M     总用量</code></p>\n      </blockquote>\n      \n      <p><strong>-s 只列出总和(常用)</strong></p>\n    </blockquote>\n    \n    <p>综合案例：统计根目录下所有文件所占空间的总量</p>\n    \n    <blockquote>\n      <p><code>[root@localhost ~]# du -sh /* <br>\n          0       /bin <br>\n          140M    /boot <br>\n          0       /dev <br>\n          30M     /etc <br>\n          24M     /home <br>\n          0       /lib <br>\n          0       /lib64 <br>\n          0       /media <br>\n          0       /mnt <br>\n          17M     /opt <br>\n          du: 无法访问\"/proc/3706/task/3706/fd/4\": 没有那个文件或目录 <br>\n          du: 无法访问\"/proc/3706/task/3706/fdinfo/4\": 没有那个文件或目录 <br>\n          du: 无法访问\"/proc/3706/fd/4\": 没有那个文件或目录 <br>\n          du: 无法访问\"/proc/3706/fdinfo/4\": 没有那个文件或目录 <br>\n          0       /proc <br>\n          15M     /root <br>\n          8.7M    /run <br>\n          0       /sbin <br>\n          0       /srv <br>\n          0       /sys <br>\n          1.6M    /tmp <br>\n          3.4G    /usr <br>\n          571M    /var <br>\n          [root@localhost ~]#</code></p>\n    </blockquote>\n  </blockquote>\n</blockquote>\n\n<h3 id=\"显示当前系统所有分区及磁盘\"><strong>显示当前系统所有分区及磁盘</strong></h3>\n\n<blockquote>\n  <p>fdisk -l</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# fdisk -l <br>\n        磁盘 /dev/sda：53.7 GB, 53687091200 字节，104857600 个扇区 <br>\n        Units = 扇区 of 1 * 512 = 512 bytes <br>\n        扇区大小(逻辑/物理)：512 字节 / 512 字节 <br>\n        I/O 大小(最小/最佳)：512 字节 / 512 字节 <br>\n        磁盘标签类型：dos <br>\n        磁盘标识符：0x000a85aa <br>\n           设备 Boot      Start         End      Blocks   Id  System <br>\n        /dev/sda1   *        2048     1026047      512000   83  Linux <br>\n        /dev/sda2         1026048    17803263     8388608   82  Linux swap / Solaris <br>\n        /dev/sda3        17803264   104857599    43527168   83  Linux <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"virtualbox下扩展虚拟机磁盘容量\"><strong>Virtualbox下扩展虚拟机磁盘容量</strong></h3>\n\n<blockquote>\n  <p><a href=\"http://jingyan.baidu.com/article/425e69e6aeede8be14fc1675.html\">http://jingyan.baidu.com/article/425e69e6aeede8be14fc1675.html</a></p>\n  \n  <p>PS：注意，应该在存储中的控制器：SATA下增加磁盘。</p>\n</blockquote>\n\n\n\n<h3 id=\"使用fdisk进行分区\"><strong>使用fdisk进行分区</strong></h3>\n\n<blockquote>\n  <p><a href=\"http://www.apelearn.com/study_v2/chapter9.html#id2\">http://www.apelearn.com/study_v2/chapter9.html#id2</a></p>\n</blockquote>\n\n\n\n<h3 id=\"格式化磁盘分区\"><strong>格式化磁盘分区</strong></h3>\n\n<blockquote>\n  <p><a href=\"http://www.apelearn.com/study_v2/chapter9.html#id5\">http://www.apelearn.com/study_v2/chapter9.html#id5</a></p>\n</blockquote>\n\n\n\n<h3 id=\"挂载卸载磁盘\"><strong>挂载/卸载磁盘</strong></h3>\n\n<blockquote>\n  <p><a href=\"http://www.apelearn.com/study_v2/chapter9.html#id6\">http://www.apelearn.com/study_v2/chapter9.html#id6</a></p>\n</blockquote>\n\n\n\n<h3 id=\"建立一个swap文件增加虚拟内存\"><strong>建立一个swap文件增加虚拟内存</strong></h3>\n\n<blockquote>\n  <p><a href=\"http://www.apelearn.com/study_v2/chapter9.html#swap\">http://www.apelearn.com/study_v2/chapter9.html#swap</a></p>\n</blockquote>\n\n\n\n<h3 id=\"显示内存信息\"><strong>显示内存信息</strong></h3>\n\n<blockquote>\n  <p>free -h</p>\n  \n  <p>例：内存和swap使用情况</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# free -h <br>\n                            total        used        free      shared  buff/cache   available <br>\n        Mem:           3.7G        145M        116M        8.7M        3.4G        3.3G <br>\n        Swap:           11G          0B         11G <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"硬链接导致的无限循环\"><strong>硬链接导致的无限循环</strong></h3>\n\n<blockquote>\n  <p><center> <img src=\"http://img.blog.csdn.net/20160331220647227\" alt=\"硬链接无限循环图\" title=\"\"></center><p>\n  \n  <p>上图中，有椭圆背景的代表的都是相同的结点。都应该拥有相同的inode。但是，可以从上图看出3硬链接123后，致使形成<strong>root-&gt;321-&gt;3-&gt;root</strong>这样的环路。root，321两个目录是不同的目录，拥有不同的inode，故此产生矛盾。</p>\n</blockquote>\n\n<p><strong><font size=\"6\">参考《跟阿铭学Linux》</font></strong></p>\n\n<hr></div>\n        <script type=\"text/javascript\">\n            $(function () {\n                $(\'pre.prettyprint code\').each(function () {\n                    var lines = $(this).text().split(\'\\n\').length;\n                    var $numbering = $(\'<ul/>\').addClass(\'pre-numbering\').hide();\n                    $(this).addClass(\'has-numbering\').parent().append($numbering);\n                    for (i = 1; i <= lines; i++) {\n                        $numbering.append($(\'<li/>\').text(i));\n                    };\n                    $numbering.fadeIn(1700);\n                });\n            });\n        </script>\n   \n', '2016-04-16 01:21:07', '0');
INSERT INTO `article` VALUES ('10028', '10003', '从JVM的角度看JAVA代码1', '\n\n<h1 style=\"text-align:center\"><span style=\"font-size:18px\">从<span style=\"font-family:Calibri\">JVM</span><span style=\"font-family:宋体\">的角度看</span><span style=\"font-family:Calibri\">JAVA</span><span style=\"font-family:宋体\">代码</span>1</span></h1>\n<p><span style=\"font-size:18px\"></span></p>\n<p>&nbsp; &nbsp; 从<span style=\"font-family:Calibri\">JVM</span><span style=\"font-family:宋体\">指令的角度来分析</span><span style=\"font-family:Calibri\">&#43;&#43;,--</span><span style=\"font-family:宋体\">问题可以分析的非常透彻，这里给出两个案例。通过这两个案例就能知道</span><span style=\"font-family:Calibri\">JAVA</span><span style=\"font-family:宋体\">中前</span><span style=\"font-family:Calibri\">&#43;&#43;</span><span style=\"font-family:宋体\">和后</span><span style=\"font-family:Calibri\">&#43;&#43;</span><span style=\"font-family:宋体\">的原理了，同时也可以推论出</span><span style=\"font-family:Calibri\">--</span><span style=\"font-family:宋体\">的情况。</span></p>\n<br>\n<p><span style=\"font-size:18px\"></span></p>\n<pre code_snippet_id=\"1606749\" snippet_file_name=\"blog_20160311_1_7885931\" code_snippet_id=\"1606749\" snippet_file_name=\"blog_20160311_1_7885931\" name=\"code\" class=\"java\">public class JavaSampleAppend {\n	public static void main(String []args) {\n		int i = 1;\n		i = (i++) + (++i);\n		System.out.println(i);\n	}\n}\n\n/*\n  0:   iconst_1		// 将int类型的常量值1推送到栈顶 1\n  1:   istore_1		// 将栈顶抛出的数据赋值给第2个slot所在的int类型的本地变量中 1\n  2:   iload_1		// 将第2个slot所在的int类型本地变量推送到栈顶 1\n  3:   iinc    1, 1 // 将第2个slot所在的int类型的本地变量自加一	2\n  6:   iinc    1, 1 // 将第2个slot所在的int类型的本地变量自加一	3\n  9:   iload_1		// 将第2个slot所在的int类型本地变量推送到栈顶 3\n  10:  iadd			// 将栈顶变量和第二个变量相加，然后将结果放回栈顶 4\n  11:  istore_1		// 将栈顶抛出的数据赋值给第2个slot所在的int类型的本地变量中 4\n					// 也就是说输出为4\n  12:  getstatic       #2; //Field java/lang/System.out:Ljava/io/PrintStream;\n  15:  iload_1\n  16:  invokevirtual   #3; //Method java/io/PrintStream.println:(I)V\n  19:  return\n*/</pre><br>\n<br>\n<p>\n<p><span style=\"font-size:18px\"></span></p>\n<pre code_snippet_id=\"1606749\" snippet_file_name=\"blog_20160311_2_1331495\" code_snippet_id=\"1606749\" snippet_file_name=\"blog_20160311_2_1331495\" name=\"code\" class=\"java\">public class JavaSampleAppend {\n	public static void main(String []args) {\n		int i = 1;\n		i = (i++) + (++i) + (i++);\n		System.out.println(i);\n	}\n}\n/*\n0:   iconst_1 		// 将int类型的常量值1推送到栈顶 1\n1:   istore_1 		// 将栈顶抛出的数据赋值给第2个slot所在的int类型的本地变量中 1\n2:   iload_1  		// 将第2个slot所在的int类型本地变量推送到栈顶 1\n3:   iinc    1, 1 	// 将第2个slot所在的int类型的本地变量自加一	2\n6:   iinc    1, 1 	// 将第2个slot所在的int类型的本地变量自加一	3\n9:   iload_1		// 将第2个slot所在的int类型本地变量推送到栈顶 3\n10:  iadd 			// 将栈顶变量和第二个变量相加，然后将结果放回栈顶 4\n11:  iload_1 		// 将第2个slot所在的int类型本地变量推送到栈顶 3\n12:  iinc    1, 1 	// 将第2个slot所在的int类型的本地变量自加一	4\n15:  iadd			// 将栈顶变量和第二个变量相加，然后将结果放回栈顶 7\n16:  istore_1		// 将栈顶抛出的数据赋值给第2个slot所在的int类型的本地变量中 7\n					// 也就是说输出为7\n17:  getstatic       #2; //Field java/lang/System.out:Ljava/io/PrintStream;\n20:  iload_1\n21:  invokevirtual   #3; //Method java/io/PrintStream.println:(I)V\n24:  return\n*/</pre><br>\n<p><br>\n</p>\n   \n', '2016-04-16 01:21:07', '0');
INSERT INTO `article` VALUES ('10029', '10003', 'Hibernate-HQL基础', '\n\n<h1 style=\"text-align:center\"><span style=\"font-size:18px\">Hibernate-HQL<span style=\"font-family:宋体\">基础</span></span></h1>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>基本概述</h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;Criteria<span style=\"font-family:宋体\">查询对查询条件进行了面向对象封装，符合编程人员的思维方式，不过</span><span style=\"font-family:Calibri\">HQL(Hibernate&nbsp;Query&nbsp;Language)</span><span style=\"font-family:宋体\">查询提供了更加丰富的和灵活的查询特性，因此</span><span style=\"font-family:Calibri\">Hibernate</span><span style=\"font-family:宋体\">将</span><span style=\"font-family:Calibri\">HQL</span><span style=\"font-family:宋体\">查询方式立为官方推荐的标准查询方式，</span><span style=\"font-family:Calibri\">HQL</span><span style=\"font-family:宋体\">查询在涵盖</span><span style=\"font-family:Calibri\">Criteria</span><span style=\"font-family:宋体\">查询的所有功能的前提下，提供了类&#20284;标准</span><span style=\"font-family:Calibri\">SQL</span><span style=\"font-family:宋体\">语句的查询方式，同时也提供了更加面向对象的封装。</span></p>\n<p>&nbsp;</p>\n<h2>HQL<span style=\"font-family:宋体\">详解</span></h2>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;这里以学生选课系统的表为例，讲解<span style=\"font-family:Calibri\">HQL</span><span style=\"font-family:宋体\">。现提供三张表的</span><span style=\"font-family:Calibri\">SQL</span><span style=\"font-family:宋体\">语句以及映射图。</span></p>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160213235937772\" alt=\"\"></div>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span><pre code_snippet_id=\"1577976\" snippet_file_name=\"blog_20160214_1_8641422\" name=\"code\" class=\"sql\">--建立学生表\ncreate table student\n(\n       sid number primary key , --学号\n       sname varchar2(45) not null, --学生姓名\n       ssex  char(2) not null,--性别\n       sdept varchar2(10) not null, --所在系\n       sage  number(3) ,--年龄\n       saddress varchar2(45) --住址\n);\n\n--学生表中的数据\ninsert into student values(20040001,&#39;林青霞&#39;,&#39;F&#39;,&#39;计算机系&#39;,22,&#39;上海&#39;);\ninsert into student values(20040002,&#39;刘德华&#39;,&#39;M&#39;,&#39;外语系&#39;,23,&#39;南京&#39;);\ninsert into student values(20050003,&#39;成龙&#39;,&#39;M&#39;,&#39;化学系&#39;,21,&#39;山东&#39;);\ninsert into student values(20050004,&#39;林可欣&#39;,&#39;F&#39;,&#39;计算机系&#39;,22,&#39;北京&#39;);\ninsert into student values(20050005,&#39;周华健&#39;,&#39;M&#39;,&#39;生物系&#39;,24,&#39;山东&#39;);\ninsert into student values(20050006,&#39;周润发&#39;,&#39;M&#39;,&#39;数学系&#39;,20,&#39;湖北&#39;);\n\n--建立课程表\ncreate table course\n(\n       cid number primary key ,--这是课程号\n       cname varchar2(50) not null,--课程名\n       ccredit number(3) --课程学分\n);\n\ninsert into course values(11,&#39;java编程&#39;,6);\ninsert into course values(21,&#39;c++课程&#39;,4);\ninsert into course values(31,&#39;oracle&#39;,3);\ninsert into course values(41,&#39;javaEE&#39;,100);\ninsert into course values(51,&#39;linux&#39;,1);\n\n--建立选课表\ncreate table studCourse\n(\n       stuCourseId number primary key ,--这是一个自增的,表示一次选课\n       sid number  references student(sid),--学生号\n       cid number references course(cid),--课程号\n       grade number not null--成绩\n);\n\n-- 建立选课序列\ncreate sequence stucourse_seq\nstart with 1\nincrement by 1\nminvalue 1\nnomaxvalue\nnocycle\nnocache\n;\n\n--初始化数据\ninsert into studCourse values(stucourse_seq.nextval,20040001,11,90);\ninsert into studCourse values(stucourse_seq.nextval,20040001,21,19);\ninsert into studCourse values(stucourse_seq.nextval,20050003,21,45);\ninsert into studCourse values(stucourse_seq.nextval,20050004,41,99);\ninsert into studCourse values(stucourse_seq.nextval,20050006,11,39);</pre></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：在设计表的时候，应当每张表都有一个主键，且该主键最好不含业务逻辑。</span></span></p>\n<br>\n<h3>1<span style=\"font-family:宋体\">、查询类的全部属性</span></h3>\n<p>基本语法：</p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;Domain<span style=\"font-family:宋体\">类名</span></span></p>\n<p>案例：</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;Student --&nbsp;<span style=\"font-family:宋体\">查询</span><span style=\"font-family:Calibri\">Student</span><span style=\"font-family:宋体\">表中所有数据</span></p>\n<p>&nbsp;</p>\n<h3>2<span style=\"font-family:宋体\">、查询类的部分属性</span></h3>\n<p>基本语法：</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;select&nbsp;<span style=\"font-family:宋体\">属性</span><span style=\"font-family:Calibri\">1,</span><span style=\"font-family:宋体\">属性</span><span style=\"font-family:Calibri\">2&nbsp;from&nbsp;Domain</span><span style=\"font-family:宋体\">类名</span></p>\n<p>案例：</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;select&nbsp;sname,sage&nbsp;from&nbsp;Student</p>\n<p>&nbsp;</p>\n<h3>3<span style=\"font-family:宋体\">、取出单条记录</span></h3>\n<p>基本语法：</p>\n<pre code_snippet_id=\"1577976\" snippet_file_name=\"blog_20160214_2_8052777\" name=\"code\" class=\"java\">    session.createQuery(“from xxx where id=123456”).uniqueResult();</pre>\n<p>案例：</p>\n<pre code_snippet_id=\"1577976\" snippet_file_name=\"blog_20160214_3_8717869\" name=\"code\" class=\"java\">    Student s=(Student) session.createQuery(&quot;from Student where sid = 20050003&quot;).uniqueResult();</pre>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：如果检索一个对象，明确知道最多只有一个对象，则建议使用该方法。</span></span></p>\n<br>\n<h3>4<span style=\"font-family:宋体\">、过滤重复&#20540;</span></h3>\n<p>基本语法：</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;select&nbsp;distinct&nbsp;<span style=\"font-family:宋体\">属性</span><span style=\"font-family:Calibri\">1,</span><span style=\"font-family:宋体\">属性</span><span style=\"font-family:Calibri\">2&nbsp;from&nbsp;Domain</span><span style=\"font-family:宋体\">类名</span></p>\n<p>案例：</p>\n<pre code_snippet_id=\"1577976\" snippet_file_name=\"blog_20160214_4_3527419\" name=\"code\" class=\"java\">List list=session.createQuery(&quot;select distinct sage,ssex from Student&quot;).list();\nfor(int i=0;i&lt;list.size();i++){\n	Object []  objs=(Object[]) list.get(i);\n	System.out.println(objs[0].toString()+&quot; &quot;+objs[1].toString());\n}</pre>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：通过使用</span><span style=\"font-family:Calibri\">distinct</span><span style=\"font-family:宋体\">可以过滤掉重复的数据。</span></span></p>\n<br>\n<h3>5<span style=\"font-family:宋体\">、取某个范围类的记录</span></h3>\n<p>基本语法：</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;[select&nbsp;<span style=\"font-family:宋体\">属性列表</span><span style=\"font-family:Calibri\">]&nbsp;from&nbsp;Domain</span><span style=\"font-family:宋体\">类名&nbsp;</span><span style=\"font-family:Calibri\">where&nbsp;</span><span style=\"font-family:宋体\">属性名&nbsp;</span><span style=\"font-family:Calibri\">between&nbsp;</span><span style=\"font-family:宋体\">数&#20540;下界&nbsp;</span><span style=\"font-family:Calibri\">and&nbsp;</span><span style=\"font-family:宋体\">数&#20540;上界</span></p>\n<p>案例：</p>\n<pre code_snippet_id=\"1577976\" snippet_file_name=\"blog_20160214_5_48836\" name=\"code\" class=\"java\">List list=session.createQuery(&quot;select distinct sage,ssex,sname from Student where sage between 20 and 22&quot;).list();\nfor(int i=0;i&lt;list.size();i++){\n	Object []  objs=(Object[]) list.get(i);\n	System.out.println(objs[0].toString()+&quot; &quot;+objs[1].toString()+objs[2].toString());\n}</pre><br>\n<h3>6<span style=\"font-family:宋体\">、存在或不存在与记录里</span></h3>\n<p>基本语法：</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;[select&nbsp;<span style=\"font-family:宋体\">属性列表</span><span style=\"font-family:Calibri\">]&nbsp;from&nbsp;Domain</span><span style=\"font-family:宋体\">类名&nbsp;</span><span style=\"font-family:Calibri\">where&nbsp;</span><span style=\"font-family:宋体\">属性名&nbsp;</span><span style=\"font-family:Calibri\">in[not&nbsp;in](</span>‘条件<span style=\"font-family:Calibri\">1</span>’,’条件<span style=\"font-family:Calibri\">2</span>’,’条件<span style=\"font-family:Calibri\">3</span>’)</p>\n<p>案例：</p>\n<pre code_snippet_id=\"1577976\" snippet_file_name=\"blog_20160214_6_190540\" name=\"code\" class=\"java\">List&lt;Student&gt; list=session.createQuery(&quot;from Student where sdept in (&#39;计算机系&#39;,&#39;外语系&#39;)&quot;).list();\n//取出  for 增强\nfor(Student s:list){\n	System.out.println(s.getSname()+&quot; &quot;+s.getSaddress()+&quot; &quot;+s.getSdept());\n}</pre><br>\n<h3>7<span style=\"font-family:宋体\">、模糊查询</span></h3>\n<p>基本语法：</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;[select&nbsp;<span style=\"font-family:宋体\">属性列表</span><span style=\"font-family:Calibri\">]&nbsp;from&nbsp;Domain</span><span style=\"font-family:宋体\">类名&nbsp;</span><span style=\"font-family:Calibri\">where&nbsp;</span><span style=\"font-family:宋体\">属性名&nbsp;</span><span style=\"font-family:Calibri\">like&nbsp;</span>‘字符串’</p>\n<p>案例：</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;from&nbsp;Student&nbsp;where&nbsp;sname&nbsp;like&nbsp;‘林<span style=\"font-family:Calibri\">%</span>’</p>\n<p>&nbsp;</p>\n<h3>8<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">group&nbsp;by</span><span style=\"font-family:宋体\">，</span><span style=\"font-family:Calibri\">having</span><span style=\"font-family:宋体\">，</span><span style=\"font-family:Calibri\">order&nbsp;by</span><span style=\"font-family:宋体\">，聚集函数使用</span></h3>\n<p>案例<span style=\"font-family:Calibri\">1</span><span style=\"font-family:宋体\">：</span></p>\n<pre code_snippet_id=\"1577976\" snippet_file_name=\"blog_20160214_7_888651\" name=\"code\" class=\"java\">//显示各个系的学生的平均年龄\nList&lt;Object[]&gt; list=session.createQuery(&quot;select avg(sage),sdept from  Student group by sdept&quot;).list();\n//取出1. for 增强\nfor(Object[] obj:list){\n	System.out.println(obj[0].toString()+&quot; &quot;+obj[1].toString());\n}</pre><br>\n<p>案例<span style=\"font-family:Calibri\">2</span><span style=\"font-family:宋体\">：</span></p>\n<pre code_snippet_id=\"1577976\" snippet_file_name=\"blog_20160214_8_4269740\" name=\"code\" class=\"java\">//1.对分组查询后的结果，进行筛选:比如请显示人数大于3的系名称\n//a. 查询各个系分别有多少学生.\nList&lt;Object[]&gt; list=session.createQuery(&quot;select count(*) as c1,sdept from  Student group by sdept having count(*)&gt;3&quot;).list();\n//取出1. for 增强\nfor(Object[] obj:list){\n	System.out.println(obj[0].toString()+&quot; &quot;+obj[1].toString());\n}</pre><br>\n<p>案例<span style=\"font-family:Calibri\">3</span><span style=\"font-family:宋体\">：</span></p>\n<pre code_snippet_id=\"1577976\" snippet_file_name=\"blog_20160214_9_6919699\" name=\"code\" class=\"java\">//2查询女生少于200人的系\n//a.查询各个系的女生有多个个\nList&lt;Object[]&gt; list=session.\ncreateQuery(&quot;select count(*) as c1,sdept from Student where ssex=&#39;F&#39; group by sdept&quot;).list();\n//取出1. for 增强\nfor(Object[] obj:list){\n	System.out.println(obj[0].toString()+&quot; &quot;+obj[1].toString());\n}</pre><br>\n<p>案例<span style=\"font-family:Calibri\">4</span><span style=\"font-family:宋体\">：</span></p>\n<pre code_snippet_id=\"1577976\" snippet_file_name=\"blog_20160214_10_8697605\" name=\"code\" class=\"java\">//1.查询计算机系共多少人?-&gt;如果我们返回的是一列数据\n//这时我们的取法是直接取出list-&gt;object 而不是 list-&gt;Object[]\nList&lt;Object[]&gt; list=session.createQuery(&quot;select sage from  Student where sdept=&#39;计算机系&#39;&quot;).list();\n//取出1. for 增强\nfor(Object obj:list){\n    System.out.println(obj.toString());\n}</pre><br>\n<p>案例<span style=\"font-family:Calibri\">5</span><span style=\"font-family:宋体\">：</span></p>\n<pre code_snippet_id=\"1577976\" snippet_file_name=\"blog_20160214_11_2950748\" name=\"code\" class=\"java\">//3.查询选修11号课程的最高分和最低分.\nList&lt;Object[]&gt; list=session.\ncreateQuery(&quot;select 11,max(grade),min(grade) from Studcourse where course.cid=11&quot;).list();\n//取出1. for 增强\nfor(Object[] obj:list){\n    System.out.println(obj[0].toString()+&quot; max=&quot;+obj[1].toString()+&quot; min=&quot;+obj[2].toString());\n}</pre><br>\n<p>案例<span style=\"font-family:Calibri\">6</span><span style=\"font-family:宋体\">：</span></p>\n<pre code_snippet_id=\"1577976\" snippet_file_name=\"blog_20160214_12_1140604\" name=\"code\" class=\"java\">//计算各个科目不及格的学生数量\nList&lt;Object[]&gt; list=session.createQuery(&quot;select count(*),student.sdept from Studcourse where grade&lt;60 group by student.sdept&quot;).list();\n//取出1. for 增强\nfor(Object[] obj:list){\n	System.out.println(obj[0].toString()+&quot; &quot;+obj[1].toString());\n}</pre>\n<p>PS<span style=\"font-family:宋体\">：</span><span style=\"font-family:Calibri\">group&nbsp;by</span><span style=\"font-family:宋体\">用于分组，</span><span style=\"font-family:Calibri\">having</span><span style=\"font-family:宋体\">在分组后加限制条件，</span><span style=\"font-family:Calibri\">order&nbsp;by</span><span style=\"font-family:宋体\">指定排序方式，聚集函数有</span><span style=\"color:rgb(255,0,0)\">count(),avg(),max(),min(),sum()</span>五个，大部分内容和<span style=\"font-family:Calibri\">SQL</span><span style=\"font-family:宋体\">中语法相&#20284;，给出以前相关内容的博客：</span><a target=\"_blank\" href=\"http://blog.csdn.net/q547550831/article/details/49964047\"><span style=\"color:rgb(128,0,128)\">Oracle<span style=\"font-family:宋体\">表管理</span></span></a>、<a target=\"_blank\" href=\"http://blog.csdn.net/q547550831/article/details/49925137\"><span style=\"color:rgb(128,0,128)\">Java<span style=\"font-family:宋体\">数据库基础</span></span></a></p>\n<br>\n<h3>9<span style=\"font-family:宋体\">、实际应用之分页显示</span></h3>\n<pre code_snippet_id=\"1577976\" snippet_file_name=\"blog_20160214_13_3790563\" name=\"code\" class=\"java\">public void showStuByPage(int pageSize,int pageNow){\n	Query q = session.createQuery(“from Student”); \n	q.setFirstResult((pageNow - 1) * pageSize); //从第几条取\n	q.setMaxResult(pageSize); 	//取出几条\n	List list = q.list();		 //执行	\n	Iterator it=list.iterator(); 	//显示一下\n	while(it.hasnext){\n		Student s=(Student)it.next();\n		System.out.println(s.getSname());\n		System.out.println(s.getSage());\n	} \n	String hql=“select count(*) from Student”;\n	list=session.createQuery(hql).list();\n	int pageRow=((Integer)list.get(0)).intValue();\n	int pageCount=(pageRow+pageSize-1)/pageSize;//总页数\n	}</pre><br>\n<h3>10<span style=\"font-family:宋体\">、参数绑定</span></h3>\n<h4>参数绑定的两种形式：</h4>\n<h5>1<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">:</span><span style=\"font-family:宋体\">参数名</span></h5>\n<p>基本语法：</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;Query&nbsp;q&nbsp;=&nbsp;session.createQuery(from&nbsp;Domain<span style=\"font-family:宋体\">类名&nbsp;</span><span style=\"font-family:Calibri\">where&nbsp;</span><span style=\"font-family:宋体\">属性</span><span style=\"font-family:Calibri\">1=:</span><span style=\"font-family:宋体\">参数</span><span style=\"font-family:Calibri\">1);</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;q.setParameter(“参数<span style=\"font-family:Calibri\">1</span>”,&nbsp;”&#20540;<span style=\"font-family:Calibri\">1</span>”);</p>\n<p>案例：</p>\n<pre code_snippet_id=\"1577976\" snippet_file_name=\"blog_20160214_14_1980419\" name=\"code\" class=\"java\">    List&lt;Student&gt; list=session.createQuery(&quot;from Student where sdept=:a1 and sage &gt;: sage&quot;).setString(&quot;a1&quot;, &quot;计算机系&quot;).setString(&quot;sage&quot;, &quot;2&quot;).list();</pre>\n<p>或者可以：</p>\n<pre code_snippet_id=\"1577976\" snippet_file_name=\"blog_20160214_15_5153766\" name=\"code\" class=\"java\">    Query q = session.createQuery(&quot;from Student where sdept=:a1 and sage &gt;: sage&quot;); \n    q.setString(&quot;a1&quot;, &quot;计算机系&quot;);\n    q.setString(&quot;sage&quot;, &quot;2&quot;);</pre><br>\n<h5>2<span style=\"font-family:宋体\">、“</span><span style=\"font-family:Calibri\">?</span><span style=\"font-family:宋体\">”形式</span></h5>\n<p>基本语法：</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;Query&nbsp;q&nbsp;=&nbsp;session.createQuery(from&nbsp;Domain<span style=\"font-family:宋体\">类名&nbsp;</span><span style=\"font-family:Calibri\">where&nbsp;</span><span style=\"font-family:宋体\">属性</span><span style=\"font-family:Calibri\">1=?);</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;q.setParameter(“0”,&nbsp;”&#20540;<span style=\"font-family:Calibri\">1</span>”);</p>\n<p>案例：</p>\n<pre code_snippet_id=\"1577976\" snippet_file_name=\"blog_20160214_16_7455060\" name=\"code\" class=\"java\">    List&lt;Student&gt; list = session.createQuery(&quot;from Student where sdept=? and sage&gt;?&quot;).setString(0, &quot;计算机系&quot;).setString(1, &quot;2&quot;).list();</pre>\n<p>或者是：</p>\n<pre code_snippet_id=\"1577976\" snippet_file_name=\"blog_20160214_17_2056867\" name=\"code\" class=\"java\">    Query query=session.createQuery(&quot;from Student where sdept=? and sage&gt;?&quot;);\n	query.setString(0, &quot;计算机系&quot;);\n	query.setString(1, &quot;2&quot;);\n	List &lt;Student&gt; list=query.list();\n	for(int i=0;i&lt;list.size();i++){\n		Student s= list.get(i);\n		System.out.println(s.getSname()+&quot; &quot;+s.getSage());\n	}</pre><br>\n<h4>使用参数绑定的好处</h4>\n<p>1.<span style=\"font-family:宋体\">可读性好</span><span style=\"font-family:Calibri\">.</span></p>\n<p>2.<span style=\"font-family:宋体\">性能提高</span><span style=\"font-family:Calibri\">.</span></p>\n<p>3.<span style=\"font-family:宋体\">防止</span><span style=\"font-family:Calibri\">sql</span><span style=\"font-family:宋体\">注入</span><span style=\"font-family:Calibri\">.</span></p>\n<br>\n<h3>11<span style=\"font-family:宋体\">、在映射文件中得到</span><span style=\"font-family:Calibri\">HQL</span><span style=\"font-family:宋体\">语句</span></h3>\n<p>案例：</p>\n<p>在<span style=\"font-family:Calibri\">:&nbsp;Student.hbm.xml&nbsp;</span><span style=\"font-family:宋体\">中</span></p>\n<pre code_snippet_id=\"1577976\" snippet_file_name=\"blog_20160214_18_4706825\" name=\"code\" class=\"html\">&lt;query name=&quot;myquerytest&quot;&gt;\n	&lt;![CDATA[select sname,ssex from Student where sage&gt;22]]&gt;\n&lt;/query&gt;</pre>\n<p>使用方法<span style=\"font-family:Calibri\">:</span></p>\n<pre code_snippet_id=\"1577976\" snippet_file_name=\"blog_20160214_19_8959967\" name=\"code\" class=\"java\">List list=session.getNamedQuery(&quot;myquerytest&quot;).list();\nSystem.out.println(list.size());\nIterator it=list.iterator();\nwhile(it.hasNext()){\n	Object obj[]=(Object[])it.next();\n	System.out.println(&quot;n=&quot;+obj[0]);\n}</pre>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：通过在映射文件中配置</span><span style=\"font-family:Calibri\">hql</span><span style=\"font-family:宋体\">，可以使</span><span style=\"font-family:Calibri\">hql</span><span style=\"font-family:宋体\">的查询更灵活。</span></span></p>\n<br>\n<h3>12<span style=\"font-family:宋体\">、子查询</span></h3>\n<p>案例：显示所有选择了<span style=\"font-family:Calibri\">21</span><span style=\"font-family:宋体\">号课程的学生信息</span></p>\n<p>from&nbsp;Student&nbsp;where&nbsp;sid&nbsp;in&nbsp;(select&nbsp;student.sid&nbsp;from&nbsp;StudCourse&nbsp;where&nbsp;course.cno=\'21\')</p>\n<br>\n<h3>13<span style=\"font-family:宋体\">、多表查询</span></h3>\n<p>案例：显示林青霞选择的所有课程名和成绩</p>\n<p>select&nbsp;s1.sname,s2.course.cid,c1.cname,s2.grade&nbsp;from&nbsp;Student&nbsp;as&nbsp;s1,StudCourse&nbsp;as&nbsp;s2,Course&nbsp;as&nbsp;c1&nbsp;where&nbsp;s1.sname=\'<span style=\"font-family:宋体\">林青霞</span><span style=\"font-family:Calibri\">\'&nbsp;and&nbsp;s1.sname=s2.student.sname&nbsp;and&nbsp;c1.cid=s2.course.cid</span></p>\n<p>或者</p>\n<p>select&nbsp;s1.course.cname,s1.grade&nbsp;from&nbsp;Studcourse&nbsp;s1&nbsp;where&nbsp;s1.student.sname=\'<span style=\"font-family:宋体\">林青霞</span><span style=\"font-family:Calibri\">\'</span></p>\n<p>&nbsp;</p>\n<h3>补充：<span style=\"font-family:Calibri\">Criteria</span><span style=\"font-family:宋体\">的使用</span></h3>\n<p>案例：</p>\n<pre code_snippet_id=\"1577976\" snippet_file_name=\"blog_20160214_20_6277771\" name=\"code\" class=\"java\">//查询年龄大于10岁的学生 criteria\nSession s=HibernateUtil.getCurrentSession();\nTransaction tx=s.beginTransaction();\nCriteria cri=s.createCriteria(Student.class);\n//添加检索条件\ncri.add(Restrictions.gt(&quot;sage&quot;, new Long(10)));\nList&lt;Student&gt; list=cri.list();\nfor(Student s1: list){\n	System.out.println(s1.getSname());\n}\ntx.commit();       </pre>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：</span><span style=\"font-family:Calibri\">Criteria</span><span style=\"font-family:宋体\">的优点是更加面向对象，如果对</span><span style=\"font-family:Calibri\">hql</span><span style=\"font-family:宋体\">语句不太了解的话可以使用。缺点是</span><span style=\"font-family:Calibri\">:&nbsp;</span><span style=\"font-family:宋体\">功能不如</span><span style=\"font-family:Calibri\">hql</span><span style=\"font-family:宋体\">强大，而且</span><span style=\"font-family:Calibri\">hql</span><span style=\"font-family:宋体\">是</span><span style=\"font-family:Calibri\">hibernate</span><span style=\"font-family:宋体\">官方推荐使用的语句。</span></span></p>\n<br>\n<br>\n<p>&nbsp;</p>\n<p>----------<span style=\"font-family:宋体\">参考《韩顺平</span><span style=\"font-family:Calibri\">.hibernate</span><span style=\"font-family:宋体\">从入门到精通》</span></p>\n<p><br>\n</p>\n   \n', '2016-04-16 01:21:07', '2');
INSERT INTO `article` VALUES ('10030', '10003', 'Linux学习笔记6', '\n        <div class=\"markdown_views\"><h1 id=\"linux学习笔记6\"><strong>Linux学习笔记6</strong></h1>\n\n<p><div class=\"toc\"><div class=\"toc\">\n<ul>\n<li><a href=\"#linux学习笔记6\">Linux学习笔记6</a><ul>\n<li><ul>\n<li><a href=\"#linux下passwd和shadow文件内容详解\">Linux下passwd和shadow文件内容详解</a></li>\n<li><a href=\"#查看用户的uidgid扩展组\">查看用户的uidgid扩展组</a></li>\n<li><a href=\"#用户和用户组管理\">用户和用户组管理</a></li>\n<li><a href=\"#执行历史命令最近的那条相似命令\">执行历史命令最近的那条相似命令</a></li>\n<li><a href=\"#切换账号\">切换账号</a></li>\n<li><a href=\"#命令sudo\">命令sudo</a></li>\n<li><a href=\"#不允许root远程登录linux\">不允许root远程登录Linux</a></li>\n<li><a href=\"#随机生成一个密码\">随机生成一个密码</a></li>\n<li><a href=\"#使用密码记录工具keepass来保存密码\">使用密码记录工具keepass来保存密码</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>\n</div>\n</p>\n\n<h3 id=\"linux下passwd和shadow文件内容详解\"><strong>Linux下passwd和shadow文件内容详解</strong></h3>\n\n<blockquote>\n  <p><a href=\"http://blog.chinaunix.net/uid-22117760-id-264606.html\">http://blog.chinaunix.net/uid-22117760-id-264606.html</a></p>\n  \n  <p>PS：shell字段，默认是/bin/bash,可以把该字段改为/sbin/nologin来阻止该账号登录，但是该账号能够使用FTP。</p>\n</blockquote>\n\n\n\n<h3 id=\"查看用户的uidgid扩展组\"><strong>查看用户的uid、gid、扩展组</strong></h3>\n\n<blockquote>\n  <p>id</p>\n  \n  <p>例：查看用户的id信息</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# id switch1 <br>\n        uid=2222(switch1) gid=1003(switch1) 组=1003(switch1) <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"用户和用户组管理\"><strong>用户和用户组管理</strong></h3>\n\n<blockquote>\n  <p>useradd</p>\n  \n  <p>例：增加一个用户</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# useradd switch1 <br>\n        [root@localhost ~]# tail -n1 /etc/passwd <br>\n        switch1:x:1002:1003::/home/switch1:/bin/bash <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n  \n  <p>语法 : useradd [-u UID] [-g GID] [-d HOME] [-M] [-s]</p>\n  \n  <blockquote>\n    <p>‘-u’ 自定义UID</p>\n    \n    <p>‘-g’ 使其属于已经存在的某个组，后面可以跟组id, 也可以跟组名</p>\n    \n    <p>‘-d’ 自定义用户的家目录</p>\n    \n    <p>‘-M’ 不建立家目录</p>\n    \n    <p>‘-s’ 自定义shell</p>\n  </blockquote>\n  \n  <p>userdel</p>\n  \n  <p>例：删除用户</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# userdel switch1 <br>\n        [root@localhost ~]# ls -la /home/switch1/ <br>\n        总用量 12 <br>\n        drwx------  3 1002 1003  74 3月  30 13:57 . <br>\n        drwxr-xr-x. 5 root root  45 3月  30 13:57 .. <br>\n        -rw-r--r--  1 1002 1003  18 11月 20 13:02 .bash_logout <br>\n        -rw-r--r--  1 1002 1003 193 11月 20 13:02 .bash_profile <br>\n        -rw-r--r--  1 1002 1003 231 11月 20 13:02 .bashrc <br>\n        drwxr-xr-x  4 1002 1003  37 3月  25 15:57 .mozilla <br>\n        [root@localhost ~]#</code></p>\n    \n    <p>PS：可以”-r”选项，在删除用户的时候删除家目录。</p>\n  </blockquote>\n  \n  <p>groupadd</p>\n  \n  <p>例：新建一个组</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# groupadd group1 <br>\n        [root@localhost ~]# tail -n2 /etc/group <br>\n        user2:x:1002: <br>\n        group1:x:1003: <br>\n        [root@localhost ~]#</code></p>\n    \n    <p>PS：”-g”选项指定组。</p>\n  </blockquote>\n  \n  <p>groupdel</p>\n  \n  <p>例：删除一个组</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# tail -n2 /etc/group <br>\n        user2:x:1002: <br>\n        group1:x:1003: <br>\n        [root@localhost ~]# groupdel group1 <br>\n        [root@localhost ~]# tail -n2 /etc/group <br>\n        user1:x:1001: <br>\n        user2:x:1002: <br>\n        [root@localhost ~]#</code></p>\n    \n    <p>PS：组内有用户不能删除，只有删除了所有用户，才能删除组。</p>\n  </blockquote>\n  \n  <p>usermod</p>\n  \n  <p>例：修改用户UID</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# useradd -u 100000 switch1 <br>\n        [root@localhost ~]# tail -n2 /etc/passwd <br>\n        user2:x:1001:1002::/home/user2:/bin/bash <br>\n        switch1:x:100000:1003::/home/switch1:/bin/bash <br>\n        [root@localhost ~]# usermod -u 2222 switch1 <br>\n        usermod：警告：/var/spool/mail/switch1 不属于 switch1 <br>\n        [root@localhost ~]# tail -n2 /etc/passwd <br>\n        user2:x:1001:1002::/home/user2:/bin/bash <br>\n        switch1:x:2222:1003::/home/switch1:/bin/bash <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n  \n  <p>例：修改用户的扩展组</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# groupadd group1 <br>\n        [root@localhost ~]# tail -n4 /etc/group <br>\n        user1:x:1001: <br>\n        user2:x:1002: <br>\n        switch1:x:1003: <br>\n        group1:x:1004: <br>\n        [root@localhost ~]# id switch1 <br>\n        uid=2222(switch1) gid=1003(switch1) 组=1003(switch1) <br>\n        [root@localhost ~]# usermod -G group1 switch1 <br>\n        [root@localhost ~]# id switch1 <br>\n        uid=2222(switch1) gid=1003(switch1) 组=1003(switch1),1004(group1) <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n  \n  <p>例：锁定用户</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# passwd switch1 <br>\n        更改用户 switch1 的密码 。 <br>\n        新的 密码： <br>\n        无效的密码： 密码少于 8 个字符 <br>\n        重新输入新的 密码： <br>\n        passwd：所有的身份验证令牌已经成功更新。 <br>\n        [root@localhost ~]# grep switch1 /etc/shadow <br>\n        switch1:$6$kSrpEs8f$//Yp7g7k8cbVhiXBY5L2Xv2inFQRi5cL9JvlG6pjSnZM8.vZeZ1bbuzuTGMB4TW3rBD6V2S4nkmUyzmRORyj1.:16890:0:99999:7::: <br>\n        [root@localhost ~]# usermod -L switch1 <br>\n        [root@localhost ~]# !grep <br>\n        grep switch1 /etc/shadow <br>\n        switch1:!$6$kSrpEs8f$//Yp7g7k8cbVhiXBY5L2Xv2inFQRi5cL9JvlG6pjSnZM8.vZeZ1bbuzuTGMB4TW3rBD6V2S4nkmUyzmRORyj1.:16890:0:99999:7::: <br>\n        [root@localhost ~]#</code></p>\n    \n    <p>PS：shadow中密码之前有感叹号表示被锁住了。解锁可以用”-U”选项解锁。</p>\n  </blockquote>\n  \n  <p>chfn</p>\n  \n  <p>例：设置用户信息(finger)</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# grep switch1 /etc/passwd <br>\n        switch1:x:2222:1003::/home/switch1:/bin/bash <br>\n        [root@localhost ~]# chfn switch1 <br>\n        Changing finger information for switch1. <br>\n        名称 []: switch1 <br>\n        办公 []: 123456 <br>\n        办公电话 []: 123456 <br>\n        住宅电话 []: 654321 <br>\n        Finger information changed. <br>\n        [root@localhost ~]# !grep <br>\n        grep switch1 /etc/passwd <br>\n        switch1:x:2222:1003:switch1,123456,123456,654321:/home/switch1:/bin/bash <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"执行历史命令最近的那条相似命令\"><strong>执行历史命令最近的那条相似命令</strong></h3>\n\n<blockquote>\n  <p><strong>!</strong></p>\n  \n  <p>例：执行最近的以tail开头的命令</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# !tail <br>\n        tail -n2 /etc/group <br>\n        user1:x:1001: <br>\n        user2:x:1002: <br>\n        [root@localhost ~]#</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"切换账号\"><strong>切换账号</strong></h3>\n\n<blockquote>\n  <p>su</p>\n  \n  <p>例：从普通用户切换到root</p>\n  \n  <blockquote>\n    <p><code>[switch@localhost ~]$ id <br>\n        uid=1000(switch) gid=1000(switch) 组=1000(switch),10(wheel) <br>\n        [switch@localhost ~]$ su <br>\n        密码： <br>\n        [root@localhost switch]# id <br>\n        uid=0(root) gid=0(root) 组=0(root)</code></p>\n    \n    <p>PS：从普通用户到root用户可以不加username，但是要输入密码，从root到普通用户要加username，不需要输入密码。</p>\n    \n    <p>PS：加上<strong>“-“</strong>选项会初始化呢环境变量，也就是说使用该选项会直接到切换用户的家目录下，不加则还是当前目录。</p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"命令sudo\"><strong>命令sudo</strong></h3>\n\n<blockquote>\n  <p>用su是可以切换用户身份，如果每个普通用户都能切换到root身份，如果某个用户不小心泄漏了root的密码，那岂不是系统非常的不安全？没有错，为了改进这个问题，产生了sudo这个命令。使用sudo执行一个root才能执行的命令是可以办到的，但是需要输入密码，这个密码并不是root的密码而是用户自己的密码。默认只有root用户能使用sudo命令，普通用户想要使用sudo，是需要root预先设定的，即，使用 visudo 命令去编辑相关的配置文件/etc/sudoers. 如果没有visudo这个命令，请使用 yum install -y sudo 安装。</p>\n  \n  <p>默认root能够sudo是因为这个文件中有一行 “root ALL=(ALL) ALL” 在该行下面加入 “test ALL=(ALL) ALL” 就可以让test用户拥有了sudo的权利。使用 “visudo” 命令编辑/etc/sudoers配置文件，其实它的操作方法和前面介绍的 “vi” 命令使用方法是一样的，按 ‘i’ 进入编辑模式，编辑完成后，按 “Esc” ，再输入 ”:wq” 完成保存。</p>\n  \n  <blockquote>\n    <p><code>## Allow root to run any commands anywhere <br>\n        root    ALL=(ALL)       ALL <br>\n        test    ALL=(ALL)       ALL</code></p>\n    \n    <p>此时可以验证一下test账户的权限了。 <br>\n    <code>[root@localhost ~]# su test <br>\n        [test@localhost root]$ ls <br>\n        ls: 无法打开目录.: 权限不够 <br>\n        [test@localhost root]$ sudo ls <br>\n        We trust you have received the usual lecture from the local System <br>\n        Administrator. It usually boils down to these three things: <br>\n            #1) Respect the privacy of others. <br>\n            #2) Think before you type. <br>\n            #3) With great power comes great responsibility. <br>\n        [sudo] password for test: <br>\n        123  456  789  anaconda-ks.cfg  dirb  install.log  install.log.syslog  test  test1  test2  test3</code></p>\n    \n    <p>由于切换到test账户后的当前目录依旧是在/root 下，test账户没有任何权限，所以 ‘ls’ 的时候提示说权限不够，然而使用 sudo ls 输入test账户自身的密码后就有权限了。初次使用sudo 时会有上面的一大段提示，而后再次使用sudo 命令则不再提示。</p>\n    \n    <p>如果每增加一用户就设置一行，这样太麻烦了。所以可以这样设置。把 “# %wheel ALL=(ALL) ALL” 前面的 ‘# ‘ 去掉，让这一行生效。它的意思是，wheel这个组的所有用户都拥有了sudo的权利。接下来就需要把想让有sudo权利的所有用户加入到wheel这个组中即可。 <br>\n    <code>## Allows people in group wheel to run all commands <br>\n        %wheel  ALL=(ALL)       ALL</code></p>\n    \n    <p>配置文件/etc/sudoers包含了诸多配置项，可以使用命令 man sudoers 来获得帮助信息。</p>\n  </blockquote>\n  \n  <p>例：只允许使用普通账户登陆，而普通账户登录后，可以不输入密码就能sudo切换到root账户。下面是配置：</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# visudo</code></p>\n    \n    <p>然后在文件的最后面加入三行： <br>\n    <code>User_Alias USER_SU = test, test1, aming <br>\n        Cmnd_Alias SU = /bin/su <br>\n        USER_SU ALL=(ALL) NOPASSWD: SU</code></p>\n    \n    <p>PS：这里其实只是给前两行取了别名，这三行等同于如下一行： <br>\n    <code>test,test1,aming ALL=(ALL) NOPASSWD: /bin/su</code></p>\n    \n    <p>PS：那么上述用户也能够替换成组。</p>\n    \n    <p>保存配置文件后，使用test, test1, aming 三个账户登陆Linux后，执行命令 sudo su - 切换到root账户，获取root账户的所有权利。 <br>\n    <code>[root@localhost ~]# su - test <br>\n        [test@localhost ~]$ sudo su - <br>\n        [root@localhost ~]# whoami <br>\n        root</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"不允许root远程登录linux\"><strong>不允许root远程登录Linux</strong></h3>\n\n<blockquote>\n  <p>1.进入sshd服务配置文件</p>\n  \n  <blockquote>\n    <p><code>vim /etc/ssh/sshd_config</code></p>\n  </blockquote>\n  \n  <p>2.查找<code>#PermitRootLogin yes</code>，并改为<code>PermitRootLogin no</code></p>\n  \n  <p>3.重启sshd服务</p>\n  \n  <blockquote>\n    <p><code>/bin/systemctl restart sshd.service</code></p>\n  </blockquote>\n  \n  <p>PS：该方法只适用于用过ssh远程登录Linux的情况。</p>\n</blockquote>\n\n\n\n<h3 id=\"随机生成一个密码\"><strong>随机生成一个密码</strong></h3>\n\n<blockquote>\n  <p>mkpasswd</p>\n  \n  <p>这个命令用来生成密码。Linux默认是没有这个命令的，需要安装一个包 “expect”,使用命令 yum install -y expect 即可完成安装。安装好后，输入命令：</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# mkpasswd <br>\n        HXut8oy*8</code></p>\n  </blockquote>\n  \n  <p>PS：生成的随机字符串就可以作为一个密码，这个密码不容易记忆，但是可以使用密码管理工具管理密码。</p>\n</blockquote>\n\n\n\n<h3 id=\"使用密码记录工具keepass来保存密码\"><strong>使用密码记录工具keepass来保存密码</strong></h3>\n\n<blockquote>\n  <p>Keepass官网地址是: <a href=\"http://www.keepass.info\">http://www.keepass.info</a> 在官网keepass是这样被形容的: The free, open source, light-weight and easy-to-use password manager. 没错，这款软件是免费的、开源的、容易使用轻量级的密码管理工具。</p>\n  \n  <p>PS：注意该软件是windows系统下的。</p>\n  \n  <p>安装好后，运行keepass，首先创建一个新的密码库文件。</p>\n  \n  <p>点菜单栏 “file” 然后选择 “new” , 为密码库文件找一个安全的地方存放。接下来，为密码文件创建一个 “master password” , 这个密码以后每次查看密码的时候都需要输入，输入正确后才可以查看，这样的设计也是为了安全。设置好密码后连续点两个 “ok” 完成创建密码库文件。</p>\n  \n  <p>增加一个group</p>\n  \n  <blockquote>\n    <p>鼠标选中左侧的 “NewDatebase”(刚刚创建的数据库), 点右键选择 “Add Group”, 单击后创建新组，然后更改组名，比说叫做 “test”. 当然组下面还可以创建组，方法一样的。</p>\n  </blockquote>\n  \n  <p>创建一个Entry</p>\n  \n  <blockquote>\n    <p>鼠标左键先点一下刚才创建的组 “test” ， 然后在右侧空白处右键单击，选择 “Add Entry”. 弹出一个会话窗口，Title 自定义，方便我们以后查找; User name 用来记录密码的用户是谁; Password 这个默认就存在了，也可以更改，点一下后面的 ”…” 图标可以查看密码的内容，再点一下变为不可见状态; URL 用来记录网址，方便跳转，比如这个密码为某个网站的某个会员的密码，那如果在这里填写了该网址地址，则可以直接跳转到那个网站，可以留空；Notes 用来写一些与这个密码相关的信息，方便记忆，可以留空。</p>\n  </blockquote>\n  \n  <p>修改Entry信息</p>\n  \n  <blockquote>\n    <p>在右侧窗口，选中要修改的Entry那行，鼠标移动到Title区域，双击则会跳出一个会话窗口，可以更改Entry的各项信息。</p>\n  </blockquote>\n  \n  <p>获取Entry密码</p>\n  \n  <blockquote>\n    <p>同样是在右侧窗口，选中要获取的密码那行，鼠标移动到Password区域，直接双击，就把密码复制到剪切板了，密码会在剪切板中保存12s，过期会失效，所以应该在12s内把密码粘贴。</p>\n  </blockquote>\n</blockquote>\n\n<p><strong><font size=\"6\">参考《跟阿铭学Linux》</font></strong></p>\n\n<hr></div>\n        <script type=\"text/javascript\">\n            $(function () {\n                $(\'pre.prettyprint code\').each(function () {\n                    var lines = $(this).text().split(\'\\n\').length;\n                    var $numbering = $(\'<ul/>\').addClass(\'pre-numbering\').hide();\n                    $(this).addClass(\'has-numbering\').parent().append($numbering);\n                    for (i = 1; i <= lines; i++) {\n                        $numbering.append($(\'<li/>\').text(i));\n                    };\n                    $numbering.fadeIn(1700);\n                });\n            });\n        </script>\n   \n', '2016-04-16 01:21:07', '0');
INSERT INTO `article` VALUES ('10031', '10003', 'SpringMVC实战-雇员薪资管理系统', '\n\n<h1 style=\"text-align:center\"><span style=\"font-size:18px\">SpringMVC<span style=\"font-family:宋体\">实战</span><span style=\"font-family:Calibri\">-</span><span style=\"font-family:宋体\">雇员薪资管理系统</span></span></h1>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>基本概述</h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;这里使用的是<span style=\"font-family:Calibri\">Spring2.5&#43;Hibernate3.3&#43;Struts1.3(SSH)</span><span style=\"font-family:宋体\">框架，进行整合开发，通过该案例可以了解使用</span><span style=\"font-family:Calibri\">SHH</span><span style=\"font-family:宋体\">框架进行开发的基本操作和配置过程，虽然</span><span style=\"font-family:Calibri\">SSH</span><span style=\"font-family:宋体\">版本比较老，但是还是有参考价&#20540;，以后在整理出更高版本的框架开发博客。</span></p>\n<p>PS<span style=\"font-family:宋体\">：这里给出所需要的整合</span><span style=\"font-family:Calibri\">JAR</span><span style=\"font-family:宋体\">包，</span><a target=\"_blank\" target=\"_blank\" href=\"http://download.csdn.net/detail/q547550831/9448382\"><span style=\"color:rgb(128,0,128)\">SSH<span style=\"font-family:宋体\">整合包</span><span style=\"font-family:Calibri\">(S1.3&#43;S2.5&#43;H3.3)</span></span></a>。</p>\n<p>&nbsp;</p>\n<h2>系统架构图</h2>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160301144632564\" alt=\"\"></div>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>SSH<span style=\"font-family:宋体\">手动</span>整合开发步骤</h2>\n<h3>1<span style=\"font-family:宋体\">、在</span><span style=\"font-family:Calibri\">MyEclipse</span><span style=\"font-family:宋体\">中创建</span><span style=\"font-family:Calibri\">JavaWEB</span><span style=\"font-family:宋体\">项目。</span></h3>\n<h3>2<span style=\"font-family:宋体\">、引入</span><span style=\"font-family:Calibri\">Spring</span><span style=\"font-family:宋体\">开发包。</span></h3>\n<h3>3<span style=\"font-family:宋体\">、编写</span><span style=\"font-family:Calibri\">ap</span>plicationContext.xml<span style=\"font-family:宋体\">文件，把该文件放在</span><span style=\"font-family:Calibri\">src</span><span style=\"font-family:宋体\">目录下。</span></h3>\n<div><span style=\"font-family:宋体\"></span>\n<p><pre code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160414_1_6438544\" name=\"code\" class=\"html\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n	xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\n	xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\n           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\n           http://www.springframework.org/schema/context\n           http://www.springframework.org/schema/context/spring-context-2.5.xsd\n           http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd\n           http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd&quot;&gt;\n	&lt;!-- 启动注解 --&gt;\n	&lt;context:annotation-config /&gt;\n&lt;/beans&gt;</pre></p>\n</div>\n<h3>4<span style=\"font-family:宋体\">、编写测试程序，测试</span><span style=\"font-family:Calibri\">Spring</span><span style=\"font-family:宋体\">框架是否正常工作。</span></h3>\n<div><span style=\"font-family:宋体\"></span>\n<p>applicationContext.xml<span style=\"font-family:宋体\">加入</span></p>\n<pre code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160414_2_5882919\" name=\"code\" class=\"html\">	&lt;!-- 测试用 --&gt;\n	&lt;bean id=&quot;testService&quot; class=&quot;com.myblog.test.TestService&quot;&gt;\n		&lt;property name=&quot;name&quot; value=&quot;张三&quot; /&gt;\n	&lt;/bean&gt;</pre>\n<div><span style=\"font-family:宋体\"></span><pre code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160414_3_5468216\" name=\"code\" class=\"java\">package com.myblog.test;\npublic class TestService {\n	private String name;\n	public String getName() {\n		return name;\n	}\n	public void setName(String name) {\n		this.name = name;\n	}\n}</pre><pre code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160414_4_4181460\" name=\"code\" class=\"java\">package com.myblog.test;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\npublic class TestMain {\n	public static void main(String[] args) {\n		ApplicationContext applicationContext = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);\n		TestService testService = (TestService) applicationContext.getBean(&quot;testService&quot;);\n		System.out.println(testService.getName());\n	}\n}</pre></div>\n</div>\n<h3>5<span style=\"font-family:宋体\">、引入</span><span style=\"font-family:Calibri\">Hibernate</span><span style=\"font-family:宋体\">开发包。</span></h3>\n<h3>6<span style=\"font-family:宋体\">、在</span><span style=\"font-family:Calibri\">ApplicationContext.xml</span><span style=\"font-family:宋体\">中配置</span><span style=\"font-family:Calibri\">Hibernate</span><span style=\"font-family:宋体\">数据源和</span><span style=\"font-family:Calibri\">SessionFactory</span><span style=\"font-family:宋体\">对象。</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">因为</span><span style=\"font-family:Calibri\">SpringMVC</span><span style=\"font-family:宋体\">中，</span><span style=\"font-family:Calibri\">Spring</span><span style=\"font-family:宋体\">接管了</span><span style=\"font-family:Calibri\">hibernate.cfg.xml</span><span style=\"font-family:宋体\">配置文件的功能</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">。</span></h3>\n<h4>&nbsp;&nbsp;&nbsp;&nbsp;6.1<span style=\"font-family:宋体\">、配置数据源。</span></h4>\n<pre code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_1_5700125\" code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_1_5700125\" name=\"code\" class=\"html\">        &lt;!-- 配置数据源 --&gt;\n    	&lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot; destroy-method=&quot;close&quot;&gt;\n    		&lt;property name=&quot;driverClassName&quot; value=&quot;oracle.jdbc.driver.OracleDriver&quot; /&gt;\n    		&lt;property name=&quot;url&quot; value=&quot;jdbc:oracle:thin:@127.0.0.1:1521:SWITCH&quot; /&gt;\n    		&lt;property name=&quot;username&quot; value=&quot;scott&quot; /&gt;\n    		&lt;property name=&quot;password&quot; value=&quot;123456&quot; /&gt;\n    		\n    		&lt;!-- 连接池启动时初始值 --&gt;\n    		&lt;property name=&quot;initialSize&quot; value=&quot;3&quot; /&gt;\n    		&lt;!-- 连接池的最大值 --&gt;\n    		&lt;property name=&quot;maxActive&quot; value=&quot;500&quot; /&gt;\n    		&lt;!-- 最大空闲值，当经历一个高峰时间后，连接池可以慢慢将已经不用的连接慢慢释放一部分，一直减少到maxIdle为止 --&gt;\n    		&lt;property name=&quot;maxIdle&quot; value=&quot;2&quot; /&gt;\n    		&lt;!-- 最小空闲值，当空闲的连接数少于阈值时，连接池会预申请一些连接，以免洪峰来时来不及申请 --&gt;\n    		&lt;property name=&quot;minIdle&quot; value=&quot;1&quot; /&gt;\n    	&lt;/bean&gt;</pre>\n<h4>&nbsp; &nbsp; 6.2<span style=\"font-family:宋体\">、配置</span><span style=\"font-family:Calibri\">SessionFactory</span><span style=\"font-family:宋体\">对象。</span></h4>\n<pre code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_2_9145688\" code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_2_9145688\" name=\"code\" class=\"html\">        &lt;!-- 配置SessionFactory(Spring数据源) --&gt;\n    	&lt;bean id=&quot;sessionFactory&quot; class=&quot;org.springframework.orm.hibernate3.LocalSessionFactoryBean&quot;&gt;\n    		&lt;!-- 设置数据源 --&gt;\n    		&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;\n    		&lt;!-- 接管了Hibernate对象映射文件 --&gt;\n    		&lt;property name=&quot;mappingResources&quot;&gt;\n    			&lt;list&gt;\n    				&lt;value&gt;com/pc/domain/Employee.hbm.xml&lt;/value&gt;\n    				&lt;value&gt;com/pc/domain/Department.hbm.xml&lt;/value&gt;\n    			&lt;/list&gt;\n    		&lt;/property&gt;\n    		&lt;property name=&quot;hibernateProperties&quot;&gt;\n    			&lt;value&gt;\n	        		hibernate.dialect=org.hibernate.dialect.OracleDialect\n	        		hibernate.hbm2ddl.auto=update\n					hibernate.show_sql=true\n					hibernate.format_sql=true\n	 			&lt;/value&gt;\n    		&lt;/property&gt;\n    	&lt;/bean&gt;</pre>\n<h3>7<span style=\"font-family:宋体\">、编写</span><span style=\"font-family:Calibri\">Domain</span><span style=\"font-family:宋体\">类和相应的映射文件。</span></h3>\n<h3>8<span style=\"font-family:宋体\">、编写测试程序，测试</span><span style=\"font-family:Calibri\">Spring</span><span style=\"font-family:宋体\">框架和</span><span style=\"font-family:Calibri\">Hibernate</span><span style=\"font-family:宋体\">框架是够可以结合使用。</span></h3>\n<h3>9<span style=\"font-family:宋体\">、采用接口编程的方式，编写</span><span style=\"font-family:Calibri\">Domain</span><span style=\"font-family:宋体\">的服务接口和服务类</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">建议编写通用的基础接口和基础抽象类</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">。</span></h3>\n<div><span style=\"font-family:宋体\"></span>\n<h3>10<span style=\"font-family:宋体\">、使用事务管理器统一管理事务</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">在</span><span style=\"font-family:Calibri\">applicationContext.xml</span><span style=\"font-family:宋体\">中配置</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">。</span></h3>\n</div>\n<h3><span style=\"font-family:宋体\"></span></h3>\n<pre code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_3_7052137\" code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_3_7052137\" name=\"code\" class=\"html\">    	&lt;!-- 配置事务管理器，统一管理sessionFactory的事务 --&gt;\n    	&lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.orm.hibernate3.HibernateTransactionManager&quot;&gt;\n    		&lt;property name=&quot;sessionFactory&quot; ref=&quot;sessionFactory&quot; /&gt;\n    	&lt;/bean&gt;\n    	\n    	&lt;!-- 启用事务注解 --&gt;\n    	&lt;tx:annotation-driven transaction-manager=&quot;transactionManager&quot; /&gt;</pre>\n<p>\n<p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：在需要进行事务管理的类添加</span><span style=\"font-family:Calibri\">@Transactional</span></span></p>\n<span style=\"font-family:Calibri\"></span>\n<h3>11<span style=\"font-family:宋体\">、配置</span><span style=\"font-family:Calibri\">Hibernate</span><span style=\"font-family:宋体\">二级缓存。</span></h3>\n<h4>&nbsp;&nbsp;&nbsp;&nbsp;11.1<span style=\"font-family:宋体\">、在</span><span style=\"font-family:Calibri\">SessionFactory</span><span style=\"font-family:宋体\">的</span><span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">中的</span><span style=\"font-family:Calibri\">hibernateProperties</span><span style=\"font-family:宋体\">属性中添加如下语句。</span></h4>\n<pre code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_4_1719200\" code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_4_1719200\" name=\"code\" class=\"html\">hibernate.cache.use_second_level_cache=true\nhibernate.cache.provider_class=org.hibernate.cache.EhCacheProvider\nhibernate.generate_statistics=true</pre>\n<h4>&nbsp; &nbsp; 11.2<span style=\"font-family:宋体\">、在需要缓存的实体</span><span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">的关系映射文件中加入缓存配置项。</span></h4>\n<pre code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_5_2449548\" code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_5_2449548\" name=\"code\" class=\"html\">&lt;cache usage=&quot;read-write&quot;/&gt;</pre>\n<h4>&nbsp; &nbsp; 11.3<span style=\"font-family:宋体\">、将</span><span style=\"font-family:Calibri\">ehcache.properties</span><span style=\"font-family:宋体\">缓存配置文件放在</span><span style=\"font-family:Calibri\">src</span><span style=\"font-family:宋体\">目录下。</span></h4>\n<h4>&nbsp;&nbsp;&nbsp;&nbsp;11.4<span style=\"font-family:宋体\">、编写测试程序测试二级缓存是否生效。</span></h4>\n<h3>12<span style=\"font-family:宋体\">、引入</span><span style=\"font-family:Calibri\">Struts</span><span style=\"font-family:宋体\">开发包。</span></h3>\n<h3>13<span style=\"font-family:宋体\">、在</span><span style=\"font-family:Calibri\">WEB-INF</span><span style=\"font-family:宋体\">目录下创建</span><span style=\"font-family:Calibri\">struts-config.xml</span><span style=\"font-family:宋体\">文件。</span></h3>\n<h3>14<span style=\"font-family:宋体\">、配置</span><span style=\"font-family:Calibri\">struts-config.xml</span><span style=\"font-family:宋体\">。</span></h3>\n<pre code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_6_1261069\" code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_6_1261069\" name=\"code\" class=\"html\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;\n&lt;!DOCTYPE struts-config PUBLIC &quot;-//Apache Software Foundation//DTD Struts Configuration 1.3//EN&quot; &quot;http://struts.apache.org/dtds/struts-config_1_3.dtd&quot;&gt;\n&lt;struts-config&gt;\n	&lt;form-beans&gt;\n		&lt;!-- 配置登录action表单 --&gt;\n		&lt;form-bean name=&quot;employeeForm&quot; type=&quot;com.pc.web.forms.EmployeeForm&quot; /&gt;\n	&lt;/form-beans&gt;\n	\n	&lt;!-- 配置全局跳转 --&gt;\n	&lt;global-forwards&gt;\n		&lt;forward name=&quot;opererr&quot; path=&quot;/WEB-INF/err.jsp&quot;&gt;&lt;/forward&gt;\n		&lt;forward name=&quot;operok&quot; path=&quot;/WEB-INF/ok.jsp&quot;&gt;&lt;/forward&gt;\n	&lt;/global-forwards&gt;\n	\n	&lt;action-mappings&gt;\n		&lt;!-- 配置登录action --&gt;\n		&lt;action path=&quot;/login&quot; name=&quot;employeeForm&quot; scope=&quot;request&quot;\n			parameter=&quot;type&quot;&gt;\n			&lt;forward name=&quot;ok&quot; path=&quot;/WEB-INF/mainFrame.jsp&quot; /&gt;\n			&lt;forward name=&quot;error&quot; path=&quot;/WEB-INF/login.jsp&quot; /&gt;\n		&lt;/action&gt;\n		\n		&lt;!-- 配置雇员Action --&gt;\n		&lt;action path=&quot;/employee&quot; name=&quot;employeeForm&quot; scope=&quot;request&quot; parameter=&quot;type&quot;&gt;\n			&lt;forward name=&quot;goToAddEmployeeUI&quot; path=&quot;/WEB-INF/addEmployeeUI.jsp&quot; /&gt;\n			&lt;forward name=&quot;goToShowEmployeeUI&quot; path=&quot;/WEB-INF/showEmployeeUI.jsp&quot; /&gt;\n			&lt;forward name=&quot;goToUpdateEmployeeUI&quot; path=&quot;/WEB-INF/updateEmployeeUI.jsp&quot; /&gt;\n		&lt;/action&gt;\n	&lt;/action-mappings&gt;\n\n	&lt;!-- 配置代理请求处理DelegatingRequestProcessor --&gt;\n	&lt;controller&gt;\n		&lt;set-property property=&quot;processorClass&quot;\n			value=&quot;org.springframework.web.struts.DelegatingRequestProcessor&quot; /&gt;\n	&lt;/controller&gt;\n&lt;/struts-config&gt;</pre>\n<h3>15<span style=\"font-family:宋体\">、在</span><span style=\"font-family:Calibri\">web.xml</span><span style=\"font-family:宋体\">中配置</span><span style=\"font-family:Calibri\">struts</span><span style=\"font-family:宋体\">配置文件。</span></h3>\n<pre code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_7_3976284\" code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_7_3976284\" name=\"code\" class=\"html\">	&lt;!-- 配置struts --&gt;\n	&lt;servlet&gt;\n		&lt;servlet-name&gt;action&lt;/servlet-name&gt;\n		&lt;servlet-class&gt;org.apache.struts.action.ActionServlet&lt;/servlet-class&gt;\n		&lt;init-param&gt;\n			&lt;param-name&gt;config&lt;/param-name&gt;\n			&lt;param-value&gt;/WEB-INF/struts-config.xml/&lt;/param-value&gt;\n		&lt;/init-param&gt;\n		&lt;load-on-startup&gt;0&lt;/load-on-startup&gt;\n	&lt;/servlet&gt;\n\n	&lt;servlet-mapping&gt;\n		&lt;servlet-name&gt;action&lt;/servlet-name&gt;\n		&lt;url-pattern&gt;*.do&lt;/url-pattern&gt;\n	&lt;/servlet-mapping&gt;</pre>\n<h3>16<span style=\"font-family:宋体\">、在</span><span style=\"font-family:Calibri\">web.xml</span><span style=\"font-family:宋体\">中初始化</span><span style=\"font-family:Calibri\">Spring</span><span style=\"font-family:宋体\">容器。</span></h3>\n<pre code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_8_6135092\" code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_8_6135092\" name=\"code\" class=\"html\">	&lt;!-- 指定Spring配置文件，默认从web根目录下寻找配置文件，可以通过Spring提供的classpath:前缀指定从类路径下寻找 --&gt;\n	&lt;context-param&gt;\n		&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n		&lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;\n	&lt;/context-param&gt;\n\n	&lt;!-- 对Spring容器进行实例化 --&gt;\n	&lt;listener&gt;\n		&lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n	&lt;/listener&gt;</pre>\n<h3>17<span style=\"font-family:宋体\">、用</span><span style=\"font-family:Calibri\">Spring</span><span style=\"font-family:宋体\">接管</span><span style=\"font-family:Calibri\">Struts(action)</span><span style=\"font-family:宋体\">。</span></h3>\n<h4>&nbsp;&nbsp;&nbsp;&nbsp;17.1<span style=\"font-family:宋体\">、在</span><span style=\"font-family:Calibri\">struts-config.xml</span><span style=\"font-family:宋体\">配置文件中添加如下配置代码。</span></h4>\n<pre code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_9_9930102\" code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_9_9930102\" name=\"code\" class=\"html\">	&lt;!-- 配置代理请求处理DelegatingRequestProcessor --&gt;\n	&lt;controller&gt;\n		&lt;set-property property=&quot;processorClass&quot;\n			value=&quot;org.springframework.web.struts.DelegatingRequestProcessor&quot; /&gt;\n	&lt;/controller&gt;</pre>\n<h4>&nbsp; &nbsp; 17.2<span style=\"font-family:宋体\">、在</span><span style=\"font-family:Calibri\">ApplicationContext.xml</span><span style=\"font-family:宋体\">中配置</span><span style=\"font-family:Calibri\">action</span><span style=\"font-family:宋体\">路径。</span></h4>\n<pre code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_10_5120553\" code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_10_5120553\" name=\"code\" class=\"html\">    	&lt;!-- 配置action --&gt;\n    	&lt;!-- 配置登录action --&gt;\n    	&lt;bean name=&quot;/login&quot; class=&quot;com.pc.web.action.LoginAction&quot; scope=&quot;prototype&quot;&gt;\n    		&lt;property name=&quot;employeeServiceInter&quot; ref=&quot;employeeService&quot; /&gt;\n    	&lt;/bean&gt;\n    	&lt;!-- 配置雇员action --&gt;\n    	&lt;bean name=&quot;/employee&quot; class=&quot;com.pc.web.action.EmployeeAction&quot; scope=&quot;prototype&quot;&gt;\n    		&lt;property name=&quot;departmentServiceInter&quot; ref=&quot;departmentService&quot; /&gt;\n    		&lt;property name=&quot;employeeServiceInter&quot; ref=&quot;employeeService&quot; /&gt;\n    	&lt;/bean&gt;</pre>\n<h4>&nbsp; &nbsp; 17.3<span style=\"font-family:宋体\">、编写测试程序，测试</span><span style=\"font-family:Calibri\">Spring</span><span style=\"font-family:宋体\">接管</span><span style=\"font-family:Calibri\">Struts</span><span style=\"font-family:宋体\">是否成功。</span></h4>\n<h3>18<span style=\"font-family:宋体\">、解决中文乱码问题</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">两种方法选一种就行了</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">。</span></h3>\n<h4>&nbsp;&nbsp;&nbsp;&nbsp;18.1<span style=\"font-family:宋体\">、自己开发</span><span style=\"font-family:Calibri\">Filter</span><span style=\"font-family:宋体\">。</span></h4>\n<pre code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_11_6407309\" code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_11_6407309\" name=\"code\" class=\"java\">package com.pc.web.filter;\n\nimport java.io.IOException;\nimport java.io.PrintWriter;\n\nimport javax.servlet.Filter;\nimport javax.servlet.FilterChain;\nimport javax.servlet.FilterConfig;\nimport javax.servlet.ServletException;\nimport javax.servlet.ServletRequest;\nimport javax.servlet.ServletResponse;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n/**\n * \n * @author Switch\n * @function 过滤中文乱码\n * @description\n *\n */\npublic class MyFilter extends HttpServlet implements Filter {\n\n	@Override\n	public void doFilter(ServletRequest request, ServletResponse response,\n			FilterChain chain) throws IOException, ServletException {\n		// 设置编码\n		request.setCharacterEncoding(&quot;utf-8&quot;);\n		response.setCharacterEncoding(&quot;utf-8&quot;);\n		response.setContentType(&quot;text/html;charset=utf-8&quot;);\n		chain.doFilter(request, response);\n	}\n\n	@Override\n	public void init(FilterConfig arg0) throws ServletException {\n		// TODO Auto-generated method stub\n\n	}\n}</pre><br>\n<pre code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_12_8773860\" code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_12_8773860\" name=\"code\" class=\"html\">	&lt;!-- 配置自定义编码过滤器 --&gt;\n	&lt;filter&gt;\n		&lt;filter-name&gt;MyFilter&lt;/filter-name&gt;\n		&lt;filter-class&gt;com.pc.web.filter.MyFilter&lt;/filter-class&gt;\n	&lt;/filter&gt;\n	&lt;filter-mapping&gt;\n		&lt;filter-name&gt;MyFilter&lt;/filter-name&gt;\n		&lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n	&lt;/filter-mapping&gt;</pre>\n<h4>&nbsp; &nbsp; 18.2<span style=\"font-family:宋体\">、使用</span><span style=\"font-family:Calibri\">Spring</span><span style=\"font-family:宋体\">框架提供的处理中文乱码的过滤器。</span></h4>\n<pre code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_13_3964311\" code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_13_3964311\" name=\"code\" class=\"html\">	&lt;!-- 配置Spring提供的编码过滤器 --&gt;\n	&lt;filter&gt;\n		&lt;filter-name&gt;encoding&lt;/filter-name&gt;\n		&lt;filter-class&gt;org.springframework.web.filter.CharacterEncodingFilter&lt;/filter-class&gt;\n		&lt;init-param&gt;\n			&lt;param-name&gt;encoding&lt;/param-name&gt;\n			&lt;param-value&gt;UTF-8&lt;/param-value&gt;\n		&lt;/init-param&gt;\n	&lt;/filter&gt;\n	&lt;filter-mapping&gt;\n		&lt;filter-name&gt;encoding&lt;/filter-name&gt;\n		&lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n	&lt;/filter-mapping&gt;</pre><br>\n<h3>补充<span style=\"font-family:Calibri\">1</span><span style=\"font-family:宋体\">：使用注解方式填充</span><span style=\"font-family:Calibri\">Bean</span><span style=\"font-family:宋体\">的属性。</span></h3>\n<h4>1<span style=\"font-family:宋体\">、将</span><span style=\"font-family:Calibri\">Bean</span><span style=\"font-family:宋体\">原有的属性配置清空。</span></h4>\n<pre code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_14_8839116\" code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_14_8839116\" name=\"code\" class=\"html\">        &lt;!-- 配置EmployeeService对象，通过注解的方式来注入属性值,spring会启用byName的方式注入属性值 --&gt;\n    	&lt;bean id=&quot;employeeService&quot; class=&quot;com.pc.service.imp.EmployeeService&quot; /&gt;</pre>\n<h4>2<span style=\"font-family:宋体\">、在需填充属性添加</span><span style=\"font-family:Calibri\">@Resource</span></h4>\n<pre code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_15_5283303\" code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_15_5283303\" name=\"code\" class=\"java\">	// 当给某个属性增加了@Resource后，spring会启用byName的方式注入属性值\n	@Resource\n	private SessionFactory sessionFactory;</pre>\n<h4>3<span style=\"font-family:宋体\">、启动注解。</span></h4>\n<pre code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_16_6570059\" code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_16_6570059\" name=\"code\" class=\"html\">    	&lt;!-- 启用注解扫描 --&gt;\n    	&lt;context:annotation-config /&gt;</pre><br>\n<h3>补充<span style=\"font-family:Calibri\">2</span><span style=\"font-family:宋体\">：使用</span><span style=\"font-family:Calibri\">openSessionInView</span><span style=\"font-family:宋体\">的方式，解决；懒加载问题</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">在</span><span style=\"font-family:Calibri\">web.xml</span><span style=\"font-family:宋体\">文件中添加如下代码</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">。</span></h3>\n<pre code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_17_3396713\" code_snippet_id=\"1593294\" snippet_file_name=\"blog_20160301_17_3396713\" name=\"code\" class=\"html\">	&lt;!-- 配置Spring的OpenSessionInView过滤器解决懒加载 --&gt;\n	&lt;filter&gt;\n		&lt;filter-name&gt;OpenSessionInViewFilter&lt;/filter-name&gt;\n		&lt;filter-class&gt;org.springframework.orm.hibernate3.support.OpenSessionInViewFilter&lt;/filter-class&gt;\n	&lt;/filter&gt;\n	&lt;filter-mapping&gt;\n		&lt;filter-name&gt;OpenSessionInViewFilter&lt;/filter-name&gt;\n		&lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n	&lt;/filter-mapping&gt;</pre>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：</span></span><span style=\"color:rgb(255,0,0)\">该方法可以有效的减少对数据库的查询，缺点是和</span><span style=\"color:rgb(255,0,0)\">用户对</span><span style=\"color:rgb(255,0,0)\">session</span><span style=\"color:rgb(255,0,0)\">持有</span><span style=\"color:rgb(255,0,0)\">时间延长了</span><span style=\"color:rgb(255,0,0)\">。</span></p>\n<br>\n<h2>源代码：</h2>\n<p><a target=\"_blank\" target=\"_blank\" href=\"http://download.csdn.net/detail/q547550831/9448390\"><span style=\"color:rgb(128,0,128)\">SpringMVC<span style=\"font-family:宋体\">实战</span><span style=\"font-family:Calibri\">-</span><span style=\"font-family:宋体\">雇员薪资管理系统</span></span></a></p>\n<br>\n   \n', '2016-04-16 01:21:07', '0');
INSERT INTO `article` VALUES ('10032', '10003', 'Hibernate细节', '\n\n<p><span style=\"font-size:18px\"></span></p>\n<h1 style=\"text-align:center\">Hibernate<span style=\"font-family:宋体\">细节</span></h1>\n<p>\n<p><span style=\"font-size:18px\"></span></p>\n<h2>Hibernate<span style=\"font-family:宋体\">核心类与接口</span></h2>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160208012043066\" alt=\"\"></div>\n<p>\n<p><span style=\"font-size:18px\"></span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：</span><span style=\"font-family:Calibri\">Hibernate</span><span style=\"font-family:宋体\">核心类与接口就是</span><span style=\"font-family:Calibri\">Hibernate</span><span style=\"font-family:宋体\">框架的核心部分，通过对最底层配置文件的配置，将数据库与</span><span style=\"font-family:Calibri\">Java&nbsp;POJO</span><span style=\"font-family:宋体\">进行映射，通过</span><span style=\"font-family:Calibri\">Configuration</span><span style=\"font-family:宋体\">对象加载配置文件，再通过</span><span style=\"font-family:Calibri\">SessionFactory</span><span style=\"font-family:宋体\">创建</span><span style=\"font-family:Calibri\">Session</span><span style=\"font-family:宋体\">，得到会话之后就能进行</span><span style=\"font-family:Calibri\">CUD</span><span style=\"font-family:宋体\">操作，然后可以使用</span><span style=\"font-family:Calibri\">Criteria</span><span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">Query</span><span style=\"font-family:宋体\">进行</span><span style=\"font-family:Calibri\">R</span><span style=\"font-family:宋体\">操作。当然在</span><span style=\"font-family:Calibri\">CRUD</span><span style=\"font-family:宋体\">操作，请不要忘了</span><span style=\"font-family:Calibri\">Transaction</span><span style=\"font-family:宋体\">这个事务控制接口。</span></span></p>\n<br>\n<p><span style=\"font-size:18px\"></span></p>\n<h3>1<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">Configuration</span><span style=\"font-family:宋体\">类</span></h3>\n<p>\n<p>Configuration<span style=\"font-family:宋体\">类的作用如下：</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;1<span style=\"font-family:宋体\">、</span>负责管理<span style=\"font-family:Calibri\">hibernate</span><span style=\"font-family:宋体\">的配置信息</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;2<span style=\"font-family:宋体\">、</span>读取<span style=\"font-family:Calibri\">hibernate.cfg.xml</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;3<span style=\"font-family:宋体\">、</span>加载<span style=\"font-family:Calibri\">hibernate.cfg.xml</span><span style=\"font-family:宋体\">配置文件中配置的驱动</span><span style=\"font-family:Calibri\">,url,</span><span style=\"font-family:宋体\">用户名</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">密码</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">连接池</span>等</p>\n<p>4<span style=\"font-family:宋体\">、</span>管理&nbsp;<span style=\"font-family:Calibri\">*.hbm.xml</span><span style=\"font-family:宋体\">对象</span>映射文件</p>\n<h4>基本语法：</h4>\n<pre code_snippet_id=\"1575984\" snippet_file_name=\"blog_20160208_1_7249243\" code_snippet_id=\"1575984\" snippet_file_name=\"blog_20160208_1_7249243\" name=\"code\" class=\"java\">Configuration configuration = new Configuration().configure();</pre>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：请注意</span><span style=\"font-family:Calibri\">configure()</span><span style=\"font-family:宋体\">方法是个重载方法，常用的有不带参数的和带一个</span><span style=\"font-family:Calibri\">String</span><span style=\"font-family:宋体\">参数的，不带参数的默认加载</span><span style=\"font-family:Calibri\">src</span><span style=\"font-family:宋体\">目录下的</span><span style=\"font-family:Calibri\">hibernate.cfg.xml</span><span style=\"font-family:宋体\">文件，带参数的可以自己指定加载文件位置。</span></span></p>\n<br>\n<h3>2<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">Hibernate.cfg.xml</span><span style=\"font-family:宋体\">文件</span></h3>\n<p>Hibernate.cfg.xml<span style=\"font-family:宋体\">文件的作用如下：</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;1<span style=\"font-family:宋体\">、</span>该文件主要用于指定各个参数<span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">是</span><span style=\"font-family:Calibri\">hibernate</span><span style=\"font-family:宋体\">核心文件</span></p>\n<p>2<span style=\"font-family:宋体\">、</span>默认放在<span style=\"font-family:Calibri\">src</span><span style=\"font-family:宋体\">目录下，也可以放在别的目录下</span></p>\n<p>3<span style=\"font-family:宋体\">、</span>指定连接数据库的驱动、用户名、密码、<span style=\"font-family:Calibri\">url</span><span style=\"font-family:宋体\">、连接池</span>等</p>\n<p>4<span style=\"font-family:宋体\">、</span>指定对象关系映射文件的位置</p>\n<p>5<span style=\"font-family:宋体\">、</span>也可使用<span style=\"font-family:Calibri\">hibernate.properties</span><span style=\"font-family:宋体\">文件来替代该文件</span><span style=\"font-family:Calibri\">.(</span><span style=\"font-family:宋体\">推荐使用</span><span style=\"font-family:Calibri\">hibernate.cfg.xml)</span></p>\n<p>hibernate.cfg.xml<span style=\"font-family:宋体\">案例：</span></p>\n<pre code_snippet_id=\"1575984\" snippet_file_name=\"blog_20160208_2_6977026\" code_snippet_id=\"1575984\" snippet_file_name=\"blog_20160208_2_6977026\" name=\"code\" class=\"html\">&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC\n        &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\n        &quot;http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd&quot;&gt;\n\n&lt;hibernate-configuration&gt;\n\n    &lt;session-factory&gt;\n\n        &lt;!-- Database connection settings --&gt;\n        &lt;property name=&quot;connection.driver_class&quot;&gt;org.hsqldb.jdbcDriver&lt;/property&gt;\n        &lt;property name=&quot;connection.url&quot;&gt;jdbc:hsqldb:hsql://localhost&lt;/property&gt;\n        &lt;property name=&quot;connection.username&quot;&gt;sa&lt;/property&gt;\n        &lt;property name=&quot;connection.password&quot;&gt;&lt;/property&gt;\n\n        &lt;!-- JDBC connection pool (use the built-in) --&gt;\n        &lt;property name=&quot;connection.pool_size&quot;&gt;2&lt;/property&gt;\n\n        &lt;!-- SQL dialect --&gt;\n        &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.HSQLDialect&lt;/property&gt;\n\n        &lt;!-- Enable Hibernate&#39;s current session context --&gt;\n        &lt;property name=&quot;current_session_context_class&quot;&gt;org.hibernate.context.ManagedSessionContext&lt;/property&gt;\n\n        &lt;!-- Disable the second-level cache  --&gt;\n        &lt;property name=&quot;cache.provider_class&quot;&gt;org.hibernate.cache.NoCacheProvider&lt;/property&gt;\n\n        &lt;!-- Echo all executed SQL to stdout --&gt;\n        &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\n\n        &lt;!-- Drop and re-create the database schema on startup --&gt;\n        &lt;property name=&quot;hbm2ddl.auto&quot;&gt;create&lt;/property&gt;\n\n        &lt;mapping resource=&quot;org/hibernate/tutorial/domain/Event.hbm.xml&quot;/&gt;\n        &lt;mapping resource=&quot;org/hibernate/tutorial/domain/Person.hbm.xml&quot;/&gt;\n\n    &lt;/session-factory&gt;\n\n&lt;/hibernate-configuration&gt;</pre><br>\n<h3>3<span style=\"font-family:宋体\">、对象关系映射文件</span><span style=\"font-family:Calibri\">(*.hbm.xml)</span></h3>\n<p>对象关系映射文件的作用：</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;1<span style=\"font-family:宋体\">、</span>该文件主要作用是建立表和类的映射关系，是不可或缺的重要文件</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;2<span style=\"font-family:宋体\">、</span>一般放在其映射的类同一个目录下<span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">但不是必须的</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;3<span style=\"font-family:宋体\">、</span>命名方式一般是类名<span style=\"font-family:Calibri\">.hbm.xml,</span><span style=\"font-family:宋体\">但不是必须的</span></p>\n<h4>对象关系映射文件示意图</h4>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160208012632778\" alt=\"\"></div>\n<p><span style=\"font-size:18px\"><br>\n</span></p>\n<p><span style=\"font-size:18px\"></span></p>\n<h3>4<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">SessionFactory(</span><span style=\"font-family:宋体\">会话工厂接口</span><span style=\"font-family:Calibri\">)</span></h3>\n<p>\n<p>会话工厂接口的作用：</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;1<span style=\"font-family:宋体\">、可以缓存</span><span style=\"font-family:Calibri\">SQL</span><span style=\"font-family:宋体\">语句和数据</span><span style=\"font-family:Calibri\">(Session</span><span style=\"font-family:宋体\">级缓存</span><span style=\"font-family:Calibri\">[</span><span style=\"font-family:宋体\">一级缓存</span><span style=\"font-family:Calibri\">])</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;2<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">SessionFactory</span><span style=\"font-family:宋体\">是一个重量级对象，所以最好是保证一个数据库对应于一个</span><span style=\"font-family:Calibri\">SessionFactory</span><span style=\"font-family:宋体\">。示意图如下：</span></p>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160208012933000\" alt=\"\"></div>\n<p><span style=\"font-size:18px\"></span></p>\n<p>&nbsp; &nbsp; 3<span style=\"font-family:宋体\">、获取</span><span style=\"font-family:Calibri\">Session</span><span style=\"font-family:宋体\">，有</span><span style=\"font-family:Calibri\">openSession()</span><span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">getCurrentSession()</span><span style=\"font-family:宋体\">两个方法。</span></p>\n<p><span style=\"color:rgb(255,0,0)\">1<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">openSession()</span><span style=\"font-family:宋体\">获取一个新的</span><span style=\"font-family:Calibri\">Session</span><span style=\"font-family:宋体\">。</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">2<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">getCurrentSession()</span><span style=\"font-family:宋体\">获取和当前线程绑定的</span><span style=\"font-family:Calibri\">Session</span><span style=\"font-family:宋体\">，也就是说，在同一个线程中，获取的</span><span style=\"font-family:Calibri\">Session</span><span style=\"font-family:宋体\">一定是同一个</span><span style=\"font-family:Calibri\">Session</span><span style=\"font-family:宋体\">，这样的话有利于事务控制。如果使用</span><span style=\"font-family:Calibri\">getCurrentSession()</span><span style=\"font-family:宋体\">的话，需要在</span><span style=\"font-family:Calibri\">hibernate.cfg.xml</span><span style=\"font-family:宋体\">中进行配置。</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">3<span style=\"font-family:宋体\">、如何选择使用</span><span style=\"font-family:Calibri\">openSession()</span><span style=\"font-family:宋体\">还是</span><span style=\"font-family:Calibri\">getCurrentSession()</span></span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;3.1<span style=\"font-family:宋体\">、如果需要在同一线程中，保证使用同一个</span><span style=\"font-family:Calibri\">Session</span><span style=\"font-family:宋体\">，则使用</span><span style=\"font-family:Calibri\">getCurrentSession()</span><span style=\"font-family:宋体\">。</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;3.2<span style=\"font-family:宋体\">、如果需要使用不同的</span><span style=\"font-family:Calibri\">Session</span><span style=\"font-family:宋体\">，则使用</span><span style=\"font-family:Calibri\">openSession()</span><span style=\"font-family:宋体\">。</span></p>\n<p><span style=\"color:rgb(255,0,0)\">4<span style=\"font-family:宋体\">、通过</span><span style=\"font-family:Calibri\">getCurrentSession()</span><span style=\"font-family:宋体\">获取的</span><span style=\"font-family:Calibri\">Session</span><span style=\"font-family:宋体\">在事务提交后，会自动关闭，通过</span><span style=\"font-family:Calibri\">openSession()</span><span style=\"font-family:宋体\">获得的</span><span style=\"font-family:Calibri\">session</span><span style=\"font-family:宋体\">则必须手动关闭。</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">5<span style=\"font-family:宋体\">、通过</span><span style=\"font-family:Calibri\">getCurrentSession()</span><span style=\"font-family:宋体\">获取</span><span style=\"font-family:Calibri\">Session</span><span style=\"font-family:宋体\">，</span><span style=\"font-family:Calibri\">CRUD</span><span style=\"font-family:宋体\">都要进行事务处理，通过</span><span style=\"font-family:Calibri\">openSession()</span><span style=\"font-family:宋体\">，查询操作可以不进行事务处理。</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">6<span style=\"font-family:宋体\">、在&nbsp;</span><span style=\"font-family:Calibri\">SessionFactory</span><span style=\"font-family:宋体\">启动的时候，</span><span style=\"font-family:Calibri\">Hibernate&nbsp;</span><span style=\"font-family:宋体\">会根据配置创建相应的&nbsp;</span><span style=\"font-family:Calibri\">CurrentSessionContext</span><span style=\"font-family:宋体\">，在</span><span style=\"font-family:Calibri\">getCurrentSession()</span><span style=\"font-family:宋体\">被调用的时候，实际被执行的方法是&nbsp;</span><span style=\"font-family:Calibri\">CurrentSessionContext.currentSession()</span><span style=\"font-family:宋体\">。在</span><span style=\"font-family:Calibri\">currentSession()</span><span style=\"font-family:宋体\">执行时，如果当前</span><span style=\"font-family:Calibri\">Session</span><span style=\"font-family:宋体\">为空，</span><span style=\"font-family:Calibri\">currentSession</span><span style=\"font-family:宋体\">会调用</span><span style=\"font-family:Calibri\">SessionFactory</span><span style=\"font-family:宋体\">的</span><span style=\"font-family:Calibri\">openSession</span><span style=\"font-family:宋体\">。</span></span></p>\n<br>\n<p><span style=\"font-size:18px\"></span></p>\n<h4>基本语法：</h4>\n<pre code_snippet_id=\"1575984\" snippet_file_name=\"blog_20160208_3_5482527\" code_snippet_id=\"1575984\" snippet_file_name=\"blog_20160208_3_5482527\" name=\"code\" class=\"java\">Configuration configuration = new Configuration().configure();\nSessionFactory sessionFactory = configuration.buildSessionFactory();</pre><br>\n<h4>补充：全局事务和本地事务</h4>\n<p>\n<p>本地事务是针对一个数据库的事务，其所有操作都是在一个数据库上面进行的。</p>\n<p>全局事务是指跨数据库的事务，可以是一台主机上面的不同数据库，也可以是不同主机上面的不同数据库。</p>\n<br>\n<p><span style=\"font-size:18px\"></span></p>\n<h4>补充：<span style=\"font-family:Calibri\">getCurrentSession()</span><span style=\"font-family:宋体\">线程会话</span></h4>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160208013206112\" alt=\"\"></div>\n<p>\n<p><span style=\"font-size:18px\"><br>\n</span></p>\n<p><span style=\"font-size:18px\"></span></p>\n<h4>补充：获取<span style=\"font-family:Calibri\">Session</span><span style=\"font-family:宋体\">工具类</span></h4>\n<pre code_snippet_id=\"1575984\" snippet_file_name=\"blog_20160208_4_1338853\" code_snippet_id=\"1575984\" snippet_file_name=\"blog_20160208_4_1338853\" name=\"code\" class=\"java\">package com.pc.util;\n\nimport org.hibernate.SessionFactory;\nimport org.hibernate.cfg.Configuration;\nimport org.hibernate.classic.Session;\n\n/**\n * \n * @author Switch\n * @function 生成会话\n * @description 获取当前会话或者是创建新会话\n *\n */\npublic final class HibernateUtil {\n	// 会话工厂\n	private static SessionFactory sessionFactory = null;\n	// 线程局部变量模式\n	private static ThreadLocal&lt;Session&gt; threadLocal = new ThreadLocal&lt;Session&gt;();\n	// 单例化，构造方法私有\n	private HibernateUtil(){}\n	\n	// 静态代码块创建会话工厂\n	static {\n		sessionFactory = new Configuration().configure().buildSessionFactory();\n	}\n	\n	// 获取全新的Session\n	public static Session getOpenSession(){\n		return sessionFactory.openSession();\n	}\n	\n	// 获取和线程关联的Session\n	public static Session getCurrentSession(){\n		// 判断是否得到\n		Session session = threadLocal.get();\n		if(session == null){\n			session = sessionFactory.openSession();\n			// 把Session对象设置到threadLocal，相当于该session和线程绑定\n			threadLocal.set(session);\n		}\n		return session;\n	}\n}</pre>\n<p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：通过</span><span style=\"font-family:Calibri\">ThreadLocal</span><span style=\"font-family:宋体\">类可以将变量的作用域扩展为线程级，也就是说在本线程使用的都是同一个变量。遗憾的是该类只支持本地</span><span style=\"font-family:Calibri\">Session</span><span style=\"font-family:宋体\">。</span></span></p>\n<br>\n<h3>5<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">Session</span><span style=\"font-family:宋体\">接口</span></h3>\n<p>会话接口的作用：</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;1<span style=\"font-family:宋体\">、</span>Session<span style=\"font-family:宋体\">一个实例代表与数据库的一次操作</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">一次操作可以是</span><span style=\"font-family:Calibri\">crud</span><span style=\"font-family:宋体\">组合</span><span style=\"font-family:Calibri\">)</span>，相当于<span style=\"font-family:Calibri\">JDBC</span><span style=\"font-family:宋体\">里面的</span><span style=\"font-family:Calibri\">Connection</span><span style=\"font-family:宋体\">接口实例。</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;2<span style=\"font-family:宋体\">、</span>Session<span style=\"font-family:宋体\">实例通过</span><span style=\"font-family:Calibri\">SessionFactory</span><span style=\"font-family:宋体\">获取，用完需要关闭。</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;3<span style=\"font-family:宋体\">、</span>Session<span style=\"font-family:宋体\">是线程不同步的</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">不安全</span>的),<span style=\"font-family:宋体\">因此要保证在同一线程中使用</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">可以</span>使用<span style=\"font-family:Calibri\">getCurrentSessiong()</span><span style=\"font-family:宋体\">。</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;4<span style=\"font-family:宋体\">、</span>Session<span style=\"font-family:宋体\">可以看做是持久化管理器</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">它是与持久化操作相关的接口</span>。</p>\n<p>&nbsp;</p>\n<h4>基本语法：</h4>\n<pre code_snippet_id=\"1575984\" snippet_file_name=\"blog_20160208_5_4719942\" code_snippet_id=\"1575984\" snippet_file_name=\"blog_20160208_5_4719942\" name=\"code\" class=\"java\">Configuration configuration = new Configuration().configure();\nSessionFactory sessionFactory = configuration.buildSessionFactory();\nSession session = sessionFactory.getCurrentSession();	// 需要配置\n// 或者是: Session session = sessionFactory.openSession();</pre>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：还可以写工具类来实现，具体参照</span><span style=\"font-family:Calibri\">SessionFactory</span><span style=\"font-family:宋体\">接口内容。</span></span></p>\n<br>\n<h4>重要方法</h4>\n<h5>1<span style=\"font-family:宋体\">、保存一个对象</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">记录</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">——</span><span style=\"font-family:Calibri\">sava</span><span style=\"font-family:宋体\">方法</span></h5>\n<pre code_snippet_id=\"1575984\" snippet_file_name=\"blog_20160208_6_2004727\" code_snippet_id=\"1575984\" snippet_file_name=\"blog_20160208_6_2004727\" name=\"code\" class=\"java\">    // 添加员工\n	public static void addEmployee() {\n		// 1.创建Configuration对象，该对象用于读取hibernate.cfg.xml，并完成初始化\n		// configure默认载入hibernate.cfg.xml文件，可以指定需要载入的xml\n		Configuration configuration = new Configuration().configure();\n		// 2.创建SessionFactory对象(这是一个会话工厂，是一个重量级的对象)\n		SessionFactory sessionFactory = configuration.buildSessionFactory();\n		// 3.创建Session(用于与数据库的对话，相当于JDBC中的Connection)\n		Session session = sessionFactory.openSession();\n		// 4.对Hibernate而言，要求程序员，在进行增加、删除、修改的时候使用事务提交，否则不生效\n		Transaction transaction = session.beginTransaction();\n		// 添加一个雇员\n		Employee employee = new Employee();\n		employee.setName(&quot;zs&quot;);\n		employee.setEmail(&quot;123456@switch.com&quot;);\n		employee.setHiredate(new Date());\n		// 保存\n		// ---&gt;insert into ...[被hibernate封装]\n		session.save(employee);\n		// 提交\n		transaction.commit();\n		session.close();\n	}</pre><br>\n<h5>2<span style=\"font-family:宋体\">、删除一个对象</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">记录</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">——</span><span style=\"font-family:Calibri\">delete</span><span style=\"font-family:宋体\">方法</span></h5>\n<pre code_snippet_id=\"1575984\" snippet_file_name=\"blog_20160208_7_1274379\" code_snippet_id=\"1575984\" snippet_file_name=\"blog_20160208_7_1274379\" name=\"code\" class=\"java\">	// 删除员工信息\n	public static void deleteEmployee() {\n		// 获取一个会话\n		Session session = HibernateUtil.getCurrentSession();\n\n		// 创建一个事务\n		Transaction transaction = null;\n		try {\n			transaction = session.beginTransaction();\n			// 1.获取该雇员\n			Employee employee = (Employee) session.load(Employee.class, 3);\n			// 2.删除该雇员\n			session.delete(employee);\n			// 提交\n			transaction.commit();\n		} catch (Exception e) {\n			// TODO: handle exception\n			if (transaction != null) {\n				transaction.rollback();\n			}\n			throw new RuntimeException(e.getMessage());\n		} finally {\n			if (session != null &amp;&amp; session.isOpen()) {\n				session.close();\n			}\n		}\n	}</pre><br>\n<h5>3<span style=\"font-family:宋体\">、查询一个对象</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">记录</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">——</span><span style=\"font-family:Calibri\">get/load</span><span style=\"font-family:宋体\">方法</span></h5>\n<h6>get()<span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">load()</span><span style=\"font-family:宋体\">的区别</span></h6>\n<p>1<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">get()</span><span style=\"font-family:宋体\">方法直接返回实体类</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">如果查不到数据则返回</span><span style=\"font-family:Calibri\">null</span><span style=\"font-family:宋体\">。</span><span style=\"font-family:Calibri\">load()</span><span style=\"font-family:宋体\">会返回一个实体代理对象（当前这个对象可以自动转化为实体对象），但当代理对象被调用时，如果没有数据不存在，就会抛出个</span><span style=\"font-family:Calibri\">org.hibernate.ObjectNotFoundException</span><span style=\"font-family:宋体\">异常</span></p>\n<p>2、load<span style=\"font-family:宋体\">先到缓存</span><span style=\"font-family:Calibri\">(session</span><span style=\"font-family:宋体\">缓存</span><span style=\"font-family:Calibri\">/</span><span style=\"font-family:宋体\">二级缓存</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">中去查，如果没有则返回一个代理对象（不马上到</span><span style=\"font-family:Calibri\">DB</span><span style=\"font-family:宋体\">中去找），等后面使用这个代理对象操作的时候，才到</span><span style=\"font-family:Calibri\">DB</span><span style=\"font-family:宋体\">中查询</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">这就是我们常说的</span><span style=\"font-family:Calibri\">load</span><span style=\"font-family:宋体\">在默认情况下支持延迟加载（</span><span style=\"font-family:Calibri\">lazy</span><span style=\"font-family:宋体\">）</span>。可通过在<span style=\"font-family:Calibri\">Xxx.hbm.xml</span><span style=\"font-family:宋体\">中</span><span style=\"font-family:Calibri\">class</span><span style=\"font-family:宋体\">元素中将</span><span style=\"font-family:Calibri\">lazy</span><span style=\"font-family:宋体\">属性设置为</span><span style=\"font-family:Calibri\">false</span><span style=\"font-family:宋体\">来取消延迟加载。</span></p>\n<p>3、&nbsp;get<span style=\"font-family:宋体\">先到缓存</span><span style=\"font-family:Calibri\">(session</span><span style=\"font-family:宋体\">缓存</span><span style=\"font-family:Calibri\">/</span><span style=\"font-family:宋体\">二级缓存</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">中去查，如果没有就到</span><span style=\"font-family:Calibri\">DB</span><span style=\"font-family:宋体\">中去查（即马上发出</span><span style=\"font-family:Calibri\">sql</span><span style=\"font-family:宋体\">）。</span></p>\n<p>4<span style=\"font-family:宋体\">、</span>如果确定<span style=\"font-family:Calibri\">DB</span><span style=\"font-family:宋体\">中有这个对象就用</span><span style=\"font-family:Calibri\">load(),</span><span style=\"font-family:宋体\">不确定就用</span><span style=\"font-family:Calibri\">get()</span><span style=\"font-family:宋体\">（这样效率高）</span>。</p>\n<br>\n<p><span style=\"font-size:18px\"></span></p>\n<h6>Hibernate<span style=\"font-family:宋体\">缓存原理示意图</span></h6>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160208013526395\" alt=\"\"></div>\n<p>\n<p><span style=\"font-size:18px\"><br>\n</span></p>\n<p><span style=\"font-size:18px\"></span></p>\n<h6>案例</h6>\n<pre code_snippet_id=\"1575984\" snippet_file_name=\"blog_20160208_8_859675\" code_snippet_id=\"1575984\" snippet_file_name=\"blog_20160208_8_859675\" name=\"code\" class=\"java\">-- 测试是否抛出异常\ntry {\n    Session session = sessionFactory.openSession();\n    //不会抛出异常.如果用load当查询不到则抛出异常\n    Employee e=(Employee) session.get(Employee.class, 51);\n    System.out.println(e);\n    } catch (Exception e) {\n    e.printStackTrace();\n    // TODO: handle exception\n    }finally{\n}\n-- 测试是否立即执行\n-- 默认懒加载则不会立即执行，直到使用时才会执行\nEmployee emp=(Employee) session.load(Employee.class, 19);</pre><br>\n<h5>4<span style=\"font-family:宋体\">、修改一个对象</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">记录</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">——</span><span style=\"font-family:Calibri\">update</span><span style=\"font-family:宋体\">方法</span></h5>\n<pre code_snippet_id=\"1575984\" snippet_file_name=\"blog_20160208_9_2081174\" code_snippet_id=\"1575984\" snippet_file_name=\"blog_20160208_9_2081174\" name=\"code\" class=\"java\">	// 修改员工信息\n	public static void updateEmployee() {\n		// 获取一个会话\n		Session session = HibernateUtil.getCurrentSession();\n\n		// 创建事务对象\n		Transaction transaction = null;\n		try {\n			transaction = session.beginTransaction();\n			// 1.获取要修改的雇员\n			// load是通过主键属性，获取该对象实例(表的记录)\n			Employee employee = (Employee) session.load(Employee.class, 2);\n			// 2.修改该雇员\n			employee.setName(&quot;ls&quot;);\n			// 提交\n			transaction.commit();\n		} catch (Exception e) {\n			// TODO: handle exception\n			if (transaction != null) {\n				transaction.rollback();\n			}\n			throw new RuntimeException(e.getMessage());\n		} finally {\n			if (session != null &amp;&amp; session.isOpen()) {\n				session.close();\n			}\n		}\n	}</pre><br>\n<h5>补充：<span style=\"font-family:Calibri\">H</span>ibernate<span style=\"font-family:宋体\">各种保存方式的区别</span><span style=\"font-family:Calibri\">(save,persist,update,saveOrUpd</span>ate,merge,flush,lock)<span style=\"font-family:宋体\">等&nbsp;</span></h5>\n<h6>一、预备知识：&nbsp;</h6>\n<p>\n<p>在所有之前，说明一下，对于<span style=\"font-family:Calibri\">hibernate</span><span style=\"font-family:宋体\">，它的对象有三种状态，</span><span style=\"font-family:Calibri\">transient</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">persistent</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">detached&nbsp;</span></p>\n<p>下边是常见的翻译办法：&nbsp;</p>\n<p>transient<span style=\"font-family:宋体\">：瞬态或者自由态&nbsp;</span></p>\n<p>persistent<span style=\"font-family:宋体\">：持久化状态&nbsp;</span></p>\n<p>detached<span style=\"font-family:宋体\">：脱管状态或者游离态&nbsp;</span></p>\n<p>&nbsp;</p>\n<p>脱管状态的实例可以通过调用<span style=\"font-family:Calibri\">save()</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">persist()</span><span style=\"font-family:宋体\">或者</span><span style=\"font-family:Calibri\">saveOrUpdate()</span><span style=\"font-family:宋体\">方法进行持久化。&nbsp;</span></p>\n<p>持久化实例可以通过调用&nbsp;<span style=\"font-family:Calibri\">delete()</span><span style=\"font-family:宋体\">变成脱管状态。通过</span><span style=\"font-family:Calibri\">get()</span><span style=\"font-family:宋体\">或</span><span style=\"font-family:Calibri\">load()</span><span style=\"font-family:宋体\">方法得到的实例都是持久化状态的。&nbsp;</span></p>\n<p>脱管状态的实例可以通过调用&nbsp;<span style=\"font-family:Calibri\">update()</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">saveOrUpdate()</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">lock()</span><span style=\"font-family:宋体\">或者</span><span style=\"font-family:Calibri\">replicate()</span><span style=\"font-family:宋体\">进行持久化。&nbsp;</span></p>\n<p>游离或者自由状态下的实例可以通过调用<span style=\"font-family:Calibri\">merge()</span><span style=\"font-family:宋体\">方法成为一个新的持久化实例。&nbsp;</span></p>\n<p>&nbsp;</p>\n<p>save()<span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">persist()</span><span style=\"font-family:宋体\">将会引发</span><span style=\"font-family:Calibri\">SQL</span><span style=\"font-family:宋体\">的</span><span style=\"font-family:Calibri\">INSERT</span><span style=\"font-family:宋体\">，</span><span style=\"font-family:Calibri\">delete()</span><span style=\"font-family:宋体\">会引发</span><span style=\"font-family:Calibri\">SQL</span><span style=\"font-family:宋体\">的</span><span style=\"font-family:Calibri\">DELETE</span><span style=\"font-family:宋体\">，&nbsp;而</span><span style=\"font-family:Calibri\">update()</span><span style=\"font-family:宋体\">或</span><span style=\"font-family:Calibri\">merge()</span><span style=\"font-family:宋体\">会引发</span><span style=\"font-family:Calibri\">SQL</span><span style=\"font-family:宋体\">的</span><span style=\"font-family:Calibri\">UPDATE</span><span style=\"font-family:宋体\">。对持久化（</span><span style=\"font-family:Calibri\">persistent</span><span style=\"font-family:宋体\">）实例的修改在刷新提交的时候会被检测到，它也会引起</span><span style=\"font-family:Calibri\">SQL</span>的UPDATE<span style=\"font-family:宋体\">。</span><span style=\"font-family:Calibri\">saveOrUpdate()</span><span style=\"font-family:宋体\">或者</span><span style=\"font-family:Calibri\">replicate()</span><span style=\"font-family:宋体\">会引发</span><span style=\"font-family:Calibri\">SQL</span>的INSERT<span style=\"font-family:宋体\">或者</span><span style=\"font-family:Calibri\">UPDATE&nbsp;</span></p>\n<br>\n<p><span style=\"font-size:18px\"></span></p>\n<h6>二、<span style=\"font-family:Calibri\">save&nbsp;</span><span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">update</span><span style=\"font-family:宋体\">区别&nbsp;</span></h6>\n<p>\n<p>把这一对放在第一位的原因是因为这一对是最常用的。&nbsp;</p>\n<p>save<span style=\"font-family:宋体\">的作用是把一个新的对象保存&nbsp;</span></p>\n<p>update<span style=\"font-family:宋体\">是把一个脱管状态的对象保存&nbsp;</span></p>\n<p>&nbsp;</p>\n<h6>三、update&nbsp;<span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">saveOrUpdate</span><span style=\"font-family:宋体\">区别&nbsp;</span></h6>\n<p>这个是比较好理解的，顾名思义，<span style=\"font-family:Calibri\">saveOrUpdate</span><span style=\"font-family:宋体\">基本上就是合成了</span><span style=\"font-family:Calibri\">save</span><span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">update&nbsp;</span></p>\n<p>引用<span style=\"font-family:Calibri\">hibernate&nbsp;reference</span><span style=\"font-family:宋体\">中的一段话来解释他们的使用场合和区别&nbsp;</span></p>\n<p>通常下面的场景会使用<span style=\"font-family:Calibri\">update()</span><span style=\"font-family:宋体\">或</span><span style=\"font-family:Calibri\">saveOrUpdate()</span><span style=\"font-family:宋体\">：&nbsp;</span></p>\n<p>程序在第一个<span style=\"font-family:Calibri\">session</span><span style=\"font-family:宋体\">中加载对象&nbsp;</span></p>\n<p>该对象被传递到表现层&nbsp;</p>\n<p>对象发生了一些改动&nbsp;</p>\n<p>该对象被返回到业务逻辑层&nbsp;</p>\n<p>程序调用第二个<span style=\"font-family:Calibri\">session</span><span style=\"font-family:宋体\">的</span><span style=\"font-family:Calibri\">update()</span><span style=\"font-family:宋体\">方法持久这些改动&nbsp;</span></p>\n<p>&nbsp;</p>\n<p>saveOrUpdate()<span style=\"font-family:宋体\">做下面的事</span><span style=\"font-family:Calibri\">:&nbsp;</span></p>\n<p>如果对象已经在本<span style=\"font-family:Calibri\">session</span><span style=\"font-family:宋体\">中持久化了，不做任何事&nbsp;</span></p>\n<p>如果另一个与本<span style=\"font-family:Calibri\">session</span><span style=\"font-family:宋体\">关联的对象拥有相同的持久化标识</span><span style=\"font-family:Calibri\">(identifier)</span><span style=\"font-family:宋体\">，抛出一个异常&nbsp;</span></p>\n<p>如果对象没有持久化标识<span style=\"font-family:Calibri\">(identifier)</span><span style=\"font-family:宋体\">属性，对其调用</span><span style=\"font-family:Calibri\">save()&nbsp;</span></p>\n<p>如果对象的持久标识<span style=\"font-family:Calibri\">(identifier)</span><span style=\"font-family:宋体\">表明其是一个新实例化的对象，对其调用</span><span style=\"font-family:Calibri\">save()&nbsp;</span></p>\n<p>如果对象是附带版本信息的（通过<span style=\"font-family:Calibri\">&lt;version&gt;</span><span style=\"font-family:宋体\">或</span><span style=\"font-family:Calibri\">&lt;timestamp&gt;</span><span style=\"font-family:宋体\">）&nbsp;并且版本属性的&#20540;表明其是一个新实例化的对象，</span><span style=\"font-family:Calibri\">save()</span><span style=\"font-family:宋体\">它。&nbsp;</span></p>\n<p>否则<span style=\"font-family:Calibri\">update()&nbsp;</span><span style=\"font-family:宋体\">这个对象&nbsp;</span></p>\n<p>&nbsp;</p>\n<h6>四、persist<span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">save</span><span style=\"font-family:宋体\">区别&nbsp;</span></h6>\n<p>这个是最迷离的一对，表面上看起来使用哪个都行，在<span style=\"font-family:Calibri\">hibernate&nbsp;reference</span><span style=\"font-family:宋体\">文档中也没有明确的区分他们</span><span style=\"font-family:Calibri\">.&nbsp;</span></p>\n<p>这里给出一个明确的区分。（可以跟进<span style=\"font-family:Calibri\">src</span><span style=\"font-family:宋体\">看一下，虽然实现步骤类&#20284;，但是还是有细微的差别）&nbsp;</span></p>\n<p>这里参考<a target=\"_blank\" target=\"_blank\" href=\"http://opensource.atlassian.com/projects/hibernate/browse/HHH-1682\"><span style=\"color:rgb(128,0,128)\">http</span><span style=\"color:rgb(128,0,128)\">://opensource.atlassian.com/projects/hibernate/browse/HHH-1682</span></a>中的一个说明：&nbsp;</p>\n<p>1<span style=\"font-family:宋体\">，</span><span style=\"font-family:Calibri\">persist</span><span style=\"font-family:宋体\">把一个瞬态的实例持久化，但是并</span><span style=\"font-family:Calibri\">&quot;</span><span style=\"font-family:宋体\">不保证</span><span style=\"font-family:Calibri\">&quot;</span><span style=\"font-family:宋体\">标识符被立刻填入到持久化实例中，标识符的填入可能被推迟到</span><span style=\"font-family:Calibri\">flush</span><span style=\"font-family:宋体\">的时间。&nbsp;</span></p>\n<p>&nbsp;</p>\n<p>2<span style=\"font-family:宋体\">，</span><span style=\"font-family:Calibri\">persist&quot;</span><span style=\"font-family:宋体\">保证</span><span style=\"font-family:Calibri\">&quot;</span><span style=\"font-family:宋体\">，当它在一个</span><span style=\"font-family:Calibri\">transaction</span><span style=\"font-family:宋体\">外部被调用的时候并不触发一个</span><span style=\"font-family:Calibri\">S</span>QL<span style=\"font-family:宋体\">的</span><span style=\"font-family:Calibri\">i</span>nsert<span style=\"font-family:宋体\">，这个功能是很有用的，当我们通过继承</span><span style=\"font-family:Calibri\">Session/persistence&nbsp;context</span><span style=\"font-family:宋体\">来封装一个长会话流程的时候，一个</span><span style=\"font-family:Calibri\">persist</span><span style=\"font-family:宋体\">这样的函数是需要的。&nbsp;</span></p>\n<p>&nbsp;</p>\n<p>3<span style=\"font-family:宋体\">，</span><span style=\"font-family:Calibri\">save&quot;</span><span style=\"font-family:宋体\">不保证</span><span style=\"font-family:Calibri\">&quot;</span><span style=\"font-family:宋体\">第</span><span style=\"font-family:Calibri\">2</span><span style=\"font-family:宋体\">条</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">它要返回标识符，所以它会立即执行</span><span style=\"font-family:Calibri\">S</span>QL<span style=\"font-family:宋体\">的</span>insert<span style=\"font-family:宋体\">，不管是不是在</span><span style=\"font-family:Calibri\">transaction</span><span style=\"font-family:宋体\">内部还是外部</span>。</p>\n<p>&nbsp;</p>\n<h6>五、saveOrUpdateCopy,merge<span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">update</span><span style=\"font-family:宋体\">区别&nbsp;</span></h6>\n<p>首先说明<span style=\"font-family:Calibri\">merge</span><span style=\"font-family:宋体\">是用来代替</span><span style=\"font-family:Calibri\">saveOrUpdateCopy</span><span style=\"font-family:宋体\">的，这个详细见这里&nbsp;</span></p>\n<p><a target=\"_blank\" target=\"_blank\" href=\"http://www.blogjava.net/dreamstone/archive/2007/07/28/133053.html\"><span style=\"color:rgb(128,0,128)\">http://www.blogjava.net/dreamstone/archive/2007/07/28/133053.html</span></a>&nbsp;</p>\n<p>然后比较<span style=\"font-family:Calibri\">update</span><span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">merge&nbsp;</span></p>\n<p>update<span style=\"font-family:宋体\">的作用上边说了，这里说一下</span><span style=\"font-family:Calibri\">merge</span><span style=\"font-family:宋体\">的&nbsp;</span></p>\n<p>如果<span style=\"font-family:Calibri\">session</span><span style=\"font-family:宋体\">中存在相同持久化标识</span><span style=\"font-family:Calibri\">(identifier)</span><span style=\"font-family:宋体\">的实例，用用户给出的对象的状态覆盖旧有的持久实例&nbsp;</span></p>\n<p>如果<span style=\"font-family:Calibri\">session</span><span style=\"font-family:宋体\">没有相应的持久实例，则尝试从数据库中加载，或创建新的持久化实例</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">最后返回该持久实例&nbsp;</span></p>\n<p>用户给出的这个对象没有被关联到<span style=\"font-family:Calibri\">session</span><span style=\"font-family:宋体\">上，它依旧是脱管的&nbsp;</span></p>\n<p>重点是最后一句：&nbsp;</p>\n<p>当我们使用<span style=\"font-family:Calibri\">update</span><span style=\"font-family:宋体\">的时候，执行完成后，我们提供的对象</span><span style=\"font-family:Calibri\">A</span><span style=\"font-family:宋体\">的状态变成持久化状态&nbsp;</span></p>\n<p>但当我们使用<span style=\"font-family:Calibri\">merge</span><span style=\"font-family:宋体\">的时候，执行完成，我们提供的对象</span><span style=\"font-family:Calibri\">A</span><span style=\"font-family:宋体\">还是脱管状态，</span><span style=\"font-family:Calibri\">hibernate</span><span style=\"font-family:宋体\">或者</span><span style=\"font-family:Calibri\">new</span><span style=\"font-family:宋体\">了一个</span><span style=\"font-family:Calibri\">B</span><span style=\"font-family:宋体\">，或者检索到一个持久对象</span><span style=\"font-family:Calibri\">B</span><span style=\"font-family:宋体\">，并把我们提供的对象</span><span style=\"font-family:Calibri\">A</span><span style=\"font-family:宋体\">的所有的&#20540;拷贝到这个</span><span style=\"font-family:Calibri\">B</span><span style=\"font-family:宋体\">，执行完成后</span><span style=\"font-family:Calibri\">B</span><span style=\"font-family:宋体\">是持久状态，而我们提供的</span><span style=\"font-family:Calibri\">A</span><span style=\"font-family:宋体\">还是托管状态&nbsp;</span></p>\n<p>&nbsp;</p>\n<h6>六、flush<span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">update</span><span style=\"font-family:宋体\">区别&nbsp;</span></h6>\n<p>这两个的区别好理解&nbsp;</p>\n<p>update<span style=\"font-family:宋体\">操作的是在脱管状态的对象&nbsp;</span></p>\n<p>而<span style=\"font-family:Calibri\">flush</span><span style=\"font-family:宋体\">是操作的在持久状态的对象。&nbsp;</span></p>\n<p>默认情况下，一个持久状态的对象是不需要<span style=\"font-family:Calibri\">update</span><span style=\"font-family:宋体\">的，只要你更改了对象的&#20540;，等待</span><span style=\"font-family:Calibri\">hibernate&nbsp;flush</span><span style=\"font-family:宋体\">就自动保存到数据库了。</span><span style=\"font-family:Calibri\">hibernate&nbsp;flush</span><span style=\"font-family:宋体\">发生再几种情况下：&nbsp;</span></p>\n<p>1<span style=\"font-family:宋体\">，调用某些查询的时候&nbsp;</span></p>\n<p>2<span style=\"font-family:宋体\">，</span><span style=\"font-family:Calibri\">transaction&nbsp;commit</span><span style=\"font-family:宋体\">的时候&nbsp;</span></p>\n<p>3<span style=\"font-family:宋体\">，手动调用</span><span style=\"font-family:Calibri\">flush</span><span style=\"font-family:宋体\">的时候&nbsp;</span></p>\n<p>&nbsp;</p>\n<h6>七、lock<span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">update</span><span style=\"font-family:宋体\">区别&nbsp;</span></h6>\n<p>update<span style=\"font-family:宋体\">是把一个已经更改过的脱管状态的对象变成持久状态&nbsp;</span></p>\n<p>lock<span style=\"font-family:宋体\">是把一个没有更改过的脱管状态的对象变成持久状态&nbsp;</span></p>\n<p>对应更改一个记录的内容，两个的操作不同：&nbsp;</p>\n<p>update<span style=\"font-family:宋体\">的操作步骤是：&nbsp;</span></p>\n<p>(1)更改脱管的对象<span style=\"font-family:Calibri\">-&gt;</span><span style=\"font-family:宋体\">调用</span><span style=\"font-family:Calibri\">update&nbsp;</span></p>\n<p>lock<span style=\"font-family:宋体\">的操作步骤是：&nbsp;</span></p>\n<p>(2)<span style=\"font-family:宋体\">调用</span><span style=\"font-family:Calibri\">lock</span><span style=\"font-family:宋体\">把对象从脱管状态变成持久状态</span><span style=\"font-family:Calibri\">--&gt;</span><span style=\"font-family:宋体\">更改持久状态的对象的内容</span><span style=\"font-family:Calibri\">--&gt;</span><span style=\"font-family:宋体\">等待</span><span style=\"font-family:Calibri\">flush</span><span style=\"font-family:宋体\">或者手动</span><span style=\"font-family:Calibri\">flush</span></p>\n<p>&nbsp;</p>\n<p>参考博客：<a target=\"_blank\" target=\"_blank\" href=\"http://blog.csdn.net/looyo/archive/2009/07/15/4350937.aspx\"><span style=\"color:rgb(128,0,128)\">http://blog.csdn.net/looyo/archive/2009/07/15/4350937.aspx</span></a></p>\n<p>&nbsp;</p>\n<h3>6<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">Transaction</span><span style=\"font-family:宋体\">接口</span></h3>\n<p>事务接口的作用：</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;1<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">Transaction</span><span style=\"font-family:宋体\">对应于数据库中事务这个概念，其具体可以参考之前的博客</span><a target=\"_blank\" target=\"_blank\" href=\"http://blog.csdn.net/q547550831/article/details/49979459\"><span style=\"color:rgb(128,0,128)\">Oracle<span style=\"font-family:宋体\">事务处理</span></span></a>。</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;2<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">Hibernate</span><span style=\"font-family:宋体\">要求显示调用事务</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">如果仅仅是查询而且是使用</span><span style=\"font-family:Calibri\">openSession()</span><span style=\"font-family:宋体\">获得会话可以不调用事务</span><span style=\"font-family:Calibri\">)</span></p>\n<p>&nbsp;</p>\n<h4>基本语法：</h4>\n<pre code_snippet_id=\"1575984\" snippet_file_name=\"blog_20160208_10_9922366\" code_snippet_id=\"1575984\" snippet_file_name=\"blog_20160208_10_9922366\" name=\"code\" class=\"java\">-- 事务开始\nTransaction transaction = session.beginTransaction();\n-- 事务提交\ntransaction.commit();\n-- 事务回滚(异常处理)\ntransaction.rollback();</pre><br>\n<h3>7<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">Query</span><span style=\"font-family:宋体\">接口</span></h3>\n<p>&nbsp; &nbsp;&nbsp;Query<span style=\"font-family:宋体\">接口类型的对象可以对数据库操作</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">它可以使用</span><span style=\"font-family:Calibri\">H</span>QL,QBC,QBE和原生<span style=\"font-family:Calibri\">SQL(native&nbsp;Sql)</span><span style=\"font-family:宋体\">对数据库操作</span><span style=\"font-family:Calibri\">.</span><span style=\"font-family:宋体\">官方推荐使用</span><span style=\"font-family:Calibri\">H</span>QL语句。</p>\n<p>&nbsp;</p>\n<h4>案例：</h4>\n<pre code_snippet_id=\"1575984\" snippet_file_name=\"blog_20160208_11_5603968\" code_snippet_id=\"1575984\" snippet_file_name=\"blog_20160208_11_5603968\" name=\"code\" class=\"java\">    // Query接口测试\n	public static void queryEmployee() {\n		Session session = HibernateUtil.getCurrentSession();\n		Transaction transaction = null;\n		try {\n			transaction = session.beginTransaction();\n			// 获取Query引用[Employee指的是domain类名而不是表名]\n			// where后面的条件可以是类的属性名，也可以是表的字段\n			// 按照hibernate的规定，还是应该使用类的属性名\n			Query query = session.createQuery(&quot;from Employee where id=1&quot;);\n			// 通过list方法获取结果，这个list会自动将结果封装成对应的domain对象\n			// 所以JDBC进行二次封装的工作就没有了\n			List&lt;Employee&gt; list = query.list();\n			for(Employee e : list){\n				System.out.println(e.getName() + &quot; &quot; + e.getEmail());\n			}\n			transaction.commit();\n		} catch (Exception e) {\n			// TODO: handle exception\n			if(transaction != null){\n				transaction.rollback();\n			}\n			throw new RuntimeException(e.getMessage());\n		}  finally {\n			if (session != null &amp;&amp; session.isOpen()) {\n				session.close();\n			}\n		}\n	}</pre><br>\n<h3>8<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">Criteria</span><span style=\"font-family:宋体\">接口</span></h3>\n<p>&nbsp; &nbsp; Criteria<span style=\"font-family:宋体\">接口也可以用于面向对象方式的查询。</span></p>\n<p>&nbsp;</p>\n<h4>案例：</h4>\n<pre code_snippet_id=\"1575984\" snippet_file_name=\"blog_20160208_12_5745671\" code_snippet_id=\"1575984\" snippet_file_name=\"blog_20160208_12_5745671\" name=\"code\" class=\"java\">        Session session = HibernateUtil.getCurrentSession();\n		Transaction ts = null;\n		try {\n			ts = session.beginTransaction();\n			Criteria cri = session.createCriteria(Employee.class)\n					.setMaxResults(2).addOrder(Order.desc(&quot;id&quot;));\n			List&lt;Employee&gt; list = cri.list();\n			for (Employee e : list) {\n				System.out.println(e.getAaaid());\n			}\n			ts.commit();\n		} catch (Exception e) {\n			if (ts != null) {\n				ts.rollback();\n			}\n			throw new RuntimeException(e.getMessage());\n		} finally {\n			// 关闭session\n			if (session != null &amp;&amp; session.isOpen()) {\n				session.close();\n			}\n		}</pre><br>\n<h2>使用<span style=\"font-family:Calibri\">MyEclipse</span><span style=\"font-family:宋体\">开发</span><span style=\"font-family:Calibri\">Hibernate</span></h2>\n<h3>开发步骤：</h3>\n<h4>1<span style=\"font-family:宋体\">、建库建表</span></h4>\n<h4>2<span style=\"font-family:宋体\">、创建一个项目</span></h4>\n<h4>3<span style=\"font-family:宋体\">、使用</span><span style=\"font-family:Calibri\">myeclipse</span><span style=\"font-family:宋体\">自带的</span><span style=\"font-family:Calibri\">db&nbsp;browser</span><span style=\"font-family:宋体\">连接到数据库</span></h4>\n<img src=\"http://img.blog.csdn.net/20160208014154749\" alt=\"\"><br>\n<p><span style=\"font-size:18px\"><img src=\"http://img.blog.csdn.net/20160208014201984\" alt=\"\"><br>\n</span></p>\n<p><span style=\"font-size:18px\"></span></p>\n<p>new<span style=\"font-family:宋体\">一个数据库连接</span></p>\n<p><span style=\"font-size:18px\"><img src=\"http://img.blog.csdn.net/20160208014214835\" alt=\"\"><br>\n</span></p>\n<p><span style=\"font-size:18px\"></span></p>\n<h4>4<span style=\"font-family:宋体\">、引入</span><span style=\"font-family:Calibri\">hibernate</span><span style=\"font-family:宋体\">支持</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">框架</span><span style=\"font-family:Calibri\">)[</span><span style=\"font-family:宋体\">这里会自动创建</span><span style=\"font-family:Calibri\">hibernate.cfg.xml]</span></h4>\n<img src=\"http://img.blog.csdn.net/20160208014426644\" width=\"600\" height=\"350\" alt=\"\"><br>\n<p>\n<p><span style=\"font-size:18px\"></span></p>\n<h4>5<span style=\"font-family:宋体\">、使用</span><span style=\"font-family:Calibri\">hibernate</span><span style=\"font-family:宋体\">反向工程创建</span><span style=\"font-family:Calibri\">POJO</span><span style=\"font-family:宋体\">类和对象映射文件</span></h4>\n<img src=\"http://img.blog.csdn.net/20160208014506211\" alt=\"\"><br>\n<p>\n<p><span style=\"font-size:18px\"><img src=\"http://img.blog.csdn.net/20160208014517880\" alt=\"\"><br>\n</span></p>\n<p><span style=\"font-size:18px\"></span></p>\n<h4>6<span style=\"font-family:宋体\">、对各配置文件作相应的修改</span></h4>\n<h4>7<span style=\"font-family:宋体\">、编写测试类</span></h4>\n<p>\n<p><br>\n</p>\n<p><br>\n</p>\n<p><span style=\"font-size:18px\"></span></p>\n<p>----------<span style=\"font-family:宋体\">参考《韩顺平</span><span style=\"font-family:Calibri\">.hibernate</span><span style=\"font-family:宋体\">从入门到精通》</span></p>\n<br>\n   \n', '2016-04-16 01:21:07', '0');
INSERT INTO `article` VALUES ('10033', '10003', 'Linux学习笔记5', '\n        <div class=\"markdown_views\"><h1 id=\"linux学习笔记5\"><strong>Linux学习笔记5</strong></h1>\n\n<p><div class=\"toc\">\n<ul>\n<li><a href=\"#linux学习笔记5\">Linux学习笔记5</a><ul>\n<li><ul>\n<li><a href=\"#系统拥有哪些组\">系统拥有哪些组</a></li>\n<li><a href=\"#更改所属组\">更改所属组</a></li>\n<li><a href=\"#更改所属主\">更改所属主</a></li>\n<li><a href=\"#特殊权限\">特殊权限</a></li>\n<li><a href=\"#强制位set-uid和set-gid与冒险位sticky的作用都有什么\">强制位set uid和set gid与冒险位sticky的作用都有什么</a></li>\n<li><a href=\"#文件搜索\">文件搜索</a></li>\n<li><a href=\"#linux的链接文件\">Linux的链接文件</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>\n</p>\n\n<h3 id=\"系统拥有哪些组\"><strong>系统拥有哪些组</strong></h3>\n\n<blockquote>\n  <p>cat /etc/group</p>\n</blockquote>\n\n\n\n<h3 id=\"更改所属组\"><strong>更改所属组</strong></h3>\n\n<blockquote>\n  <p>chgrp</p>\n  \n  <p>例：更改test目录的所属组</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# cd /tmp/ <br>\n        [root@localhost tmp]# mkdir test <br>\n        [root@localhost tmp]# ls -ld test/ <br>\n        drwxr-xr-x 2 root root 6 3月  29 18:37 test/ <br>\n        [root@localhost tmp]# groupadd user1 <br>\n        [root@localhost tmp]# chgrp user1 test/ <br>\n        [root@localhost tmp]# ls -ld test/ <br>\n        drwxr-xr-x 2 root user1 6 3月  29 18:37 test/ <br>\n        [root@localhost tmp]#</code></p>\n    \n    <p>PS：默认的更改命令是不会将目录中的文件的所属组更改的，如果要级联更改，那么可以加上<strong>“-R”</strong>选项。</p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"更改所属主\"><strong>更改所属主</strong></h3>\n\n<blockquote>\n  <p>chown</p>\n  \n  <p>例：更改test的所属组</p>\n  \n  <blockquote>\n    <p><code>[root@localhost tmp]# useradd user2 <br>\n        [root@localhost tmp]# ls -ld test/ <br>\n        drwxr-xr-x 3 root user1 16 3月  29 18:42 test/ <br>\n        [root@localhost tmp]# chown user2 test/ <br>\n        [root@localhost tmp]# ls -ld test/ <br>\n        drwxr-xr-x 3 user2 user1 16 3月  29 18:42 test/ <br>\n        [root@localhost tmp]#</code></p>\n    \n    <p>PS：默认的更改命令是不会将目录中的文件的所属主更改的，如果要级联更改，那么可以加上<strong>“-R”</strong>选项。</p>\n  </blockquote>\n  \n  <p>例：更改test及目录下所有文件的属主和属组</p>\n  \n  <blockquote>\n    <p><code>[root@localhost tmp]# ls -ld test/ <br>\n        drwxr-xr-x 3 user2 user1 16 3月  29 18:42 test/ <br>\n        [root@localhost tmp]# ls -ld test/123/ <br>\n        drwxr-xr-x 2 root root 20 3月  29 18:43 test/123/ <br>\n        [root@localhost tmp]# chown -R user2:user1 test/ <br>\n        [root@localhost tmp]# ls -ld test/ <br>\n        drwxr-xr-x 3 user2 user1 16 3月  29 18:42 test/ <br>\n        [root@localhost tmp]# ls -ld test/123/ <br>\n        drwxr-xr-x 2 user2 user1 20 3月  29 18:43 test/123/</code></p>\n    \n    <p>PS：属主是可以省略的。</p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"特殊权限\"><strong>特殊权限</strong></h3>\n\n<blockquote>\n  <p>chattr</p>\n  \n  <p>例：给test加上不可修改权限。</p>\n  \n  <blockquote>\n    <p><code>[root@localhost tmp]# lsattr -d test/ <br>\n        ---------------- test/ <br>\n        [root@localhost tmp]# chattr +i test/ <br>\n        [root@localhost tmp]# lsattr -d test/ <br>\n        ----i----------- test/ <br>\n        [root@localhost tmp]#</code></p>\n    \n    <p>PS：设置之后，不能被删除、重命名、写入和新增数据，可以用”-i”选项删除不可修改权限。</p>\n    \n    <p>PS：级联也是假”-R”选项。</p>\n  </blockquote>\n  \n  <p>选项：</p>\n  \n  <blockquote>\n    <p>A：表示文件或目录的atime将不可被修改。</p>\n    \n    <p>s：数据同步写入磁盘中。</p>\n    \n    <p>a：只能追加不能删除，非root用户不能设定该属性。</p>\n    \n    <p>c：自动压缩该文件，读取时会自动解压。</p>\n    \n    <p>i：文件不能被删除、重命名、设定链接、写入以及新增数据。</p>\n  </blockquote>\n  \n  <p>例：级联读取test目录下的特殊权限。</p>\n  \n  <blockquote>\n    <p><code>[root@localhost tmp]# lsattr -R test/ <br>\n        ---------------- test/123 <br>\n        test/123: <br>\n        ---------------- test/123/321.txt <br>\n        [root@localhost tmp]#</code></p>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"强制位set-uid和set-gid与冒险位sticky的作用都有什么\"><strong>强制位（set uid和set gid）与冒险位（sticky）的作用都有什么</strong></h3>\n\n<blockquote>\n  <p><a href=\"http://www.cnblogs.com/wanggd/p/3195114.html\">http://www.cnblogs.com/wanggd/p/3195114.html</a></p>\n</blockquote>\n\n\n\n<h3 id=\"文件搜索\"><strong>文件搜索</strong></h3>\n\n<blockquote>\n  <p>whereis</p>\n  \n  <p>例：查找文件</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# whereis vim <br>\n        vim: /usr/bin/vim /usr/share/vim /usr/share/man/man1/vim.1.gz <br>\n        [root@localhost ~]# whereis bin <br>\n        bin: /usr/local/bin <br>\n        [root@localhost ~]#</code></p>\n    \n    <p>PS：该命令是通过预生成的一个文件列表库去查找与给出文件名相关的文件。</p>\n  </blockquote>\n  \n  <p>locate</p>\n  \n  <blockquote>\n    <p>PS：通过查找预生成的文件列表库来告诉用户要查找的文件在哪里，一般用于知道具体信息，才去搜索。</p>\n    \n    <p>PS：如果没有locate命令，使用yum install -y mlocate安装。</p>\n  </blockquote>\n  \n  <p><strong>find(常用)</strong></p>\n  \n  <blockquote>\n    <p>语法 : find  [路径] [参数]</p>\n    \n    <p>‘-atime +n/-n’ : 访问或执行时间大于/小于n天的文件</p>\n    \n    <p>‘-ctime +n/-n’ : 写入、更改inode属性（例如更改所有者、权限或者链接）时间大于/小于n天的文件</p>\n    \n    <p>‘-mtime +n/-n’ : 写入时间大于/小于n天的文件</p>\n    \n    <blockquote>\n      <p><code>[root@localhost ~]# find /tmp/ -mtime -1 <br>\n          /tmp/ <br>\n          /tmp/.ICE-unix <br>\n          /tmp/test <br>\n          [root@localhost ~]# find /tmp/ -atime +10 <br>\n          [root@localhost ~]# find /tmp/ -atime +1 <br>\n          /tmp/yum.log <br>\n          /tmp/.bash_history</code></p>\n      \n      <p>文件的 Access time也就是 ‘atime’ 是在读取文件或者执行文件时更改的。</p>\n      \n      <p>文件的 Modified time也就是 ‘mtime’ 是在写入文件时随文件内容的更改而更改的。</p>\n      \n      <p>文件的 Change time也就是 ‘ctime’ 是在写入文件、更改所有者、权限或链接设置时随inode的内容更改而更改的。</p>\n      \n      <p>因此，更改文件的内容即会更改mtime和ctime，但是文件的ctime可能会在 mtime 未发生任何变化时更改，例如，更改了文件的权限，但是文件内容没有变化。</p>\n    </blockquote>\n    \n    <p>‘stat’ 命令可用来列出文件的 atime、ctime 和 mtime。</p>\n    \n    <blockquote>\n      <p><code>[root@localhost ~]# stat test/test2 <br>\n            File: \'test/test2\' <br>\n            Size: 0               Blocks: 0          IO Block: 4096   普通空文件 <br>\n          Device: 803h/2051d      Inode: 261657      Links: 1 <br>\n          Access: (0744/-rwxr--r--)  Uid: (  500/   user1)   Gid: (  500/testgroup) <br>\n          Access: 2013-05-10 09:00:36.092000531 +0800 <br>\n          Modify: 2013-05-10 09:00:36.092000531 +0800 <br>\n          Change: 2013-05-10 09:30:58.788996594 +0800</code></p>\n      \n      <p>atime不一定在访问文件之后被修改，因为：使用ext3文件系统的时候，如果在mount的时候使用了noatime参数那么就不会更新atime的信息。总之, 这三个 time stamp 都放在 inode 中。若 mtime, atime 修改inode 就一定會改, 既然 inode 改了, 那 ctime 也就跟着要改了。</p>\n    </blockquote>\n    \n    <p>‘find’常用选项：</p>\n    \n    <p>‘-name filename’ 直接查找该文件名的文件，这个选项使用很多。</p>\n    \n    <blockquote>\n      <p><code>[root@localhost ~]# find . -name test2 <br>\n          ./test/test2 <br>\n          ./test2</code></p>\n    </blockquote>\n    \n    <p>‘-type filetype’ 通过文件类型查找。filetype 包含了 f, b, c, d, l, s 等。</p>\n    \n    <blockquote>\n      <p><code>[root@localhost ~]# find /tmp/ -type d <br>\n          /tmp/ <br>\n          /tmp/.ICE-unix <br>\n          /tmp/test <br>\n          [root@localhost ~]# find /tmp/ -type f <br>\n          /tmp/yum.log <br>\n          /tmp/.bash_history <br>\n          /tmp/ip.txt</code></p>\n    </blockquote>\n    \n    <p>综合案例：查找修改时间小于10天的以”.txt”结尾的文件</p>\n    \n    <blockquote>\n      <p><code>[root@localhost ~]# find /root/ -mtime -10 -type f -name \"*.txt\" <br>\n          /root/.cache/tracker/db-version.txt <br>\n          /root/.cache/tracker/db-locale.txt <br>\n          /root/.cache/tracker/miner-applications-locale.txt <br>\n          /root/.cache/tracker/last-crawl.txt <br>\n          /root/.cache/tracker/first-index.txt <br>\n          /root/234.txt <br>\n          /root/2/3/1.txt <br>\n          /root/123.txt <br>\n          [root@localhost ~]#</code></p>\n    </blockquote>\n  </blockquote>\n</blockquote>\n\n\n\n<h3 id=\"linux的链接文件\"><strong>Linux的链接文件</strong></h3>\n\n<blockquote>\n  <p>链接文件分为两种，硬链接(hard link)和软链接(symbolic link)。两种链接的本质区别关键点在于inode。</p>\n  \n  <blockquote>\n    <p>Hard Links : 当系统要读取一个文件时，就会先去读inode table，然后再去根据inode中的信息到块区域去将数据取出来。而hard link 是直接再建立一个inode链接到文件放置的块区域。也就是说，进行hard link的时候实际上该文件内容没有任何变化，只是增加了一个指到这个文件的inode, hard link 有两个限制：(1)不能跨文件系统，因为不同的文件系统有不同的inode table; (2) 不能链接目录。</p>\n    \n    <p>Symbolic Links : 跟hard link不同，这个是建立一个独立的文件，而这个文件的作用是当读取这个链接文件时，它会把读取的行为转发到该文件所link的文件上。这样讲，也许比较绕口，那么就来举一个例子。现在有文件a，做了一个软链接文件b（只是一个链接文件，非常小），b指向了文件a。当读取b时，那么b就会把读取的动作转发到a上，这样就读取到了文件a。所以，当删除文件a时，文件b并不会被删除，但是再读取b时，会提示无法打开文件。而当删除b时，a是不会有任何影响的。</p>\n  </blockquote>\n  \n  <p>命令: ln</p>\n  \n  <p>语法 : ln [-s]  [来源文件]  [目的文件]</p>\n  \n  <p>ln 常用的选项就一个 ‘-s’, 如果不加就是建立硬链接，加上就建立软链接。</p>\n  \n  <blockquote>\n    <p><code>[root@localhost ~]# mkdir 123 <br>\n        [root@localhost ~]# cd 123 <br>\n        [root@localhost 123]# cp /etc/passwd ./ <br>\n        [root@localhost 123]# ll <br>\n        总用量 4 <br>\n        -rw-r--r-- 1 root root 1097 5月  10 17:08 passwd <br>\n        [root@localhost 123]# du -sk <br>\n        8       . <br>\n        [root@localhost 123]# ln passwd passwd-hard <br>\n        [root@localhost 123]# ll <br>\n        总用量 8 <br>\n        -rw-r--r-- 2 root root 1097 5月  10 17:08 passwd <br>\n        -rw-r--r-- 2 root root 1097 5月  10 17:08 passwd-hard <br>\n        [root@localhost 123]# du -sk <br>\n        8       .</code></p>\n    \n    <p>PS：做了硬链接后，虽然两个文件大小都为 ‘1097’, 但是目录的大小并没有变化。 <br>\n    <code>[root@localhost 123]# ll <br>\n        总用量 4 <br>\n        -rw-r--r-- 1 root root 1097 5月  10 17:08 passwd-hard <br>\n        [root@localhost 123]# rm -f passwd <br>\n        [root@localhost 123]# du -sk <br>\n        8       .</code></p>\n    \n    <p>PS：删除源文件passwd, 空间依旧不变。这说明硬链接只是复制了一份inode信息。</p>\n    \n    <p><code>[root@localhost ~]# ln 123 456 <br>\n        ln: \"123\": 不允许将硬链接指向目录</code></p>\n    \n    <p>PS：硬链接不能用于目录。</p>\n    \n    <p><code>[root@localhost ~]# mkdir 456 <br>\n        [root@localhost ~]# cd 456 <br>\n        [root@localhost 456]# cp /etc/passwd ./ <br>\n        [root@localhost 456]# ln -s passwd  passwd-soft <br>\n        [root@localhost 456]# ll <br>\n        总用量 4 <br>\n        -rw-r--r-- 1 root root 1097 5月  10 17:18 passwd <br>\n        lrwxrwxrwx 1 root root    6 5月  10 17:19 passwd-soft -&gt; passwd <br>\n        [root@localhost 456]# head -n1 passwd-soft <br>\n        root:x:0:0:root:/root:/bin/bash <br>\n        [root@localhost 456]# head -n1 passwd <br>\n        root:x:0:0:root:/root:/bin/bash <br>\n        [root@localhost 456]# rm -f passwd <br>\n        [root@localhost 456]# head -n1 passwd-soft <br>\n        head: 无法打开\"passwd-soft\" 读取数据: 没有那个文件或目录 <br>\n        [root@localhost 456]# ll <br>\n        总用量 0 <br>\n        lrwxrwxrwx 1 root root 6 5月  10 17:19 passwd-soft -&gt; passwd</code></p>\n    \n    <p>PS：如果删除掉源文件，则软链接文件不能读取了，而且使用 ‘ll’ 查看发现颜色也变了。 <br>\n    <code>[root@localhost ~]# ln -s 456 789 <br>\n        [root@localhost ~]# ls -ld 456 789 <br>\n        drwxr-xr-x 2 root root 4096 5月  10 17:22 456 <br>\n        lrwxrwxrwx 1 root root    3 5月  10 17:29 789 -&gt; 456</code></p>\n    \n    <p>PS：目录是可以软链接的。</p>\n    \n    <p>PS：建议用绝对路径(源文件)创建软链接。</p>\n    \n    <p>PS：硬链接使用的是同一个inode。</p>\n    \n    <p>PS：同一个分区下，硬链接不会占空间，但是不同分区下，硬链接会占空间。</p>\n  </blockquote>\n</blockquote>\n\n<p><strong><font size=\"6\">参考《跟阿铭学Linux》</font></strong></p>\n\n<hr></div>\n        <script type=\"text/javascript\">\n            $(function () {\n                $(\'pre.prettyprint code\').each(function () {\n                    var lines = $(this).text().split(\'\\n\').length;\n                    var $numbering = $(\'<ul/>\').addClass(\'pre-numbering\').hide();\n                    $(this).addClass(\'has-numbering\').parent().append($numbering);\n                    for (i = 1; i <= lines; i++) {\n                        $numbering.append($(\'<li/>\').text(i));\n                    };\n                    $numbering.fadeIn(1700);\n                });\n            });\n        </script>\n   \n', '2016-04-16 01:21:08', '0');
INSERT INTO `article` VALUES ('10034', '10003', 'Spring-AOP入门', '\n\n<h1 style=\"text-align:center\"><span style=\"font-size:18px\">Spring-AOP<span style=\"font-family:宋体\">入门</span></span></h1>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>入门概述</h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;在软件业，<span style=\"font-family:Calibri\">AOP</span><span style=\"font-family:宋体\">为</span><span style=\"font-family:Calibri\">Aspect&nbsp;Oriented&nbsp;Programming</span><span style=\"font-family:宋体\">的缩写，意为：面向切面编程，通过预编译方式和运行期动态代理实现程序功能的统一维护的一种技术。</span><span style=\"font-family:Calibri\">AOP</span><span style=\"font-family:宋体\">是</span><span style=\"font-family:Calibri\">OOP</span><span style=\"font-family:宋体\">的延续，是软件开发中的一个热点，也是</span><span style=\"font-family:Calibri\">Spring</span><span style=\"font-family:宋体\">框架中的一个重要内容，是函数式编程的一种衍生范型。利用</span><span style=\"font-family:Calibri\">AOP</span><span style=\"font-family:宋体\">可以对业务逻辑的各个部分进行隔离，从而使得业务逻辑各部分之间的耦合度降低，提高程序的可重用性，同时提高了开发的效率。</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;将日志记录，性能统计，安全控制，事务处理，异常处理等代码从业务逻辑代码中划分出来，通过对这些行为的分离，我们希望可以将它们独立到非指导业务逻辑的方法中，进而改变这些行为的时候不影响业务逻辑的代码。</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;从最开始的面向机器编程到面向过程编程到面向对象对象编程直至现在的面向切面编程可以看出，随着计算机软件的不断发展，其越来越符合人的思维习惯，同样的代码量所能实现的功能也越来越多。而<span style=\"font-family:Calibri\">AOP</span><span style=\"font-family:宋体\">则是在不增业务逻辑的代码上，增加新功能。而</span><span style=\"font-family:Calibri\">AOP</span><span style=\"font-family:宋体\">一般用于框架开发。在实际项目中，使用</span><span style=\"font-family:Calibri\">AOP</span><span style=\"font-family:宋体\">也是一个趋势。</span></p>\n<p>&nbsp;</p>\n<h2>AOP<span style=\"font-family:宋体\">初步原理图</span></h2>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160225195906657\" width=\"800\" height=\"422\" alt=\"\"></div>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：通过上图，可以看出，</span><span style=\"font-family:Calibri\">AOP(</span><span style=\"font-family:宋体\">面向切面编程</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">就是在某一服务执行时，插入特定功能代码。而且这一特定功能代码，可以同时对应于多个服务。</span></span></p>\n<p>&nbsp;</p>\n<h2>AOP<span style=\"font-family:宋体\">详细原理及案例</span></h2>\n<h3>AOP<span style=\"font-family:宋体\">详细原理图</span></h3>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160225195948911\" alt=\"\"></div>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h3>案例：<span style=\"font-family:Calibri\">AOP</span><span style=\"font-family:宋体\">开发步骤</span></h3>\n<h4>1<span style=\"font-family:宋体\">、定义接口</span></h4>\n<pre code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_1_2918104\" code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_1_2918104\" name=\"code\" class=\"java\">package com.pc.aop;\n/**\n * \n * @author Switch\n * @function 测试服务接口\n * @description\n *\n */\npublic interface TestServiceInter {\n	public void printOk();\n}\n\npackage com.pc.aop;\n/**\n * \n * @author Switch\n * @function 测试服务接口2\n * @description\n *\n */\npublic interface TestServiceInter2 {\n	public void printOk2();\n}</pre><br>\n<h4>2<span style=\"font-family:宋体\">、编写对象</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">被代理对象</span><span style=\"font-family:Calibri\">=</span><span style=\"font-family:宋体\">目标对象</span><span style=\"font-family:Calibri\">)</span></h4>\n<pre code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_2_6887055\" code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_2_6887055\" name=\"code\" class=\"java\">package com.pc.aop;\n/**\n * \n * @author Switch\n * @function 测试服务1\n * @description\n *\n */\npublic class Test1Service implements TestServiceInter,TestServiceInter2{\n	private String name;\n	public String getName() {\n		return name;\n	}\n	public void setName(String name) {\n		this.name = name;\n	}\n	@Override\n	public void printOk() {\n		System.out.println(name + &quot; Print Ok&quot;);\n	}\n	@Override\n	public void printOk2() {\n		System.out.println(name + &quot; Print Ok2&quot;);\n	}\n}</pre><br>\n<h4>3<span style=\"font-family:宋体\">、编写通知</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">有前置通知、后置通知、环绕通知、异常通知、引入通知五种</span><span style=\"font-family:Calibri\">)</span></h4>\n<pre code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_3_5142168\" code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_3_5142168\" name=\"code\" class=\"java\">package com.pc.aop;\nimport java.lang.reflect.Method;\nimport org.springframework.aop.MethodBeforeAdvice;\n/**\n * \n * @author Switch\n * @function 我的前置通知类\n * @description\n *\n */\npublic class MyMethodBeforeAdvice implements MethodBeforeAdvice {\n	@Override\n	/**\n	 * 在一个给定的方法前被回调\n	 * method:被调用方法名字\n	 * args:给method传递的参数\n	 * target:目标对象\n	 */\n	public void before(Method method, Object[] args, Object target)\n			throws Throwable {\n		System.out.println(&quot;记录日志...&quot; + method.getName());\n	}\n}</pre><br>\n<h4>4<span style=\"font-family:宋体\">、配置</span><span style=\"font-family:Calibri\">beans.xml(Spring</span><span style=\"font-family:宋体\">配置文件</span><span style=\"font-family:Calibri\">)</span></h4>\n<pre code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_4_4444057\" code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_4_4444057\" name=\"code\" class=\"html\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;beans \n	xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n 	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n 	xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n 	xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\n 	xsi:schemaLocation=&quot;\n 		http://www.springframework.org/schema/beans \n 		http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\n    	http://www.springframework.org/schema/context \n    	http://www.springframework.org/schema/context/spring-context-2.5.xsd\n    	http://www.springframework.org/schema/tx \n    	http://www.springframework.org/schema/tx/spring-tx-2.5.xsd&quot;&gt;\n	&lt;!-- 在容器文件中配置bean(service/dao/domain/action/数据源) --&gt;\n&lt;/beans&gt;</pre>\n<h5>4.1<span style=\"font-family:宋体\">、配置被代理对象</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">目标对象</span><span style=\"font-family:Calibri\">)</span></h5>\n<pre code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_5_3430301\" code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_5_3430301\" name=\"code\" class=\"html\">	&lt;!-- 配置被代理的对象 --&gt;\n	&lt;bean id=&quot;test1Service&quot; class=&quot;com.pc.aop.Test1Service&quot;&gt;</pre>\n<h5>4.2<span style=\"font-family:宋体\">、配置通知</span></h5>\n<pre code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_6_9144139\" code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_6_9144139\" name=\"code\" class=\"html\">	&lt;!-- 配置前置通知 --&gt;\n	&lt;bean id=&quot;myMethodBeforeAdvice&quot; class=&quot;com.pc.aop.MyMethodBeforeAdvice&quot; /&gt;</pre>\n<h5>4.3<span style=\"font-family:宋体\">、</span>配置代理对象，是ProxyFactoryBean的对象实例</h5>\n<pre code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_7_82231\" code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_7_82231\" name=\"code\" class=\"html\">    &lt;!-- 配置代理对象 --&gt;\n	&lt;!-- 猜测底层实现使用代理模式，在某一接口被调用的方法上下文插入语句或方法。推测是另外有一个方法，调用这些东西 --&gt;\n	&lt;bean id=&quot;proxyFactoryBean&quot; class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;\n	&lt;/bean&gt;</pre>\n<h6>4.3.1<span style=\"font-family:宋体\">、配置代理接口集</span></h6>\n<pre code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_8_7432272\" code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_8_7432272\" name=\"code\" class=\"html\">        &lt;!-- 配置代理接口集 --&gt;\n		&lt;property name=&quot;proxyInterfaces&quot;&gt;\n			&lt;list&gt;\n				&lt;value&gt;com.pc.aop.TestServiceInter&lt;/value&gt;\n				&lt;value&gt;com.pc.aop.TestServiceInter2&lt;/value&gt;\n			&lt;/list&gt;\n		&lt;/property&gt;</pre>\n<h6>4.3.2<span style=\"font-family:宋体\">、织入通知</span></h6>\n<pre code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_9_6734161\" code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_9_6734161\" name=\"code\" class=\"html\">		&lt;!-- 把通知织入到代理对象 --&gt;\n		&lt;property name=&quot;interceptorNames&quot;&gt;\n			&lt;list&gt;\n				&lt;!-- 相当于把myMethodBeforeAdvice前置通知和代理对象关联，也可以把通知看做是拦截器 --&gt;\n				&lt;value&gt;myMethodBeforeAdvice&lt;/value&gt;\n			&lt;/list&gt;\n		&lt;/property&gt;</pre>\n<h6>4.3.3<span style=\"font-family:宋体\">、配置被代理对象</span></h6>\n<pre code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_10_1052560\" code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_10_1052560\" name=\"code\" class=\"html\">        &lt;!-- 配置被代理对象，可以指定 --&gt;\n	&lt;property name=&quot;target&quot; ref=&quot;test1Service&quot;/&gt;</pre>\n<h5>4.4<span style=\"font-family:宋体\">、完整</span><span style=\"font-family:Calibri\">Spring</span><span style=\"font-family:宋体\">配置文件</span></h5>\n<pre code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_11_8194857\" code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_11_8194857\" name=\"code\" class=\"html\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;beans \n	xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n 	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n 	xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n 	xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\n 	xsi:schemaLocation=&quot;\n 		http://www.springframework.org/schema/beans \n 		http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\n    	http://www.springframework.org/schema/context \n    	http://www.springframework.org/schema/context/spring-context-2.5.xsd\n    	http://www.springframework.org/schema/tx \n    	http://www.springframework.org/schema/tx/spring-tx-2.5.xsd&quot;&gt;\n	&lt;!-- 在容器文件中配置bean(service/dao/domain/action/数据源) --&gt;\n	&lt;!-- 配置被代理的对象 --&gt;\n	&lt;bean id=&quot;test1Service&quot; class=&quot;com.pc.aop.Test1Service&quot;&gt;\n		&lt;property name=&quot;name&quot; value=&quot;张三&quot; /&gt;\n	&lt;/bean&gt;\n	\n	&lt;!-- 配置前置通知 --&gt;\n	&lt;bean id=&quot;myMethodBeforeAdvice&quot; class=&quot;com.pc.aop.MyMethodBeforeAdvice&quot; /&gt;\n		\n	&lt;!-- 配置代理对象 --&gt;\n	&lt;!-- 猜测底层实现使用代理模式，在某一接口被调用的方法上下文插入语句或方法。推测是另外有一个方法，调用这些东西 --&gt;\n	&lt;bean id=&quot;proxyFactoryBean&quot; class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;\n		&lt;!-- 配置代理接口集 --&gt;\n		&lt;property name=&quot;proxyInterfaces&quot;&gt;\n			&lt;list&gt;\n				&lt;value&gt;com.pc.aop.TestServiceInter&lt;/value&gt;\n				&lt;value&gt;com.pc.aop.TestServiceInter2&lt;/value&gt;\n			&lt;/list&gt;\n		&lt;/property&gt;\n		&lt;!-- 把通知织入到代理对象 --&gt;\n		&lt;property name=&quot;interceptorNames&quot;&gt;\n			&lt;list&gt;\n				&lt;!-- 相当于把myMethodBeforeAdvice前置通知和代理对象关联，也可以把通知看做是拦截器 --&gt;\n				&lt;value&gt;myMethodBeforeAdvice&lt;/value&gt;\n			&lt;/list&gt;\n		&lt;/property&gt;\n		&lt;!-- 配置被代理对象，可以指定 --&gt;\n		&lt;property name=&quot;target&quot; ref=&quot;test1Service&quot;/&gt;\n	&lt;/bean&gt;\n&lt;/beans&gt;</pre><br>\n<h2>AOP<span style=\"font-family:宋体\">术语</span></h2>\n<p>\n<p>1、<span style=\"color:rgb(255,0,0)\">切面<span style=\"font-family:Calibri\">(aspect)</span></span>：要实现的交叉功能，是系统模块化的一个切面或领域。如日志记录。</p>\n<p>2、<span style=\"color:rgb(255,0,0)\">连接点</span>：应用程序执行过程中插入切面的地点，可以是方法调用，异常抛出，或者要修改的字段。</p>\n<p>3、<span style=\"color:rgb(255,0,0)\">通知</span>：切面的实际实现，它通知系统新的行为。如在日志通知包含了实现日志功能的代码，如向日志文件写日志。通知在连接点插入到应用系统中。</p>\n<p>4、<span style=\"color:rgb(255,0,0)\">切入点</span>：定义了通知应该应用在哪些连接点，通知可以应用到<span style=\"font-family:Calibri\">AOP</span><span style=\"font-family:宋体\">框架支持的任何连接点。</span></p>\n<p>5、<span style=\"color:rgb(255,0,0)\">引入</span>：为类添加新方法和属性。</p>\n<p>6、<span style=\"color:rgb(255,0,0)\">目标对象</span>：被通知的对象。既可以是自己编写的类也可以是第三方类。</p>\n<p>7、<span style=\"color:rgb(255,0,0)\">代理</span>：将通知应用到目标对象后创建的对象，应用系统的其他部分不用为了支持代理对象而改变。</p>\n<p>8、<span style=\"color:rgb(255,0,0)\">织入</span>：将切面应用到目标对象从而创建一个新代理对象的过程。织入发生在目标对象生命周期的多个点上：</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:rgb(255,0,0)\">编译期</span>：切面在目标对象编译时织入。这需要一个特殊的编译器。</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:rgb(255,0,0)\">类装载期</span>：切面在目标对象被载入<span style=\"font-family:Calibri\">JVM</span><span style=\"font-family:宋体\">时织入</span>。这需要一个特殊的类载入器。</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:rgb(255,0,0)\">运行期</span>：切面在应用系统运行时织入。不需要特殊的编译器。</p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：</span><span style=\"font-family:Calibri\">spring</span><span style=\"font-family:宋体\">只支持方法连接点，不提供属性接入点，</span><span style=\"font-family:Calibri\">spring</span><span style=\"font-family:宋体\">的观点是属性拦截破坏了封装。面向对象的概念是对象自己处理工作，其他对象只能通过方法调用的得到的结果。</span></span></p>\n<p>&nbsp;</p>\n<h2>Spring的两种代理方式</h2>\n<p>1、若目标对象实现了若干接口，<span style=\"font-family:Calibri\">spring</span><span style=\"font-family:宋体\">使用</span><span style=\"font-family:Calibri\">JDK</span><span style=\"font-family:宋体\">的</span><span style=\"font-family:Calibri\">java.lang.reflect.Proxy</span><span style=\"font-family:宋体\">类代理。该类让</span><span style=\"font-family:Calibri\">spring</span><span style=\"font-family:宋体\">动态产生一个新类，它实现了所需的接口，织入了通知，并且代理对目标对象的所有请求。</span></p>\n<p>2、若目标对象没有实现任何接口，<span style=\"font-family:Calibri\">spring</span><span style=\"font-family:宋体\">使用</span><span style=\"font-family:Calibri\">CGLIB</span><span style=\"font-family:宋体\">库生成目标对象的子类。使用该方式时需要注意</span><span style=\"font-family:Calibri\">:</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;1、对接口创建代理优于对类创建代理，因为会产生更加松耦合的系统。对类代理是让遗留系统或无法实现接口的第三方类库同样可以得到通知，这种方式应该是备用方案。</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;2、标记为<span style=\"font-family:Calibri\">final</span><span style=\"font-family:宋体\">的方法不能够被通知。</span><span style=\"font-family:Calibri\">spring</span><span style=\"font-family:宋体\">是为目标类产生子类。任何需要被通知的方法都被复写，将通知织入。</span><span style=\"font-family:Calibri\">final</span><span style=\"font-family:宋体\">方法是不允许重写的。</span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：也就是说通过代理对象去实现</span><span style=\"font-family:Calibri\">AOP</span><span style=\"font-family:宋体\">时，获得的</span><span style=\"font-family:Calibri\">ProxyFactoryBean</span><span style=\"font-family:宋体\">的类型，在目标对象实现接口时，使用的是</span><span style=\"font-family:Calibri\">JDK</span><span style=\"font-family:宋体\">的动态代理技术。如果目标对象没有实现接口，则使用</span><span style=\"font-family:Calibri\">CGLIB</span><span style=\"font-family:宋体\">技术。</span></span></p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<h2>通知</h2>\n<table>\n<tbody>\n<tr>\n<td valign=\"top\">\n<p>通知类型</p>\n</td>\n<td valign=\"top\">\n<p>接口</p>\n</td>\n<td valign=\"top\">\n<p>描述</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n<p>Around &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</p>\n</td>\n<td valign=\"top\">\n<p>org.aopalliance.intercept.MethodInterceptor &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</p>\n</td>\n<td valign=\"top\">\n<p>拦截对目标方法调用</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n<p>Before</p>\n</td>\n<td valign=\"top\">\n<p>org.springframework.aop.MethodBeforeAdvice</p>\n</td>\n<td valign=\"top\">\n<p>在目标方法调用前调用 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n<p>After</p>\n</td>\n<td valign=\"top\">\n<p>org.springframework.aop.AfterReturningAdvice</p>\n</td>\n<td valign=\"top\">\n<p>在目标方法调用后调用</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n<p>Throws</p>\n</td>\n<td valign=\"top\">\n<p>org.springframework.aop.ThrowsAdvice</p>\n</td>\n<td valign=\"top\">\n<p>当目标方法抛出异常时调用</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>\n<h3>1<span style=\"font-family:宋体\">、前置通知</span></h3>\n<pre code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_12_5544898\" code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_12_5544898\" name=\"code\" class=\"java\">package com.pc.aop;\nimport java.lang.reflect.Method;\nimport org.springframework.aop.MethodBeforeAdvice;\n/**\n * \n * @author Switch\n * @function 我的前置通知类\n * @description\n *\n */\npublic class MyMethodBeforeAdvice implements MethodBeforeAdvice {\n	@Override\n	/**\n	 * 在一个给定的方法前被回调\n	 * method:被调用方法名字\n	 * args:给method传递的参数\n	 * target:目标对象\n	 */\n	public void before(Method method, Object[] args, Object target)\n			throws Throwable {\n		// TODO Auto-generated method stub\n		System.out.println(&quot;记录日志...&quot; + method.getName());\n	}\n}</pre><br>\n<h3>2<span style=\"font-family:宋体\">、后置通知</span></h3>\n<pre code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_13_419705\" code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_13_419705\" name=\"code\" class=\"java\">package com.pc.aop;\nimport java.lang.reflect.Method;\nimport org.springframework.aop.AfterReturningAdvice;\n/**\n * \n * @author Switch\n * @function 我的后置通知类\n * @description\n *\n */\npublic class MyAfterReturningAdvice implements AfterReturningAdvice {\n	@Override\n	/**\n	 * 在被调用方法返回后被回调\n	 * returnValue 返回值\n	 * method 被调用方法\n	 * args 被调用方法参数列表\n	 * target 目标对象\n	 */\n	public void afterReturning(Object returnValue, Method method,\n			Object[] args, Object target) throws Throwable {\n		// TODO Auto-generated method stub\n		System.out.println(&quot;关闭资源...&quot; + method.getName());\n	}\n}</pre><br>\n<h3>3<span style=\"font-family:宋体\">、环绕通知</span></h3>\n<pre code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_14_2229848\" code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_14_2229848\" name=\"code\" class=\"java\">package com.pc.aop;\nimport org.aopalliance.intercept.MethodInterceptor;\nimport org.aopalliance.intercept.MethodInvocation;\n/**\n * \n * @author Switch\n * @function 我的环绕通知\n * @description\n *\n */\npublic class MyMethodInterceptor implements MethodInterceptor {\n	@Override\n	public Object invoke(MethodInvocation arg0) throws Throwable {\n		// TODO Auto-generated method stub\n		System.out.println(&quot;调用方法前...&quot;);\n		Object object = arg0.proceed();\n		System.out.println(&quot;调用方法后...&quot;);\n		return object;\n	}\n}</pre><br>\n<h3>4<span style=\"font-family:宋体\">、异常通知</span></h3>\n<pre code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_15_6340503\" code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_15_6340503\" name=\"code\" class=\"java\">package com.pc.aop;\nimport java.lang.reflect.Method;\nimport org.springframework.aop.ThrowsAdvice;\n/**\n * \n * @author Switch\n * @function 我的异常通知\n * @description\n * \n */\npublic class MyThrowsAdvice implements ThrowsAdvice {\n	public void afterThrowing(Method method, Object[] objects, Object target,\n			Exception exception) {\n		System.out.println(&quot;异常...&quot; + exception.getMessage());\n	}\n}</pre><br>\n<p>\n<h3>配置文件</h3>\n<pre code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_16_9230442\" code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_16_9230442\" name=\"code\" class=\"html\">	&lt;!-- 配置前置通知 --&gt;\n	&lt;bean id=&quot;myMethodBeforeAdvice&quot; class=&quot;com.pc.aop.MyMethodBeforeAdvice&quot; /&gt;\n	&lt;!-- 配置后置通知 --&gt;\n	&lt;bean id=&quot;myAfterReturningAdvice&quot; class=&quot;com.pc.aop.MyAfterReturningAdvice&quot; /&gt;\n	&lt;!-- 配置环绕通知 --&gt;\n	&lt;bean id=&quot;myMethodInterceptor&quot; class=&quot;com.pc.aop.MyMethodInterceptor&quot;/&gt;\n	&lt;!-- 配置异常通知 --&gt;\n	&lt;bean id=&quot;myThrowsAdvice&quot; class=&quot;com.pc.aop.MyThrowsAdvice&quot; /&gt;\n	\n    &lt;!-- 配置代理对象 --&gt;\n	&lt;!-- 猜测底层实现使用代理模式，在某一接口被调用的方法上下文插入语句或方法。推测是另外有一个方法，调用这些东西 --&gt;\n	&lt;bean id=&quot;proxyFactoryBean&quot; class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;\n		&lt;!-- 把通知织入到代理对象 --&gt;\n		&lt;property name=&quot;interceptorNames&quot;&gt;\n			&lt;list&gt;\n				&lt;!-- 相当于把myMethodBeforeAdvice前置通知和代理对象关联，也可以把通知看做是拦截器 --&gt;\n				&lt;value&gt;myMethodBeforeAdvice&lt;/value&gt;\n				&lt;!-- 相当于把myAfterReturningAdvice后置通知和代理对象关联 --&gt;\n				&lt;value&gt;myAfterReturningAdvice&lt;/value&gt;\n				&lt;!-- 相当于把myMethodInterceptor环绕通知和代理对象关联 --&gt;\n				&lt;value&gt;myMethodInterceptor&lt;/value&gt;\n				&lt;!-- 相当于把myThrowsAdvice异常通知和代理对象关联 --&gt;\n				&lt;value&gt;myThrowsAdvice&lt;/value&gt;\n			&lt;/list&gt;\n		&lt;/property&gt;\n	&lt;/bean&gt;\n&lt;/beans&gt;</pre><br>\n<h2>定义切入点</h2>\n<p>\n<p>&nbsp; &nbsp; 切入点是一个动态的概念，当通知织入连接点时，该连接点就变成了切入点。切入点主要用于将通知切入到满足一定规则的某一特定类的特定方法。</p>\n<p>案例：</p>\n<pre code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_17_2120381\" code_snippet_id=\"1588284\" snippet_file_name=\"blog_20160225_17_2120381\" name=\"code\" class=\"html\">	&lt;!-- 定义通知切入点 --&gt;\n	&lt;!-- 这里是定义前置通知的切入点 --&gt;\n	&lt;bean id=&quot;myMethodBeforeAdviceFilter&quot; class=&quot;org.springframework.aop.support.NameMatchMethodPointcutAdvisor&quot;&gt;\n		&lt;property name=&quot;advice&quot; ref=&quot;myMethodBeforeAdvice&quot; /&gt;\n		&lt;property name=&quot;mappedNames&quot;&gt;\n			&lt;list&gt;\n				&lt;!-- &lt;value&gt;printOK&lt;/value&gt; --&gt;\n				&lt;!-- 支持正则表达式 --&gt;\n				&lt;value&gt;print*&lt;/value&gt;\n			&lt;/list&gt;\n		&lt;/property&gt;\n	&lt;/bean&gt;\n\n	&lt;!-- 配置代理对象 --&gt;\n	&lt;!-- 猜测底层实现使用代理模式，在某一接口被调用的方法上下文插入语句或方法。推测是另外有一个方法，调用这些东西 --&gt;\n	&lt;bean id=&quot;proxyFactoryBean&quot; class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;\n		&lt;!-- 把通知织入到代理对象 --&gt;\n		&lt;property name=&quot;interceptorNames&quot;&gt;\n			&lt;list&gt;\n				&lt;!-- 前置通知配置了引入通知，故使用引入通知指定哪些方法生效 --&gt;\n				&lt;value&gt;myMethodBeforeAdviceFilter&lt;/value&gt;\n			&lt;/list&gt;\n		&lt;/property&gt;\n	&lt;/bean&gt;</pre><br>\n<h3>正则表达式切入点</h3>\n<table>\n<tbody>\n<tr>\n<td valign=\"top\">\n<p>符号</p>\n</td>\n<td valign=\"top\">\n<p>描述</p>\n</td>\n<td valign=\"top\">\n<p>示例</p>\n</td>\n<td valign=\"top\">\n<p>匹配</p>\n</td>\n<td valign=\"top\">\n<p>不匹配</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n<p>.</p>\n</td>\n<td valign=\"top\">\n<p>匹配任何单个字符</p>\n</td>\n<td valign=\"top\">\n<p>setFoo.</p>\n</td>\n<td valign=\"top\">\n<p>setFooB&nbsp;</p>\n</td>\n<td valign=\"top\">\n<p>setFoo&nbsp;setFooBar</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n<p>&#43;</p>\n</td>\n<td valign=\"top\">\n<p>匹配前一个字符一次或多次</p>\n</td>\n<td valign=\"top\">\n<p>setFoo&#43;</p>\n</td>\n<td valign=\"top\">\n<p>setFooBar,setFooB</p>\n</td>\n<td valign=\"top\">\n<p>setFoo</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n<p>*</p>\n</td>\n<td valign=\"top\">\n<p>匹配前一个字符<span style=\"font-family:Calibri\">0</span><span style=\"font-family:宋体\">次或多次</span></p>\n</td>\n<td valign=\"top\">\n<p>setFoo*</p>\n</td>\n<td valign=\"top\">\n<p>setFoo,setFooB,setFooBar</p>\n</td>\n<td valign=\"top\">\n<p>&nbsp;</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<br>\n<br>\n<br>\n<br>\n<br>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n   \n', '2016-04-16 01:21:08', '0');
INSERT INTO `article` VALUES ('10035', '10003', 'Hibernate入门', '\n\n<h1 style=\"text-align:center\"><span style=\"font-size:18px\">Hibernate<span style=\"font-family:宋体\">入门</span></span></h1>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>基本概述</h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;Hibernate<span style=\"font-family:宋体\">是一个开放源代码的对象关系映射框架，它对</span><span style=\"font-family:Calibri\">JDBC</span><span style=\"font-family:宋体\">进行了非常轻量级的对象封装，使得</span><span style=\"font-family:Calibri\">Java</span><span style=\"font-family:宋体\">程序员可以随心所欲的使用对象编程思维来操纵数据库。&nbsp;</span><span style=\"font-family:Calibri\">Hibernate</span><span style=\"font-family:宋体\">可以应用在任何使用</span><span style=\"font-family:Calibri\">JDBC</span><span style=\"font-family:宋体\">的场合，既可以在</span><span style=\"font-family:Calibri\">Java</span><span style=\"font-family:宋体\">的客户端程序使用，也可以在</span><span style=\"font-family:Calibri\">Servlet/JSP</span><span style=\"font-family:宋体\">的</span><span style=\"font-family:Calibri\">Web</span><span style=\"font-family:宋体\">应用中使用，最具革命意义的是，</span><span style=\"font-family:Calibri\">Hibernate</span><span style=\"font-family:宋体\">可以在应用</span><span style=\"font-family:Calibri\">EJB</span><span style=\"font-family:宋体\">的</span><span style=\"font-family:Calibri\">J2EE</span><span style=\"font-family:宋体\">架构中取代</span><span style=\"font-family:Calibri\">CMP</span><span style=\"font-family:宋体\">，完成数据持久化的重任。</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;hibernate<span style=\"font-family:宋体\">是轻量级的</span><span style=\"font-family:Calibri\">ORM</span><span style=\"font-family:宋体\">框架，</span><span style=\"font-family:Calibri\">ORM</span><span style=\"font-family:宋体\">全称</span><span style=\"font-family:Calibri\">object/relation&nbsp;mapping&nbsp;[</span><span style=\"font-family:宋体\">对象</span><span style=\"font-family:Calibri\">/</span><span style=\"font-family:宋体\">关系映射</span><span style=\"font-family:Calibri\">]</span><span style=\"font-family:宋体\">。</span></p>\n<p>PS<span style=\"font-family:宋体\">：</span><span style=\"font-family:Calibri\">JAR</span><span style=\"font-family:宋体\">包及其文档可以在官网网站下载：</span><a target=\"_blank\" target=\"_blank\" href=\"http://www.hibernate.org\"><span style=\"color:rgb(128,0,128)\">http://www.hibernate.org</span></a></p>\n<p>&nbsp;</p>\n<h2>ORM<span style=\"font-family:宋体\">基本概念</span></h2>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;对象关系映射（<span style=\"font-family:Calibri\">Object&nbsp;Relation&nbsp;Mapping</span><span style=\"font-family:宋体\">，简称</span><span style=\"font-family:Calibri\">ORM</span><span style=\"font-family:宋体\">）是一种为了解决面向对象与关系数据库存在的互不匹配的现象的技术。&nbsp;简单的说，</span><span style=\"font-family:Calibri\">ORM</span><span style=\"font-family:宋体\">是通过使用描述对象和数据库之间映射的元数据，将</span><span style=\"font-family:Calibri\">java</span><span style=\"font-family:宋体\">程序中的对象自动持久化到关系数据库中。本质上就是将数据从一种形式转换到另外一种形式。</span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：通过</span><span style=\"font-family:Calibri\">ORM</span><span style=\"font-family:宋体\">这种技术可以在</span><span style=\"font-family:Calibri\">JAVA</span><span style=\"font-family:宋体\">程序以类和对象的形式去操控数据库的表和记录。</span></span></p>\n<p>&nbsp;</p>\n<h2>ORM<span style=\"font-family:宋体\">框架</span></h2>\n<p>1<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">Apache&nbsp;OJB</span></p>\n<p><span style=\"color:rgb(255,0,0)\">2<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">Hibernate</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">3<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">iBatis</span></span></p>\n<p>4<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">SMYLE</span></p>\n<p>5<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">TopLink</span></p>\n<p>&nbsp;</p>\n<h2>使用<span style=\"font-family:Calibri\">Hibernate</span><span style=\"font-family:宋体\">的好处</span></h2>\n<p>1<span style=\"font-family:宋体\">、引入</span><span style=\"font-family:Calibri\">hibernate</span><span style=\"font-family:宋体\">可以使工作人员角色细化，让程序员更关心业务流程。让数据库人员关注数据库相关的各种操作。</span></p>\n<p>2<span style=\"font-family:宋体\">、分层更清晰，耦合性更小。</span></p>\n<p>3<span style=\"font-family:宋体\">、通用性强：可以更轻松的从一个数据库平台转移到别的平台。</span></p>\n<p>4<span style=\"font-family:宋体\">、对象化：把关系数据库变成了</span><span style=\"font-family:Calibri\">Java</span><span style=\"font-family:宋体\">的对象，更加方便操作。</span></p>\n<p>5<span style=\"font-family:宋体\">、性能保证：</span><span style=\"font-family:Calibri\">hibernate</span><span style=\"font-family:宋体\">可能按不同的数据库，处理不同的操作是用最优化的</span><span style=\"font-family:Calibri\">SQL</span><span style=\"font-family:宋体\">语句。</span></p>\n<p>6<span style=\"font-family:宋体\">、增加了程序的鲁棒性。</span></p>\n<p>&nbsp;</p>\n<h2>基本原理图</h2>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160131003550272\" width=\"800\" height=\"400\" alt=\"\"></div>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：</span><span style=\"font-family:Calibri\">Hibernate</span><span style=\"font-family:宋体\">的基本原理是通过反射机制，将</span><span style=\"font-family:Calibri\">DB</span><span style=\"font-family:宋体\">中的表与</span><span style=\"font-family:Calibri\">Java</span><span style=\"font-family:宋体\">类进行映射。</span></span></p>\n<p>&nbsp;</p>\n<h2>Hibernate<span style=\"font-family:宋体\">框架与</span><span style=\"font-family:Calibri\">JDBC</span><span style=\"font-family:宋体\">的区别</span></h2>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160131003654444\" alt=\"\"></div>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：使用</span><span style=\"font-family:Calibri\">JDBC</span><span style=\"font-family:宋体\">的时候如果有结果需要处理还需要进行二次封装，而</span><span style=\"font-family:Calibri\">Hibernate</span><span style=\"font-family:宋体\">这样的</span><span style=\"font-family:Calibri\">ORM</span><span style=\"font-family:宋体\">框架已经在内部就已经封装好了，故其功能更强大，也更便捷。</span></span></p>\n<p>&nbsp;</p>\n<h2>MVC<span style=\"font-family:宋体\">框架图</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">加上</span><span style=\"font-family:Calibri\">Hibernate</span><span style=\"font-family:宋体\">框架</span><span style=\"font-family:Calibri\">)</span></h2>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160131003723538\" alt=\"\"></div>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p>PS<span style=\"font-family:宋体\">：这可以和前段时间写的</span><a target=\"_blank\" target=\"_blank\" href=\"http://blog.csdn.net/q547550831/article/details/50562023\"><span style=\"color:rgb(128,0,128)\">Struts<span style=\"font-family:宋体\">入门</span></span></a>、<a target=\"_blank\" target=\"_blank\" href=\"http://blog.csdn.net/q547550831/article/details/50478721\"><span style=\"color:rgb(128,0,128)\">Web&nbsp;MVC<span style=\"font-family:宋体\">模式实现 </span></span></a>这两篇博客里的<span style=\"font-family:Calibri\">MVC</span><span style=\"font-family:宋体\">模式进行比较。</span></p>\n<p>&nbsp;</p>\n<h2>Hibernate<span style=\"font-family:宋体\">开发的三种方式</span></h2>\n<h3>1<span style=\"font-family:宋体\">、由</span><span style=\"font-family:Calibri\">Domain</span><span style=\"font-family:宋体\">对象</span><span style=\"font-family:Calibri\">-&gt;mapping-&gt;database(</span><span style=\"font-family:宋体\">官方推荐</span><span style=\"font-family:Calibri\">)</span></h3>\n<h3>2<span style=\"font-family:宋体\">、由</span><span style=\"font-family:Calibri\">Database-&gt;Domain</span><span style=\"font-family:宋体\">对象</span><span style=\"font-family:Calibri\">-&gt;mapping</span></h3>\n<h3>3<span style=\"font-family:宋体\">、由映射文件开始</span></h3>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：其实通过</span><span style=\"font-family:Calibri\">MyEclipse</span><span style=\"font-family:宋体\">可以自动生成大部分代码，但是为了理解的更深刻，还是要学习手工开发。</span></span></p>\n<p>&nbsp;</p>\n<h2>Hibernate<span style=\"font-family:宋体\">手工开发</span></h2>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;采用上述第二种方式，实现一个员工管理系统。</p>\n<h3>1<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">Database</span><span style=\"font-family:宋体\">设计(Oracle)</span></h3>\n<pre code_snippet_id=\"1570862\" snippet_file_name=\"blog_20160131_1_6093555\" name=\"code\" class=\"sql\">--创建employee表\ncreate table employee\n(\n       id number primary key, --编号\n       name varchar2(50) not null,  --姓名\n       email varchar2(50) not null, --电子邮件\n       hiredate date not null --入职时间\n);\n\n--创建employee自增序列\ncreate sequence emp_seq\nstart with 1\nincrement by 1\nminvalue 1\nnomaxvalue\nnocycle\nnocache\n;</pre>\n<h3>2<span style=\"font-family:宋体\">、引入</span><span style=\"font-family:Calibri\">hibernate</span><span style=\"font-family:宋体\">包</span></h3>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;这个可以到官方网站上下载，然后引入。</p>\n<h3>3<span style=\"font-family:宋体\">、编写</span><span style=\"font-family:Calibri\">POJO</span><span style=\"font-family:宋体\">类</span><span style=\"font-family:Calibri\">(Employee</span><span style=\"font-family:宋体\">类</span><span style=\"font-family:Calibri\">)</span></h3>\n<pre code_snippet_id=\"1570862\" snippet_file_name=\"blog_20160131_2_8187889\" name=\"code\" class=\"java\">package com.pc.domain;\n\nimport java.io.Serializable;\nimport java.util.Date;\n\n/**\n * \n * @author Switch\n * @function employee表的映射Domain对象\n * @description 可以视为Domain对象、Javabean、POJO，该POJO按照规范应当序列化，目的是唯一的标识该对象,同时可以在网络和文件传输\n *\n */\npublic class Employee implements Serializable{\n	/**\n	 * \n	 */\n	private static final long serialVersionUID = 1L;\n	private Integer id;\n    private String name;\n    private String email;\n    private Date hiredate;\n	public Integer getId() {\n		return id;\n	}\n	public void setId(Integer id) {\n		this.id = id;\n	}\n	public String getName() {\n		return name;\n	}\n	public void setName(String name) {\n		this.name = name;\n	}\n	public String getEmail() {\n		return email;\n	}\n	public void setEmail(String email) {\n		this.email = email;\n	}\n	public Date getHiredate() {\n		return hiredate;\n	}\n	public void setHiredate(Date hiredate) {\n		this.hiredate = hiredate;\n	}   \n}</pre>\n<h3>4<span style=\"font-family:宋体\">、编写对象映射文件</span><span style=\"font-family:Calibri\">(Employee.hbm.xml)</span></h3>\n<pre code_snippet_id=\"1570862\" snippet_file_name=\"blog_20160131_3_6901133\" name=\"code\" class=\"html\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!-- 映射文件需要DTD来指定格式 --&gt;\n&lt;!DOCTYPE hibernate-mapping PUBLIC \n	&quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;\n	&quot;http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd&quot;&gt;\n&lt;!-- 该文件用于配置domain对象和表的映射关系 --&gt;\n&lt;!-- package指定是哪个包下面的映射 --&gt;\n&lt;hibernate-mapping package=&quot;com.pc.domain&quot;&gt;\n	&lt;!-- name指domain对象的名字 --&gt;\n	&lt;!-- table指表的名字 --&gt;\n	&lt;class name=&quot;Employee&quot; table=&quot;employee&quot;&gt;\n		&lt;!-- ID元素用户指定主键属性 --&gt;\n		&lt;!-- name指定domain对象中的主键属性 --&gt;\n		&lt;!-- column指定表中的主键列 --&gt;\n		&lt;!-- type指定属性类型 --&gt;\n		&lt;id name=&quot;id&quot; column=&quot;id&quot; type=&quot;java.lang.Integer&quot;&gt;\n			&lt;!-- 该元素用户指定主键值生成策略 --&gt;\n			&lt;!-- class指生成策略类型 --&gt;\n			&lt;!-- hilo native increment sequence uuid等 --&gt;\n			&lt;generator class=&quot;sequence&quot;&gt;\n				&lt;!-- name指定生成策略参数名 --&gt;\n				&lt;!-- 其中的值表示对应的东西，这里是一个自增序列 --&gt;\n				&lt;param name=&quot;sequence&quot;&gt;emp_seq&lt;/param&gt;\n			&lt;/generator&gt;\n		&lt;/id&gt;\n		&lt;!-- 对其它属性的配置 --&gt;\n		&lt;!-- name表示属性名 --&gt;\n		&lt;!-- type表示属性类型 --&gt;\n		&lt;property name=&quot;name&quot; type=&quot;java.lang.String&quot;&gt;\n			&lt;!-- 配置对应列属性 --&gt;\n			&lt;!-- name对应于表中相应列 --&gt;\n			&lt;!-- not-null之类的属性可以表示该列的限制 --&gt;\n			&lt;column name=&quot;name&quot; not-null=&quot;false&quot; /&gt;\n		&lt;/property&gt;\n		&lt;property name=&quot;email&quot; type=&quot;java.lang.String&quot;&gt;\n			&lt;column name=&quot;email&quot; not-null=&quot;false&quot; /&gt;\n		&lt;/property&gt;\n		&lt;property name=&quot;hiredate&quot; type=&quot;java.util.Date&quot;&gt;\n			&lt;column name=&quot;hiredate&quot; not-null=&quot;false&quot; /&gt;\n		&lt;/property&gt;\n	&lt;/class&gt;\n&lt;/hibernate-mapping&gt;</pre>\n<h3>5<span style=\"font-family:宋体\">、配置</span><span style=\"font-family:Calibri\">hibernate.cfg.xml</span></h3>\n<pre code_snippet_id=\"1570862\" snippet_file_name=\"blog_20160131_4_5090990\" name=\"code\" class=\"html\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC\n        &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\n        &quot;http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd&quot;&gt;\n&lt;hibernate-configuration&gt;\n	&lt;!-- 配置oracle连接 --&gt;\n	&lt;session-factory&gt;\n		&lt;!-- 常用配置可以参考hibernate集合包主目录\\project\\etc、hibernate.properties文件 --&gt;\n		&lt;!-- 配置driver --&gt;\n		&lt;!-- name表示参数类型 --&gt;\n		&lt;!-- 元素值表示参数内容 --&gt;\n		&lt;property name=&quot;connection.driver_class&quot;&gt;oracle.jdbc.driver.OracleDriver&lt;/property&gt;\n		&lt;!-- 配置url --&gt;\n		&lt;property name=&quot;connection.url&quot;&gt;jdbc:oracle:thin:@127.0.0.1:1521:SWITCH&lt;/property&gt;\n		&lt;!-- 配置用户名 --&gt;\n		&lt;property name=&quot;connection.username&quot;&gt;scott&lt;/property&gt;\n		&lt;!-- 配置密码 --&gt;\n		&lt;property name=&quot;connection.password&quot;&gt;123456&lt;/property&gt;\n		&lt;!-- 配置显示hibernate生成的 sql ,特别说明，在开发阶段设为true利于调试，在使用项目则设为false--&gt;\n		&lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\n		&lt;!-- 配置dialect，明确的告知Hibernate连接的是哪种数据库 --&gt;\n		&lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.OracleDialect&lt;/property&gt;\n		&lt;!-- 指定管理的对象映射文件 --&gt;\n		&lt;!-- resource指定单个domain对象的配置文件 --&gt;\n		&lt;mapping resource=&quot;com/pc/domain/Employee.hbm.xml&quot; /&gt;\n	&lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;</pre>\n<h3>6<span style=\"font-family:宋体\">、编写测试类测试</span></h3>\n<p>&nbsp; &nbsp; 为了简单这里不写<span style=\"font-family:Calibri\">EmployeeService</span><span style=\"font-family:宋体\">类提供服务了，直接调用持久层。但是实际开发，必须要通过</span><span style=\"font-family:Calibri\">EmployeeService</span><span style=\"font-family:宋体\">调用持久层提供服务。</span></p>\n<pre code_snippet_id=\"1570862\" snippet_file_name=\"blog_20160131_5_9344131\" name=\"code\" class=\"java\">package com.pc.view;\n\nimport java.util.Date;\n\nimport org.hibernate.SessionFactory;\nimport org.hibernate.Transaction;\nimport org.hibernate.cfg.Configuration;\nimport org.hibernate.classic.Session;\n\nimport com.pc.domain.Employee;\nimport com.pc.util.MySessionFactory;\n\npublic class TestMain {\n	public static void main(String[] args) {\n		// 使用hibernate完成crud操作(只见对象，不见表)\n		// 不使用service，直接测试\n		// 1.创建Configuration对象，该对象用于读取hibernate.cfg.xml，并完成初始化\n		// configure默认载入hibernate.cfg.xml文件，可以指定需要载入的xml\n		Configuration configuration = new Configuration().configure();\n		// 2.创建SessionFactory对象(这是一个会话工厂，是一个重量级的对象)\n		SessionFactory sessionFactory = configuration.buildSessionFactory();\n		// 3.创建Session(用于与数据库的对话，相当于JDBC中的Connection)\n		Session session = sessionFactory.openSession();\n		// 4.对Hibernate而言，要求程序员，在进行增加、删除、修改的时候使用事务提交，否则不生效\n		Transaction transaction = session.beginTransaction();\n		// 添加一个雇员\n		Employee employee = new Employee();\n		employee.setName(&quot;zs&quot;);\n		employee.setEmail(&quot;123456@switch.com&quot;);\n		employee.setHiredate(new Date());\n		// 保存\n		// ---&gt;insert into ...[被hibernate封装]\n		session.save(employee);\n		// 提交\n		transaction.commit();\n		session.close();\n    }\n}</pre><br>\n<h2>补充内容</h2>\n<h3>1<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">Hibernate</span><span style=\"font-family:宋体\">依赖的其它库</span></h3>\n<table>\n<tbody>\n<tr>\n<td valign=\"top\">\n<p>Jar<span style=\"font-family:宋体\">包</span></p>\n</td>\n<td valign=\"top\">\n<p>说明</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n<p>Commons&nbsp;Collections</p>\n</td>\n<td valign=\"top\">\n<p>Commons<span style=\"font-family:宋体\">的集合类库</span></p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n<p>antlr</p>\n</td>\n<td valign=\"top\">\n<p>Java<span style=\"font-family:宋体\">开源的语法分析生成器</span></p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n<p>dom4j</p>\n</td>\n<td valign=\"top\">\n<p>进行<span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">解析的类库</span></p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n<p>javassist</p>\n</td>\n<td valign=\"top\">\n<p>开源的分析、编辑和创建<span style=\"font-family:Calibri\">Java</span><span style=\"font-family:宋体\">字节码的类库</span></p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n<p>slf4j-api</p>\n</td>\n<td valign=\"top\">\n<p>Simple&nbsp;Logging&nbsp;Facade&nbsp;for&nbsp;Java<span style=\"font-family:宋体\">，日志处理</span><span style=\"font-family:Calibri\">API</span></p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n<p>slf4j-simple</p>\n</td>\n<td valign=\"top\">\n<p>SLF4J&nbsp;API<span style=\"font-family:宋体\">的实现，实现了简单日志处理</span></p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n<p>JTA</p>\n</td>\n<td valign=\"top\">\n<p>Java&nbsp;Transaction&nbsp;API<span style=\"font-family:宋体\">，</span><span style=\"font-family:Calibri\">Java</span><span style=\"font-family:宋体\">中的事务处理</span><span style=\"font-family:Calibri\">API</span></p>\n</td>\n</tr>\n</tbody>\n</table>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：</span><span style=\"font-family:Calibri\">Hibernate</span><span style=\"font-family:宋体\">框架是由许多技术组成的，比如解析</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">的</span><span style=\"font-family:Calibri\">dom4j</span><span style=\"font-family:宋体\">等等。</span></span></p>\n<p>\n<h3>2<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">POJO(Plain&nbsp;Ordinary&nbsp;Java&nbsp;Objects</span><span style=\"font-family:宋体\">简单的</span><span style=\"font-family:Calibri\">Java</span><span style=\"font-family:宋体\">对象</span><span style=\"font-family:Calibri\">)</span></h3>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;在使用<span style=\"font-family:Calibri\">hibernate</span><span style=\"font-family:宋体\">时，要求和数据库的某张表相互映射的那个</span><span style=\"font-family:Calibri\">java</span><span style=\"font-family:宋体\">类，是一个</span><span style=\"font-family:Calibri\">POJO</span><span style=\"font-family:宋体\">类，一般放在</span><span style=\"font-family:Calibri\">com.xxx.domain</span><span style=\"font-family:宋体\">包下</span><span style=\"font-family:Calibri\">,POJO</span><span style=\"font-family:宋体\">类翻译过来就是</span><span style=\"font-family:Calibri\">:</span><span style=\"font-family:宋体\">简单的</span><span style=\"font-family:Calibri\">Java</span><span style=\"font-family:宋体\">对象（</span><span style=\"font-family:Calibri\">Plain&nbsp;Ordinary&nbsp;Java&nbsp;Objects</span><span style=\"font-family:宋体\">）实际就是普通</span><span style=\"font-family:Calibri\">JavaBeans,</span><span style=\"font-family:宋体\">使用</span><span style=\"font-family:Calibri\">POJO</span><span style=\"font-family:宋体\">名称是为了避免和</span><span style=\"font-family:Calibri\">EJB</span><span style=\"font-family:宋体\">混淆起来。一个</span><span style=\"font-family:Calibri\">POJO</span><span style=\"font-family:宋体\">类应当具有</span><span style=\"font-family:Calibri\">:</span></p>\n<p>1<span style=\"font-family:宋体\">、</span>有一个主键属性<span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">用于唯一标识该对象。</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">这就是</span><span style=\"font-family:Calibri\">hibernate</span><span style=\"font-family:宋体\">设计者建议要映射的表需要一个主键</span>的原因)</p>\n<p>2<span style=\"font-family:宋体\">、</span>有其它的属性</p>\n<p>3<span style=\"font-family:宋体\">、</span>有对各个属性操作的<span style=\"font-family:Calibri\">get/set</span><span style=\"font-family:宋体\">方法</span></p>\n<p>4<span style=\"font-family:宋体\">、</span>属性一般是<span style=\"font-family:Calibri\">private</span><span style=\"font-family:宋体\">修饰</span><span style=\"font-family:Calibri\">.</span></p>\n<p>5<span style=\"font-family:宋体\">、</span>一定有一个无参的构造函数<span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">用于</span><span style=\"font-family:Calibri\">hibernate</span><span style=\"font-family:宋体\">框架反射用</span><span style=\"font-family:Calibri\">)</span></p>\n<h3>3<span style=\"font-family:宋体\">、使用第一种方式实现</span><span style=\"font-family:Calibri\">Hibernate</span></h3>\n<p>&nbsp; &nbsp; 第一种方式是先写<span style=\"font-family:Calibri\">Domain</span><span style=\"font-family:宋体\">对象，再由</span><span style=\"font-family:Calibri\">mapping</span><span style=\"font-family:宋体\">生成数据库中数据。</span></p>\n<p>\n<h4>1<span style=\"font-family:宋体\">、重新配置</span><span style=\"font-family:Calibri\">hibernate.cfg.xml</span><span style=\"font-family:宋体\">文件</span></h4>\n<pre code_snippet_id=\"1570862\" snippet_file_name=\"blog_20160131_6_42243\" name=\"code\" class=\"html\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\n&lt;!DOCTYPE hibernate-configuration PUBLIC\n        &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\n        &quot;http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd&quot;&gt;\n&lt;hibernate-configuration&gt;\n	&lt;!-- 配置oracle连接 --&gt;\n	&lt;session-factory&gt;\n		&lt;!-- 常用配置可以参考hibernate集合包主目录\\project\\etc、hibernate.properties文件 --&gt;\n		&lt;!-- 配置driver --&gt;\n		&lt;!-- name表示参数类型 --&gt;\n		&lt;!-- 元素值表示参数内容 --&gt;\n		&lt;property name=&quot;connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;\n		&lt;!-- 配置url --&gt;\n		&lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://127.0.0.1:3306/mydb1&lt;/property&gt;\n		&lt;!-- 配置用户名 --&gt;\n		&lt;property name=&quot;connection.username&quot;&gt;root&lt;/property&gt;\n		&lt;!-- 配置密码 --&gt;\n		&lt;property name=&quot;connection.password&quot;&gt;123456&lt;/property&gt;\n		&lt;!-- 配置显示hibernate生成的 sql ,特别说明，在开发阶段设为true利于调试，在使用项目则设为false--&gt;\n		&lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\n		&lt;!-- 配置dialect，明确的告知Hibernate连接的是哪种数据库 --&gt;\n		&lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQLDialect&lt;/property&gt;\n		&lt;!-- 让hibernate自动创建表 --&gt;\n		&lt;!-- create创建该表 ，如果有表，删除后再创建--&gt;\n		&lt;!-- update如果没有表则创建新表，如果有表，表结构有没有变化，如果有变化，则创建新表 --&gt;\n		&lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\n		&lt;!-- 指定管理的对象映射文件 --&gt;\n		&lt;!-- resource指定单个domain对象的配置文件 --&gt;\n		&lt;mapping resource=&quot;com/pc/domain/Employee.hbm.xml&quot; /&gt;\n	&lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;</pre>\n<h4>2<span style=\"font-family:宋体\">、对对象映射文件</span><span style=\"font-family:Calibri\">(Employee.hbm.xml)</span><span style=\"font-family:宋体\">，做相应的修改</span></h4>\n<pre code_snippet_id=\"1570862\" snippet_file_name=\"blog_20160131_7_9835282\" name=\"code\" class=\"html\">&lt;id name=&quot;id&quot; column=&quot;id&quot; type=&quot;java.lang.Integer&quot;&gt;\n	&lt;!-- 该元素用户指定主键值生成策略 --&gt;\n	&lt;!-- class指生成策略类型 --&gt;\n	&lt;!-- hilo native increment sequence uuid等 --&gt;\n	&lt;generator class=&quot;increment&quot; /&gt;\n&lt;/id&gt;</pre>\n<p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：因为是从</span><span style=\"font-family:Calibri\">Oracle</span><span style=\"font-family:宋体\">转到</span><span style=\"font-family:Calibri\">MySQL</span><span style=\"font-family:宋体\">，所以</span><span style=\"font-family:Calibri\">Sequence</span><span style=\"font-family:宋体\">不能使用了，这是就修改成</span><span style=\"font-family:Calibri\">increment</span><span style=\"font-family:宋体\">。</span></span></p>\n<br>\n<h2>对员工系统的优化</h2>\n<h3>1<span style=\"font-family:宋体\">、将</span><span style=\"font-family:Calibri\">SessionFactory</span><span style=\"font-family:宋体\">做成工具类</span></h3>\n<p>&nbsp; &nbsp; 因为<span style=\"font-family:Calibri\">SessionFactory</span><span style=\"font-family:宋体\">是重量级类，故一个数据库最好只对应一个</span><span style=\"font-family:Calibri\">SessionFactory</span><span style=\"font-family:宋体\">，这就要采用单例模式了。</span></p>\n<pre code_snippet_id=\"1570862\" snippet_file_name=\"blog_20160131_8_4437089\" name=\"code\" class=\"java\">package com.pc.util;\n\nimport org.hibernate.SessionFactory;\nimport org.hibernate.cfg.Configuration;\n\n/**\n * \n * @author Switch\n * @function 实现SessionFactory单例化\n * @description 在使用Hibernate开发项目的时候，保证一个数据库只对应一个SessionFactory\n *\n */\npublic class MySessionFactory {\n	private static SessionFactory sessionFactory = null;\n	// 单例\n	private MySessionFactory() {\n		\n	}\n	static {\n		sessionFactory = new Configuration().configure().buildSessionFactory();\n	}\n	public static SessionFactory getSessionFactory() {\n		return sessionFactory;\n	}\n}</pre>\n<h3>2<span style=\"font-family:宋体\">、将</span><span style=\"font-family:Calibri\">CRUD</span><span style=\"font-family:宋体\">操作抽出成相应方法</span></h3>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;原理上应该讲业务逻辑放在<span style=\"font-family:Calibri\">EmployeeService</span><span style=\"font-family:宋体\">类中，但是这里为了方便就放在测试类中。</span></p>\n<pre code_snippet_id=\"1570862\" snippet_file_name=\"blog_20160131_9_6214995\" name=\"code\" class=\"java\">package com.pc.view;\n\nimport java.util.Date;\n\nimport org.hibernate.SessionFactory;\nimport org.hibernate.Transaction;\nimport org.hibernate.cfg.Configuration;\nimport org.hibernate.classic.Session;\n\nimport com.pc.domain.Employee;\nimport com.pc.util.MySessionFactory;\n\npublic class TestMain {\n	public static void main(String[] args) {\n		// 使用hibernate完成crud操作(只见对象，不见表)\n		// 不使用service，直接测试\n		addEmployee();\n		// updateEmployee();\n		// deleteEmployee();\n	}\n\n	// 删除员工信息\n	public static void deleteEmployee() {\n		// 获取一个会话\n		Session session = MySessionFactory.getSessionFactory().openSession();\n\n		// 创建一个事务\n		Transaction transaction = null;\n		try {\n			transaction = session.beginTransaction();\n			// 1.获取该雇员\n			Employee employee = (Employee) session.load(Employee.class, 3);\n			// 2.删除该雇员\n			session.delete(employee);\n			// 提交\n			transaction.commit();\n		} catch (Exception e) {\n			// TODO: handle exception\n			if (transaction != null) {\n				transaction.rollback();\n			}\n			throw new RuntimeException(e.getMessage());\n		} finally {\n			if (session != null &amp;&amp; session.isOpen()) {\n				session.close();\n			}\n		}\n	}\n\n	// 修改员工信息\n	public static void updateEmployee() {\n		// 获取一个会话\n		Session session = MySessionFactory.getSessionFactory().openSession();\n\n		// 创建事务对象\n		Transaction transaction = null;\n		try {\n			transaction = session.beginTransaction();\n			// 1.获取要修改的雇员\n			// load是通过主键属性，获取该对象实例(表的记录)\n			Employee employee = (Employee) session.load(Employee.class, 2);\n			// 2.修改该雇员\n			employee.setName(&quot;ls&quot;);\n			// 提交\n			transaction.commit();\n		} catch (Exception e) {\n			// TODO: handle exception\n			if (transaction != null) {\n				transaction.rollback();\n			}\n			throw new RuntimeException(e.getMessage());\n		} finally {\n			if (session != null &amp;&amp; session.isOpen()) {\n				session.close();\n			}\n		}\n	}\n\n	// 添加员工\n	public static void addEmployee() {\n		// 1.创建Configuration对象，该对象用于读取hibernate.cfg.xml，并完成初始化\n		// configure默认载入hibernate.cfg.xml文件，可以指定需要载入的xml\n		Configuration configuration = new Configuration().configure();\n		// 2.创建SessionFactory对象(这是一个会话工厂，是一个重量级的对象)\n		SessionFactory sessionFactory = configuration.buildSessionFactory();\n		// 3.创建Session(用于与数据库的对话，相当于JDBC中的Connection)\n		Session session = sessionFactory.openSession();\n		// 4.对Hibernate而言，要求程序员，在进行增加、删除、修改的时候使用事务提交，否则不生效\n		Transaction transaction = session.beginTransaction();\n		// 添加一个雇员\n		Employee employee = new Employee();\n		employee.setName(&quot;zs&quot;);\n		employee.setEmail(&quot;123456@switch.com&quot;);\n		employee.setHiredate(new Date());\n		// 保存\n		// ---&gt;insert into ...[被hibernate封装]\n		session.save(employee);\n		// 提交\n		transaction.commit();\n		session.close();\n	}\n}</pre><br>\n<br>\n<br>\n<br>\n<p>----------<span style=\"font-family:宋体\">参考《韩顺平</span><span style=\"font-family:Calibri\">.hibernate</span><span style=\"font-family:宋体\">从入门到精通》</span></p>\n<p><span style=\"font-family:宋体\"><br>\n</span></p>\n   \n', '2016-04-16 01:21:08', '3');
INSERT INTO `article` VALUES ('10036', '10003', 'Struts使用细节', '\n\n<h1 style=\"text-align:center\"><span style=\"font-size:18px\">Struts<span style=\"font-family:宋体\">使用细节</span></span></h1>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>为什么使用<span style=\"font-family:Times New Roman\">DispatchAction(</span><span style=\"font-family:宋体\">分派</span><span style=\"font-family:Times New Roman\">action)</span><span style=\"font-family:宋体\">？</span></h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;如果每个请求都对应一个<span style=\"font-family:Times New Roman\">action</span><span style=\"font-family:宋体\">，这样就会造成</span><span style=\"font-family:Times New Roman\">action</span><span style=\"font-family:宋体\">过多，使得程序显得比较臃肿。这样就可以通过使用</span><span style=\"font-family:Times New Roman\">DispatchAction</span><span style=\"font-family:宋体\">，其原理是将一类请求写到一个</span><span style=\"font-family:Times New Roman\">action</span><span style=\"font-family:宋体\">中。</span></p>\n<p>PS<span style=\"font-family:宋体\">：其实这种思想和以前学</span><span style=\"font-family:Times New Roman\">Servlet</span><span style=\"font-family:宋体\">时，处理一类事物的控制器差不多。原文链接：</span><a target=\"_blank\" href=\"http://blog.csdn.net/q547550831/article/details/50464996\"><span style=\"color:rgb(128,0,128)\">用户管理系统</span></a></p>\n<p>&nbsp;</p>\n<h2>DispatchAction<span style=\"font-family:宋体\">原理图</span></h2>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160129004315541\" alt=\"\"></div>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：在</span><span style=\"font-family:Times New Roman\">uri</span><span style=\"font-family:宋体\">中，跳转到分派</span><span style=\"font-family:Times New Roman\">action</span><span style=\"font-family:宋体\">，如果</span><span style=\"font-family:Times New Roman\">execute</span><span style=\"font-family:宋体\">方法没被删除，每次都是调用它来处理。所以一定要将它删除。</span></span></p>\n<p>&nbsp;</p>\n<h2>Struts<span style=\"font-family:宋体\">全局跳转</span></h2>\n<h3>全局跳转页面配置基本语法</h3>\n<pre code_snippet_id=\"1569192\" snippet_file_name=\"blog_20160129_1_6830939\" name=\"code\" class=\"html\">&lt;struts-config&gt;\n  &lt;global-forwards &gt;\n    &lt;forward name=&quot;goerror&quot; path=&quot;/WEB-INF/Error.jsp&quot; /&gt;\n  &lt;/global-forwards&gt;\n&lt;/struts-config&gt;</pre><br>\n<h3>局部跳转页面配置基本语法</h3>\n<pre code_snippet_id=\"1569192\" snippet_file_name=\"blog_20160129_2_7878498\" name=\"code\" class=\"html\">&lt;struts-config&gt;\n  &lt;action-mappings &gt;\n    &lt;action&gt;\n      &lt;!-- 局部跳转 --&gt;\n      &lt;forward name=&quot;logout&quot; path=&quot;/WEB-INF/login.jsp&quot; /&gt;\n      &lt;forward name=&quot;ok&quot; path=&quot;/WEB-INF/welcome.jsp&quot; /&gt;\n    &lt;/action&gt;\n  &lt;/action-mappings&gt;\n&lt;/struts-config&gt;</pre>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：全局跳转指得是所有的</span><span style=\"font-family:Times New Roman\">action</span><span style=\"font-family:宋体\">都可以跳转到该页面，局部跳转指得是只有本</span><span style=\"font-family:Times New Roman\">action</span><span style=\"font-family:宋体\">可以跳转到该页面。需要在</span><span style=\"font-family:Times New Roman\">struts-config.xml</span><span style=\"font-family:宋体\">中配置。</span></span></p>\n<br>\n<h2>动态表单</h2>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;动态表单<span style=\"font-family:Times New Roman\">(</span>dynimic&nbsp;form)<span style=\"font-family:宋体\">，</span>当表单个数和类型不确定的情况下，就可以使用动动态表单来解决。</p>\n<p><br>\n</p>\n<h3>动态表单和普通表单的区别</h3>\n<p>\n<p>1<span style=\"font-family:宋体\">、普通表单</span><span style=\"font-family:Times New Roman\">actionForm</span><span style=\"font-family:宋体\">是首先需要定义这样的一个类，然后配置到</span><span style=\"font-family:Times New Roman\">struts-config.xml</span><span style=\"font-family:宋体\">中。</span></p>\n<p>2<span style=\"font-family:宋体\">、动态表单完全依赖于反射机制创建，不需要定义表单类，直接在</span><span style=\"font-family:Times New Roman\">struts-config.xml</span><span style=\"font-family:宋体\">配置即可。</span></p>\n<p>&nbsp;</p>\n<h3>配置动态表单</h3>\n<pre code_snippet_id=\"1569192\" snippet_file_name=\"blog_20160129_3_8892253\" name=\"code\" class=\"html\">&lt;form action=&quot;/DynamicForm/action名.do?type=login&quot; method=&quot;post&quot;&gt;\n	用户名：&lt;input type=&quot;text&quot; name=&quot;username&quot; /&gt;&lt;br /&gt;\n	密&#160;&#160;&#160;码：&lt;input type=&quot;password&quot; name=&quot;password&quot; /&gt;&lt;br /&gt;\n	Email&#160;：&lt;input type=&quot;text&quot; name=&quot;email&quot; /&gt;&lt;br /&gt;\n	&lt;input type=&quot;submit&quot; value=&quot;注册用户&quot; /&gt;\n&lt;/form&gt;</pre><br>\n<pre code_snippet_id=\"1569192\" snippet_file_name=\"blog_20160129_4_2098620\" name=\"code\" class=\"html\">&lt;struts-config&gt;\n	&lt;form-beans&gt;\n		&lt;form-bean name=&quot;userForm&quot; type=&quot;org.apache.struts.action.DynaActionForm&quot;&gt;\n			&lt;!-- 动态表单的属性是配置出来的 --&gt;\n			&lt;form-property name=&quot;username&quot; type=&quot;java.lang.String&quot; /&gt;\n			&lt;form-property name=&quot;passowrd&quot; type=&quot;java.lang.String&quot; /&gt;\n			&lt;form-property name=&quot;email&quot; type=&quot;java.lang.String&quot; /&gt;\n		&lt;/form-bean&gt;\n	&lt;/form-beans&gt;\n&lt;/struts-config&gt;</pre>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：动态表单不需要写</span><span style=\"font-family:Times New Roman\">ActionForm</span><span style=\"font-family:宋体\">类，只需要在</span><span style=\"font-family:Times New Roman\">struts-config.xml</span><span style=\"font-family:宋体\">中配置成如上形式。动态表单比静态表单要方便很多，而且也将硬编码做成了配置形式，扩展性更强了，所以建议使用动态表单。</span></span></p>\n<br>\n<h2>文件的上传与下载</h2>\n<h3>文件上传</h3>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160129004739594\" width=\"900\" height=\"250\" alt=\"\"></div>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span><pre code_snippet_id=\"1569192\" snippet_file_name=\"blog_20160129_5_7256834\" name=\"code\" class=\"java\">/*\n * Generated by MyEclipse Struts\n * Template path: templates/java/JavaClass.vtl\n */\npackage com.pc.web.struts.action;\n\nimport java.io.FileNotFoundException;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\n\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport org.apache.struts.action.Action;\nimport org.apache.struts.action.ActionForm;\nimport org.apache.struts.action.ActionForward;\nimport org.apache.struts.action.ActionMapping;\nimport org.apache.struts.upload.FormFile;\n\nimport com.pc.domain.User;\nimport com.pc.service.UserService;\nimport com.pc.utils.MyTools;\nimport com.pc.web.struts.form.UserForm;\n\n/**\n * MyEclipse Struts Creation date: 01-27-2016\n * \n * XDoclet definition:\n * \n * @struts.action\n */\npublic class RegisterAction extends Action {\n	/*\n	 * Generated Methods\n	 */\n\n	/**\n	 * Method execute\n	 * \n	 * @param mapping\n	 * @param form\n	 * @param request\n	 * @param response\n	 * @return ActionForward\n	 */\n	public ActionForward execute(ActionMapping mapping, ActionForm form,\n			HttpServletRequest request, HttpServletResponse response) {\n		UserForm userForm = (UserForm) form;\n		// 取出用户名字\n		String name = userForm.getName();\n		FormFile formFile = userForm.getMyphoto();\n		// 通过formFile可以获取关于用户上传文件的各种信息\n		String filename = formFile.getFileName();\n		String newFileName = MyTools.getNewFileName(filename);\n		// 获取文件大小\n		int filesize = formFile.getFileSize();\n		// 上传文件不能大于10M\n		if(filesize &gt; 10 * 1024 * 1024) {\n			return mapping.findForward(&quot;error&quot;);\n		}\n		// 测试\n		// System.out.println(filename + &quot;　&quot; + filesize);\n		InputStream inputStream = null;\n		OutputStream outputStream = null;\n		try {\n			// 取出输入流\n			inputStream = formFile.getInputStream();\n			// 得到一个输出流-&gt;文件\n			// 1.得到file文件夹上传到tomcat服务器后的绝对路径\n			String keepFilePath = this.getServlet().getServletContext()\n					.getRealPath(&quot;/file&quot;);\n			// 测试\n			// System.out.println(keepFilePath);\n			// 创建输出流\n			outputStream = new FileOutputStream(keepFilePath + &quot;\\\\&quot;\n					+ newFileName);\n			// 测试\n			// System.out.println(keepFilePath + &quot;\\\\&quot; + filename);\n			// 读取文件并写出到服务器file路径下\n			int len = 0;\n			// buffer\n			byte[] bytes = new byte[1024];\n			// 循环处理\n			while ((len = inputStream.read(bytes)) &gt; 0) {\n				outputStream.write(bytes, 0, len);\n			}\n\n			// 如果用户上传文件成功，则把该用户信息保存到数据库中\n			UserService userService = new UserService();\n			User user = new User();\n			user.setUsername(userForm.getName());\n			user.setPreFileName(filename);\n			user.setNewFileName(newFileName);\n			// 测试\n			// System.out.println(user.getUsername() + &quot; &quot; + user.getPreFileName() + &quot; &quot; + user.getNewFileName());\n			if (userService.addUser(user)) {\n				return mapping.findForward(&quot;register&quot;);\n			}\n\n		} catch (FileNotFoundException e) {\n			e.printStackTrace();\n		} catch (IOException e) {\n			e.printStackTrace();\n		} finally {\n			try {\n				inputStream.close();\n				outputStream.close();\n			} catch (Exception e2) {\n				// TODO: handle exception\n				e2.printStackTrace();\n			}\n			inputStream = null;\n			outputStream = null;\n		}\n		return mapping.findForward(&quot;error&quot;);\n	}\n}</pre><br>\n</p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h4>细节问题</h4>\n<h5>1<span style=\"font-family:宋体\">、上传文件中文乱码问题</span></h5>\n<p>\n<p>思路：使用过滤器解决</p>\n<pre code_snippet_id=\"1569192\" snippet_file_name=\"blog_20160129_6_463201\" name=\"code\" class=\"java\">package com.pc.filter;\n\nimport java.io.IOException;\n\nimport javax.servlet.Filter;\nimport javax.servlet.FilterChain;\nimport javax.servlet.FilterConfig;\nimport javax.servlet.ServletException;\nimport javax.servlet.ServletRequest;\nimport javax.servlet.ServletResponse;\nimport javax.servlet.http.HttpServlet;\n/**\n * \n * @author Switch\n * @function 过滤中文乱码\n * @description\n *\n */\npublic class EncodingFilter extends HttpServlet implements Filter {\n\n	@Override\n	public void doFilter(ServletRequest request, ServletResponse response,\n			FilterChain chain) throws IOException, ServletException {\n		// TODO Auto-generated method stub\n		request.setCharacterEncoding(&quot;utf-8&quot;);\n		response.setCharacterEncoding(&quot;utf-8&quot;);\n		response.setContentType(&quot;charset=utf-8&quot;);\n		chain.doFilter(request, response);\n	}\n\n	@Override\n	public void init(FilterConfig filterConfig) throws ServletException {\n		// TODO Auto-generated method stub\n		\n	}\n}</pre><br>\n<h5>2<span style=\"font-family:宋体\">、上传同名文件覆盖问题</span></h5>\n<p>思路一：在文件名称里加入毫秒级时间信息。</p>\n<p>思路二：扫描该文件夹里的所有文件，如果有相同文件，就在文件名里加诸如“第几个”之类的前缀或者后缀。</p>\n<p>思路三：利用<span style=\"font-family:Times New Roman\">UUID</span><span style=\"font-family:宋体\">类生成伪随机数，然后拼接文件名。</span></p>\n<pre code_snippet_id=\"1569192\" snippet_file_name=\"blog_20160129_7_7573261\" name=\"code\" class=\"java\">package com.pc.utils;\nimport java.util.UUID;\n/**\n * \n * @author Switch\n * @function 工具类\n * @description 上传下载的各种工具方法\n * \n */\npublic class MyTools {\n	public static String getNewFileName(String fileName) {\n		// 获取伪随机数\n		String uuid = UUID.randomUUID().toString();\n		// 例：e08ac7c9-1adc-4bd6-8674-eabbb302d92e\n		// System.out.println(uuid);\n\n		// 上传文件名考虑扩展名问题\n		// String fileName = &quot;switch.jpg&quot;;\n\n		// // 截取字符串 String str = &quot;abcdef&quot;;\n		// String subStr = str.substring(2, 4);\n		// // 输出cd System.out.println(subStr);\n		//\n		// // 找到最后一个指定String的的位置\n		// int index = fileName.lastIndexOf(&quot;.&quot;);\n		// // 输出6\n		// System.out.println(index);\n\n		// 找到上传文件的扩展名\n		fileName = fileName.substring(fileName.indexOf(&quot;.&quot;), fileName.length());\n		// 输出.jpg\n		// System.out.println(fileName);\n\n		// 拼接\n		return uuid + fileName;\n		// 例：d1ebe185-fd40-48db-9d25-0e9f25f606af.jpg\n		// System.out.println(fileName);\n	}\n}</pre><br>\n<h5>如何控制文件上传类型<span style=\"font-family:Times New Roman\">?</span></h5>\n<p>可以从Tomcat<span style=\"font-family:宋体\">主目录</span>\\conf<span style=\"font-family:宋体\">目录下的&nbsp;</span><span style=\"font-family:Times New Roman\">web.xml</span><span style=\"font-family:宋体\">中可以查看文件的类型</span>\n</p>\n<p>&nbsp;</p>\n<h5>控制上传文件的大小</h5>\n<pre code_snippet_id=\"1569192\" snippet_file_name=\"blog_20160129_8_2731475\" name=\"code\" class=\"java\">// 获取文件大小\nint filesize = formFile.getFileSize();\n// 上传文件不能大于10M\nif(filesize &gt; 10 * 1024 * 1024) {\n	return mapping.findForward(&quot;error&quot;);\n}</pre><br>\n<h3>文件下载</h3>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160129005706298\" width=\"900\" height=\"200\" alt=\"\"></div>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：文件已经上传到服务器了，但是文件名为了保证不重复，却是一个随机的文件名。下载的时候肯定是需要改成上传时的文件名的，这就需要保存之前的文件名，随机的文件名，以及上传的用户名。这里使用</span><span style=\"font-family:Times New Roman\">MySQL</span><span style=\"font-family:宋体\">数据库进行保存。</span></span></p>\n<span style=\"font-family:宋体\"></span>\n<p>&nbsp;</p>\n<h4>SQL<span style=\"font-family:宋体\">语句</span></h4>\n<pre code_snippet_id=\"1569192\" snippet_file_name=\"blog_20160129_9_5937841\" name=\"code\" class=\"sql\">CREATE TABLE users -- 创建用户表\n(\n	username VARCHAR(50) PRIMARY KEY,	-- 用户名\n	preFileName VARCHAR(200) NOT NULL,-- 之前的名字\n	newFileName VARCHAR(200) NOT NULL	-- 之后的名字\n);</pre><br>\n<pre code_snippet_id=\"1569192\" snippet_file_name=\"blog_20160129_10_9667595\" name=\"code\" class=\"java\">/*\n * Generated by MyEclipse Struts\n * Template path: templates/java/JavaClass.vtl\n */\npackage com.pc.web.struts.action;\n\nimport java.io.FileInputStream;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.io.UnsupportedEncodingException;\nimport java.net.URLEncoder;\n\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport org.apache.struts.action.Action;\nimport org.apache.struts.action.ActionForm;\nimport org.apache.struts.action.ActionForward;\nimport org.apache.struts.action.ActionMapping;\n\nimport com.pc.domain.User;\nimport com.pc.service.UserService;\n\n/** \n * MyEclipse Struts\n * Creation date: 01-28-2016\n * \n * XDoclet definition:\n * @struts.action\n */\npublic class DownloadFileAction extends Action {\n	/*\n	 * Generated Methods\n	 */\n\n	/** \n	 * Method execute\n	 * @param mapping\n	 * @param form\n	 * @param request\n	 * @param response\n	 * @return ActionForward\n	 */\n	public ActionForward execute(ActionMapping mapping, ActionForm form,\n			HttpServletRequest request, HttpServletResponse response) {\n		\n		// 获取用户名\n		String username = request.getParameter(&quot;user&quot;);\n		// 创建UserService对象\n		UserService userService = new UserService();\n		\n		// 获取User对象\n		User user = userService.getUserByUsername(username);\n		\n		response.setContentType(&quot;text/html;charset=utf-8&quot;);\n		// 设置文件头，告诉浏览器下载文件\n		response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + user.getPreFileName());\n		\n		// 下载文件\n		// 1.获取要下载文件的绝对路径\n		String filePath = this.getServlet().getServletContext().getRealPath(&quot;/file&quot;);\n		\n		String filterFilename = null;\n		// 如果有中文名，要对其进行URL编码\n		try {\n			filterFilename = URLEncoder.encode(user.getPreFileName(), &quot;utf-8&quot;);\n		} catch (UnsupportedEncodingException e1) {\n			// TODO Auto-generated catch block\n			e1.printStackTrace();\n		}\n		\n		String fileAllPath = filePath + &quot;\\\\&quot; + filterFilename;\n		// 2.创建输入输出流\n		InputStream inputStream = null;\n		OutputStream outputStream = null;\n		// 3.创建Buffer\n		byte[] buffer = new byte[1024];\n		int len = 0;\n		try {\n			// 4.获取文件流\n			inputStream = new FileInputStream(fileAllPath);\n			outputStream = response.getOutputStream();\n			// 5.循环写出\n			while((len = inputStream.read(buffer)) &gt; 0) {\n				outputStream.write(buffer, 0, len);\n			}\n		} catch (Exception e) {\n			// TODO: handle exception\n			e.printStackTrace();\n		} finally {\n			try {\n				inputStream.close();\n				outputStream.close();\n			} catch (Exception e2) {\n				// TODO: handle exception\n				e2.printStackTrace();\n			}\n			// 垃圾回收机制回收\n			inputStream = null;\n			outputStream = null;\n		}\n		return mapping.findForward(&quot;goback&quot;);\n	}\n}</pre>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：中文存入</span><span style=\"font-family:Times New Roman\">MySQL</span><span style=\"font-family:宋体\">中一直显示是“？？？”，花了一两个小时，找了好多办法都没解决，以后有时间，遇到这个问题再想办法解决这个问题。</span></span></p>\n<br>\n<h4>细节问题</h4>\n<h5>文件下载中文问题 </h5>\n<pre code_snippet_id=\"1569192\" snippet_file_name=\"blog_20160129_11_7301044\" name=\"code\" class=\"java\">String filterFilename = null;\n// 如果有中文名，要对其进行URL编码\ntry {\n	    filterFilename = URLEncoder.encode(user.getPreFileName(), &quot;utf-8&quot;);\n	} catch (UnsupportedEncodingException e1) {\n	    // TODO Auto-generated catch block\n		e1.printStackTrace();\n	}	\nString fileAllPath = filePath + &quot;\\\\&quot; + filterFilename;</pre><br>\n<h3>文件上传下载案例</h3>\n<p>\n<p>源代码：<a target=\"_blank\" href=\"http://download.csdn.net/detail/q547550831/9421658\" target=\"_blank\"><span style=\"color:rgb(128,0,128)\">Struts<span style=\"font-family:宋体\">框架文件上传下载案例</span></span></a></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n   \n', '2016-04-16 01:21:09', '0');
INSERT INTO `article` VALUES ('10037', '10003', 'UML全家福', '\n\n<h1 style=\"text-align:center\">UML<span style=\"font-family:宋体\">全家福</span></h1>\n<div style=\"text-align:center\"><span style=\"font-family:宋体\"><img src=\"http://img.blog.csdn.net/20160117123153313\" alt=\"\"><br>\n</span></div>\n<div style=\"text-align:center\"><span style=\"font-family:宋体\"><br>\n</span></div>\n<div style=\"text-align:center\"><span style=\"font-family:宋体\"><br>\n</span></div>\n<div style=\"text-align:center\"><span style=\"font-family:宋体\"><br>\n</span></div>\n<div style=\"text-align:center\"><span style=\"font-family:宋体\"><br>\n</span></div>\n<div style=\"text-align:center\"><span style=\"font-family:宋体\"><img src=\"http://img.blog.csdn.net/20160117123206723\" alt=\"\"><br>\n</span></div>\n<div><br>\n</div>\n<div style=\"text-align:center\"><span style=\"font-family:宋体\"><br>\n</span></div>\n   \n', '2016-04-16 01:21:09', '0');
INSERT INTO `article` VALUES ('10038', '10003', '读《写给大家看的设计书》', '\n\n<h1 style=\"text-align:center\"><span style=\"font-size:18px\">读《写给大家看的设计书》</span></h1>\n<p><span style=\"font-size:18px\"></span></p>\n<p>&nbsp; &nbsp; 这段时间略读了一遍《写给大家看的设计书》第四版，作为一名开发者来说，这种设计细胞确实不怎么样。通过略读也有一些收获，而贯穿全文的“<span style=\"font-family:Calibri\">4</span><span style=\"font-family:宋体\">大基本原则”则是核心心思，应该不断的以这样的思维来思考怎样才能设计得更好。特附上“</span><span style=\"font-family:Calibri\">4</span><span style=\"font-family:宋体\">大基本原则”以备后用。</span></p>\n<p>&nbsp;</p>\n<h2>一&nbsp;<span style=\"font-family:Calibri\">4</span><span style=\"font-family:宋体\">大基本原则</span></h2>\n<h3>1&nbsp;<span style=\"font-family:宋体\">对比</span><span style=\"font-family:Calibri\">(Contrast)</span></h3>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;对比的基本思想是，要避免页面上的元素太过相&#20284;。如果元素<span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">字体、颜色、大小、线宽、形状、空间等</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">不相同，那就干脆让它们</span>截然不同。要让页面引人注目，对比通常是最重要的一个因素，正是它能使读者首先看这个页面。</p>\n<h3>2&nbsp;<span style=\"font-family:宋体\">重复</span><span style=\"font-family:Calibri\">(Repetition)</span></h3>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;让设计中的视觉要素在整个作品中重复出现。可以重复颜色、形状、材质、空间关系、线宽、字体、大小和图片，等等。这样一来，既能增加条理性，还可以加强统一性。</p>\n<h3>3&nbsp;<span style=\"font-family:宋体\">对齐</span><span style=\"font-family:Calibri\">(Alignment)</span></h3>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;任何东西都不能在页面上随意安放。每个元素都应当与页面上的另一个元素有某种视觉联系。这样能建立一种清晰、精巧而且清爽的外观。</p>\n<h3>4&nbsp;<span style=\"font-family:宋体\">亲密性</span><span style=\"font-family:Calibri\">(Proximity)</span></h3>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;彼此相关的项应当靠近，归组在一起。如果多个项相互之间存在很近的亲密性，它们就会成为一个视觉单元，而不是多个孤立的元素。这有助于组织信息，减少混乱，为读者提供清晰的结构。</p>\n<p>&nbsp;</p>\n<h2>二&nbsp;颜色运用&nbsp;</h2>\n<h3>1&nbsp;<span style=\"font-family:宋体\">色轮&nbsp;</span></h3>\n<p>　　三原色：黄、红、蓝，色轮的基础。&nbsp;</p>\n<p>　　三间色：色轮上相邻颜色等量混合，即黄加红<span style=\"font-family:Calibri\">==</span><span style=\"font-family:宋体\">橙，红加蓝</span><span style=\"font-family:Calibri\">==</span><span style=\"font-family:宋体\">紫，蓝加黄</span><span style=\"font-family:Calibri\">==</span><span style=\"font-family:宋体\">绿。&nbsp;</span></p>\n<p>　　第三色：色轮上空白两边颜色等量混合，即黄<span style=\"font-family:Calibri\">&#43;</span><span style=\"font-family:宋体\">橙</span><span style=\"font-family:Calibri\">==</span><span style=\"font-family:宋体\">橙黄，橙</span><span style=\"font-family:Calibri\">&#43;</span><span style=\"font-family:宋体\">红</span><span style=\"font-family:Calibri\">==</span><span style=\"font-family:宋体\">橙红，红</span><span style=\"font-family:Calibri\">&#43;</span><span style=\"font-family:宋体\">紫</span><span style=\"font-family:Calibri\">==</span><span style=\"font-family:宋体\">紫罗兰色，紫</span><span style=\"font-family:Calibri\">&#43;</span><span style=\"font-family:宋体\">蓝</span><span style=\"font-family:Calibri\">==</span><span style=\"font-family:宋体\">蓝紫色，蓝</span><span style=\"font-family:Calibri\">&#43;</span><span style=\"font-family:宋体\">绿</span><span style=\"font-family:Calibri\">==</span><span style=\"font-family:宋体\">蓝绿（水绿），绿</span><span style=\"font-family:Calibri\">&#43;</span><span style=\"font-family:宋体\">黄</span><span style=\"font-family:Calibri\">==</span><span style=\"font-family:宋体\">黄绿。&nbsp;</span></p>\n<h3>2&nbsp;<span style=\"font-family:宋体\">颜色关系&nbsp;</span></h3>\n<p>　　<span style=\"font-family:Calibri\">1</span><span style=\"font-family:宋体\">）互补：色轮上完全相对的颜色，最佳搭配是一种作为主色，另一种用于强调，如红绿搭配。&nbsp;</span></p>\n<p>　　<span style=\"font-family:Calibri\">2</span><span style=\"font-family:宋体\">）三色组：彼此等距的颜色，如三原色黄红蓝搭配（称为基色三色组），间色三色组绿橙紫搭配。&nbsp;</span></p>\n<p>　　<span style=\"font-family:Calibri\">3</span><span style=\"font-family:宋体\">）分裂互补三色组：从色轮一边选择一种颜色，另一边选择它对面的互补色两侧的颜色，如绿色、橙红色和紫罗兰色搭配。&nbsp;</span></p>\n<p>　　<span style=\"font-family:Calibri\">4</span><span style=\"font-family:宋体\">）类&#20284;色：色轮上彼此相邻的颜色组成，若用不同的亮色和暗色组合一组类&#20284;色，效果将相当醒目。&nbsp;</span></p>\n<h3>3&nbsp;<span style=\"font-family:宋体\">暗色和亮色&nbsp;</span></h3>\n<p>　　<span style=\"font-family:Calibri\">.&nbsp;</span><span style=\"font-family:宋体\">纯色就是色调；&nbsp;</span></p>\n<p>　　<span style=\"font-family:Calibri\">.&nbsp;</span><span style=\"font-family:宋体\">向色调增加黑色就构成一个暗色；&nbsp;</span></p>\n<p>　　<span style=\"font-family:Calibri\">.&nbsp;</span><span style=\"font-family:宋体\">向色调增加白色就构成一个亮色。&nbsp;</span></p>\n<p>　　<span style=\"font-family:Calibri\">1</span><span style=\"font-family:宋体\">）单色：由一种色调及其相应的多种亮色和暗色组成。&nbsp;</span></p>\n<p>　　<span style=\"font-family:Calibri\">2</span><span style=\"font-family:宋体\">）暗色和亮色的组合：即第二点中提到的颜色的暗色或亮色组合。&nbsp;</span></p>\n<h3>4&nbsp;<span style=\"font-family:宋体\">色质&nbsp;</span></h3>\n<p>　　指某种颜色的特定明暗度、深浅度或色调，应尽量避免它们挨在一起。&nbsp;</p>\n<h3>5&nbsp;<span style=\"font-family:宋体\">暖色与冷色&nbsp;</span></h3>\n<p>　　暖色其中包含黄色或红色，冷色其中包含蓝色，如果要组合暖色和冷色，一定要少用些暖色，因为暖色不费多大功夫就能产生效果，而冷色则需要更多才能产生效果或形成有效对比，不要让冷暖色太过均衡。&nbsp;</p>\n<h3>6&nbsp;<span style=\"font-family:宋体\">如何取舍&nbsp;</span></h3>\n<p>　　季节性？类&#20284;色；&nbsp;</p>\n<p>　　官方颜色？亮色和暗色、分裂互补色；&nbsp;</p>\n<p>　　包含一个照片或其它图像？选择其中一个颜色，类&#20284;色（沉着冷静），互补色（视觉活力）；&nbsp;</p>\n<p>　　定期反复？自建调色板，供所有项目一致地使用。&nbsp;</p>\n<h3>7&nbsp;CMYK&nbsp;<span style=\"font-family:宋体\">与&nbsp;</span><span style=\"font-family:Calibri\">RGB,&nbsp;</span><span style=\"font-family:宋体\">印刷与&nbsp;</span><span style=\"font-family:Calibri\">Web&nbsp;</span></h3>\n<p>　　<span style=\"font-family:Calibri\">1</span><span style=\"font-family:宋体\">）</span><span style=\"font-family:Calibri\">CMYK</span><span style=\"font-family:宋体\">：</span><span style=\"font-family:Calibri\">Cyan</span><span style=\"font-family:宋体\">（一种蓝色）、</span><span style=\"font-family:Calibri\">Magenta</span><span style=\"font-family:宋体\">（一种红</span><span style=\"font-family:Calibri\">/</span><span style=\"font-family:宋体\">粉红色）、</span><span style=\"font-family:Calibri\">Yellow</span><span style=\"font-family:宋体\">（黄色）和</span><span style=\"font-family:Calibri\">Key</span><span style=\"font-family:宋体\">（通常为黑色），为印刷色，常称为“四色处理”。&nbsp;</span></p>\n<p>　　<span style=\"font-family:Calibri\">2</span><span style=\"font-family:宋体\">）</span><span style=\"font-family:Calibri\">RGB</span><span style=\"font-family:宋体\">：</span><span style=\"font-family:Calibri\">Red</span><span style=\"font-family:宋体\">（红）、</span><span style=\"font-family:Calibri\">Green</span><span style=\"font-family:宋体\">（绿）、</span><span style=\"font-family:Calibri\">Blue</span><span style=\"font-family:宋体\">（蓝），显示器、电视机和</span><span style=\"font-family:Calibri\">iphone</span><span style=\"font-family:宋体\">等上看到的（非反射来的，是直接进入我们的&#30524;睛）。&nbsp;</span></p>\n<p>　　即，需要印刷的项目使用<span style=\"font-family:Calibri\">CMYK</span><span style=\"font-family:宋体\">，需在屏幕上看的内容用</span><span style=\"font-family:Calibri\">RGB</span><span style=\"font-family:宋体\">。若处理打印图像，</span><span style=\"font-family:Calibri\">Photoshop</span><span style=\"font-family:宋体\">中先用</span><span style=\"font-family:Calibri\">RGB</span><span style=\"font-family:宋体\">处理图像，最后才转换为</span><span style=\"font-family:Calibri\">CMYK</span><span style=\"font-family:宋体\">（打印出来后图像会有所损失）。&nbsp;</span></p>\n<p>&nbsp;</p>\n<h2>三&nbsp;更多提示与技巧&nbsp;</h2>\n<h3>1&nbsp;<span style=\"font-family:宋体\">创建包装&nbsp;</span></h3>\n<p>　　每件作品中必须有某个标识性图像或某种标识性风&#26684;。&nbsp;</p>\n<h3>2&nbsp;<span style=\"font-family:宋体\">企业名片&nbsp;</span></h3>\n<p>　　辅色用量一定要少。&nbsp;</p>\n<p>　　<span style=\"font-family:Calibri\">1</span><span style=\"font-family:宋体\">）企业名片规&#26684;：在美国，</span><span style=\"font-family:Calibri\">3.5</span><span style=\"font-family:宋体\">英寸宽，</span><span style=\"font-family:Calibri\">2</span><span style=\"font-family:宋体\">英寸高，若为垂直&#26684;式，则</span><span style=\"font-family:Calibri\">2</span><span style=\"font-family:宋体\">英寸宽，</span><span style=\"font-family:Calibri\">3.5</span><span style=\"font-family:宋体\">英寸高，很多其他国家标准是</span><span style=\"font-family:Calibri\">8.5cm*5.5cm</span><span style=\"font-family:宋体\">（中国的尺寸貌&#20284;较乱</span><span style=\"font-family:Calibri\">...</span><span style=\"font-family:宋体\">）。&nbsp;</span></p>\n<p>　　<span style=\"font-family:Calibri\">2</span><span style=\"font-family:宋体\">）角落留白；</span><span style=\"font-family:Calibri\">7</span><span style=\"font-family:宋体\">点非</span><span style=\"font-family:Calibri\">Times</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">Arial</span><span style=\"font-family:宋体\">或</span><span style=\"font-family:Calibri\">Helvetica</span><span style=\"font-family:宋体\">字体；一定要对齐，但尽量不使用居中对齐；别写</span><span style=\"font-family:Calibri\">e-mail</span><span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">web&nbsp;site</span><span style=\"font-family:宋体\">等字&#30524;，完整写出具体街道，避免添加不必要的点和逗号，保持简洁。&nbsp;</span></p>\n<p>　　<span style=\"font-family:Calibri\">3</span><span style=\"font-family:宋体\">）提示：</span><span style=\"font-family:Calibri\">a&nbsp;</span><span style=\"font-family:宋体\">选择垂直还是水平&#26684;式；</span><span style=\"font-family:Calibri\">b&nbsp;</span><span style=\"font-family:宋体\">字体大小一般</span><span style=\"font-family:Calibri\">9</span><span style=\"font-family:宋体\">点以下就够；</span><span style=\"font-family:Calibri\">c&nbsp;</span><span style=\"font-family:宋体\">创建名片、信笺和信封共有的一致图像。&nbsp;</span></p>\n<h3>3&nbsp;<span style=\"font-family:宋体\">信笺和信封&nbsp;</span></h3>\n<p>　　<span style=\"font-family:Calibri\">1</span><span style=\"font-family:宋体\">）信封、信笺和名片统一布局；若需居中，试着把整个居中布局向左边靠近；可以使用很大或很小的字体和图片。&nbsp;</span></p>\n<p>　　<span style=\"font-family:Calibri\">2</span><span style=\"font-family:宋体\">）提示：</span><span style=\"font-family:Calibri\">a&nbsp;</span><span style=\"font-family:宋体\">信封规&#26684;：标准为</span><span style=\"font-family:Calibri\">91/2*41/8</span><span style=\"font-family:宋体\">英寸，称为</span><span style=\"font-family:Calibri\">10</span><span style=\"font-family:宋体\">号信封。欧洲标准为</span><span style=\"font-family:Calibri\">110mm*220mm</span><span style=\"font-family:宋体\">，称为</span><span style=\"font-family:Calibri\">C4</span><span style=\"font-family:宋体\">信封；</span><span style=\"font-family:Calibri\">b&nbsp;</span><span style=\"font-family:宋体\">创建中心点；</span><span style=\"font-family:Calibri\">c&nbsp;</span><span style=\"font-family:宋体\">对齐，信笺上适当摆放元素；</span><span style=\"font-family:Calibri\">d&nbsp;</span><span style=\"font-family:宋体\">第二页可以取第一页上出现的一个小元素，但不放其他内容；</span><span style=\"font-family:Calibri\">c&nbsp;</span><span style=\"font-family:宋体\">传真和复印，不要深色或有很多小点的纸张，避免大面积深色墨迹、反色文本或太小的字体，可分别设计针对传真和复印两个版本信笺。&nbsp;</span></p>\n<h3>4&nbsp;<span style=\"font-family:宋体\">传单&nbsp;</span></h3>\n<p>　　可使用不同有趣字体，可使用各种图片，可以使用大图片大字体，也可只是中间一行<span style=\"font-family:Calibri\">10</span><span style=\"font-family:宋体\">点大小文字，底部一小块文本。&nbsp;</span></p>\n<p>　　<span style=\"font-family:Calibri\">1</span><span style=\"font-family:宋体\">）巨大标题、巨大剪贴画、有趣字体超大字号，各元素统一对齐，可以把正文字体设置得很小。增强对比。&nbsp;</span></p>\n<p>　　<span style=\"font-family:Calibri\">2</span><span style=\"font-family:宋体\">）提示：</span><span style=\"font-family:Calibri\">a&nbsp;</span><span style=\"font-family:宋体\">创建一个中心点；</span><span style=\"font-family:Calibri\">b&nbsp;</span><span style=\"font-family:宋体\">使用有对比的字标题；</span><span style=\"font-family:Calibri\">c&nbsp;</span><span style=\"font-family:宋体\">重复，适当重复标题字体；</span><span style=\"font-family:Calibri\">d&nbsp;</span><span style=\"font-family:宋体\">对齐。&nbsp;</span></p>\n<h3>5&nbsp;<span style=\"font-family:宋体\">新闻简报&nbsp;</span></h3>\n<p>　　多页出版物最重要的特性之一是一致性，或重复。每一页看上去应当是属于整个出版物的一部分。可以通过颜色、图片风&#26684;、字体、空间布局、重复某种&#26684;式的项目列表、照片周围的边框、图题等来实现这点。&nbsp;</p>\n<p>　　有条理地留白。&nbsp;</p>\n<p>　　标志（即刊头）将确定新闻简报其余部分基调。&nbsp;</p>\n<p>　　<span style=\"font-family:Calibri\">1</span><span style=\"font-family:宋体\">）让标题清楚而明显；适当地方使用对比字体，增加其他有意思的元素吸引读者；整个简报需有一种明确的、一致的底层结构。&nbsp;</span></p>\n<p>　　<span style=\"font-family:Calibri\">2</span><span style=\"font-family:宋体\">）提示：</span><span style=\"font-family:Calibri\">a&nbsp;</span><span style=\"font-family:宋体\">对齐，在所有元素都很好地做到了对齐，适当时可以打破这种常规（必须大胆地完全冲破这种对齐的约束）；</span><span style=\"font-family:Calibri\">b&nbsp;</span><span style=\"font-family:宋体\">段落缩进，第一段不要缩进，若要缩进，则缩进</span><span style=\"font-family:Calibri\">1em</span><span style=\"font-family:宋体\">。段落间要么缩进要么留有一定空间，但二者不能都有；</span><span style=\"font-family:Calibri\">c&nbsp;</span><span style=\"font-family:宋体\">不要使用</span><span style=\"font-family:Calibri\">Helvetica</span><span style=\"font-family:宋体\">，标题和字标题可使用一种同时包括粗黑版本和细版本的</span><span style=\"font-family:Calibri\">sans&nbsp;serif&nbsp;</span><span style=\"font-family:宋体\">字体系列，如</span><span style=\"font-family:Calibri\">Eurostile</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">Formata</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">Syntax</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">Frutiger</span><span style=\"font-family:宋体\">或</span><span style=\"font-family:Calibri\">Myriad</span><span style=\"font-family:宋体\">；</span><span style=\"font-family:Calibri\">d&nbsp;</span><span style=\"font-family:宋体\">正文应当可读，可采用一种经典的</span><span style=\"font-family:Calibri\">oldstyle&nbsp;serif</span><span style=\"font-family:宋体\">字体，如</span><span style=\"font-family:Calibri\">Garamond</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">Jenson</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">Caslon</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">Minion</span><span style=\"font-family:宋体\">或</span><span style=\"font-family:Calibri\">Palatino</span><span style=\"font-family:宋体\">。或者比较细的</span><span style=\"font-family:Calibri\">slab&nbsp;serif</span><span style=\"font-family:宋体\">字体，如</span><span style=\"font-family:Calibri\">Clarendon</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">Bookman</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">Kepler</span><span style=\"font-family:宋体\">或</span><span style=\"font-family:Calibri\">New&nbsp;Century&nbsp;School&nbsp;book</span><span style=\"font-family:宋体\">。若采用</span><span style=\"font-family:Calibri\">sans&nbsp;serif&nbsp;</span><span style=\"font-family:宋体\">字体，应预留较宽行间距和缩短行长度。&nbsp;</span></p>\n<h3>6&nbsp;<span style=\"font-family:宋体\">宣传册&nbsp;</span></h3>\n<p>　　<span style=\"font-family:Calibri\">3</span><span style=\"font-family:宋体\">折本标准：</span><span style=\"font-family:Calibri\">8.5*11</span><span style=\"font-family:宋体\">英寸（首页比背页宽）。&nbsp;</span></p>\n<p>　　<span style=\"font-family:Calibri\">1</span><span style=\"font-family:宋体\">）务必使用一种对齐方式，字体使用</span><span style=\"font-family:Calibri\">12</span><span style=\"font-family:宋体\">点以下字号，列之间留出更大空间，灵活使用图片，按顺序将内容呈现给你的读者。&nbsp;</span></p>\n<p>　　<span style=\"font-family:Calibri\">2</span><span style=\"font-family:宋体\">）提示：</span><span style=\"font-family:Calibri\">a&nbsp;</span><span style=\"font-family:宋体\">对比，要截然不同；</span><span style=\"font-family:Calibri\">b&nbsp;</span><span style=\"font-family:宋体\">重复，建立统一的外观；</span><span style=\"font-family:Calibri\">c&nbsp;</span><span style=\"font-family:宋体\">对齐；</span><span style=\"font-family:Calibri\">d&nbsp;</span><span style=\"font-family:宋体\">亲密性，有效地建立空间布局。&nbsp;</span></p>\n<h3>7&nbsp;<span style=\"font-family:宋体\">明信片&nbsp;</span></h3>\n<p>　　与众不同，成“系列”，明确具体，力求简练，尽可能使用颜色。&nbsp;</p>\n<p>　　<span style=\"font-family:Calibri\">1</span><span style=\"font-family:宋体\">）使用对比和空间关系清楚地表述信息，角落留白，层次组织。&nbsp;</span></p>\n<p>　　<span style=\"font-family:Calibri\">2</span><span style=\"font-family:宋体\">）提示：</span><span style=\"font-family:Calibri\">a&nbsp;</span><span style=\"font-family:宋体\">关键是什么？&nbsp;</span><span style=\"font-family:Calibri\">b&nbsp;</span><span style=\"font-family:宋体\">吸引人注意，要大胆；</span><span style=\"font-family:Calibri\">c&nbsp;</span><span style=\"font-family:宋体\">对比。&nbsp;</span></p>\n<h3>8&nbsp;<span style=\"font-family:宋体\">报纸广告&nbsp;</span></h3>\n<p>　　空白，机敏，清楚，简洁，尽可能使用颜色。&nbsp;</p>\n<p>　　<span style=\"font-family:Calibri\">1</span><span style=\"font-family:宋体\">）有意识地组织空白。&nbsp;</span></p>\n<p>　　<span style=\"font-family:Calibri\">2</span><span style=\"font-family:宋体\">）提示：</span><span style=\"font-family:Calibri\">a&nbsp;</span><span style=\"font-family:宋体\">对比，利用空白！</span><span style=\"font-family:Calibri\">b&nbsp;</span><span style=\"font-family:宋体\">字体选择，不要使用精巧的小</span><span style=\"font-family:Calibri\">serif</span><span style=\"font-family:宋体\">字体，也不要使用很细的线；</span><span style=\"font-family:Calibri\">c&nbsp;</span><span style=\"font-family:宋体\">尽量避免使用反色文字。&nbsp;</span></p>\n<h3>9&nbsp;<span style=\"font-family:宋体\">网站&nbsp;</span></h3>\n<p>　　重复最重要，一致的导航风&#26684;和图片风&#26684;，重复的颜色方案，同样的字体或按钮，风&#26684;类&#20284;的图片元素等等。&nbsp;</p>\n<p>　　<span style=\"font-family:Calibri\">1</span><span style=\"font-family:宋体\">）尽量不要让访问者移动滚动条。&nbsp;</span></p>\n<p>　　<span style=\"font-family:Calibri\">2</span><span style=\"font-family:宋体\">）提示：</span><span style=\"font-family:Calibri\">a&nbsp;</span><span style=\"font-family:宋体\">重复，统一性和连续性；</span><span style=\"font-family:Calibri\">b&nbsp;</span><span style=\"font-family:宋体\">可读性</span></p>\n<p>&nbsp;</p>\n   \n', '2016-04-16 01:21:09', '0');
INSERT INTO `article` VALUES ('10039', '10003', 'UML与需求分析进阶', '\n\n<h1 style=\"text-align:center\"><span style=\"font-size:18px\">UML<span style=\"font-family:宋体\">与需求分析进阶</span></span></h1>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>需求分析全过程</h2>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160117120851701\" alt=\"\"></div>\n<p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h3>第一阶段：战略分析</h3>\n<p>\n<p>1<span style=\"font-family:宋体\">、为什么会有这样一个项目？</span></p>\n<p>2<span style=\"font-family:宋体\">、客户为什么想做这个项目？</span></p>\n<p>3<span style=\"font-family:宋体\">、公司为什么会接这个项目？</span></p>\n<p>4<span style=\"font-family:宋体\">、公司在这个项目上的战略是怎样的？</span></p>\n<p>&nbsp;</p>\n<h3>第二阶段：需要分析</h3>\n<h4>1<span style=\"font-family:宋体\">、目标</span></h4>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;目标是系统的高层次需求，也是必须要把握的宏观方向。</p>\n<h4>2<span style=\"font-family:宋体\">、涉众及待解决问题</span></h4>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;1<span style=\"font-family:宋体\">、涉众分类</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1<span style=\"font-family:宋体\">、系统的用户</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2<span style=\"font-family:宋体\">、对该项目有商业决策权的人</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3<span style=\"font-family:宋体\">、对项目有影响的第三方</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4<span style=\"font-family:宋体\">、系统会影响到的第三方</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;2<span style=\"font-family:宋体\">、待解决的问题</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;列出每种涉众需要解决的问题</span></p>\n<h4>3<span style=\"font-family:宋体\">、范围</span></h4>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;1<span style=\"font-family:宋体\">、功能</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;2<span style=\"font-family:宋体\">、与其他系统的关系</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;3<span style=\"font-family:宋体\">、系统的地域使用范围</span></span></p>\n<h4>4<span style=\"font-family:宋体\">、项目成功标准</span></h4>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;1<span style=\"font-family:宋体\">、命中客户真正需要</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;2<span style=\"font-family:宋体\">、用简单的方式来满足客户真正的需要</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;3<span style=\"font-family:宋体\">、提升项目组成员的水平</span></span></p>\n<p>&nbsp;</p>\n<h3>第三阶段：业务分析</h3>\n<p>1<span style=\"font-family:宋体\">、业务概念图可用类图表示</span></p>\n<p>2<span style=\"font-family:宋体\">、业务流程图可用活动图、顺序图、状态机图表示</span></p>\n<p>&nbsp;</p>\n<h3>第四阶段：需求细化</h3>\n<p>1<span style=\"font-family:宋体\">、分析整理功能性需求，用用例图、用例表表示</span></p>\n<p>2<span style=\"font-family:宋体\">、分析整理出非功能性需求，可用部署图、构件图、包图表示技术架构要求</span></p>\n<p>3<span style=\"font-family:宋体\">、还需要描述如安全性、易用性、性能等方面的其他非功能性需求</span></p>\n<br>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>需求规&#26684;说明书</h2>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160117121005642\" alt=\"\"></div>\n<p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：系统特性是指能够满足系统目标，针对涉众的利益，能解决涉众关注的问题，在系统的范围内，提出来的一些大功能点。</span></span></p>\n<p><br>\n</p>\n   \n', '2016-04-16 01:21:10', '0');
INSERT INTO `article` VALUES ('10040', '10003', 'Struts标签入门', '\n\n<h1 style=\"text-align:center\"><span style=\"font-size:18px\">Struts<span style=\"font-family:宋体\">标签入门</span></span></h1>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>基本概述</h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;Struts&nbsp;<span style=\"font-family:宋体\">是&nbsp;</span><span style=\"font-family:Calibri\">Apache&nbsp;Jakarta&nbsp;</span><span style=\"font-family:宋体\">的一个著名的开源项目，目标是为构建基于&nbsp;</span><span style=\"font-family:Calibri\">Java&nbsp;</span><span style=\"font-family:宋体\">的&nbsp;</span><span style=\"font-family:Calibri\">web&nbsp;</span><span style=\"font-family:宋体\">应用程序提供一个框架。</span><span style=\"font-family:Calibri\">Struts&nbsp;</span><span style=\"font-family:宋体\">提供了非常多的标签，依据功能和使用习惯的不同被分到了</span>四个标签库中<span style=\"font-family:Calibri\">:</span></p>\n<p>n&nbsp;<span style=\"font-family:Calibri\">Bean&nbsp;Tags:</span><span style=\"font-family:宋体\">该标签库包含的标签可以用来创建&nbsp;</span><span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">、访问&nbsp;</span><span style=\"font-family:Calibri\">bean&nbsp;</span><span style=\"font-family:宋体\">和访问&nbsp;</span><span style=\"font-family:Calibri\">bean&nbsp;</span><span style=\"font-family:宋体\">的属性</span>。同时提供了依据&nbsp;<span style=\"font-family:Calibri\">cookies</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">headers&nbsp;</span><span style=\"font-family:宋体\">和&nbsp;</span><span style=\"font-family:Calibri\">parameters&nbsp;</span><span style=\"font-family:宋体\">的&#20540;创建相关&nbsp;</span><span style=\"font-family:Calibri\">bean&nbsp;</span><span style=\"font-family:宋体\">的能力。</span></p>\n<p>n&nbsp;<span style=\"font-family:Calibri\">HTML&nbsp;Tags:</span><span style=\"font-family:宋体\">该标签库包含的标签可以用来创建&nbsp;</span><span style=\"font-family:Calibri\">Struts&nbsp;</span><span style=\"font-family:宋体\">输入表单。</span></p>\n<p>n&nbsp;<span style=\"font-family:Calibri\">Logic&nbsp;Tags:</span><span style=\"font-family:宋体\">该标签库包含的标签可以用来进行逻辑判断、集合迭代和流程控制。</span></p>\n<p>n&nbsp;<span style=\"font-family:Calibri\">Nested&nbsp;Tags:</span><span style=\"font-family:宋体\">该标签库建立在前三个标签库的基础上，具有前三个标签库的所有功</span></p>\n<p>能，只是允许标签间的嵌套。</p>\n<p>&nbsp;</p>\n<h2>JavaEE<span style=\"font-family:宋体\">中的三种标签</span></h2>\n<p>1<span style=\"font-family:宋体\">、自定义标签</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">最早出现</span><span style=\"font-family:Calibri\">)</span></p>\n<p>2<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">JSTL</span></p>\n<p>3<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">Struts</span><span style=\"font-family:宋体\">标签</span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：</span><span style=\"font-family:Calibri\">Struts</span><span style=\"font-family:宋体\">很多功能和</span><span style=\"font-family:Calibri\">JSTL</span><span style=\"font-family:宋体\">差不多，可以混合使用</span><span style=\"font-family:Calibri\">Struts</span><span style=\"font-family:宋体\">标签和</span><span style=\"font-family:Calibri\">JSTL</span><span style=\"font-family:宋体\">标签。在使用</span><span style=\"font-family:Calibri\">MVC</span><span style=\"font-family:宋体\">基本结构时，一般使用</span><span style=\"font-family:Calibri\">JSTL</span><span style=\"font-family:宋体\">做页面，使用了</span><span style=\"font-family:Calibri\">Struts</span><span style=\"font-family:宋体\">框架之后，一般</span><span style=\"font-family:Calibri\">Struts</span><span style=\"font-family:宋体\">标签和</span><span style=\"font-family:Calibri\">JSTL</span><span style=\"font-family:宋体\">标签混合使用。因为这两种标签可以相互补充使用。</span></span></p>\n<p>&nbsp;</p>\n<h2>Struts<span style=\"font-family:宋体\">标签用法</span></h2>\n<p>1<span style=\"font-family:宋体\">、导入相应</span><span style=\"font-family:Calibri\">Struts</span><span style=\"font-family:宋体\">包，这个在</span><a target=\"_blank\" href=\"http://blog.csdn.net/q547550831/article/details/50562023\"><span style=\"color:rgb(128,0,128)\">Struts<span style=\"font-family:宋体\">入门</span></span></a>有相应下载链接。</p>\n<p>2<span style=\"font-family:宋体\">、在</span><span style=\"font-family:Calibri\">struts-taglib-x.jar</span><span style=\"font-family:宋体\">包下面的</span><span style=\"font-family:Calibri\">/META-INF/tld</span><span style=\"font-family:宋体\">中的</span><span style=\"font-family:Calibri\">struts-xxx.tld</span><span style=\"font-family:宋体\">文件中找到相应的</span><span style=\"font-family:Calibri\">uri</span><span style=\"font-family:宋体\">地址。</span></p>\n<p>3<span style=\"font-family:宋体\">、引入标签库</span><span style=\"font-family:Calibri\">&lt;%@&nbsp;taglib&nbsp;prefix=&quot;html&quot;&nbsp;uri=&quot;http://struts.apache.org/tags-html&quot;%&gt;</span></p>\n<p>4<span style=\"font-family:宋体\">、通过这样的形式使用：</span><span style=\"font-family:Calibri\">&lt;html:img&nbsp;src=&quot;&quot;&nbsp;/&gt;</span></p>\n<p>&nbsp;</p>\n<h2>Struts<span style=\"font-family:宋体\">常用标签使用案例</span></h2>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：</span><span style=\"font-family:Calibri\">User</span><span style=\"font-family:宋体\">类是测试标签对对象操作所使用的类。</span></span></p>\n<pre code_snippet_id=\"1565895\" snippet_file_name=\"blog_20160126_1_4496568\" name=\"code\" class=\"java\">package com.pc.domain;\n/**\n * \n * @author Switch\n * @function 用户类\n * @description User的一个实例是一个domain对象/同时也可以视为一个javabean\n */\npublic class User {\n	private String username;\n	public User() { \n		\n	}\n	public User(String username, String password) {\n		this.username = username;\n		this.password = password;\n	}\n	public String getUsername() {\n		return username;\n	}\n	public void setUsername(String username) {\n		this.username = username;\n	}\n	public String getPassword() {\n		return password;\n	}\n	public void setPassword(String password) {\n		this.password = password;\n	}\n	private String password;\n}</pre><br>\n<h3>html<span style=\"font-family:宋体\">标签库</span></h3>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;struts<span style=\"font-family:宋体\">的</span><span style=\"font-family:Calibri\">html</span><span style=\"font-family:宋体\">标签本质上还是普通的</span><span style=\"font-family:Calibri\">html</span><span style=\"font-family:宋体\">标签，</span><span style=\"font-family:Calibri\">Struts</span><span style=\"font-family:宋体\">设计者主要是为了和</span><span style=\"font-family:Calibri\">Struts</span><span style=\"font-family:宋体\">框架统一，对普通的</span><span style=\"font-family:Calibri\">html</span><span style=\"font-family:宋体\">标签做了封装。</span></p>\n<p>&nbsp;</p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：如果需要使用表单内元素必须对应的表单类，以及被</span><span style=\"font-family:Calibri\">form</span><span style=\"font-family:宋体\">标签包含。注意：表单类一定会对应一个</span><span style=\"font-family:Calibri\">action</span><span style=\"font-family:宋体\">，这需要在</span><span style=\"font-family:Calibri\">struts-config.xml</span><span style=\"font-family:宋体\">中配置</span></span></p>\n<pre code_snippet_id=\"1565895\" snippet_file_name=\"blog_20160126_2_4639055\" name=\"code\" class=\"java\">package com.pc.struts.form;\nimport org.apache.struts.action.ActionForm;\n/**\n * 表单对应的表单类\n * @struts.form name=&quot;userForm&quot;\n */\npublic class UserForm extends ActionForm {\n	private String username;\n	private String password;\n	private String fruit;\n	public String getFruit() {\n		return fruit;\n	}\n\n	public void setFruit(String fruit) {\n		this.fruit = fruit;\n	}\n\n	public String getUsername() {\n		return username;\n	}\n\n	public void setUsername(String username) {\n		this.username = username;\n	}\n\n	public String getPassword() {\n		return password;\n	}\n\n	public void setPassword(String password) {\n		this.password = password;\n	}\n}</pre><br>\n<pre code_snippet_id=\"1565895\" snippet_file_name=\"blog_20160126_3_877064\" name=\"code\" class=\"plain\">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;%-- 引入struts的html标签库 --%&gt;\n&lt;%@ taglib prefix=&quot;html&quot; uri=&quot;http://struts.apache.org/tags-html&quot;%&gt;\n&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; \n&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;My JSP &#39;html.jsp&#39; starting page&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n	&lt;%-- property:是HTML中button的name --%&gt;\n	&lt;html:button property=&quot;button1&quot; value=&quot;提交&quot;&gt;&lt;/html:button&gt;\n	&lt;%-- base:指超链接没有指定连接时，默认到ref属性的链接 --%&gt;\n	&lt;%-- &lt;html:base ref=&quot;http://www.baidu.com &quot;/&gt; --%&gt;\n	&lt;%-- 普通的image标签 --%&gt;\n	&lt;html:img src=&quot;&quot; /&gt;\n	&lt;%-- image按钮 --%&gt;\n	&lt;html:image src=&quot;&quot; /&gt; \n	&lt;%-- html:form \n		struts的html标签涉及到输入信息，struts框架就会有一定的要求\n			1、要求和一个表单类对应，而且应当放在一个&lt;html:form&gt;中\n			2、每一个property应该对应于form类中的一个属性\n	--%&gt;\n	&lt;html:form action=&quot;login.do&quot; method=&quot;post&quot;&gt;\n		&lt;html:text property=&quot;username&quot; /&gt;\n		&lt;html:password property=&quot;password&quot; /&gt;\n		&lt;html:checkbox property=&quot;fruit&quot; value=&quot;apple&quot;&gt;apple&lt;/html:checkbox&gt;\n		&lt;html:checkbox property=&quot;fruit&quot; value=&quot;orange&quot;&gt;orange&lt;/html:checkbox&gt;\n	&lt;/html:form&gt;\n&lt;/body&gt;\n&lt;/html&gt;</pre><br>\n<p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：</span></span><span style=\"color:rgb(255,0,0)\">img<span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">image</span><span style=\"font-family:宋体\">的区别在于</span><span style=\"font-family:Calibri\">img</span><span style=\"font-family:宋体\">对应于</span><span style=\"font-family:Calibri\">&lt;img&gt;</span><span style=\"font-family:宋体\">标签，</span><span style=\"font-family:Calibri\">image</span><span style=\"font-family:宋体\">对应于</span><span style=\"font-family:Calibri\">&lt;input&nbsp;type=</span><span style=\"font-family:宋体\">”</span><span style=\"font-family:Calibri\">image</span><span style=\"font-family:宋体\">”&nbsp;</span><span style=\"font-family:Calibri\">/&gt;</span><span style=\"font-family:宋体\">标签。</span></span></p>\n<span style=\"font-family:宋体\"></span><br>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h3>bean<span style=\"font-family:宋体\">标签库</span></h3>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;Bean&nbsp;Tags:<span style=\"font-family:宋体\">该标签库包含的标签可以用来创建&nbsp;</span><span style=\"font-family:Calibri\">bean</span><span style=\"font-family:宋体\">、访问&nbsp;</span><span style=\"font-family:Calibri\">bean&nbsp;</span><span style=\"font-family:宋体\">和访问&nbsp;</span><span style=\"font-family:Calibri\">bean&nbsp;</span><span style=\"font-family:宋体\">的属性。</span></p>\n<p><pre code_snippet_id=\"1565895\" snippet_file_name=\"blog_20160126_4_495380\" name=\"code\" class=\"plain\">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*,com.pc.domain.*&quot;\n	pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;%-- 引入struts的bean标签库 --%&gt;\n&lt;%@ taglib prefix=&quot;bean&quot; uri=&quot;http://struts.apache.org/tags-bean&quot;%&gt;\n&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; \n&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;My JSP &#39;struts_bean.jsp&#39; starting page&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n	&lt;p&gt;bean标签的使用&lt;/p&gt;\n	&lt;%\n		/* 不推荐这么使用 */\n		request.setAttribute(&quot;name&quot;, &quot;zs&quot;);\n\n		User user = new User(&quot;张三&quot;, &quot;123456&quot;);\n\n		request.setAttribute(&quot;user&quot;, user);\n	%&gt;\n	&lt;%-- bean:write用于输出信息 --%&gt;\n	&lt;p&gt;bean:write的使用&lt;/p&gt;\n	&lt;p&gt;变量的使用&lt;/p&gt;\n	&lt;bean:write name=&quot;name&quot; /&gt;\n	&lt;p&gt;对象属性值的使用&lt;/p&gt;\n	&lt;bean:write name=&quot;user&quot; property=&quot;username&quot; /&gt;\n	&lt;bean:write name=&quot;user&quot; property=&quot;password&quot; /&gt;\n\n	&lt;p&gt;bean:message的使用&lt;/p&gt;\n	&lt;%-- bean:message 标签用来从指定的 locale 中取回国际化的消息并输出,\n		在这个过程中可以传递五个以内的参数。 \n		通过该方法，可以更方便的输出信息，要在struts-config.xml中配置这样\n		&lt;message-resources parameter=&quot;com.pc.struts.ApplicationResources&quot; /&gt;的信息\n		--%&gt;\n	&lt;%-- key指定调用资源文件的哪个资源 --%&gt;\n	&lt;%-- arg[0-4]代表传入的参数 --%&gt;\n	&lt;bean:message key=&quot;key1&quot; arg0=&quot;zs&quot; /&gt;\n	&lt;br /&gt;\n	&lt;bean:message key=&quot;err1&quot; arg0=&quot;用户名为空&quot; arg1=&quot;密码错误&quot; /&gt;\n\n	&lt;p&gt;bean:define的使用&lt;/p&gt;\n	&lt;bean:define id=&quot;username&quot; value=&quot;zs&quot;&gt;&lt;/bean:define&gt;\n	&lt;%-- 定义一个JavaBean --%&gt;\n	&lt;p&gt;jsp:useBean的使用&lt;/p&gt;\n	&lt;jsp:useBean id=&quot;user2&quot; class=&quot;com.pc.domain.User&quot;&gt;&lt;/jsp:useBean&gt;\n	&lt;jsp:setProperty name=&quot;user2&quot; property=&quot;username&quot; value=&quot;zs&quot; /&gt;\n	&lt;jsp:setProperty name=&quot;user2&quot; property=&quot;password&quot; value=&quot;123456&quot; /&gt;\n	&lt;%--&lt;%\n		/* 等价于下面的语句  */\n		User user2 = new User();\n		user2.setUsername(&quot;zs&quot;);\n		user2.setPassword(&quot;123456&quot;);\n	 %--%&gt;\n	用户名：${user2.username } 密码：${user2.password }\n&lt;/body&gt;\n&lt;/html&gt;</pre><br>\n</p>\n<p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：</span><span style=\"font-family:Calibri\">message</span><span style=\"font-family:宋体\">所对应的资源文件：</span></span></p>\n<span style=\"font-family:宋体\"></span><pre code_snippet_id=\"1565895\" snippet_file_name=\"blog_20160126_5_113696\" name=\"code\" class=\"plain\">ApplicationResources.properties\n# Resources for parameter &#39;com.pc.struts.ApplicationResources&#39;\n# Project StrutsTag\n\nkey1 = welcome {0}\n# 在实际开发中，可以把错误号统一，在需要显示的时候，直接使用。\n\nerr1 =\\u4F60\\u7684\\u9519\\u8BEF\\u662F {0} and {1}</pre><br>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：</span><span style=\"font-family:Calibri\">JavaBean</span><span style=\"font-family:宋体\">的属性应该是它的</span><span style=\"font-family:Calibri\">setXxx</span><span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">getXxx</span><span style=\"font-family:宋体\">，</span><span style=\"font-family:Calibri\">struts</span><span style=\"font-family:宋体\">标签这类的标签和</span><span style=\"font-family:Calibri\">EL</span><span style=\"font-family:宋体\">语言这类的语言都是使用</span><span style=\"font-family:Calibri\">JavaBean</span><span style=\"font-family:宋体\">的属性其底层都是调用了相应的</span><span style=\"font-family:Calibri\">setXxx</span><span style=\"font-family:宋体\">或者是</span><span style=\"font-family:Calibri\">getXxx</span><span style=\"font-family:宋体\">方法。</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;</span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：在使用</span><span style=\"font-family:Calibri\">bean:message</span><span style=\"font-family:宋体\">时，如果属性文件有中文，须在</span><span style=\"font-family:Calibri\">MyEclipse</span><span style=\"font-family:宋体\">里面将文件编码设置为</span><span style=\"font-family:Calibri\">UTF-8</span><span style=\"font-family:宋体\">，然后再用</span><span style=\"font-family:Calibri\">jdk</span><span style=\"font-family:宋体\">的</span><span style=\"font-family:Calibri\">bin</span><span style=\"font-family:宋体\">目录下</span></span><span style=\"color:rgb(255,0,0)\">native2ascii</span><span style=\"color:rgb(255,0,0)\">工具转换成<span style=\"font-family:Calibri\">ascii</span><span style=\"font-family:宋体\">码。</span></span></p>\n<p>&nbsp;</p>\n<h3>logic<span style=\"font-family:宋体\">标签库</span></h3>\n<p>&nbsp; &nbsp; Logic&nbsp;Tags:<span style=\"font-family:宋体\">该标签库包含的标签可以用来进行逻辑判断、集合迭代和流程控制。</span></p>\n<pre code_snippet_id=\"1565895\" snippet_file_name=\"blog_20160126_6_3635707\" name=\"code\" class=\"plain\">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*,com.pc.domain.*&quot;\n	pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;%-- 引入struts的logic标签 --%&gt;\n&lt;%@ taglib prefix=&quot;logic&quot; uri=&quot;http://struts.apache.org/tags-logic&quot;%&gt;\n&lt;%-- 引入struts的bean标签 --%&gt;\n&lt;%@ taglib prefix=&quot;bean&quot; uri=&quot;http://struts.apache.org/tags-bean&quot;%&gt;\n&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; \n&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;My JSP &#39;struts_logic.jsp&#39; starting page&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n	&lt;p&gt;logic标签的使用&lt;/p&gt;\n	&lt;%\n		/* 不推荐这么使用 */\n		User user1 = new User(&quot;zs&quot;, &quot;123456&quot;);\n		User user2 = new User(&quot;ls&quot;, &quot;234567&quot;);\n		User user3 = new User(&quot;ww&quot;, &quot;345678&quot;);\n		List&lt;User&gt; users = new ArrayList&lt;User&gt;();\n		users.add(user1);\n		users.add(user2);\n		users.add(user3);\n		request.setAttribute(&quot;users&quot;, users);\n	%&gt;\n	&lt;p&gt;logic:iterate的使用&lt;/p&gt;\n	&lt;%-- 迭代器 --%&gt;\n	&lt;logic:iterate id=&quot;user&quot; name=&quot;users&quot;&gt;\n		bean输出\n		&lt;%-- \n		&lt;bean:write name=&quot;user&quot; property=&quot;username&quot; /&gt;\n		&lt;bean:write name=&quot;user&quot; property=&quot;password&quot; /&gt;\n		--%&gt;\n		&lt;%-- EL输出 --%&gt;\n		${user.username }\n		${user.password }\n		&lt;br /&gt;\n	&lt;/logic:iterate&gt;\n	&lt;p&gt;logic:empty的使用&lt;/p&gt;\n	&lt;%-- 判断是否为空 --%&gt;\n	&lt;logic:empty name=&quot;name&quot;&gt;\n		name属性不存在&lt;br /&gt;\n	&lt;/logic:empty&gt;\n	&lt;p&gt;logic:notempty的使用&lt;/p&gt;\n	&lt;%-- 判断是否不为空 --%&gt;\n	&lt;logic:notEmpty name=&quot;users&quot;&gt;\n		users属性存在\n	&lt;/logic:notEmpty&gt;\n	&lt;p&gt;logic:greaterThan的使用&lt;/p&gt;\n	&lt;%-- 判断是否大于 --%&gt;\n	&lt;logic:iterate id=&quot;user&quot; name=&quot;users&quot;&gt;\n		&lt;logic:greaterThan value=&quot;10000&quot; name=&quot;user&quot; property=&quot;password&quot;&gt;\n			&lt;bean:write name=&quot;user&quot; property=&quot;password&quot; /&gt;大于10000&lt;br /&gt;\n		&lt;/logic:greaterThan&gt;	\n	&lt;/logic:iterate&gt;\n&lt;/body&gt;\n&lt;/html&gt;</pre><br>\n   \n', '2016-04-16 01:21:10', '0');
INSERT INTO `article` VALUES ('10041', '10003', 'UML包图', '\n\n<h1 style=\"text-align:center\"><span style=\"font-size:18px\">UML<span style=\"font-family:宋体\">包图</span></span></h1>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>基本概述</h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;包图<span style=\"font-family:Calibri\">(Package&nbsp;Diagram)</span><span style=\"font-family:宋体\">是</span><span style=\"font-family:Calibri\">UML</span><span style=\"font-family:宋体\">中的组织图形，其能有效的组织好各种</span><span style=\"font-family:Calibri\">UML</span><span style=\"font-family:宋体\">图和表达思路，其功能是组织包内元素，控制访问。</span></p>\n<p>&nbsp;</p>\n<p>基本语法</p>\n<img src=\"http://img.blog.csdn.net/20160117105156506\" width=\"350\" height=\"220\" alt=\"\"><br>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p>解释：</p>\n<p>1<span style=\"font-family:宋体\">、包有包的名字和包之间的关系。</span></p>\n<p>2<span style=\"font-family:宋体\">、包之间的关系有三种：</span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;1<span style=\"font-family:宋体\">、包含关系：包可以嵌套包，而且嵌套层次不受限制。</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;2<span style=\"font-family:宋体\">、依赖关系：一个包依赖于另一个包提供的服务。</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;3<span style=\"font-family:宋体\">、实现关系：一个包实现另一个包的功能。</span></span></p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<h2>使用包图的两种思路</h2>\n<p>1<span style=\"font-family:宋体\">、将散乱的东西组织起来。</span></p>\n<p>2<span style=\"font-family:宋体\">、由粗到细的分解问题。</span></p>\n<p>&nbsp;</p>\n<h2>包图的常见应用场景</h2>\n<p>1<span style=\"font-family:宋体\">、组织类图</span></p>\n<p>2<span style=\"font-family:宋体\">、组织用例</span></p>\n<p>3<span style=\"font-family:宋体\">、进行软件设计</span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：包图肯定不止能组织类图和用例，其他的</span><span style=\"font-family:Calibri\">UML</span><span style=\"font-family:宋体\">图也是能够组织的。就个人喜好来说，很少会用到包图，除非是需求结构太复杂。</span></span></p>\n<p>&nbsp;</p>\n   \n', '2016-04-16 01:21:10', '0');
INSERT INTO `article` VALUES ('10042', '10003', 'JSTL入门', '\n\n<h1 style=\"text-align:center\"><span style=\"font-size:18px\">JSTL<span style=\"font-family:宋体\">入门</span></span></h1>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>基本概述</h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;JSTL<span style=\"font-family:宋体\">（</span><span style=\"font-family:Calibri\">JSP&nbsp;Standard&nbsp;Tag&nbsp;Library</span><span style=\"font-family:宋体\">，</span><span style=\"font-family:Calibri\">JSP</span><span style=\"font-family:宋体\">标准标签库</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">是一个不断完善的开放源代码的</span><span style=\"font-family:Calibri\">JSP</span><span style=\"font-family:宋体\">标签库，是由</span><span style=\"font-family:Calibri\">apache</span><span style=\"font-family:宋体\">的</span><span style=\"font-family:Calibri\">jakarta</span><span style=\"font-family:宋体\">小组来维护的。</span><span style=\"font-family:Calibri\">JSTL</span><span style=\"font-family:宋体\">只能运行在支持</span><span style=\"font-family:Calibri\">JSP1.2</span><span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">Servlet2.3</span><span style=\"font-family:宋体\">规范的容器上，如</span><span style=\"font-family:Calibri\">tomcat&nbsp;4.x</span><span style=\"font-family:宋体\">。在</span><span style=\"font-family:Calibri\">JSP&nbsp;2.0</span><span style=\"font-family:宋体\">中也是作为标准支持的。</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;JSTL&nbsp;1.0&nbsp;<span style=\"font-family:宋体\">发布于&nbsp;</span><span style=\"font-family:Calibri\">2002&nbsp;</span><span style=\"font-family:宋体\">年&nbsp;</span><span style=\"font-family:Calibri\">6&nbsp;</span><span style=\"font-family:宋体\">月，由四个定制标记库（</span><span style=\"font-family:Calibri\">core</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">format</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">xml&nbsp;</span><span style=\"font-family:宋体\">和&nbsp;</span><span style=\"font-family:Calibri\">sql</span><span style=\"font-family:宋体\">）和一对通用标记库验证器（</span><span style=\"font-family:Calibri\">ScriptFreeTLV&nbsp;</span><span style=\"font-family:宋体\">和&nbsp;</span><span style=\"font-family:Calibri\">PermittedTaglibsTLV</span><span style=\"font-family:宋体\">）组成。</span><span style=\"font-family:Calibri\">core&nbsp;</span><span style=\"font-family:宋体\">标记库提供了定制操作，通过限制了作用域的变量管理数据，以及执行页面内容的迭代和条件操作。它还提供了用来生成和操作&nbsp;</span><span style=\"font-family:Calibri\">URL&nbsp;</span><span style=\"font-family:宋体\">的标记。顾名思义，</span><span style=\"font-family:Calibri\">format&nbsp;</span><span style=\"font-family:宋体\">标记库定义了用来&#26684;式化数据（尤其是数字和日期）的操作。它还支持使用本地化资源束进行&nbsp;</span><span style=\"font-family:Calibri\">JSP&nbsp;</span><span style=\"font-family:宋体\">页面的国际化。</span><span style=\"font-family:Calibri\">xml&nbsp;</span><span style=\"font-family:宋体\">库包含一些标记，这些标记用来操作通过&nbsp;</span><span style=\"font-family:Calibri\">XML&nbsp;</span><span style=\"font-family:宋体\">表示的数据，而&nbsp;</span><span style=\"font-family:Calibri\">sql&nbsp;</span><span style=\"font-family:宋体\">库定义了用来查询关系数据库的操作。</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;如果要使用<span style=\"font-family:Calibri\">JSTL</span><span style=\"font-family:宋体\">，则必须将相应的</span><span style=\"font-family:Calibri\">JAR</span><span style=\"font-family:宋体\">包配置到</span><span style=\"font-family:Calibri\">classpath</span><span style=\"font-family:宋体\">路径中去，在</span><span style=\"font-family:Calibri\">MyEclipse</span><span style=\"font-family:宋体\">里面就是添加外部应用</span><span style=\"font-family:Calibri\">JAR</span><span style=\"font-family:宋体\">包。</span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：常用的只有</span><span style=\"font-family:Calibri\">core</span><span style=\"font-family:宋体\">里面的几个标签，比如</span><span style=\"font-family:Calibri\">forEach,if,choose-when-otherwise</span><span style=\"font-family:宋体\">等。个人觉得</span><span style=\"font-family:Calibri\">JSTL</span><span style=\"font-family:宋体\">应该是属于</span><span style=\"font-family:Calibri\">JSP</span><span style=\"font-family:宋体\">的内容，老韩将他放到</span><span style=\"font-family:Calibri\">Struts</span><span style=\"font-family:宋体\">来讲，我也就放在</span><span style=\"font-family:Calibri\">Struts</span><span style=\"font-family:宋体\">里了。</span></span></p>\n<p>参考文档：<a target=\"_blank\" href=\"http://download.csdn.net/detail/q547550831/9417718\"><span style=\"color:rgb(128,0,128)\">JSTL<span style=\"font-family:宋体\">使用手册</span></span></a></p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<h2>使用方法</h2>\n<p>1<span style=\"font-family:宋体\">、获取相应</span><span style=\"font-family:Calibri\">JAR</span><span style=\"font-family:宋体\">包，这里提供</span><span style=\"font-family:Calibri\">1.2</span><span style=\"font-family:宋体\">的</span><span style=\"font-family:Calibri\">JAR</span><span style=\"font-family:宋体\">包：</span><a target=\"_blank\" href=\"http://download.csdn.net/detail/q547550831/9417707\"><span style=\"color:rgb(128,0,128)\">JSTL1.2&nbsp;JAR<span style=\"font-family:宋体\">包</span></span></a></p>\n<p>2<span style=\"font-family:宋体\">、将</span><span style=\"font-family:Calibri\">JAR</span><span style=\"font-family:宋体\">包配置到</span><span style=\"font-family:Calibri\">classpath</span><span style=\"font-family:宋体\">中</span></p>\n<p>3<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">JSP</span><span style=\"font-family:宋体\">中引入需要的标签库。</span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;%@taglib&nbsp;prefix=&quot;c&quot;&nbsp;uri=&quot;http://java.sun.com/jsp/jstl/core&quot;&nbsp;%&gt;&nbsp;//&nbsp;<span style=\"font-family:宋体\">引入</span><span style=\"font-family:Calibri\">core</span><span style=\"font-family:宋体\">标签库</span></span></p>\n<p>uri<span style=\"font-family:宋体\">可以在</span><span style=\"font-family:Calibri\">JAR</span><span style=\"font-family:宋体\">包里面的</span><span style=\"font-family:Calibri\">META-INF</span><span style=\"font-family:宋体\">目录下相应的</span><span style=\"font-family:Calibri\">TLD(Tag&nbsp;Library&nbsp;Descriptor</span><span style=\"font-family:宋体\">标签库描述符</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">文件里找到。</span></p>\n<p>4<span style=\"font-family:宋体\">、通过&nbsp;</span><span style=\"font-family:Calibri\">&lt;c:out&nbsp;value=&quot;hello,world&quot;&gt;&lt;/c:out&gt;</span><span style=\"font-family:宋体\">这种形式使用。</span></p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<h2>使用实例</h2>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：</span><span style=\"font-family:Calibri\">User.java</span><span style=\"font-family:宋体\">这个文件在测试标签对对象的操作时需要，故先行列出。</span></span></p>\n<pre code_snippet_id=\"1565575\" snippet_file_name=\"blog_20160126_1_2255375\" name=\"code\" class=\"java\">package com.pc.domain;\n/**\n * \n * @author Switch\n * @function JSTL测试类\n * @description 用于JSTL标签对对象的操作测试\n *\n */\npublic class User {\n	private String username;\n	private String password;\n	public String getUsername() {\n		return username;\n	}\n	public void setUsername(String username) {\n		this.username = username;\n	}\n	public String getPassword() {\n		return password;\n	}\n	public void setPassword(String password) {\n		this.password = password;\n	}\n	public User(String username, String password) {\n		super();\n		this.username = username;\n		this.password = password;\n	}\n	public User(){\n	}\n}</pre><br>\n<h3>c:out<span style=\"font-family:宋体\">案例</span></h3>\n<pre code_snippet_id=\"1565575\" snippet_file_name=\"blog_20160126_2_30528\" name=\"code\" class=\"plain\">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*,com.pc.domain.*&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;%-- 引入JSTL标签库 --%&gt;\n&lt;%@taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;\n&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; \n&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;My JSP &#39;c_out.jsp&#39; starting page&lt;/title&gt;\n  &lt;/head&gt;\n  \n  &lt;body&gt;\n  	&lt;p&gt;c:out的使用&lt;/p&gt;\n  	&lt;%\n  		/* 不推荐在JSP中Java语句，为了方便故写在这 ，这些语句应该在控制器中 */\n  		/* 如果域对象中有相同属性名，\n  		c:out的优先级 ：pageContext &gt; request &gt; session &gt; application */\n  		request.setAttribute(&quot;name&quot;,&quot;zs&lt;a href=&#39;#&#39;&gt;链接&lt;/a&gt;&quot;);\n  		session.setAttribute(&quot;name&quot;,&quot;ls&lt;a href=&#39;#&#39;&gt;链接&lt;/a&gt;&quot;);\n  		application.setAttribute(&quot;name&quot;,&quot;ww&lt;a href=&#39;#&#39;&gt;链接&lt;/a&gt;&quot;);\n  		pageContext.setAttribute(&quot;name&quot;,&quot;zl&lt;a href=&#39;#&#39;&gt;链接&lt;/a&gt;&quot;);\n  		\n  		User user = new User();\n  		user.setUsername(&quot;zs&quot;);\n  		user.setPassword(&quot;123456&quot;);\n  		request.setAttribute(&quot;user&quot;, user);\n  		\n  	 %&gt;\n  	&lt;p&gt;输出&lt;/p&gt;\n    &lt;c:out value=&quot;hello,world&quot;&gt;&lt;/c:out&gt;\n    &lt;p&gt;输出request/session/application/pageContext域对象的数据&lt;/p&gt;\n    &lt;%-- 等价于request.getAttribute(&quot;name&quot;).toString() --%&gt;\n    &lt;%-- 输出zl 证明c:out的优先级 --%&gt;\n    &lt;%-- default在没有找到的情况下会调用显示 --%&gt;\n    &lt;%-- escapeXml默认为true,则html,xml将显示为文本，如果希望像超链接这种标记不以文本显示，则可以设置为false --%&gt;\n    &lt;c:out value=&quot;${name}&quot; default=&quot;null&quot; escapeXml=&quot;true&quot;&gt;&lt;/c:out&gt;\n    &lt;p&gt;输出对象&lt;/p&gt;\n    &lt;%-- 等价于((User)request.getAttribute(&quot;user&quot;)).getUsername() --%&gt;\n    &lt;c:out value=&quot;用户名：${user.username } 密码：${user.password }&quot;&gt;&lt;/c:out&gt;\n    \n  &lt;/body&gt;\n&lt;/html&gt;</pre><br>\n<h3>c:set<span style=\"font-family:宋体\">案例</span></h3>\n<pre code_snippet_id=\"1565575\" snippet_file_name=\"blog_20160126_3_8776791\" name=\"code\" class=\"plain\">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;%-- 引入jstl标签库 --%&gt;\n&lt;%@taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;\n&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; \n&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;My JSP &#39;c_set.jsp&#39; starting page&lt;/title&gt;\n  &lt;/head&gt;\n  \n  &lt;body&gt;\n  	&lt;p&gt;c:set的使用&lt;/p&gt;\n  	&lt;%-- 等价于request.setAttribute(&quot;name&quot;, &quot;zs&quot;);--%&gt;\n	&lt;c:set var=&quot;name&quot; value=&quot;zs&quot; scope=&quot;request&quot;&gt;&lt;/c:set&gt;\n	&lt;c:out value=&quot;${name }&quot;&gt;&lt;/c:out&gt;\n  &lt;/body&gt;\n&lt;/html&gt;</pre><br>\n<h3>c:remove<span style=\"font-family:宋体\">案例</span></h3>\n<pre code_snippet_id=\"1565575\" snippet_file_name=\"blog_20160126_4_346956\" name=\"code\" class=\"plain\">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;%@taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;\n&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; \n&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;My JSP &#39;c_remove.jsp&#39; starting page&lt;/title&gt;\n  &lt;/head&gt;\n  \n  &lt;body&gt;\n     &lt;p&gt;c:remove的使用&lt;/p&gt;\n  	 &lt;%\n  		/* 不推荐这么做 */\n  		request.setAttribute(&quot;name&quot;, &quot;zs&quot;);\n  	 %&gt;\n  	 &lt;p&gt;删除前&lt;/p&gt;\n  	 &lt;c:out value=&quot;${name }&quot; default=&quot;null&quot;&gt;&lt;/c:out&gt;\n  	 &lt;%-- var代表变量，scope代表范围 --%&gt;\n  	 &lt;%-- 等价于request.removeAttribute(&quot;name&quot;); --%&gt;\n  	 &lt;c:remove var=&quot;name&quot; scope=&quot;request&quot;/&gt;\n  	 &lt;p&gt;删除后&lt;/p&gt;\n  	 &lt;c:out value=&quot;${name }&quot; default=&quot;null&quot;&gt;&lt;/c:out&gt;\n  &lt;/body&gt;\n&lt;/html&gt;</pre><br>\n<h3>c:catch<span style=\"font-family:宋体\">案例</span></h3>\n<pre code_snippet_id=\"1565575\" snippet_file_name=\"blog_20160126_5_9616606\" name=\"code\" class=\"plain\">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;%@taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;\n&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; \n&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;My JSP &#39;c_catch.jsp&#39; starting page&lt;/title&gt;\n  &lt;/head&gt;\n  \n  &lt;body&gt;\n    &lt;p&gt;c:catch的使用&lt;/p&gt;\n    &lt;%-- 将catch标签里面的异常信息捕获，放到var中 --%&gt;\n    &lt;c:catch var=&quot;myexception&quot;&gt;\n    	&lt;%-- 不推荐这么使用1 1--%&gt;\n    	&lt;% int i = 8 / 0; %&gt;\n    &lt;/c:catch&gt;\n    &lt;c:out value=&quot;${myexception }&quot;&gt;&lt;/c:out&gt;\n  &lt;/body&gt;\n&lt;/html&gt;</pre><br>\n<h3>c:if<span style=\"font-family:宋体\">案例</span></h3>\n<pre code_snippet_id=\"1565575\" snippet_file_name=\"blog_20160126_6_8362870\" name=\"code\" class=\"plain\">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*,com.pc.domain.*&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;%@taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot;%&gt;\n&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; \n&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;My JSP &#39;c_if.jsp&#39; starting page&lt;/title&gt;\n  &lt;/head&gt;\n  \n  &lt;body&gt;\n    &lt;p&gt;c:if的使用&lt;/p&gt;\n    &lt;%\n    	/* 不推荐这么使用 */\n    	request.setAttribute(&quot;name&quot;, &quot;zs&quot;);\n    	request.setAttribute(&quot;age&quot;, &quot;20&quot;);\n    	\n    	// 放入一个User对象\n    	User user = new User();\n    	user.setUsername(&quot;zs&quot;);\n    	user.setPassword(&quot;123456&quot;);\n    	request.setAttribute(&quot;user&quot;, user);\n     %&gt;\n     &lt;p&gt;判断字符串&lt;/p&gt;\n     &lt;c:if test=&quot;${name == &#39;zs&#39; }&quot; &gt;\n     	&lt;c:out value=&quot;${name }&quot;&gt;&lt;/c:out&gt;\n     &lt;/c:if&gt;\n     &lt;c:if test=&quot;${name != &#39;zs&#39; }&quot;&gt;\n     	&lt;c:out value=&quot;error&quot;&gt;&lt;/c:out&gt;\n     &lt;/c:if&gt;\n     &lt;p&gt;判断数值&lt;/p&gt;\n     &lt;c:if test=&quot;${age == 20 }&quot;&gt;\n     	&lt;c:out value=&quot;${age }&quot;&gt;&lt;/c:out&gt;\n     &lt;/c:if&gt;\n     &lt;c:if test=&quot;${age &gt; 10 }&quot;&gt;\n     	&lt;c:out value=&quot;大于10&quot;&gt;&lt;/c:out&gt;\n     &lt;/c:if&gt;\n     &lt;c:if test=&quot;${age &gt; 10 and age &lt; 25 }&quot;&gt;\n     	&lt;c:out value=&quot;大于10小于25&quot;&gt;&lt;/c:out&gt;\n     &lt;/c:if&gt;\n     &lt;p&gt;判断对象属性&lt;/p&gt;\n     &lt;c:if test=&quot;${user.password == &#39;123456&#39; }&quot;&gt;\n     	&lt;c:out value=&quot;用户名：${user.username } &quot;&gt;&lt;/c:out&gt;\n     	&lt;c:out value=&quot;密码：${user.password }&quot;&gt;&lt;/c:out&gt;\n     &lt;/c:if&gt;\n     &lt;p&gt;判断是否为空&lt;/p&gt;\n     &lt;c:if test=&quot;${empty user }&quot;&gt;\n     	&lt;c:out value=&quot;无用户&quot;&gt;&lt;/c:out&gt;\n     &lt;/c:if&gt;\n     &lt;c:if test=&quot;${!empty user }&quot;&gt;\n     	&lt;c:out value=&quot;有用户&quot;&gt;&lt;/c:out&gt;\n     &lt;/c:if&gt;\n  &lt;/body&gt;\n&lt;/html&gt;</pre><br>\n<h3>c:choose<span style=\"font-family:宋体\">案例</span></h3>\n<pre code_snippet_id=\"1565575\" snippet_file_name=\"blog_20160126_7_7424779\" name=\"code\" class=\"plain\">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*,com.pc.domain.*&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;\n&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; \n&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;My JSP &#39;c_choose.jsp&#39; starting page&lt;/title&gt;\n  &lt;/head&gt;\n  \n  &lt;body&gt;\n	&lt;p&gt;c_choose的使用&lt;/p&gt;\n	&lt;%\n		/* 不推荐使用 */\n		User user = new User();\n		user.setUsername(&quot;zs&quot;);\n		user.setPassword(&quot;123456&quot;);\n		request.setAttribute(&quot;user&quot;, user);\n	 %&gt;\n	 &lt;%-- 与Switch-case语句很像 --%&gt;\n	&lt;c:choose&gt;\n		&lt;c:when test=&quot;${user.username != &#39;zs&#39; }&quot;&gt;\n			&lt;c:out value=&quot;用户不是zs&quot;&gt;&lt;/c:out&gt;\n		&lt;/c:when&gt;\n		&lt;c:when test=&quot;${user.password != &#39;123456&#39; }&quot;&gt;\n			&lt;c:out value=&quot;密码不是123456&quot;&gt;&lt;/c:out&gt;\n		&lt;/c:when&gt;\n		&lt;c:otherwise&gt;\n			&lt;c:out value=&quot;用户名：${user.username } &quot;&gt;&lt;/c:out&gt;\n     		&lt;c:out value=&quot;密码：${user.password }&quot;&gt;&lt;/c:out&gt;\n		&lt;/c:otherwise&gt;\n	&lt;/c:choose&gt;\n  &lt;/body&gt;\n&lt;/html&gt;</pre><br>\n<h3>c:forEach<span style=\"font-family:宋体\">案例</span></h3>\n<pre code_snippet_id=\"1565575\" snippet_file_name=\"blog_20160126_8_7566483\" name=\"code\" class=\"plain\">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*,com.pc.domain.*&quot;\n	pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot;%&gt;\n&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; \n&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;My JSP &#39;c_foreach.jsp&#39; starting page&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n	&lt;p&gt;迭代标签的使用&lt;/p&gt;\n	&lt;%\n		/* 不推荐这么使用 */\n		List&lt;User&gt; users = new ArrayList&lt;User&gt;();\n		User user1 = new User(&quot;zs&quot;, &quot;123456&quot;);\n		User user2 = new User(&quot;ls&quot;, &quot;234567&quot;);\n		User user3 = new User(&quot;ww&quot;, &quot;345678&quot;);\n		users.add(user1);\n		users.add(user2);\n		users.add(user3);\n		request.setAttribute(&quot;users&quot;, users);\n	%&gt;\n	&lt;p&gt;foreach用法&lt;/p&gt;\n	&lt;%-- users表示域对象的相应属性，一般是一个集合 --%&gt;\n	&lt;%-- user表示取出的一个具体对象 --%&gt;\n	&lt;c:forEach items=&quot;${users }&quot; var=&quot;user&quot;&gt;\n		&lt;c:out value=&quot;用户名：${user.username } 密码：${user.password }&quot; /&gt;\n		&lt;br /&gt;\n	&lt;/c:forEach&gt;\n\n	&lt;p&gt;for用法&lt;/p&gt;\n	&lt;p&gt;1 to 10&lt;/p&gt;\n	&lt;c:forEach var=&quot;i&quot; begin=&quot;1&quot; end=&quot;10&quot;&gt;\n		&lt;c:out value=&quot;${i }&quot; /&gt;\n	&lt;/c:forEach&gt;\n	&lt;p&gt;1 to 10 step:3&lt;/p&gt;\n	&lt;c:forEach var=&quot;i&quot; begin=&quot;1&quot; end=&quot;10&quot; step=&quot;3&quot;&gt;\n		&lt;c:out value=&quot;${i }&quot; /&gt;\n	&lt;/c:forEach&gt;\n\n	&lt;p&gt;对map的迭代&lt;/p&gt;\n	&lt;p&gt;基本类型的迭代&lt;/p&gt;\n	&lt;%\n		/* 不推荐这么使用 */\n		Map names = new HashMap();\n		names.put(&quot;name1&quot;, &quot;zs&quot;);\n		names.put(&quot;name2&quot;, &quot;ls&quot;);\n\n		request.setAttribute(&quot;names&quot;, names);\n	%&gt;\n	&lt;c:forEach items=&quot;${names }&quot; var=&quot;name&quot;&gt;\n		&lt;c:out value=&quot;key:${name.key } value:${name.value }&quot; /&gt;\n		&lt;br /&gt;\n	&lt;/c:forEach&gt;\n	&lt;p&gt;对象的迭代&lt;/p&gt;\n	&lt;%\n		/* 不推荐这么使用 */\n		Map usersMap = new HashMap();\n		usersMap.put(&quot;user1&quot;, user1);\n		usersMap.put(&quot;user2&quot;, user2);\n		usersMap.put(&quot;user3&quot;, user3);\n\n		request.setAttribute(&quot;usersMap&quot;, usersMap);\n	%&gt;\n	&lt;c:forEach items=&quot;${usersMap }&quot; var=&quot;userMap&quot;&gt;\n		&lt;c:out value=&quot;key:${userMap.key } value:${userMap.value } username:${userMap.value.username }&quot; /&gt;\n		&lt;br /&gt;\n	&lt;/c:forEach&gt;\n	\n	&lt;p&gt;对set的迭代&lt;/p&gt;\n	&lt;%\n		Set usersSet = new HashSet();\n		usersSet.add(user1);\n		usersSet.add(user2);\n		usersSet.add(user3);\n		\n		request.setAttribute(&quot;usersSet&quot;, usersSet);\n	 %&gt;\n	 \n	 &lt;c:forEach items=&quot;${usersSet }&quot; var=&quot;user&quot;&gt;\n	 	&lt;c:out value=&quot;username:${user.username } password:${user.password }&quot; /&gt;\n	 	&lt;br /&gt;\n	 &lt;/c:forEach&gt;\n&lt;/body&gt;\n&lt;/html&gt;</pre><br>\n<h3>c:forTokens<span style=\"font-family:宋体\">案例</span></h3>\n<pre code_snippet_id=\"1565575\" snippet_file_name=\"blog_20160126_9_772850\" name=\"code\" class=\"plain\">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;\n&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; \n&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;My JSP &#39;c_fortokens.jsp&#39; starting page&lt;/title&gt;\n  &lt;/head&gt;\n  \n  &lt;body&gt;\n	&lt;p&gt;fortokes&lt;/p&gt;\n	&lt;%-- c:forToken用于按模式拆分字符串 --%&gt;\n	&lt;c:forTokens items=&quot;123;456;789;012&quot; delims=&quot;;&quot; var=&quot;temp&quot;&gt;\n		${temp }\n	&lt;/c:forTokens&gt;\n	&lt;%\n		int i = 1;\n		request.setAttribute(&quot;i&quot;, i);\n	 %&gt;\n	 &lt;c:out value=&quot;${i }&quot;&gt;&lt;/c:out&gt;\n  &lt;/body&gt;\n&lt;/html&gt;</pre><br>\n<h3>c:redirect<span style=\"font-family:宋体\">案例</span></h3>\n<pre code_snippet_id=\"1565575\" snippet_file_name=\"blog_20160126_10_7882910\" name=\"code\" class=\"plain\">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot;%&gt;\n&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; \n&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;My JSP &#39;c_redirect.jsp&#39; starting page&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n	&lt;p&gt;重定向的使用&lt;/p&gt;\n	&lt;c:redirect url=&quot;http://www.baidu.com&quot; /&gt;\n&lt;/body&gt;\n&lt;/html&gt;</pre><br>\n<h3>c:import<span style=\"font-family:宋体\">案例</span></h3>\n<p><strong>c_import_page.jsp</strong></p>\n<pre code_snippet_id=\"1565575\" snippet_file_name=\"blog_20160126_11_8581021\" name=\"code\" class=\"plain\">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; \n&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;My JSP &#39;c_import_page.jsp&#39; starting page&lt;/title&gt;\n  &lt;/head&gt;\n  \n  &lt;body&gt;\n  &lt;%-- 通过${param.参数名}可以得到c:import传过来的c:param中的参数 --%&gt;\n    姓名是：${param.name }\n  &lt;/body&gt;\n&lt;/html&gt;</pre><br>\n<pre code_snippet_id=\"1565575\" snippet_file_name=\"blog_20160126_12_2867184\" name=\"code\" class=\"plain\">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;\n&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; \n&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;My JSP &#39;c_import.jsp&#39; starting page&lt;/title&gt;\n  &lt;/head&gt;\n  \n  &lt;body&gt;\n	&lt;c:import url=&quot;c_import_page.jsp&quot;&gt;\n		&lt;%-- 通过c:param可以将参数传入到所引用的文件中去 --%&gt;\n		&lt;c:param name=&quot;name&quot; value=&quot;zs&quot;&gt;&lt;/c:param&gt;\n	&lt;/c:import&gt;\n  &lt;/body&gt;\n&lt;/html&gt;</pre><br>\n<h2>小结</h2>\n<p>1<span style=\"font-family:宋体\">、在需要取一个域对象中的&#20540;的时候需要用</span><span style=\"font-family:Calibri\">${</span><span style=\"font-family:宋体\">属性名</span><span style=\"font-family:Calibri\">}</span><span style=\"font-family:宋体\">，对字面型的&#20540;就不需要用</span><span style=\"font-family:Calibri\">$</span><span style=\"font-family:宋体\">。</span></p>\n<p>例如：</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;控制器中：<span style=\"font-family:Calibri\">request.setAttribute(</span>“name”,&nbsp;”zs”);</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&lt;c:out&nbsp;value=”${name&nbsp;}”/&gt;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;<span style=\"font-family:宋体\">域对象属性</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&lt;c:out&nbsp;value=”age”/&gt;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;<span style=\"font-family:宋体\">字面&#20540;</span></p>\n<p>2<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">JSP</span><span style=\"font-family:宋体\">之间获取数据可以用</span><span style=\"font-family:Calibri\">EL</span><span style=\"font-family:宋体\">，&#26684;式：</span><span style=\"font-family:Calibri\">${param.</span><span style=\"font-family:宋体\">参数名</span><span style=\"font-family:Calibri\">}</span></p>\n<p>例如：</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;JSP1<span style=\"font-family:宋体\">中：</span><span style=\"font-family:Calibri\">&lt;a&nbsp;href=</span>”jsp2.jsp?name=zs”&gt;<span style=\"font-family:宋体\">姓名</span><span style=\"font-family:Calibri\">&lt;/a&gt;</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;JSP2<span style=\"font-family:宋体\">中：</span><span style=\"font-family:Calibri\">${param.name}</span> //&nbsp;<span style=\"font-family:宋体\">取出&#20540;为</span><span style=\"font-family:Calibri\">zs</span></p>\n<p>同时，<span style=\"font-family:Calibri\">c:import</span><span style=\"font-family:宋体\">中的</span><span style=\"font-family:Calibri\">c:param</span><span style=\"font-family:宋体\">标签也是通过该中方法获取&#20540;的。&nbsp;</span></p>\n<p>3<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">TLD</span><span style=\"font-family:宋体\">文件叫做标签描述符</span><span style=\"font-family:Calibri\">(Tag&nbsp;Library&nbsp;Descriptor)</span></p>\n<p><br>\n</p>\n   \n', '2016-04-16 01:21:10', '1');
INSERT INTO `article` VALUES ('10043', '10003', 'UML部署图和构件图', '\n\n<h1 style=\"text-align:center\"><span style=\"font-size:18px\">UML<span style=\"font-family:宋体\">部署图和构件图</span></span></h1>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>基本概述</h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;部署图和构件图是获取和描述非功能需求的重要工具。</p>\n<p>&nbsp;</p>\n<h2>网络拓扑图</h2>\n<img src=\"http://img.blog.csdn.net/20160117103239038\" alt=\"\"><br>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>部署图</h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;部署图和网络拓扑图相&#20284;，都是在物理层次上做整体的系统规划，但是部署图功能更强大，可以继续细化设计。</p>\n<img src=\"http://img.blog.csdn.net/20160117103409942\" alt=\"\"><br>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h3>基本语法</h3>\n<img src=\"http://img.blog.csdn.net/20160117103433761\" width=\"300\" height=\"463\" alt=\"\"><br>\n<p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p>解释：</p>\n<p>1<span style=\"font-family:宋体\">、实际环境中的一台电脑、服务器等硬件设备，在部署图中用节点来表示，节点是一个立体矩形，这也是</span><span style=\"font-family:Calibri\">UML</span><span style=\"font-family:宋体\">中唯一一个立体图形。</span></p>\n<p>2<span style=\"font-family:宋体\">、节点和节点之间如果有物理连接，则可以用通信路径连接，在路径上写上连接方式，常用的方式有</span><span style=\"font-family:Calibri\">Internet</span><span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">LAN</span><span style=\"font-family:宋体\">。</span></p>\n<p>3<span style=\"font-family:宋体\">、标记是用来详细说明节点的配置情况的。</span></p>\n<p>4<span style=\"font-family:宋体\">、制品是可独立运行的软件。</span></p>\n<p>&nbsp;</p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：部署图可以描述客户当前的</span><span style=\"font-family:Calibri\">IT</span><span style=\"font-family:宋体\">环境架构，可以用来设计客户改造后的</span><span style=\"font-family:Calibri\">IT</span><span style=\"font-family:宋体\">环境架构。</span></span></p>\n<p>&nbsp;</p>\n<h2>构件图</h2>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;构件图也叫作组件图，构件图用于描述系统中某一模块。</p>\n<h3>基本语法</h3>\n<img src=\"http://img.blog.csdn.net/20160117103514894\" alt=\"\"><br>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p>解释：</p>\n<p>1<span style=\"font-family:宋体\">、构件图用于描述系统中某一功能模块。</span></p>\n<p>2<span style=\"font-family:宋体\">、构件图之间可以提供服务和获得服务。</span></p>\n<p>3<span style=\"font-family:宋体\">、构件图常见的类型有五种：</span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;1<span style=\"font-family:宋体\">、可执行的：表示像</span><span style=\"font-family:Calibri\">exe</span><span style=\"font-family:宋体\">这类可执行文件及模块。</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;2<span style=\"font-family:宋体\">、文档：像</span><span style=\"font-family:Calibri\">java</span><span style=\"font-family:宋体\">这类文件。</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;3<span style=\"font-family:宋体\">、表：像关系数据库中的表形式。</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;4<span style=\"font-family:宋体\">、文件：普通的文件。</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;5<span style=\"font-family:宋体\">、库：像</span><span style=\"font-family:Calibri\">C</span><span style=\"font-family:宋体\">语言中的函数库，</span><span style=\"font-family:Calibri\">Java</span><span style=\"font-family:宋体\">里面的</span><span style=\"font-family:Calibri\">API</span><span style=\"font-family:宋体\">接口库。</span></span></p>\n<p>&nbsp;</p>\n<p>\n<h3>构件的特点</h3>\n1<span style=\"font-family:宋体\">、能实现一定功能，或提供一些服务。</span>\n<p>\n<p>2<span style=\"font-family:宋体\">、不能单独运行，要作为系统的一部分来发挥作用。</span></p>\n<p>3<span style=\"font-family:宋体\">、是物理上的概念，不是逻辑上的概念。</span></p>\n<p>4<span style=\"font-family:宋体\">、可单独维护、可独立升级、可替换而不影响整个系统。</span></p>\n<p>&nbsp;</p>\n<h2>综合案例<span style=\"font-family:Calibri\">1</span><span style=\"font-family:宋体\">：</span></h2>\n<img src=\"http://img.blog.csdn.net/20160117103548956\" alt=\"\"><br>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<h2><span style=\"font-family:宋体; font-size:18px\">综合案例2：</span></h2>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><img src=\"http://img.blog.csdn.net/20160117103623040\" alt=\"\"><br>\n</span></span></p>\n<p><br>\n</p>\n   \n', '2016-04-16 01:21:11', '0');
INSERT INTO `article` VALUES ('10044', '10003', 'Struts入门', '\n\n<h1 style=\"text-align:center\"><span style=\"font-size:18px\">Struts<span style=\"font-family:宋体\">入门</span></span></h1>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>基本概述</h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;Struts<span style=\"font-family:宋体\">是</span><span style=\"font-family:Calibri\">Apache</span><span style=\"font-family:宋体\">软件基金会（</span><span style=\"font-family:Calibri\">ASF</span><span style=\"font-family:宋体\">）赞助的一个开源项目。它最初是</span><span style=\"font-family:Calibri\">Jakarta</span><span style=\"font-family:宋体\">项目中的一个子项目，并在</span><span style=\"font-family:Calibri\">2004</span><span style=\"font-family:宋体\">年</span><span style=\"font-family:Calibri\">3</span><span style=\"font-family:宋体\">月成为</span><span style=\"font-family:Calibri\">ASF</span><span style=\"font-family:宋体\">的顶级项目。它通过采用</span><span style=\"font-family:Calibri\">Java&nbsp;Servlet</span><span style=\"font-family:宋体\">／</span><span style=\"font-family:Calibri\">JSP</span><span style=\"font-family:宋体\">技术，实现了基于</span><span style=\"font-family:Calibri\">Java&nbsp;EE&nbsp;Web</span><span style=\"font-family:宋体\">应用的</span><span style=\"font-family:Calibri\">Model-View-Controller</span><span style=\"font-family:宋体\">（</span><span style=\"font-family:Calibri\">MVC</span><span style=\"font-family:宋体\">）设计模式的应用框架，是</span><span style=\"font-family:Calibri\">MVC</span><span style=\"font-family:宋体\">经典设计模式中的一个经典产品。</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;在<span style=\"font-family:Calibri\">Struts</span><span style=\"font-family:宋体\">中，已经由一个名为</span><span style=\"font-family:Calibri\">ActionServlet</span><span style=\"font-family:宋体\">的</span><span style=\"font-family:Calibri\">Servlet</span><span style=\"font-family:宋体\">充当&nbsp;控制器（</span><span style=\"font-family:Calibri\">Controller</span><span style=\"font-family:宋体\">）的角色，根据描述模型、视图、控制器对应关系的</span><span style=\"font-family:Calibri\">struts-config.xml</span><span style=\"font-family:宋体\">的配置文件，转发视图（</span><span style=\"font-family:Calibri\">View</span><span style=\"font-family:宋体\">）的请求，组装响应数据模型（</span><span style=\"font-family:Calibri\">Model</span><span style=\"font-family:宋体\">）。在</span><span style=\"font-family:Calibri\">MVC</span><span style=\"font-family:宋体\">的&nbsp;模型（</span><span style=\"font-family:Calibri\">Model</span><span style=\"font-family:宋体\">）部分，经常划分为两个主要子系统（系统的内部数据状态与改变数据状态的逻辑动作），这两个概念子系统分别具体对应</span><span style=\"font-family:Calibri\">Struts</span><span style=\"font-family:宋体\">里的</span><span style=\"font-family:Calibri\">ActionForm</span><span style=\"font-family:宋体\">与</span><span style=\"font-family:Calibri\">Action</span><span style=\"font-family:宋体\">两个需要继承实现超类。在这里，</span><span style=\"font-family:Calibri\">Struts</span><span style=\"font-family:宋体\">可以与各种标准的数据访问技术结合在一起，包括</span><span style=\"font-family:Calibri\">Enterprise&nbsp;Java&nbsp;Beans</span><span style=\"font-family:宋体\">（</span><span style=\"font-family:Calibri\">EJB</span><span style=\"font-family:宋体\">）</span><span style=\"font-family:Calibri\">,&nbsp;JDBC</span><span style=\"font-family:宋体\">与</span><span style=\"font-family:Calibri\">JNDI</span><span style=\"font-family:宋体\">。在</span><span style=\"font-family:Calibri\">Struts</span><span style=\"font-family:宋体\">的视图（</span><span style=\"font-family:Calibri\">View</span><span style=\"font-family:宋体\">）端，除了使用标准的</span><span style=\"font-family:Calibri\">JavaServer&nbsp;Pages</span><span style=\"font-family:宋体\">（</span><span style=\"font-family:Calibri\">JSP</span><span style=\"font-family:宋体\">）以外，还提供了大量的标签库使用，同时也可以与其他表现层组件技术（产品）进行整合，比如</span><span style=\"font-family:Calibri\">Velocity&nbsp;Templates</span><span style=\"font-family:宋体\">，</span><span style=\"font-family:Calibri\">XSLT</span><span style=\"font-family:宋体\">等。通过应用</span><span style=\"font-family:Calibri\">Struts</span><span style=\"font-family:宋体\">的框架，最终用户可以把大部分的关注点放在自己的业务逻辑（</span><span style=\"font-family:Calibri\">Action</span><span style=\"font-family:宋体\">）与&nbsp;映射关系的配置文件（</span><span style=\"font-family:Calibri\">struts-config.xml</span><span style=\"font-family:宋体\">）中。</span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：这是</span><span style=\"font-family:Calibri\">Struts1.x</span><span style=\"font-family:宋体\">的介绍，个人认为先学好</span><span style=\"font-family:Calibri\">Struts1.x</span><span style=\"font-family:宋体\">，再学</span><span style=\"font-family:Calibri\">2.x</span><span style=\"font-family:宋体\">，也并没有什么大问题。</span></span></p>\n<p>开发资料：<span style=\"color:rgb(128,0,128)\"><a target=\"_blank\" target=\"_blank\" href=\"http://download.csdn.net/detail/q547550831/9414362\">Struts1.3<span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">config</span><span style=\"font-family:宋体\">配置详解</span></a></span></p>\n<p>&nbsp;</p>\n<h2>为什么会有<span style=\"font-family:Calibri\">Struts</span><span style=\"font-family:宋体\">？</span></h2>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;Struts<span style=\"font-family:宋体\">作为一种规范，在一定程度上约束程序员的自由，但是正是因为其规范作用，使其在各公司、各行业中成为标准，这样就减少了公司间合作时、程序员交流时的冲突，使开发效率大幅度提高，有利于程序的维护和扩展。</span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：</span><span style=\"font-family:Calibri\">Struts1.x</span><span style=\"font-family:宋体\">的缺陷也是很明显的，比如</span><span style=\"font-family:Calibri\">action</span><span style=\"font-family:宋体\">的单态，这在并发情况下就不是很好，</span><span style=\"font-family:Calibri\">Servlet</span><span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">JSP</span><span style=\"font-family:宋体\">耦合很强。不过通过</span><span style=\"font-family:Calibri\">Struts2.x</span><span style=\"font-family:宋体\">可以解决其中的一些问题。</span></span></p>\n<p>&nbsp;</p>\n<h2>运行原理图</h2>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160122150142176\" alt=\"\"></div>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>使用<span style=\"font-family:Calibri\">Struts</span><span style=\"font-family:宋体\">框架开发的三种方式</span></h2>\n<h3>1<span style=\"font-family:宋体\">、手工开发</span></h3>\n<p>\n<p>1.1<span style=\"font-family:宋体\">、在</span><span style=\"font-family:Calibri\">IDE</span><span style=\"font-family:宋体\">中（我用的是</span><span style=\"font-family:Calibri\">MyEclipse&nbsp;10</span><span style=\"font-family:宋体\">）建立</span><span style=\"font-family:Calibri\">Java&nbsp;Web</span><span style=\"font-family:宋体\">项目</span></p>\n<p>1.2<span style=\"font-family:宋体\">、导入</span><span style=\"font-family:Calibri\">Struts&nbsp;Jar</span><span style=\"font-family:宋体\">包</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">我用的是</span><span style=\"font-family:Calibri\">Struts1.3)</span></p>\n<p>1.3<span style=\"font-family:宋体\">、编写</span><span style=\"font-family:Calibri\">jsp</span><span style=\"font-family:宋体\">，编写</span><span style=\"font-family:Calibri\">actionForm(</span><span style=\"font-family:宋体\">继承</span><span style=\"font-family:Calibri\">ActionForm)</span><span style=\"font-family:宋体\">，编写</span><span style=\"font-family:Calibri\">action(</span><span style=\"font-family:宋体\">继承</span><span style=\"font-family:Calibri\">Action)</span></p>\n<p>1.4<span style=\"font-family:宋体\">、配置</span><span style=\"font-family:Calibri\">struts-config.xml</span><span style=\"font-family:宋体\">文件，写好</span><span style=\"font-family:Calibri\">actionForm</span><span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">action</span><span style=\"font-family:宋体\">的对应关系</span></p>\n<p>1.5<span style=\"font-family:宋体\">、配置</span><span style=\"font-family:Calibri\">web.xml</span><span style=\"font-family:宋体\">文件，写好</span><span style=\"font-family:Calibri\">ActionServlet</span><span style=\"font-family:宋体\">的配置参数</span></p>\n<p>1.6<span style=\"font-family:宋体\">、测试</span></p>\n<p>&nbsp;</p>\n<h3>2<span style=\"font-family:宋体\">、半手工半工具</span></h3>\n<p>2.1<span style=\"font-family:宋体\">、在</span><span style=\"font-family:Calibri\">IDE</span><span style=\"font-family:宋体\">中（我用的是</span><span style=\"font-family:Calibri\">MyEclipse&nbsp;10</span><span style=\"font-family:宋体\">）建立</span><span style=\"font-family:Calibri\">Java&nbsp;Web</span><span style=\"font-family:宋体\">项目</span></p>\n<p>2.2<span style=\"font-family:宋体\">、鼠标右击项目名，找到</span><span style=\"font-family:Calibri\">MyEclipse</span><span style=\"font-family:宋体\">下的</span><span style=\"font-family:Calibri\">Add&nbsp;Struts&nbsp;Capabilites...</span><span style=\"font-family:宋体\">，配置好</span><span style=\"font-family:Calibri\">strut-config</span><span style=\"font-family:宋体\">路径、</span><span style=\"font-family:Calibri\">Struts</span><span style=\"font-family:宋体\">版本、</span><span style=\"font-family:Calibri\">ActionServlet</span><span style=\"font-family:宋体\">单例对象的名字以及它对应的访问地址</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">一般来说都是</span><span style=\"font-family:Calibri\">*.do)</span><span style=\"font-family:宋体\">、包名。</span></p>\n<p>2.3<span style=\"font-family:宋体\">、在</span><span style=\"font-family:Calibri\">struts-config.xml</span><span style=\"font-family:宋体\">的源代码界面配置好</span><span style=\"font-family:Calibri\">actionForm</span><span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">action</span><span style=\"font-family:宋体\">的对应关系。</span></p>\n<p>2.4<span style=\"font-family:宋体\">、测试</span></p>\n<p>&nbsp;</p>\n<h3>3<span style=\"font-family:宋体\">、全工具</span></h3>\n<p>3.1<span style=\"font-family:宋体\">、在</span><span style=\"font-family:Calibri\">IDE</span><span style=\"font-family:宋体\">中（我用的是</span><span style=\"font-family:Calibri\">MyEclipse&nbsp;10</span><span style=\"font-family:宋体\">）建立</span><span style=\"font-family:Calibri\">Java&nbsp;Web</span><span style=\"font-family:宋体\">项目</span></p>\n<p>3.2<span style=\"font-family:宋体\">、鼠标右击项目名，找到</span><span style=\"font-family:Calibri\">MyEclipse</span><span style=\"font-family:宋体\">下的</span><span style=\"font-family:Calibri\">Add&nbsp;Struts&nbsp;Capabilites...</span><span style=\"font-family:宋体\">，配置好</span><span style=\"font-family:Calibri\">strut-config</span><span style=\"font-family:宋体\">路径、</span><span style=\"font-family:Calibri\">Struts</span><span style=\"font-family:宋体\">版本、</span><span style=\"font-family:Calibri\">ActionServlet</span><span style=\"font-family:宋体\">单例对象的名字以及它对应的访问地址</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">一般来说都是</span><span style=\"font-family:Calibri\">*.do)</span><span style=\"font-family:宋体\">、包名。</span></p>\n<p>3.3<span style=\"font-family:宋体\">、在</span><span style=\"font-family:Calibri\">struts-config.xml</span><span style=\"font-family:宋体\">的设计界面图形化配置</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">具体操作可以搜索</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">。</span></p>\n<p>3.4<span style=\"font-family:宋体\">、测试</span></p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<h3>案例：登录模块</h3>\n<h4>登录模块<span style=\"font-family:Calibri\">MVC</span><span style=\"font-family:宋体\">模型图</span></h4>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160122150609834\" alt=\"\"></div>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p>源代码：<a target=\"_blank\" target=\"_blank\" href=\"http://download.csdn.net/detail/q547550831/9414376\"><span style=\"color:rgb(128,0,128)\">Struts<span style=\"font-family:宋体\">三种开发方法案例</span></span></a></p>\n<br>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>小结</h2>\n<p>\n<p>1<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">struts1.x</span><span style=\"font-family:宋体\">框架可以通过三种方式，手工、半手工半工具、全工具。</span></p>\n<p>2<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">actionForm</span><span style=\"font-family:宋体\">中的</span><span style=\"font-family:Calibri\">setXxx</span><span style=\"font-family:宋体\">方法必须对应</span><span style=\"font-family:Calibri\">jsp</span><span style=\"font-family:宋体\">表单提交过来</span><span style=\"font-family:Calibri\">xxx</span><span style=\"font-family:宋体\">。</span></p>\n<p>3<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">struts-config.xml</span><span style=\"font-family:宋体\">文件中</span><span style=\"font-family:Calibri\">&lt;action&gt;</span><span style=\"font-family:宋体\">的</span><span style=\"font-family:Calibri\">scope</span><span style=\"font-family:宋体\">属性指的是</span><span style=\"font-family:Calibri\">actionForm</span><span style=\"font-family:宋体\">的生命周期范围，默认是</span><span style=\"font-family:Calibri\">session</span><span style=\"font-family:宋体\">，可以设置成</span><span style=\"font-family:Calibri\">request</span><span style=\"font-family:宋体\">。</span></p>\n<p>4<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">action</span><span style=\"font-family:宋体\">都是单态的，包括</span><span style=\"font-family:Calibri\">ActionServer</span><span style=\"font-family:宋体\">，这对网站并发有影响。</span></p>\n<p>5<span style=\"font-family:宋体\">、解决</span><span style=\"font-family:Calibri\">form</span><span style=\"font-family:宋体\">到</span><span style=\"font-family:Calibri\">action</span><span style=\"font-family:宋体\">的乱码问题，可用过滤器设置</span><span style=\"font-family:Calibri\">request,response,contentType</span><span style=\"font-family:宋体\">的编码解决。</span></p>\n<p>6<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">struts-config.xml</span><span style=\"font-family:宋体\">默认是放在</span><span style=\"font-family:Calibri\">WEB-INF</span><span style=\"font-family:宋体\">目录下的，其实也可以放在其他地方，只需要在</span><span style=\"font-family:Calibri\">web.xml</span><span style=\"font-family:宋体\">中配置</span><span style=\"font-family:Calibri\">ActionServer</span><span style=\"font-family:宋体\">时，加入如下初始参数。</span></p>\n<p><span style=\"color:rgb(255,0,0)\">&lt;init-param&gt;</span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;param-name&gt;config&lt;/param-name&gt;</span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;param-value&gt;</span><span style=\"color:rgb(255,0,0)\">/<span style=\"font-family:宋体\">目录名</span><span style=\"font-family:Calibri\">/</span><span style=\"font-family:宋体\">文件名</span></span><span style=\"color:rgb(255,0,0)\">&lt;/param-value&gt;</span></p>\n<p><span style=\"color:rgb(255,0,0)\">&lt;/init-param&gt;</span></p>\n<p>7<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">struts-config.xml</span><span style=\"font-family:宋体\">这样的</span><span style=\"font-family:Calibri\">Struts</span><span style=\"font-family:宋体\">配置文件是可以在</span><span style=\"font-family:Calibri\">web.xml</span><span style=\"font-family:宋体\">中配置多个的，多个配置文件用</span>”,”隔开就行了。</p>\n<p><span style=\"color:rgb(255,0,0)\">&lt;init-param&gt;</span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;param-name&gt;config&lt;/param-name&gt;</span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;param-value&gt;</span><span style=\"color:rgb(255,0,0)\">/<span style=\"font-family:宋体\">目录名</span><span style=\"font-family:Calibri\">/</span><span style=\"font-family:宋体\">文件名</span><span style=\"font-family:Calibri\">1,/</span><span style=\"font-family:宋体\">目录名</span><span style=\"font-family:Calibri\">/</span><span style=\"font-family:宋体\">文件名</span><span style=\"font-family:Calibri\">2,/</span><span style=\"font-family:宋体\">目录名</span><span style=\"font-family:Calibri\">/</span><span style=\"font-family:宋体\">文件名</span><span style=\"font-family:Calibri\">3</span></span><span style=\"color:rgb(255,0,0)\">&lt;/param-value&gt;</span></p>\n<p><span style=\"color:rgb(255,0,0)\">&lt;/init-param&gt;</span></p>\n<p><br>\n</p>\n   \n', '2016-04-16 01:21:11', '0');
INSERT INTO `article` VALUES ('10045', '10003', 'UML用例图', '\n\n<h1 style=\"text-align:center\"><span style=\"font-size:18px\">UML<span style=\"font-family:宋体\">用例图</span></span></h1>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>基本概述</h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;用例图<span style=\"font-family:Calibri\">(Use&nbsp;Case&nbsp;Diagram)</span><span style=\"font-family:宋体\">是用于描述某某角色通过某某系统能做什么事情。当需要对系统整体或者某一部分功能进行行为建模时，就能够使用用例图了。</span></p>\n<p>&nbsp;</p>\n<h2>用例图</h2>\n<h3>基本语法</h3>\n<img src=\"http://img.blog.csdn.net/20160115215320807\" alt=\"\"><br>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p>\n<p>解释：</p>\n<p>1<span style=\"font-family:宋体\">、主角表示执行者</span><span style=\"font-family:Calibri\">(Actor)</span><span style=\"font-family:宋体\">，其表示的是与当前系统交互交互的人或者其他系统。</span></p>\n<p>2<span style=\"font-family:宋体\">、用例能够表示系统能够为执行者提供什么功能。</span></p>\n<p>3<span style=\"font-family:宋体\">、用例是以动词加名词的形式，也就是动宾结构。</span></p>\n<p>4<span style=\"font-family:宋体\">、外边框表示系统边界，要注明是什么系统，外边框可以不画，个人建议画上比较清晰。</span></p>\n<p>5<span style=\"font-family:宋体\">、线条有三种：无箭头的，指向用例的箭头，指向执行者的箭头。</span></p>\n<p>6<span style=\"font-family:宋体\">、箭头可以有两种解释：</span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;1<span style=\"font-family:宋体\">、数据流向</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;箭头指向用例，说明向系统输入数据。箭头指向执行者，说明系统输出数据。</span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;2<span style=\"font-family:宋体\">、谁启动谁</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;箭头指向用例，说明启动系统中某一模块。箭头指向执行者，说明系统启动另一系统。</span></p>\n<br>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h3>进阶语法</h3>\n<img src=\"http://img.blog.csdn.net/20160115215401183\" width=\"650\" height=\"300\" alt=\"\"><br>\n<p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p>解释：</p>\n<p>1<span style=\"font-family:宋体\">、执行者之间只有一种关系，那就是泛化关系。</span></p>\n<p>2<span style=\"font-family:宋体\">、用例之间有三种关系。</span></p>\n<p>3<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">include</span><span style=\"font-family:宋体\">关系，表示用例</span><span style=\"font-family:Calibri\">4</span><span style=\"font-family:宋体\">有用例</span><span style=\"font-family:Calibri\">5</span><span style=\"font-family:宋体\">的功能，也就是有。。。功能。</span></p>\n<p>4<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">extend</span><span style=\"font-family:宋体\">关系，表示在用例</span><span style=\"font-family:Calibri\">6</span><span style=\"font-family:宋体\">的基础上用例</span><span style=\"font-family:Calibri\">7</span><span style=\"font-family:宋体\">有什么功能，也就是在。。。基础上。</span></p>\n<p>5<span style=\"font-family:宋体\">、继承关系，表示用例</span><span style=\"font-family:Calibri\">9</span><span style=\"font-family:宋体\">继承抽象用例</span><span style=\"font-family:Calibri\">8</span><span style=\"font-family:宋体\">什么功能，抽象用例是不能被实例化的。</span></p>\n<p>&nbsp;</p>\n<p>案例：</p>\n<img src=\"http://img.blog.csdn.net/20160115215427620\" width=\"600\" height=\"580\" alt=\"\"><br>\n<p><br>\n</p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p>\n<h3>用例的粒度控制</h3>\n<p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p>1<span style=\"font-family:宋体\">、在客户能准确全面理解的基础上，用例越精简越好。</span></p>\n<p>2<span style=\"font-family:宋体\">、用例应使用客户的语言，也就是领域语言，需保证客户能看懂能理解，而不应处于开发人员的角度来描述。</span></p>\n<p>3<span style=\"font-family:宋体\">、全面并且有重点地表达好用例，对于重点难点用例应详细描述，对于常识型用例则不需要太多笔墨。</span></p>\n<p>4<span style=\"font-family:宋体\">、可以通过</span><span style=\"font-family:Calibri\">include</span><span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">extend</span><span style=\"font-family:宋体\">分解和细化用例，最底层的用例粒度应大体一致，注意这点应该灵活把握，不应僵化。</span></p>\n<p>5<span style=\"font-family:宋体\">、应当立于客户想法，但又高于客户的想法。</span></p>\n<p>6<span style=\"font-family:宋体\">、不应盲目地从客户的想法中直接导出用例，用例更多地是从系统的目标、待解决的客户问题而推到出来的。</span></p>\n<p>7<span style=\"font-family:宋体\">、用例图不是万能的，所以有时也可以结合用例表来描述需求，甚至有时候也可以不用用例图来描述需求。</span></p>\n<p>&nbsp;</p>\n<p>案例：</p>\n<img src=\"http://img.blog.csdn.net/20160115215533709\" alt=\"\"><br>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>用例表</h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;光是用例图，很难说清楚每个用例，这时，可以借助用例表来详细说明用例。不过一般也填写重要用例的用例表就行了，没必要把每个用例都做成用例表。</p>\n<p>&nbsp;</p>\n<h3><img src=\"http://img.blog.csdn.net/20160115215621904\" width=\"800\" height=\"350\" alt=\"\"></h3>\n<p>解释：</p>\n<p>编号：指用例的编号，通常&#26684;式是<span style=\"font-family:Calibri\">UC&#43;</span><span style=\"font-family:宋体\">数字。</span></p>\n<p>名称：用例的名称，可以直接使用用例图中用例的名称。</p>\n<p>执行者：发动该用例的人或系统，如果是多个执行者发动，都写入。</p>\n<p>优先级：最基本的、最重要的、需要先实现的用例优先级应该标识位高。</p>\n<p>描述：对用例的简单描述，简单说明执行者能够做什么事情、达到怎样的效果。</p>\n<p>前置条件：要发动该用例，需要先满足的其他用例或者条件。</p>\n<p>基本流程：</p>\n<p><span style=\"color:rgb(255,0,0)\">1<span style=\"font-family:宋体\">、书写&#26684;式</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;1<span style=\"font-family:宋体\">、以阿拉伯数字编号。</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;2<span style=\"font-family:宋体\">、执行者的操作顶头写。</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;3<span style=\"font-family:宋体\">、系统的操作空两&#26684;写。</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">2<span style=\"font-family:宋体\">、基本流程是用例表中最关键的信息，在这里要思考用户与系统是如何交互的，需要注意以下几点：</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;1<span style=\"font-family:宋体\">、要用比较高层次的语言来表达，不要明确写出实现方法。</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;2<span style=\"font-family:宋体\">、系统与用户的交互要符合用户的使用习惯，尽量减少交互次数，尽量减少信息输入量。</span></span></p>\n<p>结束状况：用例正常结束情况下，系统会有什么效果。</p>\n<p>可选流程：在基本流程的基础上，某些步骤可能是有分支的，这时可用可选流程，当流程不止一个时，可用多个可选流程。</p>\n<p>异常流程：系统应该怎么处理用例的某些基础条件不满足而导致发生异常，或是发生了一些特殊情况。</p>\n<p>说明：写入业务信息。</p>\n<p>&nbsp;</p>\n<p><br>\n</p>\n<p>案例</p>\n<table>\n<tbody>\n<tr>\n<td valign=\"top\">\n<p>编号</p>\n</td>\n<td valign=\"top\">\n<p>2.1</p>\n</td>\n<td valign=\"top\">\n<p>名称</p>\n</td>\n<td valign=\"top\">\n<p>提出请假申请</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n<p>执行者</p>\n</td>\n<td valign=\"top\">\n<p>普通员工</p>\n</td>\n<td valign=\"top\">\n<p>优先级</p>\n</td>\n<td valign=\"top\">\n<p>高■低口</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n<p>描述</p>\n</td>\n<td width=\"451\" valign=\"top\" colspan=\"3\">\n<p>普通员工录入请假的信息,&nbsp;能成功提出请假申请</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n<p>前置条件</p>\n</td>\n<td width=\"451\" valign=\"top\" colspan=\"3\">\n<p>无</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n<p>基本流程</p>\n</td>\n<td width=\"451\" valign=\"top\" colspan=\"3\">\n<p>l.指示提出请假申请。</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;2.显示请假申请表单。</p>\n<p>3.填写申请单,选择请假类别。</p>\n<p>4.指示提交申请。</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;5.显示成功提交申请的信息。</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n<p>结束状况</p>\n</td>\n<td width=\"451\" valign=\"top\" colspan=\"3\">\n<p>系统保存请假申请数据,并提示成功提交申请的信息。</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n<p>可选流程1</p>\n</td>\n<td width=\"451\" valign=\"top\" colspan=\"3\">\n<p>4.指示取消申请。</p>\n<p>5.显示申请被取消的信息。</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n<p>异常流程</p>\n</td>\n<td width=\"451\" valign=\"top\" colspan=\"3\">\n<p>3..显示申请被取消的信息。</p>\n<p>4.指示提交申请。</p>\n<p><span style=\"color:rgb(255,0,0)\">5.发现可休年假不足,显示相应提示，并向用户显示相应通知。</span></p>\n<p>6.修改请假申请单,或取消请假申请。</p>\n</td>\n</tr>\n<tr>\n<td valign=\"top\">\n<p>说明</p>\n</td>\n<td width=\"451\" valign=\"top\" colspan=\"3\">\n<p>请假申请单有以下内容:申请者、开始时间、结束时间、请假事由、请假类别。</p>\n<p>申请者默认为当前的用户,&nbsp;不可修改。</p>\n<p>申请者默认为当前的用户,&nbsp;不可修改。</p>\n<p>类别为:事假、病假、婚嫁、产假、年假,只能而且必须选其一</p>\n<p><span style=\"color:rgb(255,0,0)\">请假时间不能超过年假时间</span></p>\n</td>\n</tr>\n</tbody>\n</table>\n<br>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n   \n', '2016-04-16 01:21:11', '0');
INSERT INTO `article` VALUES ('10046', '10003', 'XPath技术', '\n\n<h1 style=\"text-align:center\"><span style=\"font-size:18px\">XPath<span style=\"font-family:宋体\">技术</span></span></h1>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>基本概述</h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;XPath<span style=\"font-family:宋体\">即为</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">路径语言，它是一种用来确定</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">（标准通用标记语言的子集）文档中某部分位置的语言。</span><span style=\"font-family:Calibri\">XPath</span><span style=\"font-family:宋体\">基于</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">的树状结构，提供在数据结构树中找寻节点的能力。起初&nbsp;</span><span style=\"font-family:Calibri\">XPath&nbsp;</span><span style=\"font-family:宋体\">的提出的初衷是将其作为一个通用的、介于</span><span style=\"font-family:Calibri\">XPointer</span><span style=\"font-family:宋体\">与</span><span style=\"font-family:Calibri\">XSLT</span><span style=\"font-family:宋体\">间的语法模型。但是&nbsp;</span><span style=\"font-family:Calibri\">XPath&nbsp;</span><span style=\"font-family:宋体\">很快的被开发者采用来当作小型查询语言。</span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：其配合</span><span style=\"font-family:Calibri\">DOM4J</span><span style=\"font-family:宋体\">解析技术，弥补了</span><span style=\"font-family:Calibri\">DOM4J</span><span style=\"font-family:宋体\">不能跨层取元素的缺点。需要引入</span><span style=\"font-family:Calibri\">jaxen-1.1-beta-6.jar</span><span style=\"font-family:宋体\">包。</span></span></p>\n<p>&nbsp;</p>\n<h2>XPath<span style=\"font-family:宋体\">原理</span></h2>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;XPath<span style=\"font-family:宋体\">就好比</span><span style=\"font-family:Calibri\">SQL</span><span style=\"font-family:宋体\">查询语句，能够对</span><span style=\"font-family:Calibri\">DOM</span><span style=\"font-family:宋体\">树进行查询操作，并获取相应结果。</span></p>\n<p>&nbsp;</p>\n<h2>XPath<span style=\"font-family:宋体\">案例</span></h2>\n<p><strong>XML9.xml</strong></p>\n<pre code_snippet_id=\"1562196\" snippet_file_name=\"blog_20160122_1_4320403\" name=\"code\" class=\"html\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;AAA&gt;\n	&lt;BBB id=&quot;b1&quot;&gt;Hello World B1&lt;/BBB&gt;\n	&lt;CCC id=&quot;c1&quot;/&gt;\n	&lt;BBB id=&quot;b2&quot;&gt;Hello World B2&lt;/BBB&gt;\n	&lt;BBB&gt;Hello World B3&lt;/BBB&gt;\n	&lt;DDD&gt;\n		&lt;BBB id=&quot;b3&quot;&gt;Hello World B4&lt;/BBB&gt;\n	&lt;/DDD&gt;\n	&lt;CCC&gt;\n		&lt;DDD&gt;\n			&lt;BBB id=&quot;b4&quot;/&gt;\n			&lt;BBB id=&quot;b5&quot;/&gt;\n		&lt;/DDD&gt;\n	&lt;/CCC&gt;\n&lt;/AAA&gt; </pre><br>\n<pre code_snippet_id=\"1562196\" snippet_file_name=\"blog_20160122_2_2859707\" name=\"code\" class=\"java\">package com.pc;\n\nimport java.io.File;\nimport java.io.FileNotFoundException;\nimport java.io.FileOutputStream;\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.io.UnsupportedEncodingException;\nimport java.util.Iterator;\nimport java.util.List;\n\nimport org.dom4j.Attribute;\nimport org.dom4j.Document;\nimport org.dom4j.DocumentException;\nimport org.dom4j.DocumentHelper;\nimport org.dom4j.Element;\nimport org.dom4j.io.OutputFormat;\nimport org.dom4j.io.SAXReader;\nimport org.dom4j.io.XMLWriter;\n\n/**\n * \n * @author Switch\n * @function DOM4j配合xpath\n * \n */\npublic class XML9 {\n	public static void main(String[] args) throws Exception {\n		// 1.得到SAXReader解析器\n		SAXReader saxReader = new SAXReader();\n		// 2.指定解析哪个文件\n		Document document = saxReader.read(&quot;src/com/pc/XML9.xml&quot;);\n		// 3.使用XPath随意读取任何一层的元素\n		// document.selectNodes(); //返回多个元素\n		// document.selectSingleNode(); // 返回一个元素\n\n		// 取出AAA下面的所有BBB 3个\n		// List nodeList = document.selectNodes(&quot;/AAA/BBB&quot;);\n		// 取出所有的BBB 6个\n		// List nodeList = document.selectNodes(&quot;//BBB&quot;);\n		// System.out.println(nodeList.size());\n\n		// 取出AAA下面的DDD下面的最后一个BBB元素的内容 Hello World B4\n		// List nodeList = document.selectNodes(&quot;/AAA/DDD//BBB[last()]&quot;);\n		// System.out.println(((Element)nodeList.get(0)).getTextTrim());\n\n		// 取出AAA下面的CCC下面的DDD下面的所有元素 2个\n		// List nodeList = document.selectNodes(&quot;/AAA/CCC/DDD/*&quot;);\n\n		// 取出所有有三个祖先元素的BBB元素\n		// List nodeList = document.selectNodes(&quot;/*/*/*/BBB&quot;);\n		// System.out.println(nodeList.size());\n\n		// 取出AAA下面的第一个BBB元素的内容 Hello World B1\n		// List nodeList = document.selectNodes(&quot;/AAA/BBB[1]&quot;);\n		// System.out.println(((Element)nodeList.get(0)).getTextTrim());\n		// Element element = (Element) document.selectSingleNode(&quot;/AAA/BBB[1]&quot;);\n		// System.out.println(element.getTextTrim());\n\n		// 取出所有有id属性的元素的id属性 5个\n		// List nodeList = document.selectNodes(&quot;//@id&quot;);\n		// System.out.println(nodeList.size());\n		// 取出第一个有id属性的元素的id属性的值 b1\n		// System.out.println(((Attribute)nodeList.get(0)).getText());\n\n		// 取出所有有id属性的CCC元素\n		// List nodeList = document.selectNodes(&quot;//CCC[@id]&quot;);\n		// System.out.println(nodeList.size());\n\n		// &quot;//BBB[@*]&quot; 选择有任意属性的BBB元素\n\n		// &quot;//BBB[not(@*)]&quot; 选择没有属性的BBB元素\n\n		// &quot;//BBB[@id=&#39;b1&#39;]&quot; 选择含有属性id且其值为&#39;b1&#39;的BBB元素\n\n		// 选择含有属性id且其值(在用normalize-space函数去掉前后空格后)为&#39;b2&#39;的BBB元素\n		// &quot;//BBB[normalize-space(@id)=&#39;b2&#39;]&quot;\n\n		// &quot;//*[count(BBB)=2]&quot; 选择含有2个BBB子元素的元素\n\n		// &quot;//*[name()=&#39;BBB&#39;]&quot; 选择所有名称为BBB的元素(这里等价于//BBB)\n\n		// &quot;//*[starts-with(name(),&#39;B&#39;)]&quot; 选择所有名称以&quot;B&quot;起始的元素\n\n		// &quot;//*[contains(name(),&#39;C&#39;)]&quot; 选择所有名称包含&quot;C&quot;的元素\n\n		// &quot;//*[string-length(name()) = 3]&quot; 选择名字长度为3的元素\n\n		// &quot;//*[string-length(name()) &lt; 4]&quot; 选择名字长度小于3的元素\n		// 同样的将&lt;替换成大于号则是大于\n		// 11个\n		// List nodeList = document.selectNodes(&quot;//*[string-length(name()) &lt; 4]&quot;);\n		// System.out.println(nodeList.size());\n		\n		// &quot;//CCC | //BBB&quot; 选择所有的CCC和BBB元素\n	}\n}</pre><br>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：通过上述案例中的</span><span style=\"font-family:Calibri\">XPath</span><span style=\"font-family:宋体\">语句，基本的</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">查询，使用是没问题的。</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n   \n', '2016-04-16 01:21:11', '0');
INSERT INTO `article` VALUES ('10047', '10003', 'UML顺序图和通信图', '\n\n<p><span style=\"font-size:18px\"></span></p>\n<h1 style=\"text-align:center\">UML<span style=\"font-family:宋体\">顺序图和通信图</span></h1>\n<span style=\"font-family:宋体\"></span>\n<p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>基本概述</h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;当流程涉及到多个角色，并且通过多对角色交互展开时，顺序图是不二选择。</p>\n<p>案例：</p>\n<img src=\"http://img.blog.csdn.net/20160115200831960\" width=\"300\" height=\"893\" alt=\"\"><br>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>顺序图</h2>\n<h3>基本语法</h3>\n<img src=\"http://img.blog.csdn.net/20160115200922475\" width=\"550\" height=\"450\" alt=\"\"><br>\n<p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p>解释：</p>\n<p>角色：一般代表某人。</p>\n<p>对象：一般代表某系统。</p>\n<p>激活条：激活条也叫作会话，每次会话就是一次交互。</p>\n<p>消息：</p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;1<span style=\"font-family:宋体\">、简单消息：表示一般的消息。</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;2<span style=\"font-family:宋体\">、同步消息：待消息接收者响应之后才能进行下一步操作。</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;3<span style=\"font-family:宋体\">、异步消息：不需要接收者响应就能进行下一步操作。</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;4<span style=\"font-family:宋体\">、返回消息：接收者接收消息之后返回的消息。</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;5<span style=\"font-family:宋体\">、除返回消息是名词结构外，其他消息都是动宾短语</span></p>\n<p>生命线：激活条会覆盖生命线，手绘<span style=\"font-family:Calibri\">UML</span><span style=\"font-family:宋体\">顺序图，一般不画激活条，只画生命线。</span></p>\n<p>撤消：代表生命线死亡。</p>\n<p>&nbsp;</p>\n<p>案例<span style=\"font-family:Calibri\">1</span><span style=\"font-family:宋体\">：</span></p>\n<img src=\"http://img.blog.csdn.net/20160115200950343\" width=\"550\" height=\"550\" alt=\"\"><br>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p>案例<span style=\"font-family:Calibri\">2</span><span style=\"font-family:宋体\">：</span></p>\n<img src=\"http://img.blog.csdn.net/20160115201052808\" alt=\"\"><br>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h3>循环及分支结构</h3>\n<p>\n<p>基本语法</p>\n<img src=\"http://img.blog.csdn.net/20160115201115536\" alt=\"\"><br>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">loop(<span style=\"font-family:宋体\">循环</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">：表示满足循环条件则循环。</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">alt(<span style=\"font-family:宋体\">条件分支</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">：表示选择其中一个条件执行，以虚线隔开。</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">opt(<span style=\"font-family:宋体\">可选分支</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">：表示满足条件则执行。</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">frame(<span style=\"font-family:宋体\">框</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">：框是可以嵌套的，且层数无限制。</span></span></p>\n<p>&nbsp;</p>\n<p>小结：</p>\n<p>顺序图的特点：</p>\n<p>1<span style=\"font-family:宋体\">、强调角色之间的交互，信息传递很明确。</span></p>\n<p>2<span style=\"font-family:宋体\">、强调按时间顺序分别发生了什么事情。</span></p>\n<p>3<span style=\"font-family:宋体\">、不太适合表达复杂的特殊流程。</span></p>\n<p>&nbsp;</p>\n<p>活动图的特点：</p>\n<p>1<span style=\"font-family:宋体\">、强调每个角色做了什么事情，这些事情的先后顺序。</span></p>\n<p>2<span style=\"font-family:宋体\">、适合表达各种特殊流程。</span></p>\n<p>&nbsp;</p>\n<p>状态机图的特点：</p>\n<p>1<span style=\"font-family:宋体\">、事情围绕某东西开展。</span></p>\n<p>2<span style=\"font-family:宋体\">、该东西有不同的状态，状态会因为发生了一些事情而变化。</span></p>\n<p>&nbsp;</p>\n<p>流程三大利器的取舍：</p>\n<p>1<span style=\"font-family:宋体\">、如果事情是围绕某个东西开展的，可以考虑用状态机图。</span></p>\n<p>2<span style=\"font-family:宋体\">、如果事情不是围绕某东西开展的，状态机图可能不适合，可考虑用顺序图或者活动图。</span></p>\n<p>3<span style=\"font-family:宋体\">、如果没有复杂的特殊流程，可考虑顺序图。</span></p>\n<p>4<span style=\"font-family:宋体\">、如果有较复杂的特殊流程，可考虑活动图。</span></p>\n<p>5<span style=\"font-family:宋体\">、不要限制只用一种图，可同时使用两种甚至三种图，从多个角度来分析问题，稍后再适当取舍。</span></p>\n<p>&nbsp;</p>\n<p>案例：</p>\n<img src=\"http://img.blog.csdn.net/20160115201139345\" width=\"600\" height=\"720\" alt=\"\"><br>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>通信图</h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;顺序图强调先后顺序，通信图则是强调相互之间的关系。顺序图和通信图基本同构，但是很少使用通信图，因为顺序图更简洁，更直观。</p>\n<img src=\"http://img.blog.csdn.net/20160115201215535\" width=\"500\" height=\"620\" alt=\"\"><br>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h3>顺序图和通信图的区别</h3>\n<p>\n<p>1<span style=\"font-family:宋体\">、通信图的消息必须有编号。</span></p>\n<p>2<span style=\"font-family:宋体\">、通信图连接的线条是关联关系。</span></p>\n<p>3<span style=\"font-family:宋体\">、通信图消息流程不是至上而下的。</span></p>\n<p><br>\n</p>\n   \n', '2016-04-16 01:21:12', '0');
INSERT INTO `article` VALUES ('10048', '10003', 'XML编程-DOM4J', '\n\n<h1 style=\"text-align:center\"><span style=\"font-size:18px\">XML<span style=\"font-family:宋体\">编程</span><span style=\"font-family:Calibri\">-DOM4J</span></span></h1>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Calibri\"></span></span></p>\n<h2>基本概述</h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;dom4j<span style=\"font-family:宋体\">是一个</span><span style=\"font-family:Calibri\">Java</span><span style=\"font-family:宋体\">的</span><span style=\"font-family:Calibri\">XML&nbsp;API</span><span style=\"font-family:宋体\">，类&#20284;于</span><span style=\"font-family:Calibri\">jdom</span><span style=\"font-family:宋体\">，用来读写</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">文件的。</span><span style=\"font-family:Calibri\">dom4j</span><span style=\"font-family:宋体\">是一个十分优秀的</span><span style=\"font-family:Calibri\">JavaXML&nbsp;API</span><span style=\"font-family:宋体\">，具有性能优异、功能强大和极其易使用的特点，同时它也是一个开放源代码的软件，可以在</span><span style=\"font-family:Calibri\">SourceForge</span><span style=\"font-family:宋体\">上找到它。在</span><span style=\"font-family:Calibri\">IBM&nbsp;developerWorks</span><span style=\"font-family:宋体\">上面还可以找到一篇文章，对主流的</span><span style=\"font-family:Calibri\">Java&nbsp;XML&nbsp;API</span><span style=\"font-family:宋体\">进行的性能、功能和易用性的评测，所以可以知道</span><span style=\"font-family:Calibri\">dom4j</span><span style=\"font-family:宋体\">无论在哪个方面都是非常出色的。如今可以看到越来越多的</span><span style=\"font-family:Calibri\">Java</span><span style=\"font-family:宋体\">软件都在使用</span><span style=\"font-family:Calibri\">dom4j</span><span style=\"font-family:宋体\">来读写</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">，特别&#20540;得一提的是连</span><span style=\"font-family:Calibri\">Sun</span><span style=\"font-family:宋体\">的</span><span style=\"font-family:Calibri\">JAXM</span><span style=\"font-family:宋体\">也在用</span><span style=\"font-family:Calibri\">dom4j</span><span style=\"font-family:宋体\">。这已经是必须使用的</span><span style=\"font-family:Calibri\">jar</span><span style=\"font-family:宋体\">包，&nbsp;</span><span style=\"font-family:Calibri\">Hibernate</span><span style=\"font-family:宋体\">也用它来读写配置文件。</span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：</span><span style=\"font-family:Calibri\">DOM4J</span><span style=\"font-family:宋体\">功能那么强大的原因之一就是它支持</span><span style=\"font-family:Calibri\">XPath</span><span style=\"font-family:宋体\">技术，</span><span style=\"font-family:Calibri\">DOM4J</span><span style=\"font-family:宋体\">也有相应的参考文档，需要的可以自行搜索下载。</span></span></p>\n<p>&nbsp;</p>\n<h2>为什么会有<span style=\"font-family:Calibri\">DOM4J</span><span style=\"font-family:宋体\">？</span></h2>\n<p>之前，博客里阐述的两门技术，<span style=\"font-family:Calibri\">DOM</span><span style=\"font-family:宋体\">和</span><span style=\"font-family:Calibri\">SAX</span><span style=\"font-family:宋体\">技术，前者的缺点是耗费内存，后者的缺点是只能进行读取操作，而</span><span style=\"font-family:Calibri\">DOM4J</span><span style=\"font-family:宋体\">既可以提交效率，也可以进行</span><span style=\"font-family:Calibri\">crud</span><span style=\"font-family:宋体\">操作。</span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：使用</span><span style=\"font-family:Calibri\">DOM4J</span><span style=\"font-family:宋体\">需要导入相应基本</span><span style=\"font-family:Calibri\">JAR</span><span style=\"font-family:宋体\">包，如果使用</span><span style=\"font-family:Calibri\">DOM4J</span><span style=\"font-family:宋体\">的扩展功能，还需要导入扩展</span><span style=\"font-family:Calibri\">JAR</span><span style=\"font-family:宋体\">包。</span></span></p>\n<p>&nbsp;</p>\n<h2>DOM4J<span style=\"font-family:宋体\">使用入门</span></h2>\n<h3>DOM4J<span style=\"font-family:宋体\">获得</span><span style=\"font-family:Calibri\">Document</span><span style=\"font-family:宋体\">对象的三种方法</span></h3>\n<h4>1.<span style=\"font-family:宋体\">读取</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">文件</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">获得</span><span style=\"font-family:Calibri\">document</span><span style=\"font-family:宋体\">对象</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">常用</span><span style=\"font-family:Calibri\">)</span>&nbsp;\n &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</h4>\n<pre name=\"code\" class=\"java\">    SAXReader reader = new SAXReader();\n    Document&#160;&#160; document = reader.read(new File(“src/input.xml&quot;));</pre>\n<h4>2.<span style=\"font-family:宋体\">解析</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">形式的文本</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">得到</span><span style=\"font-family:Calibri\">document</span><span style=\"font-family:宋体\">对象</span></h4>\n<pre name=\"code\" class=\"java\">    String text = &quot;&lt;members&gt;&lt;/members&gt;&quot;;\n    Document document = DocumentHelper.parseText(text);</pre>\n<h4>3.<span style=\"font-family:宋体\">主动创建</span><span style=\"font-family:Calibri\">document</span><span style=\"font-family:宋体\">对象</span></h4>\n<pre name=\"code\" class=\"java\">    Document document = DocumentHelper.createDocument();\n    //创建根节点\n    Element root = document.addElement(&quot;members&quot;);</pre>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：注意要导入相应</span><span style=\"font-family:Calibri\">JAR</span><span style=\"font-family:宋体\">包。</span></span></p>\n<br>\n<p>\n<h3>节点对象</h3>\n<h4>1<span style=\"font-family:宋体\">、获取文档的根节点</span></h4>\n<pre name=\"code\" class=\"java\">    Element root = document.getRootElement();</pre>\n<p>\n<p>\n<h4>2<span style=\"font-family:宋体\">、取得某个节点的子节点</span></h4>\n<p>\n<p><pre name=\"code\" class=\"java\">    Element element=node.element(“书名&quot;);</pre></p>\n<h4>3<span style=\"font-family:宋体\">、取得节点的内容</span></h4>\n<pre name=\"code\" class=\"java\">    String text1=node.getText();\n    String text2=node.getTextTrim();	// 去掉内容前面和后面的空格</pre>\n<h4>4<span style=\"font-family:宋体\">、取得某节点下所有名为“</span><span style=\"font-family:Calibri\">member</span><span style=\"font-family:宋体\">”的子节点，并进行遍历</span>&nbsp;</h4>\n<pre name=\"code\" class=\"java\">    List nodes = rootElm.elements(&quot;member&quot;);\n    for (Iterator it = nodes.iterator(); it.hasNext();) {\n &#160;&#160;&#160;      Element elm = (Element) it.next();\n &#160;&#160;&#160;      // do something\n    }</pre>\n<h4>5<span style=\"font-family:宋体\">、对某节点下的所有子节点进行遍历</span></h4>\n<pre name=\"code\" class=\"java\">    for(Iterator it=root.elementIterator();it.hasNext();){\n        Element element = (Element) it.next();\n &#160;&#160;&#160;&#160;&#160;&#160;    // do something\n &#160;&#160;&#160;  }</pre>\n<h4>6<span style=\"font-family:宋体\">、在某节点下添加子节点</span></h4>\n<pre name=\"code\" class=\"java\">    Element ageElm = newMemberElm.addElement(&quot;age&quot;);</pre>\n<h4>7<span style=\"font-family:宋体\">、设置节点文字</span>&nbsp;</h4>\n<pre name=\"code\" class=\"java\">    element.setText(&quot;29&quot;);</pre>\n<h4>8<span style=\"font-family:宋体\">、删除某节点</span></h4>\n<pre name=\"code\" class=\"java\">    //childElm是待删除的节点,parentElm是其父节点\n    parentElm.remove(childElm);</pre>\n<h4>9<span style=\"font-family:宋体\">、添加一个</span><span style=\"font-family:Calibri\">CDATA</span><span style=\"font-family:宋体\">节点</span></h4>\n<pre name=\"code\" class=\"java\">    Element contentElm = infoElm.addElement(&quot;content&quot;);\n    contentElm.addCDATA(diary.getContent());</pre>\n<p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：注意不能跨层访问节点。</span></span></p>\n<br>\n<h3>节点对象属性</h3>\n<h4>1<span style=\"font-family:宋体\">、取得某节点下的某属性</span></h4>\n<pre name=\"code\" class=\"java\">    Element root=document.getRootElement();&#160;&#160;&#160;&#160;\n &#160;  &#160;&#160;//属性名name\n    Attribute attribute=root.attribute(&quot;size&quot;);</pre>\n<h4>2<span style=\"font-family:宋体\">、取得属性的文字</span></h4>\n<pre name=\"code\" class=\"java\"> &#160;&#160;&#160; String text=attribute.getText();</pre>\n<h4>3<span style=\"font-family:宋体\">、删除某属性</span></h4>\n<pre name=\"code\" class=\"java\">    Attribute attribute=root.attribute(&quot;size&quot;);\n    root.remove(attribute);</pre>\n<h4>4<span style=\"font-family:宋体\">、遍历某节点的所有属性</span></h4>\n<pre name=\"code\" class=\"java\"> &#160;&#160;  Element root=document.getRootElement();&#160;&#160;&#160;&#160;\n  &#160; for(Iterator it=root.attributeIterator();it.hasNext();){\n &#160;&#160;&#160;&#160;&#160;&#160;    Attribute attribute = (Attribute) it.next();\n &#160;&#160;&#160;&#160;&#160;&#160;    String text=attribute.getText();\n &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;   System.out.println(text);\n &#160;&#160;&#160; }</pre>\n<h4>5<span style=\"font-family:宋体\">、设置某节点的属性和文字</span></h4>\n<pre name=\"code\" class=\"java\">    newMemberElm.addAttribute(&quot;name&quot;, &quot;sitinspring&quot;);</pre>\n<h4>6<span style=\"font-family:宋体\">、设置属性的文字</span></h4>\n<pre name=\"code\" class=\"java\">    Attribute attribute=root.attribute(&quot;name&quot;);\n &#160;&#160;  attribute.setText(&quot;sitinspring&quot;);</pre><br>\n<h3>在指定位置插入节点&nbsp;</h3>\n<p>1.<span style=\"font-family:宋体\">得到插入位置的节点列表（</span><span style=\"font-family:Calibri\">list</span><span style=\"font-family:宋体\">）</span></p>\n<p>2.<span style=\"font-family:宋体\">调用</span><span style=\"font-family:Calibri\">list.add(index,elemnent)</span><span style=\"font-family:宋体\">，由</span><span style=\"font-family:Calibri\">index</span><span style=\"font-family:宋体\">决定</span><span style=\"font-family:Calibri\">element</span><span style=\"font-family:宋体\">的插入位置。</span></p>\n<p>Element<span style=\"font-family:宋体\">元素可以通过</span><span style=\"font-family:Calibri\">DocumentHelper</span><span style=\"font-family:宋体\">对象得到。示例代码：</span></p>\n<pre name=\"code\" class=\"java\">    Element aaa = DocumentHelper.createElement(&quot;aaa&quot;);\n    aaa.setText(&quot;aaa&quot;);\n    List list = root.element(&quot;书&quot;).elements();\n    list.add(1, aaa);\n    //更新document</pre><br>\n<h3>将文档写入<span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">文件</span></h3>\n<p>\n<h4>1<span style=\"font-family:宋体\">、如果文档是全英文</span></h4>\n<span style=\"font-family:宋体\"></span>\n<p>\n<pre name=\"code\" class=\"java\">XMLWriter writer = new XMLWriter(new  FileWriter(&quot;output.xml&quot;));\nwriter.write(document);\nwriter.close();</pre>\n<h4>2<span style=\"font-family:宋体\">、如果文档含有中文</span></h4>\n<pre name=\"code\" class=\"java\">OutputFormat outputFormat = OutputFormat.createPrettyPrint();\noutputFormat.setEncoding(&quot;utf-8&quot;);\n\nXMLWriter xmlWriter = new XMLWriter(new FileOutputStream(&quot;src/com/pc/XML8.xml&quot;), outputFormat);\nxmlWriter.write(document);\nxmlWriter.close();</pre>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：出现乱码的原因是因为输出字符集不能识别中文，这样可以通过</span><span style=\"font-family:Calibri\">OutputFormat</span><span style=\"font-family:宋体\">的</span><span style=\"font-family:Calibri\">setEncoding</span><span style=\"font-family:宋体\">方法设置为</span></span><span style=\"color:rgb(255,0,0)\">”</span><span style=\"color:rgb(255,0,0)\">UTF-8</span><span style=\"color:rgb(255,0,0)\">”</span><span style=\"color:rgb(255,0,0)\">，然后再使用<span style=\"font-family:Calibri\">XMLWriter</span><span style=\"font-family:宋体\">这种形参的</span><span style=\"font-family:Calibri\">(OutputStream&nbsp;out,&nbsp;OutputFormat&nbsp;format)&nbsp;</span><span style=\"font-family:宋体\">构造方构造方法，就能解决乱码问题了，至于为什么会用</span><span style=\"font-family:Calibri\">createPrettyPrint</span><span style=\"font-family:宋体\">方法，是因为这样做输出的&#26684;式更符合人的阅读习惯。</span></span></p>\n<p><br>\n</p>\n<h3>综合案例</h3>\n<p><strong>XML8.xml</strong></p>\n<pre name=\"code\" class=\"html\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;班级 班次=&quot;1班&quot; 编号=&quot;C1&quot;&gt;\n	&lt;学生 学号=&quot;n1&quot; 性别=&quot;男&quot; 授课方式=&quot;面授&quot; 朋友=&quot;n2&quot; 班级编号=&quot;C1&quot;&gt;\n		&lt;名字&gt;张三&lt;/名字&gt;\n		&lt;年龄&gt;20&lt;/年龄&gt;\n		&lt;介绍&gt;不错&lt;/介绍&gt;\n	&lt;/学生&gt;\n	&lt;学生 学号=&quot;n2&quot; 性别=&quot;女&quot; 授课方式=&quot;面授&quot; 朋友=&quot;n1 n3&quot; 班级编号=&quot;C1&quot;&gt;\n		&lt;名字&gt;李四&lt;/名字&gt;\n		&lt;年龄&gt;18&lt;/年龄&gt;\n		&lt;介绍&gt;很好&lt;/介绍&gt;\n	&lt;/学生&gt;\n	&lt;学生 学号=&quot;n3&quot; 性别=&quot;男&quot; 授课方式=&quot;面授&quot; 朋友=&quot;n2&quot; 班级编号=&quot;C1&quot;&gt;\n		&lt;名字&gt;王五&lt;/名字&gt;\n		&lt;年龄&gt;22&lt;/年龄&gt;\n		&lt;介绍&gt;非常好&lt;/介绍&gt;\n	&lt;/学生&gt;\n	&lt;学生 性别=&quot;男&quot; 班级编号=&quot;C1&quot;&gt;\n		&lt;名字&gt;小明&lt;/名字&gt;\n		&lt;年龄&gt;30&lt;/年龄&gt;\n		&lt;介绍&gt;好&lt;/介绍&gt;\n	&lt;/学生&gt;\n&lt;/班级&gt;</pre><br>\n<pre name=\"code\" class=\"java\">package com.pc;\nimport java.io.File;\nimport java.io.FileNotFoundException;\nimport java.io.FileOutputStream;\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.io.UnsupportedEncodingException;\nimport java.util.Iterator;\nimport java.util.List;\nimport org.dom4j.Document;\nimport org.dom4j.DocumentException;\nimport org.dom4j.DocumentHelper;\nimport org.dom4j.Element;\nimport org.dom4j.io.OutputFormat;\nimport org.dom4j.io.SAXReader;\nimport org.dom4j.io.XMLWriter;\n/**\n * \n * @author Switch\n * @function 使用DOM4j解析XML文件\n * \n */\npublic class XML8 {\n	// 使用DOM4j对XML进行CRUD操作\n	public static void main(String[] args) throws Exception {\n		// 1.得到解析器\n		SAXReader saxReader = new SAXReader();\n		// 2.指定解析哪个XML文件\n		Document document = saxReader.read(new File(&quot;src/com/pc/XML8.xml&quot;));\n		// list(document.getRootElement());\n		// read(document);\n		// readByXPath(document);\n		// add(document);\n		// delete(document);\n		// updateElement(document);\n		// updateAttribute(document);\n		// addByIndex(document, 3);\n	}\n\n	// 更新属性(修改所有班级编号为C2)\n	public static void updateAttribute(Document document) throws Exception {\n		// 得到所有学生\n		List&lt;Element&gt; students = document.getRootElement().elements(&quot;学生&quot;);\n		for (Element e : students) {\n			// 修改班级编号\n			e.addAttribute(&quot;班级编号&quot;, &quot;C2&quot;);\n		}\n		updateToXML(document);\n	}\n\n	// 更新元素(将所有学生的年龄+3)\n	public static void updateElement(Document document) throws Exception {\n		// 得到所有学生\n		List&lt;Element&gt; students = document.getRootElement().elements(&quot;学生&quot;);\n		for (Element e : students) {\n			// 取出年龄\n			Element age = e.element(&quot;年龄&quot;);\n			age.setText(Integer.parseInt(age.getTextTrim()) + 3 + &quot;&quot;);\n		}\n		updateToXML(document);\n	}\n\n	// 删除元素(删除第一个学生)\n	public static void delete(Document document) throws Exception {\n		// 找到元素\n		Element stu = document.getRootElement().element(&quot;学生&quot;);\n		// 删除\n		stu.getParent().remove(stu);\n\n		// 更新\n		updateToXML(document);\n	}\n\n	// 添加元素到指定位置\n	public static void addByIndex(Document document, int index)\n			throws Exception {\n		// 创建一个元素\n		Element newStu = DocumentHelper.createElement(&quot;学生&quot;);\n		newStu.setText(&quot;小花&quot;);\n		// 得到所有学生的list\n		List&lt;Element&gt; students = document.getRootElement().elements(&quot;学生&quot;);\n		// 按索引添加\n		students.add(index, newStu);\n\n		// 更新\n		updateToXML(document);\n	}\n\n	// 添加元素(添加一个学生到xml中)\n	public static void add(Document document) throws Exception {\n		// 创建一个学生节点对象\n\n		Element newStu = DocumentHelper.createElement(&quot;学生&quot;);\n		// 给元素添加属性\n		newStu.addAttribute(&quot;学号&quot;, &quot;n4&quot;);\n		Element newStuName = DocumentHelper.createElement(&quot;名字&quot;);\n		Element newStuAge = DocumentHelper.createElement(&quot;年龄&quot;);\n		Element newStuIntro = DocumentHelper.createElement(&quot;介绍&quot;);\n\n		// 把子元素挂载到学生节点下\n		newStu.add(newStuName);\n		newStu.add(newStuAge);\n		newStu.add(newStuIntro);\n		// 将学生挂载在根节点下\n		document.getRootElement().add(newStu);\n\n		// 更新\n		updateToXML(document);\n	}\n\n	private static void updateToXML(Document document)\n			throws UnsupportedEncodingException, FileNotFoundException,\n			IOException {\n		// 更新xml文件\n		// 直接输出会出现中文乱码\n		OutputFormat outputFormat = OutputFormat.createPrettyPrint();\n		outputFormat.setEncoding(&quot;utf-8&quot;);\n\n		XMLWriter xmlWriter = new XMLWriter(new FileOutputStream(\n				&quot;src/com/pc/XML8.xml&quot;), outputFormat);\n		xmlWriter.write(document);\n		xmlWriter.close();\n	}\n\n	// xpath技术，跨层读取某个元素\n	public static void readByXPath(Document document) throws Exception {\n		// 取出第一个学生\n		Element student = (Element) document.selectSingleNode(&quot;/班级/学生[1]&quot;);\n		System.out.println(&quot;姓名：&quot; + student.elementText(&quot;名字&quot;) + &quot;\\t年龄：&quot;\n				+ student.elementText(&quot;年龄&quot;) + &quot;\\t介绍：&quot;\n				+ student.elementText(&quot;介绍&quot;) + &quot;\\t性别：&quot;\n				+ student.attributeValue(&quot;性别&quot;));\n	}\n\n	// 读取指定的某个元素(读取第一个学生的信息)\n	public static void read(Document document) throws Exception {\n		// 得到根元素\n		Element root = document.getRootElement();\n		// root.elements(&quot;学生&quot;); 取出root元素下的所有学生元素\n		// root.element(&quot;学生&quot;); 取出root元素下的第一个学生元素\n		// 取出root元素下的第一个学生元素\n		Element student = (Element) root.elements(&quot;学生&quot;).get(0);\n		System.out.println(&quot;姓名：&quot; + student.elementText(&quot;名字&quot;) + &quot;\\t年龄：&quot;\n				+ student.elementText(&quot;年龄&quot;) + &quot;\\t介绍：&quot;\n				+ student.elementText(&quot;介绍&quot;) + &quot;\\t性别：&quot;\n				+ student.attributeValue(&quot;性别&quot;));\n	}\n\n	// 遍历xml文件\n	public static void list(Element element) {\n		System.out.println(&quot;元素名称：&quot; + element.getName() + &quot;\\t元素内容：&quot;\n				+ element.getTextTrim());\n\n		Iterator&lt;Element&gt; iterator = element.elementIterator();\n\n		while (iterator.hasNext()) {\n			Element e = iterator.next();\n			// 递归\n			list(e);\n		}\n	}\n}</pre><br>\n   \n', '2016-04-16 01:21:12', '0');
INSERT INTO `article` VALUES ('10049', '10003', 'MyEclipse搭建SSH框架Struts2.1+Spring3.0+hibernate3.3', '\n<p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">1、&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 配置Tomcat</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\"><img src=\"http://static.open-open.com/lib/uploadImg/20141221/20141221161825_30.png\" alt=\"MyEclipse搭建SSH框架 Struts2.1+Spring3.0+hibernate3.3\" height=\"166\" width=\"463\" style=\"box-sizing: border-box; border: 0px; vertical-align: middle; cursor: pointer;\"></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">配置Tomcat所在路径</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\"><img src=\"http://static.open-open.com/lib/uploadImg/20141221/20141221161825_556.png\" alt=\"MyEclipse搭建SSH框架 Struts2.1+Spring3.0+hibernate3.3\" height=\"461\" width=\"727\" style=\"box-sizing: border-box; border: 0px; vertical-align: middle; cursor: pointer;\"></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">配置Tomcat使用JDK版本</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\"><img src=\"http://static.open-open.com/lib/uploadImg/20141221/20141221161825_322.png\" alt=\"MyEclipse搭建SSH框架 Struts2.1+Spring3.0+hibernate3.3\" height=\"510\" width=\"798\" style=\"box-sizing: border-box; border: 0px; vertical-align: middle; cursor: pointer;\"></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">如果Tomcat为7.0则添加Tomcat-juli.jar包</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\"><img src=\"http://static.open-open.com/lib/uploadImg/20141221/20141221161825_88.png\" alt=\"MyEclipse搭建SSH框架 Struts2.1+Spring3.0+hibernate3.3\" height=\"510\" width=\"798\" style=\"box-sizing: border-box; border: 0px; vertical-align: middle; cursor: pointer;\"></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">2、&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; new一个web project。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\"><img src=\"http://static.open-open.com/lib/uploadImg/20141221/20141221161825_926.png\" alt=\"MyEclipse搭建SSH框架 Struts2.1+Spring3.0+hibernate3.3\" height=\"605\" width=\"525\" style=\"box-sizing: border-box; border: 0px; vertical-align: middle; cursor: pointer;\"></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">2、右键项目，为项目添加Struts支持。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">&nbsp;<img src=\"http://static.open-open.com/lib/uploadImg/20141221/20141221161825_256.png\" alt=\"MyEclipse搭建SSH框架 Struts2.1+Spring3.0+hibernate3.3\" height=\"672\" width=\"769\" style=\"box-sizing: border-box; border: 0px; vertical-align: middle; cursor: pointer;\"><img src=\"http://static.open-open.com/lib/uploadImg/20141221/20141221161825_853.png\" alt=\"MyEclipse搭建SSH框架 Struts2.1+Spring3.0+hibernate3.3\" height=\"589\" width=\"625\" style=\"box-sizing: border-box; border: 0px; vertical-align: middle; cursor: pointer;\"><img src=\"http://static.open-open.com/lib/uploadImg/20141221/20141221161825_224.png\" alt=\"MyEclipse搭建SSH框架 Struts2.1+Spring3.0+hibernate3.3\" height=\"589\" width=\"625\" style=\"box-sizing: border-box; border: 0px; vertical-align: middle; cursor: pointer;\"></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">点击Finish。src目录下多了struts.xml配置文件。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">&nbsp;<img src=\"http://static.open-open.com/lib/uploadImg/20141221/20141221161825_808.png\" alt=\"MyEclipse搭建SSH框架 Struts2.1+Spring3.0+hibernate3.3\" height=\"197\" width=\"404\" style=\"box-sizing: border-box; border: 0px; vertical-align: middle; cursor: pointer;\"></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">3、使用MyEclipse DataBase Explorer建立数据源。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">&nbsp;<img src=\"http://static.open-open.com/lib/uploadImg/20141221/20141221161825_67.png\" alt=\"MyEclipse搭建SSH框架 Struts2.1+Spring3.0+hibernate3.3\" height=\"325\" width=\"553\" style=\"box-sizing: border-box; border: 0px; vertical-align: middle; cursor: pointer;\"></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">new一个数据源。填入数据源信息。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\"><br></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">&nbsp;<img src=\"http://img.blog.csdn.net/20160330170617582?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\"><span style=\"widows: auto;\"><br></span></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\"><span style=\"widows: auto;\">点击test Driver，如果成功显示：</span></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">&nbsp;<img src=\"http://static.open-open.com/lib/uploadImg/20141221/20141221161825_271.png\" alt=\"MyEclipse搭建SSH框架 Struts2.1+Spring3.0+hibernate3.3\" height=\"152\" width=\"522\" style=\"box-sizing: border-box; border: 0px; vertical-align: middle; cursor: pointer;\"></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">点击OK，点击Finish。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">4、为项目添加Spring支持。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">&nbsp;<img src=\"http://static.open-open.com/lib/uploadImg/20141221/20141221161826_457.png\" alt=\"MyEclipse搭建SSH框架 Struts2.1+Spring3.0+hibernate3.3\" height=\"671\" width=\"763\" style=\"box-sizing: border-box; border: 0px; vertical-align: middle; cursor: pointer;\"></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">选择五个包，之后JAR Library Installation为如下图。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">&nbsp;<img src=\"http://static.open-open.com/lib/uploadImg/20141221/20141221161826_713.png\" alt=\"MyEclipse搭建SSH框架 Struts2.1+Spring3.0+hibernate3.3\" height=\"793\" width=\"580\" style=\"box-sizing: border-box; border: 0px; vertical-align: middle; cursor: pointer;\"></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">点击Next。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">&nbsp;<img src=\"http://static.open-open.com/lib/uploadImg/20141221/20141221161826_708.png\" alt=\"MyEclipse搭建SSH框架 Struts2.1+Spring3.0+hibernate3.3\" height=\"411\" width=\"580\" style=\"box-sizing: border-box; border: 0px; vertical-align: middle; cursor: pointer;\"></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">默认点击Finish。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">5、为项目添加Hibernate支持。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">&nbsp;<img src=\"http://static.open-open.com/lib/uploadImg/20141221/20141221161826_34.png\" alt=\"MyEclipse搭建SSH框架 Struts2.1+Spring3.0+hibernate3.3\" height=\"674\" width=\"792\" style=\"box-sizing: border-box; border: 0px; vertical-align: middle; cursor: pointer;\">&nbsp;</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\"><img src=\"http://static.open-open.com/lib/uploadImg/20141221/20141221161826_661.png\" alt=\"MyEclipse搭建SSH框架 Struts2.1+Spring3.0+hibernate3.3\" height=\"649\" width=\"663\" style=\"box-sizing: border-box; border: 0px; vertical-align: middle; cursor: pointer;\"></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">默认的包，更改JAR Library Installation。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">点击Next。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">&nbsp;<img src=\"http://static.open-open.com/lib/uploadImg/20141221/20141221161826_527.png\" alt=\"MyEclipse搭建SSH框架 Struts2.1+Spring3.0+hibernate3.3\" height=\"446\" width=\"663\" style=\"box-sizing: border-box; border: 0px; vertical-align: middle; cursor: pointer;\"></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">选择是建立Hibernate自己的配置文件，还是合并到Spring的配置文件。选择合并，即更改点选框，点击Next。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">&nbsp;<img src=\"http://static.open-open.com/lib/uploadImg/20141221/20141221161826_903.png\" alt=\"MyEclipse搭建SSH框架 Struts2.1+Spring3.0+hibernate3.3\" height=\"551\" width=\"663\" style=\"box-sizing: border-box; border: 0px; vertical-align: middle; cursor: pointer;\"></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">选择Existing Spring Configration File，点击Next。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">&nbsp;<img src=\"http://static.open-open.com/lib/uploadImg/20141221/20141221161826_457.png\" alt=\"MyEclipse搭建SSH框架 Struts2.1+Spring3.0+hibernate3.3\" height=\"551\" width=\"663\" style=\"box-sizing: border-box; border: 0px; vertical-align: middle; cursor: pointer;\"></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">选择我们刚刚创建的数据源。点击Next。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">&nbsp;<img src=\"http://static.open-open.com/lib/uploadImg/20141221/20141221161826_981.png\" alt=\"MyEclipse搭建SSH框架 Struts2.1+Spring3.0+hibernate3.3\" height=\"359\" width=\"663\" style=\"box-sizing: border-box; border: 0px; vertical-align: middle; cursor: pointer;\"></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">去掉复选框的勾勾，点击Finish。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">6、在配置Tomcat路径下的 server.xml</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">&nbsp;<img src=\"http://static.open-open.com/lib/uploadImg/20141221/20141221161826_177.png\" alt=\"MyEclipse搭建SSH框架 Struts2.1+Spring3.0+hibernate3.3\" height=\"304\" width=\"378\" style=\"box-sizing: border-box; border: 0px; vertical-align: middle; cursor: pointer;\"></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">在Host节点下添加：</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\"><context path=\"/Test\" docbase=\"D:\\Java\\Struts2.1+Spring3.0+hibernate3.3\\WebRoot\" debug=\"0\" privileged=\"true\" style=\"box-sizing: border-box;\"></context></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">7、错误处理：</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">严重: Exception starting filter struts2</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\"><span style=\"box-sizing: border-box; line-height: 25.2px; text-decoration: underline;\">java.lang.ClassNotFoundException</span>: org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">用户文件夹</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">\\AppData\\Local\\Genuitec\\MyEclipse 8.5\\configuration\\org.eclipse.osgi\\bundles\\105\\1\\.cp\\data\\2.1\\core</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">Struts2所有Jar包复制到项目下的WEB-INF/lib文件夹里。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">&nbsp;</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">8、发布项目，此时已经可以访问这个项目的jsp页面了。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">&nbsp;<img src=\"http://static.open-open.com/lib/uploadImg/20141221/20141221161827_574.png\" alt=\"MyEclipse搭建SSH框架 Struts2.1+Spring3.0+hibernate3.3\" height=\"236\" width=\"493\" style=\"box-sizing: border-box; border: 0px; vertical-align: middle; cursor: pointer;\"></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">9、后续工作。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">在web.xml里面加入spring配置与监听如下。</p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\"><context-param style=\"box-sizing: border-box;\"><param-name style=\"box-sizing: border-box;\">contextConfigLocation</param-name>&nbsp;<param-value style=\"box-sizing: border-box;\">/WEB-INF/classes/application*.xml</param-value>&nbsp;&lt; /context-param&gt; &lt; listener&gt;<listener-class style=\"box-sizing: border-box;\">org.springframework.web.context.ContextLoaderListener</listener-class>&nbsp;&lt; /listener&gt; &lt; !—end --&gt;</context-param></p><p style=\"box-sizing: border-box; margin-top: 0px; margin-bottom: 0px; line-height: 26px; font-size: 14px; widows: auto; padding-top: 0px; padding-bottom: 0px; font-family: Arial;\">8、结束。</p>   \n', '2016-04-16 01:21:12', '3');
INSERT INTO `article` VALUES ('10050', '10003', 'XML编程-SAX', '\n\n<h1 style=\"text-align:center\"><span style=\"font-size:18px\">XML<span style=\"font-family:宋体\">编程</span><span style=\"font-family:Calibri\">-SAX</span></span></h1>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Calibri\"></span></span></p>\n<h2>基本概述</h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;SAX<span style=\"font-family:宋体\">，全称</span><span style=\"font-family:Calibri\">Simple&nbsp;API&nbsp;for&nbsp;XML</span><span style=\"font-family:宋体\">，既是一种接口，也是一种软件包。它是一种</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">解析的替代方法。</span><span style=\"font-family:Calibri\">SAX</span><span style=\"font-family:宋体\">不同于</span><span style=\"font-family:Calibri\">DOM</span><span style=\"font-family:宋体\">解析，它逐行扫描文档，一边扫描一边解析。由于应用程序只是在读取数据时检查数据，因此不需要将数据存储在内存中，这对于大型文档的解析是个巨大优势。</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;SAX<span style=\"font-family:宋体\">是一个用于处理</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">事件驱动的“推”模型，虽然它不是</span><span style=\"font-family:Calibri\">W3C</span><span style=\"font-family:宋体\">标准，但它却是一个得到了广泛认可的</span><span style=\"font-family:Calibri\">API</span><span style=\"font-family:宋体\">。</span><span style=\"font-family:Calibri\">SAX</span><span style=\"font-family:宋体\">解析器不像</span><span style=\"font-family:Calibri\">DOM</span><span style=\"font-family:宋体\">那样建立一个完整的文档树，而是在读取文档时激活一系列事件，这些事件被推给事件处理器，然后由事件处理器提供对文档内容的访问。</span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：</span><span style=\"font-family:Calibri\">SAX</span><span style=\"font-family:宋体\">不能够对</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">文件进行修改，删除、添加操作。</span></span></p>\n<p>&nbsp;</p>\n<h3>为什么引入<span style=\"font-family:Calibri\">SAX</span><span style=\"font-family:宋体\">技术？</span></h3>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;DOM<span style=\"font-family:宋体\">技术也是一种非常好的</span><span style=\"font-family:Calibri\">DOM</span><span style=\"font-family:宋体\">解析方案，为什么还会出现</span><span style=\"font-family:Calibri\">SAX</span><span style=\"font-family:宋体\">技术呢？原因很简单，那就是</span><span style=\"font-family:Calibri\">DOM</span><span style=\"font-family:宋体\">是以文档树的结构对</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">进行保存，这就表明是一次性将</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">读入内存，那么这在大型的</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">文件中是不可能的。所以才产生了</span><span style=\"font-family:Calibri\">SAX</span><span style=\"font-family:宋体\">这种扫描解析的技术。</span></p>\n<p>&nbsp;</p>\n<h2>原理图</h2>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160119162135963\" alt=\"\"></div>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Calibri\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Calibri\"></span></span></p>\n<h2>SAX<span style=\"font-family:宋体\">解析机制</span></h2>\n<p>\n<p>&nbsp; &nbsp; SAX<span style=\"font-family:宋体\">解析允许在读取文档的时候，即对文档进行处理，而不必等到整个文档装载完才会文档进行操作。</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;在<span style=\"font-family:Calibri\">Java</span><span style=\"font-family:宋体\">中，通过继承</span><span style=\"font-family:Calibri\">DefaultHandler&nbsp;</span><span style=\"font-family:宋体\">接口，可以开发一个</span><span style=\"font-family:Calibri\">SAX</span><span style=\"font-family:宋体\">解析器。</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;SAX<span style=\"font-family:宋体\">的解析机制和事件监听机制很像，都是等待某一事件触发，然后调用相应方法。</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;SAX<span style=\"font-family:宋体\">解析器的最常用</span><span style=\"font-family:Calibri\">5</span><span style=\"font-family:宋体\">个事件：</span></p>\n<p>1<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">startDocument()</span><span style=\"font-family:宋体\">：这标识着</span><span style=\"font-family:Calibri\">SAX</span><span style=\"font-family:宋体\">解析器扫描到文档开始位置。</span></p>\n<p>2<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">endDocument()</span><span style=\"font-family:宋体\">，这标识着</span><span style=\"font-family:Calibri\">SAX</span><span style=\"font-family:宋体\">解析器扫描到文档的结束位置。</span></p>\n<p>3<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">startElement()</span><span style=\"font-family:宋体\">，这标识着</span><span style=\"font-family:Calibri\">SAX</span><span style=\"font-family:宋体\">解析器扫描到一个元素的开始标签。</span></p>\n<p>4<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">character()</span><span style=\"font-family:宋体\">，这标识着</span><span style=\"font-family:Calibri\">SAX</span><span style=\"font-family:宋体\">解析器扫描到了一些文本，注意它是以</span><span style=\"font-family:Calibri\">char</span><span style=\"font-family:宋体\">数组形式存放的。</span></p>\n<p>5<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">endElement()</span><span style=\"font-family:宋体\">，这标识着</span><span style=\"font-family:Calibri\">SAX</span><span style=\"font-family:宋体\">解析器扫描到了一个元素的结束标签。</span></p>\n<p>&nbsp;</p>\n<h3>事件处理器常用方法参数列表</h3>\n<p>public&nbsp;void&nbsp;startDocument()</p>\n<p>&nbsp;</p>\n<p>public&nbsp;void&nbsp;startElement(String&nbsp;uri,&nbsp;String&nbsp;localName,&nbsp;String&nbsp;qName,Attributes&nbsp;attributes)&nbsp;</p>\n<p><span style=\"color:rgb(255,0,0)\">uri&nbsp;-&nbsp;<span style=\"font-family:宋体\">名称空间&nbsp;</span><span style=\"font-family:Calibri\">URI</span><span style=\"font-family:宋体\">，如果元素没有任何名称空间&nbsp;</span><span style=\"font-family:Calibri\">URI</span><span style=\"font-family:宋体\">，或者没有正在执行名称空间处理，则为空字符串。</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">localName&nbsp;-&nbsp;<span style=\"font-family:宋体\">本地名称（不带前缀），如果没有正在执行名称空间处理，则为空字符串。</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">qName&nbsp;-&nbsp;<span style=\"font-family:宋体\">限定的名称（带有前缀），如果限定的名称不可用，则为空字符串。</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">attributes&nbsp;-&nbsp;<span style=\"font-family:宋体\">附加到元素的属性。如果没有属性，则它将是空的&nbsp;</span><span style=\"font-family:Calibri\">Attributes&nbsp;</span><span style=\"font-family:宋体\">对象。</span></span></p>\n<p>&nbsp;</p>\n<p>public&nbsp;void&nbsp;characters(char[]&nbsp;ch,&nbsp;int&nbsp;start,&nbsp;int&nbsp;length)</p>\n<p><span style=\"color:rgb(255,0,0)\">ch&nbsp;-&nbsp;</span><span style=\"color:rgb(255,0,0)\">文档的所有字符</span><span style=\"color:rgb(255,0,0)\">。</span></p>\n<p><span style=\"color:rgb(255,0,0)\">start&nbsp;-&nbsp;<span style=\"font-family:宋体\">字符数组中的开始位置。</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">length&nbsp;-&nbsp;<span style=\"font-family:宋体\">从字符数组中使用的字符数。&nbsp;</span></span></p>\n<p>&nbsp;</p>\n<p>public&nbsp;void&nbsp;endElement(String&nbsp;uri,&nbsp;String&nbsp;localName,&nbsp;String&nbsp;qName)</p>\n<p><span style=\"color:rgb(255,0,0)\">uri&nbsp;-&nbsp;<span style=\"font-family:宋体\">名称空间&nbsp;</span><span style=\"font-family:Calibri\">URI</span><span style=\"font-family:宋体\">，如果元素没有任何名称空间&nbsp;</span><span style=\"font-family:Calibri\">URI</span><span style=\"font-family:宋体\">，或者没有正在执行名称空间处理，则为空字符串。</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">localName&nbsp;-&nbsp;<span style=\"font-family:宋体\">本地名称（不带前缀），如果没有正在执行名称空间处理，则为空字符串。</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">qName&nbsp;-&nbsp;<span style=\"font-family:宋体\">限定的名称（带有前缀），如果限定的名称不可用，则为空字符串。&nbsp;</span></span></p>\n<p>&nbsp;</p>\n<p>public&nbsp;void&nbsp;endDocument()</p>\n<p>&nbsp;</p>\n<h3>解析方式</h3>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;通过解析器和事件处理器一起使用，可以解析<span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">文档。</span>解析器可以使用<span style=\"font-family:Calibri\">JAXP</span><span style=\"font-family:宋体\">的</span><span style=\"font-family:Calibri\">API</span><span style=\"font-family:宋体\">创建，创建出</span><span style=\"font-family:Calibri\">SAX</span><span style=\"font-family:宋体\">解析器后，就可以指定解析器去解析某个</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">文档。事件处理器由程序员编写，程序员通过事件处理器中方法的参数，就可以很轻松地得到</span><span style=\"font-family:Calibri\">sax</span><span style=\"font-family:宋体\">解析器解析到的数据，从而可以决定如何对数据进行处理。</span></p>\n<p>&nbsp;</p>\n<p>解析步骤</p>\n<p>1<span style=\"font-family:宋体\">、通过调用</span><span style=\"font-family:Calibri\">SAXParserFactory</span><span style=\"font-family:宋体\">的</span><span style=\"font-family:Calibri\">newInstance()</span><span style=\"font-family:宋体\">方法获得</span><span style=\"font-family:Calibri\">Sax</span><span style=\"font-family:宋体\">解析器工厂对象。</span></p>\n<p>2<span style=\"font-family:宋体\">、通过</span><span style=\"font-family:Calibri\">Sax</span><span style=\"font-family:宋体\">解析器工厂对象调用</span><span style=\"font-family:Calibri\">newSAXParser()</span><span style=\"font-family:宋体\">方法获得解析器</span><span style=\"font-family:Calibri\">SAXParser</span><span style=\"font-family:宋体\">对象</span></p>\n<p>3<span style=\"font-family:宋体\">、通过调用解析器对象的</span><span style=\"font-family:Calibri\">parse</span><span style=\"font-family:宋体\">方法将解析器与事件处理器对象关联</span></p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<p>案例：</p>\n<p><strong>XML6.xml</strong></p>\n<pre name=\"code\" class=\"html\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\n&lt;班级 班次=&quot;1班&quot; 编号=&quot;C1&quot;&gt;\n	&lt;学生 地址=&quot;湖南&quot; 学号=&quot;n1&quot; 性别=&quot;男&quot; 授课方式=&quot;面授&quot; 朋友=&quot;n2&quot; 班级编号=&quot;C1&quot;&gt;\n		&lt;名字&gt;张三&lt;/名字&gt;\n		&lt;年龄&gt;20&lt;/年龄&gt;\n		&lt;介绍&gt;不错&lt;/介绍&gt;\n	&lt;/学生&gt;\n	&lt;学生 学号=&quot;n2&quot; 性别=&quot;女&quot; 授课方式=&quot;面授&quot; 朋友=&quot;n1 n3&quot; 班级编号=&quot;C1&quot;&gt;\n		&lt;名字&gt;李四&lt;/名字&gt;\n		&lt;年龄&gt;18&lt;/年龄&gt;\n		&lt;介绍&gt;很好&lt;/介绍&gt;\n	&lt;/学生&gt;\n	&lt;学生 学号=&quot;n3&quot; 性别=&quot;男&quot; 授课方式=&quot;面授&quot; 朋友=&quot;n2&quot; 班级编号=&quot;C1&quot;&gt;\n		&lt;名字&gt;王五&lt;/名字&gt;\n		&lt;年龄&gt;22&lt;/年龄&gt;\n		&lt;介绍&gt;非常好&lt;/介绍&gt;\n	&lt;/学生&gt;\n	&lt;学生 性别=&quot;男&quot;&gt;\n		&lt;名字&gt;小明&lt;/名字&gt;\n		&lt;年龄&gt;30&lt;/年龄&gt;\n		&lt;介绍&gt;好&lt;/介绍&gt;\n	&lt;/学生&gt;\n&lt;/班级&gt;</pre><br>\n<pre name=\"code\" class=\"java\">package com.pc;\nimport javax.xml.parsers.*;\nimport org.xml.sax.Attributes;\nimport org.xml.sax.SAXException;\nimport org.xml.sax.helpers.DefaultHandler;\npublic class XML6{\n	//使用sax技术去解析xml文件\n	public static void main(String[] args) throws Exception, SAXException {\n		// TODO Auto-generated method stub\n		//1.创建SaxParserFactory\n		SAXParserFactory spf=SAXParserFactory.newInstance();\n		//2.创建SaxParser 解析器\n		SAXParser saxParser=spf.newSAXParser();\n		//3 把xml文件和事件处理对象关联\n		saxParser.parse(&quot;src/com/pc/XML6.xml&quot;,new MyDefaultHandler2() );\n	}\n}\n// 只显示学生的名字和年龄\nclass MyDefaultHandler2 extends DefaultHandler{\n	private boolean isName=false;\n	private boolean isAge=false;\n	@Override\n	public void characters(char[] ch, int start, int length)\n			throws SAXException {\n		// TODO Auto-generated method stub\n		String con=new String(ch,start,length);\n		if(!con.trim().equals(&quot;&quot;)&amp;&amp;(isName||isAge)){\n			System.out.println(con);\n		}\n		isName=false;\n		isAge=false;\n		//super.characters(ch, start, length);\n	}\n	@Override\n	public void endDocument() throws SAXException {\n		// TODO Auto-generated method stub\n		super.endDocument();\n	}\n	@Override\n	public void endElement(String uri, String localName, String name)\n			throws SAXException {\n		// TODO Auto-generated method stub\n		super.endElement(uri, localName, name);\n	}\n	@Override\n	public void startDocument() throws SAXException {\n		// TODO Auto-generated method stub\n		super.startDocument();\n	}\n	@Override\n	public void startElement(String uri, String localName, String name,\n			Attributes attributes) throws SAXException {\n		// TODO Auto-generated method stub\n		if(name.equals(&quot;名字&quot;)){\n			this.isName=true;\n		}else if(name.equals(&quot;年龄&quot;)){\n			this.isAge=true;\n		}\n	}\n}\n//定义事件处理类\nclass MyDefaultHandler1 extends DefaultHandler{\n	//发现文档开始\n	@Override\n	public void startDocument() throws SAXException {\n		// TODO Auto-generated method stub\n		System.out.println(&quot;startDocument()&quot;);\n		super.startDocument();\n	}\n	//发现xml文件中的一个元素\n	@Override\n	public void startElement(String uri, String localName, String name,\n			Attributes attributes) throws SAXException {\n		// TODO Auto-generated method stub\n		System.out.println(&quot;元素名称=&quot;+name);	\n	}\n	//发现xml文件中的文本\n	@Override\n	public void characters(char[] ch, int start, int length)\n			throws SAXException {\n		String con=new String(ch,start,length);\n		//显示文本内容:\n		if(!con.trim().equals(&quot;&quot;)){\n			System.out.println(new String(ch,start,length));\n		}\n	}\n	//发现xml文件中一个元素介绍&lt;/xx&gt;\n	@Override\n	public void endElement(String uri, String localName, String name)\n			throws SAXException {\n		// TODO Auto-generated method stub\n		super.endElement(uri, localName, name);\n	}\n	//发现文档结束\n	@Override\n	public void endDocument() throws SAXException {\n		// TODO Auto-generated method stub\n		System.out.println(&quot;endDocument()&quot;);\n		super.endDocument();\n	}\n}</pre><br>\n   \n', '2016-04-16 01:21:12', '0');
INSERT INTO `article` VALUES ('10051', '10003', 'Log4j学习', '\n<p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">在网上搜到这篇博客，分享给大家！学习中ing.........</p><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">日志是应用软件中不可缺少的部分，Apache的开源项目<span class=\"wp_keywordlink\"><a target=\"_blank\" href=\"http://www.codeceo.com/article/log4j-usage.html\" title=\"log4j\" target=\"_blank\" style=\"color: rgb(0, 136, 219); text-decoration: none; cursor: pointer;\">log4j</a></span>是一个功能强大的日志组件,提供方便的日志记录。在apache网站：<a target=\"_blank\" href=\"http://jakarta.apache.org/log4j\" target=\"_blank\" style=\"color: rgb(0, 136, 219); text-decoration: none; cursor: pointer;\">jakarta.apache.org/log4j</a>&nbsp;可以免费下载到Log4j最新版本的软件包。</p><h2 style=\"margin: 30px 0px 14px; padding: 0px 0px 5px; color: rgb(34, 34, 34); border-bottom-color: rgb(238, 238, 238); border-bottom-width: 1px; border-bottom-style: solid; font-size: 18px; font-family: \'microsoft yahei\'; line-height: 25px;\"><a target=\"_blank\" name=\"t0\" style=\"color: rgb(0, 136, 219); cursor: pointer;\"></a>一、入门实例</h2><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">1.新建一个JAva工程，导入包log4j-1.2.17.jar，整个工程最终目录如下</p><p align=\"center\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\"><img src=\"http://static.codeceo.com/images/2015/05/4b08140cb7fc48b1af2646ad4b021735.jpg\" alt=\"\" style=\"margin: 0px auto; padding: 5px; border: 1px solid rgb(230, 230, 230); max-width: 628px; display: block; height: auto;\"></p><p align=\"left\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">2、src同级创建并设置log4j.properties</p><pre class=\"brush: bash; gutter: false; first-line: 1\" style=\"margin: 15px auto; padding: 10px 15px; word-break: break-all; word-wrap: break-word; font-stretch: normal; line-height: 20px; font-family: \'courier new\'; border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); color: rgb(68, 68, 68); background: rgb(251, 251, 251);\"> ### 设置###\nlog4j.rootLogger = debug,stdout,D,E\n\n### 输出信息到控制抬 ###\nlog4j.appender.stdout = org.apache.log4j.ConsoleAppender\nlog4j.appender.stdout.Target = System.out\nlog4j.appender.stdout.layout = org.apache.log4j.PatternLayout\nlog4j.appender.stdout.layout.ConversionPattern = [%-5p] %d{yyyy-MM-dd HH:mm:ss,SSS} method:%l%n%m%n\n\n### 输出DEBUG 级别以上的日志到=E://logs/error.log ###\nlog4j.appender.D = org.apache.log4j.DailyRollingFileAppender\nlog4j.appender.D.File = E://logs/log.log\nlog4j.appender.D.Append = true\nlog4j.appender.D.Threshold = DEBUG \nlog4j.appender.D.layout = org.apache.log4j.PatternLayout\nlog4j.appender.D.layout.ConversionPattern = %-d{yyyy-MM-dd HH:mm:ss}  [ %t:%r ] - [ %p ]  %m%n\n\n### 输出ERROR 级别以上的日志到=E://logs/error.log ###\nlog4j.appender.E = org.apache.log4j.DailyRollingFileAppender\nlog4j.appender.E.File =E://logs/error.log \nlog4j.appender.E.Append = true\nlog4j.appender.E.Threshold = ERROR \nlog4j.appender.E.layout = org.apache.log4j.PatternLayout\nlog4j.appender.E.layout.ConversionPattern = %-d{yyyy-MM-dd HH:mm:ss}  [ %t:%r ] - [ %p ]  %m%n</pre><p align=\"left\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">3、设置日志内容</p><pre class=\"brush: java; gutter: false; first-line: 1\" style=\"margin: 15px auto; padding: 10px 15px; word-break: break-all; word-wrap: break-word; font-stretch: normal; line-height: 20px; font-family: \'courier new\'; border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); color: rgb(68, 68, 68); background: rgb(251, 251, 251);\">package com.mucfc;\nimport org.apache.log4j.Logger;\n/**\n *@author linbingwen\n *@2015年5月18日9:14:21\n */\npublic class Test {\n	private static Logger logger = Logger.getLogger(Test.class);  \n\n    /** \n     * @param args \n     */  \n    public static void main(String[] args) {  \n        // System.out.println(&quot;This is println message.&quot;);  \n\n        // 记录debug级别的信息  \n        logger.debug(&quot;This is debug message.&quot;);  \n        // 记录info级别的信息  \n        logger.info(&quot;This is info message.&quot;);  \n        // 记录error级别的信息  \n        logger.error(&quot;This is error message.&quot;);  \n    }  \n\n}</pre><p align=\"left\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">4、输出结果</p><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">（1）首先是控制台的信息</p><p align=\"center\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\"><img src=\"http://static.codeceo.com/images/2015/05/80700478ec208d187f60107a6a517712.jpg\" alt=\"\" style=\"margin: 0px auto; padding: 5px; border: 1px solid rgb(230, 230, 230); max-width: 628px; display: block; height: auto;\"></p><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">（2）再来看输出的文件</p><p align=\"center\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\"><img src=\"http://static.codeceo.com/images/2015/05/8a57406bc3f02fcd687fce535fc546ee.jpg\" alt=\"\" style=\"margin: 0px auto; padding: 5px; border: 1px solid rgb(230, 230, 230); max-width: 628px; display: block; height: auto;\"></p><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">内容如下，发现已按照要求输出到对应的文档中去了。</p><p align=\"center\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\"><img src=\"http://static.codeceo.com/images/2015/05/e3dc8eb3a3841a2f50dd24567f41b4d5.jpg\" alt=\"\" style=\"margin: 0px auto; padding: 5px; border: 1px solid rgb(230, 230, 230); max-width: 628px; display: block; height: auto;\"></p><p align=\"center\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\"><img src=\"http://static.codeceo.com/images/2015/05/f82057d8ca93b4f23893cc9e204f1a51.jpg\" alt=\"\" style=\"margin: 0px auto; padding: 5px; border: 1px solid rgb(230, 230, 230); max-width: 628px; display: block; height: auto;\"></p><h2 style=\"margin: 30px 0px 14px; padding: 0px 0px 5px; color: rgb(34, 34, 34); border-bottom-color: rgb(238, 238, 238); border-bottom-width: 1px; border-bottom-style: solid; font-size: 18px; font-family: \'microsoft yahei\'; line-height: 25px;\"><a target=\"_blank\" name=\"t1\" style=\"color: rgb(0, 136, 219); cursor: pointer;\"></a>二、Log4j基本使用方法</h2><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">Log4j由三个重要的组件构成：日志信息的优先级，日志信息的输出目的地，日志信息的输出格式。日志信息的优先级从高到低有ERROR、WARN、 INFO、DEBUG，分别用来指定这条日志信息的重要程度；日志信息的输出目的地指定了日志将打印到控制台还是文件中；而输出格式则控制了日志信息的显 示内容。</p><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">2.1、定义配置文件</p><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">其实您也可以完全不使用配置文件，而是在代码中配置Log4j环境。但是，使用配置文件将使您的应用程序更加灵活。Log4j支持两种配置文件格式，一种是XML格式的文件，一种是Java特性文件（键=值）。下面我们介绍使用Java特性文件做为配置文件的方法：<br>1.配置根Logger，其语法为：</p><pre class=\"brush: java; gutter: false; first-line: 1\" style=\"margin: 15px auto; padding: 10px 15px; word-break: break-all; word-wrap: break-word; font-stretch: normal; line-height: 20px; font-family: \'courier new\'; border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); color: rgb(68, 68, 68); background: rgb(251, 251, 251);\">log4j.rootLogger = [ level ] , appenderName, appenderName, …</pre><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">其中，level 是日志记录的优先级，分为OFF、FATAL、ERROR、WARN、INFO、DEBUG、ALL或者您定义的级别。Log4j建议只使用四个级别，优 先级从高到低分别是ERROR、WARN、INFO、DEBUG。通过在这里定义的级别，您可以控制到应用程序中相应级别的日志信息的开关。比如在这里定 义了INFO级别，则应用程序中所有DEBUG级别的日志信息将不被打印出来。 appenderName就是指B日志信息输出到哪个地方。您可以同时指定多个输出目的地。</p><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">2.配置日志信息输出目的地Appender，其语法为：</p><pre class=\"brush: java; gutter: false; first-line: 1\" style=\"margin: 15px auto; padding: 10px 15px; word-break: break-all; word-wrap: break-word; font-stretch: normal; line-height: 20px; font-family: \'courier new\'; border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); color: rgb(68, 68, 68); background: rgb(251, 251, 251);\">log4j.appender.appenderName = fully.qualified.name.of.appender.class  \nlog4j.appender.appenderName.option1 = value1  \n…  \nlog4j.appender.appenderName.option = valueN</pre><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">其中，Log4j提供的appender有以下几种：</p><pre class=\"brush: java; gutter: false; first-line: 1\" style=\"margin: 15px auto; padding: 10px 15px; word-break: break-all; word-wrap: break-word; font-stretch: normal; line-height: 20px; font-family: \'courier new\'; border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); color: rgb(68, 68, 68); background: rgb(251, 251, 251);\">org.apache.log4j.ConsoleAppender（控制台），  \norg.apache.log4j.FileAppender（文件），  \norg.apache.log4j.DailyRollingFileAppender（每天产生一个日志文件），  \norg.apache.log4j.RollingFileAppender（文件大小到达指定尺寸的时候产生一个新的文件），  \norg.apache.log4j.WriterAppender（将日志信息以流格式发送到任意指定的地方）</pre><p align=\"left\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">3.配置日志信息的格式（布局），其语法为：</p><pre class=\"brush: java; gutter: false; first-line: 1\" style=\"margin: 15px auto; padding: 10px 15px; word-break: break-all; word-wrap: break-word; font-stretch: normal; line-height: 20px; font-family: \'courier new\'; border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); color: rgb(68, 68, 68); background: rgb(251, 251, 251);\">log4j.appender.appenderName.layout = fully.qualified.name.of.layout.class  \nlog4j.appender.appenderName.layout.option1 = value1  \n…  \nlog4j.appender.appenderName.layout.option = valueN</pre><p align=\"left\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">其中，Log4j提供的layout有以e几种：</p><pre class=\"brush: java; gutter: false; first-line: 1\" style=\"margin: 15px auto; padding: 10px 15px; word-break: break-all; word-wrap: break-word; font-stretch: normal; line-height: 20px; font-family: \'courier new\'; border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); color: rgb(68, 68, 68); background: rgb(251, 251, 251);\">org.apache.log4j.HTMLLayout（以HTML表格形式布局），  \norg.apache.log4j.PatternLayout（可以灵活地指定布局模式），  \norg.apache.log4j.SimpleLayout（包含日志信息的级别和信息字符串），  \norg.apache.log4j.TTCCLayout（包含日志产生的时间、线程、类别等等信息）</pre><p align=\"left\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">Log4J采用类似C语言中的printf函数的打印格式格式化日志信息，打印参数如下： %m 输出代码中指定的消息</p><pre class=\"brush: bash; gutter: false; first-line: 1\" style=\"margin: 15px auto; padding: 10px 15px; word-break: break-all; word-wrap: break-word; font-stretch: normal; line-height: 20px; font-family: \'courier new\'; border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); color: rgb(68, 68, 68); background: rgb(251, 251, 251);\">%p 输出优先级，即DEBUG，INFO，WARN，ERROR，FATAL  \n%r 输出自应用启动到输出该log信息耗费的毫秒数  \n%c 输出所属的类目，通常就是所在类的全名  \n%t 输出产生该日志事件的线程名  \n%n 输出一个回车换行符，Windows平台为“rn”，Unix平台为“n”  \n%d 输出日志时间点的日期或时间，默认格式为ISO8601，也可以在其后指定格式，比如：%d{yyy MMM dd HH:mm:ss,SSS}，输出类似：2002年10月18日 22：10：28，921  \n%l 输出日志事件的发生位置，包括类目名、发生的线程，以及在代码中的行数。举例：Testlog4.main(TestLog4.java:10)</pre><p align=\"left\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">2.2、在代码中使用Log4j</p><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">1.得到记录器</p><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">使用Log4j，第一步就是获取日志记录器，这个记录器将负责控制日志信息。其语法为：</p><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">public static Logger getLogger( String name)</p><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">通过指定的名字获得记录器，如果必要的话，则为这个名字创建一个新的记录器。Name一般取本类的名字，比如：</p><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">static Logger logger = Logger.getLogger ( ServerWithLog4j.class.getName () )</p><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">2.读取配置文件</p><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">当获得了日志记录器之后，第二步将配置Log4j环境，其语法为：</p><pre class=\"brush: java; gutter: false; first-line: 1\" style=\"margin: 15px auto; padding: 10px 15px; word-break: break-all; word-wrap: break-word; font-stretch: normal; line-height: 20px; font-family: \'courier new\'; border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); color: rgb(68, 68, 68); background: rgb(251, 251, 251);\">BasicConfigurator.configure ()： 自动快速地使用缺省Log4j环境。  \nPropertyConfigurator.configure ( String configFilename) ：读取使用Java的特性文件编写的配置文件。  \nDOMConfigurator.configure ( String filename ) ：读取XML形式的配置文件。</pre><p align=\"left\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">3.插入记录信息（格式化日志信息）</p><p align=\"left\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">当上两个必要步骤执行完毕，您就可以轻松地使用不同优先级别的日志记录语句插入到您想记录日志的任何地方，其语法如下：</p><pre class=\"brush: java; gutter: false; first-line: 1\" style=\"margin: 15px auto; padding: 10px 15px; word-break: break-all; word-wrap: break-word; font-stretch: normal; line-height: 20px; font-family: \'courier new\'; border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); color: rgb(68, 68, 68); background: rgb(251, 251, 251);\">Logger.debug ( Object message ) ;  \nLogger.info ( Object message ) ;  \nLogger.warn ( Object message ) ;  \nLogger.error ( Object message ) ;</pre><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">2.3、日志级别</p><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">每个Logger都被了一个日志级别（log level），用来控制日志信息的输出。日志级别从高到低分为：<br>A：off 最高等级，用于关闭所有日志记录。<br>B：fatal 指出每个严重的错误事件将会导致应用程序的退出。<br>C：error 指出虽然发生错误事件，但仍然不影响系统的继续运行。<br>D：warm 表明会出现潜在的错误情形。<br>E：info 一般和在粗粒度级别上，强调应用程序的运行全程。<br>F：debug 一般用于细粒度级别上，对调试应用程序非常有帮助。<br>G：all 最低等级，用于打开所有日志记录。</p><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">上面这些级别是定义在org.apache.log4j.Level类中。Log4j只建议使用4个级别，优先级从高到低分别是error,warn,info和debug。通过使用日志级别，可以控制应用程序中相应级别日志信息的输出。例如，如果使用b了info级别，则应用程序中所有低于info级别的日志信息(如debug)将不会被打印出来。</p><h2 style=\"margin: 30px 0px 14px; padding: 0px 0px 5px; color: rgb(34, 34, 34); border-bottom-color: rgb(238, 238, 238); border-bottom-width: 1px; border-bottom-style: solid; font-size: 18px; font-family: \'microsoft yahei\'; line-height: 25px;\"><a target=\"_blank\" name=\"t2\" style=\"color: rgb(0, 136, 219); cursor: pointer;\"></a>三、Web项目中使用Log4j实例</h2><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">上面代码描述了Log4j的简单应用，其实使用Log4j也就是这样简单方便。当然除了上面的配置方法，还有其它，比如做一个J2EE应用，在J2EE应用使用Log4j，必须先在启动服务时加载Log4j的配置文件进行初始化，可以在web.xml中进行。</p><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">1、web应用的log4j使用基本上都采用：新建一个servlet，这个servlet在init函数中为log4j执行配置。一般就是读入配置文件。所以需要在web.xml中为这个servlet配置，同时设定load-on-startup为1。</p><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">2、这个servlet配置log4j就是读出配置文件，然后调用configure函数。这里有两个问题：一、需要知道文件在哪里；二、需要正确的文件类型</p><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">3、配置文件位置在web.xml中配置一个param即可，路径一般是相对于web的root目录</p><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">4、文件类型一般有两种，一个是Java的property文件，另一种是xml文件</p><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">配置文件的大致内容：log4j可以指定输出的log级别的最低等级，以及log的输出配置格式，每个log可以指定多个输出方式</p><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">（1）创建Web工程，整个工程最后目录如下</p><p align=\"center\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\"><img src=\"http://static.codeceo.com/images/2015/05/dc9759d134b8237d1feae57140377351.jpg\" alt=\"\" style=\"margin: 0px auto; padding: 5px; border: 1px solid rgb(230, 230, 230); max-width: 628px; display: block; height: auto;\"></p><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">（2）web.xml配置如下：</p><pre class=\"brush: xml; gutter: false; first-line: 1\" style=\"margin: 15px auto; padding: 10px 15px; word-break: break-all; word-wrap: break-word; font-stretch: normal; line-height: 20px; font-family: \'courier new\'; border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); color: rgb(68, 68, 68); background: rgb(251, 251, 251);\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;  \n&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;  \n    xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;  \n    xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;  \n    id=&quot;WebApp_ID&quot; version=&quot;3.0&quot;&gt;  \n    &lt;display-name&gt;LogLearning&lt;/display-name&gt;  \n\n    &lt;servlet&gt;  \n        &lt;servlet-name&gt;Log4JTestServlet&lt;/servlet-name&gt;  \n        &lt;servlet-class&gt;com.mucfc.Log4JTestServlet&lt;/servlet-class&gt;  \n    &lt;/servlet&gt;  \n\n    &lt;!--用来启动 log4jConfigLocation的servlet --&gt;  \n    &lt;servlet&gt;  \n        &lt;servlet-name&gt;Log4JInitServlet&lt;/servlet-name&gt;  \n        &lt;servlet-class&gt;com.mucfc.Log4JInitServlet&lt;/servlet-class&gt;  \n        &lt;init-param&gt;  \n            &lt;param-name&gt;log4j-properties-location&lt;/param-name&gt;  \n            &lt;param-value&gt;/WEB-INF/classes/log4j.properties&lt;/param-value&gt;  \n        &lt;/init-param&gt;  \n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;  \n    &lt;/servlet&gt;  \n\n    &lt;servlet-mapping&gt;  \n        &lt;servlet-name&gt;Log4JTestServlet&lt;/servlet-name&gt;  \n        &lt;url-pattern&gt;/test&lt;/url-pattern&gt;  \n    &lt;/servlet-mapping&gt;  \n\n&lt;/web-app&gt;</pre><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">（3）配置文件log4j.properties</p><pre class=\"brush: bash; gutter: false; first-line: 1\" style=\"margin: 15px auto; padding: 10px 15px; word-break: break-all; word-wrap: break-word; font-stretch: normal; line-height: 20px; font-family: \'courier new\'; border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); color: rgb(68, 68, 68); background: rgb(251, 251, 251);\"> ### set log levels ###  \nlog4j.rootLogger = debug,stdout,D,E  \n\nlog4j.appender.stdout = org.apache.log4j.ConsoleAppender  \nlog4j.appender.stdout.Target = System.out  \nlog4j.appender.stdout.layout = org.apache.log4j.PatternLayout  \nlog4j.appender.stdout.layout.ConversionPattern = [%-5p] %d{yyyy-MM-dd HH:mm:ss,SSS} method:%l%n%m%n  \n\nlog4j.appender.D = org.apache.log4j.DailyRollingFileAppender  \nlog4j.appender.D.File = F://logs/log.log  \nlog4j.appender.D.Append = true  \nlog4j.appender.D.Threshold = DEBUG   \nlog4j.appender.D.layout = org.apache.log4j.PatternLayout  \nlog4j.appender.D.layout.ConversionPattern = %-d{yyyy-MM-dd HH:mm:ss}  [ %t:%r ] - [ %p ]  %m%n  \n\nlog4j.appender.E = org.apache.log4j.DailyRollingFileAppender  \nlog4j.appender.E.File =F://logs/error.log   \nlog4j.appender.E.Append = true  \nlog4j.appender.E.Threshold = ERROR   \nlog4j.appender.E.layout = org.apache.log4j.PatternLayout  \nlog4j.appender.E.layout.ConversionPattern = %-d{yyyy-MM-dd HH:mm:ss}  [ %t:%r ] - [ %p ]  %m%n</pre><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">（4）web容器一来就初始化的servlet</p><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">Log4JInitServlet.java</p><pre class=\"brush: java; gutter: false; first-line: 1\" style=\"margin: 15px auto; padding: 10px 15px; word-break: break-all; word-wrap: break-word; font-stretch: normal; line-height: 20px; font-family: \'courier new\'; border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); color: rgb(68, 68, 68); background: rgb(251, 251, 251);\">package com.mucfc;  \n\nimport java.io.File;  \nimport java.io.IOException;  \n\nimport javax.servlet.ServletConfig;  \nimport javax.servlet.ServletContext;  \nimport javax.servlet.ServletException;  \nimport javax.servlet.annotation.WebServlet;  \nimport javax.servlet.http.HttpServlet;  \nimport javax.servlet.http.HttpServletRequest;  \nimport javax.servlet.http.HttpServletResponse;  \n\nimport org.apache.log4j.BasicConfigurator;  \nimport org.apache.log4j.PropertyConfigurator;  \n\n/** \n * Servlet implementation class Log4JInitServlet \n */  \n@WebServlet(&quot;/Log4JInitServlet&quot;)  \npublic class Log4JInitServlet extends HttpServlet {  \n    private static final long serialVersionUID = 1L;  \n\n    /** \n     * @see HttpServlet#HttpServlet() \n     */  \n    public Log4JInitServlet() {  \n        super();  \n        // TODO Auto-generated constructor stub  \n    }  \n\n    /** \n     * @see Servlet#init(ServletConfig) \n     */  \n    public void init(ServletConfig config) throws ServletException {  \n        System.out.println(&quot;Log4JInitServlet 正在初始化 log4j日志设置信息&quot;);  \n        String log4jLocation = config.getInitParameter(&quot;log4j-properties-location&quot;);  \n\n        ServletContext sc = config.getServletContext();  \n\n        if (log4jLocation == null) {  \n            System.err.println(&quot;*** 没有 log4j-properties-location 初始化的文件, 所以使用 BasicConfigurator初始化&quot;);  \n            BasicConfigurator.configure();  \n        } else {  \n            String webAppPath = sc.getRealPath(&quot;/&quot;);  \n            String log4jProp = webAppPath + log4jLocation;  \n            File yoMamaYesThisSaysYoMama = new File(log4jProp);  \n            if (yoMamaYesThisSaysYoMama.exists()) {  \n                System.out.println(&quot;使用: &quot; + log4jProp+&quot;初始化日志设置信息&quot;);  \n                PropertyConfigurator.configure(log4jProp);  \n            } else {  \n                System.err.println(&quot;*** &quot; + log4jProp + &quot; 文件没有找到， 所以使用 BasicConfigurator初始化&quot;);  \n                BasicConfigurator.configure();  \n            }  \n        }  \n        super.init(config);  \n    }  \n\n    /** \n     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response) \n     */  \n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {  \n        // TODO Auto-generated method stub  \n    }  \n\n    /** \n     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response) \n     */  \n    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {  \n        // TODO Auto-generated method stub  \n    }  \n\n}</pre><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">调用日志Log4JTestServlet,java</p><pre class=\"brush: java; gutter: false; first-line: 1\" style=\"margin: 15px auto; padding: 10px 15px; word-break: break-all; word-wrap: break-word; font-stretch: normal; line-height: 20px; font-family: \'courier new\'; border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); color: rgb(68, 68, 68); background: rgb(251, 251, 251);\">package com.mucfc;  \n\nimport java.io.IOException;  \n\nimport javax.servlet.ServletConfig;  \nimport javax.servlet.ServletException;  \nimport javax.servlet.annotation.WebServlet;  \nimport javax.servlet.http.HttpServlet;  \nimport javax.servlet.http.HttpServletRequest;  \nimport javax.servlet.http.HttpServletResponse;  \n\nimport org.apache.log4j.Logger;  \n\n/** \n * Servlet implementation class Log4JTestServlet \n */  \n@WebServlet(&quot;/Log4JTestServlet&quot;)  \npublic class Log4JTestServlet extends HttpServlet {  \n    private static final long serialVersionUID = 1L;  \n    private static Logger logger = Logger.getLogger(Log4JTestServlet.class);    \n\n    /** \n     * @see HttpServlet#HttpServlet() \n     */  \n    public Log4JTestServlet() {  \n        super();  \n        // TODO Auto-generated constructor stub  \n    }  \n\n    /** \n     * @see Servlet#init(ServletConfig) \n     */  \n    public void init(ServletConfig config) throws ServletException {  \n        // TODO Auto-generated method stub  \n    }  \n\n    /** \n     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response) \n     */  \n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {  \n        // 记录debug级别的信息    \n        logger.debug(&quot;This is debug message.&quot;);    \n        // 记录info级别的信息    \n        logger.info(&quot;This is info message.&quot;);    \n        // 记录error级别的信息    \n        logger.error(&quot;This is error message.&quot;);    \n    }  \n\n    /** \n     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response) \n     */  \n    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {  \n        doGet(request,response);  \n    }  \n\n}</pre><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">接下来就是运行了，来看看结果：</p><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\"><img src=\"http://static.codeceo.com/images/2015/05/9c5741445b9699c26a97f8c1c909d6e9.jpg\" alt=\"\" width=\"907\" height=\"368\" style=\"margin: 0px auto; padding: 5px; border: 1px solid rgb(230, 230, 230); max-width: 628px; display: block; height: auto;\"></p><p style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">输出结果：</p><p align=\"center\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\"><img src=\"http://static.codeceo.com/images/2015/05/cda300d256cc7be31f2196070f28e775.jpg\" alt=\"\" style=\"margin: 0px auto; padding: 5px; border: 1px solid rgb(230, 230, 230); max-width: 628px; display: block; height: auto;\"></p><p align=\"center\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\"><img src=\"http://static.codeceo.com/images/2015/05/129d046f88ac0d40ed573abb4a455023.jpg\" alt=\"\" style=\"margin: 0px auto; padding: 5px; border: 1px solid rgb(230, 230, 230); max-width: 628px; display: block; height: auto;\"></p><p align=\"center\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\"><img src=\"http://static.codeceo.com/images/2015/05/36d1f614028b3b9c834a92ff2b6db9c6.jpg\" alt=\"\" style=\"margin: 0px auto; padding: 5px; border: 1px solid rgb(230, 230, 230); max-width: 628px; display: block; height: auto;\"></p><h2 align=\"left\" style=\"margin: 30px 0px 14px; padding: 0px 0px 5px; color: rgb(34, 34, 34); border-bottom-color: rgb(238, 238, 238); border-bottom-width: 1px; border-bottom-style: solid; font-size: 18px; font-family: \'microsoft yahei\'; line-height: 25px;\"><a target=\"_blank\" name=\"t3\" style=\"color: rgb(0, 136, 219); cursor: pointer;\"></a>四、Spring中使用Log4j</h2><p align=\"left\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">这里要实现web项目中利用Spring来使用Log4j</p><p align=\"center\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\"><img src=\"http://static.codeceo.com/images/2015/05/ff4d4c9afff8e734428b1701f6cc7c48.jpg\" alt=\"\" style=\"margin: 0px auto; padding: 5px; border: 1px solid rgb(230, 230, 230); max-width: 628px; display: block; height: auto;\"></p><p align=\"left\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">（1）接上面的工程，然后再导入Spring的包</p><p align=\"left\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">（2）web.xml增加</p><pre class=\"brush: xml; gutter: false; first-line: 1\" style=\"margin: 15px auto; padding: 10px 15px; word-break: break-all; word-wrap: break-word; font-stretch: normal; line-height: 20px; font-family: \'courier new\'; border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); color: rgb(68, 68, 68); background: rgb(251, 251, 251);\">&lt;!-- 设置根目录 --&gt;  \n   &lt;context-param&gt;    \n       &lt;param-name&gt;webAppRootKey&lt;/param-name&gt;    \n       &lt;param-value&gt;webapp.root&lt;/param-value&gt;    \n   &lt;/context-param&gt;    \n\n   &lt;context-param&gt;  \n    &lt;param-name&gt;log4jConfigLocation&lt;/param-name&gt;  \n    &lt;param-value&gt;/WEB-INF/classes/log4j.properties&lt;/param-value&gt;  \n&lt;/context-param&gt;  \n&lt;!-- 3000表示 开一条watchdog线程每60秒扫描一下配置文件的变化;这样便于日志存放位置的改变 --&gt;  \n&lt;context-param&gt;    \n        &lt;param-name&gt;log4jRefreshInterval&lt;/param-name&gt;    \n        &lt;param-value&gt;3000&lt;/param-value&gt;    \n   &lt;/context-param&gt;   \n&lt;listener&gt;  \n    &lt;listener-class&gt;org.springframework.web.util.Log4jConfigListener&lt;/listener-class&gt;  \n&lt;/listener&gt;</pre><p align=\"left\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">整个内容如下：</p><pre class=\"brush: xml; gutter: false; first-line: 1\" style=\"margin: 15px auto; padding: 10px 15px; word-break: break-all; word-wrap: break-word; font-stretch: normal; line-height: 20px; font-family: \'courier new\'; border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); color: rgb(68, 68, 68); background: rgb(251, 251, 251);\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;  \n&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;  \n    xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;  \n    xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;  \n    id=&quot;WebApp_ID&quot; version=&quot;3.0&quot;&gt;  \n    &lt;display-name&gt;LogLearning&lt;/display-name&gt;  \n\n    &lt;servlet&gt;  \n        &lt;servlet-name&gt;Log4JTestServlet&lt;/servlet-name&gt;  \n        &lt;servlet-class&gt;com.mucfc.Log4JTestServlet&lt;/servlet-class&gt;  \n    &lt;/servlet&gt;  \n\n    &lt;!--用来启动 log4jConfigLocation的servlet --&gt;  \n&lt;!--     &lt;servlet&gt;  \n        &lt;servlet-name&gt;Log4JInitServlet&lt;/servlet-name&gt;  \n        &lt;servlet-class&gt;com.mucfc.Log4JInitServlet&lt;/servlet-class&gt;  \n        &lt;init-param&gt;  \n            &lt;param-name&gt;log4j-properties-location&lt;/param-name&gt;  \n            &lt;param-value&gt;/WEB-INF/classes/log4j.properties&lt;/param-value&gt;  \n        &lt;/init-param&gt;  \n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;  \n    &lt;/servlet&gt;--&gt;  \n\n    &lt;servlet-mapping&gt;  \n        &lt;servlet-name&gt;Log4JTestServlet&lt;/servlet-name&gt;  \n        &lt;url-pattern&gt;/test&lt;/url-pattern&gt;  \n    &lt;/servlet-mapping&gt;   \n\n        &lt;!-- Spring 容器加载 --&gt;  \n    &lt;listener&gt;  \n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;  \n    &lt;/listener&gt;  \n    &lt;context-param&gt;  \n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;  \n        &lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;  \n    &lt;/context-param&gt;   \n\n    &lt;!-- 设置根目录 --&gt;  \n    &lt;context-param&gt;    \n        &lt;param-name&gt;webAppRootKey&lt;/param-name&gt;    \n        &lt;param-value&gt;webapp.root&lt;/param-value&gt;    \n    &lt;/context-param&gt;    \n\n    &lt;context-param&gt;  \n        &lt;param-name&gt;log4jConfigLocation&lt;/param-name&gt;  \n        &lt;param-value&gt;/WEB-INF/classes/log4j.properties&lt;/param-value&gt;  \n    &lt;/context-param&gt;  \n    &lt;!-- 3000表示 开一条watchdog线程每60秒扫描一下配置文件的变化;这样便于日志存放位置的改变 --&gt;  \n    &lt;context-param&gt;    \n         &lt;param-name&gt;log4jRefreshInterval&lt;/param-name&gt;    \n         &lt;param-value&gt;3000&lt;/param-value&gt;    \n    &lt;/context-param&gt;   \n    &lt;listener&gt;  \n        &lt;listener-class&gt;org.springframework.web.util.Log4jConfigListener&lt;/listener-class&gt;  \n    &lt;/listener&gt;   \n\n&lt;/web-app&gt;</pre><p align=\"left\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">这里Log4JInitServlet.java就相当于没用到了。</p><p align=\"left\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">（2）applicationContext.xml</p><p align=\"left\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">没有内容：</p><pre class=\"brush: xml; gutter: false; first-line: 1\" style=\"margin: 15px auto; padding: 10px 15px; word-break: break-all; word-wrap: break-word; font-stretch: normal; line-height: 20px; font-family: \'courier new\'; border-width: 1px 1px 1px 4px; border-style: solid; border-color: rgb(221, 221, 221); color: rgb(68, 68, 68); background: rgb(251, 251, 251);\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;  \n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;  \n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot;  \n    xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;  \n    xsi:schemaLocation=&quot;    \n\nhttp://www.springframework.org/schema/beans\n\n\nhttp://www.springframework.org/schema/beans/spring-beans-3.2.xsd\n\n\nhttp://www.springframework.org/schema/aop\n\n\nhttp://www.springframework.org/schema/aop/spring-aop-3.2.xsd\n\n\nhttp://www.springframework.org/schema/context\n\n           http://www.springframework.org/schema/context/spring-context-3.2.xsd&quot;&gt;  \n&lt;/beans&gt;</pre><p align=\"left\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">（3）这样日志就跟随Spring窗口启动而启动了</p><p align=\"left\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">程序一运行，就会自动把日志打印</p><p align=\"center\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\"><img src=\"http://static.codeceo.com/images/2015/05/d5473d7389b204f91a8c81da4fe18843.jpg\" alt=\"\" style=\"margin: 0px auto; padding: 5px; border: 1px solid rgb(230, 230, 230); max-width: 628px; display: block; height: auto;\"></p><p align=\"left\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">log.log</p><p align=\"center\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\"><img src=\"http://static.codeceo.com/images/2015/05/57b2bda5414cd421ea65ee5da09de2fd.jpg\" alt=\"\" style=\"margin: 0px auto; padding: 5px; border: 1px solid rgb(230, 230, 230); max-width: 628px; display: block; height: auto;\"></p><p align=\"left\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">error.log为空，因为它只打印error级别以上的信息</p><p align=\"left\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">浏览器输入http://localhost:8080/LogLearning2/test</p><p align=\"center\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\"><img src=\"http://static.codeceo.com/images/2015/05/e66c1d45278a9ac19fe37ab91c3b21c2.jpg\" alt=\"\" style=\"margin: 0px auto; padding: 5px; border: 1px solid rgb(230, 230, 230); max-width: 628px; display: block; height: auto;\"></p><p align=\"left\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\">然后打开文件</p><p align=\"center\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\"><img src=\"http://static.codeceo.com/images/2015/05/5107e6f30ef1c81cd3be210095780f15.jpg\" alt=\"\" style=\"margin: 0px auto; padding: 5px; border: 1px solid rgb(230, 230, 230); max-width: 628px; display: block; height: auto;\"></p><p align=\"center\" style=\"margin-top: 0px; margin-bottom: 15px; padding-top: 0px; padding-bottom: 0px; color: rgb(68, 68, 68); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 25px;\"><img src=\"http://static.codeceo.com/images/2015/05/0603b30d871c140b429a52c79adfae1a.jpg\" alt=\"\" style=\"margin: 0px auto; padding: 5px; border: 1px solid rgb(230, 230, 230); max-width: 628px; display: block; height: auto;\"></p>   \n', '2016-04-16 01:21:12', '2');
INSERT INTO `article` VALUES ('10052', '10003', 'XML编程-DOM', '\n\n<h1 style=\"text-align:center\"><span style=\"font-size:18px\">XML<span style=\"font-family:宋体\">编程</span><span style=\"font-family:Calibri\">-DOM</span></span></h1>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Calibri\"></span></span></p>\n<h2>XML<span style=\"font-family:宋体\">解析技术</span></h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;xml<span style=\"font-family:宋体\">解析技术常用的有两类：</span><span style=\"font-family:Calibri\">dom</span><span style=\"font-family:宋体\">解析和</span><span style=\"font-family:Calibri\">sax</span><span style=\"font-family:宋体\">解析。</span></p>\n<p>dom<span style=\"font-family:宋体\">：</span><span style=\"font-family:Calibri\">(Document&nbsp;Object&nbsp;Model,&nbsp;</span><span style=\"font-family:宋体\">即文档对象模型</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">是</span><span style=\"font-family:Calibri\">W3C</span><span style=\"font-family:宋体\">组织推荐的处理</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">的一种方式。</span></p>\n<p>sax<span style=\"font-family:宋体\">：</span><span style=\"font-family:Calibri\">(Simple&nbsp;API&nbsp;for&nbsp;XML)</span><span style=\"font-family:宋体\">不是官方标准，但它是</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">社区事实上的标准，几乎所有的</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">解析器都支持它。</span></p>\n<p>&nbsp;</p>\n<h2>Jaxp<span style=\"font-family:宋体\">介绍</span></h2>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;Jaxp(Java&nbsp;API&nbsp;for&nbsp;XML&nbsp;Processing)<span style=\"font-family:宋体\">是</span><span style=\"font-family:Calibri\">Java</span><span style=\"font-family:宋体\">对</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">进行编程的开发包，它由</span><span style=\"font-family:Calibri\">javax.xml</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">org.w3c.dom&nbsp;</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">org.xml.sax&nbsp;</span><span style=\"font-family:宋体\">包及其子包组成。</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;在&nbsp;<span style=\"font-family:Calibri\">javax.xml.parsers</span><span style=\"font-family:宋体\">包中，定义了几个工厂类，程序员调用这些工厂类，可以得到对</span><span style=\"font-family:Calibri\">xml</span><span style=\"font-family:宋体\">文档进行解析的&nbsp;</span><span style=\"font-family:Calibri\">DOM&nbsp;</span><span style=\"font-family:宋体\">或&nbsp;</span><span style=\"font-family:Calibri\">SAX&nbsp;</span><span style=\"font-family:宋体\">的解析器对象。</span></p>\n<p>&nbsp;</p>\n<h2>DOM<span style=\"font-family:宋体\">基本概述</span></h2>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;DOM(Document&nbsp;Object&nbsp;Model文档对象模型<span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">，是</span><span style=\"font-family:Calibri\">W3C</span><span style=\"font-family:宋体\">组织推荐的处理可扩展标志语言的标准编程接口。</span><span style=\"font-family:Calibri\">XML&nbsp;DOM&nbsp;</span><span style=\"font-family:宋体\">定义了所有&nbsp;</span><span style=\"font-family:Calibri\">XML&nbsp;</span><span style=\"font-family:宋体\">元素的对象和属性，以及访问它们的方法（接口）。</span></p>\n<p>&nbsp;</p>\n<h2>原理图</h2>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160119144701176\" alt=\"\" style=\"font-size:12px\"></div>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Calibri\"><br>\n</span></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Calibri\"></span></span></p>\n<h2>DOM<span style=\"font-family:宋体\">模型</span><span style=\"font-family:Calibri\">(document&nbsp;object&nbsp;model)</span></h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;DOM<span style=\"font-family:宋体\">解析器在解析</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">文档时，会把文档中的所有元素，按照其出现的层次关系，解析成一个个</span><span style=\"font-family:Calibri\">Node</span><span style=\"font-family:宋体\">对象</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">节点</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">。</span></p>\n<p>在<span style=\"font-family:Calibri\">dom</span><span style=\"font-family:宋体\">中，节点之间关系如下：</span></p>\n<p>1<span style=\"font-family:宋体\">、</span>位于一个节点之上的节点是该节点的父节点<span style=\"font-family:Calibri\">(parent)</span></p>\n<p>2<span style=\"font-family:宋体\">、</span>一个节点之下的节点是该节点的子节点（<span style=\"font-family:Calibri\">children</span><span style=\"font-family:宋体\">）&nbsp;</span></p>\n<p>3<span style=\"font-family:宋体\">、</span>同一层次，具有相同父节点的节点是兄弟节点（<span style=\"font-family:Calibri\">sibling</span><span style=\"font-family:宋体\">）&nbsp;</span></p>\n<p>4<span style=\"font-family:宋体\">、</span>一个节点的下一个层次的节点集合是节点后代<span style=\"font-family:Calibri\">(descendant)</span></p>\n<p>5<span style=\"font-family:宋体\">、</span>父、祖父节点及所有位于节点上面的，都是节点的祖先<span style=\"font-family:Calibri\">(ancestor)&nbsp;</span></p>\n<p>&nbsp;</p>\n<h2>Node<span style=\"font-family:宋体\">对象</span></h2>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;Node<span style=\"font-family:宋体\">对象提供了一系列常量来代表结点的类型，当开发人员获得某个</span><span style=\"font-family:Calibri\">Node</span><span style=\"font-family:宋体\">类型后，就可以把</span><span style=\"font-family:Calibri\">Node</span><span style=\"font-family:宋体\">节点转换成相应的节点对象</span><span style=\"font-family:Calibri\">(Node</span><span style=\"font-family:宋体\">的子类对象</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">，以便于调用其特有的方法。（查看</span><span style=\"font-family:Calibri\">API</span><span style=\"font-family:宋体\">文档）&nbsp;</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;Node<span style=\"font-family:宋体\">对象提供了相应的方法去获得它的父结点或子结点。编程人员通过这些方法就可以读取整个</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">文档的内容、或添加、修改、删除</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">文档的内容了。</span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：其子接口</span><span style=\"font-family:Calibri\">Element</span><span style=\"font-family:宋体\">功能更多。</span></span></p>\n<p>&nbsp;</p>\n<h2>获取<span style=\"font-family:Calibri\">Jaxp</span><span style=\"font-family:宋体\">中的</span><span style=\"font-family:Calibri\">DOM</span><span style=\"font-family:宋体\">解析器</span></h2>\n<p>1<span style=\"font-family:宋体\">、调用</span><span style=\"font-family:Calibri\">DocumentBuilderFactory.newInstance()</span><span style=\"font-family:宋体\">方法创建</span><span style=\"font-family:Calibri\">DOM</span><span style=\"font-family:宋体\">解析器的工厂。</span></p>\n<p>2<span style=\"font-family:宋体\">、调用</span><span style=\"font-family:Calibri\">DocumentBuilderFactory</span><span style=\"font-family:宋体\">对象的</span><span style=\"font-family:Calibri\">newDocumentBuilder()</span><span style=\"font-family:宋体\">方法得到</span><span style=\"font-family:Calibri\">DOM</span><span style=\"font-family:宋体\">解析器对象</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">其是</span><span style=\"font-family:Calibri\">DocumentBuilder</span><span style=\"font-family:宋体\">的对象。</span></p>\n<p>3<span style=\"font-family:宋体\">、调用</span><span style=\"font-family:Calibri\">DocumentBuilder</span><span style=\"font-family:宋体\">对象的</span><span style=\"font-family:Calibri\">parse()</span><span style=\"font-family:宋体\">方法解析</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">文档，得到代表整个文档的</span><span style=\"font-family:Calibri\">Document</span><span style=\"font-family:宋体\">对象。</span></p>\n<p>4<span style=\"font-family:宋体\">、通过</span><span style=\"font-family:Calibri\">Document</span><span style=\"font-family:宋体\">对象和一些相关类和方法，对</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">文档进行操作。</span></p>\n<p>&nbsp;</p>\n<h2>更新<span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">文档</span></h2>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;javax.xml.transform<span style=\"font-family:宋体\">包中的</span><span style=\"font-family:Calibri\">Transformer</span><span style=\"font-family:宋体\">类用于把代表</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">文件的</span><span style=\"font-family:Calibri\">Document</span><span style=\"font-family:宋体\">对象转换为某种&#26684;式后进行输出，例如把</span><span style=\"font-family:Calibri\">xml</span><span style=\"font-family:宋体\">文件应用样式表后转成一个</span><span style=\"font-family:Calibri\">html</span><span style=\"font-family:宋体\">文档。利用这个对象，当然也可以把</span><span style=\"font-family:Calibri\">Document</span><span style=\"font-family:宋体\">对象又重新写入到一个</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">文件中。</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;Transformer<span style=\"font-family:宋体\">类通过</span><span style=\"font-family:Calibri\">transform</span><span style=\"font-family:宋体\">方法完成转换操作，该方法接收一个源和一个目的地。我们可以通过：</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;javax.xml.transform.dom.DOMSource<span style=\"font-family:宋体\">类来关联要转换的</span><span style=\"font-family:Calibri\">document</span><span style=\"font-family:宋体\">对象，&nbsp;</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;用<span style=\"font-family:Calibri\">javax.xml.transform.stream.StreamResult&nbsp;</span><span style=\"font-family:宋体\">对象来表示数据的目的地。</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;Transformer<span style=\"font-family:宋体\">对象通过</span><span style=\"font-family:Calibri\">TransformerFactory</span><span style=\"font-family:宋体\">获得。</span></p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<p>案例：</p>\n<p><strong>XML5.xml</strong></p>\n<pre name=\"code\" class=\"html\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;&lt;班级 班次=&quot;1班&quot; 编号=&quot;C1&quot;&gt;\n	&lt;学生 地址=&quot;湖南&quot; 学号=&quot;n1&quot; 性别=&quot;男&quot; 授课方式=&quot;面授&quot; 朋友=&quot;n2&quot; 班级编号=&quot;C1&quot;&gt;\n		&lt;名字&gt;张三&lt;/名字&gt;\n		&lt;年龄&gt;20&lt;/年龄&gt;\n		&lt;介绍&gt;不错&lt;/介绍&gt;\n	&lt;/学生&gt;\n	&lt;学生 学号=&quot;n2&quot; 性别=&quot;女&quot; 授课方式=&quot;面授&quot; 朋友=&quot;n1 n3&quot; 班级编号=&quot;C1&quot;&gt;\n		&lt;名字&gt;李四&lt;/名字&gt;\n		&lt;年龄&gt;18&lt;/年龄&gt;\n\n		&lt;介绍&gt;很好&lt;/介绍&gt;\n	&lt;/学生&gt;\n	&lt;学生 学号=&quot;n3&quot; 性别=&quot;男&quot; 授课方式=&quot;面授&quot; 朋友=&quot;n2&quot; 班级编号=&quot;C1&quot;&gt;\n		&lt;名字&gt;王五&lt;/名字&gt;\n		&lt;年龄&gt;22&lt;/年龄&gt;\n		&lt;介绍&gt;非常好&lt;/介绍&gt;\n	&lt;/学生&gt;\n	&lt;学生 性别=&quot;男&quot;&gt;\n		&lt;名字&gt;小明&lt;/名字&gt;\n		&lt;年龄&gt;30&lt;/年龄&gt;\n		&lt;介绍&gt;好&lt;/介绍&gt;\n	&lt;/学生&gt;\n&lt;/班级&gt;</pre><br>\n<pre name=\"code\" class=\"java\">package com.pc;\n\nimport java.awt.List;\nimport java.util.ArrayList;\n\nimport javax.xml.parsers.DocumentBuilder;\nimport javax.xml.parsers.DocumentBuilderFactory;\nimport javax.xml.transform.Transformer;\nimport javax.xml.transform.TransformerConfigurationException;\nimport javax.xml.transform.TransformerException;\nimport javax.xml.transform.TransformerFactory;\nimport javax.xml.transform.TransformerFactoryConfigurationError;\nimport javax.xml.transform.dom.DOMSource;\nimport javax.xml.transform.stream.StreamResult;\n\nimport org.w3c.dom.Document;\nimport org.w3c.dom.Element;\nimport org.w3c.dom.Node;\nimport org.w3c.dom.NodeList;\n\n/**\n * \n * @author Switch\n * @function Java解析XML\n * \n */\npublic class XML5 {\n	// 使用dom技术对xml文件进行操作\n	public static void main(String[] args) throws Exception {\n		// 1.创建一个DocumentBuilderFactory对象\n		DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory\n				.newInstance();\n		// 2.通过DocumentBuilderFactory，得到一个DocumentBuilder对象\n		DocumentBuilder documentBuilder = documentBuilderFactory\n				.newDocumentBuilder();\n		// 3.指定解析哪个xml文件\n		Document document = documentBuilder.parse(&quot;src/com/pc/XML5.xml&quot;);\n		// 4.对XML文档操作\n		// System.out.println(document);\n		// list(document);\n		// read(document);\n		// add(document);\n		// delete(document, &quot;小明&quot;);\n		update(document, &quot;小明&quot;, &quot;30&quot;);\n	}\n\n	// 更新一个元素(通过名字更新一个学生的年龄)\n	public static void update(Document doc, String name, String age)\n			throws Exception {\n		NodeList nodes = doc.getElementsByTagName(&quot;名字&quot;);\n		for (int i = 0; i &lt; nodes.getLength(); i++) {\n			Element nameE = (Element) nodes.item(i);\n			if (nameE.getTextContent().equals(name)) {\n				Node prNode = nameE.getParentNode();\n				NodeList stuAttributes = prNode.getChildNodes();\n				for (int j = 0; j &lt; stuAttributes.getLength(); j++) {\n					Node stuAttribute = stuAttributes.item(j);\n					if (stuAttribute.getNodeName().equals(&quot;年龄&quot;)) {\n						stuAttribute.setTextContent(age);\n					}\n				}\n			}\n		}\n		updateToXML(doc);\n	}\n\n	// 删除一个元素(通过名字删除一个学生)\n	public static void delete(Document doc, String name) throws Exception {\n		// 找到第一个学生\n		NodeList nodes = doc.getElementsByTagName(&quot;名字&quot;);\n		for (int i = 0; i &lt; nodes.getLength(); i++) {\n			Node node = nodes.item(i);\n			if (node.getTextContent().equals(name)) {\n				Node prNode = node.getParentNode();\n				prNode.getParentNode().removeChild(prNode);\n			}\n		}\n\n		// 更新到XML\n		updateToXML(doc);\n	}\n\n	// 添加一个学生到XML文件\n	public static void add(Document doc) throws Exception {\n		// 创建一个新的学生节点\n		Element newStu = doc.createElement(&quot;学生&quot;);\n		newStu.setAttribute(&quot;性别&quot;, &quot;男&quot;);\n		Element newStu_name = doc.createElement(&quot;名字&quot;);\n		newStu_name.setTextContent(&quot;小明&quot;);\n		Element newStu_age = doc.createElement(&quot;年龄&quot;);\n		newStu_age.setTextContent(&quot;21&quot;);\n		Element newStu_intro = doc.createElement(&quot;介绍&quot;);\n		newStu_intro.setTextContent(&quot;好&quot;);\n		newStu.appendChild(newStu_name);\n		newStu.appendChild(newStu_age);\n		newStu.appendChild(newStu_intro);\n		// 把新的学生节点添加到根元素\n		doc.getDocumentElement().appendChild(newStu);\n\n		// 更新到XML\n		updateToXML(doc);\n\n	}\n\n	// 更新到XML\n	private static void updateToXML(Document doc)\n			throws TransformerFactoryConfigurationError,\n			TransformerConfigurationException, TransformerException {\n		// 得到TransformerFactory对象\n		TransformerFactory transformerFactory = TransformerFactory\n				.newInstance();\n		// 通过TransformerFactory对象得到一个转换器\n		Transformer transformer = transformerFactory.newTransformer();\n		transformer.transform(new DOMSource(doc), new StreamResult(\n				&quot;src/com/pc/XML5.xml&quot;));\n	}\n\n	// 具体查询某个学生的信息(小时第一个学生的所有)\n	public static void read(Document doc) {\n		NodeList nodes = doc.getElementsByTagName(&quot;学生&quot;);\n		// 取出第一个学生\n		Element stu1 = (Element) nodes.item(0);\n		Element name = (Element) stu1.getElementsByTagName(&quot;名字&quot;).item(0);\n		System.out.println(&quot;姓名：&quot; + name.getTextContent() + &quot; 性别：&quot;\n				+ stu1.getAttribute(&quot;性别&quot;));\n	}\n\n	// 遍历该XML文件\n	public static void list(Node node) {\n		if (node.getNodeType() == node.ELEMENT_NODE) {\n			System.out.println(&quot;名字：&quot; + node.getNodeName());\n		}\n		// 取出node的子节点\n		NodeList nodes = node.getChildNodes();\n		for (int i = 0; i &lt; nodes.getLength(); i++) {\n			// 显示所有子节点\n			Node n = nodes.item(i);\n			list(n);\n		}\n	}\n\n}</pre>\n<p><br>\n</p>\n   \n', '2016-04-16 01:21:13', '0');
INSERT INTO `article` VALUES ('10053', '10003', 'Java面试题库整理版', '\n<a href=\"#\" class=\"bds_more\" data-cmd=\"more\" style=\"background-position:0 0 !important; background-image: url(http://bdimg.share.baidu.com/static/api/img/share/icons_0_16.png?v=d754dcc0.png) !important\"></a>\n<a href=\"#\" class=\"bds_qzone\" data-cmd=\"qzone\" title=\"分享到QQ空间\" style=\"background-position:0 -52px !important\"></a>\n<a href=\"#\" class=\"bds_tsina\" data-cmd=\"tsina\" title=\"分享到新浪微博\" style=\"background-position:0 -104px !important\"></a>\n<a href=\"#\" class=\"bds_tqq\" data-cmd=\"tqq\" title=\"分享到腾讯微博\" style=\"background-position:0 -260px !important\"></a>\n<a href=\"#\" class=\"bds_renren\" data-cmd=\"renren\" title=\"分享到人人网\" style=\"background-position:0 -208px !important\"></a>\n<a href=\"#\" class=\"bds_weixin\" data-cmd=\"weixin\" title=\"分享到微信\" style=\"background-position:0 -1612px !important\"></a>\n', '2016-04-16 01:21:13', '0');
INSERT INTO `article` VALUES ('10054', '10003', 'DTD详解', '\n\n<h1 style=\"text-align:center\"><span style=\"font-size:18px\">DTD<span style=\"font-family:宋体\">详解</span></span></h1>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>基本概述</h2>\n<p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;文档类型定义<span style=\"font-family:Calibri\">(Document&nbsp;Type&nbsp;Definition)</span><span style=\"font-family:宋体\">是一套为了进行程序间的数据交换而建立的关于标记符的语法规则。它是标准通用标记语言</span><span style=\"font-family:Calibri\">(SGML)</span><span style=\"font-family:宋体\">和可扩展标记语言</span><span style=\"font-family:Calibri\">(XML)1.0</span><span style=\"font-family:宋体\">版规&#26684;的一部分，文档可根据某种</span><span style=\"font-family:Calibri\">DTD</span><span style=\"font-family:宋体\">语法规则验证&#26684;式是否符合此规则。文档类型定义也可用做保证标准通用标记语言、可扩展标记语言文档&#26684;式的合法性，可通过比较文档和文档类型定义文件来检查文档是否符合规范，元素和标签使用是否正确。文件实例提供应用程序一个数据交换的&#26684;式。</span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：简而言之，</span><span style=\"font-family:Calibri\">DTD</span><span style=\"font-family:宋体\">就是用来约束</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">文档的，使其在一定的规范下使用，除了</span><span style=\"font-family:Calibri\">DTD</span><span style=\"font-family:宋体\">技术外，还有</span><span style=\"font-family:Calibri\">Schema</span><span style=\"font-family:宋体\">技术，也是用于约束</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">文档的。</span></span></p>\n<p>参考文档：<span style=\"font-family:Calibri\">DTD&nbsp;</span><a target=\"_blank\" href=\"http://www.w3school.com.cn/dtd/index.asp\"><span style=\"color:rgb(128,0,128)\">http://www.w3school.com.cn/dtd/index.asp</span></a></p>\n<p>参考文档：<span style=\"font-family:Calibri\">Schema&nbsp;</span><a target=\"_blank\" href=\"http://www.w3school.com.cn/schema/index.asp\"><span style=\"color:rgb(128,0,128)\">http://www.w3school.com.cn/schema/index.asp</span></a></p>\n<p>&nbsp;</p>\n<h2>DTD<span style=\"font-family:宋体\">原理图</span></h2>\n<div style=\"text-align:center\"><img src=\"http://img.blog.csdn.net/20160119113902869\" alt=\"\"></div>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：通过</span><span style=\"font-family:Calibri\">DTD</span><span style=\"font-family:宋体\">约束，</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">就能在</span><span style=\"font-family:Calibri\">DTD</span><span style=\"font-family:宋体\">的约束下进行自定义了，不过</span><span style=\"font-family:Calibri\">DTD</span><span style=\"font-family:宋体\">有个缺点，那就是不能对数据进行数&#20540;约束这种范围约束。</span></span></p>\n<p>&nbsp;</p>\n<h2>DTD<span style=\"font-family:宋体\">文档的声明及引用</span></h2>\n<p>内部<span style=\"font-family:Calibri\">DTD</span><span style=\"font-family:宋体\">文档</span></p>\n<p><span style=\"white-space:pre\"></span>&lt;!DOCTYPE&nbsp;<span style=\"font-family:宋体\">根元素&nbsp;</span><span style=\"font-family:Calibri\">[</span><span style=\"font-family:宋体\">定义内容</span><span style=\"font-family:Calibri\">]&gt;</span></p>\n<p>外部<span style=\"font-family:Calibri\">DTD</span><span style=\"font-family:宋体\">文档</span></p>\n<p><span style=\"white-space:pre\"></span>&lt;!DOCTYPE&nbsp;<span style=\"font-family:宋体\">根元素&nbsp;</span><span style=\"font-family:Calibri\">SYSTEM&nbsp;&quot;DTD</span><span style=\"font-family:宋体\">文件路径</span><span style=\"font-family:Calibri\">&quot;&gt;</span></p>\n<p>内外部<span style=\"font-family:Calibri\">DTD</span><span style=\"font-family:宋体\">文档结合</span></p>\n<p><span style=\"white-space:pre\"></span>&lt;!DOCTYPE&nbsp;<span style=\"font-family:宋体\">根元素&nbsp;</span><span style=\"font-family:Calibri\">SYSTEM</span>&nbsp;&quot;DTD<span style=\"font-family:宋体\">文件路径</span><span style=\"font-family:Calibri\">&quot;&nbsp;[</span></p>\n<p><span style=\"white-space:pre\"></span>定义内容</p>\n<p><span style=\"white-space:pre\"></span>]&gt;</p>\n<p>注意事项：</p>\n<p>1<span style=\"font-family:宋体\">、定义关键字一定要大写，例如：</span><span style=\"font-family:Calibri\">DOCTYPE</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">ELEMENT</span><span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">ATTLIST</span><span style=\"font-family:宋体\">。</span></p>\n<p>2<span style=\"font-family:宋体\">、</span></p>\n<p>当引用的文件在本地时，采用如下方式：</p>\n<p><span style=\"white-space:pre\"></span>&lt;!DOCTYPE&nbsp;<span style=\"font-family:宋体\">文档根结点&nbsp;</span><span style=\"font-family:Calibri\">SYSTEM&nbsp;&quot;DTD</span><span style=\"font-family:宋体\">文件的</span><span style=\"font-family:Calibri\">URL&quot;&gt;</span></p>\n<p><span style=\"white-space:pre\"></span>例如：&nbsp;<span style=\"font-family:Calibri\">&lt;!DOCTYPE&nbsp;</span><span style=\"font-family:宋体\">书架&nbsp;</span><span style=\"font-family:Calibri\">SYSTEM&nbsp;</span><span style=\"font-family:宋体\">“</span><span style=\"font-family:Calibri\">book.dtd</span><span style=\"font-family:宋体\">”</span><span style=\"font-family:Calibri\">&gt;</span></p>\n<p>当引用的文件是一个公共的文件时，采用如下方式： </p>\n<p><span style=\"white-space:pre\"></span>&lt;!DOCTYPE&nbsp;<span style=\"font-family:宋体\">文档根结点&nbsp;</span><span style=\"font-family:Calibri\">PUBLIC&nbsp;&quot;DTD</span><span style=\"font-family:宋体\">名称</span><span style=\"font-family:Calibri\">&quot;&nbsp;&quot;DTD</span><span style=\"font-family:宋体\">文件的</span><span style=\"font-family:Calibri\">URL&quot;&gt;</span></p>\n<p><span style=\"white-space:pre\"></span>例如：<span style=\"font-family:Calibri\">&lt;!DOCTYPE&nbsp;web-app&nbsp;PUBLIC</span>&nbsp;&quot;-//Sun&nbsp;Microsystems,&nbsp;Inc.//DTD&nbsp;Web&nbsp;Application&nbsp;2.3//EN&quot;&nbsp;&quot;http://java.sun.com/dtd/web-app_2_3.dtd&quot;&gt;</p>\n<p>&nbsp;</p>\n<h2>DTD<span style=\"font-family:宋体\">元素</span></h2>\n<h3>基本语法</h3>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp; &nbsp;&nbsp;</span><span style=\"color:rgb(255,0,0)\">&lt;!ELEMENT&nbsp;NAME&nbsp;CONTENT&gt;</span></p>\n<p>解释：</p>\n<p>ELEMENT：关键字<span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">必须大写</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">。</span></p>\n<p>NAME<span style=\"font-family:宋体\">：元素名称。</span></p>\n<p>CONTENT<span style=\"font-family:宋体\">：元素类型，有四种，都必须大写。</span></p>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:rgb(255,0,0)\">1<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">EMPTY</span><span style=\"font-family:宋体\">－该元素不能包含子元素和文本，但可以有属性（空元素）</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;2<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">ANY</span><span style=\"font-family:宋体\">－该元素可以包含任何在</span><span style=\"font-family:Calibri\">DTD</span><span style=\"font-family:宋体\">中定义的元素内容</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;3<span style=\"font-family:宋体\">、</span><span style=\"font-family:Calibri\">#PCDATA</span><span style=\"font-family:宋体\">－可以包含任何字符数据，但是不能在其中包含任何子元素</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;&nbsp;&nbsp;&nbsp;4<span style=\"font-family:宋体\">、其它类型</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">组合</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">，可以是子元素，子元素与修饰符组合，基本元素与子元素与修饰符组合。</span></span></p>\n<p>&nbsp;</p>\n<p>案例：</p>\n<p>&lt;!ELEMENT&nbsp;<span style=\"font-family:宋体\">班级&nbsp;</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">学生</span><span style=\"font-family:Calibri\">&#43;,</span><span style=\"font-family:宋体\">作者</span><span style=\"font-family:Calibri\">)&gt;</span></p>\n<p>&lt;!ELEMENT&nbsp;<span style=\"font-family:宋体\">学生&nbsp;</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">名字</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">年龄</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">介绍</span><span style=\"font-family:Calibri\">)&gt;</span></p>\n<p>&lt;!ELEMENT&nbsp;<span style=\"font-family:宋体\">作者&nbsp;</span><span style=\"font-family:Calibri\">(#PCDATA)&gt;</span></p>\n<p>&lt;!ELEMENT&nbsp;<span style=\"font-family:宋体\">名字&nbsp;</span><span style=\"font-family:Calibri\">(#PCDATA)&gt;</span></p>\n<p>&lt;!ELEMENT&nbsp;<span style=\"font-family:宋体\">年龄&nbsp;</span><span style=\"font-family:Calibri\">(#PCDATA)&gt;</span></p>\n<p>&lt;!ELEMENT&nbsp;<span style=\"font-family:宋体\">介绍&nbsp;</span><span style=\"font-family:Calibri\">(#PCDATA)&gt;</span></p>\n<p>&nbsp;</p>\n<p>修饰符</p>\n<table>\n<tbody>\n<tr>\n<td valign=\"center\" style=\"background:rgb(255,255,204)\">\n<p>符号<span style=\"font-family:Calibri\">&nbsp;</span></p>\n</td>\n<td valign=\"center\" style=\"background:rgb(255,255,204)\">\n<p>用途<span style=\"font-family:Calibri\">&nbsp;</span></p>\n</td>\n<td valign=\"center\" style=\"background:rgb(255,255,204)\">\n<p>示例</p>\n</td>\n<td valign=\"center\" style=\"background:rgb(255,255,204)\">\n<p>示例说明</p>\n</td>\n</tr>\n<tr>\n<td valign=\"center\">\n<p>(&nbsp;&nbsp;)</p>\n</td>\n<td valign=\"center\">\n<p>用来给元素分组<span style=\"font-family:Calibri\">&nbsp;</span></p>\n</td>\n<td valign=\"center\">\n<p>（古龙<span style=\"font-family:Calibri\">|</span><span style=\"font-family:宋体\">金庸</span><span style=\"font-family:Calibri\">|</span><span style=\"font-family:宋体\">梁羽生）</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">（王朔</span><span style=\"font-family:Calibri\">|</span><span style=\"font-family:宋体\">余杰）</span></p>\n</td>\n<td valign=\"center\">\n<p>分成两组</p>\n</td>\n</tr>\n<tr>\n<td valign=\"center\">\n<p>|</p>\n</td>\n<td valign=\"center\">\n<p>在列出的对象中选择一个<span style=\"font-family:Calibri\">&nbsp;</span></p>\n</td>\n<td valign=\"center\">\n<p>（男人<span style=\"font-family:Calibri\">|</span><span style=\"font-family:宋体\">女人）</span><span style=\"font-family:Calibri\">&nbsp;</span></p>\n</td>\n<td valign=\"center\">\n<p>表示男人或者女人必须出现，而且只能选一个<span style=\"font-family:Calibri\">&nbsp;</span></p>\n</td>\n</tr>\n<tr>\n<td valign=\"center\">\n<p>&#43;</p>\n</td>\n<td valign=\"center\">\n<p>该对象最少出现一次，可以出现多次<span style=\"font-family:Calibri\">&nbsp;(1</span><span style=\"font-family:宋体\">或多次）</span></p>\n</td>\n<td valign=\"center\">\n<p>（成员<span style=\"font-family:Calibri\">&#43;</span><span style=\"font-family:宋体\">）</span><span style=\"font-family:Calibri\">&nbsp;</span></p>\n</td>\n<td valign=\"center\">\n<p>表示成员必须出现，而且可以出现多个成员</p>\n</td>\n</tr>\n<tr>\n<td valign=\"center\">\n<p>*</p>\n</td>\n<td valign=\"center\">\n<p>该对象允许出现零次到任意多次（<span style=\"font-family:Calibri\">0</span><span style=\"font-family:宋体\">到多次）</span></p>\n</td>\n<td valign=\"center\">\n<p>（爱好<span style=\"font-family:Calibri\">*</span><span style=\"font-family:宋体\">）</span><span style=\"font-family:Calibri\">&nbsp;</span></p>\n</td>\n<td valign=\"center\">\n<p>爱好可以出现零次到多次</p>\n</td>\n</tr>\n<tr>\n<td valign=\"center\">\n<p>?</p>\n</td>\n<td valign=\"center\">\n<p>该对象可以出现，但只能出现一次<span style=\"font-family:Calibri\">&nbsp;(0</span><span style=\"font-family:宋体\">到</span><span style=\"font-family:Calibri\">1</span><span style=\"font-family:宋体\">次</span><span style=\"font-family:Calibri\">)</span></p>\n</td>\n<td valign=\"center\">\n<p>（菜鸟<span style=\"font-family:Calibri\">?</span><span style=\"font-family:宋体\">）</span><span style=\"font-family:Calibri\">&nbsp;</span></p>\n</td>\n<td valign=\"center\">\n<p>菜鸟可以出现，也可以不出现，如果出现的话，最多只能出现一次<span style=\"font-family:Calibri\">&nbsp;</span></p>\n</td>\n</tr>\n<tr>\n<td valign=\"center\">\n<p>,</p>\n</td>\n<td valign=\"center\">\n<p>对象必须按指定的顺序出现<span style=\"font-family:Calibri\">&nbsp;</span></p>\n</td>\n<td valign=\"center\">\n<p>（西瓜<span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">苹果</span><span style=\"font-family:Calibri\">,</span><span style=\"font-family:宋体\">香蕉）</span><span style=\"font-family:Calibri\">&nbsp;</span></p>\n</td>\n<td valign=\"center\">\n<p>表示西瓜、苹果、香蕉必须出现，并且按这个顺序出现<span style=\"font-family:Calibri\">&nbsp;</span></p>\n</td>\n</tr>\n</tbody>\n</table>\n<br>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<h2>DTD<span style=\"font-family:宋体\">属性</span></h2>\n<h3>基本语法</h3>\n<p>\n<p>&lt;!ATTLIST&nbsp;<span style=\"font-family:宋体\">元素名称</span></p>\n<p><span style=\"white-space:pre\"></span>属性名称&nbsp;&nbsp;&nbsp;&nbsp;类型&nbsp;&nbsp;&nbsp;&nbsp;属性特性</p>\n<p><span style=\"white-space:pre\"></span>属性名称&nbsp;&nbsp;&nbsp;&nbsp;类型&nbsp;&nbsp;&nbsp;&nbsp;属性特性…<span style=\"font-family:Calibri\">...</span></p>\n<p>&gt;</p>\n<p>解释：</p>\n<p>ATTLIST<span style=\"font-family:宋体\">：属性列表，（必须大写）。</span></p>\n<p>元素名称：对应的元素的名称。</p>\n<p>属性：属性能够有多个，其&#26684;式是名称&nbsp;类型&nbsp;属性特性</p>\n<p>类型：</p>\n<img src=\"http://img.blog.csdn.net/20160119114210839\" width=\"800\" height=\"350\" alt=\"\"><br>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">PS<span style=\"font-family:宋体\">：常用的有</span><span style=\"font-family:Calibri\">CDATA(</span><span style=\"font-family:宋体\">字符型</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">，枚举</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">枚举&#26684;式是</span><span style=\"font-family:Calibri\">(</span><span style=\"font-family:宋体\">&#20540;</span><span style=\"font-family:Calibri\">1|</span><span style=\"font-family:宋体\">&#20540;</span><span style=\"font-family:Calibri\">2|</span><span style=\"font-family:宋体\">&#20540;</span><span style=\"font-family:Calibri\">3...))</span><span style=\"font-family:宋体\">，</span><span style=\"font-family:Calibri\">ID(ID</span><span style=\"font-family:宋体\">不能重复，不能以数字开头</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">，</span><span style=\"font-family:Calibri\">IDREF(</span><span style=\"font-family:宋体\">引用另一个</span><span style=\"font-family:Calibri\">ID</span><span style=\"font-family:宋体\">&#20540;</span><span style=\"font-family:Calibri\">)</span><span style=\"font-family:宋体\">，</span><span style=\"font-family:Calibri\">IDREFS(</span><span style=\"font-family:宋体\">可以引用多个</span><span style=\"font-family:Calibri\">ID</span><span style=\"font-family:宋体\">&#20540;，以空&#26684;隔开</span><span style=\"font-family:Calibri\">)</span></span></p>\n<p><span style=\"color:rgb(255,0,0)\">&nbsp;</span></p>\n<p>属性特性有：</p>\n<img src=\"http://img.blog.csdn.net/20160119114310185\" width=\"800\" height=\"200\" alt=\"\"><br>\n<p><span style=\"font-size:18px\"><span style=\"font-family:宋体\"></span></span></p>\n<p>案例：</p>\n<pre name=\"code\" class=\"plain\">&lt;!ELEMENT 班级 (学生+,作者)&gt;\n&lt;!ATTLIST 班级\n	班次 CDATA &quot;1班&quot;\n	编号 ID #REQUIRED\n&gt;\n&lt;!ELEMENT 学生 (名字,年龄,介绍)&gt;\n&lt;!ELEMENT 作者 (#PCDATA)&gt;\n&lt;!ATTLIST 学生\n	地址 CDATA #IMPLIED\n	授课方式 CDATA #FIXED &quot;面授&quot;\n	学号 ID #REQUIRED\n	班级编号 IDREF #REQUIRED\n	朋友 IDREFS #IMPLIED\n&gt;\n&lt;!ELEMENT 名字 (#PCDATA)&gt;\n&lt;!ELEMENT 年龄 (#PCDATA)&gt;\n&lt;!ELEMENT 介绍 (#PCDATA)&gt;</pre><br>\n<h2>实体</h2>\n<p>&nbsp;&nbsp;&nbsp;&nbsp;实体有引用实体和参数实体两种，引用实体一般是在<span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">使用，参数实体一般是在</span><span style=\"font-family:Calibri\">DTD</span><span style=\"font-family:宋体\">中使用。</span></p>\n<h3>基本语法</h3>\n<p><span style=\"white-space:pre\"></span>&lt;!ENTITY&nbsp;<span style=\"font-family:宋体\">实体名称&nbsp;</span>“实体内容”&nbsp;&gt;&nbsp;//&nbsp;<span style=\"font-family:宋体\">引用实体</span></p>\n<p><span style=\"white-space:pre\"></span>&lt;!ENTITY&nbsp;%&nbsp;<span style=\"font-family:宋体\">实体名称&nbsp;</span><span style=\"font-family:Calibri\">&quot;</span><span style=\"font-family:宋体\">实体内容</span><span style=\"font-family:Calibri\">&quot;&nbsp;&gt;</span>&nbsp;//&nbsp;<span style=\"font-family:宋体\">参数实体</span></p>\n<p>解释：</p>\n<p>1<span style=\"font-family:宋体\">、引用实体可以在引用了</span><span style=\"font-family:Calibri\">DTD</span><span style=\"font-family:宋体\">的</span><span style=\"font-family:Calibri\">XML</span><span style=\"font-family:宋体\">文件中，使用</span><span style=\"font-family:Calibri\">&amp;</span><span style=\"font-family:宋体\">实体名称</span><span style=\"font-family:Calibri\">;</span><span style=\"font-family:宋体\">来使用实体内容。</span></p>\n<p>2<span style=\"font-family:宋体\">、不知道是不是我的电脑原因，外部</span><span style=\"font-family:Calibri\">DTD</span><span style=\"font-family:宋体\">中不能用引用实体，如果用将引用实体定义放在内部</span><span style=\"font-family:Calibri\">DTD</span><span style=\"font-family:宋体\">中，则可以使用。</span></p>\n<p>3<span style=\"font-family:宋体\">、参数实体在</span><span style=\"font-family:Calibri\">DTD</span><span style=\"font-family:宋体\">中使用，使用</span><span style=\"font-family:Calibri\">%</span><span style=\"font-family:宋体\">实体名称</span><span style=\"font-family:Calibri\">;</span><span style=\"font-family:宋体\">使用</span></p>\n<p>4<span style=\"font-family:宋体\">、可以将那些重复使用的&#20540;定义成实体，这样能减少代码的冗余度。</span></p>\n<p>5<span style=\"font-family:宋体\">、在外部</span><span style=\"font-family:Calibri\">DTD</span><span style=\"font-family:宋体\">中，引用实体最好放在</span><span style=\"font-family:Calibri\">DTD</span><span style=\"font-family:宋体\">底部，参数实体最好放在</span><span style=\"font-family:Calibri\">DTD</span><span style=\"font-family:宋体\">顶部。</span></p>\n<p>&nbsp;</p>\n<p>案例：</p>\n<pre name=\"code\" class=\"plain\">&lt;!ENTITY % sex &quot;男|女&quot;&gt;\n&lt;!ELEMENT 班级 (学生+,作者)&gt;\n&lt;!ELEMENT 学生 (名字,年龄,介绍)&gt;\n&lt;!ELEMENT 作者 (#PCDATA)&gt;\n&lt;!ATTLIST 学生\n	性别 (%sex;) #REQUIRED\n&gt;\n&lt;!ELEMENT 名字 (#PCDATA)&gt;\n&lt;!ELEMENT 年龄 (#PCDATA)&gt;\n&lt;!ELEMENT 介绍 (#PCDATA)&gt;\n&lt;!ENTITY writer &quot;Switch&quot;&gt;</pre><br>\n<p>综合案例<span style=\"font-family:Calibri\">1</span><span style=\"font-family:宋体\">：</span></p>\n<p><strong>XML3.dtd</strong></p>\n<pre name=\"code\" class=\"plain\">&lt;!ENTITY % sex &quot;男|女&quot;&gt;\n&lt;!ELEMENT 班级 (学生+,作者)&gt;\n&lt;!ATTLIST 班级\n	班次 CDATA &quot;1班&quot;\n	编号 ID #REQUIRED\n&gt;\n&lt;!ELEMENT 学生 (名字,年龄,介绍)&gt;\n&lt;!ELEMENT 作者 (#PCDATA)&gt;\n&lt;!ATTLIST 学生\n	地址 CDATA #IMPLIED\n	授课方式 CDATA #FIXED &quot;面授&quot;\n	学号 ID #REQUIRED\n	班级编号 IDREF #REQUIRED\n	朋友 IDREFS #IMPLIED\n	性别 (%sex;) #REQUIRED\n&gt;\n&lt;!ELEMENT 名字 (#PCDATA)&gt;\n&lt;!ELEMENT 年龄 (#PCDATA)&gt;\n&lt;!ELEMENT 介绍 (#PCDATA)&gt;</pre><br>\n<p><strong>XML3.xml</strong></p>\n<pre name=\"code\" class=\"html\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!-- 引入DTD --&gt;\n&lt;!DOCTYPE 班级 SYSTEM &quot;XML3.dtd&quot;\n[&lt;!ENTITY writer &quot;Switch&quot;&gt;]&gt;\n&lt;班级 编号=&quot;C1&quot; 班次=&quot;1班&quot;&gt;\n	&lt;学生  地址=&quot;湖南&quot; 授课方式=&quot;面授&quot; 学号=&quot;n1&quot; 班级编号=&quot;C1&quot; 朋友=&quot;n2&quot; 性别=&quot;男&quot;&gt;\n		&lt;名字&gt;张三&lt;/名字&gt;\n		&lt;年龄&gt;20&lt;/年龄&gt;\n		&lt;介绍&gt;不错&lt;/介绍&gt;\n	&lt;/学生&gt;\n	&lt;学生 授课方式=&quot;面授&quot; 学号=&quot;n2&quot; 班级编号=&quot;C1&quot; 朋友=&quot;n1 n3&quot; 性别=&quot;女&quot;&gt;\n		&lt;名字&gt;李四&lt;/名字&gt;\n		&lt;年龄&gt;18&lt;/年龄&gt;\n		&lt;介绍&gt;很好&lt;/介绍&gt;\n	&lt;/学生&gt;\n	&lt;学生 授课方式=&quot;面授&quot; 学号=&quot;n3&quot; 班级编号=&quot;C1&quot; 朋友=&quot;n2&quot; 性别=&quot;男&quot;&gt;\n		&lt;名字&gt;王五&lt;/名字&gt;\n		&lt;年龄&gt;22&lt;/年龄&gt;\n		&lt;介绍&gt;非常好&lt;/介绍&gt;\n	&lt;/学生&gt;\n	&lt;作者&gt;&amp;writer;&lt;/作者&gt;\n&lt;/班级&gt;</pre><br>\n<p>综合案例<span style=\"font-family:Calibri\">2</span><span style=\"font-family:宋体\">：</span></p>\n<p><strong>XML4.dtd</strong></p>\n<pre name=\"code\" class=\"plain\">&lt;!ENTITY AUTHOR &quot;John Doe&quot;&gt;\n&lt;!ENTITY COMPANY &quot;JD Power Tools, Inc.&quot;&gt;\n&lt;!ENTITY EMAIL &quot;jd@jd-tools.com&quot;&gt;\n\n&lt;!ELEMENT CATALOG (PRODUCT+)&gt;\n\n&lt;!ELEMENT PRODUCT\n(SPECIFICATIONS+,OPTIONS?,PRICE+,NOTES?)&gt;\n&lt;!ATTLIST PRODUCT\nNAME CDATA #IMPLIED\nCATEGORY (HandTool|Table|Shop-Professional) &quot;HandTool&quot;\nPARTNUM CDATA #IMPLIED\nPLANT (Pittsburgh|Milwaukee|Chicago) &quot;Chicago&quot;\nINVENTORY (InStock|Backordered|Discontinued) &quot;InStock&quot;&gt;\n\n&lt;!ELEMENT SPECIFICATIONS (#PCDATA)&gt;\n&lt;!ATTLIST SPECIFICATIONS\nWEIGHT CDATA #IMPLIED\nPOWER CDATA #IMPLIED&gt;\n\n&lt;!ELEMENT OPTIONS (#PCDATA)&gt;\n&lt;!ATTLIST OPTIONS\nFINISH (Metal|Polished|Matte) &quot;Matte&quot; \nADAPTER (Included|Optional|NotApplicable) &quot;Included&quot;\nCASE (HardShell|Soft|NotApplicable) &quot;HardShell&quot;&gt;\n\n&lt;!ELEMENT PRICE (#PCDATA)&gt;\n&lt;!ATTLIST PRICE\nMSRP CDATA #IMPLIED\nWHOLESALE CDATA #IMPLIED\nSTREET CDATA #IMPLIED\nSHIPPING CDATA #IMPLIED&gt;\n\n&lt;!ELEMENT NOTES (#PCDATA)&gt;</pre><br>\n<p><strong>XML4.xml</strong></p>\n<pre name=\"code\" class=\"html\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE CATALOG SYSTEM &quot;XML4.dtd&quot;&gt;\n&lt;CATALOG&gt;\n	&lt;PRODUCT NAME=&quot;C&#39;estbon&quot; CATEGORY=&quot;Shop-Professional&quot; INVENTORY=&quot;Backordered&quot; PARTNUM=&quot;10&quot; PLANT=&quot;Chicago&quot;&gt;\n		&lt;SPECIFICATIONS POWER=&quot;0&quot; WEIGHT=&quot;555ml&quot;&gt;SPECIFICATIONS&lt;/SPECIFICATIONS&gt;\n		&lt;OPTIONS&gt;OPTIONS&lt;/OPTIONS&gt;\n		&lt;PRICE&gt;2&lt;/PRICE&gt;\n		&lt;NOTES&gt;NOTES&lt;/NOTES&gt;\n	&lt;/PRODUCT&gt;\n&lt;/CATALOG&gt;</pre><br>\n   \n', '2016-04-16 01:21:13', '0');
INSERT INTO `article` VALUES ('10055', '10003', '69道Spring面试题和答案', '\n<a href=\"#\" class=\"bds_more\" data-cmd=\"more\" style=\"background-position:0 0 !important; background-image: url(http://bdimg.share.baidu.com/static/api/img/share/icons_0_16.png?v=d754dcc0.png) !important\"></a>\n<a href=\"#\" class=\"bds_qzone\" data-cmd=\"qzone\" title=\"分享到QQ空间\" style=\"background-position:0 -52px !important\"></a>\n<a href=\"#\" class=\"bds_tsina\" data-cmd=\"tsina\" title=\"分享到新浪微博\" style=\"background-position:0 -104px !important\"></a>\n<a href=\"#\" class=\"bds_tqq\" data-cmd=\"tqq\" title=\"分享到腾讯微博\" style=\"background-position:0 -260px !important\"></a>\n<a href=\"#\" class=\"bds_renren\" data-cmd=\"renren\" title=\"分享到人人网\" style=\"background-position:0 -208px !important\"></a>\n<a href=\"#\" class=\"bds_weixin\" data-cmd=\"weixin\" title=\"分享到微信\" style=\"background-position:0 -1612px !important\"></a>\n', '2016-04-16 01:21:13', '0');
INSERT INTO `article` VALUES ('10056', '10003', 'Struts、Spring、Hibernate的作用', '\n<div>简单的说：<br><br><span class=\"hl1\"><span id=\"1_1\">struts</span></span> 控制用的<br><br>hibernate 操作数据库的<br><br><span id=\"13_nwp\" style=\"width: auto; height: auto; float: none;\"><a target=\"_blank\" id=\"13_nwl\" style=\"text-decoration: none;\" href=\"http://cpro.baidu.com/cpro/ui/uijs.php?adclass=0&amp;app_id=0&amp;c=news&amp;cf=1001&amp;ch=0&amp;di=8&amp;fv=0&amp;is_app=0&amp;jk=282e8b67129dfcab&amp;k=spring&amp;k0=spring&amp;kdi0=0&amp;luki=7&amp;n=10&amp;p=baidu&amp;q=sayyescpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=abfc9d12678b2e28&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;td=1366390&amp;tu=u1366390&amp;u=http%3A%2F%2Fblog%2Eknowsky%2Ecom%2F196587%2Ehtm&amp;urlid=0\" target=\"_blank\" mpid=\"13\"><span style=\"color:#00ff;width: auto; height: auto; font-size: 15px; float: none;\">spring</span></a></span>用解耦的<br> 详细的说：<br><br><span class=\"hl1\"><span id=\"1_2\">STRUTS</span></span> 在 SSH 框架中起控制的作用 , 其核心是 Controller, 即 ActionServlet, 而 ActionServlet 的核心就是 <span class=\"hl1\"><span id=\"1_3\">Struts</span></span>-confi g.<span id=\"12_nwp\" style=\"width: auto; height: auto; float: none;\"><a target=\"_blank\" id=\"12_nwl\" style=\"text-decoration: none;\" href=\"http://cpro.baidu.com/cpro/ui/uijs.php?adclass=0&amp;app_id=0&amp;c=news&amp;cf=1001&amp;ch=0&amp;di=8&amp;fv=0&amp;is_app=0&amp;jk=282e8b67129dfcab&amp;k=xml&amp;k0=xml&amp;kdi0=0&amp;luki=4&amp;n=10&amp;p=baidu&amp;q=sayyescpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=abfc9d12678b2e28&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;td=1366390&amp;tu=u1366390&amp;u=http%3A%2F%2Fblog%2Eknowsky%2Ecom%2F196587%2Ehtm&amp;urlid=0\" target=\"_blank\" mpid=\"12\"><span style=\"color:#00ff;width: auto; height: auto; font-size: 15px; float: none;\">xml</span></a></span>. 主要控制逻辑关系的处理 .<br><br><span id=\"10_nwp\" style=\"width: auto; height: auto; float: none;\"><a target=\"_blank\" id=\"10_nwl\" style=\"text-decoration: none;\" href=\"http://cpro.baidu.com/cpro/ui/uijs.php?adclass=0&amp;app_id=0&amp;c=news&amp;cf=1001&amp;ch=0&amp;di=8&amp;fv=0&amp;is_app=0&amp;jk=282e8b67129dfcab&amp;k=hibernate&amp;k0=hibernate&amp;kdi0=0&amp;luki=9&amp;n=10&amp;p=baidu&amp;q=sayyescpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=abfc9d12678b2e28&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;td=1366390&amp;tu=u1366390&amp;u=http%3A%2F%2Fblog%2Eknowsky%2Ecom%2F196587%2Ehtm&amp;urlid=0\" target=\"_blank\" mpid=\"10\"><span style=\"color:#00ff;width: auto; height: auto; font-size: 15px; float: none;\">hibernate</span></a></span> 是数据持久化层 , 是一种新的对象、关系的映射工具 , 提供了从 Java 类到数据表的映射，也提供了数据查询和恢复等机制 , 大大减少数据访问的复杂度。把对<span id=\"11_nwp\" style=\"width: auto; height: auto; float: none;\"><a target=\"_blank\" id=\"11_nwl\" style=\"text-decoration: none;\" href=\"http://cpro.baidu.com/cpro/ui/uijs.php?adclass=0&amp;app_id=0&amp;c=news&amp;cf=1001&amp;ch=0&amp;di=8&amp;fv=0&amp;is_app=0&amp;jk=282e8b67129dfcab&amp;k=%CA%FD%BE%DD%BF%E2&amp;k0=%CA%FD%BE%DD%BF%E2&amp;kdi0=0&amp;luki=3&amp;n=10&amp;p=baidu&amp;q=sayyescpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=abfc9d12678b2e28&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;td=1366390&amp;tu=u1366390&amp;u=http%3A%2F%2Fblog%2Eknowsky%2Ecom%2F196587%2Ehtm&amp;urlid=0\" target=\"_blank\" mpid=\"11\"><span style=\"color:#00ff;width: auto; height: auto; font-size: 15px; float: none;\">数据库</span></a></span>的直接操作 , 转换为对持久对象的操作 .<br><br> SPRING 是一个轻量级的控制反转 (IoC) 和面向切面 (AOP) 的容器框架 , 面向接口的<span id=\"8_nwp\" style=\"width: auto; height: auto; float: none;\"><a target=\"_blank\" id=\"8_nwl\" style=\"text-decoration: none;\" href=\"http://cpro.baidu.com/cpro/ui/uijs.php?adclass=0&amp;app_id=0&amp;c=news&amp;cf=1001&amp;ch=0&amp;di=8&amp;fv=0&amp;is_app=0&amp;jk=282e8b67129dfcab&amp;k=%B1%E0%B3%CC&amp;k0=%B1%E0%B3%CC&amp;kdi0=0&amp;luki=2&amp;n=10&amp;p=baidu&amp;q=sayyescpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=abfc9d12678b2e28&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;td=1366390&amp;tu=u1366390&amp;u=http%3A%2F%2Fblog%2Eknowsky%2Ecom%2F196587%2Ehtm&amp;urlid=0\" target=\"_blank\" mpid=\"8\"><span style=\"color:#00ff;width: auto; height: auto; font-size: 15px; float: none;\">编程</span></a></span> , 由容器控制程序之间的（依赖）关系，而非传统实现中，由程序代码直接操控。这也就是所谓 “ 控制反转 ” 的概念所在：（依赖）控制权由应用代码中转到了外部容器，控制权的转移，是所谓反转。依赖注入，即<span id=\"9_nwp\" style=\"width: auto; height: auto; float: none;\"><a target=\"_blank\" id=\"9_nwl\" style=\"text-decoration: none;\" href=\"http://cpro.baidu.com/cpro/ui/uijs.php?adclass=0&amp;app_id=0&amp;c=news&amp;cf=1001&amp;ch=0&amp;di=8&amp;fv=0&amp;is_app=0&amp;jk=282e8b67129dfcab&amp;k=%D7%E9%BC%FE&amp;k0=%D7%E9%BC%FE&amp;kdi0=0&amp;luki=1&amp;n=10&amp;p=baidu&amp;q=sayyescpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=abfc9d12678b2e28&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;td=1366390&amp;tu=u1366390&amp;u=http%3A%2F%2Fblog%2Eknowsky%2Ecom%2F196587%2Ehtm&amp;urlid=0\" target=\"_blank\" mpid=\"9\"><span style=\"color:#00ff;width: auto; height: auto; font-size: 15px; float: none;\">组件</span></a></span>之间的依赖关系由容器在运行期决定，形象的来说，即 由容器动态的将某种依赖关系注入到组件之中<br> 起到的主要作用是解耦<br><br><br><span class=\"hl1\"><span id=\"1_4\">Struts</span></span> 、 <span id=\"7_nwp\" style=\"width: auto; height: auto; float: none;\"><a target=\"_blank\" id=\"7_nwl\" style=\"text-decoration: none;\" href=\"http://cpro.baidu.com/cpro/ui/uijs.php?adclass=0&amp;app_id=0&amp;c=news&amp;cf=1001&amp;ch=0&amp;di=8&amp;fv=0&amp;is_app=0&amp;jk=282e8b67129dfcab&amp;k=spring&amp;k0=spring&amp;kdi0=0&amp;luki=7&amp;n=10&amp;p=baidu&amp;q=sayyescpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=abfc9d12678b2e28&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;td=1366390&amp;tu=u1366390&amp;u=http%3A%2F%2Fblog%2Eknowsky%2Ecom%2F196587%2Ehtm&amp;urlid=0\" target=\"_blank\" mpid=\"7\"><span style=\"color:#00ff;width: auto; height: auto; font-size: 15px; float: none;\">spring</span></a></span> 、 Hibernate 在各层的作用<br><br>1 ） <span class=\"hl1\"><span id=\"1_5\">struts</span></span> 负责 web 层 .<br><br>ActionFormBean 接收网页中表单提交的数据，然后通过 Action 进行处理，再 Forward 到对应的网页。<br><br> 在 <span class=\"hl1\"><span id=\"1_6\">struts</span></span>-config.xml 中定义 &lt;action-mapping&gt;, ActionServlet 会加载。<br><br>2 ） spring 负责业务层管理，即 Service （或 Manager).<br><br> 1 ． service 为 action 提供统计的调用接口，封装持久层的 DAO.<br><br> 2 ．可以写一些自己的业务方法。<br><br> 3 ．统一的 <span id=\"6_nwp\" style=\"width: auto; height: auto; float: none;\"><a target=\"_blank\" id=\"6_nwl\" style=\"text-decoration: none;\" href=\"http://cpro.baidu.com/cpro/ui/uijs.php?adclass=0&amp;app_id=0&amp;c=news&amp;cf=1001&amp;ch=0&amp;di=8&amp;fv=0&amp;is_app=0&amp;jk=282e8b67129dfcab&amp;k=java&amp;k0=java&amp;kdi0=0&amp;luki=8&amp;n=10&amp;p=baidu&amp;q=sayyescpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=abfc9d12678b2e28&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;td=1366390&amp;tu=u1366390&amp;u=http%3A%2F%2Fblog%2Eknowsky%2Ecom%2F196587%2Ehtm&amp;urlid=0\" target=\"_blank\" mpid=\"6\"><span style=\"color:#00ff;width: auto; height: auto; font-size: 15px; float: none;\">java</span></a></span>bean 管理方法<br><br>4 ．声明式事务管理<br><br>5. 集成 Hiberante<br><br> 3 ） Hiberante ，负责持久化层，完成数据库的 crud 操作<br><br>hibernate 为持久层，提供 OR/Mapping 。<br><br> 它有一组 .hbm.<span id=\"4_nwp\" style=\"width: auto; height: auto; float: none;\"><a target=\"_blank\" id=\"4_nwl\" style=\"text-decoration: none;\" href=\"http://cpro.baidu.com/cpro/ui/uijs.php?adclass=0&amp;app_id=0&amp;c=news&amp;cf=1001&amp;ch=0&amp;di=8&amp;fv=0&amp;is_app=0&amp;jk=282e8b67129dfcab&amp;k=xml&amp;k0=xml&amp;kdi0=0&amp;luki=4&amp;n=10&amp;p=baidu&amp;q=sayyescpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=abfc9d12678b2e28&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;td=1366390&amp;tu=u1366390&amp;u=http%3A%2F%2Fblog%2Eknowsky%2Ecom%2F196587%2Ehtm&amp;urlid=0\" target=\"_blank\" mpid=\"4\"><span style=\"color:#00ff;width: auto; height: auto; font-size: 15px; float: none;\">xml</span></a></span> 文件和 POJO, 是跟<span id=\"5_nwp\" style=\"width: auto; height: auto; float: none;\"><a target=\"_blank\" id=\"5_nwl\" style=\"text-decoration: none;\" href=\"http://cpro.baidu.com/cpro/ui/uijs.php?adclass=0&amp;app_id=0&amp;c=news&amp;cf=1001&amp;ch=0&amp;di=8&amp;fv=0&amp;is_app=0&amp;jk=282e8b67129dfcab&amp;k=%CA%FD%BE%DD%BF%E2&amp;k0=%CA%FD%BE%DD%BF%E2&amp;kdi0=0&amp;luki=3&amp;n=10&amp;p=baidu&amp;q=sayyescpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=abfc9d12678b2e28&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;td=1366390&amp;tu=u1366390&amp;u=http%3A%2F%2Fblog%2Eknowsky%2Ecom%2F196587%2Ehtm&amp;urlid=0\" target=\"_blank\" mpid=\"5\"><span style=\"color:#00ff;width: auto; height: auto; font-size: 15px; float: none;\">数据库</span></a></span>中的表相对应的。然后定义 DAO ，这些是跟数据库打交道的类，它们会使用 PO 。<br><br> 在 <span class=\"hl1\"><span id=\"1_7\"><span id=\"0_nwp\" style=\"width: auto; height: auto; float: none;\"><a target=\"_blank\" id=\"0_nwl\" style=\"text-decoration: none;\" href=\"http://cpro.baidu.com/cpro/ui/uijs.php?adclass=0&amp;app_id=0&amp;c=news&amp;cf=1001&amp;ch=0&amp;di=8&amp;fv=0&amp;is_app=0&amp;jk=282e8b67129dfcab&amp;k=struts&amp;k0=struts&amp;kdi0=0&amp;luki=10&amp;n=10&amp;p=baidu&amp;q=sayyescpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=abfc9d12678b2e28&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;td=1366390&amp;tu=u1366390&amp;u=http%3A%2F%2Fblog%2Eknowsky%2Ecom%2F196587%2Ehtm&amp;urlid=0\" target=\"_blank\" mpid=\"0\"><span style=\"color:#00ff;width: auto; height: auto; font-size: 15px; float: none;\">struts</span></a></span></span></span>+<span id=\"2_nwp\" style=\"width: auto; height: auto; float: none;\"><a target=\"_blank\" id=\"2_nwl\" style=\"text-decoration: none;\" href=\"http://cpro.baidu.com/cpro/ui/uijs.php?adclass=0&amp;app_id=0&amp;c=news&amp;cf=1001&amp;ch=0&amp;di=8&amp;fv=0&amp;is_app=0&amp;jk=282e8b67129dfcab&amp;k=spring&amp;k0=spring&amp;kdi0=0&amp;luki=7&amp;n=10&amp;p=baidu&amp;q=sayyescpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=abfc9d12678b2e28&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;td=1366390&amp;tu=u1366390&amp;u=http%3A%2F%2Fblog%2Eknowsky%2Ecom%2F196587%2Ehtm&amp;urlid=0\" target=\"_blank\" mpid=\"2\"><span style=\"color:#00ff;width: auto; height: auto; font-size: 15px; float: none;\">spring</span></a></span>+<span id=\"3_nwp\" style=\"width: auto; height: auto; float: none;\"><a target=\"_blank\" id=\"3_nwl\" style=\"text-decoration: none;\" href=\"http://cpro.baidu.com/cpro/ui/uijs.php?adclass=0&amp;app_id=0&amp;c=news&amp;cf=1001&amp;ch=0&amp;di=8&amp;fv=0&amp;is_app=0&amp;jk=282e8b67129dfcab&amp;k=hibernate&amp;k0=hibernate&amp;kdi0=0&amp;luki=9&amp;n=10&amp;p=baidu&amp;q=sayyescpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=abfc9d12678b2e28&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;td=1366390&amp;tu=u1366390&amp;u=http%3A%2F%2Fblog%2Eknowsky%2Ecom%2F196587%2Ehtm&amp;urlid=0\" target=\"_blank\" mpid=\"3\"><span style=\"color:#00ff;width: auto; height: auto; font-size: 15px; float: none;\">hibernate</span></a></span> 的系统中，<br><br> 对象的调用流程是： <span id=\"1_nwp\" style=\"width: auto; height: auto; float: none;\"><a target=\"_blank\" id=\"1_nwl\" style=\"text-decoration: none;\" href=\"http://cpro.baidu.com/cpro/ui/uijs.php?adclass=0&amp;app_id=0&amp;c=news&amp;cf=1001&amp;ch=0&amp;di=8&amp;fv=0&amp;is_app=0&amp;jk=282e8b67129dfcab&amp;k=jsp&amp;k0=jsp&amp;kdi0=0&amp;luki=6&amp;n=10&amp;p=baidu&amp;q=sayyescpr&amp;rb=0&amp;rs=1&amp;seller_id=1&amp;sid=abfc9d12678b2e28&amp;ssp2=1&amp;stid=0&amp;t=tpclicked3_hc&amp;td=1366390&amp;tu=u1366390&amp;u=http%3A%2F%2Fblog%2Eknowsky%2Ecom%2F196587%2Ehtm&amp;urlid=0\" target=\"_blank\" mpid=\"1\"><span style=\"color:#00ff;width: auto; height: auto; font-size: 15px; float: none;\">jsp</span></a></span>-&gt; Action － &gt; Service -&gt;DAO -&gt;Hibernate 。<br><br> 数据的流向是 ActionFormBean 接受用户的数据， Action 将数据从 ActionFromBean 中取出，封装成 VO 或 PO,<br><br>再调用业务层的 Bean 类，完成各种业务处理后再 forward 。而业务层 Bean 收到这个 PO 对象之后，会调用 DAO 接口方法，进行持久化操作。</div>   \n', '2016-04-16 01:21:15', '1');
INSERT INTO `article` VALUES ('10057', '10003', 'Spring与Struts区别联系', '\n<p>区别联系<br>1. 实现机制<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; struts2框架是类级别的拦截，每次来了请求就创建一个controller中对应的Action，然后调用setter getter方法把request中的数据注入 。struts2实际上是通过setter getter方法与request打交道的。struts2中，一个Action对象对应一个request上下文。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; spring3 mvc不同，spring3mvc是方法级别的拦截，拦截到方法后根据参数上的注解，把request数据注入进去。在spring3mvc中，一个方法对应一个request上下文，而方法同时又跟一个url对应。所以说从架构本身上 spring3 mvc就容易实现restful url。而struts2的架构实现起来要费劲，因为struts2 action的一个方法可以对应一个url，而其类属性却被所有方法共享，这也就无法用注解或其他方式标识其所属方法。<br>&nbsp;&nbsp; spring mvc的入口是servlet，而struts2是filter（这里要指出，filter和servlet是不同的）<br>spring MVC会稍微比struts快。</p><p>2. Request数据共享<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; spring3mvc的方法之间基本上独立的，独享request response数据。请求数据通过参数获取，处理结果通过ModelMap交回给框架，方法之间不共享变量。而struts2搞的就比较乱，虽然方法之间也是独立的，但其所有Action变量是共享的。这不会影响程序运行，却给我们编码、读程序时带来麻烦 。</p><p>3. 参数传<br>&nbsp;&nbsp; struts是在接受参数的时候，可以用属性来接受参数，这就说明参数是让多个方法共享的。</p><p>4. 设计思想上<br>&nbsp;&nbsp;&nbsp; struts更加符合oop的编程思想， spring就比较谨慎，在servlet上扩展。</p><p>5. intercepter的实现机制<br>&nbsp;&nbsp; struts有以自己的interceptor机制，spring mvc用的是独立的AOP方式。这样导致struts的配置文件量还是比spring mvc大，虽然struts的配置能继承，所以我觉得论使用上来讲，spring mvc使用更加简洁，开发效率Spring MVC确实比struts2高。<br>&nbsp;&nbsp;&nbsp; spring mvc是方法级别的拦截，一个方法对应一个request上下文，而方法同时又跟一个url对应，所以说从架构本身上spring3 mvc就容易实现restful url。struts2是类级别的拦截，一个类对应一个request上下文；实现restful url要费劲，因为struts2 action的一个方法可以对应一个url；而其类属性却被所有方法共享，这也就无法用注解或其他方式标识其所属方法了。spring3 mvc的方法之间基本上独立的，独享request response数据，请求数据通过参数获取，处理结果通过ModelMap交回给框架方法之间不共享变量，而struts2搞的就比较乱，虽然方法之间也是独立的，但其所有Action变量是共享的，这不会影响程序运行，却给我们编码，读程序时带来麻烦。</p><p>6. 另外，spring3 mvc的验证也是一个亮点，支持JSR303<br>&nbsp;&nbsp; ajax的请求更是方便，只需一个注解@ResponseBody ，然后直接返回响应文本即可。送上一段代码：</p>   \n', '2016-04-16 01:21:15', '0');
INSERT INTO `article` VALUES ('10058', '10003', 'MyBatis学习（6）------------MyBatis和Spring的整合', '\n<h2>一、搭建开发环境</h2><h3>1.1、使用Maven创建Web项目</h3><p>　　执行如下命令：</p><div class=\"cnblogs_code\"><pre>mvn archetype:create -DgroupId=me.gacl -DartifactId=spring4-mybatis3 -DarchetypeArtifactId=maven-archetype-webapp -DinteractiveMode=false</pre></div><p>　　如下图所示：<br>　　<img alt=\"\" src=\"http://images.cnitblog.com/blog/289233/201502/061204098903280.png\"></p><p>　　创建好的项目如下：</p><p>　　<img style=\"border: 1px solid black;\" alt=\"\" src=\"http://images.cnitblog.com/blog/289233/201502/061206074994011.png\"></p><p>　　编辑pom.xml文件</p><div class=\"cnblogs_code\"><div class=\"cnblogs_code_toolbar\"><span class=\"cnblogs_code_copy\"></span></div><pre><span style=\"color:#08080;\"> 1</span> <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">project </span><span style=\"color:#ff00;\">xmlns</span><span style=\"color:#00ff;\">=&quot;http://maven.apache.org/POM/4.0.0&quot;</span><span style=\"color:#ff00;\"> xmlns:xsi</span><span style=\"color:#00ff;\">=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>\n<span style=\"color:#08080;\"> 2</span> <span style=\"color:#ff00;\">  xsi:schemaLocation</span><span style=\"color:#00ff;\">=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 3</span>   <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">modelVersion</span><span style=\"color:#00ff;\">&gt;</span>4.0.0<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">modelVersion</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 4</span>   <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">groupId</span><span style=\"color:#00ff;\">&gt;</span>me.gacl<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">groupId</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 5</span>   <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">artifactId</span><span style=\"color:#00ff;\">&gt;</span>spring4-mybatis3<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">artifactId</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 6</span>   <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">packaging</span><span style=\"color:#00ff;\">&gt;</span>war<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">packaging</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 7</span>   <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">version</span><span style=\"color:#00ff;\">&gt;</span>1.0-SNAPSHOT<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">version</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 8</span>   <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">name</span><span style=\"color:#00ff;\">&gt;</span>spring4-mybatis3 Maven Webapp<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">name</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 9</span>   <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">url</span><span style=\"color:#00ff;\">&gt;</span>http://maven.apache.org<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">url</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">10</span>   <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">dependencies</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">11</span>     <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">dependency</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">12</span>       <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">groupId</span><span style=\"color:#00ff;\">&gt;</span>junit<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">groupId</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">13</span>       <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">artifactId</span><span style=\"color:#00ff;\">&gt;</span>junit<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">artifactId</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">14</span>       <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">version</span><span style=\"color:#00ff;\">&gt;</span>3.8.1<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">version</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">15</span>       <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">scope</span><span style=\"color:#00ff;\">&gt;</span>test<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">scope</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">16</span>     <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">dependency</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">17</span>   <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">dependencies</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">18</span>   <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">build</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">19</span>     <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">finalName</span><span style=\"color:#00ff;\">&gt;</span>spring4-mybatis3<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">finalName</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">20</span>   <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">build</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">21</span> <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">project</span><span style=\"color:#00ff;\">&gt;</span></pre><div class=\"cnblogs_code_toolbar\"><span class=\"cnblogs_code_copy\"></span></div></div><p>　　修改&nbsp;<span class=\"cnblogs_code\"><span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">name</span><span style=\"color:#00ff;\">&gt;</span>spring4-mybatis3 Maven Webapp<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">name</span><span style=\"color:#00ff;\">&gt;</span></span>&nbsp;部分，把&quot;&nbsp;Maven Webapp&quot;这部分包含空格的内容去掉，否则Maven在编译项目时会因为空格的原因导致一些莫名其妙的错误出现，修改成：&nbsp;<span class=\"cnblogs_code\"><span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">name</span><span style=\"color:#00ff;\">&gt;</span>spring4-mybatis3<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">name</span><span style=\"color:#00ff;\">&gt;</span></span>&nbsp;。</p><p>　　另外，把以下内容删掉：</p><div class=\"cnblogs_code\"><div class=\"cnblogs_code_toolbar\"><span class=\"cnblogs_code_copy\"></span></div><pre><span style=\"color:#08080;\">1</span> <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">dependency</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">2</span>       <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">groupId</span><span style=\"color:#00ff;\">&gt;</span>junit<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">groupId</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">3</span>       <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">artifactId</span><span style=\"color:#00ff;\">&gt;</span>junit<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">artifactId</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">4</span>       <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">version</span><span style=\"color:#00ff;\">&gt;</span>3.8.1<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">version</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">5</span>       <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">scope</span><span style=\"color:#00ff;\">&gt;</span>test<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">scope</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">6</span> <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">dependency</span><span style=\"color:#00ff;\">&gt;</span></pre><div class=\"cnblogs_code_toolbar\"><span class=\"cnblogs_code_copy\"></span></div></div><p>　　这部分是junit的jar包依赖信息，这个版本太低了，我们不使用这个Junit测试版本，修改过后的pom.xml内容如下：</p><div class=\"cnblogs_code\"><div class=\"cnblogs_code_toolbar\"><span class=\"cnblogs_code_copy\"></span></div><pre><span style=\"color:#08080;\"> 1</span> <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">project </span><span style=\"color:#ff00;\">xmlns</span><span style=\"color:#00ff;\">=&quot;http://maven.apache.org/POM/4.0.0&quot;</span><span style=\"color:#ff00;\"> xmlns:xsi</span><span style=\"color:#00ff;\">=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>\n<span style=\"color:#08080;\"> 2</span> <span style=\"color:#ff00;\">  xsi:schemaLocation</span><span style=\"color:#00ff;\">=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 3</span>   <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">modelVersion</span><span style=\"color:#00ff;\">&gt;</span>4.0.0<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">modelVersion</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 4</span>   <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">groupId</span><span style=\"color:#00ff;\">&gt;</span>me.gacl<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">groupId</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 5</span>   <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">artifactId</span><span style=\"color:#00ff;\">&gt;</span>spring4-mybatis3<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">artifactId</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 6</span>   <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">packaging</span><span style=\"color:#00ff;\">&gt;</span>war<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">packaging</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 7</span>   <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">version</span><span style=\"color:#00ff;\">&gt;</span>1.0-SNAPSHOT<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">version</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 8</span>   <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">name</span><span style=\"color:#00ff;\">&gt;</span>spring4-mybatis3<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">name</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 9</span>   <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">url</span><span style=\"color:#00ff;\">&gt;</span>http://maven.apache.org<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">url</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">10</span>   <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">dependencies</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">11</span>     \n<span style=\"color:#08080;\">12</span>   <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">dependencies</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">13</span>   <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">build</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">14</span>     <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">finalName</span><span style=\"color:#00ff;\">&gt;</span>spring4-mybatis3<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">finalName</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">15</span>   <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">build</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">16</span> <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">project</span><span style=\"color:#00ff;\">&gt;</span></pre><div class=\"cnblogs_code_toolbar\"><span class=\"cnblogs_code_copy\"></span></div></div><h3>1.2、将创建好的项目导入MyEclipse中</h3><p>　　具体操作步骤如下图所示：</p><p>　　<img alt=\"\" src=\"http://images.cnitblog.com/blog/289233/201502/061221145152942.png\"></p><p>　　<img alt=\"\" src=\"http://images.cnitblog.com/blog/289233/201502/061222321243786.png\"></p><p>　　<img alt=\"\" src=\"http://images.cnitblog.com/blog/289233/201502/061224323121503.png\"></p><p>　　<img alt=\"\" src=\"http://images.cnitblog.com/blog/289233/201502/061226060627144.png\"></p><p>　　<img style=\"border: 1px solid black;\" alt=\"\" src=\"http://images.cnitblog.com/blog/289233/201502/061227222819528.png\"></p><p>　　手动创建【src/main/java】、【src/test/resources】、【src/test/java】这三个source folder，如下图所示：</p><p>　　<img style=\"border: 1px solid black;\" alt=\"\" src=\"http://images.cnitblog.com/blog/289233/201502/061320474999342.png\"></p><p>　　到此，项目搭建的工作就算是全部完成了。</p><h2>二、创建数据库和表(针对MySQL)</h2><p>SQL脚本如下：</p><div class=\"cnblogs_code\"><div class=\"cnblogs_code_toolbar\"><span class=\"cnblogs_code_copy\"></span></div><pre><span style=\"color:#00ff;\">Create</span> <span style=\"color:#00ff;\">DATABASE</span> spring4_mybatis3;\n<span style=\"color:#00ff;\">USE</span> spring4_mybatis3;\n\n<span style=\"color:#00ff;\">DROP</span> <span style=\"color:#00ff;\">TABLE</span> <span style=\"color:#00ff;\">IF</span> <span style=\"color:#808080;\">EXISTS</span> t_user;\n<span style=\"color:#00ff;\">CREATE</span> <span style=\"color:#00ff;\">TABLE</span> t_user (\n  <span style=\"color:#ff0ff;\">user_id</span> <span style=\"color:#00ff;\">char</span>(<span style=\"color:#8000;\"><strong>32</strong></span>) <span style=\"color:#808080;\">NOT</span> <span style=\"color:#00ff;\">NULL</span>,\n  <span style=\"color:#ff0ff;\">user_name</span> <span style=\"color:#00ff;\">varchar</span>(<span style=\"color:#8000;\"><strong>30</strong></span>) <span style=\"color:#00ff;\">DEFAULT</span> <span style=\"color:#00ff;\">NULL</span>,\n  user_birthday date <span style=\"color:#00ff;\">DEFAULT</span> <span style=\"color:#00ff;\">NULL</span>,\n  user_salary <span style=\"color:#00ff;\">double</span> <span style=\"color:#00ff;\">DEFAULT</span> <span style=\"color:#00ff;\">NULL</span>,\n  <span style=\"color:#00ff;\">PRIMARY</span> <span style=\"color:#00ff;\">KEY</span> (<span style=\"color:#ff0ff;\">user_id</span>)\n) ENGINE<span style=\"color:#808080;\">=</span>InnoDB <span style=\"color:#00ff;\">DEFAULT</span> CHARSET<span style=\"color:#808080;\">=</span>utf8;</pre><div class=\"cnblogs_code_toolbar\"><span class=\"cnblogs_code_copy\"></span></div></div><p>　　创建好的数据库和表如下：</p><p>　　<img style=\"border: 1px solid black;\" alt=\"\" src=\"http://images.cnitblog.com/blog/289233/201502/061332247034876.png\"></p><h2>三、使用generator工具生成代码</h2><p>　　在网上找到了一个generator工具可以根据创建好的数据库表生成MyBatis的表对应的实体类，SQL映射文件和dao，找到generator工具根目录下的generator.xml文件，这个文件是用来配置代码生成规则的，如下图所示：</p><p>　　<img style=\"border: 1px solid black;\" alt=\"\" src=\"http://images.cnitblog.com/blog/289233/201502/061336050789568.png\"></p><p>　　编辑generator.xml文件，内容如下：</p><div class=\"cnblogs_code\"><div class=\"cnblogs_code_toolbar\"><span class=\"cnblogs_code_copy\"></span></div><pre><span style=\"color:#08080;\"> 1</span> <span style=\"color:#00ff;\">&lt;?</span><span style=\"color:#ff0ff;\">xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;</span><span style=\"color:#00ff;\">?&gt;</span>\n<span style=\"color:#08080;\"> 2</span> <span style=\"color:#00ff;\">&lt;!</span><span style=\"color:#ff0ff;\">DOCTYPE generatorConfiguration PUBLIC &quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 3</span> <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">generatorConfiguration</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 4</span>     <span style=\"color:#0800;\">&lt;!--</span><span style=\"color:#0800;\"> 数据库驱动包位置 </span><span style=\"color:#0800;\">--&gt;</span>\n<span style=\"color:#08080;\"> 5</span>     <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">classPathEntry </span><span style=\"color:#ff00;\">location</span><span style=\"color:#00ff;\">=&quot;E:\\repository\\mysql\\mysql-connector-java\\5.1.34\\mysql-connector-java-5.1.34.jar&quot;</span> <span style=\"color:#00ff;\">/&gt;</span> \n<span style=\"color:#08080;\"> 6</span>     <span style=\"color:#0800;\">&lt;!--</span><span style=\"color:#0800;\"> &lt;classPathEntry location=&quot;C:\\oracle\\product\\10.2.0\\db_1\\jdbc\\lib\\ojdbc14.jar&quot; /&gt;</span><span style=\"color:#0800;\">--&gt;</span>\n<span style=\"color:#08080;\"> 7</span>     <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">context </span><span style=\"color:#ff00;\">id</span><span style=\"color:#00ff;\">=&quot;DB2Tables&quot;</span><span style=\"color:#ff00;\"> targetRuntime</span><span style=\"color:#00ff;\">=&quot;MyBatis3&quot;</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 8</span>         <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">commentGenerator</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 9</span>             <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">property </span><span style=\"color:#ff00;\">name</span><span style=\"color:#00ff;\">=&quot;suppressAllComments&quot;</span><span style=\"color:#ff00;\"> value</span><span style=\"color:#00ff;\">=&quot;true&quot;</span> <span style=\"color:#00ff;\">/&gt;</span>\n<span style=\"color:#08080;\">10</span>         <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">commentGenerator</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">11</span>         <span style=\"color:#0800;\">&lt;!--</span><span style=\"color:#0800;\"> 数据库链接URL、用户名、密码 </span><span style=\"color:#0800;\">--&gt;</span>\n<span style=\"color:#08080;\">12</span>          <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">jdbcConnection </span><span style=\"color:#ff00;\">driverClass</span><span style=\"color:#00ff;\">=&quot;com.mysql.jdbc.Driver&quot;</span><span style=\"color:#ff00;\"> connectionURL</span><span style=\"color:#00ff;\">=&quot;jdbc:mysql://localhost:3306/spring4_mybatis3&quot;</span><span style=\"color:#ff00;\"> userId</span><span style=\"color:#00ff;\">=&quot;root&quot;</span><span style=\"color:#ff00;\"> password</span><span style=\"color:#00ff;\">=&quot;XDP&quot;</span><span style=\"color:#00ff;\">&gt;</span> \n<span style=\"color:#08080;\">13</span>         <span style=\"color:#0800;\">&lt;!--</span><span style=\"color:#0800;\">&lt;jdbcConnection driverClass=&quot;oracle.jdbc.driver.OracleDriver&quot; connectionURL=&quot;jdbc:oracle:thin:@localhost:1521:orcl&quot; userId=&quot;msa&quot; password=&quot;msa&quot;&gt;</span><span style=\"color:#0800;\">--&gt;</span>\n<span style=\"color:#08080;\">14</span>         <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">jdbcConnection</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">15</span>         <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">javaTypeResolver</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">16</span>             <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">property </span><span style=\"color:#ff00;\">name</span><span style=\"color:#00ff;\">=&quot;forceBigDecimals&quot;</span><span style=\"color:#ff00;\"> value</span><span style=\"color:#00ff;\">=&quot;false&quot;</span> <span style=\"color:#00ff;\">/&gt;</span>\n<span style=\"color:#08080;\">17</span>         <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">javaTypeResolver</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">18</span>         <span style=\"color:#0800;\">&lt;!--</span><span style=\"color:#0800;\"> 生成实体类的包名和位置，这里配置将生成的实体类放在me.gacl.domain这个包下 </span><span style=\"color:#0800;\">--&gt;</span>\n<span style=\"color:#08080;\">19</span>         <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">javaModelGenerator </span><span style=\"color:#ff00;\">targetPackage</span><span style=\"color:#00ff;\">=&quot;me.gacl.domain&quot;</span><span style=\"color:#ff00;\"> targetProject</span><span style=\"color:#00ff;\">=&quot;C:\\Users\\gacl\\spring4-mybatis3\\src\\main\\java&quot;</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">20</span>             <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">property </span><span style=\"color:#ff00;\">name</span><span style=\"color:#00ff;\">=&quot;enableSubPackages&quot;</span><span style=\"color:#ff00;\"> value</span><span style=\"color:#00ff;\">=&quot;true&quot;</span> <span style=\"color:#00ff;\">/&gt;</span>\n<span style=\"color:#08080;\">21</span>             <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">property </span><span style=\"color:#ff00;\">name</span><span style=\"color:#00ff;\">=&quot;trimStrings&quot;</span><span style=\"color:#ff00;\"> value</span><span style=\"color:#00ff;\">=&quot;true&quot;</span> <span style=\"color:#00ff;\">/&gt;</span>\n<span style=\"color:#08080;\">22</span>         <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">javaModelGenerator</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">23</span>         <span style=\"color:#0800;\">&lt;!--</span><span style=\"color:#0800;\"> 生成的SQL映射文件包名和位置，这里配置将生成的SQL映射文件放在me.gacl.mapping这个包下 </span><span style=\"color:#0800;\">--&gt;</span>\n<span style=\"color:#08080;\">24</span>         <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">sqlMapGenerator </span><span style=\"color:#ff00;\">targetPackage</span><span style=\"color:#00ff;\">=&quot;me.gacl.mapping&quot;</span><span style=\"color:#ff00;\"> targetProject</span><span style=\"color:#00ff;\">=&quot;C:\\Users\\gacl\\spring4-mybatis3\\src\\main\\java&quot;</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">25</span>             <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">property </span><span style=\"color:#ff00;\">name</span><span style=\"color:#00ff;\">=&quot;enableSubPackages&quot;</span><span style=\"color:#ff00;\"> value</span><span style=\"color:#00ff;\">=&quot;true&quot;</span> <span style=\"color:#00ff;\">/&gt;</span>\n<span style=\"color:#08080;\">26</span>         <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">sqlMapGenerator</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">27</span>         <span style=\"color:#0800;\">&lt;!--</span><span style=\"color:#0800;\"> 生成DAO的包名和位置，这里配置将生成的dao类放在me.gacl.dao这个包下 </span><span style=\"color:#0800;\">--&gt;</span>\n<span style=\"color:#08080;\">28</span>         <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">javaClientGenerator </span><span style=\"color:#ff00;\">type</span><span style=\"color:#00ff;\">=&quot;XMLMAPPER&quot;</span><span style=\"color:#ff00;\"> targetPackage</span><span style=\"color:#00ff;\">=&quot;me.gacl.dao&quot;</span><span style=\"color:#ff00;\"> targetProject</span><span style=\"color:#00ff;\">=&quot;C:\\Users\\gacl\\spring4-mybatis3\\src\\main\\java&quot;</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">29</span>             <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">property </span><span style=\"color:#ff00;\">name</span><span style=\"color:#00ff;\">=&quot;enableSubPackages&quot;</span><span style=\"color:#ff00;\"> value</span><span style=\"color:#00ff;\">=&quot;true&quot;</span> <span style=\"color:#00ff;\">/&gt;</span>\n<span style=\"color:#08080;\">30</span>         <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">javaClientGenerator</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">31</span>         <span style=\"color:#0800;\">&lt;!--</span><span style=\"color:#0800;\"> 要生成那些表(更改tableName和domainObjectName就可以) </span><span style=\"color:#0800;\">--&gt;</span>\n<span style=\"color:#08080;\">32</span>         <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">table </span><span style=\"color:#ff00;\">tableName</span><span style=\"color:#00ff;\">=&quot;t_user&quot;</span><span style=\"color:#ff00;\"> domainObjectName</span><span style=\"color:#00ff;\">=&quot;User&quot;</span><span style=\"color:#ff00;\"> enableCountByExample</span><span style=\"color:#00ff;\">=&quot;false&quot;</span><span style=\"color:#ff00;\"> enableUpdateByExample</span><span style=\"color:#00ff;\">=&quot;false&quot;</span><span style=\"color:#ff00;\"> enableDeleteByExample</span><span style=\"color:#00ff;\">=&quot;false&quot;</span><span style=\"color:#ff00;\"> enableSelectByExample</span><span style=\"color:#00ff;\">=&quot;false&quot;</span><span style=\"color:#ff00;\"> selectByExampleQueryId</span><span style=\"color:#00ff;\">=&quot;false&quot;</span> <span style=\"color:#00ff;\">/&gt;</span>\n<span style=\"color:#08080;\">33</span>     <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">context</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">34</span> <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">generatorConfiguration</span><span style=\"color:#00ff;\">&gt;</span></pre><div class=\"cnblogs_code_toolbar\"><span class=\"cnblogs_code_copy\"></span></div></div><p>　　打开命令行窗口，切换到生成工具的根目录下，执行如下命令：</p><div class=\"cnblogs_code\"><pre>java -jar mybatis-generator-core-1.3.2.jar -configfile generator.xml -overwrite</pre></div><p>　　如下图所示：<br>　　<img alt=\"\" src=\"http://images.cnitblog.com/blog/289233/201502/061351006245763.png\"></p><p>　　刚才我们在generator.xml文件中配置将生成的代码和SQL映射文件放到&quot;C:\\Users\\gacl\\spring4-mybatis3\\src\\main\\java&quot;这个目录下，这个目录就是我们的spring4-mybatis3项目所在目录，我们刷新一下src/main/java目录，就可以看到生成的代码和映射文件了，如下图所示：</p><p>　　<img style=\"border: 1px solid black;\" alt=\"\" src=\"http://images.cnitblog.com/blog/289233/201502/061358016245247.png\"></p><p>　　生成的代码和映射文件一行都不用改，可以直接应用到项目当中。下面我们看一眼由generator工具生成的代码和映射文件：</p><p>　　1、生成的dao类</p><div class=\"cnblogs_code\"><div class=\"cnblogs_code_toolbar\"><span class=\"cnblogs_code_copy\"></span></div><pre><span style=\"color:#08080;\"> 1</span> <span style=\"color:#00ff;\">package</span> me.gacl.dao;\n<span style=\"color:#08080;\"> 2</span> \n<span style=\"color:#08080;\"> 3</span> <span style=\"color:#00ff;\">import</span> me.gacl.domain.User;\n<span style=\"color:#08080;\"> 4</span> \n<span style=\"color:#08080;\"> 5</span> <span style=\"color:#00ff;\">public</span> <span style=\"color:#00ff;\">interface</span> UserMapper {\n<span style=\"color:#08080;\"> 6</span>     <span style=\"color:#00ff;\">int</span> deleteByPrimaryKey(String userId);\n<span style=\"color:#08080;\"> 7</span> \n<span style=\"color:#08080;\"> 8</span>     <span style=\"color:#00ff;\">int</span> insert(User record);\n<span style=\"color:#08080;\"> 9</span> \n<span style=\"color:#08080;\">10</span>     <span style=\"color:#00ff;\">int</span> insertSelective(User record);\n<span style=\"color:#08080;\">11</span> \n<span style=\"color:#08080;\">12</span>     User selectByPrimaryKey(String userId);\n<span style=\"color:#08080;\">13</span> \n<span style=\"color:#08080;\">14</span>     <span style=\"color:#00ff;\">int</span> updateByPrimaryKeySelective(User record);\n<span style=\"color:#08080;\">15</span> \n<span style=\"color:#08080;\">16</span>     <span style=\"color:#00ff;\">int</span> updateByPrimaryKey(User record);\n<span style=\"color:#08080;\">17</span> }</pre><div class=\"cnblogs_code_toolbar\"><span class=\"cnblogs_code_copy\"></span></div></div><p>　　生成的UserMapper是一个接口，里面定义了一些操作t_user表的增删改查方法。</p><p>2、生成的实体类</p><div class=\"cnblogs_code\"><div class=\"cnblogs_code_toolbar\"><span class=\"cnblogs_code_copy\"></span></div><pre><span style=\"color:#08080;\"> 1</span> <span style=\"color:#00ff;\">package</span> me.gacl.domain;\n<span style=\"color:#08080;\"> 2</span> \n<span style=\"color:#08080;\"> 3</span> <span style=\"color:#00ff;\">import</span> java.util.Date;\n<span style=\"color:#08080;\"> 4</span> \n<span style=\"color:#08080;\"> 5</span> <span style=\"color:#00ff;\">public</span> <span style=\"color:#00ff;\">class</span> User {\n<span style=\"color:#08080;\"> 6</span>     <span style=\"color:#00ff;\">private</span> String userId;\n<span style=\"color:#08080;\"> 7</span> \n<span style=\"color:#08080;\"> 8</span>     <span style=\"color:#00ff;\">private</span> String userName;\n<span style=\"color:#08080;\"> 9</span> \n<span style=\"color:#08080;\">10</span>     <span style=\"color:#00ff;\">private</span> Date userBirthday;\n<span style=\"color:#08080;\">11</span> \n<span style=\"color:#08080;\">12</span>     <span style=\"color:#00ff;\">private</span> Double userSalary;\n<span style=\"color:#08080;\">13</span> \n<span style=\"color:#08080;\">14</span>     <span style=\"color:#00ff;\">public</span> String getUserId() {\n<span style=\"color:#08080;\">15</span>         <span style=\"color:#00ff;\">return</span> userId;\n<span style=\"color:#08080;\">16</span>     }\n<span style=\"color:#08080;\">17</span> \n<span style=\"color:#08080;\">18</span>     <span style=\"color:#00ff;\">public</span> <span style=\"color:#00ff;\">void</span> setUserId(String userId) {\n<span style=\"color:#08080;\">19</span>         <span style=\"color:#00ff;\">this</span>.userId = userId == <span style=\"color:#00ff;\">null</span> ? <span style=\"color:#00ff;\">null</span> : userId.trim();\n<span style=\"color:#08080;\">20</span>     }\n<span style=\"color:#08080;\">21</span> \n<span style=\"color:#08080;\">22</span>     <span style=\"color:#00ff;\">public</span> String getUserName() {\n<span style=\"color:#08080;\">23</span>         <span style=\"color:#00ff;\">return</span> userName;\n<span style=\"color:#08080;\">24</span>     }\n<span style=\"color:#08080;\">25</span> \n<span style=\"color:#08080;\">26</span>     <span style=\"color:#00ff;\">public</span> <span style=\"color:#00ff;\">void</span> setUserName(String userName) {\n<span style=\"color:#08080;\">27</span>         <span style=\"color:#00ff;\">this</span>.userName = userName == <span style=\"color:#00ff;\">null</span> ? <span style=\"color:#00ff;\">null</span> : userName.trim();\n<span style=\"color:#08080;\">28</span>     }\n<span style=\"color:#08080;\">29</span> \n<span style=\"color:#08080;\">30</span>     <span style=\"color:#00ff;\">public</span> Date getUserBirthday() {\n<span style=\"color:#08080;\">31</span>         <span style=\"color:#00ff;\">return</span> userBirthday;\n<span style=\"color:#08080;\">32</span>     }\n<span style=\"color:#08080;\">33</span> \n<span style=\"color:#08080;\">34</span>     <span style=\"color:#00ff;\">public</span> <span style=\"color:#00ff;\">void</span> setUserBirthday(Date userBirthday) {\n<span style=\"color:#08080;\">35</span>         <span style=\"color:#00ff;\">this</span>.userBirthday = userBirthday;\n<span style=\"color:#08080;\">36</span>     }\n<span style=\"color:#08080;\">37</span> \n<span style=\"color:#08080;\">38</span>     <span style=\"color:#00ff;\">public</span> Double getUserSalary() {\n<span style=\"color:#08080;\">39</span>         <span style=\"color:#00ff;\">return</span> userSalary;\n<span style=\"color:#08080;\">40</span>     }\n<span style=\"color:#08080;\">41</span> \n<span style=\"color:#08080;\">42</span>     <span style=\"color:#00ff;\">public</span> <span style=\"color:#00ff;\">void</span> setUserSalary(Double userSalary) {\n<span style=\"color:#08080;\">43</span>         <span style=\"color:#00ff;\">this</span>.userSalary = userSalary;\n<span style=\"color:#08080;\">44</span>     }\n<span style=\"color:#08080;\">45</span> }</pre><div class=\"cnblogs_code_toolbar\"><span class=\"cnblogs_code_copy\"></span></div></div><p>　　User类是t_user表的对应的实体类，User类中定义的属性和t_user表中的字段一一对应。</p><p>　　3、生成的SQL映射文件</p><div class=\"cnblogs_code\"><div class=\"cnblogs_code_toolbar\"><span class=\"cnblogs_code_copy\"></span></div><pre><span style=\"color:#08080;\"> 1</span> <span style=\"color:#00ff;\">&lt;?</span><span style=\"color:#ff0ff;\">xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; </span><span style=\"color:#00ff;\">?&gt;</span>\n<span style=\"color:#08080;\"> 2</span> <span style=\"color:#00ff;\">&lt;!</span><span style=\"color:#ff0ff;\">DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot; </span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 3</span> <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">mapper </span><span style=\"color:#ff00;\">namespace</span><span style=\"color:#00ff;\">=&quot;me.gacl.dao.UserMapper&quot;</span> <span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 4</span>   <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">resultMap </span><span style=\"color:#ff00;\">id</span><span style=\"color:#00ff;\">=&quot;BaseResultMap&quot;</span><span style=\"color:#ff00;\"> type</span><span style=\"color:#00ff;\">=&quot;me.gacl.domain.User&quot;</span> <span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 5</span>     <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">id </span><span style=\"color:#ff00;\">column</span><span style=\"color:#00ff;\">=&quot;user_id&quot;</span><span style=\"color:#ff00;\"> property</span><span style=\"color:#00ff;\">=&quot;userId&quot;</span><span style=\"color:#ff00;\"> jdbcType</span><span style=\"color:#00ff;\">=&quot;CHAR&quot;</span> <span style=\"color:#00ff;\">/&gt;</span>\n<span style=\"color:#08080;\"> 6</span>     <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">result </span><span style=\"color:#ff00;\">column</span><span style=\"color:#00ff;\">=&quot;user_name&quot;</span><span style=\"color:#ff00;\"> property</span><span style=\"color:#00ff;\">=&quot;userName&quot;</span><span style=\"color:#ff00;\"> jdbcType</span><span style=\"color:#00ff;\">=&quot;VARCHAR&quot;</span> <span style=\"color:#00ff;\">/&gt;</span>\n<span style=\"color:#08080;\"> 7</span>     <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">result </span><span style=\"color:#ff00;\">column</span><span style=\"color:#00ff;\">=&quot;user_birthday&quot;</span><span style=\"color:#ff00;\"> property</span><span style=\"color:#00ff;\">=&quot;userBirthday&quot;</span><span style=\"color:#ff00;\"> jdbcType</span><span style=\"color:#00ff;\">=&quot;DATE&quot;</span> <span style=\"color:#00ff;\">/&gt;</span>\n<span style=\"color:#08080;\"> 8</span>     <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">result </span><span style=\"color:#ff00;\">column</span><span style=\"color:#00ff;\">=&quot;user_salary&quot;</span><span style=\"color:#ff00;\"> property</span><span style=\"color:#00ff;\">=&quot;userSalary&quot;</span><span style=\"color:#ff00;\"> jdbcType</span><span style=\"color:#00ff;\">=&quot;DOUBLE&quot;</span> <span style=\"color:#00ff;\">/&gt;</span>\n<span style=\"color:#08080;\"> 9</span>   <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">resultMap</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">10</span>   <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">sql </span><span style=\"color:#ff00;\">id</span><span style=\"color:#00ff;\">=&quot;Base_Column_List&quot;</span> <span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">11</span>     user_id, user_name, user_birthday, user_salary\n<span style=\"color:#08080;\">12</span>   <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">sql</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">13</span>   <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">select </span><span style=\"color:#ff00;\">id</span><span style=\"color:#00ff;\">=&quot;selectByPrimaryKey&quot;</span><span style=\"color:#ff00;\"> resultMap</span><span style=\"color:#00ff;\">=&quot;BaseResultMap&quot;</span><span style=\"color:#ff00;\"> parameterType</span><span style=\"color:#00ff;\">=&quot;java.lang.String&quot;</span> <span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">14</span>     select \n<span style=\"color:#08080;\">15</span>     <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">include </span><span style=\"color:#ff00;\">refid</span><span style=\"color:#00ff;\">=&quot;Base_Column_List&quot;</span> <span style=\"color:#00ff;\">/&gt;</span>\n<span style=\"color:#08080;\">16</span>     from t_user\n<span style=\"color:#08080;\">17</span>     where user_id = #{userId,jdbcType=CHAR}\n<span style=\"color:#08080;\">18</span>   <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">select</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">19</span>   <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">delete </span><span style=\"color:#ff00;\">id</span><span style=\"color:#00ff;\">=&quot;deleteByPrimaryKey&quot;</span><span style=\"color:#ff00;\"> parameterType</span><span style=\"color:#00ff;\">=&quot;java.lang.String&quot;</span> <span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">20</span>     delete from t_user\n<span style=\"color:#08080;\">21</span>     where user_id = #{userId,jdbcType=CHAR}\n<span style=\"color:#08080;\">22</span>   <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">delete</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">23</span>   <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">insert </span><span style=\"color:#ff00;\">id</span><span style=\"color:#00ff;\">=&quot;insert&quot;</span><span style=\"color:#ff00;\"> parameterType</span><span style=\"color:#00ff;\">=&quot;me.gacl.domain.User&quot;</span> <span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">24</span>     insert into t_user (user_id, user_name, user_birthday, \n<span style=\"color:#08080;\">25</span>       user_salary)\n<span style=\"color:#08080;\">26</span>     values (#{userId,jdbcType=CHAR}, #{userName,jdbcType=VARCHAR}, #{userBirthday,jdbcType=DATE}, \n<span style=\"color:#08080;\">27</span>       #{userSalary,jdbcType=DOUBLE})\n<span style=\"color:#08080;\">28</span>   <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">insert</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">29</span>   <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">insert </span><span style=\"color:#ff00;\">id</span><span style=\"color:#00ff;\">=&quot;insertSelective&quot;</span><span style=\"color:#ff00;\"> parameterType</span><span style=\"color:#00ff;\">=&quot;me.gacl.domain.User&quot;</span> <span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">30</span>     insert into t_user\n<span style=\"color:#08080;\">31</span>     <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">trim </span><span style=\"color:#ff00;\">prefix</span><span style=\"color:#00ff;\">=&quot;(&quot;</span><span style=\"color:#ff00;\"> suffix</span><span style=\"color:#00ff;\">=&quot;)&quot;</span><span style=\"color:#ff00;\"> suffixOverrides</span><span style=\"color:#00ff;\">=&quot;,&quot;</span> <span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">32</span>       <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">if </span><span style=\"color:#ff00;\">test</span><span style=\"color:#00ff;\">=&quot;userId != null&quot;</span> <span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">33</span>         user_id,\n<span style=\"color:#08080;\">34</span>       <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">if</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">35</span>       <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">if </span><span style=\"color:#ff00;\">test</span><span style=\"color:#00ff;\">=&quot;userName != null&quot;</span> <span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">36</span>         user_name,\n<span style=\"color:#08080;\">37</span>       <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">if</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">38</span>       <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">if </span><span style=\"color:#ff00;\">test</span><span style=\"color:#00ff;\">=&quot;userBirthday != null&quot;</span> <span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">39</span>         user_birthday,\n<span style=\"color:#08080;\">40</span>       <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">if</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">41</span>       <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">if </span><span style=\"color:#ff00;\">test</span><span style=\"color:#00ff;\">=&quot;userSalary != null&quot;</span> <span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">42</span>         user_salary,\n<span style=\"color:#08080;\">43</span>       <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">if</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">44</span>     <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">trim</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">45</span>     <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">trim </span><span style=\"color:#ff00;\">prefix</span><span style=\"color:#00ff;\">=&quot;values (&quot;</span><span style=\"color:#ff00;\"> suffix</span><span style=\"color:#00ff;\">=&quot;)&quot;</span><span style=\"color:#ff00;\"> suffixOverrides</span><span style=\"color:#00ff;\">=&quot;,&quot;</span> <span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">46</span>       <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">if </span><span style=\"color:#ff00;\">test</span><span style=\"color:#00ff;\">=&quot;userId != null&quot;</span> <span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">47</span>         #{userId,jdbcType=CHAR},\n<span style=\"color:#08080;\">48</span>       <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">if</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">49</span>       <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">if </span><span style=\"color:#ff00;\">test</span><span style=\"color:#00ff;\">=&quot;userName != null&quot;</span> <span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">50</span>         #{userName,jdbcType=VARCHAR},\n<span style=\"color:#08080;\">51</span>       <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">if</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">52</span>       <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">if </span><span style=\"color:#ff00;\">test</span><span style=\"color:#00ff;\">=&quot;userBirthday != null&quot;</span> <span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">53</span>         #{userBirthday,jdbcType=DATE},\n<span style=\"color:#08080;\">54</span>       <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">if</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">55</span>       <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">if </span><span style=\"color:#ff00;\">test</span><span style=\"color:#00ff;\">=&quot;userSalary != null&quot;</span> <span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">56</span>         #{userSalary,jdbcType=DOUBLE},\n<span style=\"color:#08080;\">57</span>       <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">if</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">58</span>     <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">trim</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">59</span>   <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">insert</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">60</span>   <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">update </span><span style=\"color:#ff00;\">id</span><span style=\"color:#00ff;\">=&quot;updateByPrimaryKeySelective&quot;</span><span style=\"color:#ff00;\"> parameterType</span><span style=\"color:#00ff;\">=&quot;me.gacl.domain.User&quot;</span> <span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">61</span>     update t_user\n<span style=\"color:#08080;\">62</span>     <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">set </span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">63</span>       <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">if </span><span style=\"color:#ff00;\">test</span><span style=\"color:#00ff;\">=&quot;userName != null&quot;</span> <span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">64</span>         user_name = #{userName,jdbcType=VARCHAR},\n<span style=\"color:#08080;\">65</span>       <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">if</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">66</span>       <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">if </span><span style=\"color:#ff00;\">test</span><span style=\"color:#00ff;\">=&quot;userBirthday != null&quot;</span> <span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">67</span>         user_birthday = #{userBirthday,jdbcType=DATE},\n<span style=\"color:#08080;\">68</span>       <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">if</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">69</span>       <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">if </span><span style=\"color:#ff00;\">test</span><span style=\"color:#00ff;\">=&quot;userSalary != null&quot;</span> <span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">70</span>         user_salary = #{userSalary,jdbcType=DOUBLE},\n<span style=\"color:#08080;\">71</span>       <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">if</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">72</span>     <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">set</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">73</span>     where user_id = #{userId,jdbcType=CHAR}\n<span style=\"color:#08080;\">74</span>   <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">update</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">75</span>   <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">update </span><span style=\"color:#ff00;\">id</span><span style=\"color:#00ff;\">=&quot;updateByPrimaryKey&quot;</span><span style=\"color:#ff00;\"> parameterType</span><span style=\"color:#00ff;\">=&quot;me.gacl.domain.User&quot;</span> <span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">76</span>     update t_user\n<span style=\"color:#08080;\">77</span>     set user_name = #{userName,jdbcType=VARCHAR},\n<span style=\"color:#08080;\">78</span>       user_birthday = #{userBirthday,jdbcType=DATE},\n<span style=\"color:#08080;\">79</span>       user_salary = #{userSalary,jdbcType=DOUBLE}\n<span style=\"color:#08080;\">80</span>     where user_id = #{userId,jdbcType=CHAR}\n<span style=\"color:#08080;\">81</span>   <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">update</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">82</span> <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">mapper</span><span style=\"color:#00ff;\">&gt;</span></pre><div class=\"cnblogs_code_toolbar\"><span class=\"cnblogs_code_copy\"></span></div></div><p>　　UserMapper.xml这个文件的内容是编写操作t_user表的SQL语句，重点说一下UserMapper.xml配置中需要注意的几个小细节问题：</p><p>　　1、UserMapper.xml的&lt;mapper&gt;标签的namespace必须是UserMapper接口的全类名，既<span style=\"color:#ff00;\"><strong>&lt;mapper namespace=&quot;me.gacl.dao.UserMapper&quot; &gt;</strong></span></p><p>　　2、UserMapper.xml的定义操作数据库的&lt;select&gt;&lt;delete&gt;&lt;update&gt;&lt;insert&gt;这些标签的id属性的值必须和UserMapper接口定义的方法名一致，如下图所示：</p><p>　　<img width=\"950\" style=\"border: 1px solid black;\" alt=\"\" src=\"http://images.cnitblog.com/blog/289233/201502/061421563283757.png\"></p><p>　　之所以有上述说的这两点要求，就是为了能够让MyBatis能够根据UserMapper接口和UserMapper.xml文件去自动实现UserMapper接口中定义的相关方法，这样我们就不再需要针对UserMapper接口去编写具体的实现代码了。</p><h2>四、Spring与MyBatis整合</h2><p>　　首先我们要在项目中加入我们需要的相关jar包，我们可以到Maven的中央仓库：http://search.maven.org/&nbsp;找到我们要的相关jar包，如下图所示：</p><p>　　<img alt=\"\" src=\"http://images.cnitblog.com/blog/289233/201502/061433485319171.png\"></p><p>　　我们只需要在搜索框中输入要找的jar包的名称，点击【SEARCH】按钮，就可以找到我们要的jar包了。</p><h3>4.1、添加Spring与Mybatis的相关jar包</h3><p>　　1、添加spring-core，输入spring-core关键字进行查找，如下图所示：</p><p>　　<img alt=\"\" src=\"http://images.cnitblog.com/blog/289233/201502/061439588127661.png\"></p><p>　　找到关于spring-core的依赖描述信息，如下图所示：</p><p>　　<img style=\"border: 1px solid black;\" alt=\"\" src=\"http://images.cnitblog.com/blog/289233/201502/061443456093216.png\"></p><p>　　将</p><div class=\"cnblogs_code\"><pre><span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">dependency</span><span style=\"color:#00ff;\">&gt;</span>\n    <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">groupId</span><span style=\"color:#00ff;\">&gt;</span>org.springframework<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">groupId</span><span style=\"color:#00ff;\">&gt;</span>\n    <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">artifactId</span><span style=\"color:#00ff;\">&gt;</span>spring-core<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">artifactId</span><span style=\"color:#00ff;\">&gt;</span>\n    <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">version</span><span style=\"color:#00ff;\">&gt;</span>4.1.4.RELEASE<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">version</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">dependency</span><span style=\"color:#00ff;\">&gt;</span></pre></div><p>　　复制到项目的pom.xml文件中，如下所示：</p><div class=\"cnblogs_code\"><div class=\"cnblogs_code_toolbar\"><span class=\"cnblogs_code_copy\"></span></div><pre><span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">project </span><span style=\"color:#ff00;\">xmlns</span><span style=\"color:#00ff;\">=&quot;http://maven.apache.org/POM/4.0.0&quot;</span><span style=\"color:#ff00;\"> xmlns:xsi</span><span style=\"color:#00ff;\">=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span style=\"color:#ff00;\">\n    xsi:schemaLocation</span><span style=\"color:#00ff;\">=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;</span><span style=\"color:#00ff;\">&gt;</span>\n    <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">modelVersion</span><span style=\"color:#00ff;\">&gt;</span>4.0.0<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">modelVersion</span><span style=\"color:#00ff;\">&gt;</span>\n    <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">groupId</span><span style=\"color:#00ff;\">&gt;</span>me.gacl<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">groupId</span><span style=\"color:#00ff;\">&gt;</span>\n    <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">artifactId</span><span style=\"color:#00ff;\">&gt;</span>spring4-mybatis3<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">artifactId</span><span style=\"color:#00ff;\">&gt;</span>\n    <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">packaging</span><span style=\"color:#00ff;\">&gt;</span>war<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">packaging</span><span style=\"color:#00ff;\">&gt;</span>\n    <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">version</span><span style=\"color:#00ff;\">&gt;</span>1.0-SNAPSHOT<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">version</span><span style=\"color:#00ff;\">&gt;</span>\n    <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">name</span><span style=\"color:#00ff;\">&gt;</span>spring4-mybatis3<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">name</span><span style=\"color:#00ff;\">&gt;</span>\n    <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">url</span><span style=\"color:#00ff;\">&gt;</span>http://maven.apache.org<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">url</span><span style=\"color:#00ff;\">&gt;</span>\n    <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">dependencies</span><span style=\"color:#00ff;\">&gt;</span>\n        <span style=\"color:#0800;\">&lt;!--</span><span style=\"color:#0800;\"> 添加Spring4.1.4的核心包 </span><span style=\"color:#0800;\">--&gt;</span>\n        <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">dependency</span><span style=\"color:#00ff;\">&gt;</span>\n            <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">groupId</span><span style=\"color:#00ff;\">&gt;</span>org.springframework<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">groupId</span><span style=\"color:#00ff;\">&gt;</span>\n            <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">artifactId</span><span style=\"color:#00ff;\">&gt;</span>spring-core<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">artifactId</span><span style=\"color:#00ff;\">&gt;</span>\n            <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">version</span><span style=\"color:#00ff;\">&gt;</span>4.1.4.RELEASE<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">version</span><span style=\"color:#00ff;\">&gt;</span>\n        <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">dependency</span><span style=\"color:#00ff;\">&gt;</span>\n\n    <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">dependencies</span><span style=\"color:#00ff;\">&gt;</span>\n    <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">build</span><span style=\"color:#00ff;\">&gt;</span>\n        <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">finalName</span><span style=\"color:#00ff;\">&gt;</span>spring4-mybatis3<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">finalName</span><span style=\"color:#00ff;\">&gt;</span>\n    <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">build</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">project</span><span style=\"color:#00ff;\">&gt;</span></pre><div class=\"cnblogs_code_toolbar\"><span class=\"cnblogs_code_copy\"></span></div></div><p>　　这样Maven就会自动帮我们从Maven的中央仓库中下载spring-core这个jar包到我们的本地仓库，然后将spring-core这个jar包以及它的相关依赖包加入到我们的项目当中，如下所示：</p><p>　　<img style=\"border: 1px solid black;\" alt=\"\" src=\"http://images.cnitblog.com/blog/289233/201502/061452135153651.png\"></p><p>　　spring4.x与mybatis3.x所需要的相关jar包都可以采用上述所说的方式进行查找，然后添加到项目当中，添加完spring4.x与mybatis3.x相关jar包后，pom.xml文件内容最终如下：</p><div class=\"cnblogs_code\"><div class=\"cnblogs_code_toolbar\"><span class=\"cnblogs_code_copy\"></span></div><pre><span style=\"color:#08080;\">  1</span> <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">project </span><span style=\"color:#ff00;\">xmlns</span><span style=\"color:#00ff;\">=&quot;http://maven.apache.org/POM/4.0.0&quot;</span><span style=\"color:#ff00;\"> xmlns:xsi</span><span style=\"color:#00ff;\">=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>\n<span style=\"color:#08080;\">  2</span> <span style=\"color:#ff00;\">    xsi:schemaLocation</span><span style=\"color:#00ff;\">=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">  3</span>     <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">modelVersion</span><span style=\"color:#00ff;\">&gt;</span>4.0.0<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">modelVersion</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">  4</span>     <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">groupId</span><span style=\"color:#00ff;\">&gt;</span>me.gacl<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">groupId</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">  5</span>     <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">artifactId</span><span style=\"color:#00ff;\">&gt;</span>spring4-mybatis3<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">artifactId</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">  6</span>     <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">packaging</span><span style=\"color:#00ff;\">&gt;</span>war<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">packaging</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">  7</span>     <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">version</span><span style=\"color:#00ff;\">&gt;</span>1.0-SNAPSHOT<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">version</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">  8</span>     <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">name</span><span style=\"color:#00ff;\">&gt;</span>spring4-mybatis3<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">name</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\">  9</span>     <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">url</span><span style=\"color:#00ff;\">&gt;</span>http://maven.apache.org<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">url</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 10</span>     <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">dependencies</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 11</span>         <span style=\"color:#0800;\">&lt;!--</span><span style=\"color:#0800;\"> 添加Spring-core包 </span><span style=\"color:#0800;\">--&gt;</span>\n<span style=\"color:#08080;\"> 12</span>         <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">dependency</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 13</span>             <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">groupId</span><span style=\"color:#00ff;\">&gt;</span>org.springframework<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">groupId</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 14</span>             <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">artifactId</span><span style=\"color:#00ff;\">&gt;</span>spring-core<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">artifactId</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 15</span>             <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">version</span><span style=\"color:#00ff;\">&gt;</span>4.1.4.RELEASE<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">version</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 16</span>         <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">dependency</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 17</span>         <span style=\"color:#0800;\">&lt;!--</span><span style=\"color:#0800;\"> 添加spring-context包 </span><span style=\"color:#0800;\">--&gt;</span>\n<span style=\"color:#08080;\"> 18</span>         <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">dependency</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 19</span>             <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">groupId</span><span style=\"color:#00ff;\">&gt;</span>org.springframework<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">groupId</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 20</span>             <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">artifactId</span><span style=\"color:#00ff;\">&gt;</span>spring-context<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">artifactId</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 21</span>             <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">version</span><span style=\"color:#00ff;\">&gt;</span>4.1.4.RELEASE<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">version</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 22</span>         <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">dependency</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 23</span>         <span style=\"color:#0800;\">&lt;!--</span><span style=\"color:#0800;\"> 添加spring-tx包 </span><span style=\"color:#0800;\">--&gt;</span>\n<span style=\"color:#08080;\"> 24</span>         <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">dependency</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 25</span>             <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">groupId</span><span style=\"color:#00ff;\">&gt;</span>org.springframework<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">groupId</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 26</span>             <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">artifactId</span><span style=\"color:#00ff;\">&gt;</span>spring-tx<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">artifactId</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 27</span>             <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">version</span><span style=\"color:#00ff;\">&gt;</span>4.1.4.RELEASE<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">version</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 28</span>         <span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">dependency</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 29</span>         <span style=\"color:#0800;\">&lt;!--</span><span style=\"color:#0800;\"> 添加spring-jdbc包 </span><span style=\"color:#0800;\">--&gt;</span>\n<span style=\"color:#08080;\"> 30</span>         <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">dependency</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 31</span>             <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">groupId</span><span style=\"color:#00ff;\">&gt;</span>org.springframework<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">groupId</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 32</span>             <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">artifactId</span><span style=\"color:#00ff;\">&gt;</span>spring-jdbc<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">artifactId</span><span style=\"color:#00ff;\">&gt;</span>\n<span style=\"color:#08080;\"> 33</span>             <span style=\"color:#00ff;\">&lt;</span><span style=\"color:#8000;\">version</span><span style=\"color:#00ff;\">&gt;</span>4.1.4.RELEASE<span style=\"color:#00ff;\">&lt;/</span><span style=\"color:#8000;\">version</span><span style=\"color:#00ff', '2016-04-16 01:21:15', '0');
INSERT INTO `article` VALUES ('10059', '10003', 'Spring详解-----------AOP通知、代理', '\n\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:21px\">\n</p>\n<h3 style=\"line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1423488\" style=\"color:rgb(233,101,14)\"><span style=\"font-size:18px\">通知参数&nbsp;</span></a></h3>\n<p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n前边章节已经介绍了声明通知，但如果想获取被被通知方法参数并传递给通知方法，该如何实现呢？接下来我们将介绍两种获取通知参数的方式。</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>使用JoinPoint获取</strong>：Spring AOP提供使用org.aspectj.lang.JoinPoint类型获取连接点数据，任何通知方法的第一个参数都可以是JoinPoint(环绕通知是ProceedingJoinPoint，JoinPoint子类)，当然第一个参数位置也可以是JoinPoint.StaticPart类型，这个只返回连接点的静态部分。</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n<strong>1) JoinPoint：</strong>提供访问当前被通知方法的目标对象、代理对象、方法参数等数据：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:642.125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">package</span>&nbsp;org.aspectj.lang;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">import</span>&nbsp;org.aspectj.lang.reflect.SourceLocation;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">interface</span>&nbsp;JoinPoint&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;toString();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//连接点所在位置的相关信息</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;toShortString();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//连接点所在位置的简短相关信息</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;toLongString();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//连接点所在位置的全部相关信息</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;Object&nbsp;getThis();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//返回AOP代理对象</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;Object&nbsp;getTarget();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//返回目标对象</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;Object[]&nbsp;getArgs();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//返回被通知方法参数列表</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;Signature&nbsp;getSignature();&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//返回当前连接点签名</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;SourceLocation&nbsp;getSourceLocation();<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//返回连接点方法所在类文件中的位置</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;getKind();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//连接点类型</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;StaticPart&nbsp;getStaticPart();&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//返回连接点静态部分</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n<strong>2）</strong>ProceedingJoinPoint：用于环绕通知，使用proceed()方法来执行目标方法：</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:642.125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">interface</span>&nbsp;ProceedingJoinPoint&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">extends</span>&nbsp;JoinPoint&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;Object&nbsp;proceed()&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">throws</span>&nbsp;Throwable;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;Object&nbsp;proceed(Object[]&nbsp;args)&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">throws</span>&nbsp;Throwable;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n<strong>3) JoinPoint.StaticPart：</strong>提供访问连接点的静态部分，如被通知方法签名、连接点类型等：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:642.125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">interface</span>&nbsp;StaticPart&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;Signature&nbsp;getSignature();&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//返回当前连接点签名</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;getKind();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//连接点类型</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">int</span>&nbsp;getId();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//唯一标识</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;toString();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//连接点所在位置的相关信息</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;toShortString();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//连接点所在位置的简短相关信息</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;toLongString();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//连接点所在位置的全部相关信息</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n使用如下方式在通知方法上声明，必须是在第一个参数，然后使用jp.getArgs()就能获取到被通知方法参数：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:642.125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Before</span>(value=<span class=\"string\" style=\"color:blue\">&quot;execution(*&nbsp;sayBefore(*))&quot;</span>)&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;before(JoinPoint&nbsp;jp)&nbsp;{}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Before</span>(value=<span class=\"string\" style=\"color:blue\">&quot;execution(*&nbsp;sayBefore(*))&quot;</span>)&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;before(JoinPoint.StaticPart&nbsp;jp)&nbsp;{}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>自动获取：</strong>通过切入点表达式可以将相应的参数自动传递给通知方法，例如前边章节讲过的返回&#20540;和异常是如何传递给通知方法的。</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n在Spring AOP中，除了execution和bean指示符不能传递参数给通知方法，其他指示符都可以将匹配的相应参数或对象自动传递给通知方法。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:642.125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Before</span>(value=<span class=\"string\" style=\"color:blue\">&quot;execution(*&nbsp;test(*))&nbsp;&amp;&amp;&nbsp;args(param)&quot;</span>,&nbsp;argNames=<span class=\"string\" style=\"color:blue\">&quot;param&quot;</span>)&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;before1(String&nbsp;param)&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\" style=\"color:blue\">&quot;===param:&quot;</span>&nbsp;&#43;&nbsp;param);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 切入点表达式execution(* test(*)) &amp;&amp; args(param) ：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n1）首先execution(* test(*))匹配任何方法名为test，且有一个任何类型的参数；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n2）args(param)将首先查找通知方法上同名的参数，并在方法执行时（运行时）匹配传入的参数是使用该同名参数类型，即java.lang.String；如果匹配将把该被通知参数传递给通知方法上同名参数。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n其他指示符（除了execution和bean指示符）都可以使用这种方式进行参数绑定。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n在此有一个问题，即前边提到的类&#20284;于【3.1.2构造器注入】中的参数名注入限制：<strong>在class文件中没生成变量调试信息是获取不到方法参数名字的。</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n所以我们可以使用策略来确定参数名：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n1、如果我们通过“argNames”属性指定了参数名，那么就是要我们指定的；</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:642.125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Before</span>(value=<span class=\"string\" style=\"color:blue\">&quot;&nbsp;args(param)&quot;</span>,&nbsp;argNames=<span class=\"string\" style=\"color:blue\">&quot;param&quot;</span>)&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//明确指定了</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;before1(String&nbsp;param)&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\" style=\"color:blue\">&quot;===param:&quot;</span>&nbsp;&#43;&nbsp;param);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n2、如果第一个参数类型是JoinPoint、ProceedingJoinPoint或JoinPoint.StaticPart类型，应该从“argNames”属性省略掉该参数名（可选，写上也对），这些类型对象会自动传入的，但必须作为第一个参数；</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:642.125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Before</span>(value=<span class=\"string\" style=\"color:blue\">&quot;&nbsp;args(param)&quot;</span>,&nbsp;argNames=<span class=\"string\" style=\"color:blue\">&quot;param&quot;</span>)&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//明确指定了</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;before1(JoinPoint&nbsp;jp,&nbsp;String&nbsp;param)&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\" style=\"color:blue\">&quot;===param:&quot;</span>&nbsp;&#43;&nbsp;param);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;3、如果“<strong>class文件中含有变量调试信息</strong>”将使用这些方法签名中的参数名来确定参数名；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:642.125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Before</span>(value=<span class=\"string\" style=\"color:blue\">&quot;&nbsp;args(param)&quot;</span>)&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//不需要argNames了</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;before1(JoinPoint&nbsp;jp,&nbsp;String&nbsp;param)&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\" style=\"color:blue\">&quot;===param:&quot;</span>&nbsp;&#43;&nbsp;param);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;4、如果没有“<strong>class文件中含有变量调试信息</strong>”，将尝试自己的参数匹配算法，如果发现参数绑定有二义性将抛出AmbiguousBindingException异常；对于只有一个绑定变量的切入点表达式，而通知方法只接受一个参数，说明绑定参数是明确的，从而能配对成功。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:642.125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Before</span>(value=<span class=\"string\" style=\"color:blue\">&quot;&nbsp;args(param)&quot;</span>)&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;before1(JoinPoint&nbsp;jp,&nbsp;String&nbsp;param)&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\" style=\"color:blue\">&quot;===param:&quot;</span>&nbsp;&#43;&nbsp;param);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n5、以上策略失败将抛出IllegalArgumentException。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n接下来让我们示例一下组合情况吧：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:642.125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Before</span>(args(param)&nbsp;&amp;&amp;&nbsp;target(bean)&nbsp;&amp;&amp;&nbsp;<span class=\"annotation\" style=\"color:rgb(100,100,100)\">@annotation</span>(secure)&quot;,&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;argNames=<span class=\"string\" style=\"color:blue\">&quot;jp,param,bean,secure&quot;</span>)&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;before5(JoinPoint&nbsp;jp,&nbsp;String&nbsp;param,&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;IPointcutService&nbsp;pointcutService,&nbsp;Secure&nbsp;secure)&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">……&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 该示例的执行步骤如图6-5所示。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n<img alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/21/488418d955ff2627fa9d2600f651af59__1.JPG\" style=\"border:0px\">&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n图6-5 参数自动获取流程</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n除了上边介绍的普通方式，也可以对使用命名切入点自动获取参数：&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:642.125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Pointcut</span>(value=<span class=\"string\" style=\"color:blue\">&quot;args(param)&quot;</span>,&nbsp;argNames=<span class=\"string\" style=\"color:blue\">&quot;param&quot;</span>)&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;pointcut1(String&nbsp;param){}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Pointcut</span>(value=<span class=\"string\" style=\"color:blue\">&quot;@annotation(secure)&quot;</span>,&nbsp;argNames=<span class=\"string\" style=\"color:blue\">&quot;secure&quot;</span>)&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;pointcut2(Secure&nbsp;secure){}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Before</span>(value&nbsp;=&nbsp;<span class=\"string\" style=\"color:blue\">&quot;pointcut1(param)&nbsp;&amp;&amp;&nbsp;pointcut2(secure)&quot;</span>,&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;argNames=<span class=\"string\" style=\"color:blue\">&quot;param,&nbsp;secure&quot;</span>)&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;before6(JoinPoint&nbsp;jp,&nbsp;String&nbsp;param,&nbsp;Secure&nbsp;secure)&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">……&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 自此给通知传递参数已经介绍完了，示例代码在cn.javass.spring.chapter6.ParameterTest文件中。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:21px\">\n</p>\n<h3 style=\"line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1423489\" style=\"color:rgb(233,101,14)\"><span style=\"font-size:18px\">通知顺序</span></a></h3>\n<p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;如果我们有多个通知想要在同一连接点执行，那执行顺序如何确定呢？Spring AOP使用AspectJ的优先级规则来确定通知执行顺序。总共有两种情况：同一切面中通知执行顺序、不同切面中的通知执行顺序。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 首先让我们看下</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n<strong>1）&nbsp;同一切面中通知执行顺序：</strong>如图6-6所示。<strong></strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n<img src=\"http://sishuok.com/forum/upload/2012/2/21/dc6d0a9ffb60dcc59e58a9a862d19ece__1.JPG\" alt=\"\" style=\"border:0px\">&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n图6-6 同一切面中的通知执行顺序</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n而如果在同一切面中定义两个相同类型通知（如同是前置通知或环绕通知（proceed之前））并在同一连接点执行时，其执行顺序是未知的，如果确实需要指定执行顺序需要将通知重构到两个切面，然后定义切面的执行顺序。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:642.125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">错误“Advice&nbsp;precedence&nbsp;circularity&nbsp;error”：说明AspectJ无法决定通知的执行顺序，只要将通知方法分类并按照顺序排列即可解决。&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n2）<strong>不同切面中的通知执行顺序：</strong>当定义在不同切面的相同类型的通知需要在同一个连接点执行，如果没指定切面的执行顺序，这两个通知的执行顺序将是未知的。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n如果需要他们顺序执行，可以通过指定切面的优先级来控制通知的执行顺序。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\nSpring中可以通过在切面实现类上实现org.springframework.core.Ordered接口或使用Order注解来指定切面优先级。在多个切面中，Ordered.getValue()方法返回&#20540;（或者注解&#20540;）较小&#20540;的那个切面拥有较高优先级，如图6-7所示。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;<img src=\"http://sishuok.com/forum/upload/2012/2/21/1aaff9a9439c035e509fbac996b2fa38__2.JPG\" alt=\"\" title=\"点击查看原始大小图片\" class=\"magplus\" width=\"700\" height=\"257\" style=\"border:0px\"></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n图6-7 两个切面指定了优先级</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n对于@AspectJ风&#26684;和注解风&#26684;可分别用以下形式指定优先级：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;<img src=\"http://sishuok.com/forum/upload/2012/2/21/fc16ed503891a0e7219f6a3d800dec7f__3.JPG\" alt=\"\" title=\"点击查看原始大小图片\" class=\"magplus\" width=\"700\" height=\"144\" style=\"border:0px\"></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n在此我们不推荐使用实现Ordered接口方法，所以没介绍，示例代码在cn.javass.spring.chapter6. OrderAopTest文件中。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n<br>\n</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n<br>\n</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:21px\">\n</p>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1423490\" style=\"color:rgb(233,101,14)\">切面实例化模型</a></h3>\n<div><br>\n</div>\n<div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n所谓切面实例化模型指何时实例化切面。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Spring AOP支持AspectJ的singleton、perthis、pertarget实例化模型（目前不支持percflow、percflowbelow 和pertypewithin）。</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>singleton：</strong>即切面只会有一个实例；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>perthis：</strong>每个切入点表达式匹配的连接点对应的AOP对象都会创建一个新切面实例；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>pertarget：</strong>每个切入点表达式匹配的连接点对应的目标对象都会创建一个新的切面实例；</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n默认是singleton实例化模型，Schema风&#26684;只支持singleton实例化模型，而@AspectJ风&#26684;支持这三种实例化模型。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>singleton：</strong>使用@Aspect()指定，即默认就是单例实例化模式，在此就不演示示例了。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>perthis：</strong>每个切入点表达式匹配的连接点对应的AOP对象都会创建一个新的切面实例，使用@Aspect(&quot;perthis(切入点表达式)&quot;)指定切入点表达式；</p>\n<p style=\"margin-top:0px; mar', '2016-04-16 01:21:16', '0');
INSERT INTO `article` VALUES ('10060', '10003', '最全的Spring面试题和答案', '\n<p><strong>1、什么是Spring框架？Spring框架有哪些主要模块？</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Spring框架是一个为Java应用程序的开发提供了综合、广泛的基础性支持的Java平台。Spring帮助开发者解决了开发中基础性的问题，使得开发人员可以专注于应用程序的开发。Spring框架本身亦是按照设计模式精心打造，这使得我们可以在开发环境中安心的集成Spring框架，不必担心Spring是如何在后台进行工作的。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Spring框架至今已集成了20多个模块。这些模块主要被分如下图所示的核心容器、数据访问/集成,、Web、AOP（面向切面编程）、工具、消息和测试模块。</p><p>更多信息：Spring 框架教程。</p><p><br><strong>2、使用Spring框架能带来哪些好处？</strong></p><p>下面列举了一些使用Spring框架带来的主要好处：</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Dependency Injection(DI) 方法使得构造器和JavaBean properties文件中的依赖关系一目了然。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 与EJB容器相比较，IoC容器更加趋向于轻量级。这样一来IoC容器在有限的内存和CPU资源的情况下进行应用程序的开发和发布就变得十分有利。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Spring并没有闭门造车，Spring利用了已有的技术比如ORM框架、logging框架、J2EE、Quartz和JDK Timer，以及其他视图技术。<br>Spring框架是按照模块的形式来组织的。由包和类的编号就可以看出其所属的模块，开发者仅仅需要选用他们需要的模块即可。<br> 要测试一项用Spring开发的应用程序十分简单，因为测试相关的环境代码都已经囊括在框架中了。更加简单的是，利用JavaBean形式的POJO类，可以很方便的利用依赖注入来写入测试数据。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Spring的Web框架亦是一个精心设计的Web MVC框架，为开发者们在web框架的选择上提供了一个除了主流框架比如Struts、过度设计的、不流行web框架的以外的有力选项。<br>Spring提供了一个便捷的事务管理接口，适用于小型的本地事物处理（比如在单DB的环境下）和复杂的共同事物处理（比如利用JTA的复杂DB环境）。</p><p><strong>3、什么是控制反转(IOC)？什么是依赖注入？</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 控制反转是应用于软件工程领域中的，在运行时被装配器对象来绑定耦合对象的一种编程技巧，对象之间耦合关系在编译时通常是未知的。在传统的编程方式中，业务逻辑的流程是由应用程序中的早已被设定好关联关系的对象来决定的。在使用控制反转的情况下，业务逻辑的流程是由对象关系图来决定的，该对象关系图由装配器负责实例化，这种实现方式还可以将对象之间的关联关系的定义抽象化。而绑定的过程是通过“依赖注入”实现的。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 控制反转是一种以给予应用程序中目标组件更多控制为目的设计范式，并在我们的实际工作中起到了有效的作用。</p><p>依赖注入是在编译阶段尚未知所需的功能是来自哪个的类的情况下，将其他对象所依赖的功能对象实例化的模式。这就需要一种机制用来激活相应的组件以提供特定的功能，所以依赖注入是控制反转的基础。否则如果在组件不受框架控制的情况下，框架又怎么知道要创建哪个组件？</p><p>在Java中依然注入有以下三种实现方式：</p><p><span style=\"color:#0990;\">构造器注入</span><br><span style=\"color:#0990;\">Setter方法注入</span><br><span style=\"color:#0990;\">接口注入</span></p><p><strong>4、请解释下Spring框架中的IoC？</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Spring中的 org.springframework.beans 包和 org.springframework.context包构成了Spring框架IoC容器的基础。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BeanFactory 接口提供了一个先进的配置机制，使得任何类型的对象的配置成为可能。ApplicationContex接口对BeanFactory（是一个子接口）进行了扩展，在BeanFactory的基础上添加了其他功能，比如与Spring的AOP更容易集成，也提供了处理message resource的机制（用于国际化）、事件传播以及应用层的特别配置，比如针对Web应用的WebApplicationContext。</p><p>org.springframework.beans.factory.BeanFactory 是Spring IoC容器的具体实现，用来包装和管理前面提到的各种bean。BeanFactory接口是Spring IoC 容器的核心接口。</p><p><br><strong>5、BeanFactory和ApplicationContext有什么区别？</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BeanFactory 可以理解为含有bean集合的工厂类。BeanFactory 包含了种bean的定义，以便在接收到客户端请求时将对应的bean实例化。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BeanFactory还能在实例化对象的时生成协作类之间的关系。此举将bean自身与bean客户端的配置中解放出来。BeanFactory还包含了bean生命周期的控制，调用客户端的初始化方法（initialization methods）和销毁方法（destruction methods）。</p><p>从表面上看，application context如同bean factory一样具有bean定义、bean关联关系的设置，根据请求分发bean的功能。但application context在此基础上还提供了其他的功能。</p><p><span style=\"color:#337fe5;\">提供了支持国际化的文本消息</span><br><span style=\"color:#337fe5;\">统一的资源文件读取方式</span><br><span style=\"color:#337fe5;\">已在监听器中注册的bean的事件</span><br><strong>以下是三种较常见的 ApplicationContext 实现方式：</strong></p><pre class=\"brush:java; toolbar: false; auto-links: false;\">1、ClassPathXmlApplicationContext：从classpath的XML配置文件中读取上下文，并生成上下文定义。应用程序上下文从程序环境变量中取得。\n\n\nApplicationContext&nbsp;context&nbsp;=&nbsp;new&nbsp;ClassPathXmlApplicationContext(“bean.xml”);\n2、FileSystemXmlApplicationContext&nbsp;：由文件系统中的XML配置文件读取上下文。\n\nApplicationContext&nbsp;context&nbsp;=&nbsp;new&nbsp;FileSystemXmlApplicationContext(“bean.xml”);\n3、XmlWebApplicationContext：由Web应用的XML文件读取上下文。</pre><p><br><strong>6、Spring有几种配置方式？</strong></p><p>将Spring配置到应用开发中有以下三种方式：</p><p>基于XML的配置<br> 基于注解的配置<br> 基于Java的配置</p><p><strong>7、如何用基于XML配置的方式配置Spring？</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在Spring框架中，依赖和服务需要在专门的配置文件来实现，我常用的XML格式的配置文件。这些配置文件的格式通常用&lt;beans&gt;开头，然后一系列的bean定义和专门的应用配置选项组成。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SpringXML配置的主要目的时候是使所有的Spring组件都可以用xml文件的形式来进行配置。这意味着不会出现其他的Spring配置类型（比如声明的方式或基于Java Class的配置方式）</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Spring的XML配置方式是使用被Spring命名空间的所支持的一系列的XML标签来实现的。Spring有以下主要的命名空间：context、beans、jdbc、tx、aop、mvc和aso。</p><p><br>&nbsp;</p><pre class=\"brush:xml; toolbar: false; auto-links: false;\">&lt;beans&gt;\n&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;JSON&nbsp;Support&nbsp;--&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;bean&nbsp;name=&quot;viewResolver&quot;&nbsp;class=&quot;org.springframework.web.servlet.view.BeanNameViewResolver&quot;/&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;bean&nbsp;name=&quot;jsonTemplate&quot;&nbsp;class=&quot;org.springframework.web.servlet.view.json.MappingJackson2JsonView&quot;/&gt;\n&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;bean&nbsp;id=&quot;restTemplate&quot;&nbsp;class=&quot;org.springframework.web.client.RestTemplate&quot;/&gt;\n&nbsp;\n&lt;/beans&gt;</pre><p><br>下面这个web.xml仅仅配置了DispatcherServlet，这件最简单的配置便能满足应用程序配置运行时组件的需求。</p><pre class=\"brush:xml; toolbar: false; auto-links: false;\">&lt;web-app&gt;\n&nbsp;&nbsp;&lt;display-name&gt;Archetype&nbsp;Created&nbsp;Web&nbsp;Application&lt;/display-name&gt;\n&nbsp;\n&nbsp;&nbsp;&lt;servlet&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;servlet-name&gt;spring&lt;/servlet-name&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;servlet-class&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.springframework.web.servlet.DispatcherServlet\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/servlet-class&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/servlet&gt;\n&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;servlet-mapping&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;servlet-name&gt;spring&lt;/servlet-name&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;url-pattern&gt;/&lt;/url-pattern&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/servlet-mapping&gt;\n&nbsp;\n&lt;/web-app&gt;</pre><p><strong>8、如何用基于Java配置的方式配置Spring？</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Spring对Java配置的支持是由@Configuration注解和@Bean注解来实现的。由@Bean注解的方法将会实例化、配置和初始化一个新对象，这个对象将由Spring的IoC容器来管理。@Bean声明所起到的作用与&lt;bean/&gt; 元素类似。被@Configuration所注解的类则表示这个类的主要目的是作为bean定义的资源。被@Configuration声明的类可以通过在同一个类的内部调用@bean方法来设置嵌入bean的依赖关系。</p><p>最简单的@Configuration 声明类请参考下面的代码：</p><p><br>&nbsp;</p><pre class=\"brush:java; toolbar: false; auto-links: false;\">@Configuration\npublic&nbsp;class&nbsp;AppConfig\n{\n&nbsp;&nbsp;&nbsp;&nbsp;@Bean\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;MyService&nbsp;myService()&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;MyServiceImpl();\n&nbsp;&nbsp;&nbsp;&nbsp;}\n}</pre><p>对于上面的@Beans配置文件相同的XML配置文件如下：</p><p><br>&nbsp;</p><pre class=\"brush:xml; toolbar: false; auto-links: false;\">&lt;beans&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;bean&nbsp;id=&quot;myService&quot;&nbsp;class=&quot;com.howtodoinjava.services.MyServiceImpl&quot;/&gt;\n&lt;/beans&gt;</pre><p><br>上述配置方式的实例化方式如下：利用AnnotationConfigApplicationContext 类进行实例化</p><p><br>&nbsp;</p><pre class=\"brush:java; toolbar: false; auto-links: false;\">public&nbsp;static&nbsp;void&nbsp;main(String[]&nbsp;args)&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;ApplicationContext&nbsp;ctx&nbsp;=&nbsp;new&nbsp;AnnotationConfigApplicationContext(AppConfig.class);\n&nbsp;&nbsp;&nbsp;&nbsp;MyService&nbsp;myService&nbsp;=&nbsp;ctx.getBean(MyService.class);\n&nbsp;&nbsp;&nbsp;&nbsp;myService.doStuff();\n}</pre><p>要使用组件组建扫描，仅需用@Configuration进行注解即可：</p><p><br>&nbsp;</p><pre class=\"brush:java; toolbar: false; auto-links: false;\">@Configuration\n@ComponentScan(basePackages&nbsp;=&nbsp;&quot;com.howtodoinjava&quot;)\npublic&nbsp;class&nbsp;AppConfig&nbsp;&nbsp;{\n&nbsp;&nbsp;&nbsp;&nbsp;...\n}</pre><p><br>在上面的例子中，com.acme包首先会被扫到，然后再容器内查找被@Component 声明的类，找到后将这些类按照Sring bean定义进行注册。</p><p>如果你要在你的web应用开发中选用上述的配置的方式的话，需要用AnnotationConfigWebApplicationContext 类来读取配置文件，可以用来配置Spring的Servlet监听器ContrextLoaderListener或者Spring MVC的DispatcherServlet。</p><p><br>&nbsp;</p><pre class=\"brush:xml; toolbar: false; auto-links: false;\">&lt;web-app&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;Configure&nbsp;ContextLoaderListener&nbsp;to&nbsp;use&nbsp;AnnotationConfigWebApplicationContext\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instead&nbsp;of&nbsp;the&nbsp;default&nbsp;XmlWebApplicationContext&nbsp;--&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;context-param&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;param-name&gt;contextClass&lt;/param-name&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;param-value&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.springframework.web.context.support.AnnotationConfigWebApplicationContext\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/param-value&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/context-param&gt;\n&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;Configuration&nbsp;locations&nbsp;must&nbsp;consist&nbsp;of&nbsp;one&nbsp;or&nbsp;more&nbsp;comma-&nbsp;or&nbsp;space-delimited\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fully-qualified&nbsp;@Configuration&nbsp;classes.&nbsp;Fully-qualified&nbsp;packages&nbsp;may&nbsp;also&nbsp;be\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;specified&nbsp;for&nbsp;component-scanning&nbsp;--&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;context-param&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;param-value&gt;com.howtodoinjava.AppConfig&lt;/param-value&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/context-param&gt;\n&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;Bootstrap&nbsp;the&nbsp;root&nbsp;application&nbsp;context&nbsp;as&nbsp;usual&nbsp;using&nbsp;ContextLoaderListener&nbsp;--&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;listener&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/listener&gt;\n&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;Declare&nbsp;a&nbsp;Spring&nbsp;MVC&nbsp;DispatcherServlet&nbsp;as&nbsp;usual&nbsp;--&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;servlet&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;Configure&nbsp;DispatcherServlet&nbsp;to&nbsp;use&nbsp;AnnotationConfigWebApplicationContext\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instead&nbsp;of&nbsp;the&nbsp;default&nbsp;XmlWebApplicationContext&nbsp;--&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;init-param&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;param-name&gt;contextClass&lt;/param-name&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;param-value&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.springframework.web.context.support.AnnotationConfigWebApplicationContext\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/param-value&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/init-param&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;Again,&nbsp;config&nbsp;locations&nbsp;must&nbsp;consist&nbsp;of&nbsp;one&nbsp;or&nbsp;more&nbsp;comma-&nbsp;or&nbsp;space-delimited\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;fully-qualified&nbsp;@Configuration&nbsp;classes&nbsp;--&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;init-param&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;param-value&gt;com.howtodoinjava.web.MvcConfig&lt;/param-value&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/init-param&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/servlet&gt;\n&nbsp;\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;map&nbsp;all&nbsp;requests&nbsp;for&nbsp;/app/*&nbsp;to&nbsp;the&nbsp;dispatcher&nbsp;servlet&nbsp;--&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;servlet-mapping&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;url-pattern&gt;/app/*&lt;/url-pattern&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;/servlet-mapping&gt;\n&lt;/web-app&gt;</pre><p><strong>9、怎样用注解的方式配置Spring？</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Spring在2.5版本以后开始支持用注解的方式来配置依赖注入。可以用注解的方式来替代XML方式的bean描述，可以将bean描述转移到组件类的内部，只需要在相关类上、方法上或者字段声明上使用注解即可。注解注入将会被容器在XML注入之前被处理，所以后者会覆盖掉前者对于同一个属性的处理结果。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 注解装配在Spring中是默认关闭的。所以需要在Spring文件中配置一下才能使用基于注解的装配模式。如果你想要在你的应用程序中使用关于注解的方法的话，请参考如下的配置。</p><p><br>&nbsp;</p><pre class=\"brush:xml; toolbar: false; auto-links: false;\">&lt;beans&gt;\n&nbsp;\n&nbsp;&nbsp;&nbsp;&lt;context:annotation-config/&gt;\n&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;bean&nbsp;definitions&nbsp;go&nbsp;here&nbsp;--&gt;\n&nbsp;\n&lt;/beans&gt;</pre><p>在 &lt;context:annotation-config/&gt;标签配置完成以后，就可以用注解的方式在Spring中向属性、方法和构造方法中自动装配变量。</p><p>下面是几种比较重要的注解类型：</p><p>@Required：该注解应用于设值方法。<br>@Autowired：该注解应用于有值设值方法、非设值方法、构造方法和变量。<br>@Qualifier：该注解和@Autowired注解搭配使用，用于消除特定bean自动装配的歧义。<br>JSR-250 Annotations：Spring支持基于JSR-250 注解的以下注解，@Resource、@PostConstruct 和 @PreDestroy。</p><p><strong>10、请解释Spring Bean的生命周期？</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Spring Bean的生命周期简单易懂。在一个bean实例被初始化时，需要执行一系列的初始化操作以达到可用的状态。同样的，当一个bean不在被调用时需要进行相关的析构操作，并从bean容器中移除。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Spring bean factory 负责管理在spring容器中被创建的bean的生命周期。Bean的生命周期由两组回调（call back）方法组成。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 初始化之后调用的回调方法。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 销毁之前调用的回调方法。<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Spring框架提供了以下四种方式来管理bean的生命周期事件：</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; InitializingBean和DisposableBean回调接口<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 针对特殊行为的其他Aware接口<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Bean配置文件中的Custom init()方法和destroy()方法<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; @PostConstruct和@PreDestroy注解方式<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 使用customInit()和 customDestroy()方法管理bean生命周期的代码样例如下：</p><p><br>&nbsp;</p><pre class=\"brush:xml; toolbar: false; auto-links: false;\">&lt;beans&gt;\n&nbsp;&nbsp;&nbsp;&nbsp;&lt;bean&nbsp;id=&quot;demoBean&quot;&nbsp;class=&quot;com.howtodoinjava.task.DemoBean&quot;\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;init-method=&quot;customInit&quot;&nbsp;destroy-method=&quot;customDestroy&quot;&gt;&lt;/bean&gt;\n&lt;/beans&gt;</pre><p><br>更多内容请参考：Spring生命周期Spring Bean Life Cycle。</p><p><br><strong>11、Spring Bean的作用域之间有什么区别？</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Spring容器中的bean可以分为5个范围。所有范围的名称都是自说明的，但是为了避免混淆，还是让我们来解释一下：</p><p>singleton：这种bean范围是默认的，这种范围确保不管接受到多少个请求，每个容器中只有一个bean的实例，单例的模式由bean factory自身来维护。<br>prototype：原形范围与单例范围相反，为每一个bean请求提供一个实例。<br>request：在请求bean范围内会每一个来自客户端的网络请求创建一个实例，在请求完成以后，bean会失效并被垃圾回收器回收。<br>Session：与请求范围类似，确保每个session中有一个bean的实例，在session过期后，bean会随之失效。<br>global-session：global-session和Portlet应用相关。当你的应用部署在Portlet容器中工作时，它包含很多portlet。如果你想要声明让所有的portlet共用全局的存储变量的话，那么这全局变量需要存储在global-session中。<br> 全局作用域与Servlet中的session作用域效果相同。</p><p>更多内容请参考 : Spring Bean Scopes。</p><p><p><br>					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 原文地址：<a target=\"_blank\" href=\"http://www.itmmd.com/201504/714.html\">http://www.itmmd.com/201504/714.html&nbsp;&nbsp; </a><br>该文章由 <a target=\"_blank\" href=\"http://www.itmmd.com/\">萌萌的IT人</a> 整理发布,转载须标明出处。 </p>   \n', '2016-04-16 01:21:16', '0');
INSERT INTO `article` VALUES ('10061', '10003', 'iBatis开发详解（6）-----------Spring的数据库访问', '\n\n<span style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">现在我们介绍Spring对iBatis的支持。&nbsp;</span><br style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<span style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">&nbsp;&nbsp;&nbsp; 相对于Hibernate等ORM框架的全自动SQL，那么iBatis则属于半自动化的ORM框架，我们需要编写SQL语句，由iBatis进行数据库访问，返回结果。而iBatis可以为我们做的更多，比如对查询结果的封装等等。虽然不如全自动SQL方便，但是SQL的主动权却在我们开发人员的手中，对SQL优化的掌控则是很直接的。对于Hibernate和iBatis的其它讨论，不是我们探究的范围。&nbsp;</span><br style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<span style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">当前iBatis的版本为3，其名称也已经更改为MyBatis。而Spring更新到3.1都没有对MyBatis进行支持，但是MyBatis团队已经自行开发了Spring的支持。我们以Spring为主，仍然使用对iBatis2的支持来进行说明。&nbsp;</span><br style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<span style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">首先是构建开发环境，我们仍然使用Maven作为构建环境，创建项目，本文的示例基于“联系人管理”功能来展示：&nbsp;</span><br style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; width:679px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; line-height:25.2000007629395px\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(16,138,198); text-decoration:underline\"><img class=\"star\" src=\"http://sarin.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">package</span>&nbsp;org.ourpioneer.contact.bean;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>&nbsp;Contact&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;Long&nbsp;id;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;String&nbsp;name;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;String&nbsp;gender;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;String&nbsp;mobile;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;String&nbsp;address;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//省略getter和setter方法</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Override</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;String&nbsp;toString()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">return</span>&nbsp;<span class=\"string\" style=\"color:blue\">&quot;Contact&nbsp;[id=&quot;</span>&nbsp;&#43;&nbsp;id&nbsp;&#43;&nbsp;<span class=\"string\" style=\"color:blue\">&quot;,&nbsp;name=&quot;</span>&nbsp;&#43;&nbsp;name&nbsp;&#43;&nbsp;<span class=\"string\" style=\"color:blue\">&quot;,&nbsp;gender=&quot;</span>&nbsp;&#43;&nbsp;gender&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#43;&nbsp;<span class=\"string\" style=\"color:blue\">&quot;,&nbsp;mobile=&quot;</span>&nbsp;&#43;&nbsp;mobile&nbsp;&#43;&nbsp;<span class=\"string\" style=\"color:blue\">&quot;,&nbsp;address=&quot;</span>&nbsp;&#43;&nbsp;address&nbsp;&#43;&nbsp;<span class=\"string\" style=\"color:blue\">&quot;]&quot;</span>;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n<br style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<span style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">&nbsp;&nbsp;&nbsp; 编写一个Contact类来描述联系人的一些特征，为了简便，我们使用5个字段就够了，实体类是很简单的。下面是添加类库了，要访问数据库，不能少了数据库驱动，我们使用MySQL数据库，在pom.xml中添加依赖：&nbsp;</span><br style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; width:679px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; line-height:25.2000007629395px\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Xml代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(16,138,198); text-decoration:underline\"><img class=\"star\" src=\"http://sarin.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-xml\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">dependency</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">groupId</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>mysql<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">groupId</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">artifactId</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>mysql-connector-java<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">artifactId</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">version</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>5.1.14<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">version</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">type</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>jar<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">type</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">scope</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>compile<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">scope</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">dependency</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li></ol>\n</div>\n<br style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<span style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">&nbsp;&nbsp;&nbsp; 同时在数据库中建表，因为iBatis还没有自动建表的功能：&nbsp;</span><br style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; width:679px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; line-height:25.2000007629395px\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Sql代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(16,138,198); text-decoration:underline\"><img class=\"star\" src=\"http://sarin.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-sql\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">CREATE</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">TABLE</span>&nbsp;`contact`&nbsp;(&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">`ID`&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">int</span>(11)&nbsp;<span class=\"op\" style=\"color:rgb(128,128,128)\">NOT</span>&nbsp;<span class=\"op\" style=\"color:rgb(128,128,128)\">NULL</span>&nbsp;AUTO_INCREMENT&nbsp;,&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">`<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">NAME</span>`&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">varchar</span>(20)&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">CHARACTER</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">SET</span>&nbsp;latin1&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">COLLATE</span>&nbsp;latin1_swedish_ci&nbsp;<span class=\"op\" style=\"color:rgb(128,128,128)\">NOT</span>&nbsp;<span class=\"op\" style=\"color:rgb(128,128,128)\">NULL</span>&nbsp;,&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">`GENDER`&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">varchar</span>(10)&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">CHARACTER</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">SET</span>&nbsp;latin1&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">COLLATE</span>&nbsp;latin1_swedish_ci&nbsp;<span class=\"op\" style=\"color:rgb(128,128,128)\">NOT</span>&nbsp;<span class=\"op\" style=\"color:rgb(128,128,128)\">NULL</span>&nbsp;,&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">`MOBILE`&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">varchar</span>(11)&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">CHARACTER</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">SET</span>&nbsp;latin1&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">COLLATE</span>&nbsp;latin1_swedish_ci&nbsp;<span class=\"op\" style=\"color:rgb(128,128,128)\">NOT</span>&nbsp;<span class=\"op\" style=\"color:rgb(128,128,128)\">NULL</span>&nbsp;,&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">`ADDRESS`&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">varchar</span>(100)&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">CHARACTER</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">SET</span>&nbsp;latin1&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">COLLATE</span>&nbsp;latin1_swedish_ci&nbsp;<span class=\"op\" style=\"color:rgb(128,128,128)\">NOT</span>&nbsp;<span class=\"op\" style=\"color:rgb(128,128,128)\">NULL</span>&nbsp;,&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">PRIMARY</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">KEY</span>&nbsp;(`ID`)&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">)&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">ENGINE=InnoDB&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">DEFAULT</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">CHARACTER</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">SET</span>=latin1&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">COLLATE</span>=latin1_swedish_ci&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">AUTO_INCREMENT=1&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">ROW_FORMAT=COMPACT&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">;&nbsp;&nbsp;</span></li></ol>\n</div>\n<br style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<span style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">&nbsp;&nbsp;&nbsp; 加好驱动，创建好数据库表，那么程序访问需要配置连接池，这里我们使用BoneCP连接池，在pom.xml中加入相关依赖：&nbsp;</span><br style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; width:679px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; line-height:25.2000007629395px\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Xml代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(16,138,198); text-decoration:underline\"><img class=\"star\" src=\"http://sarin.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-xml\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">repositories</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">repository</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">releases</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">updatePolicy</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>always<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">updatePolicy</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">releases</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">snapshots</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">updatePolicy</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>always<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">updatePolicy</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">snapshots</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">id</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>Jolbox<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">id</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">name</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>Jolbox&nbsp;Repositories<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">name</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">url</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>http://jolbox.com/bonecp/downloads/maven<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">url</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">repository</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">repositories</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li></ol>\n</div>\n<br style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<span style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">&nbsp;&nbsp;&nbsp; 因为BoneCP的Maven仓库不在Maven的中央仓库中，所以必须加入以上代码到pom.xml中，这点可以在BoneCP的官方网站（http://jolbox.com/）中获得，下面就是加入依赖了，就没有什么多说的了：&nbsp;</span><br style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; width:679px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; line-height:25.2000007629395px\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Xml代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(16,138,198); text-decoration:underline\"><img class=\"star\" src=\"http://sarin.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-xml\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">dependency</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">groupId</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>com.jolbox<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">groupId</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">artifactId</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>bonecp<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">artifactId</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">version</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>0.7.1.RELEASE<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">version</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">dependency</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li></ol>\n</div>\n<br style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<span style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">&nbsp;&nbsp; 下面配置系统日志，因为引入BoneCP而引入了slf4j，如果自动添加的版本过低，这里我们要重新设置slf4j的版本为1.6.4。那么我们添加logback来设置日志系统：&nbsp;</span><br style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; width:679px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; line-height:25.2000007629395px\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Xml代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(16,138,198); text-decoration:underline\"><img class=\"star\" src=\"http://sarin.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-xml\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">dependency</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">groupId</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>ch.qos.logback<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">groupId</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">artifactId</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>logback-core<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">artifactId</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">version</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>1.0.0<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">version</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">type</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>jar<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">type</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">scope</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>compile<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">scope</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">dependency</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">dependency</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">groupId</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>ch.qos.logback<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">groupId</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">artifactId</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>logback-classic<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">artifactId</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">version</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>1.0.0<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">version</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">type</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>jar<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">type</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">scope</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>compile<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">scope</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">dependency</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li></ol>\n</div>\n<br style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<span style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">&nbsp;&nbsp;&nbsp; 下面配置logback.xml来配置日志具体项，logback.xml文件需要放置到类路径的根路径下：&nbsp;</span><br style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; width:679px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; line-height:25.2000007629395px\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Xml代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(16,138,198); text-decoration:underline\"><img class=\"star\" src=\"http://sarin.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-xml\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;?</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">xml</span>&nbsp;<span class=\"attribute\" style=\"color:red\">version</span>=<span class=\"attribute-value\" style=\"color:blue\">&quot;1.0&quot;</span>&nbsp;<span class=\"attribute\" style=\"color:red\">encoding</span>=<span class=\"attribute-value\" style=\"color:blue\">&quot;UTF-8&quot;</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">?&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">configuration</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">jmxConfigurator</span>&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">/&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comments\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">&lt;!--输出到控制台,方便调试,应用时切换到文件Log&nbsp;--&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">appender</span>&nbsp;<span class=\"attribute\" style=\"color:red\">name</span>=<span class=\"attribute-value\" style=\"color:blue\">&quot;ConsoleAppender&quot;</span>&nbsp;<span class=\"attribute\" style=\"color:red\">class</span>=<span class=\"attribute-value\" style=\"color:blue\">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">encoder</span>&nbsp;<span class=\"attribute\" style=\"color:red\">class</span>=<span class=\"attribute-value\" style=\"color:blue\">&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">pattern</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>%date&nbsp;%-5level&nbsp;[%logger{80}:%L]&nbsp;-&nbsp;%msg%n&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">pattern</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">charset</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>UTF-8<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">charset</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">encoder</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">appender</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comments\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">&lt;!--&nbsp;需要记录日志的包&nbsp;--&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">logger</span>&nbsp;<span class=\"attribute\" style=\"color:red\">name</span>=<span class=\"attribute-value\" style=\"color:blue\">&quot;org.ourpioneer&quot;</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">level</span>&nbsp;<span class=\"attribute\" style=\"color:red\">value</span>=<span class=\"attribute-value\" style=\"color:blue\">&quot;debug&quot;</span>&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">/&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">logger</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">logger</span>&nbsp;<span class=\"attribute\" style=\"color:red\">name</span>=<span class=\"attribute-value\" style=\"color:blue\">&quot;org.springframework&quot;</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">level</span>&nbsp;<span class=\"attribute\" style=\"color:red\">value</span>=<span class=\"attribute-value\" style=\"color:blue\">&quot;warn&quot;</span>&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">/&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">logger</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">root</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">level</span>&nbsp;<span class=\"attribute\" style=\"color:red\">value</span>=<span class=\"attribute-value\" style=\"color:blue\">&quot;warn&quot;</span>&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">/&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">appender-ref</span>&nbsp;<span class=\"attribute\" style=\"color:red\">ref</span>=<span class=\"attribute-value\" style=\"color:blue\">&quot;ConsoleAppender&quot;</span>&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">/&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">root</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;/</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">configuration</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&gt;</span>&nbsp;&nbsp;</span></li></ol>\n</div>\n<br style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<span style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">&nbsp;&nbsp;&nbsp; 这里我们只创建了控制台的Appender，其中设置了日志的&#26684;式，编码和需要记录日志的包，并配置响应日志的级别，这都很好理解。下面是添加Spring和iBatis的类库：&nbsp;</span><br style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; width:679px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; line-height:25.2000007629395px\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Xml代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(16,138,198); text-decoration:underline\"><img class=\"star\" src=\"http://sarin.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-xml\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bold\">&lt;</span><span class=\"tag-name\" style=\"color:rgb(0,102,153); font-weight:bold\">dependency</span><span class=\"tag\" style=\"color:rgb(0,102,153); font-weight:bo', '2016-04-16 01:21:16', '0');
INSERT INTO `article` VALUES ('10062', '10003', 'Spring详解------------基于@ASpectJ的AOP', '\n\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;Spring除了支持Schema方式配置AOP，还支持注解方式：使用@AspectJ风&#26684;的切面声明。</p>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n6.4.1&nbsp; 启用对@AspectJ的支持</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Spring默认不支持@AspectJ风&#26684;的切面声明，为了支持需要使用如下配置：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;aop:aspectj-autoproxy/&gt;&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n这样Spring就能发现@AspectJ风&#26684;的切面并且将切面应用到目标对象。</p>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n6.4.2&nbsp; 声明切面</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; @AspectJ风&#26684;的声明切面非常简单，使用@Aspect注解进行声明：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Aspect</span>()&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">Public&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>&nbsp;Aspect{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">……&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 然后将该切面在配置文件中声明为Bean后，Spring就能自动识别并进行AOP方面的配置：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;bean&nbsp;id=<span class=\"string\" style=\"color:blue\">&quot;aspect&quot;</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>=<span class=\"string\" style=\"color:blue\">&quot;……Aspect&quot;</span>/&gt;&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 该切面就是一个POJO，可以在该切面中进行切入点及通知定义，接着往下看吧。</p>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n&nbsp;</h3>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n6.4.3&nbsp; 声明切入点</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; @AspectJ风&#26684;的命名切入点使用org.aspectj.lang.annotation包下的@Pointcut&#43;方法（方法必须是返回void类型）实现。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Pointcut</span>(value=<span class=\"string\" style=\"color:blue\">&quot;切入点表达式&quot;</span>,&nbsp;argNames&nbsp;=&nbsp;<span class=\"string\" style=\"color:blue\">&quot;参数名列表&quot;</span>)&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;pointcutName(……)&nbsp;{}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; &nbsp; &nbsp;<strong>value：</strong>指定切入点表达式；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; &nbsp; &nbsp;<strong>argNames：</strong>指定命名切入点方法参数列表参数名字，可以有多个用“，”分隔，这些参数将传递给通知方法同名的参数，同时比如切入点表达式“args(param)”将匹配参数类型为命名切入点方法同名参数指定的参数类型。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; &nbsp; &nbsp;<strong>pointcutName：</strong>切入点名字，可以使用该名字进行引用该切入点表达式。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Pointcut</span>(value=<span class=\"string\" style=\"color:blue\">&quot;execution(*&nbsp;cn.javass..*.sayAdvisorBefore(..))&nbsp;&amp;&amp;&nbsp;args(param)&quot;</span>,&nbsp;argNames&nbsp;=&nbsp;<span class=\"string\" style=\"color:blue\">&quot;param&quot;</span>)&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;beforePointcut(String&nbsp;param)&nbsp;{}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n定义了一个切入点，名字为“beforePointcut”，该切入点将匹配目标方法的第一个参数类型为通知方法实现中参数名为“param”的参数类型。</p>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n&nbsp;</h3>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n6.4.4&nbsp; 声明通知</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; @AspectJ风&#26684;的声明通知也支持5种通知类型：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>一、前置通知：</strong>使用org.aspectj.lang.annotation 包下的@Before注解声明；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Before</span>(value&nbsp;=&nbsp;<span class=\"string\" style=\"color:blue\">&quot;切入点表达式或命名切入点&quot;</span>,&nbsp;argNames&nbsp;=&nbsp;<span class=\"string\" style=\"color:blue\">&quot;参数列表参数名&quot;</span>)&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; &nbsp; &nbsp;<strong>value：</strong>指定切入点表达式或命名切入点；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; &nbsp; &nbsp;<strong>argNames：</strong>与Schema方式配置中的同义。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>&nbsp;</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n接下来示例一下吧：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n1、定义接口和实现，在此我们就使用Schema风&#26684;时的定义；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n2、定义切面：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">package</span>&nbsp;cn.javass.spring.chapter6.aop;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">import</span>&nbsp;org.aspectj.lang.annotation.Aspect;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Aspect</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>&nbsp;HelloWorldAspect2&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n3、定义切入点：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Pointcut</span>(value=<span class=\"string\" style=\"color:blue\">&quot;execution(*&nbsp;cn.javass..*.sayAdvisorBefore(..))&nbsp;&amp;&amp;&nbsp;args(param)&quot;</span>,&nbsp;argNames&nbsp;=&nbsp;<span class=\"string\" style=\"color:blue\">&quot;param&quot;</span>)&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;beforePointcut(String&nbsp;param)&nbsp;{}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n4、定义通知：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Before</span>(value&nbsp;=&nbsp;<span class=\"string\" style=\"color:blue\">&quot;beforePointcut(param)&quot;</span>,&nbsp;argNames&nbsp;=&nbsp;<span class=\"string\" style=\"color:blue\">&quot;param&quot;</span>)&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;beforeAdvice(String&nbsp;param)&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\" style=\"color:blue\">&quot;===========before&nbsp;advice&nbsp;param:&quot;</span>&nbsp;&#43;&nbsp;param);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n5、在chapter6/advice2.xml配置文件中进行如下配置：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;?xml&nbsp;version=<span class=\"string\" style=\"color:blue\">&quot;1.0&quot;</span>&nbsp;encoding=<span class=\"string\" style=\"color:blue\">&quot;UTF-8&quot;</span>?&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;beans&nbsp;&nbsp;xmlns=<span class=\"string\" style=\"color:blue\">&quot;http://www.springframework.org/schema/beans&quot;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xmlns:xsi=<span class=\"string\" style=\"color:blue\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xmlns:aop=<span class=\"string\" style=\"color:blue\">&quot;http://www.springframework.org/schema/aop&quot;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xsi:schemaLocation=&quot;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http:<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//www.springframework.org/schema/beans</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http:<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//www.springframework.org/schema/beans/spring-beans-3.0.xsd</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http:<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//www.springframework.org/schema/aop</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http:<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//www.springframework.org/schema/aop/spring-aop-3.0.xsd&quot;&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&lt;aop:aspectj-autoproxy/&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&lt;bean&nbsp;id=<span class=\"string\" style=\"color:blue\">&quot;helloWorldService&quot;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>=<span class=\"string\" style=\"color:blue\">&quot;cn.javass.spring.chapter6.service.impl.HelloWorldService&quot;</span>/&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&lt;bean&nbsp;id=<span class=\"string\" style=\"color:blue\">&quot;aspect&quot;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>=<span class=\"string\" style=\"color:blue\">&quot;cn.javass.spring.chapter6.aop.HelloWorldAspect2&quot;</span>/&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;/beans&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n6、测试代码cn.javass.spring.chapter6.AopTest:</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Test</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;testAnnotationBeforeAdvice()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\" style=\"color:blue\">&quot;======================================&quot;</span>);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;ApplicationContext&nbsp;ctx&nbsp;=&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">new</span>&nbsp;ClassPathXmlApplicationContext(<span class=\"string\" style=\"color:blue\">&quot;chapter6/advice2.xml&quot;</span>);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;IHelloWorldService&nbsp;helloworldService&nbsp;=&nbsp;ctx.getBean(<span class=\"string\" style=\"color:blue\">&quot;helloWorldService&quot;</span>,&nbsp;IHelloWorldService.<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;helloworldService.sayBefore(<span class=\"string\" style=\"color:blue\">&quot;before&quot;</span>);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\" style=\"color:blue\">&quot;======================================&quot;</span>);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n将输出：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<table cellpadding=\"0\" border=\"0\" cellspacing=\"0\" style=\"color:rgb(0,0,0); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<tbody>\n<tr>\n<td width=\"23\" height=\"9\" style=\"font-size:14px\">&nbsp;</td>\n</tr>\n<tr>\n<td style=\"font-size:14px\">&nbsp;</td>\n<td width=\"510\" height=\"100\" style=\"font-size:14px\">\n<table cellpadding=\"0\" border=\"0\" cellspacing=\"0\" style=\"width:500px\">\n<tbody>\n<tr>\n<td style=\"font-size:14px\">\n<div class=\"shape\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\n==========================================</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\n===========before advice param:before</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\n============say before</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\n==========================================</p>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n&nbsp;</td>\n</tr>\n</tbody>\n</table>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n切面、切入点、通知全部使用注解完成：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1）使用@Aspect将POJO声明为切面；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2）使用@Pointcut进行命名切入点声明，同时指定目标方法第一个参数类型必须是java.lang.String，对于其他匹配的方法但参数类型不一致的将也是不匹配的，通过argNames = &quot;param&quot;指定了将把该匹配的目标方法参数传递给通知同名的参数上；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3）使用@Before进行前置通知声明，其中value用于定义切入点表达式或引用命名切入点；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4）配置文件需要使用&lt;aop:aspectj-autoproxy/&gt;来开启注解风&#26684;的@AspectJ支持；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; 5）需要将切面注册为Bean，如“aspect”Bean；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 6）测试代码完全一样。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>二、后置返回通知：</strong>使用org.aspectj.lang.annotation 包下的@AfterReturning注解声明；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@AfterReturning</span>(&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">value=<span class=\"string\" style=\"color:blue\">&quot;切入点表达式或命名切入点&quot;</span>,&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">pointcut=<span class=\"string\" style=\"color:blue\">&quot;切入点表达式或命名切入点&quot;</span>,&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">argNames=<span class=\"string\" style=\"color:blue\">&quot;参数列表参数名&quot;</span>,&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">returning=<span class=\"string\" style=\"color:blue\">&quot;返回&#20540;对应参数名&quot;</span>)&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; &nbsp; &nbsp;<strong>value：</strong>指定切入点表达式或命名切入点；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; &nbsp; &nbsp;<strong>pointcut：</strong>同样是指定切入点表达式或命名切入点，如果指定了将覆盖value属性指定的，pointcut具有高优先级；<strong></strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; &nbsp; &nbsp;<strong>argNames：</strong>与Schema方式配置中的同义；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; &nbsp; &nbsp;<strong>returning：</strong>与Schema方式配置中的同义。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@AfterReturning</span>(&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;value=<span class=\"string\" style=\"color:blue\">&quot;execution(*&nbsp;cn.javass..*.sayBefore(..))&quot;</span>,&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;pointcut=<span class=\"string\" style=\"color:blue\">&quot;execution(*&nbsp;cn.javass..*.sayAfterReturning(..))&quot;</span>,&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;argNames=<span class=\"string\" style=\"color:blue\">&quot;retVal&quot;</span>,&nbsp;returning=<span class=\"string\" style=\"color:blue\">&quot;retVal&quot;</span>)&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;afterReturningAdvice(Object&nbsp;retVal)&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\" style=\"color:blue\">&quot;===========after&nbsp;returning&nbsp;advice&nbsp;retVal:&quot;</span>&nbsp;&#43;&nbsp;retVal);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n其中测试代码与Schema方式几乎一样，在此就不演示了，如果需要请参考AopTest.java中的testAnnotationAfterReturningAdvice测试方法。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>&nbsp;</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>三、后置异常通知：</strong>使用org.aspectj.lang.annotation 包下的@AfterThrowing注解声明；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@AfterThrowing</span>&nbsp;(&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">value=<span class=\"string\" style=\"color:blue\">&quot;切入点表达式或命名切入点&quot;</span>,&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">pointcut=<span class=\"string\" style=\"color:blue\">&quot;切入点表达式或命名切入点&quot;</span>,&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">argNames=<span class=\"string\" style=\"color:blue\">&quot;参数列表参数名&quot;</span>,&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">throwing=<span class=\"string\" style=\"color:blue\">&quot;异常对应参数名&quot;</span>)&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; &nbsp; &nbsp;<strong>value：</strong>指定切入点表达式或命名切入点；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; &nbsp; &nbsp;<strong>pointcut：</strong>同样是指定切入点表达式或命名切入点，如果指定了将覆盖value属性指定的，pointcut具有高优先级；<strong></strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; &nbsp; &nbsp;<strong>argNames：</strong>与Schema方式配置中的同义；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; &nbsp; &nbsp;<strong>throwing：</strong>与Schema方式配置中的同义。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.200', '2016-04-16 01:21:16', '0');
INSERT INTO `article` VALUES ('10063', '10003', 'SpringMVC核心思想详解', '\n<p>Spring MVC是spring的一个web组件，它为构建稳健的web应用提供了丰富的功能。</p><p>Spring MVC是基于每个逻辑和功能是高可配置的这样架构和设计的。当然spring MVC可以与其它流行的web框架像struts、webwork、javaserverface及tapestry实现无缝集成。我们看一下spring MVC的核心思想。</p><p>&nbsp;<wbr></p><div><a target=\"_blank\" href=\"http://photo.blog.sina.com.cn/showpic.html#blogid=6f636025010184c9&amp;url=http://s5.sinaimg.cn/orignal/6f636025td02b08aed574\" target=\"_blank\"><img name=\"image_operate_1581354783741000\" width=\"478\" height=\"295\" title=\"Spring&nbsp;<wbr>MVC&nbsp;<wbr>入门实例\" alt=\"Spring&nbsp;<wbr>MVC&nbsp;<wbr>入门实例\" src=\"http://s5.sinaimg.cn/mw690/6f636025td02b08aed574&amp;690\" action-type=\"show-slide\" action-data=\"http%3A%2F%2Fs5.sinaimg.cn%2Fmw690%2F6f636025td02b08aed574%26690\" real_src=\"http://s5.sinaimg.cn/mw690/6f636025td02b08aed574&amp;690\"></a><br></div><p align=\"center\">&nbsp;</p><p align=\"center\">&nbsp;</p><p align=\"center\">Spring请求的生命周期</p><p align=\"center\">&nbsp;</p><p align=\"center\">&nbsp;</p><div>为了便于理解，我把spring MVC的生命周期拆解为如下一个步骤</div><p><a target=\"_blank\" href=\"http://photo.blog.sina.com.cn/showpic.html#blogid=6f636025010184c9&amp;url=http://s13.sinaimg.cn/orignal/6f636025td02b0ccda98c\" target=\"_blank\"><img name=\"image_operate_82031354783566312\" width=\"566\" height=\"304\" title=\"Spring&nbsp;<wbr>MVC&nbsp;<wbr>入门实例\" alt=\"Spring&nbsp;<wbr>MVC&nbsp;<wbr>入门实例\" src=\"http://s13.sinaimg.cn/mw690/6f636025td02b0ccda98c&amp;690\" action-type=\"show-slide\" action-data=\"http%3A%2F%2Fs13.sinaimg.cn%2Fmw690%2F6f636025td02b0ccda98c%26690\" real_src=\"http://s13.sinaimg.cn/mw690/6f636025td02b0ccda98c&amp;690\"></a><br></p><p><strong><span style=\"color:#ff0000;\">总结一下springMVC几个关键的步骤，总共可以分为六个步骤，分别为：</span></strong></p><p><strong><span style=\"color:#ff0000;\">（1）&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> 客户端向spring容器发起一个http请求</span></strong></p><p><strong><span style=\"color:#ff0000;\">（2）&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> 发起的请求被前端控制起所拦截(DispatcherServlet)，前端控制器会去找恰当的映射处理器来处理这次请求。</span></strong></p><p><strong><span style=\"color:#ff0000;\">（3）&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> 根据处理器映射（Handler Mapping）来选择并决定将请求发送给那一个控制器。</span></strong></p><p><strong><span style=\"color:#ff0000;\">（4）&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> 在控制器中处理所发送的请求，并以modelAndView（属性值和返回的页面）的形式返回给向前端控制器。</span></strong></p><p><strong><span style=\"color:#ff0000;\">（5）&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> 前端控制器通过查询viewResolver对象来试着解决从控制返回的视图。</span></strong></p><p><strong><span style=\"color:#ff0000;\">（6）&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> 如果前端控制找到对应的视图，则将视图返回给客户端，否则抛异常。</span></strong></p><p>通过上面的图和springMVC生命周期的六个步骤，想必大家对springMVC的核心思想有个了大概的了解了，下面我们以实例为主，带领大家慢慢熟悉整个springMVC及如何使用springMVC。（本教程基于maven实现springMVC中的例子，所以大家得对maven需要有大概的了解）。</p><p><br>&nbsp;<wbr></p><h1><a target=\"_blank\" name=\"_Toc325181268\">二、<span style=\"font-family:Calibri;\">spring3.1 mvc</span></a> 框架的特点</h1><h1><span style=\"font-size:14px;\">如果仅仅关注于web方面的支持，Spring有下面一些特点：</span></h1><h1><span style=\"font-family:Symbol;\">·</span>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> <span style=\"font-size:14px;\">清晰的角色划分：控制器（controler），验证器(Validate)，命令对象(Object)，表单对象(BeanObject)和模型对象(Model)；分发器(Adapter)，处理器映射（HandlerAdapter）和视图解析器(ViewResolver)；等等。</span></h1><h1><span style=\"font-family:Symbol;\">·</span>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> <span style=\"font-size:14px;\">直接将框架类和应用类都作为JavaBean配置，包括通过应用上下文配置中间层引用，例如，从web控制器到业务对象和验证器的引用。</span></h1><h1><span style=\"font-family:Symbol;\">·</span>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> <span style=\"font-size:14px;\">可适应性，但不具有强制性：根据不同的情况，使用任何你需要的控制器子类（普通控制器，命令，表单，向导，多个行为，或者自定义的），而不是要求任何东西都要从Action/ActionForm继承。</span></h1><h1>可重用的业务代码，而不需要代码重复：你可以使用现有的业务对象作为命令对象或表单对象，而不需要在ActionForm的子类中重复它们的定义</h1><p><span style=\"font-family:Symbol;\">·</span>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> <span style=\"font-size:14px;\">可定制的绑定和验证：将类型不匹配作为应用级的验证错误，这可以保存错误的值，以及本地化的日期和数字绑定等，而不是只能使用字符串表单对象，手动解析它并转换到业务对象。</span></p><p><span style=\"font-family:Symbol;\">·</span>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> <span style=\"font-size:14px;\">可定制的处理器映射，可定制的视图解析：灵活的模型可以根据名字/值映射，处理器映射和视图解析使应用策略从简单过渡到复杂，而不是只有一种单一的方法。</span></p><p><span style=\"font-family:Symbol;\">·</span>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> <span style=\"font-size:14px;\">可定制的本地化和主题解析，支持JSP，无论有没有使用Spring标签库，支持JSTL，支持不需要额外过渡的Velocity，等等。</span></p>简单而强大的标签库，它尽可能地避免在HTML生成时的开销，提供在标记方面的最大灵活性。 <h1><a target=\"_blank\" name=\"_Toc325181269\">三、spring 3.1 MVC入门列子HelloWorld</a></h1><p>（1）在WEB-INF/web.xml中加入如下代码：</p><p align=\"left\"><em>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr></span></em> <span style=\"color:#787878;\">&lt;servlet&gt;</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;servlet-name&gt;dispatcherServlet&lt;/servlet-name&gt;</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;init-param&gt;</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;param-value&gt;</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> <u>classpath</u>*:spring-servlet.xml</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;/param-value&gt;</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;/init-param&gt;</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;/servlet&gt;</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr></span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;servlet-mapping&gt;</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;servlet-name&gt;dispatcherServlet&lt;/servlet-name&gt;</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;url-pattern&gt;*.<u>html</u>&lt;/url-pattern&gt;</span></p><p><span style=\"color:#787878;\">&lt;/servlet-mapping&gt;</span></p><p>上述的配置的就是前段控制器，在servlet-mapping配置了*.html，意味着所有以.html结尾的请求多会通过这个servlet，<strong>当dispatcherServlet启动时，他默认会在web-info目录下查找一个spring-servlet.xml的配置文件</strong>。上面我们通过显示指定了这个文件的位置，即在类路径底下的spring-servlet.xml.这个文件我们会在第二步点给他家做详细介绍。</p><p>（2）在类路径底下添加<strong>spring-servlet.xml</strong>文件，其内容如下：</p><p align=\"left\"><span style=\"color:#787878;\">&lt;?xml version=<em>&quot;1.0&quot;</em> encoding=<em>&quot;UTF-8&quot;</em>?&gt;</span></p><p align=\"left\"><span style=\"color:#787878;\">&lt;beans xmlns=<em>&quot;http://www.springframework.org/schema/beans&quot;</em></span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> xmlns:xsi=<em>&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</em></span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> xmlns:p=<em>&quot;http://www.springframework.org/schema/p&quot;</em></span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> xmlns:context=<a target=\"_blank\" href=\"http://www.springframework.org/schema/context\">http://www.springframework.org/schema/context</a></span></p><p align=\"left\"><span style=\"color:#787878;\">xsi:schemaLocation=<em>&quot;http://www.springframework.org/schema/beans</em></span></p><p align=\"left\"><em><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</span></em></p><p align=\"left\"><em><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> http://www.springframework.org/schema/context</span></em></p><p align=\"left\"><span style=\"color:#787878;\"><em>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> http://www.springframework.org/schema/context/spring-context-3.0.xsd&quot;</em>&gt;</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr></span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;context:component-scan</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> base-package=<em>&quot;com.pango.spring.helloworld.controller&quot;</em> /&gt;</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr></span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;bean id=<em>&quot;viewResolver&quot;</em></span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> class=<em>&quot;org.springframework.web.servlet.view.UrlBasedViewResolver&quot;</em>&gt;</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;property name=<em>&quot;viewClass&quot;</em></span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> value=<em>&quot;org.springframework.web.servlet.view.JstlView&quot;</em> /&gt;</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;property name=<em>&quot;prefix&quot;</em> value=<em>&quot;/WEB-INF/jsp/&quot;</em> /&gt;</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;property name=<em>&quot;suffix&quot;</em> value=<em>&quot;.jsp&quot;</em> /&gt;</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;/bean&gt;</span></p><p><span style=\"color:#787878;\">&lt;/beans&gt;</span></p><p align=\"left\">上面这个文件，<strong><span style=\"color:#ff0000;\">我们定义了一个&lt;context:component-scan</span></strong></p><p align=\"left\"><strong><span style=\"color:#ff0000;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> base-package=<em>&quot;com.pango.spring.helloworld.controller&quot;</em> /&gt;</span></strong></p><p align=\"left\"><strong><span style=\"color:#ff0000;\">这样的标签，定义了这个后，当spring在启动时，会加载</span></strong><em><strong><span style=\"color:#ff0000;\">com.pango.spring.helloworld.controller这个包底下及子包底下的所有的组件</span></strong>（这就包的自动扫描机制，即spring会将标有@Controller @Component等类加载到spring容器管理中），后面我们还定义了</em></p><p align=\"left\"><span style=\"color:#787878;\">&lt;bean id=<em>&quot;viewResolver&quot;</em></span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> class=<em>&quot;org.springframework.web.servlet.view.UrlBasedViewResolver&quot;</em>&gt;</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;property name=<em>&quot;viewClass&quot;</em></span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> value=<em>&quot;org.springframework.web.servlet.view.JstlView&quot;</em> /&gt;</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;property name=<em>&quot;prefix&quot;</em> value=<em>&quot;/WEB-INF/jsp/&quot;</em> /&gt;</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;property name=<em>&quot;suffix&quot;</em> value=<em>&quot;.jsp&quot;</em> /&gt;</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;/bean&gt;</span></p><p><strong><span style=\"color:#ff0000;\">ViewResolver是一个试图解析器，就是我们第一部分提到的springMVC生命周期中的第五步</span></strong>，上面这段的配置的意思就是，当我们从后端控制器中返回的视图时，前端控制器就根据这一段配置来返回一个具体的视图，如后端控制返回的是一个hello，根据上面的配置，最后前端控制器会组并成这样的一个地址：/web-inf/jsp/hello.jsp,然后从/web-inf/jsp/这个目录下面查找一个hello.jsp返回客户端。第三部分我们看我们写得HelloworldController后台控制器。</p><p>（3）在包底下写一个HelloWorldController的类，其内容如下：</p><span style=\"color:#787878;\"></span><pre class=\"java\" name=\"code\">@Controller\n\npublic class HelloWorldController {\n\n@RequestMapping(value=&quot;/hello&quot;)\n\n    public String sayHello(ModelMap modelMap){\n\n       modelMap.put(&quot;sayHello&quot;, &quot;hello world&quot;);\n\n       return &quot;/hello&quot;; \n\n    }\n\n}\n</pre><p align=\"left\"><br></p><p align=\"left\">在这里简单介绍下上面的配置，后面我们会详细讲解各个参数：</p><p>Ø&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> Controller即声明这个类是一个控制器，上面第二部分我们说明了，<strong><span style=\"color:#ff0000;\">只要加了@Controller标示的，spring会通过自动扫描机制，将这个类纳入spring容器管理中。</span></strong></p><p align=\"left\">Ø&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> <strong><span style=\"color:#ff0000;\">@RequestMapping(value=&quot;/hello&quot;)，这个定义的就是一个请求路径，只要符合/hello路径的多会交给这个控制器的sayhello方法来处理。</span></strong></p><p align=\"left\">Ø&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> 最后我们返回/hello的视图给客户端。</p><p>（4）好了，大功告成，我们再在web-info/jsp/目录下添加一个hello.jsp文件，就可以启动运行我们的第一个程序了。hello.jsp的内容如下：</p><span style=\"color:#787878;\"></span><pre class=\"html\" name=\"code\">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;\n\n    pageEncoding=&quot;UTF-8&quot;%&gt;\n\n &lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;\n\n&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;\n\n&lt;html&gt;\n\n&lt;head&gt;\n\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;\n\n&lt;title&gt;Insert title here&lt;/title&gt;\n\n&lt;/head&gt;\n\n&lt;body&gt;\n\n    &lt;span&gt;${sayHello}&lt;/span&gt;\n\n   \n\n&lt;/body&gt;\n\n&lt;/html&gt;\n</pre><p align=\"left\">&nbsp;</p><p align=\"left\">运行后访问ip;port/project/hello.html就可以看到我们预期的结果了。</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><a target=\"_blank\" name=\"_Toc325181270\">四、<span style=\"font-family:Calibri;\">springMVC</span></a>参数传递 <p>mvc结构中，v层不断有数据和c层交互，所以弄明白在springMVC中如何与后台进行数据交互是极其重要的，当然在下面我不会介绍每一个方法，只是对常用的方法，对于我这里没有涉及的方法大家可以参考spring官方的文档中springMVC这个章节。下面我们来看一幅图。</p><h1><a target=\"_blank\" href=\"http://photo.blog.sina.com.cn/showpic.html#blogid=6f636025010184c9&amp;url=http://s13.sinaimg.cn/orignal/6f636025t7b3784887c3c\" target=\"_blank\"><img name=\"image_operate_75991354784132500\" width=\"583\" height=\"311\" title=\"Spring&nbsp;<wbr>MVC&nbsp;<wbr>入门实例\" alt=\"Spring&nbsp;<wbr>MVC&nbsp;<wbr>入门实例\" src=\"http://s13.sinaimg.cn/mw690/6f636025t7b3784887c3c&amp;690\" real_src=\"http://s13.sinaimg.cn/mw690/6f636025t7b3784887c3c&amp;690\"></a><br><br></h1><p>当我们向springMVC发起请求到视图返回前，spring MVC帮我们做了主要是上面几个步骤，通过数据绑定、数据类型转换、验证、结果绑定这几个步骤。</p><p>让我们看下实例：</p><p align=\"left\"><span style=\"color:#787878;\">@RequestMapping(&quot;/user/find&quot;)</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> public String findUserById(@RequestParam(&quot;userId&quot;) int userId,ModelMap modelMap){</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> modelMap.put(&quot;userId&quot;, userId);</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> return &quot;/user&quot;;</span></p><p><span style=\"color:#787878;\">}</span></p><p align=\"left\">Ø&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> @RequestMapping(&quot;/user/find&quot;)，是对请求映射的说明，这个注解中主要包含四个属性，分别value、method、params、header，这四个参数分别表示：</p><p><strong>Value：指定路径</strong></p><p><strong>Method：请求方式</strong></p><p><strong>Params：参数</strong></p><p><strong>Headers：请求头</strong></p><p>后面三个就是对请求路径的一个限制条件。</p><p>SpringMVC对于路径的定义非常的灵活</p><p>以下URL都是合法的：</p><p>l&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> /usercreateUser</p><p>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> 匹配/user/createUser、/user/aaa/bbb/createUser等URL。</p><p>l&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> /user/createUser??</p><p>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> 匹配/user/createUseraa、/user/createUserbb等URL。</p><p>l&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> /user/{userId}</p><p>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> 匹配user/123、user/abc等URL。</p><p>l&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> /user{userId}</p>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> 匹配user/aaa/bbb/123、user/aaa/456等URL。 <p>l&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> company/{companyId}/user/{userId}/detail</p><p>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> 匹配company/123/user/456/detail等的URL。</p><p>&nbsp;<wbr></p><p>Ø&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> 对RequestParam的介绍</p><p>@RequestParam有以下三个参数。</p><p><strong>l&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> value：参数名。</strong></p><p><strong>l&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> required：是否必需，默认为true，表示请求中必须包含对应的参数名，如果不存在将抛出异常。</strong></p><p><strong>l&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> defaultValue：默认参数名，设置该参数时，自动将required设为false。极少情况需要使用该参数，也不推荐使用该参数。</strong>&nbsp;<wbr></p><p>当发送请求时，请求参数中必须要包含userId这个参数，当不包含这个参数，请求将找不到这个映射。当属性required=true时，不包含这个参数将会抛异常，如果不能确定是否需要这个参数是我们可以写成，@RequestParam(value = &quot;userId&quot;, required = false) 。</p><p>Ø&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> 直接将属性映射到对象中</p><p align=\"left\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr><span style=\"color:#787878;\">&nbsp;@RequestMapping(&quot;/user/find2&quot;)</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> public String find2UserById(User user,ModelMap modelMap){</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> modelMap.put(&quot;user&quot;, user);</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> return &quot;/user&quot;;</span></p><p><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> }</span></p><p>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> Spring MVC按：</p><p>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> “HTTP请求参数名 =&nbsp;<wbr> 命令/表单对象的属性名”</p><p>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> 的规则，自动绑定请求数据，支持“级联属性名”，自动进行基本类型数据转换。</p><p>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> 如：发起下面这个请求，springMVC会自动将id、name、password属性的值填充到user对象中。</p><p>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> <a target=\"_blank\" href=\"http://localhost:8080/springParam/user/save.html?id=12&amp;name=marcle&amp;password=123\">http://localhost:8080/springParam/user/save.html?id=12&amp;name=marcle&amp;password=123</a></p><p>Ø&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> SpringMVC以rest技术向springMVC传递参数</p><p>通过 REST 风格体系架构，请求和响应都是基于资源表示的传输来构建的。资源是通过全局 ID 来标识的，这些 ID 一般使用的是一个统一资源标识符（URI）。客户端应用使用 HTTP 方法（如，GET、POST、PUT 或 DELETE）来操作一个或多个资源。通常，GET 是用于获取或列出一个或多个资源，POST 用于创建，PUT 用于更新或替换，而 DELETE 则用于删除资源。</p><p>例如，<code>GET http://host/context/employees/12345</code> 将获取 ID 为 12345 的员工的<em>表示</em>。这个响应表示可以是包含详细的员工信息的 XML 或 ATOM，或者是具有更好 UI 的 JSP/HTML 页面。您看到哪种表示方式取决于服务器端实现和您的客户端请求的 MIME 类型。</p><p>RESTful Web Service 是一个使用 HTTP 和 REST 原理实现的 Web Service。通常，一个 RESTful Web Service 将定义基本资源 URI、它所支持的表示/响应 MIME，以及它所支持的操作。</p><p>Spring 3.0之后引入了对rest风格的支持。我们看实例</p><p align=\"left\"><span style=\"color:#787878;\">@RequestMapping(&quot;/user/find/{id}&quot;)</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> public String rest(@PathVariable int id,ModelMap modelMap){</span></p><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> User user = new User();</span> <p align=\"left\"><span style=\"color:#787878;\">user.setName(&quot;marcle&quot;);</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> user.setPassword(&quot;123&quot;);</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> user.setId(id);</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> modelMap.put(&quot;user&quot;, user);</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> return &quot;/user&quot;;</span></p><p><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> }</span></p><p align=\"left\">这里需要注意的地方时@RequestMapping(&quot;/user/find/{id}&quot;)和@PathVariable int id名称必须一样，否则会出现异常。</p><p>Ø&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> 简单介绍返回视图的方式</p><p>u&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> ModelAndView 形式返回</p><p><span style=\"color:#787878;\">@RequestMapping(&quot;/user/save2&quot;)</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> public ModelAndView save2(User user,ModelMap modelMap){</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> ModelAndView mav = new ModelAndView();</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> mav.setViewName(&quot;/user&quot;);</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> mav.addObject(&quot;user&quot;, user);</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> return mav;</span></p><p><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> }</span></p><p>ModelAndView就是对返回到页面的值和视图进行封装。</p><p>u&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> 直接字符串的形式返回，如”return “/user””,再把属性通过modelMap进行封装，modelMap存储的值属于request范围内，如果要发送服务器端请求，springMVC非常方便，你只要这样写即可return ”direct:user”.</p><p>还有一种传递参数的方法，我放在springMVC中的rest技术介绍</p><p>&nbsp;</p><p>&nbsp;</p>下面我们看看springMVC返回的过程 <h1><a target=\"_blank\" href=\"http://photo.blog.sina.com.cn/showpic.html#blogid=6f636025010184c9&amp;url=http://s2.sinaimg.cn/orignal/6f636025td02b33ee64a1\" target=\"_blank\"><img name=\"image_operate_64871354784264562\" width=\"527\" height=\"256\" title=\"Spring&nbsp;<wbr>MVC&nbsp;<wbr>入门实例\" alt=\"Spring&nbsp;<wbr>MVC&nbsp;<wbr>入门实例\" src=\"http://s2.sinaimg.cn/mw690/6f636025td02b33ee64a1&amp;690\" real_src=\"http://s2.sinaimg.cn/mw690/6f636025td02b33ee64a1&amp;690\"></a><br><br></h1><a target=\"_blank\" name=\"_Toc325181271\">五、<span style=\"font-family:Calibri;\">springMVC</span></a>标签介绍 <p align=\"left\">SpringMVC简单没几个标签，用起来还是非常好用的，在使用springMVC中的标签之前需要向每个jsp的头部引入标签支持&lt;%@ taglib prefix=<em>&quot;form&quot;</em> uri=<em>&quot;http://www.springframework.org/tags/form&quot;</em> %&gt;</p><p>1）&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> form标签</p><p>这个标签会生成一个HTML的form标签，同时为内部标签的绑定暴露了一个绑定路径，它把命令对象（command object）放在pageContext中，这样内部的标签就可以访问这个对象，这个库中的其它标签都是这个标签的嵌套标签。</p><p>如我们有个user的域对象，包含id、name、password属性，我们将把它当作返回index.jsp表单控制器的对象，如下面的代码：</p><span style=\"color:#787878;\"></span><pre class=\"html\" name=\"code\">&lt;form:form action=&quot;${ctx}/user/save.${ext}&quot; method=&quot;post&quot; commandName=&quot;user&quot;&gt;\n\n       &lt;table&gt;\n\n           &lt;tr&gt;\n\n              &lt;td&gt;Id:&lt;/td&gt;\n\n              &lt;td&gt;&lt;form:input path =&quot;id&quot; /&gt;&lt;/td&gt;\n\n           &lt;/tr&gt;\n\n           &lt;tr&gt;\n\n              &lt;td&gt;name:&lt;/td&gt;\n\n              &lt;td&gt;&lt;form:input path =&quot;name&quot; /&gt;&lt;/td&gt;\n\n           &lt;/tr&gt;\n\n           &lt;tr&gt;\n\n              &lt;td&gt;password:&lt;/td&gt;\n\n              &lt;td&gt;&lt;form:input path =&quot;password&quot; /&gt;&lt;/td&gt;\n\n           &lt;/tr&gt;\n\n           &lt;tr&gt;\n\n              &lt;td colspan=&quot;2&quot;&gt;&lt;input type =&quot;submit&quot; value=&quot;Save&quot; /&gt;&lt;/td&gt;\n\n           &lt;/tr&gt;\n\n       &lt;/table&gt;\n\n    &lt;/form:form&gt;\n</pre><p align=\"left\"><br></p><p align=\"left\"><p><span style=\"color:#787878;\">上述的id、name、password由页面控制器放置在pageContext中，即在内部控制器方法中需要做这样的声明：</span></p><p align=\"left\"><span style=\"color:#787878;\">@RequestMapping(value=&quot;/user/save&quot;,method=RequestMethod.<em>GET</em>)</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> public String forSave(@ModelAttribute User user){</span></p><p align=\"left\"><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> return &quot;/index&quot;;</span></p><p><span style=\"color:#787878;\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> }</span></p><p>后台控制器中必须绑定这个@ModelAttribute User user命令行对象，而form下面的属性需要于这个user中的属性对应起来，否则将会抛异常。标签经过解析后生成的代码如下：</p><span style=\"color:#787878;\"></span><pre class=\"html\" name=\"code\">&lt;form id=&quot;user&quot; action=&quot;/springTag/user/save.html&quot; method=&quot;post&quot;&gt;\n\n               &lt;table&gt;\n\n                       &lt;tr&gt;\n\n                               &lt;td&gt;Id:&lt;/td&gt;\n\n                               &lt;td&gt;&lt;input id=&quot;id&quot; name=&quot;id&quot; type=&quot;text&quot; value=&quot;0&quot;/&gt;&lt;/td&gt;\n\n                       &lt;/tr&gt;\n\n                       &lt;tr&gt;\n\n                               &lt;td&gt;name:&lt;/td&gt;\n\n                               &lt;td&gt;&lt;input id=&quot;name&quot; name=&quot;name&quot; type=&quot;text&quot; value=&quot;&quot;/&gt;&lt;/td&gt;\n\n                       &lt;/tr&gt;\n\n                       &lt;tr&gt;\n\n                               &lt;td&gt;password:&lt;/td&gt;\n\n                               &lt;td&gt;&lt;input id=&quot;password&quot; name=&quot;password&quot; type=&quot;text&quot; value=&quot;&quot;/&gt;&lt;/td&gt;\n\n                       &lt;/tr&gt;\n\n                       &lt;tr&gt;\n\n                               &lt;td colspan=&quot;2&quot;&gt;&lt;input type =&quot;submit&quot; value=&quot;Save Changes&quot; /&gt;&lt;/td&gt;\n\n                       &lt;/tr&gt;\n\n               &lt;/table&gt;\n\n        &lt;/form&gt;\n</pre><p align=\"left\"><br></p><p align=\"left\"><h3><a target=\"_blank\" name=\"_Toc325181272\">（2）&nbsp;<wbr> <tt>input</tt></a> 标签</h3><p>使用时如上面的表达式，&lt;form:input path =<em>&quot;id&quot;</em> /&gt;解析后会变成&lt;input id=&quot;name&quot; name=&quot;name&quot; type=&quot;text&quot; value=&quot;&quot;/&gt;可见用spring标签比传统的html简洁很多。</p><h3><a target=\"_blank\" name=\"_Toc325181273\">（3）</a><tt>checkbox</tt> 标签</h3><p>这个标签解析之后会变成html’中的type为checkbox的input元素，我们假设我们的用户有很多的参考东西，如信息的订阅、爱好、格言等，即如下面的域模型：</p><pre><pre class=\"java\" name=\"code\">public class Preferences { \n                      \n    private boolean receiveNewsletter; \n  \n    private String[] interests; \n  \n    private String favouriteWord; \n  \n    public boolean isReceiveNewsletter() { \n        return receiveNewsletter; \n    } \n  \n    public void setReceiveNewsletter(boolean receiveNewsletter) { \n        this.receiveNewsletter = receiveNewsletter; \n    } \n  \n    public String[] getInterests() { \n        return interests; \n    } \n  \n    public void setInterests(String[] interests) { \n        this.interests = interests; \n    } \n  \n    public String getFavouriteWord() { \n        return favouriteWord; \n    } \n  \n    public void setFavouriteWord(String favouriteWord) { \n        this.favouriteWord = favouriteWord; \n    } \n} \n</pre><br></pre><p>我们的相应的jsp文件可以写成：</p><span style=\"color:#787878;\"></span><pre class=\"html\" name=\"code\">&lt;form:form action=&quot;${ctx}/pre/save.${ext}&quot; method=&quot;post&quot; commandName=&quot;preferences&quot;&gt;\n\n    &lt;table&gt;\n\n        &lt;tr&gt;\n\n            &lt;td&gt;Subscribe to newsletter?:&lt;/td&gt;\n\n            &lt;%-- Approach 1: Property is of type java.lang.Boolean --%&gt;\n\n            &lt;td&gt;&lt;form:checkbox path=&quot;receiveNewsletter&quot;/&gt;&lt;/td&gt;\n\n            &lt;td&gt;&nbsp;&lt;/td&gt;\n\n        &lt;/tr&gt;\n\n \n\n        &lt;tr&gt;\n\n            &lt;td&gt;Interests:&lt;/td&gt;\n\n            &lt;td&gt;\n\n                &lt;%-- Approach 2: Property is of an array or of type java.util.Collection --%&gt;\n\n                Quidditch: &lt;form:checkbox path=&quot;interests&quot; value=&quot;Quidditch&quot;/&gt;\n\n                Herbology: &lt;form:checkbox path=&quot;interests&quot; value=&quot;Herbology&quot;/&gt;\n\n                Defence Against the Dark Arts: &lt;form:checkbox path=&quot;interests&quot;\n\n                    value=&quot;Defence Against the Dark Arts&quot;/&gt;\n\n            &lt;/td&gt;\n\n            &lt;td&gt;&nbsp;&lt;/td&gt;\n\n        &lt;/tr&gt;\n\n        &lt;tr&gt;\n\n            &lt;td&gt;Favourite Word:&lt;/td&gt;\n\n            &lt;td&gt;\n\n                &lt;%-- Approach 3: Property is of type java.lang.Object --%&gt;\n\n                Magic: &lt;form:checkbox path=&quot;favouriteWord&quot; value=&quot;Magic&quot;/&gt;\n\n            &lt;/td&gt;\n\n            &lt;td&gt;&nbsp;&lt;/td&gt;\n\n        &lt;/tr&gt;\n\n        &lt;tr&gt;\n\n        &lt;td colspan=&quot;2&quot;&gt;\n\n             &lt;input type=&quot;submit&quot; value=&quot;submit&quot;/&gt;\n\n        &lt;/td&gt;\n\n        &lt;/tr&gt;\n\n    &lt;/table&gt;\n\n&lt;/form:form&gt;\n</pre><p align=\"left\"><br></p><p align=\"left\"><p>如果有多个供选择的，在后台我们以数组的形式存储。</p><h3><a target=\"_blank\" name=\"_Toc325181274\">（</a>4）<tt>radiobutton</tt> 标签</h3><p>解析后会变成html元素中type为radio的input元素</p><p>如下面的情况：</p><pre><pre class=\"html\" name=\"code\">&lt;tr&gt; \n    &lt;td&gt;Sex:&lt;/td&gt; \n    &lt;td&gt;Male: &lt;form:radiobutton path=&quot;sex&quot; value=&quot;M&quot;/&gt; &lt;br/&gt; \n        Female: &lt;form:radiobutton path=&quot;sex&quot; value=&quot;F&quot;/&gt; &lt;/td&gt; \n    &lt;td&gt;&nbsp;&lt;/td&gt; \n&lt;/tr&gt; \n</pre><br></pre><p><strong><span style=\"font-size:14px;\">（5）password标签</span></strong></p><p>解析后变成html元素中type为password的input元素，即为密码框。</p><pre><pre class=\"html\" name=\"code\">&lt;tr&gt; \n    &lt;td&gt;Password:&lt;/td&gt; \n    &lt;td&gt; \n        &lt;form:password path=&quot;password&quot; /&gt; \n    &lt;/td&gt; \n&lt;/tr&gt; \n</pre><br></pre><p><span style=\"font-size:14px;\"><strong>（6）select标签</strong></span></p><p>这个标签对应于html元素中的下拉框，即为select元素。</p><pre class=\"html\" name=\"code\">&lt;tr&gt;\n\n              &lt;td&gt;Skills:&lt;/td&gt;\n\n              &lt;td&gt;&lt;form:select path=&quot;skills&quot; items=&quot;${skills}&quot; /&gt;&lt;/td&gt;\n\n              &lt;td&gt;&lt;/td&gt;\n\n           &lt;/tr&gt;\n</pre><p align=\"left\"><br>&nbsp;</p><p><strong><span style=\"font-size:14px;\">（7）option标签</span></strong></p><pre><pre class=\"html\" name=\"code\">&lt;form:select path=&quot;house&quot;&gt; \n            &lt;form:option value=&quot;Gryffindor&quot;/&gt; \n            &lt;form:option value=&quot;Hufflepuff&quot;/&gt; \n            &lt;form:option value=&quot;Ravenclaw&quot;/&gt; \n            &lt;form:option value=&quot;Slytherin&quot;/&gt; \n        &lt;/form:select&gt; \n</pre><br></pre><p><strong><span style=\"font-size:14px;\">（8）options标签</span></strong></p><pre><pre class=\"html\" name=\"code\">&lt;form:select path=&quot;country&quot;&gt; \n            &lt;form:option value=&quot;-&quot; label=&quot;--Please Select&quot;/&gt; \n            &lt;form:options items=&quot;${countryList}&quot; itemValue=&quot;code&quot; itemLabel=&quot;name&quot;/&gt; \n        &lt;/form:select&gt; \n</pre><br></pre><p><strong><span style=\"font-size:14px;\">（9）textarea标签</span></strong></p><pre>&lt;td&gt;&lt;form:textarea path=&quot;notes&quot; rows=&quot;3&quot; cols=&quot;20&quot; /&gt;&lt;/td&gt; </pre><p><span style=\"font-size:14px;\"><strong>（10）hidden标签</strong></span></p><pre>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;form:hidden path=&quot;house&quot; /&gt; </pre><p><strong><span style=\"font-size:14px;\">（11）errors标签</span></strong></p><pre><pre class=\"html\" name=\"code\">&lt;form:form&gt; \n    &lt;table&gt; \n        &lt;tr&gt; \n            &lt;td&gt;First Name:&lt;/td&gt; \n            &lt;td&gt;&lt;form:input path=&quot;firstName&quot; /&gt;&lt;/td&gt; \n            &lt;%-- Show errors for firstName field --%&gt; \n            &lt;td&gt;&lt;form:errors path=&quot;firstName&quot; /&gt;&lt;/td&gt; \n        &lt;/tr&gt; \n  \n        &lt;tr&gt; \n            &lt;td&gt;Last Name:&lt;/td&gt; \n            &lt;td&gt;&lt;form:input path=&quot;lastName&quot; /&gt;&lt;/td&gt; \n            &lt;%-- Show errors for lastName field --%&gt; \n            &lt;td&gt;&lt;form:errors path=&quot;lastName&quot;  /&gt;&lt;/td&gt; \n        &lt;/tr&gt; \n        &lt;tr&gt; \n            &lt;td colspan=&quot;3&quot;&gt; \n                &lt;input type=&quot;submit&quot; value=&quot;Save Changes&quot; /&gt; \n            &lt;/td&gt; \n        &lt;/tr&gt; \n    &lt;/table&gt; \n&lt;/form:form&gt; \n</pre><br></pre><h1>&nbsp;</h1><h1><a target=\"_blank\" name=\"_Toc325181275\">六、springMVC</a>拦截器</h1><p align=\"left\">和Struts2一样，Spring MVC也可以使用拦截器对请求进行拦截处理，用户可以自定义拦截器来实现特定的功能，自定义的拦截器必须实现HandlerInterceptor接口。这个接口中定义了三个方法：preHandle()、postHandle()、afterCompletion()。</p><p align=\"left\">下面对代码中的三个方法进行解释。</p><p align=\"left\">preHandle()：这个方法在业务处理器处理请求之前被调用，在该方法中对用户请求request进行处理。如果程序员决定该拦截器对请求进行拦截处理后还要调用其他的拦截器，或者是业务处理器去进行处理，则返回true；如果程序员决定不需要再调用其他的组件去处理请求，则返回false。</p><p align=\"left\">postHandle()：这个方法在业务处理器处理完请求后，但是DispatcherServlet向客户端返回请求前被调用，在该方法中对用户请求request进行处理。</p><p align=\"left\">afterCompletion()：这个方法在DispatcherServlet完全处理完请求后被调用，可以在该方法中进行一些资源清理的操作。</p><p align=\"left\">下面通过一个例子来说明如何使用Spring MVC框架的拦截器。</p><p align=\"left\">要求编写一个拦截器，拦截所有不在工作时间的请求，把这些请求转发到一个特定的静态页面，而不对它们的请求进行处理。</p><p align=\"left\">首先编写TimeInterceptor.Java，代码如下：</p><pre class=\"java\" name=\"code\">public class TimeInterceptor extends HandlerInterceptorAdapter {\n\n    private int openingTime; // openingTime 属性指定上班时间\n\n    private int closingTime; // closingTime属性指定下班时间\n\n    private String outsideOfficeHoursPage; // outsideOfficeHoursPage属性指定错误\n\n \n\n    public void setOpeningTime(int openingTime) {\n\n       this.openingTime = openingTime;\n\n    }\n\n \n\n    public void setClosingTime(int closingTime) {\n\n       this.closingTime = closingTime;\n\n    }\n\n \n\n    public void setOutsideOfficeHoursPage(String outsideOfficeHoursPage) {\n\n       this.outsideOfficeHoursPage = outsideOfficeHoursPage;\n\n    }\n\n \n\n    // 重写 preHandle()方法，在业务处理器处理请求之前对该请求进行拦截处理\n\n    public boolean preHandle(HttpServletRequest request,\n\n           HttpServletResponse response, Object handler) throws Exception {\n\n       Calendar cal = Calendar.getInstance();\n\n       int hour = cal.get(Calendar.HOUR_OF_DAY); // 获取当前时间\n\n       if (openingTime &lt;= hour &amp;&amp; hour &lt; closingTime) { // 判断当前是否处于工作 时间段内\n\n \n\n           return true;\n\n       } else {\n\n           response.sendRedirect(outsideOfficeHoursPage); // 返回提示页面\n\n           return false;\n\n       }\n\n    }\n\n \n\n}\n</pre><p align=\"left\"><br>&nbsp;</p><p align=\"left\">可以看出，上面的代码重载了preHandle()方法，该方法在业务处理器处理请求之前被调用。在该方法中，首先获得当前的时间，判断其是否在 openingTime和closingTime之间，如果在，返回true，这样才会调用业务控制器去处理该请求；否则直接转向一个静态页面，返回 false，这样该请求就不会被处理。</p><p align=\"left\">下面是在dispatcherServlet-servlet.xml中对拦截器进行的配置，代码如下：</p><pre class=\"html\" name=\"code\">&lt;mvc:interceptors&gt;\n\n       &lt;mvc:interceptor&gt;\n\n           &lt;mvc:mapping path=&quot;/user/*&quot; /&gt;\n\n           &lt;bean class=&quot;com.pango.spring.interceptor.TimeInterceptor&quot;&gt;\n\n              &lt;property name=&quot;openingTime&quot; value=&quot;12&quot;&gt;&lt;/property&gt;\n\n              &lt;property name=&quot;closingTime&quot; value=&quot;24&quot;&gt;&lt;/property&gt;\n\n              &lt;property name=&quot;outsideOfficeHoursPage&quot; value=&quot;outTime.html&quot;&gt;&lt;/property&gt;\n\n           &lt;/bean&gt;\n\n       &lt;/mvc:interceptor&gt;\n\n    &lt;/mvc:interceptors&gt;\n</pre><p align=\"left\"><br>&nbsp;</p><p align=\"left\">可以看出，上面代码用bean标签去定义TimeInterceptor，令其id为officeHoursInterceptor，并给它的3个属性赋值。在urlMapping中通过&lt;property name=&quot;interceptors&quot;&gt;去指定officeHoursInterceptor为一个拦截器，读者可以在&lt;list&gt; 和&lt;/list&gt;之间定义多个拦截器</p><p align=\"left\">outsideOfficeHours.html的代码很简单，只是输出一句提示语。</p>运行程序，在浏览器中随便访问一个页面，如果请求的时间在9点～18点之间，则该请求可以被处理；否则，返回一句提示语，如图23-5所示 <h1><a target=\"_blank\" href=\"http://photo.blog.sina.com.cn/showpic.html#blogid=6f636025010184c9&amp;url=http://s6.sinaimg.cn/orignal/6f636025td02b42f8bbe5\" target=\"_blank\"><img name=\"image_operate_62011354784476718\" title=\"Spring&nbsp;<wbr>MVC&nbsp;<wbr>入门实例\" alt=\"Spring&nbsp;<wbr>MVC&nbsp;<wbr>入门实例\" src=\"http://s6.sinaimg.cn/mw690/6f636025td02b42f8bbe5&amp;690\" real_src=\"http://s6.sinaimg.cn/mw690/6f636025td02b42f8bbe5&amp;690\"></a><br><br><span style=\"font-size:12px;\">说 明：在第22章中介绍过控制反转是Spring框架的核心思想，即用一个接口去定义一些操作，在接口的实现类中去重写这些操作，然后在Spring的配置文件中去把该接口的实现类注入到应有框架中，这样就可以通过调用接口去调用接口的实现类。本节讲的拦截器就体现了这种思想，即实现 HandlerInterceptorAdapte<wbr>r接口，重写preHandle()方法并在配置文件中实现TimeInterceptor的注入。这 样当框架调用HandlerInterceptorAdapte<wbr>r时，就可以调用到TimeInterceptor类的preHandle()方法</span></h1><a target=\"_blank\" name=\"_Toc325181276\"><span style=\"font-size:24px;\"><strong>七、spring3 MVC</strong></span></a><span style=\"font-size:24px;\"><strong> 类型转换</strong> </span><p align=\"center\"><strong>&nbsp;<wbr></strong></p><p align=\"left\">Servlet中的输入参数为都是string类型，而spring mvc通过data bind机制将这些string 类型的输入参数转换为相应的command object（根据view和controller之间传输数据的具体逻辑，也可称为model attributes, domain model objects）。在这个转换过程中，spring实际是先利用java.beans.PropertyEditor中的 setAdText方法来把string格式的输入转换为bean属性，亦可通过继承java.beans.PropertyEditorSupport来实现自定义的PropertyEditors。</p><p align=\"left\">自定义完毕propertyEditor后，有以下几种方式来注册自定义的customer propertyEditor. （我只实现了第二种转换方式，至于其它方法大家可以自己尝试）</p><p align=\"left\">Ø&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> <strong>直接将自定义的propertyEditor放到需要处理的java bean相同的目录下</strong></p><p align=\"left\">名称和java Bean相同但后面带Editor后缀。</p><p align=\"left\">例如需要转换的java bean 名为User,则在相同的包中存在UserEditor类可实现customer propertyEditor的自动注册。</p><p align=\"left\">Ø&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> <strong>利用@InitBinder来注册customer propertyEditor</strong></p><p align=\"left\">这个在之前的笔记中已经介绍过了，即在controller类中增加一个使用@InitBinder标注的方法，在其中注册customer Editor</p><p align=\"left\">Java代码 &nbsp;<wbr> <a target=\"_blank\" title=\"收藏这段代码\"></a></p><strong></strong><pre class=\"java\" name=\"code\">public class BaseController {\n\n   \n\n    @InitBinder\n\n    public void initBinder(WebDataBinder binder) {\n\n       binder.registerCustomEditor(Date.class, new CustomDateEditor(true));\n\n    }\n\n}\n</pre><p align=\"left\"><br></p><p align=\"left\"><p align=\"left\">Ø&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> <strong>继承 WebBindingInitializer 接口来实现全局注册</strong><br>使用@InitBinder只能对特定的controller类生效，为注册一个全局的customer Editor，可以实现接口WebBindingInitializer 。</p><p align=\"left\">Java代码 &nbsp;<wbr> <a target=\"_blank\" title=\"收藏这段代码\"></a></p><strong></strong><pre class=\"java\" name=\"code\">public class CustomerBinding implements WebBindingInitializer {\n\n \n\n    public void initBinder(WebDataBinder binder, WebRequest request) {\n\n       // TODO Auto-generated method stub\n\n         SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;); \n\n                   dateFormat.setLenient(false); \n\n                   binder.registerCustomEditor(Date.class, new CustomDateEditor(dateFormat, false));\n\n \n    }\n\n \n\n}\n</pre><p align=\"left\"><br></p><p align=\"left\"><p align=\"left\">并修改 spring-servlet xml配置文件</p><p align=\"left\">Xml代码 &nbsp;<wbr> <a target=\"_blank\" title=\"收藏这段代码\"></a></p><pre class=\"html\" name=\"code\">&lt;bean  \n\n        class=&quot;org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter&quot;&gt;  \n\n        &lt;property name=&quot;webBindingInitializer&quot;&gt;  \n\n            &lt;bean  \n\n                class=&quot;net.zhepu.web.customerBinding.CustomerBinding&quot; /&gt;  \n\n        &lt;/property&gt;  \n\n    &lt;/bean&gt;  \n</pre><p align=\"left\"><br>&nbsp;</p><p align=\"left\">但这样一来就无法使用mvc:annotation-driven&nbsp;<wbr> 了。</p><p align=\"left\"><strong>使用conversion-service来注册自定义的converter</strong></p><p align=\"left\">DataBinder实现了PropertyEditorRegistry, TypeConverter这两个interface，而在spring mvc实际处理时，返回值都是return binder.convertIfNecessary(见HandlerMethodInvoker中的具体处理逻辑)。因此可以使用customer conversionService来实现自定义的类型转换。</p><p align=\"left\">Xml代码 &nbsp;<wbr> <a target=\"_blank\" title=\"收藏这段代码\"></a></p><pre class=\"html\" name=\"code\">&lt;bean id=&quot;conversionService&quot; \n\n    class=&quot;org.springframework.format.support.FormattingConversionServiceFactoryBean&quot;&gt; \n\n     \n\n    &lt;property name=&quot;converters&quot;&gt; \n\n        &lt;list&gt; \n\n            &lt;bean class=&quot;net.zhepu.web.customerBinding.CustomerConverter&quot; /&gt; \n\n        &lt;/list&gt; \n\n    &lt;/property&gt; \n\n     \n\n&lt;/bean&gt; \n</pre><p align=\"left\"><br>&nbsp;</p><p align=\"left\">需要修改spring-servlet xml配置文件中的annotation-driven,增加属性conversion-service指向新增的conversionService bean。</p><p align=\"left\">Xml代码 &nbsp;<wbr> <a target=\"_blank\" title=\"收藏这段代码\"></a></p><p align=\"left\">&lt;mvc:annotation-driven&nbsp;<wbr>validator=&quot;validator&quot;&nbsp;<wbr>&nbsp;<wbr></p><p align=\"left\">conversion-service=&quot;conversionService&quot;&nbsp;<wbr>/&gt;&nbsp;<wbr></p><p align=\"left\"><strong>对于第二种方式实现如下</strong></p><p align=\"left\">Date类型编辑器</p><strong></strong><pre class=\"java\" name=\"code\">public class CustomDateEditor extends PropertyEditorSupport {\n\n    private static final Map&lt;String, String&gt; dateMap;\n\n \n\n    static {\n\n       dateMap = new HashMap&lt;String, String&gt;();\n\n       dateMap.put(&quot;yyyy-MM-dd&quot;, &quot;\\\\d{4}-\\\\d{2}-\\\\d{2}&quot;);\n\n       dateMap.put(&quot;yyyy-MM-dd hh:mm:ss&quot;, &quot;\\\\d{4}-\\\\d{2}-\\\\d{2} \\\\d{2}:\\\\d{2}:\\\\d{2}&quot;);\n\n       dateMap.put(&quot;yyyy年MM月dd日&quot;, &quot;\\\\d{4}年\\\\d{2}月\\\\d{2}日&quot;);\n\n    }\n\n \n\n    private final boolean allowEmpty;\n\n \n\n    public CustomDateEditor(boolean allowEmpty) {\n\n       this.allowEmpty = allowEmpty;\n\n    }\n\n \n\n    @Override\n\n    public void setAsText(String text) throws IllegalArgumentException {\n\n   \n\n       if (this.allowEmpty &amp;&amp; !StringUtils.hasText(text)) {\n\n           // Treat empty String as null value.\n\n          \n\n           setValue(null);\n\n       } else {\n\n      \n\n           try {\n\n             \n\n              boolean flag = false;\n\n              for (String dateFormatStr : dateMap.keySet()) {\n\n                  if (text.matches(dateMap.get(dateFormatStr))) {\n\n                     flag = true;\n\n                     System.out.println(text);\n\n                     DateFormat dateFormat = new SimpleDateFormat(dateFormatStr);\n\n                     setValue(dateFormat.parse(text));\n\n                     break;\n\n                  }\n\n              }\n\n              if (!flag) {\n\n                  //throw new IllegalArgumentException(&quot;Could not parse date: &quot; + text);\n\n              }\n\n           } catch (ParseException ex) {\n\n              //throw new IllegalArgumentException(&quot;Could not parse date: &quot; + ex.getMessage(), ex);\n\n           }\n\n       }\n\n    }\n\n \n\n    @Override\n\n    public String getAsText() {\n\n       Date value = (Date) getValue();\n\n       DateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);\n\n \n\n       return value != null ? dateFormat.format(value) : &quot;&quot;;\n\n    }\n\n}\n\n@InitBinder来注册customer propertyEditor\n\n@InitBinder\n\n    public void initBinder(WebDataBinder binder) {\n\n      \n\n       binder.registerCustomEditor(Date.class, new CustomDateEditor(true));\n\n    }\n</pre><p align=\"left\"><br></p><p align=\"left\"><p align=\"left\"><strong>最后讲讲对于requestBody或httpEntity中数据的类型转换</strong></p><p align=\"left\">Spring MVC中对于requestBody中发送的数据转换不是通过databind来实现，而是使用HttpMessageConverter来实现具体的类型转换。</p><p align=\"left\">例如，之前提到的json格式的输入，在将json格式的输入转换为具体的model的过程中，spring mvc首先找出request header中的contenttype，再遍历当前所注册的所有的HttpMessageConverter子类，根据子类中的canRead()方法来决定调用哪个具体的子类来实现对requestBody中的数据的解析。如果当前所注册的 httpMessageConverter中都无法解析对应contexttype类型，则抛出 HttpMediaTypeNotSupporte<wbr>dException （http 415错误）。</p><p align=\"left\">那么需要如何注册自定义的messageConverter呢，很不幸，在spring 3.0.5中如果使用annotation-driven的配置方式的话，无法实现自定义的messageConverter的配置，必须老老实实的自己定义AnnotationMethodHandlerA<wbr>dapter的bean定义，再设置其messageConverters以注册自定义的 messageConverter。</p><p align=\"left\">Xml代码 &nbsp;<wbr> <a target=\"_blank\" title=\"收藏这段代码\"></a></p><pre class=\"html\" name=\"code\">&lt;mvc:annotation-driven&gt;  \n\n    &lt;mvc:message-converters&gt;  \n\n        &lt;bean class=&quot;org.springframework.http.converter.StringHttpMessageConverter&quot;/&gt;  \n\n        &lt;bean class=&quot;org.springframework.http.converter.ResourceHttpMessageConverter&quot;/&gt;  \n\n        &lt;bean class=&quot;org.springframework.http.converter.json.MappingJacksonHttpMessageConverter&quot;/&gt;  \n\n    &lt;/mvc:message-converters&gt;  \n\n&lt;/mvc:annotation-driven&gt;\n</pre><p align=\"left\"><br>&nbsp;<wbr></p><p><strong>&nbsp;<wbr></strong></p><h1><a target=\"_blank\" name=\"_Toc325181277\">八、json</a>格式数据的输入和输出</h1><p>Spring mvc处理json需要使用jackson的类库，因此为支持json格式的输入输出需要先修改pom.xml增加jackson包的引用</p><p align=\"left\">Xml代码 &nbsp;<wbr> <a target=\"_blank\" title=\"收藏这段代码\"></a></p><pre class=\"html\" name=\"code\">&lt;dependency&gt;\n\n           &lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt;\n\n           &lt;artifactId&gt;jackson-core-lgpl&lt;/artifactId&gt;\n\n           &lt;version&gt;1.8.0&lt;/version&gt;\n\n           &lt;scope&gt;compile&lt;/scope&gt;\n\n       &lt;/dependency&gt;\n\n       &lt;dependency&gt;\n\n           &lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt;\n\n           &lt;artifactId&gt;jackson-mapper-asl&lt;/artifactId&gt;\n\n           &lt;version&gt;1.8.0&lt;/version&gt;\n\n&lt;/dependency&gt;\n</pre><p align=\"left\"><br>&nbsp;</p><p align=\"left\">在spring-servlet.xml中必须加入这段代码：&lt;mvc:annotation-driven /&gt;</p><p align=\"left\">根据前面的分析，在spring mvc中解析输入为json格式的数据有两种方式<br>1:使用@RequestBody来设置输入</p><p align=\"left\">Java代码 &nbsp;<wbr> <a target=\"_blank\" title=\"收藏这段代码\"></a></p><p align=\"left\">@RequestMapping(&quot;/json1&quot;)</p><p align=\"left\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> @ResponseBody</p><p align=\"left\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> <strong>public</strong> JsonResult testJson1(@RequestBody User u){</p><p align=\"left\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> log.info(&quot;get json input from request body annotation&quot;);</p><p align=\"left\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> log.info(u.getUserName());</p><p align=\"left\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> <strong>return new</strong> JsonResult(<strong>true</strong>,&quot;return ok&quot;);</p><p align=\"left\">}</p><p align=\"left\">2:使用HttpEntity来实现输入绑定</p><p align=\"left\">Java代码 &nbsp;<wbr> <a target=\"_blank\" title=\"收藏这段代码\"></a></p><p align=\"left\">&nbsp;<wbr>&nbsp;<wbr></p><pre class=\"java\" name=\"code\">  @RequestMapping(&quot;/json2&quot;)\n\n    public ResponseEntity&lt;JsonResult&gt; testJson2(HttpEntity&lt;User&gt; u){\n\n    log.info(&quot;get json input from HttpEntity annotation&quot;);\n\n    log.info(u.getBody().getUserName());\n\n    ResponseEntity&lt;JsonResult&gt; responseResult = new ResponseEntity&lt;JsonResult&gt;( new JsonResult(true,&quot;return ok&quot;),HttpStatus.OK);\n\n    return responseResult;\n</pre><p align=\"left\"><br>&nbsp;</p><p align=\"left\">对应Json格式的输出也对应有两种方式</p><p align=\"left\">1：使用@responseBody来设置输出内容为context body</p><pre class=\"java\" name=\"code\">@RequestMapping(value=&quot;/kfc/brands/{name}&quot;, method = RequestMethod.GET)\n\n    public @ResponseBody List&lt;Shop&gt; getShopInJSON(@PathVariable String name) {\n\n    List&lt;Shop&gt; shops = new ArrayList&lt;Shop&gt;();\n\n       Shop shop = new Shop();\n\n       shop.setName(name);\n\n       shop.setStaffName(new String[]{&quot;mkyong1&quot;, &quot;mkyong2&quot;});\n\n      \n\n       shops.add(shop);\n\n      \n\n       Shop shop2 = new Shop();\n\n       shop2.setName(name);\n\n       shop2.setStaffName(new String[]{&quot;mktong1&quot;, &quot;mktong2&quot;});\n\n       shops.add(shop2);\n\n       return shops;\n\n}       \n</pre><p align=\"left\"><br>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr></p><p align=\"left\">当我们在地址栏中输入：<a target=\"_blank\" href=\"http://localhost:8080/springJson/kfc/brands/kfc_name.html\">http://localhost:8080/springJson/kfc/brands/kfc_name.html</a></p><p align=\"left\">服务器端会返回给我们jason格式的数据，这样我们就可以省去手工繁琐的组并了</p><h1>&nbsp;<wbr><a target=\"_blank\" href=\"http://photo.blog.sina.com.cn/showpic.html#blogid=6f636025010184c9&amp;url=http://s14.sinaimg.cn/orignal/6f636025td02b4d6ff94d\" target=\"_blank\"><img name=\"image_operate_96911354784684984\" title=\"Spring&nbsp;<wbr>MVC&nbsp;<wbr>入门实例\" alt=\"Spring&nbsp;<wbr>MVC&nbsp;<wbr>入门实例\" src=\"http://s14.sinaimg.cn/mw690/6f636025td02b4d6ff94d&amp;690\" real_src=\"http://s14.sinaimg.cn/mw690/6f636025td02b4d6ff94d&amp;690\"></a><br><br>&nbsp;<wbr></h1><h1>&nbsp;<wbr></h1><p align=\"left\">2：返回值设置为ResponseEntity&lt;?&gt;类型，以返回context body</p><p align=\"left\">@RequestMapping(&quot;/json2&quot;)</p><p align=\"left\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> <strong>public</strong> ResponseEntity&lt;JsonResult&gt; testJson2(HttpEntity&lt;User&gt; u){</p><p align=\"left\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> log.info(&quot;get json input from HttpEntity annotation&quot;);</p><p align=\"left\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> log.info(u.getBody().getUserName());</p><p align=\"left\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> ResponseEntity&lt;JsonResult&gt; responseResult = <strong>new</strong> ResponseEntity&lt;JsonResult&gt;( <strong>new</strong> JsonResult(<strong>true</strong>,&quot;return ok&quot;),HttpStatus.<em>OK</em>);</p><p align=\"left\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> <strong>return</strong> responseResult;</p><p>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> }</p><h1><a target=\"_blank\" name=\"_Toc325181278\">九、spring3mvc</a>文件上传</h1><p align=\"center\"><strong>&nbsp;<wbr></strong></p><p>Spring mvc使用jakarta的commons fileupload来支持文件上传，因此我们需要在pom.xml中导入所依赖的两个包：</p><pre class=\"html\" name=\"code\">&lt;dependency&gt; \n\n        &lt;groupId&gt;commons-io&lt;/groupId&gt; \n\n        &lt;artifactId&gt;commons-io&lt;/artifactId&gt; \n\n        &lt;version&gt;2.0.1&lt;/version&gt; \n\n    &lt;/dependency&gt; \n\n           \n\n    &lt;dependency&gt; \n\n        &lt;groupId&gt;commons-fileupload&lt;/groupId&gt; \n\n        &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt; \n\n        &lt;version&gt;1.2.2&lt;/version&gt; \n\n&lt;/dependency&gt; \n</pre><p align=\"left\"><br>&nbsp;</p><p>在spring-servlet.xml中加入以下这段代码：</p><p align=\"left\">&lt;bean id=<em>&quot;multipartResolver&quot;</em></p><p align=\"left\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> class=<em>&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver<wbr>&quot;</em>&gt;</p><p align=\"left\">&nbsp;<wbr></p><p align=\"left\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;!-- one of the properties available; the maximum file size in bytes --&gt;</p><p align=\"left\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;property name=<em>&quot;maxUploadSize&quot;</em> value=<em>&quot;100000&quot;</em> /&gt;</p><p align=\"left\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr></p><p>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;/bean&gt;&nbsp;<wbr></p><p>其中的property中可以限制最大和最小文件上传。</p><p>在客户端的代码如下：</p><p align=\"left\">&lt;form method=<em>&quot;post&quot;</em> action=<em>&quot;</em>${ctx}<em>/user/upload.</em>${ext}<em>&quot;</em> enctype=<em>&quot;multipart/form-data&quot;</em>&gt;</p><p align=\"left\">&lt;input type=<em>&quot;text&quot;</em> name=<em>&quot;name&quot;</em>/&gt;</p><p align=\"left\">&lt;input type=<em>&quot;file&quot;</em> name=<em>&quot;file&quot;</em>/&gt;</p><p align=\"left\">&lt;input type=<em>&quot;submit&quot;</em>/&gt;</p><p>&lt;/form&gt;</p><p>服务器端的代码如下：</p><pre class=\"java\" name=\"code\">@RequestMapping(value = &quot;/user/upload&quot;, method = RequestMethod.POST)\n\n    public String handleFormUpload(@RequestParam(&quot;name&quot;) String name,\n\n           @RequestParam(&quot;file&quot;) MultipartFile file, HttpServletRequest request)\n\n           throws IOException {\n\n       String filePath = request.getRealPath(&quot;/&quot;);\n\n       if (!file.isEmpty()) {\n\n           String fileName = file.getOriginalFilename();\n\n           System.out.println(filePath + &quot;/&quot; + fileName);\n\n           byte[] bytes = file.getBytes();\n\n           FileOutputStream output = new FileOutputStream(new File(filePath\n\n                  + fileName));\n\n           output.write(bytes);\n\n           output.close();\n\n           return &quot;redirect:/success.jsp&quot;;\n\n       } else {\n\n           return &quot;redirect:/failure.jsp&quot;;\n\n       }\n\n    }\n</pre><p align=\"left\"><br>&nbsp;</p><h1><a target=\"_blank\" name=\"_Toc325181279\">十、spring mvc</a>国际化和本地化</h1><p align=\"center\"><strong>&nbsp;<wbr></strong></p><p>何为国际化，简单来说就是在那个国家显示哪个国家的语言，在计算机中，国际化和本地化意味着计算机软件要适应不同的语言和地区的差异。国际化就是设计为了适应不同地区和语言的差异而工程不需要做任何改动。</p><p>这一节的目的就是在springMVC中增加国际化和本地化的应用，我们将在这一节实现三种语言可以相互切换的国际化和本地化。</p><p>（1）我们在resources下面添加三个property文件，分别为：messages_de.properties、messages_en.properties、messages_zh.properties，文件的命名规则：messages_语言.properties</p><p>三个文件的内容如下：</p><p>Ø&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> messages_de.properties</p><p align=\"left\">label.firstname=<u>Vorname</u></p><p align=\"left\">label.lastname=<u>Familiename</u></p><p align=\"left\">label.email=Email</p><p align=\"left\">label.telephone=<u>Telefon</u></p><p align=\"left\">label.addcontact=<u>Addieren Kontakt</u></p><p>label.title=spring <u>mvc</u> Internationalization (i18n) / Localization</p><p>Ø&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> messages_en.properties</p><p align=\"left\">label.firstname=First Name</p><p align=\"left\">label.lastname=Last Name</p><p align=\"left\">label.email=Email</p><p align=\"left\">label.telephone=Telephone</p><p align=\"left\">label.addcontact=Add Contact</p><p align=\"left\">label.title=spring <u>mvc</u> Internationalization (i18n) / Localization</p><p>Ø&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> messages_zh.prope', '2016-04-16 01:21:16', '1');
INSERT INTO `article` VALUES ('10064', '10003', 'Spring讲解------------本专栏代码包以及word版', '\n\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n本专栏大部分文章借鉴了：&nbsp;http://www.iteye.com/blogs/subjects/spring3</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n下面是博主提供的代码资源以及word版</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<br>\n</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n感谢：感谢iteye的开涛的博客，为我写博客提供的很大的帮助，也学到了很多!<br>\n</p>\n<h2 style=\"line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n一、《跟我学spring3》电子书下载地址：</h2>\n<p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n《跟我学spring3》 &nbsp;（1-7 和&nbsp;8-13）&nbsp;<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/pdf\" style=\"color:rgb(233,101,14)\">http://jinnianshilongnian.iteye.com/blog/pdf</a>&nbsp;&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<h2 style=\"line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1715092\" title=\"跟我学spring3系列  word原版 下载\" style=\"color:rgb(233,101,14)\">跟我学spring3系列 word原版 下载</a></h2>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<h2 style=\"line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n二、<a target=\"_blank\" target=\"_blank\" href=\"http://sishuok.com/forum/blogPost/list/2561.html#7339\" style=\"color:rgb(233,101,14)\">源代码下载</a></h2>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<span style=\"text-decoration:underline\"><span style=\"color:rgb(0,0,255)\">最新依赖地址：</span></span></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<a target=\"_blank\" href=\"http://docs.spring.io/downloads/nightly/snapshot-download.php?project=SPR\" style=\"color:rgb(233,101,14)\"><span style=\"color:rgb(0,0,255)\">http://docs.spring.io/downloads/nightly/snapshot-download.php?project=SPR</span></a></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<span style=\"font-size:12px; line-height:18px\">依赖 下载</span><br style=\"font-size:12px; line-height:18px\">\n<a target=\"_blank\" target=\"_blank\" href=\"http://s3.amazonaws.com/dist.springframework.org/release/SPR/spring-framework-3.0.2.RELEASE-dependencies.zip\" style=\"color:rgb(233,101,14); font-size:12px; line-height:18px\">http://s3.amazonaws.com/dist.springframework.org/release/SPR/spring-framework-3.0.2.RELEASE-dependencies.zip</a><span style=\"font-size:12px; line-height:18px\">&nbsp;</span><br style=\"font-size:12px; line-height:18px\">\n<br style=\"font-size:12px; line-height:18px\">\n<a target=\"_blank\" target=\"_blank\" href=\"http://s3.amazonaws.com/dist.springframework.org/release/SPR/spring-framework-3.0.2.RELEASE-with-docs.zip\" style=\"color:rgb(233,101,14); font-size:12px; line-height:18px\">http://s3.amazonaws.com/dist.springframework.org/release/SPR/spring-framework-3.0.2.RELEASE-with-docs.zip</a></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<h2 style=\"line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n三、目录：</h2>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" target=\"_blank\" href=\"http://sishuok.com/forum/blogPost/list/2426.html#7018\" style=\"color:rgb(16,138,198)\">【第一章】 Spring概述 ——跟我学Spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1413846\" style=\"color:rgb(16,138,198)\">【第二章】 IoC 之 2.1 IoC基础 ——跟我学Spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1413851\" style=\"color:rgb(16,138,198)\">【第二章】 IoC 之 2.2 IoC 容器基本原理 ——跟我学Spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1413857\" style=\"color:rgb(16,138,198)\">【第二章】 IoC 之 2.3 IoC的配置使用——跟我学Spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1415277\" style=\"color:rgb(16,138,198)\">【第三章】 DI 之 3.1 DI的配置使用 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1415278\" style=\"color:rgb(16,138,198)\">【第三章】 DI 之 3.2 循环依赖 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1415461\" style=\"color:rgb(16,138,198)\">【第三章】 DI 之 3.3 更多DI的知识 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1415463\" style=\"color:rgb(16,138,198)\">【第三章】 DI 之 3.4 Bean的作用域 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1416319\" style=\"color:rgb(16,138,198)\">【第四章】 资源 之 4.1 基础知识 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1416320\" style=\"color:rgb(16,138,198)\">【第四章】 资源 之 4.2 内置Resource实现 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1416321\" style=\"color:rgb(16,138,198)\">【第四章】 资源 之 4.3 访问Resource ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1416322\" style=\"color:rgb(16,138,198)\">【第四章】 资源 之 4.4 Resource通配符路径 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1416581\" style=\"color:rgb(16,138,198)\">【第五章】Spring表达式语言 之 5.1 概述 5.2 SpEL基础 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1418309\" style=\"color:rgb(16,138,198)\">【第五章】Spring表达式语言 之 5.3 SpEL语法 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1418311\" style=\"color:rgb(16,138,198)\">【第五章】Spring表达式语言 之 5.4在Bean定义中使用EL—跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1418596\" style=\"color:rgb(16,138,198)\">【第六章】 AOP 之 6.1 AOP基础 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1418597\" style=\"color:rgb(16,138,198)\">【第六章】 AOP 之 6.2 AOP的HelloWorld ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1418598\" style=\"color:rgb(16,138,198)\">【第六章】 AOP 之 6.3 基于Schema的AOP ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1420689\" style=\"color:rgb(16,138,198)\">【第六章】 AOP 之 6.4 基于@AspectJ的AOP ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1420691\" style=\"color:rgb(16,138,198)\">【第六章】 AOP 之 6.5 AspectJ切入点语法详解 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1423488\" style=\"color:rgb(16,138,198)\">【第六章】 AOP 之 6.6 通知参数 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1423489\" style=\"color:rgb(16,138,198)\">【第六章】 AOP 之 6.7 通知顺序 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1423490\" style=\"color:rgb(16,138,198)\">【第六章】 AOP 之 6.8 切面实例化模型 ——跟我学spring3</a></h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1423491\" style=\"color:rgb(16,138,198)\">【第六章】 AOP 之 6.9 代理机制 ——跟我学spring3</a></h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1423896\" style=\"color:rgb(16,138,198)\">【第七章】 对JDBC的支持 之 7.1 概述 ——跟我学spring3</a></h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1423897\" style=\"color:rgb(16,138,198)\">【第七章】 对JDBC的支持 之 7.2 JDBC模板类 ——跟我学spring3</a></h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1424332\" style=\"color:rgb(16,138,198)\">【第七章】 对JDBC的支持 之 7.3 关系数据库操作对象化 ——跟我学spring3</a></h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1428149\" style=\"color:rgb(16,138,198)\">【第七章】 对JDBC的支持 之 7.4 Spring提供的其它帮助 ——跟我学spring3</a></h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1431024\" style=\"color:rgb(16,138,198)\">【第七章】 对JDBC的支持 之 7.5 集成Spring JDBC及最佳实践 ——跟我学spring3</a></h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1433316\" style=\"color:rgb(16,138,198)\">【第八章】 对ORM的支持 之 8.1 概述 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1433317\" style=\"color:rgb(16,138,198)\">【第八章】 对ORM的支持 之 8.2 集成Hibernate3 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1435119\" style=\"color:rgb(16,138,198)\">【第八章】 对ORM的支持 之 8.3 集成iBATIS ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1439369\" style=\"color:rgb(16,138,198)\">【第八章】 对ORM的支持 之 8.4 集成JPA ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1439796\" style=\"color:rgb(16,138,198)\">【第九章】 Spring的事务 之 9.1 数据库事务概述 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1439900\" style=\"color:rgb(16,138,198)\">【第九章】 Spring的事务 之 9.2 事务管理器 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1441271\" style=\"color:rgb(16,138,198)\">【第九章】 Spring的事务 之 9.3 编程式事务 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1442376\" style=\"color:rgb(16,138,198)\">【第九章】 Spring的事务 之 9.4 声明式事务 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1447270\" style=\"color:rgb(16,138,198)\">【第十章】集成其它Web框架 之 10.1 概述 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1450488\" style=\"color:rgb(16,138,198)\">【第十章】集成其它Web框架 之 10.2 集成Struts1.x ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1450489\" style=\"color:rgb(16,138,198)\">【第十章】集成其它Web框架 之 10.3 集成Struts2.x ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1451970\" style=\"color:rgb(16,138,198)\">【第十章】集成其它Web框架 之 10.4 集成JSF ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1452463\" style=\"color:rgb(16,138,198)\">【第十一章】 SSH集成开发积分商城 之 11.1 概述 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1452865\" style=\"color:rgb(16,138,198)\">【第十一章】 SSH集成开发积分商城 之 11.2 实现通用层 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1454981\" style=\"color:rgb(16,138,198)\">【第十一章】 SSH集成开发积分商城 之 11.3 实现积分商城层 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1457223\" style=\"color:rgb(16,138,198)\">【第十二章】零配置 之 12.1 概述 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1457224\" style=\"color:rgb(16,138,198)\">【第十二章】零配置 之 12.2 注解实现Bean依赖注入 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1461055\" style=\"color:rgb(16,138,198)\">【第十二章】零配置 之 12.3 注解实现Bean定义 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1463704\" style=\"color:rgb(16,138,198)\">【第十二章】零配置 之 12.4 基于Java类定义Bean配置元数据 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1465118\" style=\"color:rgb(16,138,198)\">【第十二章】零配置 之 12.5 综合示例-积分商城 ——跟我学spring3</a></h3>\n<div style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1465582\" style=\"color:rgb(16,138,198)\">【第十三章】 测试 之 13.1 概述 13.2 单元测试 ——跟我学spring3</a></h3>\n</div>\n<div style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1469524\" style=\"color:rgb(16,138,198)\">【第十三章】 测试 之 13.3 集成测试 ——跟我学spring3</a></h3>\n</div>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1423971\" style=\"color:rgb(16,138,198)\">SpringMVC &#43; spring3.1.1 &#43; hibernate4.1.0 集成及常见问题总结</a></h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<br>\nhttp://www.iteye.com/blogs/subjects/spring3\n<h2 style=\"line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://sishuok.com/forum/blogPost/list/2561.html#7339\" target=\"_blank\" style=\"color:rgb(233,101,14); line-height:1.5em\"><span style=\"color:rgb(248,137,6)\">源代码下载</span></a></h2>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<span style=\"color:rgb(248,137,6); font-size:14px\"><strong><a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1482071\" target=\"_self\" style=\"color:rgb(233,101,14)\">在线版目录</a></strong></span></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<span style=\"color:rgb(248,137,6); font-size:14px\"><br>\n<br>\n</span></p>\n<h2 style=\"line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n一、《跟我学spring3》电子书下载地址：</h2>\n<p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n《跟我学spring3》 &nbsp;（1-7 和&nbsp;8-13）&nbsp;<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/pdf\" style=\"color:rgb(233,101,14)\">http://jinnianshilongnian.iteye.com/blog/pdf</a>&nbsp;&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<h2 style=\"line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1715092\" title=\"跟我学spring3系列  word原版 下载\" style=\"color:rgb(233,101,14)\">跟我学spring3系列 word原版 下载</a></h2>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<h2 style=\"line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n二、<a target=\"_blank\" target=\"_blank\" href=\"http://sishuok.com/forum/blogPost/list/2561.html#7339\" style=\"color:rgb(233,101,14)\">源代码下载</a></h2>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<span style=\"text-decoration:underline\"><span style=\"color:rgb(0,0,255)\">最新依赖地址：</span></span></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<a target=\"_blank\" href=\"http://docs.spring.io/downloads/nightly/snapshot-download.php?project=SPR\" style=\"color:rgb(233,101,14)\"><span style=\"color:rgb(0,0,255)\">http://docs.spring.io/downloads/nightly/snapshot-download.php?project=SPR</span></a></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<span style=\"font-size:12px; line-height:18px\">依赖 下载</span><br style=\"font-size:12px; line-height:18px\">\n<a target=\"_blank\" target=\"_blank\" href=\"http://s3.amazonaws.com/dist.springframework.org/release/SPR/spring-framework-3.0.2.RELEASE-dependencies.zip\" style=\"color:rgb(233,101,14); font-size:12px; line-height:18px\">http://s3.amazonaws.com/dist.springframework.org/release/SPR/spring-framework-3.0.2.RELEASE-dependencies.zip</a><span style=\"font-size:12px; line-height:18px\">&nbsp;</span><br style=\"font-size:12px; line-height:18px\">\n<br style=\"font-size:12px; line-height:18px\">\n<a target=\"_blank\" target=\"_blank\" href=\"http://s3.amazonaws.com/dist.springframework.org/release/SPR/spring-framework-3.0.2.RELEASE-with-docs.zip\" style=\"color:rgb(233,101,14); font-size:12px; line-height:18px\">http://s3.amazonaws.com/dist.springframework.org/release/SPR/spring-framework-3.0.2.RELEASE-with-docs.zip</a></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<h2 style=\"line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n三、目录：</h2>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" target=\"_blank\" href=\"http://sishuok.com/forum/blogPost/list/2426.html#7018\" style=\"color:rgb(16,138,198)\">【第一章】 Spring概述 ——跟我学Spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1413846\" style=\"color:rgb(16,138,198)\">【第二章】 IoC 之 2.1 IoC基础 ——跟我学Spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1413851\" style=\"color:rgb(16,138,198)\">【第二章】 IoC 之 2.2 IoC 容器基本原理 ——跟我学Spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1413857\" style=\"color:rgb(16,138,198)\">【第二章】 IoC 之 2.3 IoC的配置使用——跟我学Spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1415277\" style=\"color:rgb(16,138,198)\">【第三章】 DI 之 3.1 DI的配置使用 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1415278\" style=\"color:rgb(16,138,198)\">【第三章】 DI 之 3.2 循环依赖 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1415461\" style=\"color:rgb(16,138,198)\">【第三章】 DI 之 3.3 更多DI的知识 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1415463\" style=\"color:rgb(16,138,198)\">【第三章】 DI 之 3.4 Bean的作用域 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1416319\" style=\"color:rgb(16,138,198)\">【第四章】 资源 之 4.1 基础知识 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1416320\" style=\"color:rgb(16,138,198)\">【第四章】 资源 之 4.2 内置Resource实现 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1416321\" style=\"color:rgb(16,138,198)\">【第四章】 资源 之 4.3 访问Resource ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1416322\" style=\"color:rgb(16,138,198)\">【第四章】 资源 之 4.4 Resource通配符路径 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1416581\" style=\"color:rgb(16,138,198)\">【第五章】Spring表达式语言 之 5.1 概述 5.2 SpEL基础 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1418309\" style=\"color:rgb(16,138,198)\">【第五章】Spring表达式语言 之 5.3 SpEL语法 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1418311\" style=\"color:rgb(16,138,198)\">【第五章】Spring表达式语言 之 5.4在Bean定义中使用EL—跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1418596\" style=\"color:rgb(16,138,198)\">【第六章】 AOP 之 6.1 AOP基础 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1418597\" style=\"color:rgb(16,138,198)\">【第六章】 AOP 之 6.2 AOP的HelloWorld ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1418598\" style=\"color:rgb(16,138,198)\">【第六章】 AOP 之 6.3 基于Schema的AOP ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1420689\" style=\"color:rgb(16,138,198)\">【第六章】 AOP 之 6.4 基于@AspectJ的AOP ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1420691\" style=\"color:rgb(16,138,198)\">【第六章】 AOP 之 6.5 AspectJ切入点语法详解 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1423488\" style=\"color:rgb(16,138,198)\">【第六章】 AOP 之 6.6 通知参数 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1423489\" style=\"color:rgb(16,138,198)\">【第六章】 AOP 之 6.7 通知顺序 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1423490\" style=\"color:rgb(16,138,198)\">【第六章】 AOP 之 6.8 切面实例化模型 ——跟我学spring3</a></h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1423491\" style=\"color:rgb(16,138,198)\">【第六章】 AOP 之 6.9 代理机制 ——跟我学spring3</a></h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1423896\" style=\"color:rgb(16,138,198)\">【第七章】 对JDBC的支持 之 7.1 概述 ——跟我学spring3</a></h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1423897\" style=\"color:rgb(16,138,198)\">【第七章】 对JDBC的支持 之 7.2 JDBC模板类 ——跟我学spring3</a></h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1424332\" style=\"color:rgb(16,138,198)\">【第七章】 对JDBC的支持 之 7.3 关系数据库操作对象化 ——跟我学spring3</a></h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1428149\" style=\"color:rgb(16,138,198)\">【第七章】 对JDBC的支持 之 7.4 Spring提供的其它帮助 ——跟我学spring3</a></h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1431024\" style=\"color:rgb(16,138,198)\">【第七章】 对JDBC的支持 之 7.5 集成Spring JDBC及最佳实践 ——跟我学spring3</a></h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1433316\" style=\"color:rgb(16,138,198)\">【第八章】 对ORM的支持 之 8.1 概述 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1433317\" style=\"color:rgb(16,138,198)\">【第八章】 对ORM的支持 之 8.2 集成Hibernate3 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1435119\" style=\"color:rgb(16,138,198)\">【第八章】 对ORM的支持 之 8.3 集成iBATIS ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1439369\" style=\"color:rgb(16,138,198)\">【第八章】 对ORM的支持 之 8.4 集成JPA ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1439796\" style=\"color:rgb(16,138,198)\">【第九章】 Spring的事务 之 9.1 数据库事务概述 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1439900\" style=\"color:rgb(16,138,198)\">【第九章】 Spring的事务 之 9.2 事务管理器 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1441271\" style=\"color:rgb(16,138,198)\">【第九章】 Spring的事务 之 9.3 编程式事务 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1442376\" style=\"color:rgb(16,138,198)\">【第九章】 Spring的事务 之 9.4 声明式事务 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1447270\" style=\"color:rgb(16,138,198)\">【第十章】集成其它Web框架 之 10.1 概述 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1450488\" style=\"color:rgb(16,138,198)\">【第十章】集成其它Web框架 之 10.2 集成Struts1.x ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1450489\" style=\"color:rgb(16,138,198)\">【第十章】集成其它Web框架 之 10.3 集成Struts2.x ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1451970\" style=\"color:rgb(16,138,198)\">【第十章】集成其它Web框架 之 10.4 集成JSF ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1452463\" style=\"color:rgb(16,138,198)\">【第十一章】 SSH集成开发积分商城 之 11.1 概述 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1452865\" style=\"color:rgb(16,138,198)\">【第十一章】 SSH集成开发积分商城 之 11.2 实现通用层 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1454981\" style=\"color:rgb(16,138,198)\">【第十一章】 SSH集成开发积分商城 之 11.3 实现积分商城层 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1457223\" style=\"color:rgb(16,138,198)\">【第十二章】零配置 之 12.1 概述 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1457224\" style=\"color:rgb(16,138,198)\">【第十二章】零配置 之 12.2 注解实现Bean依赖注入 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1461055\" style=\"color:rgb(16,138,198)\">【第十二章】零配置 之 12.3 注解实现Bean定义 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1463704\" style=\"color:rgb(16,138,198)\">【第十二章】零配置 之 12.4 基于Java类定义Bean配置元数据 ——跟我学spring3</a></h3>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1465118\" style=\"color:rgb(16,138,198)\">【第十二章】零配置 之 12.5 综合示例-积分商城 ——跟我学spring3</a></h3>\n<div style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1465582\" style=\"color:rgb(16,138,198)\">【第十三章】 测试 之 13.1 概述 13.2 单元测试 ——跟我学spring3</a></h3>\n</div>\n<div style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1469524\" style=\"color:rgb(16,138,198)\">【第十三章】 测试 之 13.3 集成测试 ——跟我学spring3</a></h3>\n</div>\n<h3 style=\"font-size:16px; line-height:1.5em; margin:0px 0px 0.5em; padding:10px 0px 0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n<a target=\"_blank\" href=\"http://jinnianshilongnian.iteye.com/blog/1423971\" style=\"color:rgb(16,138,198)\">SpringMVC &#43; spring3.1.1 &#43; hibernate4.1.0 集成及常见问题总结</a></h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<br>\n   \n', '2016-04-16 01:21:16', '0');
INSERT INTO `article` VALUES ('10065', '10003', 'Spring详解------------AOP', '\n<h3 style=\"margin: 0px 0px 0.5em; padding: 0px; line-height: 1.5em; font-family: Helvetica,Tahoma,Arial,sans-serif; font-size: 1.2em;\">6.1.1&nbsp; AOP是什么</h3><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp; &nbsp; &nbsp; &nbsp; 考虑这样一个问题：需要对系统中的某些业务做日志记录，比如支付系统中的支付业务需要记录支付相关日志，对于支付系统可能相当复杂，比如可能有自己的支付系统，也可能引入第三方支付平台，面对这样的支付系统该如何解决呢？</p><ul style=\"margin: 0px; padding: 0px; line-height: 25.2px; font-family: Helvetica,Tahoma,Arial,sans-serif;\"><li style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">传统解决方案</span>：</li></ul><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1）日志部分提前公共类LogUtils，定义“longPayBegin”方法用于记录支付开始日志，“logPayEnd”用于记录支付结果：</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;<img style=\"margin: 0px; padding: 0px; border: 0px currentColor; height: auto !important; line-height: 1.5em;\" alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/21/c3927e17d7bae5694338798df3589567__1.JPG\"></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2）支付部分，定义IPayService接口并定义支付方法“pay”，并定义了两个实现：“PointPayService”表示积分支付，“RMBPayService”表示人民币支付；并且在每个支付实现中支付逻辑和记录日志：</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;<img style=\"margin: 0px; padding: 0px; border: 0px currentColor; height: auto !important; line-height: 1.5em;\" alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/21/4213c0ed5f313b4532b7daa0412515cf__2.JPG\"></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3）支付实现很明显有重复代码，这个重复很明显可以使用模板设计模式消除重复：</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;<img style=\"margin: 0px; padding: 0px; border: 0px currentColor; height: auto !important; line-height: 1.5em;\" alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/21/0793d54a596babc3dbc4d3c7c46b1501__3.JPG\"></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">4）到此我们设计了一个可以复用的接口；但大家觉得这样记录日志会很好吗，有没有更好的解决方案？</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">如果对积分支付方式添加统计功能，比如在支付时记录下用户总积分数、当前消费的积分数，那我们该如何做呢？直接修改源代码添加日志记录，这完全违背了面向对象最重要的原则之一：开闭原则（对扩展开放，对修改关闭）？</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;</p><ul style=\"margin: 0px; padding: 0px; line-height: 25.2px; font-family: Helvetica,Tahoma,Arial,sans-serif;\"><li style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">更好的解决方案</span>：在我们的支付组件中由于使用了日志组件，即日志模块横切于支付组件，在传统程序设计中很难将日志组件分离出来，即不耦合我们的支付组件；因此面向方面编程AOP就诞生了，它能分离我们的组件，使组件完全不耦合:</li></ul><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">1）采用面向方面编程后，我们的支付组件看起来如下所示，代码中不再有日志组件的任何东西；</p><p class=\"center\" style=\"margin: 0px auto; text-align: center; line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; vertical-align: middle;\">&nbsp;<br style=\"margin: 0px; padding: 0px; line-height: 1.5em;\"><img class=\"center\" style=\"margin: 0px auto; padding: 0px; border: 0px currentColor; height: auto !important; line-height: 1.5em; vertical-align: middle;\" alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/21/e2e5d8296fca9b8bd78b4baf0e228898__4.JPG\"></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">2）所以日志相关的提取到一个切面中，AOP实现者会在合适的时候将日志功能织入到我们的支付组件中去，从而完全解耦支付组件和日志组件。</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><img style=\"margin: 0px; padding: 0px; border: 0px currentColor; height: auto !important; line-height: 1.5em;\" alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/21/ff4df8e93fc5e70116f6345bdb655371__5.JPG\">&nbsp;</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">看到这大家可能不是很理解，没关系，先往下看。</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;</p><blockquote class=\"引用\" style=\"margin: 0px; padding: 5px 8px; border: 1px dotted rgb(170, 170, 170); color: rgb(51, 153, 51); line-height: 18px; font-family: Helvetica,Tahoma,Arial,sans-serif; background-color: rgb(225, 235, 242);\"><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"margin: 0px; padding: 0px; line-height: 1.5em;\">&nbsp;</span></p><table style=\"margin: 0px; padding: 0px; font-size: 12px;\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"><tbody><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 1em;\"><div class=\"shape\" style=\"border-width: 0px; margin: 0px auto; padding: 0px;\"><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">面向方面编程(AOP)：也可称为面向切面编程，是一种编程范式，提供从另一个角度来考虑程序结构从而完善面向对象编程(OOP)。</p></div></td></tr></tbody></table><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"margin: 0px; padding: 0px; line-height: 1.5em;\">&nbsp;</span></p></blockquote><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在进行OOP开发时，都是基于对组件（比如类）进行开发，然后对组件进行组合，OOP最大问题就是无法解耦组件进行开发，比如我们上边举例，而AOP就是为了克服这个问题而出现的，它来进行这种耦合的分离。</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; AOP为开发者提供一种进行横切关注点（比如日志关注点横切了支付关注点）分离并织入的机制，把横切关注点分离，然后通过某种技术织入到系统中，从而无耦合的完成了我们的功能。</p><h3 style=\"margin: 0px 0px 0.5em; padding: 0px; line-height: 1.5em; font-family: Helvetica,Tahoma,Arial,sans-serif; font-size: 1.2em;\">&nbsp;</h3><h3 style=\"margin: 0px 0px 0.5em; padding: 0px; line-height: 1.5em; font-family: Helvetica,Tahoma,Arial,sans-serif; font-size: 1.2em;\">6.1.2&nbsp; 能干什么</h3><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; AOP主要用于横切关注点分离和织入，因此需要理解横切关注点和织入：</p><ul style=\"margin: 0px; padding: 0px; line-height: 25.2px; font-family: Helvetica,Tahoma,Arial,sans-serif;\"><li style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">关注点：</span>可以认为是所关注的任何东西，比如上边的支付组件；</li><li style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">关注点分离：</span>将问题细化从而单独部分，即可以理解为不可再分割的组件，如上边的日志组件和支付组件；</li><li style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">横切关注点：</span>一个组件无法完成需要的功能，需要其他组件协作完成，如日志组件横切于支付组件；</li><li style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">织入：</span>横切关注点分离后，需要通过某种技术将横切关注点融合到系统中从而完成需要的功能，因此需要织入，织入可能在编译期、加载期、运行期等进行。<span style=\"margin: 0px; padding: 0px;\"></span></li></ul><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">横切关注点可能包含很多，比如非业务的：日志、事务处理、缓存、性能统计、权限控制等等这些非业务的基础功能；还可能是业务的：如某个业务组件横切于多个模块。如图6-1</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;<img style=\"margin: 0px; padding: 0px; border: 0px currentColor; height: auto !important; line-height: 1.5em;\" alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/21/cefb51a30cc92efc92d0cf70da7d64b7__6.JPG\"></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">图6-1 关注点与横切关注点</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 传统支付形式，流水方式：</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;<img style=\"margin: 0px; padding: 0px; border: 0px currentColor; height: auto !important; line-height: 1.5em;\" alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/21/434713b10afdae912314c9764ed440e7__7.JPG\"></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 面向切面方式，先将横切关注点分离，再将横切关注点织入到支付系统中：</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><img style=\"margin: 0px; padding: 0px; border: 0px currentColor; height: auto !important; line-height: 1.5em;\" alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/21/464cf273a447ba45ba074d6b0ed672dc__8.JPG\">&nbsp;</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">AOP能干什么：</p><ul style=\"margin: 0px; padding: 0px; line-height: 25.2px; font-family: Helvetica,Tahoma,Arial,sans-serif;\"><li style=\"margin: 0px; padding: 0px;\">用于横切关注点的分离和织入横切关注点到系统；比如上边提到的日志等等；</li><li style=\"margin: 0px; padding: 0px;\">完善OOP；</li><li style=\"margin: 0px; padding: 0px;\">降低组件和模块之间的耦合性；</li><li style=\"margin: 0px; padding: 0px;\">使系统容易扩展；</li><li style=\"margin: 0px; padding: 0px;\">而且由于关注点分离从而可以获得组件的更好复用。</li></ul><h3 style=\"margin: 0px 0px 0.5em; padding: 0px; line-height: 1.5em; font-family: Helvetica,Tahoma,Arial,sans-serif; font-size: 1.2em;\">&nbsp;</h3><h3 style=\"margin: 0px 0px 0.5em; padding: 0px; line-height: 1.5em; font-family: Helvetica,Tahoma,Arial,sans-serif; font-size: 1.2em;\">6.1.3&nbsp; AOP的基本概念</h3><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在进行AOP开发前，先熟悉几个概念：</p><ul style=\"margin: 0px; padding: 0px; line-height: 25.2px; font-family: Helvetica,Tahoma,Arial,sans-serif;\"><li style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">连接点（Jointpoint）：</span>表示需要在程序中插入横切关注点的扩展点，连接点可能是类初始化、方法执行、方法调用、字段调用或处理异常等等，Spring只支持方法执行连接点，<span style=\"margin: 0px; padding: 0px;\">在AOP中表示为“在哪里干”</span>；</li><li style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">切入点（Pointcut）：</span>选择一组相关连接点的模式，即可以认为连接点的集合，Spring支持perl5正则表达式和AspectJ切入点模式，Spring默认使用AspectJ语法，<span style=\"margin: 0px; padding: 0px;\">在AOP中表示为“在哪里干的集合”</span>；</li><li style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">通知（Advice）：</span>在连接点上执行的行为，通知提供了在AOP中需要在切入点所选择的连接点处进行扩展现有行为的手段；包括前置通知（before advice）、后置通知(after advice)、环绕通知（around advice），在Spring中通过代理模式实现AOP，并通过拦截器模式以环绕连接点的拦截器链织入通知；<span style=\"margin: 0px; padding: 0px;\">在AOP中表示为“干什么”；</span></li><li style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">方面/切面（Aspect）：</span>横切关注点的模块化，比如上边提到的日志组件。可以认为是通知、引入和切入点的组合；在Spring中可以使用Schema和@AspectJ方式进行组织实现；<span style=\"margin: 0px; padding: 0px;\">在AOP中表示为“在哪干和干什么集合”；</span></li><li style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">引入（inter-type declaration）：</span>也称为内部类型声明，为已有的类添加额外新的字段或方法，Spring允许引入新的接口（必须对应一个实现）到所有被代理对象（目标对象）,<span style=\"margin: 0px; padding: 0px;\">&nbsp;在AOP中表示为“干什么（引入什么）”</span>；</li><li style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">目标对象（Target Object）：</span>需要被织入横切关注点的对象，即该对象是切入点选择的对象，需要被通知的对象，从而也可称为“被通知对象”；由于Spring AOP 通过代理模式实现，从而这个对象永远是被代理对象，<span style=\"margin: 0px; padding: 0px;\">在AOP中表示为“对谁干”</span>；</li><li style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">AOP代理（AOP Proxy）：</span>AOP框架使用代理模式创建的对象，从而实现在连接点处插入通知（即应用切面），就是<span style=\"margin: 0px; padding: 0px;\">通过代理来对目标对象应用切面</span>。在Spring中，AOP代理可以用JDK动态代理或CGLIB代理实现，而通过拦截器模型应用切面。</li><li style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">织入（Weaving）：</span>织入是一个过程，是将切面应用到目标对象从而创建出AOP代理对象的过程，织入可以在编译期、类装载期、运行期进行。<span style=\"margin: 0px; padding: 0px;\"></span></li></ul><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">在AOP中，通过切入点选择目标对象的连接点，然后在目标对象的相应连接点处织入通知，而切入点和通知就是切面（横切关注点），而在目标对象连接点处应用切面的实现方式是通过AOP代理对象，如图6-2所示。</p><p class=\"center\" style=\"margin: 0px auto; text-align: center; line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; vertical-align: middle;\"><img style=\"margin: 0px; padding: 0px; border: 0px currentColor; height: auto !important; line-height: 1.5em;\" alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/21/84c94f56f613014442301bee234480f7__9.JPG\"></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">图6-2 概念关系<span style=\"margin: 0px; padding: 0px; line-height: 1.5em;\"></span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">接下来再让我们具体看看Spring有哪些通知类型：</p><ul style=\"margin: 0px; padding: 0px; line-height: 25.2px; font-family: Helvetica,Tahoma,Arial,sans-serif;\"><li style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">前置通知（Before Advice）:</span>在切入点选择的连接点处的方法之前执行的通知，该通知不影响正常程序执行流程（除非该通知抛出异常，该异常将中断当前方法链的执行而返回）。<span style=\"margin: 0px; padding: 0px;\"></span></li><li style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">后置通知（After Advice）:</span>在切入点选择的连接点处的方法之后执行的通知，包括如下类型的后置通知：<ul style=\"margin: 0px; padding: 0px;\"><li style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">后置返回通知（After returning Advice）:</span>在切入点选择的连接点处的方法正常执行完毕时执行的通知，必须是连接点处的方法没抛出任何异常正常返回时才调用后置通知。</li><li style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">后置异常通知（After throwing Advice）:</span>&nbsp;在切入点选择的连接点处的方法抛出异常返回时执行的通知，必须是连接点处的方法抛出任何异常返回时才调用异常通知。<span style=\"margin: 0px; padding: 0px;\"></span></li><li style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">后置最终通知（After finally Advice）:</span>&nbsp;在切入点选择的连接点处的方法返回时执行的通知，不管抛没抛出异常都执行，类似于Java中的finally块。<span style=\"margin: 0px; padding: 0px;\"></span></li></ul></li><li style=\"margin: 0px; padding: 0px;\"><span style=\"margin: 0px; padding: 0px;\">环绕通知（Around Advices）：</span>环绕着在切入点选择的连接点处的方法所执行的通知，环绕通知可以在方法调用之前和之后自定义任何行为，并且可以决定是否执行连接点处的方法、替换返回值、抛出异常等等。<span style=\"margin: 0px; padding: 0px;\"></span></li></ul><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">各种通知类型在UML序列图中的位置如图6-3所示：</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;<img style=\"margin: 0px; padding: 0px; border: 0px currentColor; height: auto !important; line-height: 1.5em;\" alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/21/b4447d0a13f6fcfd520bdbb14076c625__10.JPG\"></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">图6-3 通知类型</p><h3 style=\"margin: 0px 0px 0.5em; padding: 0px; line-height: 1.5em; font-family: Helvetica,Tahoma,Arial,sans-serif; font-size: 1.2em;\">&nbsp;</h3><h3 style=\"margin: 0px 0px 0.5em; padding: 0px; line-height: 1.5em; font-family: Helvetica,Tahoma,Arial,sans-serif; font-size: 1.2em;\">6.1.4&nbsp; AOP代理</h3><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; AOP代理就是AOP框架通过代理模式创建的对象，Spring使用JDK动态代理或CGLIB代理来实现，Spring缺省使用JDK动态代理来实现，从而任何接口都可别代理，如果被代理的对象实现不是接口将默认使用CGLIB代理，不过CGLIB代理当然也可应用到接口。</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"margin: 0px; padding: 0px; line-height: 1.5em;\">AOP代理的目的就是将切面织入到目标对象。</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 概念都将完了，接下来让我们看一下AOP的 HelloWorld!吧。</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><br></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><p style=\"line-height: 25.2px; padding-top: 0px; padding-bottom: 0px; font-family: Helvetica,Tahoma,Arial,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><p style=\"line-height: 25.2px; padding-top: 0px; padding-bottom: 0px; font-family: Helvetica,Tahoma,Arial,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;</p><h3 style=\"margin: 0px 0px 0.5em; padding: 0px; line-height: 1.5em; font-family: verdana,arial,helvetica,sans-serif; font-size: 1.2em;\"><span style=\"font-weight: normal;\">6.2.1&nbsp; 准备环境</span></h3><h3 style=\"margin: 0px 0px 0.5em; padding: 0px; line-height: 1.5em; font-family: Helvetica,Tahoma,Arial,sans-serif; font-size: 1.2em;\"><div class=\"div_content_text_all\" style=\"margin: 0px auto; padding: 5px 10px 20px; line-height: 1.5em;\"><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"font-weight: normal;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 首先准备开发需要的jar包，请到spring-framework-3.0.5.RELEASE-dependencies.zip和spring-framework-3.0.5.RELEASE-with-docs中查找如下jar包：</span></p><table class=\"  \" style=\"margin: 0px; padding: 0px; font-size: 12px;\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"><tbody><tr style=\"margin: 0px; padding: 0px;\"><td width=\"11\" height=\"7\" style=\"margin: 0px; padding: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 1em;\">&nbsp;</td></tr><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 1em;\">&nbsp;</td><td width=\"354\" height=\"100\" style=\"margin: 0px; padding: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 1em;\"><table class=\"  \" style=\"margin: 0px; padding: 0px; width: 354px; font-size: 12px;\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"><tbody><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 1em;\"><div class=\"shape\" style=\"border-width: 0px; margin: 0px auto; padding: 0px;\"><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">org.springframework.aop-3.0.5.RELEASE.jar</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">com.springsource.org.aspectj.weaver-1.6.8.RELEASE.jar</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">com.springsource.org.aopalliance-1.0.0.jar</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">com.springsource.net.sf.cglib-2.2.0.jar</p></div></td></tr></tbody></table>&nbsp;</td></tr></tbody></table><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"font-weight: normal;\">&nbsp;</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"font-weight: normal;\">&nbsp;<span style=\"line-height: 1.5em; font-size: 1.2em;\">&nbsp;</span><span style=\"line-height: 1.5em; font-size: 1.2em;\">这些jar包添加到“Build Path”下</span></span></p></div></h3><h3 style=\"margin: 0px 0px 0.5em; padding: 0px; line-height: 1.5em; font-family: verdana,arial,helvetica,sans-serif; font-size: 1.2em;\"><span style=\"font-weight: normal;\">6.2.2&nbsp; 定义目标类</span></h3><h3 style=\"margin: 0px 0px 0.5em; padding: 0px; line-height: 1.5em; font-family: Helvetica,Tahoma,Arial,sans-serif; font-size: 1.2em;\"><div class=\"div_content_text_all\" style=\"margin: 0px auto; padding: 5px 10px 20px; line-height: 1.5em;\"><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"font-weight: normal;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1）定义目标接口：</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"font-weight: normal;\">&nbsp;</span></p><div style=\"margin: 0px auto; padding: 0px; border: 1px solid rgb(170, 187, 204); font-size: 12px;\"><span class=\"bold\" style=\"font-family:\'arial black\',\'avant garde\';font-size:14px;margin: 0px; padding: 0px; font-weight: normal;\">java代码：</span><div class=\"dp-highlighter\" style=\"border-width: 0px; margin: 18px 0px !important; padding: 1px 0px 0px; width: 671px; overflow: auto; font-family: Consolas,\'Courier New\',Courier,mono,serif; -ms-word-break: break-all; -ms-word-wrap: break-word; background-color: rgb(231, 229, 220);\"><div class=\"bar\" style=\"border-width: 0px; margin: 0px auto; padding: 0px 0px 0px 45px;\"><div class=\"tools\" style=\"margin: 0px; padding: 3px;\"><span style=\"font-weight: normal;\"><a target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://sishuok.com/forum/blogPost/list/2467.html#\" target=\"_blank\">查看</a><a target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://sishuok.com/forum/blogPost/list/2467.html#\" target=\"_blank\">复制到剪贴板</a><a target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://sishuok.com/forum/blogPost/list/2467.html#\" target=\"_blank\">打印</a></span></div></div><ol class=\"dp-j\" style=\"margin: 0px 0px 1px 45px !important; padding: 0px; border: 1px solid rgb(209, 215, 220); color: rgb(92, 92, 92); line-height: 1.4em; background-color: rgb(255, 255, 255);\"><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px;\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\"><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; background-color: inherit;\">package</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;cn.javass.spring.chapter6.service;&nbsp;&nbsp;</span></span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\"><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; background-color: inherit;\">public</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;</span><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; background-color: inherit;\">interface</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;IHelloWorldService&nbsp;{&nbsp;&nbsp;</span></span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px;\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; background-color: inherit;\">public</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;</span><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; background-color: inherit;\">void</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;sayHello();&nbsp;&nbsp;</span></span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\">}&nbsp;&nbsp;</span></li></ol></div></div><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"font-weight: normal;\">&nbsp;</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"font-weight: normal;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2）定义目标接口实现：</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"font-weight: normal;\">&nbsp;</span></p><div style=\"margin: 0px auto; padding: 0px; border: 1px solid rgb(170, 187, 204); font-size: 12px;\"><span class=\"bold\" style=\"font-family:\'arial black\',\'avant garde\';font-size:14px;margin: 0px; padding: 0px; font-weight: normal;\">java代码：</span><div class=\"dp-highlighter\" style=\"border-width: 0px; margin: 18px 0px !important; padding: 1px 0px 0px; width: 671px; overflow: auto; font-family: Consolas,\'Courier New\',Courier,mono,serif; -ms-word-break: break-all; -ms-word-wrap: break-word; background-color: rgb(231, 229, 220);\"><div class=\"bar\" style=\"border-width: 0px; margin: 0px auto; padding: 0px 0px 0px 45px;\"><div class=\"tools\" style=\"margin: 0px; padding: 3px;\"><span style=\"font-weight: normal;\"><a target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://sishuok.com/forum/blogPost/list/2467.html#\" target=\"_blank\">查看</a><a target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://sishuok.com/forum/blogPost/list/2467.html#\" target=\"_blank\">复制到剪贴板</a><a target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://sishuok.com/forum/blogPost/list/2467.html#\" target=\"_blank\">打印</a></span></div></div><ol class=\"dp-j\" style=\"margin: 0px 0px 1px 45px !important; padding: 0px; border: 1px solid rgb(209, 215, 220); color: rgb(92, 92, 92); line-height: 1.4em; background-color: rgb(255, 255, 255);\"><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px;\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\"><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; background-color: inherit;\">package</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;cn.javass.spring.chapter6.service.impl;&nbsp;&nbsp;</span></span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\"><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; background-color: inherit;\">import</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;cn.javass.spring.chapter6.service.IHelloWorldService;&nbsp;&nbsp;</span></span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px;\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\"><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; background-color: inherit;\">public</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;</span><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; background-color: inherit;\">class</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;HelloWorldService&nbsp;</span><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; background-color: inherit;\">implements</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;IHelloWorldService&nbsp;{&nbsp;&nbsp;</span></span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"annotation\" style=\"color:#646464;margin: 0px; padding: 0px; background-color: inherit;\">@Override</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;</span></span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px;\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; background-color: inherit;\">public</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;</span><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; background-color: inherit;\">void</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;sayHello()&nbsp;{&nbsp;&nbsp;</span></span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\" style=\"color:blue;margin: 0px; padding: 0px; background-color: inherit;\">&quot;============Hello&nbsp;World!&quot;</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">);&nbsp;&nbsp;</span></span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px;\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\">}&nbsp;&nbsp;</span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px;\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\">&nbsp;&nbsp;&nbsp;</span></li></ol></div></div><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"font-weight: normal;\">&nbsp;</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"font-weight: normal;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 注：在日常开发中最后将业务逻辑定义在一个专门的service包下，而实现定义在service包下的impl包中，服务接口以IXXXService形式，而服务实现就是XXXService，这就是规约设计，见名知义。当然可以使用公司内部更好的形式，只要大家都好理解就可以了。</span></p></div></h3><h3 style=\"margin: 0px 0px 0.5em; padding: 0px; line-height: 1.5em; font-family: verdana,arial,helvetica,sans-serif; font-size: 1.2em;\"><span style=\"font-weight: normal;\">&nbsp;</span></h3><h3 style=\"margin: 0px 0px 0.5em; padding: 0px; line-height: 1.5em; font-family: verdana,arial,helvetica,sans-serif; font-size: 1.2em;\"><span style=\"font-weight: normal;\">6.2.2&nbsp; 定义切面支持类</span></h3><h3 style=\"margin: 0px 0px 0.5em; padding: 0px; line-height: 1.5em; font-family: Helvetica,Tahoma,Arial,sans-serif; font-size: 1.2em;\"><div class=\"div_content_text_all\" style=\"margin: 0px auto; padding: 5px 10px 20px; line-height: 1.5em;\"><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"font-weight: normal;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 有了目标类，该定义切面了，切面就是通知和切入点的组合，而切面是通过配置方式定义的，因此这定义切面前，我们需要定义切面支持类，切面支持类提供了通知实现：</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"font-weight: normal;\">&nbsp;</span></p><div style=\"margin: 0px auto; padding: 0px; border: 1px solid rgb(170, 187, 204); font-size: 12px;\"><span class=\"bold\" style=\"font-family:\'arial black\',\'avant garde\';font-size:14px;margin: 0px; padding: 0px; font-weight: normal;\">java代码：</span><div class=\"dp-highlighter\" style=\"border-width: 0px; margin: 18px 0px !important; padding: 1px 0px 0px; width: 671px; overflow: auto; font-family: Consolas,\'Courier New\',Courier,mono,serif; -ms-word-break: break-all; -ms-word-wrap: break-word; background-color: rgb(231, 229, 220);\"><div class=\"bar\" style=\"border-width: 0px; margin: 0px auto; padding: 0px 0px 0px 45px;\"><div class=\"tools\" style=\"margin: 0px; padding: 3px;\"><span style=\"font-weight: normal;\"><a target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://sishuok.com/forum/blogPost/list/2467.html#\" target=\"_blank\">查看</a><a target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://sishuok.com/forum/blogPost/list/2467.html#\" target=\"_blank\">复制到剪贴板</a><a target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://sishuok.com/forum/blogPost/list/2467.html#\" target=\"_blank\">打印</a></span></div></div><ol class=\"dp-j\" style=\"margin: 0px 0px 1px 45px !important; padding: 0px; border: 1px solid rgb(209, 215, 220); color: rgb(92, 92, 92); line-height: 1.4em; background-color: rgb(255, 255, 255);\"><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px;\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\"><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; background-color: inherit;\">package</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;cn.javass.spring.chapter6.aop;&nbsp;&nbsp;</span></span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\"><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; background-color: inherit;\">public</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;</span><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; background-color: inherit;\">class</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;HelloWorldAspect&nbsp;{&nbsp;&nbsp;</span></span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px;\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:#0820;margin: 0px; padding: 0px; border: 0px currentColor; width: auto; background-color: inherit;\">//前置通知</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;</span></span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; background-color: inherit;\">public</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;</span><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; background-color: inherit;\">void</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;beforeAdvice()&nbsp;{&nbsp;&nbsp;</span></span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px;\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\" style=\"color:blue;margin: 0px; padding: 0px; background-color: inherit;\">&quot;===========before&nbsp;advice&quot;</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">);&nbsp;&nbsp;</span></span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\">}&nbsp;&nbsp;</span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px;\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\"><span class=\"comment\" style=\"color:#0820;margin: 0px; padding: 0px; border: 0px currentColor; width: auto; background-color: inherit;\">//后置最终通知</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;</span></span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; background-color: inherit;\">public</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;</span><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; background-color: inherit;\">void</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;afterFinallyAdvice()&nbsp;{&nbsp;&nbsp;</span></span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px;\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\" style=\"color:blue;margin: 0px; padding: 0px; background-color: inherit;\">&quot;===========after&nbsp;finally&nbsp;advice&quot;</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">);&nbsp;&nbsp;</span></span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px;\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\">}&nbsp;&nbsp;</span></li></ol></div></div><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"font-weight: normal;\">&nbsp;</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"font-weight: normal;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 此处HelloWorldAspect类不是真正的切面实现，只是定义了通知实现的类，在此我们可以把它看作就是缺少了切入点的切面。</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"font-weight: normal;\">&nbsp;</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"font-weight: normal;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 注：对于AOP相关类最后专门放到一个包下，如“aop”包，因为AOP是动态织入的，所以如果某个目标类被AOP拦截了并应用了通知，可能很难发现这个通知实现在哪个包里，因此推荐使用规约命名，方便以后维护人员查找相应的AOP实现。</span></p></div></h3><h3 style=\"margin: 0px 0px 0.5em; padding: 0px; line-height: 1.5em; font-family: verdana,arial,helvetica,sans-serif; font-size: 1.2em;\"><span style=\"font-weight: normal;\">&nbsp;</span></h3><h3 style=\"margin: 0px 0px 0.5em; padding: 0px; line-height: 1.5em; font-family: verdana,arial,helvetica,sans-serif; font-size: 1.2em;\"><span style=\"font-weight: normal;\">6.2.3&nbsp; 在XML中进行配置</span></h3><h3 style=\"margin: 0px 0px 0.5em; padding: 0px; line-height: 1.5em; font-family: Helvetica,Tahoma,Arial,sans-serif; font-size: 1.2em;\"><div class=\"div_content_text_all\" style=\"margin: 0px auto; padding: 5px 10px 20px; line-height: 1.5em;\"><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"font-weight: normal;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 有了通知实现，那就让我们来配置切面吧：</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"font-weight: normal;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1）首先配置AOP需要aop命名空间，配置头如下：</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"font-weight: normal;\">&nbsp;</span></p><div style=\"margin: 0px auto; padding: 0px; border: 1px solid rgb(170, 187, 204); font-size: 12px;\"><span class=\"bold\" style=\"font-family:\'arial black\',\'avant garde\';font-size:14px;margin: 0px; padding: 0px; font-weight: normal;\">java代码：</span><div class=\"dp-highlighter\" style=\"border-width: 0px; margin: 18px 0px !important; padding: 1px 0px 0px; width: 671px; overflow: auto; font-family: Consolas,\'Courier New\',Courier,mono,serif; -ms-word-break: break-all; -ms-word-wrap: break-word; background-color: rgb(231, 229, 220);\"><div class=\"bar\" style=\"border-width: 0px; margin: 0px auto; padding: 0px 0px 0px 45px;\"><div class=\"tools\" style=\"margin: 0px; padding: 3px;\"><span style=\"font-weight: normal;\"><a target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://sishuok.com/forum/blogPost/list/2467.html#\" target=\"_blank\">查看</a><a target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://sishuok.com/forum/blogPost/list/2467.html#\" target=\"_blank\">复制到剪贴板</a><a target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://sishuok.com/forum/blogPost/list/2467.html#\" target=\"_blank\">打印</a></span></div></div><ol class=\"dp-j\" style=\"margin: 0px 0px 1px 45px !important; padding: 0px; border: 1px solid rgb(209, 215, 220); color: rgb(92, 92, 92); line-height: 1.4em; background-color: rgb(255, 255, 255);\"><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px;\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\"><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&lt;?xml&nbsp;version=</span><span class=\"string\" style=\"color:blue;margin: 0px; padding: 0px; background-color: inherit;\">&quot;1.0&quot;</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;encoding=</span><span class=\"string\" style=\"color:blue;margin: 0px; padding: 0px; background-color: inherit;\">&quot;UTF-8&quot;</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">?&gt;&nbsp;&nbsp;</span></span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\">&lt;beans&nbsp;&nbsp;xmlns=<span class=\"string\" style=\"color:blue;margin: 0px; padding: 0px; background-color: inherit;\">&quot;http://www.springframework.org/schema/beans&quot;</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;</span></span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px;\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xmlns:xsi=<span class=\"string\" style=\"color:blue;margin: 0px; padding: 0px; background-color: inherit;\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;</span></span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xmlns:aop=<span class=\"string\" style=\"color:blue;margin: 0px; padding: 0px; background-color: inherit;\">&quot;http://www.springframework.org/schema/aop&quot;</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;</span></span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px;\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xsi:schemaLocation=&quot;&nbsp;&nbsp;</span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http:<span class=\"comment\" style=\"color:#0820;margin: 0px; padding: 0px; border: 0px currentColor; width: auto; background-color: inherit;\">//www.springframework.org/schema/beans</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;</span></span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px;\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http:<span class=\"comment\" style=\"color:#0820;margin: 0px; padding: 0px; border: 0px currentColor; width: auto; background-color: inherit;\">//www.springframework.org/schema/beans/spring-beans-3.0.xsd</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;</span></span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http:<span class=\"comment\" style=\"color:#0820;margin: 0px; padding: 0px; border: 0px currentColor; width: auto; background-color: inherit;\">//www.springframework.org/schema/aop</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;</span></span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px;\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http:<span class=\"comment\" style=\"color:#0820;margin: 0px; padding: 0px; border: 0px currentColor; width: auto; background-color: inherit;\">//www.springframework.org/schema/aop/spring-aop-3.0.xsd&quot;&gt;</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;</span></span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\">&lt;/beans&gt;&nbsp;&nbsp;</span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px;\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\">&nbsp;&nbsp;&nbsp;</span></li></ol></div></div><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"font-weight: normal;\">&nbsp;</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"font-weight: normal;\">&nbsp;</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"font-weight: normal;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2）配置目标类：</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"font-weight: normal;\">&nbsp;</span></p><div style=\"margin: 0px auto; padding: 0px; border: 1px solid rgb(170, 187, 204); font-size: 12px;\"><span class=\"bold\" style=\"font-family:\'arial black\',\'avant garde\';font-size:14px;margin: 0px; padding: 0px; font-weight: normal;\">java代码：</span><div class=\"dp-highlighter\" style=\"border-width: 0px; margin: 18px 0px !important; padding: 1px 0px 0px; width: 671px; overflow: auto; font-family: Consolas,\'Courier New\',Courier,mono,serif; -ms-word-break: break-all; -ms-word-wrap: break-word; background-color: rgb(231, 229, 220);\"><div class=\"bar\" style=\"border-width: 0px; margin: 0px auto; padding: 0px 0px 0px 45px;\"><div class=\"tools\" style=\"margin: 0px; padding: 3px;\"><span style=\"font-weight: normal;\"><a target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://sishuok.com/forum/blogPost/list/2467.html#\" target=\"_blank\">查看</a><a target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://sishuok.com/forum/blogPost/list/2467.html#\" target=\"_blank\">复制到剪贴板</a><a target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://sishuok.com/forum/blogPost/list/2467.html#\" target=\"_blank\">打印</a></span></div></div><ol class=\"dp-j\" style=\"margin: 0px 0px 1px 45px !important; padding: 0px; border: 1px solid rgb(209, 215, 220); color: rgb(92, 92, 92); line-height: 1.4em; background-color: rgb(255, 255, 255);\"><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px;\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\"><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&lt;bean&nbsp;id=</span><span class=\"string\" style=\"color:blue;margin: 0px; padding: 0px; background-color: inherit;\">&quot;helloWorldService&quot;</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;</span></span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\"><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; background-color: inherit;\">class</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">=</span><span class=\"string\" style=\"color:blue;margin: 0px; padding: 0px; background-color: inherit;\">&quot;cn.javass.spring.chapter6.service.impl.HelloWorldService&quot;</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">/&gt;&nbsp;&nbsp;</span></span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px;\"><span style=\"color:black;margin: 0px; padding: 0px; font-weight: normal; background-color: inherit;\">&nbsp;&nbsp;&nbsp;</span></li></ol></div></div><p style=\"lin', '2016-04-16 01:21:17', '0');
INSERT INTO `article` VALUES ('10066', '10003', 'SpringMVC入门案例（3）', '\n<p><span style=\"font-family:Arial;\"><span style=\"font-size:14px;line-height: 26px;\">一个简单的入门实例教程</span></span></p><p><span style=\"font-size:14px;\">该实例的源码和实例中的jar</span></p><p><span style=\"font-size:14px;\"><span style=\"font-size:14px;\">源码：<a target=\"_blank\" href=\"http://download.csdn.net/detail/swingpyzf/5348563\" target=\"_blank\">http://download.csdn.net/detail/swingpyzf/5348563</a></span></span></p><p><span style=\"font-size:14px;\">所需要的jar: &nbsp;<a target=\"_blank\" href=\"http://download.csdn.net/detail/swingpyzf/5348531\" target=\"_blank\">http://download.csdn.net/detail/swingpyzf/5348531</a></span></p><p><span style=\"font-size:14px;\"><span style=\"font-family:Arial;font-size:14px;line-height: 26px;\"><br></span></span></p><p><span style=\"font-size:14px;\"><span style=\"font-family:Arial;font-size:14px;line-height: 26px;\">另外一篇关于SpringMVC 文件上传，多文件上传：<a target=\"_blank\" href=\"http://blog.csdn.net/swingpyzf/article/details/20230865\" target=\"_blank\">http://blog.csdn.net/swingpyzf/article/details/20230865</a></span></span></p><p><span style=\"font-size:14px;\"><span style=\"font-family:Arial;font-size:14px;line-height: 26px;\"><br></span></span></p><p><span style=\"font-size:14px;\">简单注解配置的实例：</span></p><p><span style=\"font-size:14px;\"><br></span></p><p><strong><span style=\"font-size:18px;\">一、创建项目：</span></strong></p><p><span style=\"font-size:14px;\">1、建立新的动态web项目：</span></p><p><span style=\"font-size:14px;\"><span style=\"white-space: pre;\"><img alt=\"\" src=\"http://img.blog.csdn.net/20130509105703619\"></span></span></p><p><span style=\"font-size:14px;\"><span style=\"white-space: pre;\"><br></span></span></p><p><span style=\"font-size:14px;\"><span style=\"white-space: pre;\">2</span>、为项目命名为：SpringMVC_01</span></p><p><span style=\"font-size:14px;\"><span style=\"white-space: pre;\"><img alt=\"\" src=\"http://img.blog.csdn.net/20130509105746787\"></span></span></p><p><span style=\"font-size:14px;\"><span style=\"white-space: pre;\"><br></span></span></p><p><span style=\"font-size:14px;\"><span style=\"white-space: pre;\">3</span>、添加tomcat运行时环境\\依赖库 &nbsp;如果是MyEclipse的话创建web项目时就不需要此步骤</span></p><p><span style=\"font-size:14px;\">右键项目，点击Build Path-&gt;Add Librares:</span></p><p><span style=\"font-size:14px;\"><span style=\"white-space: pre;\"><img alt=\"\" src=\"http://img.blog.csdn.net/20130509105902410\"></span></span></p><p><span style=\"font-size:14px;\">添加完后会多出tomcat 的 Servlet包</span></p><p><span style=\"font-size:14px;\"><img alt=\"\" src=\"http://img.blog.csdn.net/20130509110058844\"><br></span></p><p><span style=\"font-size:14px;\">4、最后添加Spring及SpringMVC所需要的jar，我添加以下jar到项目中</span></p><p><span style=\"font-size:14px;\"><img alt=\"\" src=\"http://img.blog.csdn.net/20130509110200015\"><br></span></p><p><span style=\"font-size:14px;\"><br></span></p><p><strong><span style=\"font-size:18px;\">二、配置文件：</span></strong></p><p><span style=\"font-size:14px;\">1、首先在web.xml中配置一个DispatcherServlet，并通过&lt;servlet-mapping&gt;指定需要拦截的url。 下面xml中配置一个拦截.html为后缀的url.</span></p><p><div class=\"dp-highlighter bg_html\"><div class=\"bar\"><div class=\"tools\"><strong>[html]</strong> <a target=\"_blank\" title=\"view plain\" class=\"ViewSource\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">view plain</a><a target=\"_blank\" title=\"copy\" class=\"CopyToClipboard\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">copy</a><a target=\"_blank\" title=\"print\" class=\"PrintSource\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">print</a><a target=\"_blank\" title=\"?\" class=\"About\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">?</a><a target=\"_blank\" title=\"在CODE上查看代码片\" style=\"text-indent: 0px;\" href=\"https://code.csdn.net/snippets/212424\" target=\"_blank\"><img width=\"12\" height=\"12\" style=\"left: 2px; top: 1px; position: relative;\" alt=\"在CODE上查看代码片\" src=\"https://code.csdn.net/assets/CODE_ico.png\"></a><a target=\"_blank\" title=\"派生到我的代码片\" style=\"text-indent: 0px;\" href=\"https://code.csdn.net/snippets/212424/fork\" target=\"_blank\"><img width=\"12\" height=\"12\" style=\"left: 2px; top: 2px; position: relative;\" alt=\"派生到我的代码片\" src=\"https://code.csdn.net/assets/ico_fork.svg\"></a></div></div><ol class=\"dp-xml\"><li class=\"alt\"><span><span class=\"comments\">&lt;!--&nbsp;配置Spring&nbsp;MVC&nbsp;DispatcherServlet&nbsp;--&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">servlet</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">servlet-name</span><span class=\"tag\">&gt;</span><span>MVC</span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">servlet-name</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">servlet-class</span><span class=\"tag\">&gt;</span><span>org.springframework.web.servlet.DispatcherServlet</span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">servlet-class</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comments\">&lt;!--&nbsp;初始化参数&nbsp;--&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">init-param</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comments\">&lt;!--&nbsp;加载SpringMVC的xml到&nbsp;spring的上下文容器中&nbsp;--&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">param-name</span><span class=\"tag\">&gt;</span><span>contextConfigLocation</span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">param-name</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">param-value</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/WEB-INF/classes/mvc*.*&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;/</span><span class=\"tag-name\">param-value</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;/</span><span class=\"tag-name\">init-param</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">load-on-startup</span><span class=\"tag\">&gt;</span><span>1</span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">load-on-startup</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;/</span><span class=\"tag-name\">servlet</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comments\">&lt;!--&nbsp;配置DispatcherServlet所需要拦截的&nbsp;url&nbsp;--&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">servlet-mapping</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">servlet-name</span><span class=\"tag\">&gt;</span><span>MVC</span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">servlet-name</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">url-pattern</span><span class=\"tag\">&gt;</span><span>*.html</span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">url-pattern</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;/</span><span class=\"tag-name\">servlet-mapping</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li></ol></div><pre code_snippet_id=\"212424\" snippet_file_name=\"blog_20140301_1_68686\" class=\"html\" style=\"display: none;\" name=\"code\" code_snippet_id=\"212424\" snippet_file_name=\"blog_20140301_1_68686\">&lt;!-- 配置Spring MVC DispatcherServlet --&gt;\n	&lt;servlet&gt;\n		&lt;servlet-name&gt;MVC&lt;/servlet-name&gt;\n		&lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n		&lt;!-- 初始化参数 --&gt;\n		&lt;init-param&gt;\n			&lt;!-- 加载SpringMVC的xml到 spring的上下文容器中 --&gt;\n			&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n			&lt;param-value&gt;\n				/WEB-INF/classes/mvc*.*\n			&lt;/param-value&gt;\n		&lt;/init-param&gt;\n		&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n	&lt;/servlet&gt;\n\n	&lt;!-- 配置DispatcherServlet所需要拦截的 url --&gt;\n	&lt;servlet-mapping&gt;\n		&lt;servlet-name&gt;MVC&lt;/servlet-name&gt;\n		&lt;url-pattern&gt;*.html&lt;/url-pattern&gt;\n	&lt;/servlet-mapping&gt;</pre><span style=\"font-size:14px;\"></span> <p><span style=\"font-size:12px;\">先配置一个servlet 然后 加载SpringMVC的xml文件到Spring的上下文中。然后配置servlet-mapping，servlet-name为刚刚的servlet中的配置的name，然后指定要拦截的url为*.html</span> <p><p><span style=\"font-size:14px;\"><br></span></p><p><span style=\"font-size:14px;\">2、配置Spring的上下文监听器，并且指定Spring的xml配置文件的路径。</span></p><p><div class=\"dp-highlighter bg_html\"><div class=\"bar\"><div class=\"tools\"><strong>[html]</strong> <a target=\"_blank\" title=\"view plain\" class=\"ViewSource\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">view plain</a><a target=\"_blank\" title=\"copy\" class=\"CopyToClipboard\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">copy</a><a target=\"_blank\" title=\"print\" class=\"PrintSource\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">print</a><a target=\"_blank\" title=\"?\" class=\"About\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">?</a><a target=\"_blank\" title=\"在CODE上查看代码片\" style=\"text-indent: 0px;\" href=\"https://code.csdn.net/snippets/212424\" target=\"_blank\"><img width=\"12\" height=\"12\" style=\"left: 2px; top: 1px; position: relative;\" alt=\"在CODE上查看代码片\" src=\"https://code.csdn.net/assets/CODE_ico.png\"></a><a target=\"_blank\" title=\"派生到我的代码片\" style=\"text-indent: 0px;\" href=\"https://code.csdn.net/snippets/212424/fork\" target=\"_blank\"><img width=\"12\" height=\"12\" style=\"left: 2px; top: 2px; position: relative;\" alt=\"派生到我的代码片\" src=\"https://code.csdn.net/assets/ico_fork.svg\"></a></div></div><ol class=\"dp-xml\"><li class=\"alt\"><span><span class=\"comments\">&lt;!--&nbsp;监听spring上下文容器&nbsp;--&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=\"tag\">&lt;</span><span class=\"tag-name\">listener</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">listener-class</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.springframework.web.context.ContextLoaderListener&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;/</span><span class=\"tag-name\">listener-class</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">listener</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;</span></li><li><span><span class=\"comments\">&lt;!--&nbsp;加载spring的xml配置文件到&nbsp;spring的上下文容器中&nbsp;--&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span class=\"tag\">&lt;</span><span class=\"tag-name\">context-param</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">param-name</span><span class=\"tag\">&gt;</span><span>contextConfigLocation</span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">param-name</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">param-value</span><span class=\"tag\">&gt;</span><span>classpath:root-context.xml</span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">param-value</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">context-param</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li></ol></div><pre code_snippet_id=\"212424\" snippet_file_name=\"blog_20140301_2_4322610\" class=\"html\" style=\"display: none;\" name=\"code\" code_snippet_id=\"212424\" snippet_file_name=\"blog_20140301_2_4322610\">	&lt;!-- 监听spring上下文容器 --&gt;\n	&lt;listener&gt;\n		&lt;listener-class&gt;\n			org.springframework.web.context.ContextLoaderListener\n		&lt;/listener-class&gt;\n	&lt;/listener&gt;\n	\n	&lt;!-- 加载spring的xml配置文件到 spring的上下文容器中 --&gt;\n	&lt;context-param&gt;\n		&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n		&lt;param-value&gt;classpath:root-context.xml&lt;/param-value&gt;\n	&lt;/context-param&gt;</pre><span style=\"font-size:14px;\"></span> <p><span style=\"font-size:12px;\">这里指定的路径classpath为 项目编译后的classes文件中。</span> <p><p><span style=\"font-size:14px;\">最终web.xml文件内容：</span></p><p><span style=\"font-size:14px;\"></span></p><div class=\"dp-highlighter bg_html\"><div class=\"bar\"><div class=\"tools\"><strong>[html]</strong> <a target=\"_blank\" title=\"view plain\" class=\"ViewSource\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">view plain</a><a target=\"_blank\" title=\"copy\" class=\"CopyToClipboard\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">copy</a><a target=\"_blank\" title=\"print\" class=\"PrintSource\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">print</a><a target=\"_blank\" title=\"?\" class=\"About\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">?</a><a target=\"_blank\" title=\"在CODE上查看代码片\" style=\"text-indent: 0px;\" href=\"https://code.csdn.net/snippets/212424\" target=\"_blank\"><img width=\"12\" height=\"12\" style=\"left: 2px; top: 1px; position: relative;\" alt=\"在CODE上查看代码片\" src=\"https://code.csdn.net/assets/CODE_ico.png\"></a><a target=\"_blank\" title=\"派生到我的代码片\" style=\"text-indent: 0px;\" href=\"https://code.csdn.net/snippets/212424/fork\" target=\"_blank\"><img width=\"12\" height=\"12\" style=\"left: 2px; top: 2px; position: relative;\" alt=\"派生到我的代码片\" src=\"https://code.csdn.net/assets/ico_fork.svg\"></a></div></div><ol class=\"dp-xml\"><li class=\"alt\"><span><span class=\"tag\">&lt;?</span><span class=\"tag-name\">xml</span><span>&nbsp;</span><span class=\"attribute\">version</span><span>=</span><span class=\"attribute-value\">&quot;1.0&quot;</span><span>&nbsp;</span><span class=\"attribute\">encoding</span><span>=</span><span class=\"attribute-value\">&quot;UTF-8&quot;</span><span class=\"tag\">?&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=\"tag\">&lt;</span><span class=\"tag-name\">web-app</span><span>&nbsp;</span><span class=\"attribute\">version</span><span>=</span><span class=\"attribute-value\">&quot;3.0&quot;</span><span>&nbsp;</span><span class=\"attribute\">xmlns</span><span>=</span><span class=\"attribute-value\">&quot;http://java.sun.com/xml/ns/javaee&quot;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">xmlns:xsi</span><span>=</span><span class=\"attribute-value\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">xsi:schemaLocation</span><span>=&quot;http://java.sun.com/xml/ns/javaee&nbsp;&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;<span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">display-name</span><span class=\"tag\">&gt;</span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">display-name</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comments\">&lt;!--&nbsp;监听spring上下文容器&nbsp;--&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">listener</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">listener-class</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.springframework.web.context.ContextLoaderListener&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;/</span><span class=\"tag-name\">listener-class</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;/</span><span class=\"tag-name\">listener</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comments\">&lt;!--&nbsp;加载spring的xml配置文件到&nbsp;spring的上下文容器中&nbsp;--&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">context-param</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">param-name</span><span class=\"tag\">&gt;</span><span>contextConfigLocation</span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">param-name</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">param-value</span><span class=\"tag\">&gt;</span><span>classpath:root-context.xml</span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">param-value</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;/</span><span class=\"tag-name\">context-param</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comments\">&lt;!--&nbsp;配置Spring&nbsp;MVC&nbsp;DispatcherServlet&nbsp;--&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">servlet</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">servlet-name</span><span class=\"tag\">&gt;</span><span>MVC</span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">servlet-name</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">servlet-class</span><span class=\"tag\">&gt;</span><span>org.springframework.web.servlet.DispatcherServlet</span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">servlet-class</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comments\">&lt;!--&nbsp;初始化参数&nbsp;--&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">init-param</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comments\">&lt;!--&nbsp;加载SpringMVC的xml到&nbsp;spring的上下文容器中&nbsp;--&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">param-name</span><span class=\"tag\">&gt;</span><span>contextConfigLocation</span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">param-name</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">param-value</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/WEB-INF/classes/mvc*.*&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;/</span><span class=\"tag-name\">param-value</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;/</span><span class=\"tag-name\">init-param</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">load-on-startup</span><span class=\"tag\">&gt;</span><span>1</span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">load-on-startup</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;/</span><span class=\"tag-name\">servlet</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comments\">&lt;!--&nbsp;配置DispatcherServlet所需要拦截的&nbsp;url&nbsp;--&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">servlet-mapping</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">servlet-name</span><span class=\"tag\">&gt;</span><span>MVC</span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">servlet-name</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">url-pattern</span><span class=\"tag\">&gt;</span><span>*.html</span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">url-pattern</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;/</span><span class=\"tag-name\">servlet-mapping</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">welcome-file-list</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">welcome-file</span><span class=\"tag\">&gt;</span><span>index.html</span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">welcome-file</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;/</span><span class=\"tag-name\">welcome-file-list</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;</span></li><li><span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">web-app</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li></ol></div><pre code_snippet_id=\"212424\" snippet_file_name=\"blog_20140301_3_8542732\" class=\"html\" style=\"display: none;\" name=\"code\" code_snippet_id=\"212424\" snippet_file_name=\"blog_20140301_3_8542732\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;web-app version=&quot;3.0&quot; xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;\n	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n	xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee \n	http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;&gt;\n	&lt;display-name&gt;&lt;/display-name&gt;\n	\n	\n	&lt;!-- 监听spring上下文容器 --&gt;\n	&lt;listener&gt;\n		&lt;listener-class&gt;\n			org.springframework.web.context.ContextLoaderListener\n		&lt;/listener-class&gt;\n	&lt;/listener&gt;\n	\n	&lt;!-- 加载spring的xml配置文件到 spring的上下文容器中 --&gt;\n	&lt;context-param&gt;\n		&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n		&lt;param-value&gt;classpath:root-context.xml&lt;/param-value&gt;\n	&lt;/context-param&gt;\n	\n	&lt;!-- 配置Spring MVC DispatcherServlet --&gt;\n	&lt;servlet&gt;\n		&lt;servlet-name&gt;MVC&lt;/servlet-name&gt;\n		&lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n		&lt;!-- 初始化参数 --&gt;\n		&lt;init-param&gt;\n			&lt;!-- 加载SpringMVC的xml到 spring的上下文容器中 --&gt;\n			&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n			&lt;param-value&gt;\n				/WEB-INF/classes/mvc*.*\n			&lt;/param-value&gt;\n		&lt;/init-param&gt;\n		&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n	&lt;/servlet&gt;\n\n	&lt;!-- 配置DispatcherServlet所需要拦截的 url --&gt;\n	&lt;servlet-mapping&gt;\n		&lt;servlet-name&gt;MVC&lt;/servlet-name&gt;\n		&lt;url-pattern&gt;*.html&lt;/url-pattern&gt;\n	&lt;/servlet-mapping&gt;\n\n	&lt;welcome-file-list&gt;\n		&lt;welcome-file&gt;index.html&lt;/welcome-file&gt;\n	&lt;/welcome-file-list&gt;\n\n\n&lt;/web-app&gt;\n</pre><br><br><p><p><span style=\"font-size:14px;\">3、创建SpringMVC所需要的xml文件和applicationContext的xml文件，这里由于第一步中配置的servlet中init-param所需要加载的格式为：mvc*.* 就是去寻找为mvc开头的文件所以创建SpringMVC的xml文件时必须要有mvc开头，我命名为：mvc-context.xml，并且按照context-param中的配置，将applicationContext文件命名为：root-context.xml；</span></p><p><span style=\"font-size:14px;\"><img alt=\"\" src=\"http://img.blog.csdn.net/20130509105306361\"><br></span></p><p><span style=\"font-size:14px;\"><br></span></p><p><span style=\"font-size:14px;\">4、配置mvc-context.xml:</span></p><p><span style=\"font-size:14px;\">首先通过import标签 导入root-context.xml,然后通过component-scan标签扫描指定包名，让该包下的所有java类的spring注解生效</span></p><p><span style=\"font-size:14px;\">然后配置SpringMVC的视图渲染解析器，让其前缀为/page/ 后缀为.jsp &nbsp;这样能够SpringMVC 所需要渲染的路径能够在/page/返回值.jsp中寻找。</span></p><p><div class=\"dp-highlighter bg_html\"><div class=\"bar\"><div class=\"tools\"><strong>[html]</strong> <a target=\"_blank\" title=\"view plain\" class=\"ViewSource\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">view plain</a><a target=\"_blank\" title=\"copy\" class=\"CopyToClipboard\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">copy</a><a target=\"_blank\" title=\"print\" class=\"PrintSource\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">print</a><a target=\"_blank\" title=\"?\" class=\"About\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">?</a><a target=\"_blank\" title=\"在CODE上查看代码片\" style=\"text-indent: 0px;\" href=\"https://code.csdn.net/snippets/212424\" target=\"_blank\"><img width=\"12\" height=\"12\" style=\"left: 2px; top: 1px; position: relative;\" alt=\"在CODE上查看代码片\" src=\"https://code.csdn.net/assets/CODE_ico.png\"></a><a target=\"_blank\" title=\"派生到我的代码片\" style=\"text-indent: 0px;\" href=\"https://code.csdn.net/snippets/212424/fork\" target=\"_blank\"><img width=\"12\" height=\"12\" style=\"left: 2px; top: 2px; position: relative;\" alt=\"派生到我的代码片\" src=\"https://code.csdn.net/assets/ico_fork.svg\"></a></div></div><ol class=\"dp-xml\"><li class=\"alt\"><span><span class=\"comments\">&lt;!--&nbsp;加载Spring的全局配置文件&nbsp;--&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">beans:import</span><span>&nbsp;</span><span class=\"attribute\">resource</span><span>=</span><span class=\"attribute-value\">&quot;root-context.xml&quot;</span><span>&nbsp;</span><span class=\"tag\">/&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comments\">&lt;!--&nbsp;SpringMVC配置&nbsp;--&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comments\">&lt;!--&nbsp;通过component-scan&nbsp;让Spring扫描org.swinglife.controller下的所有的类，让Spring的代码注解生效&nbsp;--&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">context:component-scan</span><span>&nbsp;</span><span class=\"attribute\">base-package</span><span>=</span><span class=\"attribute-value\">&quot;org.swinglife.controller&quot;</span><span class=\"tag\">&gt;</span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">context:component-scan</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comments\">&lt;!--&nbsp;配置SpringMVC的视图渲染器，&nbsp;让其前缀为:/page/&nbsp;后缀为.jsp&nbsp;&nbsp;将视图渲染到/page/&lt;method返回值&gt;.jsp中&nbsp;--&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">beans:bean</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">class</span><span>=</span><span class=\"attribute-value\">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">p:prefix</span><span>=</span><span class=\"attribute-value\">&quot;/page/&quot;</span><span>&nbsp;</span><span class=\"attribute\">p:suffix</span><span>=</span><span class=\"attribute-value\">&quot;.jsp&quot;</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;/</span><span class=\"tag-name\">beans:bean</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li></ol></div><pre code_snippet_id=\"212424\" snippet_file_name=\"blog_20140301_4_9382547\" class=\"html\" style=\"display: none;\" name=\"code\" code_snippet_id=\"212424\" snippet_file_name=\"blog_20140301_4_9382547\">&lt;!-- 加载Spring的全局配置文件 --&gt;\n	&lt;beans:import resource=&quot;root-context.xml&quot; /&gt;\n	\n	&lt;!-- SpringMVC配置 --&gt;\n	\n	&lt;!-- 通过component-scan 让Spring扫描org.swinglife.controller下的所有的类，让Spring的代码注解生效 --&gt;\n	&lt;context:component-scan base-package=&quot;org.swinglife.controller&quot;&gt;&lt;/context:component-scan&gt;\n	\n	&lt;!-- 配置SpringMVC的视图渲染器， 让其前缀为:/page/ 后缀为.jsp  将视图渲染到/page/&lt;method返回值&gt;.jsp中 --&gt;\n	&lt;beans:bean\n		class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;\n		p:prefix=&quot;/page/&quot; p:suffix=&quot;.jsp&quot;&gt;\n		&lt;/beans:bean&gt;</pre><br><p><p><br></p><p><span style=\"font-size:14px;\">最后mvc-context.xml和root-context.xml为：</span></p><p><span style=\"font-size:14px;\">mav-context.xml:</span></p><p><span style=\"font-size:14px;\"></span></p><div class=\"dp-highlighter bg_html\"><div class=\"bar\"><div class=\"tools\"><strong>[html]</strong> <a target=\"_blank\" title=\"view plain\" class=\"ViewSource\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">view plain</a><a target=\"_blank\" title=\"copy\" class=\"CopyToClipboard\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">copy</a><a target=\"_blank\" title=\"print\" class=\"PrintSource\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">print</a><a target=\"_blank\" title=\"?\" class=\"About\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">?</a><a target=\"_blank\" title=\"在CODE上查看代码片\" style=\"text-indent: 0px;\" href=\"https://code.csdn.net/snippets/212424\" target=\"_blank\"><img width=\"12\" height=\"12\" style=\"left: 2px; top: 1px; position: relative;\" alt=\"在CODE上查看代码片\" src=\"https://code.csdn.net/assets/CODE_ico.png\"></a><a target=\"_blank\" title=\"派生到我的代码片\" style=\"text-indent: 0px;\" href=\"https://code.csdn.net/snippets/212424/fork\" target=\"_blank\"><img width=\"12\" height=\"12\" style=\"left: 2px; top: 2px; position: relative;\" alt=\"派生到我的代码片\" src=\"https://code.csdn.net/assets/ico_fork.svg\"></a></div></div><ol class=\"dp-xml\"><li class=\"alt\"><span><span class=\"tag\">&lt;?</span><span class=\"tag-name\">xml</span><span>&nbsp;</span><span class=\"attribute\">version</span><span>=</span><span class=\"attribute-value\">&quot;1.0&quot;</span><span>&nbsp;</span><span class=\"attribute\">encoding</span><span>=</span><span class=\"attribute-value\">&quot;UTF-8&quot;</span><span class=\"tag\">?&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=\"tag\">&lt;</span><span class=\"tag-name\">beans:beans</span><span>&nbsp;</span><span class=\"attribute\">xmlns</span><span>=</span><span class=\"attribute-value\">&quot;http://www.springframework.org/schema/mvc&quot;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">xmlns:xsi</span><span>=</span><span class=\"attribute-value\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span>&nbsp;</span><span class=\"attribute\">xmlns:beans</span><span>=</span><span class=\"attribute-value\">&quot;http://www.springframework.org/schema/beans&quot;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">xmlns:p</span><span>=</span><span class=\"attribute-value\">&quot;http://www.springframework.org/schema/p&quot;</span><span>&nbsp;</span><span class=\"attribute\">xmlns:aop</span><span>=</span><span class=\"attribute-value\">&quot;http://www.springframework.org/schema/aop&quot;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">xmlns:context</span><span>=</span><span class=\"attribute-value\">&quot;http://www.springframework.org/schema/context&quot;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">xsi:schemaLocation</span><span>=&quot;http://www.springframework.org/schema/mvc&nbsp;http://www.springframework.org/schema/mvc/spring-mvc.xsd&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/aop&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/aop/spring-aop-3.2.xsd&nbsp;http://www.springframework.org/schema/beans&nbsp;http://www.springframework.org/schema/beans/spring-beans.xsd&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/context&nbsp;http://www.springframework.org/schema/context/spring-context.xsd&quot;<span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comments\">&lt;!--&nbsp;加载Spring的全局配置文件&nbsp;--&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">beans:import</span><span>&nbsp;</span><span class=\"attribute\">resource</span><span>=</span><span class=\"attribute-value\">&quot;root-context.xml&quot;</span><span>&nbsp;</span><span class=\"tag\">/&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comments\">&lt;!--&nbsp;SpringMVC配置&nbsp;--&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comments\">&lt;!--&nbsp;通过component-scan&nbsp;让Spring扫描org.swinglife.controller下的所有的类，让Spring的代码注解生效&nbsp;--&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">context:component-scan</span><span>&nbsp;</span><span class=\"attribute\">base-package</span><span>=</span><span class=\"attribute-value\">&quot;org.swinglife.controller&quot;</span><span class=\"tag\">&gt;</span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">context:component-scan</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comments\">&lt;!--&nbsp;配置SpringMVC的视图渲染器，&nbsp;让其前缀为:/&nbsp;后缀为.jsp&nbsp;&nbsp;将视图渲染到/page/&lt;method返回值&gt;.jsp中&nbsp;--&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">beans:bean</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">class</span><span>=</span><span class=\"attribute-value\">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">p:prefix</span><span>=</span><span class=\"attribute-value\">&quot;/page/&quot;</span><span>&nbsp;</span><span class=\"attribute\">p:suffix</span><span>=</span><span class=\"attribute-value\">&quot;.jsp&quot;</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;/</span><span class=\"tag-name\">beans:bean</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li class=\"alt\"><span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">beans:beans</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li></ol></div><pre code_snippet_id=\"212424\" snippet_file_name=\"blog_20140301_5_4159078\" class=\"html\" style=\"display: none;\" name=\"code\" code_snippet_id=\"212424\" snippet_file_name=\"blog_20140301_5_4159078\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans:beans xmlns=&quot;http://www.springframework.org/schema/mvc&quot;\n	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:beans=&quot;http://www.springframework.org/schema/beans&quot;\n	xmlns:p=&quot;http://www.springframework.org/schema/p&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;\n	xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n	xsi:schemaLocation=&quot;http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd\n				http://www.springframework.org/schema/aop\n				http://www.springframework.org/schema/aop/spring-aop-3.2.xsd http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;\n	&lt;!-- 加载Spring的全局配置文件 --&gt;\n	&lt;beans:import resource=&quot;root-context.xml&quot; /&gt;\n	\n	&lt;!-- SpringMVC配置 --&gt;\n	\n	&lt;!-- 通过component-scan 让Spring扫描org.swinglife.controller下的所有的类，让Spring的代码注解生效 --&gt;\n	&lt;context:component-scan base-package=&quot;org.swinglife.controller&quot;&gt;&lt;/context:component-scan&gt;\n	\n	&lt;!-- 配置SpringMVC的视图渲染器， 让其前缀为:/ 后缀为.jsp  将视图渲染到/page/&lt;method返回值&gt;.jsp中 --&gt;\n	&lt;beans:bean\n		class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;\n		p:prefix=&quot;/page/&quot; p:suffix=&quot;.jsp&quot;&gt;\n		&lt;/beans:bean&gt;\n\n\n&lt;/beans:beans&gt;\n</pre><br> root-context.xml: <p><p><span style=\"font-size:14px;\"></span></p><div class=\"dp-highlighter bg_html\"><div class=\"bar\"><div class=\"tools\"><strong>[html]</strong> <a target=\"_blank\" title=\"view plain\" class=\"ViewSource\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">view plain</a><a target=\"_blank\" title=\"copy\" class=\"CopyToClipboard\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">copy</a><a target=\"_blank\" title=\"print\" class=\"PrintSource\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">print</a><a target=\"_blank\" title=\"?\" class=\"About\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">?</a><a target=\"_blank\" title=\"在CODE上查看代码片\" style=\"text-indent: 0px;\" href=\"https://code.csdn.net/snippets/212424\" target=\"_blank\"><img width=\"12\" height=\"12\" style=\"left: 2px; top: 1px; position: relative;\" alt=\"在CODE上查看代码片\" src=\"https://code.csdn.net/assets/CODE_ico.png\"></a><a target=\"_blank\" title=\"派生到我的代码片\" style=\"text-indent: 0px;\" href=\"https://code.csdn.net/snippets/212424/fork\" target=\"_blank\"><img width=\"12\" height=\"12\" style=\"left: 2px; top: 2px; position: relative;\" alt=\"派生到我的代码片\" src=\"https://code.csdn.net/assets/ico_fork.svg\"></a></div></div><ol class=\"dp-xml\"><li class=\"alt\"><span><span class=\"tag\">&lt;?</span><span class=\"tag-name\">xml</span><span>&nbsp;</span><span class=\"attribute\">version</span><span>=</span><span class=\"attribute-value\">&quot;1.0&quot;</span><span>&nbsp;</span><span class=\"attribute\">encoding</span><span>=</span><span class=\"attribute-value\">&quot;UTF-8&quot;</span><span class=\"tag\">?&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=\"tag\">&lt;</span><span class=\"tag-name\">beans</span><span>&nbsp;</span><span class=\"attribute\">xmlns</span><span>=</span><span class=\"attribute-value\">&quot;http://www.springframework.org/schema/beans&quot;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">xmlns:xsi</span><span>=</span><span class=\"attribute-value\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span>&nbsp;</span><span class=\"attribute\">xmlns:context</span><span>=</span><span class=\"attribute-value\">&quot;http://www.springframework.org/schema/context&quot;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">xsi:schemaLocation</span><span>=&quot;http://www.springframework.org/schema/beans&nbsp;http://www.springframework.org/schema/beans/spring-beans-3.2.xsd&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/context&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/context/spring-context-3.2.xsd&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/tx&nbsp;http://www.springframework.org/schema/tx/spring-tx-3.2.xsd&quot;<span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comments\">&lt;!--&nbsp;Root&nbsp;Context:&nbsp;defines&nbsp;shared&nbsp;resources&nbsp;visible&nbsp;to&nbsp;all&nbsp;other&nbsp;web&nbsp;components&nbsp;--&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class=\"alt\"><span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">beans</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li></ol></div><pre code_snippet_id=\"212424\" snippet_file_name=\"blog_20140301_6_8030535\" class=\"html\" style=\"display: none;\" name=\"code\" code_snippet_id=\"212424\" snippet_file_name=\"blog_20140301_6_8030535\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n	xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd\n				http://www.springframework.org/schema/context\n				 http://www.springframework.org/schema/context/spring-context-3.2.xsd\n				http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.2.xsd&quot;&gt;\n	&lt;!-- Root Context: defines shared resources visible to all other web components --&gt;\n\n	 \n&lt;/beans&gt;\n</pre><p><br></p><p><strong><span style=\"font-size:18px;\">三、编写Controller</span></strong></p><p><br></p><p><span style=\"font-size:14px;\">1、创建org.swinglife.controller的package，用来存放Controller类，接着新建HomeController.java，用来编写首页的Controller</span></p><p><span style=\"font-size:14px;\"><span style=\"white-space: pre;\"><img alt=\"\" src=\"http://img.blog.csdn.net/20130509111843812\"></span></span></p><p><span style=\"font-size:14px;\"><span style=\"white-space: pre;\">2</span>、使用注解@Controller将HomeController类定义为一个Controller,并且在方法中通过@RequestMapping(“value”)来指定所需要访问的路径或者方法名。 SpringMVC可以通过一个@Controller注解将一个POJO转化为处理请求的控制器，通过@RequestMapping为控制器指定哪些需要的请求。</span></p><p><span style=\"font-size:14px;\"></span></p><div class=\"dp-highlighter bg_java\"><div class=\"bar\"><div class=\"tools\"><strong>[java]</strong> <a target=\"_blank\" title=\"view plain\" class=\"ViewSource\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">view plain</a><a target=\"_blank\" title=\"copy\" class=\"CopyToClipboard\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">copy</a><a target=\"_blank\" title=\"print\" class=\"PrintSource\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">print</a><a target=\"_blank\" title=\"?\" class=\"About\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">?</a><a target=\"_blank\" title=\"在CODE上查看代码片\" style=\"text-indent: 0px;\" href=\"https://code.csdn.net/snippets/212424\" target=\"_blank\"><img width=\"12\" height=\"12\" style=\"left: 2px; top: 1px; position: relative;\" alt=\"在CODE上查看代码片\" src=\"https://code.csdn.net/assets/CODE_ico.png\"></a><a target=\"_blank\" title=\"派生到我的代码片\" style=\"text-indent: 0px;\" href=\"https://code.csdn.net/snippets/212424/fork\" target=\"_blank\"><img width=\"12\" height=\"12\" style=\"left: 2px; top: 2px; position: relative;\" alt=\"派生到我的代码片\" src=\"https://code.csdn.net/assets/ico_fork.svg\"></a></div></div><ol class=\"dp-j\"><li class=\"alt\"><span><span class=\"annotation\">@Controller</span><span>&nbsp;&nbsp;&nbsp;</span></span></li><li><span><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">class</span><span>&nbsp;HomeController&nbsp;{&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">/***</span>&nbsp;</span></li><li class=\"alt\"><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;首页&nbsp;返回至/page/home.jsp页面</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return</span>&nbsp;</span></li><li class=\"alt\"><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"annotation\">@RequestMapping</span><span>(</span><span class=\"string\">&quot;index&quot;</span><span>)&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;ModelAndView&nbsp;index(){&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">//创建模型跟视图，用于渲染页面。并且指定要返回的页面为home页面</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ModelAndView&nbsp;mav&nbsp;=&nbsp;<span class=\"keyword\">new</span><span>&nbsp;ModelAndView(</span><span class=\"string\">&quot;home&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">return</span><span>&nbsp;mav;&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>}&nbsp;&nbsp;</span></li></ol></div><pre code_snippet_id=\"212424\" snippet_file_name=\"blog_20140301_7_8554706\" class=\"java\" style=\"display: none;\" name=\"code\" code_snippet_id=\"212424\" snippet_file_name=\"blog_20140301_7_8554706\">@Controller \npublic class HomeController {\n	\n	/***\n	 * 首页 返回至/page/home.jsp页面\n	 * @return\n	 */\n	@RequestMapping(&quot;index&quot;)\n	public ModelAndView index(){\n		//创建模型跟视图，用于渲染页面。并且指定要返回的页面为home页面\n		ModelAndView mav = new ModelAndView(&quot;home&quot;);\n		return mav;\n	}\n}\n</pre>方法中定义了ModelAndView对象，通过该对象指定所需要渲染的视图为home最后返回ModelAndView 将页面渲染到home.jsp中。 <p><p><br></p><p><span style=\"font-size:14px;\">3、最后在WebContent目录中 创建/page/home.jsp使SpringMVC能够寻找并渲染该页面视图。</span></p><p><span style=\"font-size:14px;\"><img alt=\"\" src=\"http://img.blog.csdn.net/20130509130050147\"></span></p><div class=\"dp-highlighter bg_html\"><div class=\"bar\"><div class=\"tools\"><strong>[html]</strong> <a target=\"_blank\" title=\"view plain\" class=\"ViewSource\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">view plain</a><a target=\"_blank\" title=\"copy\" class=\"CopyToClipboard\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">copy</a><a target=\"_blank\" title=\"print\" class=\"PrintSource\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">print</a><a target=\"_blank\" title=\"?\" class=\"About\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">?</a><a target=\"_blank\" title=\"在CODE上查看代码片\" style=\"text-indent: 0px;\" href=\"https://code.csdn.net/snippets/212424\" target=\"_blank\"><img width=\"12\" height=\"12\" style=\"left: 2px; top: 1px; position: relative;\" alt=\"在CODE上查看代码片\" src=\"https://code.csdn.net/assets/CODE_ico.png\"></a><a target=\"_blank\" title=\"派生到我的代码片\" style=\"text-indent: 0px;\" href=\"https://code.csdn.net/snippets/212424/fork\" target=\"_blank\"><img width=\"12\" height=\"12\" style=\"left: 2px; top: 2px; position: relative;\" alt=\"派生到我的代码片\" src=\"https://code.csdn.net/assets/ico_fork.svg\"></a></div></div><ol class=\"dp-xml\"><li class=\"alt\"><span><span class=\"tag\">&lt;</span><span>%@&nbsp;page&nbsp;</span><span class=\"attribute\">language</span><span>=</span><span class=\"attribute-value\">&quot;java&quot;</span><span>&nbsp;</span><span class=\"attribute\">contentType</span><span>=</span><span class=\"attribute-value\">&quot;text/html;&nbsp;charset=GB18030&quot;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">pageEncoding</span><span>=</span><span class=\"attribute-value\">&quot;GB18030&quot;</span><span>%</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;HTML&nbsp;4.01&nbsp;Transitional//EN&quot;&nbsp;&quot;http://www.w3.org/TR/html4/loose.dtd&quot;<span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=\"tag\">&lt;</span><span class=\"tag-name\">html</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span class=\"tag\">&lt;</span><span class=\"tag-name\">head</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=\"tag\">&lt;</span><span class=\"tag-name\">meta</span><span>&nbsp;</span><span class=\"attribute\">http-equiv</span><span>=</span><span class=\"attribute-value\">&quot;Content-Type&quot;</span><span>&nbsp;</span><span class=\"attribute\">content</span><span>=</span><span class=\"attribute-value\">&quot;text/html;&nbsp;charset=GB18030&quot;</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span class=\"tag\">&lt;</span><span class=\"tag-name\">title</span><span class=\"tag\">&gt;</span><span>home</span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">title</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">head</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span class=\"tag\">&lt;</span><span class=\"tag-name\">body</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=\"tag\">&lt;</span><span class=\"tag-name\">h2</span><span class=\"tag\">&gt;</span><span>spring&nbsp;mvc&nbsp;实例</span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">h2</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li class=\"alt\"><span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">body</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">html</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li></ol></div><pre code_snippet_id=\"212424\" snippet_file_name=\"blog_20140301_8_8871133\" class=\"html\" style=\"display: none;\" name=\"code\" code_snippet_id=\"212424\" snippet_file_name=\"blog_20140301_8_8871133\">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=GB18030&quot;\n    pageEncoding=&quot;GB18030&quot;%&gt;\n&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=GB18030&quot;&gt;\n&lt;title&gt;home&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h2&gt;spring mvc 实例&lt;/h2&gt;\n\n\n&lt;/body&gt;\n&lt;/html&gt;</pre>现在一个完整的SpringMVC的模式已经搭建完成了，可以运行项目来进行测试。 <p><p><span style=\"font-size:14px;\"><br></span></p><p><strong><span style=\"font-size:18px;\">四、编写参数的提交与传递：</span></strong></p><p><span style=\"font-size:14px;\"><br></span></p><p><span style=\"font-size:14px;\">1、编写一个新的UserController类来假定用户登录，将username,password提交到Controller中进行处理，并且登陆成功后将username,password传递到成功的页面。</span></p><p><span style=\"font-size:14px;\">创建UserController.java</span></p><p><span style=\"font-size:14px;\">创建/page/succ.jsp页面 作为用户成功登陆页面</span></p><p><span style=\"font-size:14px;\">UserController中的代码：</span></p><p><span style=\"font-size:14px;\"></span></p><div class=\"dp-highlighter bg_java\"><div class=\"bar\"><div class=\"tools\"><strong>[java]</strong> <a target=\"_blank\" title=\"view plain\" class=\"ViewSource\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">view plain</a><a target=\"_blank\" title=\"copy\" class=\"CopyToClipboard\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">copy</a><a target=\"_blank\" title=\"print\" class=\"PrintSource\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">print</a><a target=\"_blank\" title=\"?\" class=\"About\" href=\"http://blog.csdn.net/swingpyzf/article/details/8904205#\">?</a><a target=\"_blank\" title=\"在CODE上查看代码片\" style=\"text-indent: 0px;\" href=\"https://code.csdn.net/snippets/212424\" target=\"_blank\"><img width=\"12\" height=\"12\" style=\"left: 2px; top: 1px; position: relative;\" alt=\"在CODE上查看代码片\" src=\"https://code.csdn.net/assets/CODE_ico.png\"></a><a target=\"_blank\" title=\"派生到我的代码片\" style=\"text-indent: 0px;\" href=\"https://code.csdn.net/snippets/212424/fork\" target=\"_blank\"><img width=\"12\" height=\"12\" style=\"left: 2px; top: 2px; position: relative;\" alt=\"派生到我的代码片\" src=\"https://code.csdn.net/assets/ico_fork.svg\"></a></div></div><ol class=\"dp-j\"><li class=\"alt\"><span><span class=\"annotation\">@Controller</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">class</span><span>&nbsp;UserController&nbsp;{&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">/***</span>&nbsp;</span></li><li class=\"alt\"><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;用户登陆</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&lt;p&gt;注解配置，只允许POST提交到该方法</span>&nbsp;</span></li><li class=\"alt\"><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;username</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;password</span>&nbsp;</span></li><li class=\"alt\"><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"annotation\">@RequestMapping</span><span>(value=</span><span class=\"string\">&quot;login&quot;</span><span>,method=RequestMethod.POST)&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;ModelAndView&nbsp;login(String&nbsp;username,String&nbsp;password){&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">//验证传递过来的参数是否正确，否则返回到登陆页面。</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">if</span><span>(</span><span class=\"keyword\">this</span><span>.checkParams(</span><span class=\"keyword\">new</span><span>&nbsp;String[]{username,password})){&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">//指定要返回的页面为succ.jsp</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ModelAndView&nbsp;mav&nbsp;=&nbsp;<span class=\"keyword\">new</span><span>&nbsp;ModelAndView(</span><span class=\"string\">&quot;succ&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">//将参数返回给页面</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mav.addObject(<span class=\"string\">&quot;username&quot;</span><span>,username);&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mav.addObject(<span class=\"string\">&quot;password&quot;</span><span>,&nbsp;password);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">return</span><span>&nbsp;mav;&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">return</span><span>&nbsp;</span><span class=\"keyword\">new</span><span>&nbsp;ModelAndView(</span><span class=\"string\">&quot;home&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">/***</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;验证参数是否为空</span>&nbsp;</span></li><li class=\"alt\"><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;params</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return</span>&nbsp;</span></li><li class=\"alt\"><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">private</span><span>&nbsp;</span><span class=\"keyword\">boolean</span><span>&nbsp;checkParams(String[]&nbsp;params){&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">for</span><span>(String&nbsp;param:params){&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">if</span><span>(param==</span><span class=\"string\">&quot;&quot;</span><span>||param==</span><span class=\"keyword\">null</span><span>||param.isEmpty()){&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">return</span><span>&nbsp;</span><span class=\"keyword\">false</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">return</span><span>&nbsp;</span><span class=\"keyword\">true</span><span>;&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li></ol></div><pre code_snippet_id=\"212424\" snippet_file_name=\"blog_20140301_9_8979817\" class=\"java\" style=\"display: none;\" name=\"code\" code_snippet_id=\"212424\" snippet_file_name=\"blog_20140301_9_8979817\">@Controller\npublic class UserController {\n\n	/***\n	 * 用户登陆\n	 * &lt;p&gt;注解配置，只允许POST提交到该方法\n	 * @param username\n	 * @param password\n	 * @return\n	 */\n	@RequestMapping(value=&quot;login&quot;,method=RequestMethod.POST)\n	public ModelAndView login(String username,String password){\n		//验证传递过来的参数是否正确，否则返回到登陆页面。\n		if(this.checkParams(new String[]{username,password})){\n			//指定要返回的页面为succ.jsp\n			ModelAndView mav = new ModelAndView(&quot;succ&quot;);\n			//将参数返回给页面\n			mav.addObject(&quot;username&quot;,username);\n			mav.addObject(&quot;password&quot;, password);\n			return mav;\n		}\n		return new ModelAndView(&quot;home&qu', '2016-04-16 01:21:17', '0');
INSERT INTO `article` VALUES ('10067', '10003', 'Spring讲解-----------测试', '\n\n<h2 style=\"line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n13.1&nbsp; 概述</h2>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n13.1.1&nbsp; 测试</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n软件测试的目的首先是为了保证软件功能的正确性，其次是为了保证软件的质量，软件测试相当复杂，已经超出本书所涉及的范围，本节将只介绍软件测试流程中前两个步骤：单元测试和集成测试。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\nSpring提供了专门的测试模块用于简化单元测试和集成测试，单元测试和集成测试一般由程序员实现。</p>\n<h2 style=\"line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n&nbsp;</h2>\n<h2 style=\"line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n13.2&nbsp; 单元测试</h2>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n&nbsp;</h3>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n13.2.1&nbsp; 概述</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 单元测试是最细粒度的测试，即具有原子性，通常测试的是某个功能（如测试类中的某个方法的功能）。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 采用依赖注入后我们的代码对Spring IoC容器几乎没有任何依赖，因此在对我们代码进行测试时无需依赖Spring IoC容器，我们只需要通过简单的实例化对象、注入依赖然后测试相应方法来测试该方法是否完成我们预期的功能。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在本书中使用的传统开发流程，即先编写代码实现功能，然后再写测试来验证功能是否正确，而不是测试驱动开发，测试驱动开发是指在编写代码实现功能之前先写测试，然后再根据测试来写满足测试要求的功能代码，通过测试来驱动开发，如果对测试驱动开发感兴趣推荐阅读【测试驱动开发的艺术】。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在实际工作中，应该只对一些复杂的功能进行单元测试，对于一些简单的功能（如数据访问层的CRUD）没有必要花费时间进行单元测试。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\nSpring对单元测试提供如下支持：</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><span class=\"bold\" style=\"font-weight:bold\">Mock对象：</span>Spring通过Mock对象来简化一些场景的单元测试：</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>JNDI测试支持</strong>：在org.springframework.mock.jndi包下通过了SimpleNamingContextBuilder来来创建JNDI上下文Mock对象，从而无需依赖特定Java EE容器即可完成JNDI测试。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>web测试支持：</strong>在org.springframework.mock.web包中提供了一组Servlet API的Mock对象，从而可以无需Web容器即可测试web层的类。</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>工具类</strong>：通过通用的工具类来简化编写测试代码：</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>反射工具类：</strong>在org.springframework.test.util包下的ReflectionTestUtils能通过反射完成类的非public字段或setter方法的调用；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>JDBC工具类：</strong>在org.springframework.test.util包下的SimpleJdbcTestUtils能读取一个sql脚本文件并执行来简化SQL的执行，还提供了如清空表、统计表中行数的简便方法来简化测试代码的编写。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n接下来让我们学习一下开发过程中各层代码如何编写测试用例。</p>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n&nbsp;</h3>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n13.2.2&nbsp; 准备测试环境</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>1、Junit安装：</strong>将Junit 4包添加到“pointShop”项目中，具体方法请参照【2.2.3&nbsp; Hello World】。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2、jMock安装：</strong>到jMock官网【http://www.jmock.org/】下载最新的jMock包，在本书中使用jMock2.5.1版本，将下载的“jmock-2.5.1-jars.zip ”包中的如下jar包拷贝到项目的lib目录下并添加到类路径：</p>\n<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"color:rgb(0,0,0); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<tbody>\n<tr>\n<td style=\"font-size:14px\">\n<div class=\"shape\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nobjenesis-1.0.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\njmock-script-2.5.1.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\njmock-legacy-2.5.1.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\njmock-junit4-2.5.1.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\njmock-junit3-2.5.1.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\njmock-2.5.1.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nhamcrest-library-1.1.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nhamcrest-core-1.1.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nbsh-core-2.0b4.jar</p>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; 注：cglib包无需添加到类路径，因为我们之前已经提供。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>3、添加Spring测试支持包：</strong>将下载的spring-framework-3.0.5.RELEASE-with-docs.zip包中的如下jar包拷贝到项目的lib目录下并添加到类路径：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; dist\\org.springframework.test-3.0.5.RELEASE.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<span class=\"bold\" style=\"font-weight:bold\">4、在“pointShop”项目</span>下新建test文件夹并将其添加到【Java Build Path】中，该文件夹用于存放测试代码，从而分离测试代码和开发代码。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n到此测试环境搭建完毕。</p>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n&nbsp;</h3>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n13.2.3&nbsp; 数据访问层</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 数据访问层单元测试，目的是测试该层定义的接口实现方法的行为是否正确，其实本质是测试是否正确与数据库交互，是否发送并执行了正确的SQL，SQL执行成功后是否正确的组装了业务逻辑层需要的数据。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 数据访问层单元测试通过Mock对象与数据库交互的API来完成测试。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 接下来让我们学习一下如何进行数据访问层单元测试：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>1、在test文件夹下创建如下测试类：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:677.046875px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">package</span>&nbsp;cn.javass.point.dao.hibernate;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//省略import</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>&nbsp;GoodsHibernateDaoUnitTest&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//1、Mock对象上下文，用于创建Mock对象</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">final</span>&nbsp;Mockery&nbsp;context&nbsp;=&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">new</span>&nbsp;Mockery()&nbsp;{{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//1.1、表示可以支持Mock非接口类，默认只支持Mock接口</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setImposteriser(ClassImposteriser.INSTANCE);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;}};&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//2、Mock&nbsp;HibernateTemplate类</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">final</span>&nbsp;HibernateTemplate&nbsp;mockHibernateTemplate&nbsp;=&nbsp;context.mock(HibernateTemplate.<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;IGoodsDao&nbsp;goodsDao&nbsp;=&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">null</span>;&nbsp;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Before</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;setUp()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//3、创建IGoodsDao实现</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GoodsHibernateDao&nbsp;goodsDaoTemp&nbsp;=&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">new</span>&nbsp;GoodsHibernateDao();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//4、通过ReflectionTestUtils注入需要的非public字段数据</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ReflectionTestUtils.setField(goodsDaoTemp,&nbsp;<span class=\"string\" style=\"color:blue\">&quot;entityClass&quot;</span>,&nbsp;GoodsModel.<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//5、注入mockHibernateTemplate对象</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goodsDaoTemp.setHibernateTemplate(mockHibernateTemplate);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//6、赋&#20540;给我们要使用的接口</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goodsDao&nbsp;=&nbsp;goodsDaoTemp;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\">Mockery：jMock核心类，用于创建Mock对象的，通过其mock方法来创建相应接口或类的Mock对象。</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\">goodsDaoTemp：需要测试的IGoodsDao实现，通过ReflectionTestUtils注入需要的非public字段数据。</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>2、测试支持写完后，接下来测试一下IGoodsDao的get方法是否满足需求：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:677.046875px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Test</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;testSave&nbsp;()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//7、创建需要的Model数据</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">final</span>&nbsp;GoodsModel&nbsp;expected&nbsp;=&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">new</span>&nbsp;GoodsModel();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//8、定义预期行为，并在后边来验证预期行为是否正确</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;context.checking(<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">new</span>&nbsp;org.jmock.Expectations()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//9、表示需要调用且只调用一次mockHibernateTemplate的get方法，</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//且get方法参数为(GoodsModel.class,&nbsp;1)，并将返回goods</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;one(mockHibernateTemplate).get(GoodsModel.<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>,&nbsp;<span class=\"number\" style=\"color:rgb(192,0,0)\">1</span>);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;will(returnValue(expected));&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;});&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//10、调用goodsDao的get方法，在内部实现中将委托给</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//getHibernateTemplate().get(this.entityClass,&nbsp;id);</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//因此按照第8步定义的预期行为将返回goods</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;GoodsModel&nbsp;actual&nbsp;=&nbsp;goodsDao.get(<span class=\"number\" style=\"color:rgb(192,0,0)\">1</span>);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//11、来验证第8步定义的预期行为是否调用了</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;context.assertIsSatisfied();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//12、验证goodsDao.get(1)返回结果是否正确</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;Assert.assertEquals(goods,&nbsp;expected);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>context.checking()：</strong>该方法中用于定义预期行为，其中第9步定义了需要调用一次且只调用一次mockHibernateTemplate的get方法，且get方法参数为(GoodsModel.class, 1)，并将返回goods对象。</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>goodsDao.get(1)：</strong>调用goodsDao的get方法，在内部实现中将委托给“getHibernateTemplate().get(this.entityClass, id)”。</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>context.assertIsSatisfied()：</strong>来验证前边定义的预期行为是否执行，且是否正确。</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>Assert.assertEquals(expected, actual)：</strong>用于验证“goodsDao.get(1) ”返回的结果是否是预期结果。</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n以上测试方法其实是没有必要的，对于非常简单的CRUD没有必要写单元测试，只有相当复杂的方法才有必要写单元测试。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n这种通过Mock对象来测试数据访问层代码其实一点意义没有，因为这里没有与数据库交互，无法验证真实环境中与数据库交互是否正确，因此这里只是告诉你如何测试数据访问层代码，在实际工作中一般通过集成测试来完成数据访问层测试。</p>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n&nbsp;</h3>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n13.2.4&nbsp; 业务逻辑层</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n业务逻辑单元测试，目的是测试该层的业务逻辑是否正确并通过Mock 数据访问层对象来隔离与数据库交互，从而无需连接数据库即可测试业务逻辑是否正确。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n接下来让我们学习一下如何进行业务逻辑层单元测试：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>1、在test文件夹下创建如下测试类：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:677.046875px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">package</span>&nbsp;cn.javass.point.service.impl;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//省略import</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>&nbsp;GoodsCodeServiceImplUnitTest&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//1、Mock对象上下文，用于创建Mock对象</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">final</span>&nbsp;Mockery&nbsp;context&nbsp;=&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">new</span>&nbsp;Mockery()&nbsp;{{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//1.1、表示可以支持Mock非接口类，默认只支持Mock接口</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setImposteriser(ClassImposteriser.INSTANCE);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;}};&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//2、Mock&nbsp;IGoodsCodeDao接口</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;IGoodsCodeDao&nbsp;goodsCodeDao&nbsp;=&nbsp;context.mock(IGoodsCodeDao.<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>);;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;IGoodsCodeService&nbsp;goodsCodeService;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Before</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;setUp()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GoodsCodeServiceImpl&nbsp;goodsCodeServiceTemp&nbsp;=&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">new</span>&nbsp;GoodsCodeServiceImpl();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//3、依赖注入</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goodsCodeServiceTemp.setDao(goodsCodeDao);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goodsCodeService&nbsp;=&nbsp;goodsCodeServiceTemp;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; 以上测试支持代码和数据访问层测试代码非常类&#20284;，在此不再阐述。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>2、测试支持写完后，接下来测试一下购买商品Code码是否满足需求：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n测试业务逻辑时需要分别测试多种场景，即如在某种场景下成功或失败等等，即测试应该全面，每个功能点都应该测试到。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>2.1、测试购买失败的场景：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:677.046875px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Test</span>(expected&nbsp;=&nbsp;NotCodeException.<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>)&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;testBuyFail()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">final</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">int</span>&nbsp;goodsId&nbsp;=&nbsp;<span class=\"number\" style=\"color:rgb(192,0,0)\">1</span>;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//4、定义预期行为，并在后边来验证预期行为是否正确</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;context.checking(<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">new</span>&nbsp;org.jmock.Expectations()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//5、表示需要调用goodsCodeDao对象的getOneNotExchanged一次且仅以此</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//且返回&#20540;为null</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;one(goodsCodeDao).getOneNotExchanged(goodsId);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;will(returnValue(<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">null</span>));&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;});&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;goodsCodeService.buy(<span class=\"string\" style=\"color:blue\">&quot;test&quot;</span>,&nbsp;goodsId);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;context.assertIsSatisfied();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>context.checking()：</strong>该方法中用于定义预期行为，其中第5步定义了需要调用一次且只调用一次goodsCodeDao的getOneNotExchanged方法，且getOneNotExchanged方法参数为(goodsId)，并将返回null。</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>goodsCodeService.buy(&quot;test&quot;, goodsId)：</strong>调用goodsCodeService的buy方法，由于调用goodsCodeDao的getOneNotExchanged方法将返回null，因此buy方法将抛出“NotCodeException”异常，从而表示没有Code码。</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>context.assertIsSatisfied()：</strong>来验证前边定义的预期行为是否执行，且是否正确。</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\">由于我们在预期行为中调用getOneNotExchanged将返回null，因此测试将失败且抛出NotCodeException异常。</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>2.2、测试购买成功的场景：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:677.046875px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Test</span>()&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;testBuySuccess&nbsp;()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">final</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">int</span>&nbsp;goodsId&nbsp;=&nbsp;<span class=\"number\" style=\"color:rgb(192,0,0)\">1</span>;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">final</span>&nbsp;GoodsCodeModel&nbsp;goodsCode&nbsp;=&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font', '2016-04-16 01:21:17', '0');
INSERT INTO `article` VALUES ('10068', '10003', 'Spring讲解-----------表达式语言', '\n\n<h2 style=\"line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n5.1&nbsp;&nbsp;概述</h2>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n5.1.1&nbsp; 概述</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Spring表达式语言全称为“Spring Expression Language”，缩写为“SpEL”，类&#20284;于Struts2x中使用的OGNL表达式语言，能在运行时构建复杂表达式、存取对象图属性、对象方法调用等等，并且能与Spring功能完美整合，如能用来配置Bean定义。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 表达式语言给静态Java语言增加了动态功能。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SpEL是单独模块，只依赖于core模块，不依赖于其他模块，可以单独使用。</p>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n5.1.2&nbsp; 能干什么</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 表达式语言一般是用最简单的形式完成最主要的工作，减少我们的工作量。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SpEL支持如下表达式：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>一、基本表达式：</strong>字面量表达式、关系，逻辑与算数运算表达式、字符串连接及截取表达式、三目运算及Elivis表达式、正则表达式、括号优先级表达式；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>二、类相关表达式：</strong>类类型表达式、类实例化、instanceof表达式、变量定义及引用、赋&#20540;表达式、自定义函数、对象属性存取及安全导航表达式、对象方法调用、Bean引用；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>三、集合相关表达式：</strong>内联List、内联数组、集合，字典访问、列表，字典，数组修改、集合投影、集合选择；不支持多维内联数组初始化；不支持内联字典定义；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>四、其他表达式</strong>：模板表达式。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>注：SpEL表达式中的关键字是不区分大小写的。</strong></p>\n<h2 style=\"line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n5.2&nbsp; SpEL基础</h2>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n5.2.1&nbsp; HelloWorld</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 首先准备支持SpEL的Jar包：“org.springframework.expression-3.0.5.RELEASE.jar”将其添加到类路径中。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SpEL在求表达式&#20540;时一般分为四步，其中第三步可选：首先构造一个解析器，其次解析器解析字符串表达式，在此构造上下文，最后根据上下文得到表达式运算后的&#20540;。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 让我们看下代码片段吧：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">package</span>&nbsp;cn.javass.spring.chapter5;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">import</span>&nbsp;junit.framework.Assert;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">import</span>&nbsp;org.junit.Test;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">import</span>&nbsp;org.springframework.expression.EvaluationContext;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">import</span>&nbsp;org.springframework.expression.Expression;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">import</span>&nbsp;org.springframework.expression.ExpressionParser;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">import</span>&nbsp;org.springframework.expression.spel.standard.SpelExpressionParser;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">import</span>&nbsp;org.springframework.expression.spel.support.StandardEvaluationContext;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>&nbsp;SpELTest&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Test</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;helloWorld()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ExpressionParser&nbsp;parser&nbsp;=&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">new</span>&nbsp;SpelExpressionParser();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Expression&nbsp;expression&nbsp;=&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">parser.parseExpression(<span class=\"string\" style=\"color:blue\">&quot;(\'Hello\'&nbsp;&#43;&nbsp;\'&nbsp;World\').concat(#end)&quot;</span>);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EvaluationContext&nbsp;context&nbsp;=&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">new</span>&nbsp;StandardEvaluationContext();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context.setVariable(<span class=\"string\" style=\"color:blue\">&quot;end&quot;</span>,&nbsp;<span class=\"string\" style=\"color:blue\">&quot;!&quot;</span>);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Assert.assertEquals(<span class=\"string\" style=\"color:blue\">&quot;Hello&nbsp;World!&quot;</span>,&nbsp;expression.getValue(context));&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n接下来让我们分析下代码：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n1）创建解析器：SpEL使用ExpressionParser接口表示解析器，提供SpelExpressionParser默认实现；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n2）解析表达式：使用ExpressionParser的parseExpression来解析相应的表达式为Expression对象。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n3）构造上下文：准备比如变量定义等等表达式需要的上下文数据。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n4）求&#20540;：通过Expression接口的getValue方法根据上下文获得表达式&#20540;。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n是不是很简单，接下来让我们看下其具体实现及原理吧。</p>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n5.2.3&nbsp; SpEL原理及接口</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SpEL提供简单的接口从而简化用户使用，在介绍原理前让我们学习下几个概念：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>一、表达式：</strong>表达式是表达式语言的核心，所以表达式语言都是围绕表达式进行的，从我们角度来看是“干什么”；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>二、解析器：</strong>用于将字符串表达式解析为表达式对象，从我们角度来看是“谁来干”；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>三、上下文：</strong>表达式对象执行的环境，该环境可能定义变量、定义自定义函数、提供类型转换等等，从我们角度看是“在哪干”；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>四、根对象及活动上下文对象：</strong>根对象是默认的活动上下文对象，活动上下文对象表示了当前表达式操作的对象，从我们角度看是“对谁干”。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 理解了这些概念后，让我们看下SpEL如何工作的呢，如图5-1所示：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;<img alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/21/f9e368b5b0576e51708f468d8f1b936c__1.JPG\" style=\"border:0px\"></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n图5-1 工作原理</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1）首先定义表达式：“1&#43;2”；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2）定义解析器ExpressionParser实现，SpEL提供默认实现SpelExpressionParser；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2.1）SpelExpressionParser解析器内部使用Tokenizer类进行词法分析，即把字符串流分析为记号流，记号在SpEL使用Token类来表示；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2.2）有了记号流后，解析器便可根据记号流生成内部抽象语法树；在SpEL中语法树节点由SpelNode接口实现代表：如OpPlus表示加操作节点、IntLiteral表示int型字面量节点；使用SpelNodel实现组成了抽象语法树；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2.3）对外提供Expression接口来简化表示抽象语法树，从而隐藏内部实现细节，并提供getValue简单方法用于获取表达式&#20540;；SpEL提供默认实现为SpelExpression；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3）定义表达式上下文对象（可选），SpEL使用EvaluationContext接口表示上下文对象，用于设置根对象、自定义变量、自定义函数、类型转换器等，SpEL提供默认实现StandardEvaluationContext；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n4）使用表达式对象根据上下文对象（可选）求&#20540;（调用表达式对象的getValue方法）获得结果。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n接下来让我们看下SpEL的主要接口吧：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>1）ExpressionParser接口</strong>：表示解析器，默认实现是org.springframework.expression.spel.standard包中的SpelExpressionParser类，使用parseExpression方法将字符串表达式转换为Expression对象，对于ParserContext接口用于定义字符串表达式是不是模板，及模板开始与结束字符：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">interface</span>&nbsp;ExpressionParser&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Expression&nbsp;parseExpression(String&nbsp;expressionString);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Expression&nbsp;parseExpression(String&nbsp;expressionString,&nbsp;ParserContext&nbsp;context);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n来看下示例：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Test</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;testParserContext()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;ExpressionParser&nbsp;parser&nbsp;=&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">new</span>&nbsp;SpelExpressionParser();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;ParserContext&nbsp;parserContext&nbsp;=&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">new</span>&nbsp;ParserContext()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Override</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">boolean</span>&nbsp;isTemplate()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">return</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">true</span>;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Override</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;String&nbsp;getExpressionPrefix()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">return</span>&nbsp;<span class=\"string\" style=\"color:blue\">&quot;#{&quot;</span>;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Override</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;String&nbsp;getExpressionSuffix()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">return</span>&nbsp;<span class=\"string\" style=\"color:blue\">&quot;}&quot;</span>;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;template&nbsp;=&nbsp;<span class=\"string\" style=\"color:blue\">&quot;#{\'Hello&nbsp;\'}#{\'World!\'}&quot;</span>;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;Expression&nbsp;expression&nbsp;=&nbsp;parser.parseExpression(template,&nbsp;parserContext);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;Assert.assertEquals(<span class=\"string\" style=\"color:blue\">&quot;Hello&nbsp;World!&quot;</span>,&nbsp;expression.getValue());&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n在此我们演示的是使用ParserContext的情况，此处定义了ParserContext实现：定义表达式是模块，表达式前缀为“#{”，后缀为“}”；使用parseExpression解析时传入的模板必须以“#{”开头，以“}”结尾，如&quot;#{\'Hello \'}#{\'World!\'}&quot;。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n默认传入的字符串表达式不是模板形式，如之前演示的Hello World。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>2）EvaluationContext接口</strong>：表示上下文环境，默认实现是org.springframework.expression.spel.support包中的StandardEvaluationContext类，使用setRootObject方法来设置根对象，使用setVariable方法来注册自定义变量，使用registerFunction来注册自定义函数等等。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>3）Expression接口：</strong>表示表达式对象，默认实现是org.springframework.expression.spel.standard包中的SpelExpression，提供getValue方法用于获取表达式&#20540;，提供setValue方法用于设置对象&#20540;。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n了解了SpEL原理及接口，接下来的事情就是SpEL语法了。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<br>\n</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n</p>\n<h2 style=\"line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n5.3&nbsp; SpEL语法</h2>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n5.3.1&nbsp; 基本表达式</h3>\n<p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; font-family:verdana,arial,helvetica,sans-serif; line-height:1.5em\">\n<span style=\"line-height:1.5em; padding:0px; margin:0px\">一、字面量表达式：</span>&nbsp;SpEL支持的字面量包括：字符串、数字类型（int、long、float、double）、布尔类型、null类型。</p>\n<table cellpadding=\"0\" border=\"1\" cellspacing=\"0\" style=\"color:rgb(0,0,0); font-family:Helvetica,Tahoma,Arial,sans-serif; line-height:25.2000007629395px; font-size:12px; padding:0px; margin:0px\">\n<tbody>\n<tr style=\"padding:0px; margin:0px\">\n<td width=\"72\" style=\"font-size:1em; font-family:verdana,arial,helvetica,sans-serif; padding:0px; margin:0px\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; line-height:1.5em\">\n类型</p>\n</td>\n<td width=\"468\" style=\"font-size:1em; font-family:verdana,arial,helvetica,sans-serif; padding:0px; margin:0px\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; line-height:1.5em\">\n示例</p>\n</td>\n</tr>\n<tr style=\"padding:0px; margin:0px\">\n<td width=\"72\" style=\"font-size:1em; font-family:verdana,arial,helvetica,sans-serif; padding:0px; margin:0px\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; line-height:1.5em\">\n字符串</p>\n</td>\n<td width=\"468\" style=\"font-size:1em; font-family:verdana,arial,helvetica,sans-serif; padding:0px; margin:0px\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; line-height:1.5em\">\nString str1 = parser.parseExpression(&quot;\'Hello World!\'&quot;).getValue(String.class);</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; line-height:1.5em\">\nString str2 = parser.parseExpression(&quot;\\&quot;Hello World!\\&quot;&quot;).getValue(String.class);</p>\n</td>\n</tr>\n<tr style=\"padding:0px; margin:0px\">\n<td width=\"72\" style=\"font-size:1em; font-family:verdana,arial,helvetica,sans-serif; padding:0px; margin:0px\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; line-height:1.5em\">\n数字类型</p>\n</td>\n<td width=\"468\" style=\"font-size:1em; font-family:verdana,arial,helvetica,sans-serif; padding:0px; margin:0px\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; line-height:1.5em\">\nint int1 = parser.parseExpression(&quot;1&quot;).getValue(Integer.class);</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; line-height:1.5em\">\nlong long1 = parser.parseExpression(&quot;-1L&quot;).getValue(long.class);</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; line-height:1.5em\">\nfloat float1 = parser.parseExpression(&quot;1.1&quot;).getValue(Float.class);</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; line-height:1.5em\">\ndouble double1 = parser.parseExpression(&quot;1.1E&#43;2&quot;).getValue(double.class);</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; line-height:1.5em\">\nint hex1 = parser.parseExpression(&quot;0xa&quot;).getValue(Integer.class);</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; line-height:1.5em\">\nlong hex2 = parser.parseExpression(&quot;0xaL&quot;).getValue(long.class);</p>\n</td>\n</tr>\n<tr style=\"padding:0px; margin:0px\">\n<td width=\"72\" style=\"font-size:1em; font-family:verdana,arial,helvetica,sans-serif; padding:0px; margin:0px\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; line-height:1.5em\">\n布尔类型</p>\n</td>\n<td width=\"468\" style=\"font-size:1em; font-family:verdana,arial,helvetica,sans-serif; padding:0px; margin:0px\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; line-height:1.5em\">\nboolean true1 = parser.parseExpression(&quot;true&quot;).getValue(boolean.class);</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; line-height:1.5em\">\nboolean false1 = parser.parseExpression(&quot;false&quot;).getValue(boolean.class);</p>\n</td>\n</tr>\n<tr style=\"padding:0px; margin:0px\">\n<td width=\"72\" style=\"font-size:1em; font-family:verdana,arial,helvetica,sans-serif; padding:0px; margin:0px\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; line-height:1.5em\">\nnull类型</p>\n</td>\n<td width=\"468\" style=\"font-size:1em; font-family:verdana,arial,helvetica,sans-serif; padding:0px; margin:0px\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; line-height:1.5em\">\nObject null1 = parser.parseExpression(&quot;null&quot;).getValue(Object.class);</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; font-family:verdana,arial,helvetica,sans-serif; line-height:1.5em\">\n<span style=\"line-height:1.5em; padding:0px; margin:0px\">&nbsp;</span></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; font-family:verdana,arial,helvetica,sans-serif; line-height:1.5em\">\n<span style=\"line-height:1.5em; padding:0px; margin:0px\">二、算数运算表达式：</span>&nbsp;SpEL支持加(&#43;)、减(-)、乘(*)、除(/)、求余（%）、幂（^）运算。</p>\n<table cellpadding=\"0\" border=\"1\" cellspacing=\"0\" style=\"color:rgb(0,0,0); font-family:Helvetica,Tahoma,Arial,sans-serif; line-height:25.2000007629395px; font-size:12px; padding:0px; margin:0px\">\n<tbody>\n<tr style=\"padding:0px; margin:0px\">\n<td width=\"72\" style=\"font-size:1em; font-family:verdana,arial,helvetica,sans-serif; padding:0px; margin:0px\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; line-height:1.5em\">\n类型</p>\n</td>\n<td width=\"468\" style=\"font-size:1em; font-family:verdana,arial,helvetica,sans-serif; padding:0px; margin:0px\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; line-height:1.5em\">\n示例</p>\n</td>\n</tr>\n<tr style=\"padding:0px; margin:0px\">\n<td width=\"72\" style=\"font-size:1em; font-family:verdana,arial,helvetica,sans-serif; padding:0px; margin:0px\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; line-height:1.5em\">\n加减乘除</p>\n</td>\n<td width=\"468\" style=\"font-size:1em; font-family:verdana,arial,helvetica,sans-serif; padding:0px; margin:0px\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; line-height:1.5em\">\nint result1 = parser.parseExpression(&quot;1&#43;2-3*4/2&quot;).getValue(Integer.class);//-3</p>\n</td>\n</tr>\n<tr style=\"padding:0px; margin:0px\">\n<td width=\"72\" style=\"font-size:1em; font-family:verdana,arial,helvetica,sans-serif; padding:0px; margin:0px\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; line-height:1.5em\">\n求余</p>\n</td>\n<td width=\"468\" style=\"font-size:1em; font-family:verdana,arial,helvetica,sans-serif; padding:0px; margin:0px\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; line-height:1.5em\">\nint result2 = parser.parseExpression(&quot;4%3&quot;).getValue(Integer.class);//1</p>\n</td>\n</tr>\n<tr style=\"padding:0px; margin:0px\">\n<td width=\"72\" style=\"font-size:1em; font-family:verdana,arial,helvetica,sans-serif; padding:0px; margin:0px\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; line-height:1.5em\">\n幂运算</p>\n</td>\n<td width=\"468\" style=\"font-size:1em; font-family:verdana,arial,helvetica,sans-serif; padding:0px; margin:0px\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; line-height:1.5em\">\nint result3 = parser.parseExpression(&quot;2^3&quot;).getValue(Integer.class);//8</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; font-family:verdana,arial,helvetica,sans-serif; line-height:1.5em\">\nSpEL还提供求余（MOD）和除（DIV）而外两个运算符，与“%”和“/”等价，不区分大小写。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; font-family:verdana,arial,helvetica,sans-serif; line-height:1.5em\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; font-family:verdana,arial,helvetica,sans-serif; line-height:1.5em\">\n<span style=\"line-height:1.5em; padding:0px; margin:0px\">三、关系表达式：</span>等于（==）、不等于(!=)、大于(&gt;)、大于等于(&gt;=)、小于(&lt;)、小于等于(&lt;=)，区间（between）运算，如“parser.parseExpression(&quot;1&gt;2&quot;).getValue(boolean.class);”将返回false；而“parser.parseExpression(&quot;1 between {1, 2}&quot;).getValue(boolean.class);”将返回true。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; font-family:verdana,arial,helvetica,sans-serif; line-height:1.5em\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; between运算符右边操作数必须是列表类型，且只能包含2个元素。第一个元素为开始，第二个元素为结束，区间运算是包含边界&#20540;的，即 xxx&gt;=list.get(0) &amp;&amp; xxx&lt;=list.get(1)。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; font-family:verdana,arial,helvetica,sans-serif; line-height:1.5em\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SpEL同样提供了等价的“EQ” 、“NE”、 “GT”、“GE”、 “LT” 、“LE”来表示等于、不等于、大于、大于等于、小于、小于等于，不区分大小写。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; font-family:verdana,arial,helvetica,sans-serif; line-height:1.5em\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; font-family:verdana,arial,helvetica,sans-serif; line-height:1.5em\">\n<span style=\"line-height:1.5em; padding:0px; margin:0px\">四、逻辑表达式：</span>且（and）、或(or)、非(!或NOT)。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; font-family:verdana,arial,helvetica,sans-serif; line-height:1.5em\">\n&nbsp;</p>\n<div style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; line-height:25.2000007629395px; margin:0px auto; padding:0px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-size:14px; font-weight:bold; font-family:\'arial black\',\'avant garde\'; padding:0px; margin:0px\">java代码：</span>\n<div class=\"dp-highlighter\" style=\"font-family:Consolas,\'Courier New\',Courier,mono,serif; width:671px; overflow:auto; padding:1px 0px 0px; word-break:break-all; word-wrap:break-word; border-width:0px; margin:18px 0px!important; background-color:rgb(231,229,220)\">\n<div class=\"bar\" style=\"padding:0px 0px 0px 45px; margin:0px auto; border-width:0px\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\"><a target=\"_blank\" href=\"http://sishuok.com/forum/blogPost/list/2463.html\" style=\"color:rgb(160,160,160); text-decoration:none; margin:0px 10px 0px 0px; font-size:9px; padding:0px; background-color:inherit\">查看</a><a target=\"_blank\" href=\"http://sishuok.com/forum/blogPost/list/2463.html\" style=\"color:rgb(160,160,160); text-decoration:none; margin:0px 10px 0px 0px; font-size:9px; padding:0px; background-color:inherit\">复制到剪贴板</a><a target=\"_blank\" href=\"http://sishuok.com/forum/blogPost/list/2463.html\" style=\"color:rgb(160,160,160); text-decoration:none; margin:0px 10px 0px 0px; font-size:9px; padding:0px; background-color:inherit\">打印</a></div>\n</div>\n<ol class=\"dp-j\" style=\"line-height:1.4em; padding:0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; background-color:rgb(255,255,255)\">\n<li class=\"alt\" style=\"border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); line-height:14px; margin:0px!important; padding:0px 3px 0px 10px!important\">\n<span style=\"color:black; padding:0px; margin:0px; background-color:inherit\"><span style=\"padding:0px; margin:0px; background-color:inherit\">String&nbsp;expression1&nbsp;=&nbsp;</span><span class=\"string\" style=\"color:blue; padding:0px; margin:0px; background-color:inherit\">&quot;2&gt;1&nbsp;and&nbsp;(!true&nbsp;or&nbsp;!false)&quot;</span><span style=\"padding:0px; margin:0px; background-color:inherit\">;&nbsp;&nbsp;</span></span></li><li style=\"border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); line-height:14px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)\">\n<span style=\"color:black; padding:0px; margin:0px; background-color:inherit\"><span class=\"keyword\" style=\"color:rgb(0,102,153); font-weight:bold; padding:0px; margin:0px; background-color:inherit\">boolean</span><span style=\"padding:0px; margin:0px; background-color:inherit\">&nbsp;result1&nbsp;=&nbsp;parser.parseExpression(expression1).getValue(</span><span class=\"keyword\" style=\"color:rgb(0,102,153); font-weight:bold; padding:0px; margin:0px; background-color:inherit\">boolean</span><span style=\"padding:0px; margin:0px; background-color:inherit\">.</span><span class=\"keyword\" style=\"color:rgb(0,102,153); font-weight:bold; padding:0px; margin:0px; background-color:inherit\">class</span><span style=\"padding:0px; margin:0px; background-color:inherit\">);&nbsp;&nbsp;</span></span></li><li class=\"alt\" style=\"border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); line-height:14px; margin:0px!important; padding:0px 3px 0px 10px!important\">\n<span style=\"color:black; padding:0px; margin:0px; background-color:inherit\">Assert.assertEquals(<span class=\"keyword\" style=\"color:rgb(0,102,153); font-weight:bold; padding:0px; margin:0px; background-color:inherit\">true</span><span style=\"padding:0px; margin:0px; background-color:inherit\">,&nbsp;result1);&nbsp;&nbsp;</span></span></li><li style=\"border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); line-height:14px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)\">\n<span style=\"color:black; padding:0px; margin:0px; background-color:inherit\">&nbsp;&nbsp;&nbsp;</span></li><li class=\"alt\" style=\"border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); line-height:14px; margin:0px!important; padding:0px 3px 0px 10px!important\">\n<span style=\"color:black; padding:0px; margin:0px; background-color:inherit\">String&nbsp;expression2&nbsp;=&nbsp;<span class=\"string\" style=\"color:blue; padding:0px; margin:0px; background-color:inherit\">&quot;2&gt;1&nbsp;and&nbsp;(NOT&nbsp;true&nbsp;or&nbsp;NOT&nbsp;false)&quot;</span><span style=\"padding:0px; margin:0px; background-color:inherit\">;&nbsp;&nbsp;</span></span></li><li style=\"border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); line-height:14px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)\">\n<span style=\"color:black; padding:0px; margin:0px; background-color:inherit\"><span class=\"keyword\" style=\"color:rgb(0,102,153); font-weight:bold; padding:0px; margin:0px; background-color:inherit\">boolean</span><span style=\"padding:0px; margin:0px; background-color:inherit\">&nbsp;result2&nbsp;=&nbsp;parser.parseExpression(expression2).getValue(</span><span class=\"keyword\" style=\"color:rgb(0,102,153); font-weight:bold; padding:0px; margin:0px; background-color:inherit\">boolean</span><span style=\"padding:0px; margin:0px; background-color:inherit\">.</span><span class=\"keyword\" style=\"color:rgb(0,102,153); font-weight:bold; padding:0px; margin:0px; background-color:inherit\">class</span><span style=\"padding:0px; margin:0px; background-color:inherit\">);&nbsp;&nbsp;</span></span></li><li class=\"alt\" style=\"border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); line-height:14px; margin:0px!important; padding:0px 3px 0px 10px!important\">\n<span style=\"color:black; padding:0px; margin:0px; background-color:inherit\">Assert.assertEquals(<span class=\"keyword\" style=\"color:rgb(0,102,153); font-weight:bold; padding:0px; margin:0px; background-color:inherit\">true</span><span style=\"padding:0px; margin:0px; background-color:inherit\">,&nbsp;result2);&nbsp;&nbsp;</span></span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; font-family:verdana,arial,helvetica,sans-serif; line-height:1.5em\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; font-family:verdana,arial,helvetica,sans-serif; line-height:1.5em\">\n注：<span style=\"line-height:1.5em; padding:0px; margin:0px\">逻辑运算符不支持&nbsp;Java中的 &amp;&amp;&nbsp;和 ||&nbsp;。</span></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; font-family:verdana,arial,helvetica,sans-serif; line-height:1.5em\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; font-family:verdana,arial,helvetica,sans-serif; line-height:1.5em\">\n<span style=\"line-height:1.5em; padding:0px; margin:0px\">五、字符串连接及截取表达式：</span>使用“&#43;”进行字符串连接，使用“\'String\'[0] [index]”来截取一个字符，目前只支持截取一个，如“\'Hello \' &#43; \'World!\'”得到“Hello World!”；而“\'Hello World!\'[0]”将返回“H”。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; font-family:verdana,arial,helvetica,sans-serif; line-height:1.5em\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; font-family:verdana,arial,helvetica,sans-serif; line-height:1.5em\">\n<span style=\"line-height:1.5em; padding:0px; margin:0px\">六、三目运算及Elivis运算表达式：</span></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; font-family:verdana,arial,helvetica,sans-serif; line-height:1.5em\">\n三目运算符&nbsp;<span style=\"line-height:1.5em; padding:0px; margin:0px\">“表达式1?表达式2:表达式3”</span>用于构造三目运算表达式，如“2&gt;1?true:false”将返回true；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; font-family:verdana,arial,helvetica,sans-serif; line-height:1.5em\">\nElivis运算符<span style=\"line-height:1.5em; padding:0px; margin:0px\">“表达式1?:表达式2”</span>从Groovy语言引入用于简化三目运算符的，当表达式1为非null时则返回表达式1，当表达式1为null时则返回表达式2，简化了三目运算符方式“表达式1? 表达式1:表达式2”，如“null?:false”将返回false，而“true?:false”将返回true；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; font-family:verdana,arial,helvetica,sans-serif; line-height:1.5em\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; font-family:verdana,arial,helvetica,sans-serif; line-height:1.5em\">\n<span style=\"line-height:1.5em; padding:0px; margin:0px\">七、正则表达式：</span>使用“str matches regex，如“\'123\' matches \'\\\\d{3}\'”将返回true；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; font-family:verdana,arial,helvetica,sans-serif; line-height:1.5em\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; font-family:verdana,arial,helvetica,sans-serif; line-height:1.5em\">\n<span style=\"line-height:1.5em; padding:0px; margin:0px\">八、括号优先级表达式：</span>使用“(表达式)”构造，括号里的具有高优先级。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; font-family:verdana,arial,helvetica,sans-serif; line-height:1.5em\">\n&nbsp;</p>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n5.3.3&nbsp; 类相关表达式</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; font-family:verdana,arial,helvetica,sans-serif; line-height:1.5em\">\n<span style=\"line-height:1.5em; padding:0px; margin:0px\">一、类类型表达式：</span>使用“T(Type)”来表示java.lang.Class实例，“Type”必须是类全限定名，“java.lang”包除外，即该包下的类可以不指定包名；使用类类型表达式还可以进行访问类静态方法及类静态字段。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; font-family:verdana,arial,helvetica,sans-serif; line-height:1.5em\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;具体使用方法如下：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-size:14px; font-family:verdana,arial,helvetica,sans-serif; line-height:1.5em\">\n&nbsp;</p>\n<div style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; line-height:25.2000007629395px; margin:0px auto; padding:0px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-size:14px; font-weight:bold; font-family:\'arial black\',\'avant garde\'; padding:0px; margin:0px\">java代码：</span>\n<div class=\"dp-highlighter\" style=\"font-family:Consolas,\'Courier New\',Courier,mono,serif; width:671px; overflow:auto; padding:1px 0px 0px; word-break:break-all; word-wrap:break-word; border-width:0px; margin:18px 0px!important; background-color:rgb(231,229,220)\">\n<div class=\"bar\" style=\"padding:0px 0px 0px 45px; margin:0px auto; border-width:0px\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\"><a target=\"_blank\" href=\"http://sishuok.com/forum/blogPost/list/2463.html\" style=\"color:rgb(160,160,160); text-decoration:none; margin:0px 10px 0px 0px; font-size:9px; padding:0px; background-color:inherit\">查看</a><a target=\"_blank\" href=\"http://sishuok.com/forum/blogPost/list/2463.html\" style=\"color:rgb(160,160,160); text-decoration:none; margin:0px 10px 0px 0px; font-size:9px; padding:0px; background-color:inherit\">复制到剪贴板</a><a target=\"_blank\" href=\"http://sishuok.com/forum/blogPost/list/2463.html\" style=\"color:rgb(160,160,160); text-decoration:none; margin:0px 10px 0px 0px; font-size:9px; padding:0px; background-color:inherit\">打印</a></div>\n</div>\n<ol class=\"dp-j\" style=\"line-height:1.4em; padding:0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(92,92,92); margin:0px 0px 1px 45px!important; background-color:rgb(255,255,255)\">\n<li class=\"alt\" style=\"border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); line-height:14px; margin:0px!important; padding:0px 3px 0px 10px!important\">\n<span style=\"color:black; padding:0px; margin:0px; background-color:inherit\"><span class=\"annotation\" style=\"color:rgb(100,100,100); padding:0px; margin:0px; background-color:inherit\">@Test</span><span style=\"padding:0px; margin:0px; background-color:inherit\">&nbsp;&nbsp;</span></span></li><li style=\"border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); line-height:14px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)\">\n<span style=\"color:black; padding:0px; margin:0px; background-color:inherit\"><span class=\"keyword\" style=\"color:rgb(0,102,153); font-weight:bold; padding:0px; margin:0px; background-color:inherit\">public</span><span style=\"padding:0px; margin:0px; background-color:inherit\">&nbsp;</span><span class=\"keyword\" style=\"color:rgb(0,102,153); font-weight:bold; padding:0px; margin:0px; background-color:inherit\">void</span><span style=\"padding:0px; margin:0px; background-color:inherit\">&nbsp;testClassTypeExpression()&nbsp;{&nbsp;&nbsp;</span></span></li><li class=\"alt\" style=\"border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); line-height:14px; margin:0px!important; padding:0px 3px 0px 10px!important\">\n<span style=\"color:black; padding:0px; margin:0px; background-color:inherit\">&nbsp;&nbsp;&nbsp;&nbsp;ExpressionParser&nbsp;parser&nbsp;=&nbsp;<span class=\"keyword\" style=\"color:rgb(0,102,153); font-weight:bold; padding:0px; margin:0px; background-color:inherit\">new</span><span style=\"padding:0px; margin:0px; background-color:inherit\">&nbsp;SpelExpressionParser();&nbsp;&nbsp;</span></span></li><li style=\"border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); line-height:14px; margin:0px!important; padding:0px 3px 0px 10px!important; background-color:rgb(248,248,248)\">\n<span style=\"color:black; padding:0px; margin:0px; background-color:inherit\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px; background-color:inherit\">//java.lang包类访问</span><span style=\"padding:0px; margin:0px; background-color:inherit\">&nbsp;&nbsp;</span></span></li><li class=\"alt\" style=\"border-left-width:3px; border-style:none none none solid; border-left-color:rgb(108,226,108); line-height:14px; margin:0px!important; padding:0px 3px 0px 10px!important\">\n<span', '2016-04-16 01:21:17', '0');
INSERT INTO `article` VALUES ('10069', '10003', 'SpringMVC入门案例（2）', '\n<p align=\"center\"><span style=\"color:black;\">以下这个学习案例是我最近学习</span><span style=\"color:black;\">Spring MVC</span><span style=\"color:black;\">时跟从一本书上的示例，原文中的示例代码有一些小错误，不过我在调试的过程中已经给予了修正，如还有其它错误，还请各位批评指正。</span></p><p align=\"left\"><span style=\"color:black;\">对于现有较成熟的</span><span style=\"color:black;\">Model-View-Control(MVC)</span><span style=\"color:black;\">框架而言，其解决的主要问题无外乎下</span></p><p align=\"left\"><span style=\"color:black;\">面几部分：</span></p><p align=\"left\"><p align=\"left\"><span style=\"color:black;\">1</span><span style=\"color:black;\">． 将</span><span style=\"color:black;\">Web</span><span style=\"color:black;\">页面中的输入元素封装为一个（请求）数据对象。</span></p><p align=\"left\"><span style=\"color:black;\">2</span><span style=\"color:black;\">． 根据请求的不同，调度相应的逻辑处理单元，并将（请求）数据对象作为参数传入。</span></p><p align=\"left\"><span style=\"color:black;\">3</span><span style=\"color:black;\">． 逻辑处理单元完成运算后，返回一个结果数据对象。</span></p><p align=\"left\"><span style=\"color:black;\">4</span><span style=\"color:black;\">． 将结果数据对象中的数据与预先设计的表现层相融合并展现给用户。</span></p><p align=\"left\"><span style=\"color:black;\">各个</span><span style=\"color:black;\">MVC </span><span style=\"color:black;\">实现固然存在差异，但其中的关键流程大致如上。结合一个实例，我们来看看这</span></p><p align=\"left\"><span style=\"color:black;\">几个关键流程在</span><span style=\"color:black;\">Spring MVC</span><span style=\"color:black;\">框架中的处理手法。</span></p><p align=\"left\"><span style=\"color:black;\">下面的实例，实现了一个常见的用户登录逻辑，即用户通过用户名和密码登录，系统对用</span></p><p align=\"left\"><span style=\"color:black;\">户名和密码进行检测，如果正确，则在页面上显示几条通知信息。如果登录失败，则返回失败</span></p><p align=\"left\"><span style=\"color:black;\">界面。</span></p><p align=\"left\"><span style=\"color:black;\">(</span><span style=\"color:black;\">示例中，表示层以</span><span style=\"color:black;\">JSP2.0</span><span style=\"color:black;\">实现。</span><span style=\"color:black;\">)</span></p><p align=\"left\"><span style=\"color:black;\">出于简洁考虑，这里的“用户名</span><span style=\"color:black;\">/</span><span style=\"color:black;\">密码”检测以及通知信息的生成均在代码中以硬编码实现。</span></p><p align=\"left\"><span style=\"font-family:宋体;\"><strong><span style=\"color:black;\">首先来看登录界面</span></strong><span style=\"color:black;\">：</span></span></p><p align=\"left\"><span style=\"color:black;\">对应的</span><span style=\"color:black;\">index.html:</span></p><strong><span style=\"color:green;\"></span></strong><pre class=\"html\" name=\"code\">&lt;html&gt;\n\n&lt;body&gt;\n\n&lt;form method=&quot;POST&quot; action=&quot;login.do&quot;&gt;\n\n&lt;p align=&quot;center&quot;&gt;登录&lt;/p&gt;\n\n&lt;br&gt;\n\n用户名:\n\n&lt;input type=&quot;text&quot; name=&quot;username&quot; &gt;\n\n&lt;br&gt;\n\n密 码 :\n\n&lt;input type=&quot;password&quot; name=&quot;password&quot; &gt;\n\n&lt;br&gt;\n\n&lt;p&gt;\n\n&lt;input type=&quot;submit&quot; value=&quot;提交&quot; name=&quot;B1&quot;&gt;\n\n&lt;input type=&quot;reset&quot; value=&quot;重置&quot; name=&quot;B2&quot;&gt;\n\n&lt;/p&gt;\n\n&lt;/form&gt;\n\n&lt;/body&gt;\n\n&lt;/html&gt;\n</pre><p align=\"left\"><br></p><p align=\"left\"><p align=\"left\"><p align=\"left\"><img align=\"\" alt=\"\" src=\"http://p.blog.csdn.net/images/p_blog_csdn_net/yinianshen/EntryImages/20081123/login.jpg\"><br></p><p align=\"left\"><span style=\"color:black;\">很简单的一个登录界面，其中包含了一个用以输入用户名密码的</span><span style=\"color:black;\">form</span><span style=\"color:black;\">，针对此</span><span style=\"color:black;\">form</span><span style=\"color:black;\">的提</span></p><p align=\"left\"><span style=\"color:black;\">交将被发送到</span><strong><span style=\"color:#03c80;\">&quot;login.do&quot;</span></strong></p><p align=\"left\"><span style=\"color:black;\">MVC </span><span style=\"color:black;\">关键流程的第一步，即收集页面输入参数，并转换为请求数据对象。这个静态页面提</span></p><p align=\"left\"><span style=\"color:black;\">供了一个基本的输入界面，下面这些输入的数据将被发送至何处，将如何被转换为请求数据对</span></p><p align=\"left\"><span style=\"color:black;\">象？</span></p><p align=\"left\"><span style=\"font-family:宋体;\"><strong><span style=\"color:black;\">现在来看接下来发发生的事情</span></strong><span style=\"color:black;\">：</span></span></p><p align=\"left\"><span style=\"color:black;\">当用户输入用户名密码提交之后，此请求被递交给</span><span style=\"color:black;\">Web </span><span style=\"color:black;\">服务器处理，上面我们设定</span><span style=\"color:black;\">form</span></p><p align=\"left\"><span style=\"color:black;\">提交目标为</span><strong><span style=\"color:#03c80;\">&quot;login.do&quot;</span></strong><span style=\"color:black;\">，那么</span><span style=\"color:black;\">Web</span><span style=\"color:black;\">服务器将如何处理这个请求？</span></p><p align=\"left\"><span style=\"color:black;\">显然，标准</span><span style=\"color:black;\">Http </span><span style=\"color:black;\">协议中，并没有以</span><span style=\"color:black;\">.do </span><span style=\"color:black;\">为后缀的服务资源，这是我们自己定义的一种请</span></p><p align=\"left\"><span style=\"color:black;\">求匹配模式。此模式在</span><span style=\"color:black;\">web.xml</span><span style=\"color:black;\">中设定：</span></p><span style=\"color:gray;\"></span><pre class=\"html\" name=\"code\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;\n\n&lt;web-app xmlns=&quot;http://java.sun.com/xml/ns/j2ee&quot;\n\nxmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n\nxsi:schemaLocation=&quot;http://java.sun.com/xml/ns/j2ee\n\nhttp://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;\n\nversion=&quot;2.4&quot;&gt;\n\n&lt;servlet&gt; ⑴\n\n&lt;servlet-name&gt;Dispatcher&lt;/servlet-name&gt;\n\n&lt;servlet-class&gt;\n\norg.springframework.web.servlet.DispatcherServlet\n\n&lt;/servlet-class&gt;\n\n&lt;init-param&gt;\n\n&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n\n&lt;param-value&gt;/WEB-INF/Config.xml&lt;/param-value&gt;\n\n&lt;/init-param&gt;\n\n&lt;/servlet&gt;\n\n&lt;servlet-mapping&gt; ⑵\n\n&lt;servlet-name&gt;Dispatcher&lt;/servlet-name&gt;\n\n&lt;url-pattern&gt;*.do&lt;/url-pattern&gt;\n\n&lt;/servlet-mapping&gt;\n\n&lt;/web-app&gt;\n</pre><p align=\"left\"><br></p><p align=\"left\"><p align=\"left\"><strong><span style=\"color:black;\"><span style=\"font-family:宋体;\">⑴ </span></span></strong><span style=\"color:black;\">Servlet</span><span style=\"color:black;\">定义</span></p><p align=\"left\"><span style=\"color:black;\">这里我们定义了请求分发</span><span style=\"color:black;\">Servlet</span><span style=\"color:black;\">，即：</span></p><p align=\"left\"><strong><span style=\"color:black;\">org.springframework.web.servlet.DispatcherServlet</span></strong></p><p align=\"left\"><strong><span style=\"color:black;\">DispatcherServlet </span></strong><span style=\"color:black;\">是</span><span style=\"color:black;\">Spring MVC </span><span style=\"color:black;\">中负责请</span><span style=\"font-family:宋体;\"><span style=\"color:black;\">_____</span><span style=\"color:black;\">求</span></span><span style=\"color:black;\">调度的核心引擎，所有的请求将</span></p><p align=\"left\"><span style=\"color:black;\">由此</span><span style=\"color:black;\">Servlet </span><span style=\"color:black;\">根据配置分发至各个逻辑处理单元。其内部同时也维护了一个</span></p><p align=\"left\"><span style=\"color:black;\">ApplicationContext</span><span style=\"color:black;\">实例。</span></p><p align=\"left\"><span style=\"color:black;\">我们在</span><strong><span style=\"color:#80040;\">&lt;init-param&gt;</span></strong><span style=\"color:black;\">节点中配置了名为“</span><strong><span style=\"color:black;\">contextConfigLocation</span></strong><span style=\"color:black;\">”的</span></p><p align=\"left\"><span style=\"color:black;\">Servlet</span><span style=\"color:black;\">参数，此参数指定了</span><span style=\"color:black;\">Spring</span><span style=\"color:black;\">配置文件的位置“</span><strong><span style=\"color:black;\">/WEB-INF/Config.xml</span></strong><span style=\"color:black;\">”。</span></p><p align=\"left\"><span style=\"color:black;\">如果忽略此设定，则默认为“</span><strong><span style=\"color:black;\">/WEB-INF/&lt;servlet name&gt;-servlet.xml</span></strong><span style=\"color:black;\">”，其</span></p><p align=\"left\"><span style=\"color:black;\">中</span><strong><span style=\"color:black;\">&lt;servlet name&gt;</span></strong><span style=\"color:black;\">以</span><span style=\"color:black;\">Servlet </span><span style=\"color:black;\">名替换（在当前环境下，默认值也就是</span></p><p align=\"left\"><span style=\"color:black;\">“</span><strong><span style=\"color:black;\">/WEB-INF/Dispatcher-servlet.xml</span></strong><span style=\"color:black;\">）。</span></p><p align=\"left\"><strong><span style=\"color:black;\"><span style=\"font-family:宋体;\">⑵ 请求映射</span></span></strong></p><p align=\"left\"><span style=\"color:black;\">我们将所有以</span><span style=\"color:black;\">.do</span><span style=\"color:black;\">结尾的请求交给</span><span style=\"color:black;\">Spring MVC</span><span style=\"color:black;\">进行处理。当然，也可以设为其他值，</span></p><p align=\"left\"><span style=\"color:black;\">如</span><span style=\"color:black;\">.action</span><span style=\"color:black;\">、</span><span style=\"color:black;\">.action</span><span style=\"color:black;\">等。</span></p><p align=\"left\"><span style=\"color:black;\">通过以上设定，</span><span style=\"color:black;\">Web </span><span style=\"color:black;\">服务器将把登录界面提交的请求转交给</span><span style=\"color:black;\">Dispatcher </span><span style=\"color:black;\">处理，</span></p><p align=\"left\"><span style=\"color:black;\">Dispatcher</span><span style=\"color:black;\">将提取请求（</span><span style=\"color:black;\">HttpServletRequest</span><span style=\"color:black;\">）中的输入数据，分发给对应的处理单元，</span></p><p align=\"left\"><span style=\"color:black;\">各单元处理完毕后，将输出页面返回给</span><span style=\"color:black;\">Web</span><span style=\"color:black;\">服务器，再由</span><span style=\"color:black;\">Web</span><span style=\"color:black;\">服务器返回给用户浏览器。</span></p><p align=\"left\"><span style=\"color:black;\">Dispatcher </span><span style=\"color:black;\">根据什么分发这些请求？显然，我们还需要一个配置文件加以设定。这也就</span></p><p align=\"left\"><span style=\"color:black;\">是上面提及的</span><span style=\"color:black;\">Config.xml</span><span style=\"color:black;\">，此文件包含了所有的“请求</span><span style=\"color:black;\">/</span><span style=\"color:black;\">处理单元”关系映射设定，以及返回</span></p><p align=\"left\"><span style=\"color:black;\">时表现层的一些属性设置。</span></p><span style=\"color:gray;\"></span><pre class=\"html\" name=\"code\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;!DOCTYPE beans PUBLIC &quot;-//SPRING//DTD BEAN//EN&quot;\n\n&quot;http://www.springframework.org/dtd/spring-beans.dtd&quot;&gt;\n\n&lt;beans&gt;\n\n&lt;!--Definition of View Resolver --&gt;\n\n&lt;bean id=&quot;viewResolver&quot; ⑴\n\nclass=&quot;org.springframework.web.servlet.view.InternalResou\n\nrceViewResolver&quot;&gt;\n\n&lt;property name=&quot;viewClass&quot;&gt; ⑵\n\n&lt;value&gt;\n\norg.springframework.web.servlet.view.JstlView\n\n&lt;/value&gt;\n\n&lt;/property&gt;\n\n&lt;property name=&quot;prefix&quot;&gt; ⑶\n\n&lt;value&gt;\n\n/WEB-INF/view/\n\n&lt;/value&gt;\n\n&lt;/property&gt;\n\n&lt;property name=&quot;suffix&quot;&gt; ⑷\n\n&lt;value&gt;.jsp&lt;/value&gt;\n\n&lt;/property&gt;\n\n&lt;/bean&gt;\n\n&lt;!--Request Mapping --&gt;\n\n&lt;bean id=&quot;urlMapping&quot; ⑸\n\nclass=&quot;org.springframework.web.servlet.handler.SimpleUr\n\nlHandlerMapping&quot;&gt;\n\n&lt;property name=&quot;mappings&quot;&gt;\n\n&lt;props&gt;\n\n&lt;prop key=&quot;/login.do&quot;&gt;LoginAction&lt;/prop&gt;\n\n&lt;/props&gt;\n\n&lt;/property&gt;\n\n&lt;/bean&gt;\n\n&lt;!---Action Definition--&gt;\n\n&lt;bean id=&quot;LoginAction&quot; ⑹\n\nclass=&quot;net.xiaxin.action.LoginAction&quot;&gt;\n\n&lt;property name=&quot;commandClass&quot;&gt; ⑺\n\n&lt;value&gt;net.xiaxin.action.LoginInfo&lt;/value&gt;\n\n&lt;/property&gt;\n\n&lt;property name=&quot;fail_view&quot;&gt; ⑻\n\n&lt;value&gt;loginfail&lt;/value&gt;\n\n&lt;/property&gt;\n\n&lt;property name=&quot;success_view&quot;&gt;\n\n&lt;value&gt;main&lt;/value&gt;\n\n&lt;/property&gt;\n\n&lt;/bean&gt;\n\n&lt;/beans&gt;\n</pre><p align=\"left\"><br></p><p align=\"left\"><p align=\"left\"><strong><span style=\"color:black;\"><span style=\"font-family:宋体;\">⑴ </span></span></strong><span style=\"color:black;\">Resolver</span><span style=\"color:black;\">设定</span></p><p align=\"left\"><span style=\"color:black;\">Resolver</span><span style=\"color:black;\">将把输出结果与输出界面相融合，为表现层提供呈现资源。</span></p><p align=\"left\"><strong><span style=\"color:black;\"><span style=\"font-family:宋体;\">⑵ </span></span></strong><span style=\"color:#8080c0;\">View Resolver</span><span style=\"color:black;\">的</span><span style=\"color:#8080c0;\">viewClass</span><span style=\"color:#8080c0;\">参数</span></p><p align=\"left\"><span style=\"color:black;\">这里我们使用</span><span style=\"color:black;\">JSP</span><span style=\"color:black;\">页面作为输出，因此，设定为：</span></p><p align=\"left\"><strong><span style=\"color:black;\">org.springframework.web.servlet.view.JstlView</span></strong></p><p align=\"left\"><span style=\"color:black;\">其余可选的</span><span style=\"color:#8080c0;\">viewClass</span><span style=\"color:black;\">还有</span><span style=\"color:black;\">:</span></p><p align=\"left\"><span style=\"color:black;\">Ø </span><strong><span style=\"color:black;\">org.springframework.web.servlet.view.freemarker.FreeMarker</span></strong></p><p align=\"left\"><strong><span style=\"color:black;\">View</span></strong><span style=\"color:black;\">（用于基于</span><span style=\"color:black;\">FreeMarker</span><span style=\"color:black;\">模板的表现层实现）</span></p><p align=\"left\"><span style=\"color:black;\">Ø </span><strong><span style=\"color:black;\">org.springframework.web.servlet.view.velocity.VelocityView</span></strong></p><p align=\"left\"><span style=\"color:black;\">（用于基于</span><span style=\"color:black;\">velocity</span><span style=\"color:black;\">模板的表现层实现）</span></p><p align=\"left\"><span style=\"color:black;\">等。</span></p><p align=\"left\"><strong><span style=\"color:black;\"><span style=\"font-family:宋体;\">⑶⑷ </span></span></strong><span style=\"color:#8080c0;\">View Resolver</span><span style=\"color:black;\">的</span><span style=\"color:#8080c0;\">prefix</span><span style=\"color:black;\">和</span><span style=\"color:#8080c0;\">suffix</span><span style=\"color:black;\">参数</span></p><p align=\"left\"><span style=\"color:black;\">指定了表现层资源的前缀和后缀，运行时，</span><span style=\"color:black;\">Spring </span><span style=\"color:black;\">将为指定的表现层资源自动追加</span></p><p align=\"left\"><span style=\"color:black;\">前缀和后缀，以形成一个完整的资源路径。另参见</span><strong><span style=\"color:black;\"><span style=\"font-family:宋体;\">⑻</span></span></strong></p><p align=\"left\"><span style=\"font-family:宋体;\"><strong><span style=\"color:black;\">⑸ “</span></strong><span style=\"color:black;\">请求</span></span><span style=\"color:black;\">/</span><span style=\"color:black;\">处理单元”关系映射</span></p><p align=\"left\"><span style=\"color:black;\">可以看到，这里我们将“</span><span style=\"color:#8080c0;\">/login.do</span><span style=\"color:black;\">”请求映射到处理单元</span><span style=\"color:black;\">LoginAction</span><span style=\"color:black;\">。</span></p><p align=\"left\"><strong><span style=\"color:#80040;\">&lt;props&gt;</span></strong><span style=\"color:black;\">节点下可以有多个映射关系存在，目前我们只定义了一个。</span></p><p align=\"left\"><strong><span style=\"color:black;\"><span style=\"font-family:宋体;\">⑹ </span></span></strong><span style=\"color:black;\">LoginAction</span><span style=\"color:black;\">定义</span></p><p align=\"left\"><span style=\"color:black;\">这里定义了逻辑处理单元</span><span style=\"color:black;\">LoginAction </span><span style=\"color:black;\">的具体实现，这里，</span><span style=\"color:black;\">LoginAction </span><span style=\"color:black;\">的实现</span></p><p align=\"left\"><span style=\"color:black;\">类为</span><span style=\"color:#8080c0;\">net.xiaxin.action.LoginAction</span><span style=\"color:black;\">。</span></p><p align=\"left\"><strong><span style=\"color:black;\"><span style=\"font-family:宋体;\">⑺ </span></span></strong><span style=\"color:black;\">LoginAction</span><span style=\"color:black;\">的请求数据对象</span></p><p align=\"left\"><span style=\"color:#8080c0;\">commandClass </span><span style=\"color:black;\">参数源于</span><span style=\"color:black;\">LoginAction </span><span style=\"color:black;\">的基类</span><span style=\"color:black;\">BaseCommandController</span><span style=\"color:black;\">，</span></p><p align=\"left\"><span style=\"color:black;\">BaseCommandControlle </span><span style=\"color:black;\">包含了请求数据封装和验证方法</span></p><p align=\"left\"><span style=\"color:black;\">（ </span><span style=\"color:black;\">BaseCommandController.bindAndValidate </span><span style=\"color:black;\">） ， 它将根据传入的</span></p><p align=\"left\"><span style=\"color:black;\">HttpServletRequest</span><span style=\"color:black;\">构造请求数据对象。</span></p><p align=\"left\"><span style=\"color:black;\">这里我们指定</span><span style=\"color:black;\">commandClass </span><span style=\"color:black;\">为</span><strong><span style=\"color:black;\">net.xiaxin.action.LoginInfo</span></strong><span style=\"color:black;\">，这是一个非</span></p><p align=\"left\"><span style=\"color:black;\">常简单的</span><span style=\"color:black;\">Java Bean</span><span style=\"color:black;\">，它封装了登录请求所需的数据内容：</span></p><strong><span style=\"color:black;\"></span></strong><pre class=\"java\" name=\"code\">public class LoginInfo {\n\nprivate String username;\n\nprivate String password;\n\npublic String getPassword() {\n\nreturn password;\n\n}\n\npublic void setPassword(String password) {\n\nthis.password = password;\n\n}\n\npublic String getUsername() {\n\nreturn username;\n\n}\n\npublic void setUsername(String username) {\n\nthis.username = username;\n\n}\n\n}\n</pre><p align=\"left\"><br></p><p align=\"left\"><p align=\"left\"><p align=\"left\"><span style=\"color:black;\">Spring</span><span style=\"color:black;\">会根据</span><span style=\"color:black;\">LoginAction</span><span style=\"color:black;\">的</span><span style=\"color:black;\">commandClass</span><span style=\"color:black;\">定义自动加载对应的</span><span style=\"color:black;\">LoginInfo</span></p><p align=\"left\"><span style=\"color:black;\">实例。</span></p><p align=\"left\"><span style=\"color:black;\">之后，对</span><span style=\"color:black;\">Http </span><span style=\"color:black;\">请求中的参数进行遍历，并查找</span><span style=\"color:black;\">LoginInfo </span><span style=\"color:black;\">对象中是否存在与之同</span></p><p align=\"left\"><span style=\"color:black;\">名的属性，如果找到，则将此参数值复制到</span><span style=\"color:black;\">LoginInfo</span><span style=\"color:black;\">对象的同名属性中</span><span style=\"color:black;\">.</span></p><p align=\"left\"><span style=\"color:black;\">请求数据转换完成之后，我们得到了一个封装了所有请求参数的</span><span style=\"color:black;\">Java </span><span style=\"color:black;\">对象，并将此</span></p><p align=\"left\"><span style=\"color:black;\">对象作为输入参数传递给</span><span style=\"color:black;\">LoginAction</span><span style=\"color:black;\">。</span></p><p align=\"left\"><span style=\"font-family:宋体;\"><strong><span style=\"color:black;\">⑻ </span></strong><span style=\"color:black;\">返回视图定义</span></span></p><p align=\"left\"><span style=\"color:black;\">对于这里的</span><span style=\"color:black;\">LoginAction </span><span style=\"color:black;\">而言，有两种返回结果，即登录失败时返回错误界面，登</span></p><p align=\"left\"><span style=\"color:black;\">录成功时进入系统主界面。</span></p><p align=\"left\"><span style=\"color:black;\">对应我们配置了</span><span style=\"color:#8080c0;\">fail_view</span><span style=\"color:black;\">、</span><span style=\"color:#8080c0;\">success_view</span><span style=\"color:black;\">两个自定义参数。</span></p><p align=\"left\"><span style=\"color:black;\">参数值将由</span><span style=\"color:black;\">Resolver</span><span style=\"color:black;\">进行处理，为其加上前缀后缀，如对于</span><span style=\"color:#8080c0;\">fail_view</span><span style=\"color:black;\">而言，实</span></p><p align=\"left\"><span style=\"color:black;\">际的视图路径为</span><strong><span style=\"color:black;\">/WEB-INF/view/loginfail.jsp</span><span style=\"color:black;\"><span style=\"font-family:宋体;\">。</span></span></strong></p><p align=\"left\"><span style=\"color:black;\">之后，</span><span style=\"color:black;\">Resolver </span><span style=\"color:black;\">会将</span><span style=\"color:black;\">LoginAction</span><span style=\"color:black;\">的返回数据与视图相融合，返回最终的显示界</span></p><p align=\"left\"><span style=\"color:black;\">面。</span></p><p align=\"left\"><strong><span style=\"color:black;\"><span style=\"font-family:宋体;\">业务逻辑处理单元</span></span></strong><span style=\"color:black;\">:</span></p><span style=\"color:black;\"></span><pre class=\"java\" name=\"code\">LoginAction.java：\n\npublic class LoginAction extends SimpleFormController {\n\nprivate String fail_view;\n\nprivate String success_view;\n\nprotected ModelAndView onSubmit( ⑴\n\nObject cmd,\n\nBindException ex\n\n)throws Exception {\n\nLoginInfo loginInfo = (LoginInfo) cmd; ⑵\n\nHashMap result_map = new HashMap();\n\nif (login(loginInfo) == 0) {\n\nresult_map.put(&quot;logininfo&quot;, loginInfo);\n\nList msgList = new LinkedList();\n\nmsgList.add(&quot;msg1&quot;);\n\nmsgList.add(&quot;msg2&quot;);\n\nmsgList.add(&quot;msg3&quot;);\n\nresult_map.put(&quot;messages&quot;, msgList);\n\nreturn new\n\nModelAndView(this.getSuccess_view(), result_map); ⑶\n\n} else {\n\nresult_map.put(&quot;failmsg&quot;, new String(&quot;Sorry, you input the wrong username or password!&quot;));\n\nreturn new ModelAndView(this.getFail_view(), result_map);\n\n}\n\n}\n\nprivate int login(LoginInfo loginInfo) {\n\nif (&quot;Erica&quot;.equalsIgnoreCase(loginInfo.getUsername())\n\n&amp;&amp;&quot;mypass&quot;.equals(loginInfo.getPassword())) {\n\nreturn 0;\n\n}\n\nreturn 1;\n\n}\n\npublic String getFail_view() {\n\nreturn fail_view;\n\n}\n\npublic String getSuccess_view() {\n\nreturn success_view;\n\n}\n\npublic void setFail_view(String string) {\n\nfail_view = string;\n\n}\n\npublic void setSuccess_view(String string) {\n\nsuccess_view = string;\n\n}\n\n}\n</pre><p align=\"left\"><br></p><p align=\"left\"><p align=\"left\"><span style=\"color:black;\">其中：</span></p><p align=\"left\"><strong><span style=\"color:black;\"><span style=\"font-family:宋体;\">⑴ </span></span></strong><span style=\"color:black;\">onSubmit</span><span style=\"color:black;\">方法</span></p><p align=\"left\"><span style=\"color:black;\">我们在子类中覆盖了父类的</span><span style=\"color:black;\">onSubmit</span><span style=\"color:black;\">方法；而</span><span style=\"color:black;\">onSubmit</span><span style=\"color:black;\">方法用于处理业务请求。</span></p><p align=\"left\"><span style=\"color:black;\">负责数据封装和请求分发的</span><span style=\"color:black;\">Dispatcher</span><span style=\"color:black;\">，将对传入的</span><span style=\"color:black;\">HttpServletRequest</span><span style=\"color:black;\">进行</span></p><p align=\"left\"><span style=\"color:black;\">封装，形成请求数据对象，之后根据配置文件，调用对应业务逻辑类的入口方法（这</span></p><p align=\"left\"><span style=\"color:black;\">里就是</span><span style=\"color:black;\">LoginAction</span><span style=\"color:black;\">）的</span><span style=\"color:black;\">onSubmit()</span><span style=\"color:black;\">方法，并将请求数据对象及其他相关资源引</span></p><p align=\"left\"><span style=\"color:black;\">用传入。</span></p><p align=\"left\"><span style=\"color:black;\">protected ModelAndView onSubmit(</span></p><p align=\"left\"><span style=\"color:black;\">Object cmd,</span></p><p align=\"left\"><span style=\"color:black;\">BindException ex</span></p><p align=\"left\"><span style=\"color:black;\">)</span></p><p align=\"left\"><span style=\"color:black;\">onSubmit</span><span style=\"color:black;\">方法包含了两个参数：</span><span style=\"color:black;\">Object cmd</span><span style=\"color:black;\">和</span><span style=\"color:black;\">BindException ex</span><span style=\"color:black;\">。</span></p><p align=\"left\"><span style=\"color:black;\">前面曾经多次提到请求数据对象，这个名为</span><span style=\"color:black;\">cmd</span><span style=\"color:black;\">的</span><span style=\"color:black;\">Object</span><span style=\"color:black;\">型参数，正是传入的请求</span></p><p align=\"left\"><span style=\"color:black;\">数据对象的引用。</span></p><p align=\"left\"><span style=\"color:black;\">BindException ex</span><span style=\"color:black;\">参数则提供了数据绑定错误的跟踪机制。它作为错误描述工具，</span></p><p align=\"left\"><span style=\"color:black;\">用于向上层反馈错误信息。</span></p><p align=\"left\"><span style=\"color:black;\">在</span><span style=\"color:black;\">Spring MVC</span><span style=\"color:black;\">中，</span><span style=\"color:black;\">BindException</span><span style=\"color:black;\">将被向上层表现层反馈，以便在表现层统一处</span></p><p align=\"left\"><span style=\"color:black;\">理异常情况（如显示对应的错误提示），这一机制稍后在“输入参数合法性校验”部</span></p><p align=\"left\"><span style=\"color:black;\">分再具体探讨。</span></p><p align=\"left\"><span style=\"color:black;\">onSubmit</span><span style=\"color:black;\">还有另外一个签名版本：</span></p><span style=\"color:black;\"></span><pre class=\"java\" name=\"code\">protected ModelAndView onSubmit(\n\nHttpServletRequest request,\n\nHttpServletResponse response,\n\nObject cmd,\n\nBindException ex\n\n)\n</pre><p align=\"left\"><br></p><p align=\"left\"><p align=\"left\"><span style=\"color:black;\">可以看到，类似</span><span style=\"color:black;\">Servlet</span><span style=\"color:black;\">的</span><span style=\"color:black;\">doGet/doPost</span><span style=\"color:black;\">方法，此版本的</span><span style=\"color:black;\">onSubmit</span><span style=\"color:black;\">方法签名中</span></p><p align=\"left\"><span style=\"color:black;\">包含了</span><span style=\"color:black;\">Servlet</span><span style=\"color:black;\">规范中的</span><span style=\"color:black;\">HttpServletRequest</span><span style=\"color:black;\">、</span><span style=\"color:black;\">HttpServletResponse</span><span style=\"color:black;\">以提</span></p><p align=\"left\"><span style=\"color:black;\">供与</span><span style=\"color:black;\">Web</span><span style=\"color:black;\">服务器的交互功能（如</span><span style=\"color:black;\">Session</span><span style=\"color:black;\">的访问）。此参数类型的</span><span style=\"color:black;\">onSubmit</span><span style=\"color:black;\">方法</span></p><p align=\"left\"><span style=\"color:black;\">的调用优先级较高。也就是说，如果我们在子类中同时覆盖了这两个不同参数的</span></p><p align=\"left\"><span style=\"color:black;\">onSubmit</span><span style=\"color:black;\">方法，那么只有此版本的方法被执行，另一个将被忽略。</span></p><p align=\"left\"><span style=\"font-family:宋体;\"><strong><span style=\"color:black;\">⑵ </span></strong><span style=\"color:black;\">将输入的请求数据对象强制转型为预定义的请求对象类型。</span></span></p><p align=\"left\"><span style=\"font-family:宋体;\"><strong><span style=\"color:black;\">⑶ </span></strong><span style=\"color:black;\">返回处理结果</span></span></p><p align=\"left\"><span style=\"color:black;\">ModelAndView</span><span style=\"color:black;\">类包含了逻辑单元返回的结果数据集和表现层信息。</span><span style=\"color:black;\">ModelAndView</span></p><p align=\"left\"><span style=\"color:black;\">本身起到关系保存的作用。它将被传递给</span><span style=\"color:black;\">Dispatcher</span><span style=\"color:black;\">，由</span><span style=\"color:black;\">Dispatcher </span><span style=\"color:black;\">根据其中</span></p><p align=\"left\"><span style=\"color:black;\">保存的结果数据集和表现层设定合成最后的界面。</span></p><p align=\"left\"><span style=\"color:black;\">这里我们用到了两种签名版本的</span><span style=\"color:black;\">ModelAndView</span><span style=\"color:black;\">构造方法：</span></p><p align=\"left\"><span style=\"color:black;\">Ø </span><span style=\"color:black;\">public ModelAndView(String viewname)</span></p><p align=\"left\"><span style=\"color:black;\">返回界面无需通过结果数据集进行填充。</span></p><p align=\"left\"><span style=\"color:black;\">Ø </span><span style=\"color:black;\">public ModelAndView(String viewname, Map model)</span></p><p align=\"left\"><span style=\"color:black;\">返回界面由指定的结果数据集加以填充。可以看到，结果数据集采用了</span><span style=\"color:black;\">Map</span><span style=\"color:black;\">接口</span></p><p align=\"left\"><span style=\"color:black;\">实现的数据类型。其中包含了返回结果中的各个数据单元。关于结果数据集在界</span></p><p align=\"left\"><span style=\"color:black;\">面中的填充操作，可参见下面关于返回界面的描述。</span></p><p align=\"left\"><span style=\"color:black;\">上面这两个版本的构造子中，通过</span><span style=\"color:black;\">viewname</span><span style=\"color:black;\">指定了表示层资源。</span></p><p align=\"left\"><span style=\"color:black;\">另外，我们也可以通过传递</span><span style=\"color:black;\">View</span><span style=\"color:black;\">对象指定表示层资源。</span></p><p align=\"left\"><span style=\"color:black;\">Ø </span><span style=\"color:black;\">public ModelAndView(View view)</span></p><p align=\"left\"><span style=\"color:black;\">Ø </span><span style=\"color:black;\">public ModelAndView(View view, Map model)</span></p><p align=\"left\"><span style=\"color:black;\">我们可以结合</span><span style=\"color:black;\">RedirectView</span><span style=\"color:black;\">完成转向功能，如：</span></p><p align=\"left\"><span style=\"color:black;\">return new ModelAndView(</span></p><p align=\"left\"><span style=\"color:black;\">new RedirectView(</span><span style=\"color:black;\"><span style=\"font-family:宋体;\">“</span></span><span style=\"color:black;\">/redirected.jsp</span><span style=\"color:black;\"><span style=\"font-family:宋体;\">”</span></span></p><p align=\"left\"><span style=\"color:black;\">));</span></p><p align=\"left\"><span style=\"color:black;\">当然，我们也可以在带有</span><span style=\"color:black;\">HttpServletRequest</span><span style=\"color:black;\">参数的</span><span style=\"color:black;\">onSubmit</span><span style=\"color:black;\">方法实现中，通</span></p><p align=\"left\"><span style=\"color:black;\">过</span><span style=\"color:black;\">HttpServletRequest/HttpServletResponse</span><span style=\"color:black;\">完成</span><span style=\"color:black;\">forward/redirect</span><span style=\"color:black;\">功</span></p><p align=\"left\"><span style=\"color:black;\">能，这两种途径可以达到同样的效果。</span></p><p align=\"left\"><strong><span style=\"color:black;\"><span style=\"font-family:宋体;\">最后，来看返回界面：</span></span></strong></p><p align=\"left\"><span style=\"color:black;\">错误返回界面</span><strong><span style=\"color:black;\">loginfail.jsp</span></strong><span style=\"color:black;\">只是个纯</span><span style=\"color:black;\">html</span><span style=\"color:black;\">文件（为了与</span><span style=\"color:black;\">View Resolver</span><span style=\"color:black;\">中设</span></p><p align=\"left\"><span style=\"color:black;\">定的后缀相匹配，因此以</span><span style=\"color:black;\">.jsp</span><span style=\"color:black;\">作为文件后缀），这里就不再浪费篇幅。</span></p><p align=\"left\"><span style=\"color:black;\">再看成功登录后的页面</span><span style=\"color:black;\">main.jsp:</span></p><p align=\"left\"><span style=\"color:black;\">界面显示效果如下：</span></p><strong><span style=\"color:#04080;\"></span></strong><pre class=\"java\" name=\"code\">&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jstl/core_rt&quot; %&gt;\n\n&lt;html&gt;\n\n&lt;body&gt;\n\n&lt;p&gt;Login Success!!!&lt;/p&gt;\n\n&lt;p&gt;Current User:\n\n&lt;c:out value=&quot;${logininfo.username}&quot;/&gt;&lt;br&gt;\n\n&lt;/p&gt;\n\n&lt;p&gt;Your current messages:&lt;/p&gt;\n\n&lt;c:forEach items=&quot;${messages}&quot;\n\nvar=&quot;item&quot;\n\nbegin=&quot;0&quot;\n\nend=&quot;9&quot;\n\nstep=&quot;1&quot;\n\nvarStatus=&quot;var&quot;&gt;\n\n&lt;c:if test=&quot;${var.index % 2 == 0}&quot;&gt;\n\n*\n\n&lt;/c:if&gt;\n\n${item}&lt;br&gt;\n\n&lt;/c:forEach&gt;\n\n&lt;/body&gt;\n\n&lt;/html&gt;\n</pre><p align=\"left\"><br></p><p align=\"left\"><p align=\"left\"><p align=\"left\"><strong><span style=\"color:green;\"><img align=\"\" alt=\"\" src=\"http://p.blog.csdn.net/images/p_blog_csdn_net/yinianshen/EntryImages/20081123/main.jpg\"><br></span></strong></p><p align=\"left\"><span style=\"color:black;\">登录失败后的页面</span><span style=\"color:black;\">loginfail.jsp:</span></p><p align=\"left\"><span style=\"color:#bf5f3f;background: white;\">&lt;%@ </span><span style=\"color:#3f7f7f;background: white;\">taglib </span><span style=\"color:#7f07f;background: white;\">prefix</span><span style=\"color:black;background: white;\">=</span><span style=\"color:#2a0ff;background: white;\">&quot;c&quot; </span><span style=\"color:#7f07f;background: white;\">uri</span><span style=\"color:black;background: white;\">=</span><span style=\"color:#2a0ff;background: white;\">&quot;http://java.sun.com/jstl/core_rt&quot;</span><span style=\"color:#bf5f3f;background: white;\">%&gt;</span></p><p align=\"left\"><span style=\"color:teal;background: white;\">&lt;</span><span style=\"color:#3f7f7f;background: white;\">html</span><span style=\"color:teal;background: white;\">&gt;</span></p><p align=\"left\"><span style=\"color:teal;background: white;\">&lt;</span><span style=\"color:#3f7f7f;background: white;\">body</span><span style=\"color:teal;background: white;\">&gt;</span></p><p align=\"left\"><span style=\"color:teal;background: white;\">&lt;</span><span style=\"color:#3f7f7f;background: white;\">p</span><span style=\"color:teal;background: white;\">&gt;</span><span style=\"color:black;background: white;\">Login Fail!!!</span><span style=\"color:teal;background: white;\">&lt;/</span><span style=\"color:#3f7f7f;background: white;\">p</span><span style=\"color:teal;background: white;\">&gt;&lt;</span><span style=\"color:#3f7f7f;background: white;\">c:out </span><span style=\"color:#7f07f;background: white;\">value</span><span style=\"color:black;background: white;\">=</span><span style=\"background: white;\">&quot;${failmsg}&quot;<span style=\"color:teal;\">/&gt;</span></span></p><p align=\"left\"><span style=\"color:teal;background: white;\">&lt;/</span><span style=\"color:#3f7f7f;background: white;\">body</span><span style=\"color:teal;background: white;\">&gt;</span></p><span style=\"color:teal;background: white;\">&lt;/</span><span style=\"color:#3f7f7f;background: white;\">html</span><span style=\"color:teal;background: white;\">&gt;</span><br> <p align=\"left\"><span style=\"color:black;\">页面逻辑非常简单，首先显示当前登录用户的用户名。然后循环显示当前用户的通知消息</span></p><p align=\"left\"><span style=\"color:black;\">“</span><span style=\"color:black;\">messages</span><span style=\"color:black;\">”。如果当前循环索引为奇数，则在消息前追加一个“</span><span style=\"color:black;\">*</span><span style=\"color:black;\">”号（这个小特性在这里</span></p><p align=\"left\"><span style=\"color:black;\">似乎有些多余，但却为不熟悉</span><span style=\"color:black;\">JSTL </span><span style=\"color:black;\">的读者提供了如何使用</span><span style=\"color:black;\">JSTL Core taglib </span><span style=\"color:black;\">进行循环和</span></p><p align=\"left\"><span style=\"color:black;\">逻辑判断的样例）。</span></p><p align=\"left\"><span style=\"color:black;\">实际上这只是个普通</span><span style=\"color:black;\">JSTL/JSP</span><span style=\"color:black;\">页面，并没有任何特殊之处，如果说有些值得研究的技术，</span></p><p align=\"left\"><span style=\"color:black;\">也就是其中引用的</span><span style=\"color:black;\">JSTL Core Taglib</span></p><p align=\"left\"><strong><span style=\"color:#04080;\">&lt;%@ </span><span style=\"color:#05050;\">taglib </span><span style=\"color:#00c5;\">prefix</span><span style=\"color:#04080;\">=</span><span style=\"color:black;\">&quot;c&quot; </span><span style=\"color:#00c5;\">uri</span><span style=\"color:#04080;\">=</span><span style=\"color:black;\">&quot;http://java.sun.com/jstl/core_rt&quot; </span><span style=\"color:#04080;\">%&gt;</span></strong></p><p align=\"left\"><span style=\"color:black;\">上面这句话申明了页面中所引用的</span><span style=\"color:black;\">taglib</span><span style=\"color:black;\">，指定其前缀为“</span><span style=\"color:black;\">c</span><span style=\"color:black;\">”，也就是说，在页面中，</span></p><p align=\"left\"><span style=\"color:black;\">所有以“</span><span style=\"color:black;\">c</span><span style=\"color:black;\">”为前缀，形同</span><strong><span style=\"color:green;\">&lt;</span><span style=\"color:navy;\">c:xxxx</span><span style=\"color:green;\">&gt;</span></strong><span style=\"color:black;\">的节点都表明是此</span><span style=\"color:black;\">taglib</span><span style=\"color:black;\">的引用，在这里，也就是对</span><span style=\"color:black;\">JSTL</span></p><p align=\"left\"><span style=\"color:black;\">Core Lib</span><span style=\"color:black;\">的引用。</span></p><p align=\"left\"><span style=\"color:#3366ff;\">这里需要注意的是，笔者所采用的</span><span style=\"color:#3366ff;\">Web </span><span style=\"color:#3366ff;\">容器为</span><span style=\"color:#3366ff;\">Tomcat 5(</span><span style=\"color:#3366ff;\">支持</span><span style=\"color:#3366ff;\">Servlet 2.4/JSP2.0</span></p><p align=\"left\"><span style=\"color:#3366ff;\">规范</span><span style=\"color:#3366ff;\">)</span><span style=\"color:#3366ff;\">以及</span><span style=\"color:#3366ff;\">Apache JSTL 2.0(http://jakarta.apache.org/taglibs/index.html)</span><span style=\"color:#3366ff;\">。</span></p><p align=\"left\"><strong><span style=\"color:green;\">&lt;</span><span style=\"color:navy;\">c:out </span><span style=\"color:#0803c;\">value</span><span style=\"color:green;\">=</span><span style=\"color:#03c80;\">&quot;${logininfo.username}&quot;</span><span style=\"color:green;\">/&gt;</span></strong></p><p align=\"left\"><strong><span style=\"color:green;\">&lt;</span><span style=\"color:navy;\">c:out</span><span style=\"color:green;\">&gt;</span></strong><span style=\"color:black;\">将</span><span style=\"color:black;\">value </span><span style=\"color:black;\">中的内容输出到当前位置，这里也就是把</span><span style=\"color:black;\">logininfo </span><span style=\"color:black;\">对象的</span></p><p align=\"left\"><span style=\"color:black;\">username</span><span style=\"color:black;\">属性值输出到页面当前位置。</span></p><p align=\"left\"><strong><span style=\"color:#03c80;\">${</span><span style=\"color:#03c80;\"><span style=\"font-family:宋体;\">……</span></span><span style=\"color:#03c80;\">}</span></strong><span style=\"color:black;\">是</span><span style=\"color:black;\">JSP2.0 </span><span style=\"color:black;\">中的</span><span style=\"color:black;\">Expression Language</span><span style=\"color:black;\">（</span><span style=\"color:black;\">EL</span><span style=\"color:black;\">）的语法。它定义了一个表达式，</span></p><p align=\"left\"><span style=\"color:black;\">其中的表达式可以是一个常量（如上），也可以是一个具体的表达语句（如</span><strong><span style=\"color:navy;\">forEach</span></strong><span style=\"color:black;\">循环体中</span></p><p align=\"left\"><span style=\"color:black;\">的情况）。典型案例如下：</span></p><p align=\"left\"><span style=\"color:black;\">Ø </span><strong><span style=\"color:#03c80;\">${logininfo.username}</span></strong></p><p align=\"left\"><span style=\"color:black;\">这表明引用</span><span style=\"color:black;\">logininfo </span><span style=\"color:black;\">对象的</span><span style=\"color:black;\">username </span><span style=\"color:black;\">属性。我们可以通过“</span><span style=\"color:black;\">.</span><span style=\"color:black;\">”操作符引</span></p><p align=\"left\"><span style=\"color:black;\">用对象的属性，也可以用“</span><span style=\"color:black;\">[]</span><span style=\"color:black;\">”引用对象属性，如</span><strong><span style=\"color:#03c80;\">${logininfo[username]}</span></strong></p><p align=\"left\"><span style=\"color:black;\">与</span><strong><span style=\"color:#03c80;\">${logininfo.username}</span></strong><span style=\"color:black;\">达到了同样的效果。</span></p><p align=\"left\"><span style=\"color:black;\">“</span><span style=\"color:black;\">[]</span><span style=\"color:black;\">”引用方式的意义在于，如果属性名中出现了特殊字符，如“</span><span style=\"color:black;\">.</span><span style=\"color:black;\">”或者“</span><span style=\"color:black;\">-</span><span style=\"color:black;\">”，</span></p><p align=\"left\"><span style=\"color:black;\">此时就必须使用“</span><span style=\"color:black;\">[]</span><span style=\"color:black;\">”获取属性值以避免语法上的冲突（系统开发时应尽量避免</span></p><p align=\"left\"><span style=\"color:black;\">这一现象的出现）。</span></p><p align=\"left\"><span style=\"color:black;\">与之等同的</span><span style=\"color:black;\">JSP Script</span><span style=\"color:black;\">大致如下：</span></p><p align=\"left\"><span style=\"color:black;\">LoginInfo logininfo =</span></p><p align=\"left\"><span style=\"color:black;\">(LoginInfo)session.getAttribute(</span><span style=\"color:black;\"><span style=\"font-family:宋体;\">“</span></span><span style=\"color:black;\">logininfo</span><span style=\"color:black;\"><span style=\"font-family:宋体;\">”</span></span><span style=\"color:black;\">);</span></p><p align=\"left\"><span style=\"color:black;\">String username = logininfo.getUsername();</span></p><p align=\"left\"><span style=\"color:black;\">可以看到，</span><span style=\"color:black;\">EL</span><span style=\"color:black;\">大大节省了编码量。</span></p><p align=\"left\"><span style=\"color:black;\">这里引出的另外一个问题就是，</span><span style=\"color:black;\">EL </span><span style=\"color:black;\">将从哪里找到</span><span style=\"color:black;\">logininfo </span><span style=\"color:black;\">对象，对于</span></p><p align=\"left\"><strong><span style=\"color:#03c80;\">${logininfo.username}</span></strong><span style=\"color:black;\">这样的表达式而言，首先会从当前页面中寻找之前是</span></p><p align=\"left\"><span style=\"color:black;\">否定义了变量</span><span style=\"color:black;\">logininfo</span><span style=\"color:black;\">，如果没有找到则依次到</span><span style=\"color:black;\">Request</span><span style=\"color:black;\">、</span><span style=\"color:black;\">Session</span><span style=\"color:black;\">、</span></p><p align=\"left\"><span style=\"color:black;\">Application </span><span style=\"color:black;\">范围内寻找，直到找到为止。如果直到最后依然没有找到匹配的</span></p><p align=\"left\"><span style=\"color:black;\">变量，则返回</span><span style=\"color:black;\">null.</span></p><p align=\"left\"><span style=\"color:black;\">如果我们需要指定变量的寻找范围，可以在</span><span style=\"color:black;\">EL</span><span style=\"color:black;\">表达式中指定搜寻范围：</span></p><p align=\"left\"><strong><span style=\"color:#03c80;\">${pageScope.logininfo.username}</span></strong></p><p align=\"left\"><strong><span style=\"color:#03c80;\">${requestScope.logininfo.username}</span></strong></p><p align=\"left\"><strong><span style=\"color:#03c80;\">${sessionScope.logininfo.username}</span></strong></p><p align=\"left\"><strong><span style=\"color:#03c80;\">${applicationScope.logininfo.username}</span></strong></p><p align=\"left\"><span style=\"color:black;\">在</span><span style=\"color:black;\">Spring </span><span style=\"color:black;\">中，所有逻辑处理单元返回的结果数据，都将作为</span><span style=\"color:black;\">Attribute </span><span style=\"color:black;\">被放</span></p><p align=\"left\"><span style=\"color:black;\">置到</span><span style=\"color:black;\">HttpServletRequest </span><span style=\"color:black;\">对象中返回（具体实现可参见</span><span style=\"color:black;\">Spring </span><span style=\"color:black;\">源码中</span></p><p align=\"left\"><span style=\"color:black;\">org.springframework.web.servlet.view.InternalResourceView.</span></p><p align=\"left\"><span style=\"color:black;\">exposeModelAsRequestAttributes</span><span style=\"color:black;\">方法的实现代码），也就是说</span><span style=\"color:black;\">Spring</span></p><p align=\"left\"><span style=\"color:black;\">MVC </span><span style=\"color:black;\">中，结果数据对象默认都是</span><strong><span style=\"color:#03c80;\">requestScope</span></strong><span style=\"color:black;\">。因此，在</span><span style=\"color:black;\">Spring MVC </span><span style=\"color:black;\">中，</span></p><p align=\"left\"><span style=\"color:black;\">以下寻址方法应慎用：</span></p><p align=\"left\"><strong><span style=\"color:#03c80;\">${sessionScope.logininfo.username}</span></strong></p><p align=\"left\"><strong><span style=\"color:#03c80;\">${applicationScope.logininfo.username}</span></strong></p><p align=\"left\"><span style=\"color:black;\">Ø </span><strong><span style=\"color:#03c80;\">${1</span><span style=\"color:#03c80;\"><span style=\"font-family:宋体;\">＋</span></span><span style=\"color:#03c80;\">2}</span></strong></p><p align=\"left\"><span style=\"color:black;\">结果为表达式计算结果，即整数值</span><span style=\"color:black;\">3</span><span style=\"color:black;\">。</span></p><p align=\"left\"><span style=\"color:black;\">Ø </span><strong><span style=\"color:#03c80;\">${i&gt;1}</span></strong></p><p align=\"left\"><span style=\"color:black;\">如果变量值</span><span style=\"color:black;\">i&gt;1</span><span style=\"color:black;\">的话，将返回</span><span style=\"color:black;\">bool</span><span style=\"color:black;\">类型</span><span style=\"color:black;\">true</span><span style=\"color:black;\">。与上例比较，可以</span><span style=\"font-family:宋体;\"><span style=\"color:black;\">_____</span><span style=\"color:black;\">发</span></span><span style=\"color:black;\">现</span><span style=\"color:black;\">EL</span><span style=\"color:black;\">会自</span></p><p align=\"left\"><span style=\"color:black;\">动根据表达式计算结果返回不同的数据类型。</span></p><p align=\"left\"><span style=\"color:black;\">表达式的写法与</span><span style=\"color:black;\">java</span><span style=\"color:black;\">代码中的表达式编写方式大致相同。</span></p><p align=\"left\"><strong><span style=\"color:green;\">&lt;</span><span style=\"color:navy;\">c:forEach </span><span style=\"color:#0803c;\">items</span><span style=\"color:green;\">=</span><span style=\"color:#03c80;\">&quot;${messages}&quot;</span></strong></p><p align=\"left\"><strong><span style=\"color:#0803c;\">var</span><span style=\"color:green;\">=</span><span style=\"color:#03c80;\">&quot;item&quot;</span></strong></p><p align=\"left\"><strong><span style=\"color:#0803c;\">begin</span><span style=\"color:green;\">=</span><span style=\"color:#03c80;\">&quot;0&quot;</span></strong></p><p align=\"left\"><strong><span style=\"color:#0803c;\">end</span><span style=\"color:green;\">=</span><span style=\"color:#03c80;\">&quot;9&quot;</span></strong></p><p align=\"left\"><strong><span style=\"color:#0803c;\">step</span><span style=\"color:green;\">=</span><span style=\"color:#03c80;\">&quot;1&quot;</span></strong></p><p align=\"left\"><strong><span style=\"color:#0803c;\">varStatus</span><span style=\"color:green;\">=</span><span style=\"color:#03c80;\">&quot;var&quot;</span><span style=\"color:green;\">&gt;</span></strong></p><p align=\"left\"><span style=\"color:black;\"><span style=\"font-family:宋体;\">……</span></span></p><p align=\"left\"><strong><span style=\"color:green;\">&lt;/</span><span style=\"color:navy;\">c:forEach</span><span style=\"color:green;\">&gt;</span></strong></p><p align=\"left\"><span style=\"color:black;\">上面这段代码的意思是针对</span><span style=\"color:black;\">messages </span><span style=\"color:black;\">对象进行循环，循环中的每个循环项的引用变量为</span></p><p align=\"left\"><strong><span style=\"color:#03c80;\">item</span></strong><span style=\"color:black;\">，循环范围是从</span><span style=\"color:black;\">0</span><span style=\"color:black;\">到</span><span style=\"color:black;\">9</span><span style=\"color:black;\">，每次步长为</span><span style=\"color:black;\">1</span><span style=\"color:black;\">。而</span><strong><span style=\"color:#0803c;\">varStatus</span></strong><span style=\"color:black;\">则定义了一个循环状态变量</span><strong><span style=\"color:#03c80;\">var</span></strong><span style=\"color:black;\">，</span></p><p align=\"left\"><span style=\"color:black;\">循环状态变量中保存了循环进行时的状态信息，包括以下几个属性：</span></p><p align=\"left\"><strong><span style=\"color:black;\"><span style=\"font-family:宋体;\">属性 类型 说明</span></span></strong></p><p align=\"left\"><span style=\"font-family:宋体;\"><span style=\"color:black;\">index int </span><span style=\"color:black;\">当前循环索引号</span></span></p><p align=\"left\"><span style=\"font-family:宋体;\"><span style=\"color:black;\">count int </span><span style=\"color:black;\">成员总数</span></span></p><p align=\"left\"><span style=\"font-family:宋体;\"><span style=\"color:black;\">first boolean </span><span style=\"color:black;\">当前成员是否首位成员</span></span></p><p align=\"left\"><span style=\"font-family:宋体;\"><span style=\"color:black;\">last boolean </span><span style=\"color:black;\">当前成员是否末尾成员</span></span></p><p align=\"left\"><span style=\"color:black;\">再看：</span></p><p align=\"left\"><strong><span style=\"color:green;\">&lt;</span><span style=\"color:navy;\">c:if </span><span style=\"color:#0803c;\">test</span><span style=\"color:green;\">=</span><span style=\"color:#03c80;\">&quot;${var.index % 2 == 0}&quot;</span><span style=\"color:green;\">&gt;</span></strong></p><p align=\"left\"><span style=\"color:#0028;\">*</span></p><p align=\"left\"><strong><span style=\"color:green;\">&lt;/</span><span style=\"color:navy;\">c:if</span><span style=\"color:green;\">&gt;</span></strong></p><p align=\"left\"><span style=\"color:black;\">这段代码演示了判定</span><span style=\"color:black;\">Tag </span><strong><span style=\"color:green;\">&lt;</span><span style=\"color:navy;\">c:if</span><span style=\"color:green;\">&gt;</span></strong><span style=\"color:black;\">的使用方法。可以看到，其</span><span style=\"color:black;\">test</span><span style=\"color:black;\">属性指明了判定条件，</span></p><p align=\"left\"><span style=\"color:black;\">判定条件一般为一个</span><span style=\"color:black;\">EL</span><span style=\"color:black;\">表达式。</span></p><p align=\"left\"><strong><span style=\"color:green;\">&lt;</span><span style=\"color:navy;\">c:if</span><span style=\"color:green;\">&gt;</span></strong><span style=\"color:black;\">并没有提供</span><span style=\"color:black;\">else</span><span style=\"color:black;\">子句，使用的时候可能有些不便，此时我们可以通过</span><strong><span style=\"color:green;\">&lt;</span><span style=\"color:navy;\">c:choose</span><span style=\"color:green;\">&gt;</span></strong></p><p align=\"left\"><span style=\"color:black;\">tag</span><span style=\"color:black;\">来达到类似的目的：</span></p><p align=\"left\"><strong><span style=\"color:green;\">&lt;</span><span style=\"color:navy;\">c:choose</span><span style=\"color:green;\">&gt;</span></strong></p><p align=\"left\"><strong><span style=\"color:green;\">&lt;</span><span style=\"color:navy;\">c:when </span><span style=\"color:#0803c;\">test</span><span style=\"color:green;\">=</span><span style=\"color:#03c80;\">&quot;${var.index % 2 == 0}&quot;</span><span style=\"color:green;\">&gt;</span></strong></p><p align=\"left\"><span style=\"color:#0028;\">*</span></p><p align=\"left\"><strong><span style=\"color:green;\">&lt;/</span><span style=\"color:navy;\">c:when</span><span style=\"color:green;\">&gt;</span></strong></p><p align=\"left\"><strong><span style=\"color:green;\">&lt;</span><span style=\"color:navy;\">c:otherwise</span><span style=\"color:green;\">&gt;</span></strong></p><p align=\"left\"><span style=\"color:#0028;\">!</span></p><p align=\"left\"><strong><span style=\"color:green;\">&lt;/</span><span style=\"color:navy;\">c:otherwise</span><span style=\"color:green;\">&gt;</span></strong></p><p align=\"left\"><strong><span style=\"color:green;\">&lt;/</span><span style=\"color:navy;\">c:choose</span><span style=\"color:green;\">&gt;</span></strong></p><p align=\"left\"><span style=\"color:black;\">类似</span><span style=\"color:black;\">Java </span><span style=\"color:black;\">中的</span><span style=\"color:black;\">switch </span><span style=\"color:black;\">语句，</span><strong><span style=\"color:green;\">&lt;</span><span style=\"color:navy;\">c:choose</span><span style=\"color:green;\">&gt;</span></strong><span style=\"color:black;\">提供了复杂判定条件下的简化处理手法。其</span></p><p align=\"left\"><span style=\"color:black;\">中 </span><strong><span style=\"color:green;\">&lt;</span><span style=\"color:navy;\">c:when</span><span style=\"color:green;\">&gt;</span></strong><span style=\"color:black;\">子句类似</span><span style=\"color:black;\">case</span><span style=\"color:black;\">子句，可以出现多次。上面的代码，在奇数行时输出“</span><span style=\"color:black;\">*</span><span style=\"color:black;\">”号，</span></p><p align=\"left\"><span style=\"color:black;\">而偶数行时输出“</span><span style=\"color:black;\">!</span><span style=\"color:black;\">”。</span></p><p align=\"left\"><span style=\"color:black;\">通过</span><strong><span style=\"color:green;\">&lt;</span><span style=\"color:navy;\">c:choose</span><span style=\"color:green;\">&gt;</span></strong><span style=\"color:black;\">改造后的输出页面：</span></p><span style=\"color:black;\">至此，一个典型的请求</span><span style=\"color:black;\">/</span><span style=\"color:black;\">响应过程结束。通过这个过程，我们也了解了</span><span style=\"color:black;\">Spring MVC </span><span style=\"color:black;\">的核心实现机制。对其进行总结，得到以下</span><span style=\"color:black;\">UML</span><span style=\"color:black;\">序列图：</span><p align=\"left\"><img align=\"\" alt=\"\" src=\"http://p.blog.csdn.net/images/p_blog_csdn_net/yinianshen/EntryImages/20081123/uml.jpg\"><br></p>   \n', '2016-04-16 01:21:17', '0');
INSERT INTO `article` VALUES ('10070', '10003', 'Spring讲解------------零配置', '\n\n<h2 style=\"line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n12.1&nbsp; 概述</h2>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n12.1.1&nbsp; 什么是零配置</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在SSH集成一章中大家注意到项目结构和包结构是不是很有规律，类库放到WEB-INF/lib文件夹下，jsp文件放到WEB-INF/jsp文件夹下，web.xml需要放到WEB-INF文件夹下等等，为什么要这么放呢？不这样放可以吗？</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>所谓零配置，并不是说一点配置都没有了，而是配置很少而已。通过约定来减少需要配置的数量，提高开发效率。</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n因此SSH集成时的项目结构和包结构完全是任意的，可以通过配置方式来指定位置，因此如web.xml完全可以不放在WEB-INF下边而通过如tomcat配置文件中新指定web.xml位置。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n还有在SSH集成中还记得使用在Struts2配置文件中使用模式匹配通配符来定义action，只要我们的URL模式将类&#20284;于/{module}/{action}/{method}.action即可自动映射到相应的Action类的方法上，但如果你的URL不对肯定是映射不到的，这就是规约。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n零配置并不是没有配置，而是通过约定来减少配置。那如何实现零配置呢？</p>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n&nbsp;</h3>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n12.1.2 零配置的实现方式</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n零配置实现主要有以下两种方式：</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>惯例优先原则：</strong>也称为约定大于配置或规约大于配置（convention over configuration），即通过约定代码结构或命名规范来减少配置数量，同样不会减少配置文件；即通过约定好默认规范来提高开发效率；如Struts2配置文件使用模式匹配通配符来定义action就是惯例优先原则。</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>基于注解的规约配置：</strong>通过在指定类上指定注解，通过注解约定其含义来减少配置数量，从而提高开发效率；如事务注解@Transaction是不是基于注解的规约，只有在指定的类或方法上使用该注解就表示其需要事务。</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n对惯例优先原则支持的有项目管理工具Maven，它约定了一套非常好的项目结构和一套合理的默认&#20540;来简化日常开发，作者比较喜欢使用Maven构建和管理项目；另外还有Strtus2的convention-plugin也提供了零配置支持等等。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n大家还记得【7.5 集成Spring JDBC及最佳实践】时的80/20法则吗？零配置是不是同样很好的体现了这个法则，在日常开发中同样80%时间使用默认配置，而20%时间可能需要特定配置。</p>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n&nbsp;</h3>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n12.1.3&nbsp; Spring3的零配置</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\nSpring3中零配置的支持主要体现在Spring Web MVC框架的惯例优先原则和基于注解配置。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\nSpring Web MVC框架的惯例优先原则采用默认的命名规范来减少配置。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\nSpring基于注解的配置采用约定注解含义来减少配置，包括注解实现Bean配置、注解实现Bean定义和Java类替换配置文件三部分：</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>注解实现Bean依赖注入：</strong>通过注解方式替代基于XML配置中的依赖注入，如使用@Autowired注解来完成依赖注入。</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>注解实现Bean定义：</strong>通过注解方式进行Bean配置元数据定义，从而完全将Bean配置元数据从配置文件中移除。</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><span class=\"bold\" style=\"font-weight:bold\">Java类替换配置文件：</span>使用Java类来定义所有的Spring配置，完全消除XML配置文件。</li></ul>\n<div><span style=\"font-family:Helvetica,Tahoma,Arial,sans-serif\"><span style=\"font-size:14px; line-height:25.2000007629395px\"></span></span>\n<h2 style=\"line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n12.2&nbsp; 注解实现Bean依赖注入</h2>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n12.2.1&nbsp; 概述</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 注解实现Bean配置主要用来进行如依赖注入、生命周期回调方法定义等，不能消除XML文件中的Bean元数据定义，<strong>且基于XML配置中的依赖注入的数据将覆盖基于注解配置中的依赖注入的数据</strong>。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\nSpring3的基于注解实现Bean依赖注入支持如下三种注解：</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>Spring自带依赖注入注解：&nbsp;</strong>Spring自带的一套依赖注入注解；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>JSR-250注解：</strong>Java平台的公共注解，是Java EE 5规范之一，在JDK6中默认包含这些注解，从Spring2.5开始支持。</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>JSR-330注解</strong>：Java 依赖注入标准，Java EE 6规范之一，可能在加入到未来JDK版本，从Spring3开始支持；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>JPA注解：</strong>用于注入持久化上下文和尸体管理器。</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n这三种类型的注解在Spring3中都支持，类&#20284;于注解事务支持，想要使用这些注解需要在Spring容器中开启注解驱动支持，即使用如下配置方式开启：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:677.046875px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;beans&nbsp;xmlns=<span class=\"string\" style=\"color:blue\">&quot;http://www.springframework.org/schema/beans&quot;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;xmlns:xsi=<span class=\"string\" style=\"color:blue\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;xmlns:context=<span class=\"string\" style=\"color:blue\">&quot;http://www.springframework.org/schema/context&quot;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;xsi:schemaLocation=&quot;&nbsp;http:<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//www.springframework.org/schema/beans</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http:<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//www.springframework.org/schema/beans/spring-beans-3.0.xsd</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http:<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//www.springframework.org/schema/context</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http:<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//www.springframework.org/schema/context/spring-context-3.0.xsd&quot;&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;context:annotation-config/&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;/beans&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp;这样就能使用注解驱动依赖注入了，该配置文件位于“resources/ chapter12/dependecyInjectWithAnnotation.xml”。</p>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n&nbsp;</h3>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n12.2.2&nbsp; Spring自带依赖注入注解</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>一、@Required：依赖检查；</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n对应于基于XML配置中的依赖检查，但XML配置的依赖检查将检查所有setter方法，详见【3.3.4&nbsp; 依赖检查】；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n基于@Required的依赖检查表示注解的setter方法必须，即必须通过在XML配置中配置setter注入，如果没有配置在容器启动时会抛出异常从而保证在运行时不会遇到空指针异常，@Required只能放置在setter方法上，且通过XML配置的setter注入，可以使用如下方式来指定：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:677.046875px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Requried</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">setter方法&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n1、准备测试Bean</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:677.046875px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">package</span>&nbsp;cn.javass.spring.chapter12;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>&nbsp;TestBean&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;String&nbsp;message;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Required</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;setMessage(String&nbsp;message)&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">this</span>.message&nbsp;=&nbsp;message;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;String&nbsp;getMessage()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">return</span>&nbsp;message;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n2、在Spring配置文件（chapter12/dependecyInjectWithAnnotation.xml）添加如下Bean配置：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:677.046875px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;bean&nbsp;id=<span class=\"string\" style=\"color:blue\">&quot;testBean&quot;</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>=<span class=\"string\" style=\"color:blue\">&quot;cn.javass.spring.chapter12.TestBean&quot;</span>&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;property&nbsp;name=<span class=\"string\" style=\"color:blue\">&quot;message&quot;</span>&nbsp;ref=<span class=\"string\" style=\"color:blue\">&quot;message&quot;</span>/&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;/bean&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;bean&nbsp;id=<span class=\"string\" style=\"color:blue\">&quot;message&quot;</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>=<span class=\"string\" style=\"color:blue\">&quot;java.lang.String&quot;</span>&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;constructor-arg&nbsp;index=<span class=\"string\" style=\"color:blue\">&quot;0&quot;</span>&nbsp;value=<span class=\"string\" style=\"color:blue\">&quot;hello&quot;</span>/&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;/bean&gt;&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n3、测试类和测试方法如下：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:677.046875px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">package</span>&nbsp;cn.javass.spring.chapter12;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//省略import</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>&nbsp;DependencyInjectWithAnnotationTest&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">static</span>&nbsp;String&nbsp;configLocation&nbsp;=&nbsp;<span class=\"string\" style=\"color:blue\">&quot;classpath:chapter12/dependecyInjectWithAnnotation.xml&quot;</span>;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">static</span>&nbsp;ApplicationContext&nbsp;ctx&nbsp;=&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">new</span>&nbsp;ClassPathXmlApplicationContext(configLocation);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//1、Spring自带依赖注入注解</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Test</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;testRequiredForXmlSetterInject()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TestBean&nbsp;testBean&nbsp;=&nbsp;ctx.getBean(<span class=\"string\" style=\"color:blue\">&quot;testBean&quot;</span>,&nbsp;TestBean.<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Assert.assertEquals(<span class=\"string\" style=\"color:blue\">&quot;hello&quot;</span>,&nbsp;testBean.getMessage());&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n在XML配置文件中必须指定setter注入，否则在Spring容器启动时将抛出如下异常：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:677.046875px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">org.springframework.beans.factory.BeanCreationException:&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">Error&nbsp;creating&nbsp;bean&nbsp;with&nbsp;name&nbsp;<span class=\"string\" style=\"color:blue\">\'testBean\'</span>&nbsp;defined&nbsp;in&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>&nbsp;path&nbsp;resource&nbsp;[chapter12/dependecyInjectWithAnnotation.xml]:&nbsp;Initialization&nbsp;of&nbsp;bean&nbsp;failed;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">nested&nbsp;exception&nbsp;is&nbsp;org.springframework.beans.factory.BeanInitializationException:&nbsp;Property&nbsp;<span class=\"string\" style=\"color:blue\">\'message\'</span>&nbsp;is&nbsp;required&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">for</span>&nbsp;bean&nbsp;<span class=\"string\" style=\"color:blue\">\'testBean\'</span>&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>二、@Autowired：自动装配</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n自动装配，用于替代基于XML配置的自动装配，详见【3.3.3&nbsp; 自动装配】。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n基于@Autowired的自动装配，默认是根据类型注入，可以用于构造器、字段、方法注入，使用方式如下：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:677.046875px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Autowired</span>(required=<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">true</span>)&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">构造器、字段、方法&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n@Autowired默认是根据参数类型进行自动装配，且必须有一个Bean候选者注入，如果允许出现0个Bean候选者需要设置属性“required=false”，“required”属性含义和@Required一样，只是@Required只适用于基于XML配置的setter注入方式。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>（1）、构造器注入：</strong>通过将@Autowired注解放在构造器上来完成构造器注入，默认构造器参数通过类型自动装配，如下所示：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n1、准备测试Bean，在构造器上添加@AutoWired注解：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:677.046875px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">package</span>&nbsp;cn.javass.spring.chapter12;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">import</span>&nbsp;org.springframework.beans.factory.annotation.Autowired;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>&nbsp;TestBean11&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;String&nbsp;message;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Autowired</span>&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//构造器注入</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;TestBean11(String&nbsp;message)&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">this</span>.message&nbsp;=&nbsp;message;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//省略message的getter和setter</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n2、在Spring配置文件（chapter12/dependecyInjectWithAnnotation.xml）添加如下Bean配置：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:677.046875px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;bean&nbsp;id=<span class=\"string\" style=\"color:blue\">&quot;testBean11&quot;</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>=<span class=\"string\" style=\"color:blue\">&quot;cn.javass.spring.chapter12.TestBean11&quot;</span>/&gt;&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n3、测试类如下：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:677.046875px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Test</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;testAutowiredForConstructor()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;TestBean11&nbsp;testBean11&nbsp;=&nbsp;ctx.getBean(<span class=\"string\" style=\"color:blue\">&quot;testBean11&quot;</span>,&nbsp;TestBean11.<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;Assert.assertEquals(<span class=\"string\" style=\"color:blue\">&quot;hello&quot;</span>,&nbsp;testBean11.getMessage());&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; 在Spring配置文件中没有对“testBean11”进行构造器注入和setter注入配置，而是通过在构造器上添加@ Autowired来完成根据参数类型完成构造器注入。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>（2）、字段注入：</strong>通过将@Autowired注解放在构造器上来完成字段注入。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n1、准备测试Bean，在字段上添加@AutoWired注解：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:677.046875px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">package</span>&nbsp;cn.javass.spring.chapter12;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">import</span>&nbsp;org.springframework.beans.factory.annotation.Autowired;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>&nbsp;TestBean12&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Autowired</span>&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//字段注入</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;String&nbsp;message;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//省略getter和setter</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n2、在Spring配置文件（chapter12/dependecyInjectWithAnnotation.xml）添加如下Bean配置：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:677.046875px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14)', '2016-04-16 01:21:18', '0');
INSERT INTO `article` VALUES ('10071', '10003', 'Srping讲解----------IoC详解', '\n<h3 style=\"margin: 0px 0px 0.5em; padding: 0px; line-height: 1.5em; font-family: Helvetica, Tahoma, Arial, sans-serif;\"><span style=\"font-size: 1.2em;\">2.1.1&nbsp; </span><span style=\"font-size:18px;\">IoC是什么</span></h3><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">Ioc—Inversion of Control，即“<strong><span style=\"color:#ff0000;\">控制反转</span></strong>”，不是什么技术，而是一种<strong><span style=\"color:#3333ff;\">设计思想</span></strong>。在Java开发中，Ioc意味着将你<u>设计好的对象交给容器控制</u>，而不是传统的在你的对象内部直接控制。如何理解好Ioc呢？理解好Ioc的关键是要明确“<em><strong>谁控制谁，控制什么</strong></em>，为何是反转（有反转就应该有正转了），哪些方面反转了”，那我们下面就探索一下其中的奥秘吧！</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"color:#ff0000;\">●<span style=\"margin: 0px; padding: 0px; line-height: 1.5em;\">谁控制谁，控制什么：</span></span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">传统Java SE程序设计，我们直接在对象内部通过new进行创建对象，是程序主动去创建依赖对象；而<strong>IoC是有专门一个容器来创建这些对象，即由Ioc容器来控制对象的创建</strong></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"color:#ff0000;\"><br></span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"color:#ff0000;\">谁控制谁？</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">当然是IoC 容器控制了<strong>对象</strong></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"color:#ff0000;\">控制什么？</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">那就是<strong>主要控制了外部资源获取</strong>（不只是对象包括比如文件等）。</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><br></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">●<span style=\"margin: 0px; padding: 0px; line-height: 1.5em;\"><span style=\"color:#ff0000;\">为何是反转，哪些方面反转了？</span></span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"margin: 0px; padding: 0px; line-height: 1.5em;\"><span style=\"color:#ff0000;\"><br></span></span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">有反转就有正转，传统应用程序是<strong>由我们自己在对象中主动控制去直接获取依赖对象，也就是正转</strong>；</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">而<strong>反转则是由容器来帮忙创建及注入依赖对象</strong>；</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"color:#ff0000;\">为何是反转？</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">因为由容器帮我们查找及注入依赖对象，对象只是被动的接受依赖对象，所以是反转；哪些方面反转了？依赖对象的获取被反转了。<span style=\"margin: 0px; padding: 0px; line-height: 1.5em;\"></span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><br></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">用图例说明一下，传统程序设计如图2-1，都是主动去创建相关对象然后再组合起来：</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><img style=\"margin: 0px; padding: 0px; border: 0px currentColor; height: auto !important; line-height: 1.5em;\" alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/19/a02c1e3154ef4be3f15fb91275a26494__1.JPG\">&nbsp;</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 图2-1 传统应用程序示意图</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><br></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><br></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">当有了IoC/DI的容器后，在客户端类中不再主动去创建这些对象了，如图2-2所示:</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><br></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;<img style=\"margin: 0px; padding: 0px; border: 0px currentColor; height: auto !important; line-height: 1.5em;\" alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/19/6fdf1048726cc2edcac4fca685f050ac__2.JPG\"></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp; &nbsp; &nbsp; 图2-2有IoC/DI容器后程序结构示意图</p><h3 style=\"margin: 0px 0px 0.5em; padding: 0px; line-height: 1.5em; font-family: Helvetica,Tahoma,Arial,sans-serif; font-size: 1.2em;\">&nbsp;</h3><h3 style=\"margin: 0px 0px 0.5em; padding: 0px; line-height: 1.5em; font-family: Helvetica, Tahoma, Arial, sans-serif;\"><span style=\"font-size:18px;\">1.1.2&nbsp; IoC能做什么</span></h3><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><strong>IoC</strong>不是一种技术，</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><strong>只是一种思想</strong>，</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px; \"><strong>只是一种思想</strong></span><span style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\">，</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px; \"><strong>只是一种思想</strong></span><span style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\">，</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\">重要的事情说三遍！</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><img alt=\"大笑\" src=\"http://static.blog.csdn.net/xheditor/xheditor_emot/default/laugh.gif\" style=\"font-family: verdana, arial, helvetica, sans-serif; font-size: 14px; line-height: 21px;\"><br></span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><br></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><br></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">一个重要的面向对象编程的法则，它能指导我们<strong>如何设计出松耦合</strong>、<strong>更优良的程序</strong>。</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"color:#ff0000;\">为何要用ioc呢？</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">传统应用程序都是由我们在类内部主动创建依赖对象，从而导致类与类之间高耦合，难于测试。</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><br></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"color:#ff0000;\">好处就在这里！！！！</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"color:#ff0000;\">&nbsp; &nbsp; &nbsp; &nbsp;|</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">有了IoC容器后，把<strong>创建和查找依赖对象的控制权交给了容器</strong>，<strong>由容器进行注入组合对象</strong>，<strong>所以对象与对象之间是松散耦合</strong>，这样也方便测试，利于功能复用，更重要的是使得程序的整个体系结构变得非常灵活。</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><br></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">其实IoC对编程带来的最大改变不是从代码上，而是从<strong>思想</strong>上，发生了“主从换位”的变化。应用程序原本是老大，要获取什么资源都是主动出击，但是在IoC/DI思想中，应用程序就变成被动的了，被动的等待IoC容器来创建并注入它所需要的资源了。</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><br></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">IoC很好的体现了面向对象设计法则之一—— 好莱坞法则：“别找我们，我们找你”；即由IoC容器帮对象找相应的依赖对象并注入，而不是由对象主动去找。</p><h3 style=\"margin: 0px 0px 0.5em; padding: 0px; line-height: 1.5em; font-family: Helvetica,Tahoma,Arial,sans-serif; font-size: 1.2em;\">&nbsp;</h3><h3 style=\"margin: 0px 0px 0.5em; padding: 0px; line-height: 1.5em; font-family: Helvetica, Tahoma, Arial, sans-serif;\"><span style=\"font-size:18px;\">2.1.3&nbsp; IoC和DI</span></h3><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">DI—Dependency Injection，即“<strong>依赖注入</strong>”：是组件之间依赖关系由容器在运行期决定，形象的说，即由容器动态的将某个依赖关系注入到组件之中<span style=\"line-height: 1.5em;\">。</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"line-height: 1.5em;\"><br></span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"line-height: 1.5em;\"><strong>依赖注入的目的</strong>并非为软件系统带来更多功能，而是为了提升组件重用的频率，并为系统搭建一个灵活、可扩展的平台。</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"line-height: 1.5em;\">通过依赖注入机制，我们只需要通过简单的配置，而无需任何代码就可指定目标需要的资源，完成自身的业务逻辑，而不需要关心具体的资源来自何处，由谁实现。</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">理解DI的关键是：<span style=\"color:#ff0000;\">“谁依赖谁，为什么需要依赖，谁注入谁，注入了什么</span>”，那我们来深入分析一下：</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">●<span style=\"margin: 0px; padding: 0px; line-height: 1.5em;\">谁依赖于谁：</span>当然是应用程序依赖于IoC容器；<span style=\"margin: 0px; padding: 0px; line-height: 1.5em;\"></span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">●<span style=\"margin: 0px; padding: 0px; line-height: 1.5em;\">为什么需要依赖：</span>应用程序需要IoC容器来提供对象需要的外部资源；<span style=\"margin: 0px; padding: 0px; line-height: 1.5em;\"></span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">●<span style=\"margin: 0px; padding: 0px; line-height: 1.5em;\">谁注入谁：</span>很明显是IoC容器注入应用程序某个对象，应用程序依赖的对象；</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"margin: 0px; padding: 0px; line-height: 1.5em;\"></span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"margin: 0px; padding: 0px; line-height: 1.5em;\">●注入了什么：</span>就是注入某个对象所需要的外部资源（包括对象、资源、常量数据）。<span style=\"margin: 0px; padding: 0px; line-height: 1.5em;\"></span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"color:#ff0000;\">IoC和DI由什么关系呢？</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">其实它们是同一个概念的不同角度描述，由于控制反转概念比较含糊（可能只是理解为容器控制对象这一个层面，很难让人想到谁来维护对象关系），所以2004年大师级人物Martin Fowler又给出了一个新的名字：“依赖注入”，相对IoC 而言，<span style=\"margin: 0px; padding: 0px; line-height: 1.5em;\">“依赖注入”明确描述了“被注入对象依赖IoC容器配置依赖对象”。</span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;</p><p><table style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 25.2px; font-family: Helvetica,Tahoma,Arial,sans-serif; font-size: 12px;\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"><tbody><tr style=\"margin: 0px; padding: 0px;\"><td width=\"558\" height=\"89\" style=\"margin: 0px; padding: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 1em;\"><table style=\"margin: 0px; padding: 0px; width: 558px; font-size: 12px;\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"><tbody><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 1em;\"><div class=\"shape\" style=\"border-width: 0px; margin: 0px auto; padding: 0px;\"><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">注：如果想要更加深入的了解IoC和DI，请参考大师级人物Martin Fowler的一篇经典文章《Inversion of Control Containers and the Dependency Injection pattern》，</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">原文地址：http://www.martinfowler.com/articles/injection.html。</p></div></td></tr></tbody></table></td></tr></tbody></table><span style=\"font-family: Helvetica, Tahoma, Arial, sans-serif;\"><span style=\"line-height: 25.2px;\"><br></span></span></p><p><span style=\"font-family:Helvetica,Tahoma,Arial,sans-serif;\"><span style=\"line-height: 25.2px;\"></span></span></p><h3 style=\"margin: 0px 0px 0.5em; padding: 0px; line-height: 1.5em; font-family: Helvetica,Tahoma,Arial,sans-serif; font-size: 1.2em;\">2.2.1&nbsp; IoC容器的概念</h3><p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">IoC容器就是具有依赖注入功能的容器，IoC容器负责实例化、定位、配置应用程序中的对象及建立这些对象间的依赖。应用程序无需直接在代码中new相关的对象，应用程序由IoC容器进行组装。在Spring中<strong><span style=\"color:#3333ff;\">BeanFactory</span></strong>是IoC容器的实际代表者。</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><br></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">Spring IoC容器如何知道哪些是它管理的对象呢？</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><br></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">这就需要配置文件，Spring IoC容器通过读取配置文件中的配置元数据，通过元数据对应用中的各个对象进行实例化及装配。一般使用基于xml配置文件进行配置元数据，而且Spring与配置文件完全解耦的，可以使用其他任何可能的方式进行配置元数据，比如注解、基于java文件的、基于属性文件的配置都可以。</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">那Spring IoC容器管理的对象叫什么呢？</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><br></p><h3 style=\"margin: 0px 0px 0.5em; padding: 0px; line-height: 1.5em; font-family: Helvetica,Tahoma,Arial,sans-serif; font-size: 1.2em;\">2.2.2&nbsp; Bean的概念</h3><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">由IoC容器管理的那些组成你应用程序的对象我们就叫它Bean， Bean就是由Spring<span style=\"margin: 0px; padding: 0px; line-height: 1.5em;\">容器</span>初始化、装配及管理的对象，除此之外，bean就与应用程序中的其他对象没有什么区别了。那IoC怎样确定如何实例化Bean、管理Bean之间的依赖关系以及管理Bean呢？这就需要配置元数据，在Spring中由BeanDefinition代表，后边会详细介绍，配置元数据指定如何实例化Bean、如何组装Bean等。</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><br></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><br></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">概念知道的差不多了，让我们来做个简单的例子。</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><br></p><h3 style=\"margin: 0px 0px 0.5em; padding: 0px; line-height: 1.5em; font-family: Helvetica, Tahoma, Arial, sans-serif;\"><span style=\"font-size:18px;\">2.2.3&nbsp; Hello World（万卷不离其宗!!!!）</span></h3><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">一、配置环境：</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">l&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"margin: 0px; padding: 0px; line-height: 1.5em;\">JDK安装：</span>安装最新的JDK，至少需要Java 1.5及以上环境；</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">l&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"margin: 0px; padding: 0px; line-height: 1.5em;\">开发工具：</span>SpringSource Tool Suite，简称STS，是个基于Eclipse的开发环境，用以构建Spring应用，其最新版开始支持Spring 3.0及OSGi开发工具，但由于其太庞大，很多功能不是我们所必需的所以我们选择Eclipse+ SpringSource Tool插件进行Spring应用开发；到eclipse官网下载最新的Eclipse，注意我们使用的是Eclipse IDE for Java EE Developers（eclipse-jee-helios-SR1）；</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">安装插件：启动Eclipse，选择Help-&gt;Install New Software，如图2-3所示</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;<img style=\"margin: 0px; padding: 0px; border: 0px currentColor; height: auto !important; line-height: 1.5em;\" alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/19/2fe87713b04c6b6916dc7fdae285cd2f__%E5%AE%89%E8%A3%850.jpg\"></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;<img width=\"700\" height=\"383\" title=\"点击查看原始大小图片\" class=\"magplus\" style=\"margin: 0px; padding: 0px; border: 0px currentColor; height: auto !important; line-height: 1.5em;\" alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/19/e26a64e589a7475cf2fed1bf3779e36a__%E5%AE%89%E8%A3%85.jpg\"></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">图2-3 安装</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">2、首先安装SpringSource Tool Suite插件依赖，如图2-4:</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">Name为：SpringSource Tool Suite Dependencies</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">Location为：http://dist.springsource.com/release/TOOLS/composite/e3.6</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;<img width=\"700\" height=\"235\" title=\"点击查看原始大小图片\" class=\"magplus\" style=\"margin: 0px; padding: 0px; border: 0px currentColor; height: auto !important; line-height: 1.5em;\" alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/19/b7463593d18ea1206dada57934e62a1c__%E5%AE%89%E8%A3%853.jpg\"></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">图2-4 安装</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">3、安装SpringSource Tool Suite插件，只需安装如图2-5所选中的就可以：</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">Name为：SpringSource Tool Suite</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">Location为：http://dist.springsource.com/release/TOOLS/update/e3.6</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;<img style=\"margin: 0px; padding: 0px; border: 0px currentColor; height: auto !important; line-height: 1.5em;\" alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/19/d894694934acfce8a4b8860de403507d__%E5%AE%89%E8%A3%854.jpg\"></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">图2-4 安装</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">4、安装完毕，开始项目搭建吧。</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"margin: 0px; padding: 0px; line-height: 1.5em;\">Spring&nbsp;依赖：</span>本书使用spring-framework-3.0.5.RELEASE</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; spring-framework-3.0.5.RELEASE-with-docs.zip表示此压缩包带有文档的；</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; spring-framework-3.0.5.RELEASE-dependencies.zip表示此压缩包中是spring的依赖jar包，所以需要什么依赖从这里找就好了；</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;下载地址：http://www.springsource.org/download</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><strong><span style=\"color:#ff0000;\">二、开始Spring Hello World之旅</span></strong></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">1、准备需要的jar包</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;&nbsp;<span style=\"margin: 0px; padding: 0px; line-height: 1.5em;\">核心jar包：</span>从下载的spring-framework-3.0.5.RELEASE-with-docs.zip中dist目录查找如下jar包</p><table style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 25.2px; font-family: Helvetica,Tahoma,Arial,sans-serif; font-size: 12px;\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"><tbody><tr style=\"margin: 0px; padding: 0px;\"><td width=\"71\" height=\"5\" style=\"margin: 0px; padding: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 1em;\">&nbsp;</td></tr><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 1em;\">&nbsp;</td><td width=\"414\" height=\"131\" style=\"margin: 0px; padding: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 1em;\"><table style=\"margin: 0px; padding: 0px; width: 414px; font-size: 12px;\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"><tbody><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 1em;\"><div class=\"shape\" style=\"border-width: 0px; margin: 0px auto; padding: 0px;\"><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">org.springframework.asm-3.0.5.RELEASE.jar</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">org.springframework.core-3.0.5.RELEASE.jar</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">org.springframework.beans-3.0.5.RELEASE.jar</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">org.springframework.context-3.0.5.RELEASE.jar</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">org.springframework.expression-3.0.5.RELEASE.jar</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;</p></div></td></tr></tbody></table>&nbsp;</td></tr></tbody></table><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><br></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;&nbsp;<span style=\"margin: 0px; padding: 0px; line-height: 1.5em;\">依赖的jar包：</span>从下载的spring-framework-3.0.5.RELEASE-dependencies.zip中查找如下依赖jar包</p><table style=\"margin: 0px; padding: 0px; color: rgb(0, 0, 0); line-height: 25.2px; font-family: Helvetica,Tahoma,Arial,sans-serif; font-size: 12px;\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"><tbody><tr style=\"margin: 0px; padding: 0px;\"><td width=\"71\" height=\"9\" style=\"margin: 0px; padding: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 1em;\">&nbsp;</td></tr><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 1em;\">&nbsp;</td><td width=\"414\" height=\"90\" style=\"margin: 0px; padding: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 1em;\"><table style=\"margin: 0px; padding: 0px; width: 414px; font-size: 12px;\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\"><tbody><tr style=\"margin: 0px; padding: 0px;\"><td style=\"margin: 0px; padding: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 1em;\"><div class=\"shape\" style=\"border-width: 0px; margin: 0px auto; padding: 0px;\"><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">com.springsource.org.apache.log4j-1.2.15.jar</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">com.springsource.org.apache.commons.logging-1.1.1.jar</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">com.springsource.org.apache.commons.collections-3.2.1.jar</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;</p></div></td></tr></tbody></table>&nbsp;</td></tr></tbody></table><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><br></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">2、创建标准Java工程：</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">（1）选择“window”—&gt; “Show View” —&gt;“Package Explorer”，使用包结构视图；</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;<img width=\"700\" height=\"417\" title=\"点击查看原始大小图片\" class=\"magplus\" style=\"margin: 0px; padding: 0px; border: 0px currentColor; height: auto !important; line-height: 1.5em;\" alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/19/9f88addce54e8024817d0f4f53f4dfe5__%E9%A1%B9%E7%9B%AE-1.jpg\"></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">图2-5 包结构视图</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">（2）创建标准Java项目，选择“File”—&gt;“New”—&gt;“Other”；然后在弹出来的对话框中选择“Java Project”创建标准Java项目；</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;<img width=\"700\" height=\"413\" title=\"点击查看原始大小图片\" class=\"magplus\" style=\"margin: 0px; padding: 0px; border: 0px currentColor; height: auto !important; line-height: 1.5em;\" alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/19/7aafae0e483a724ea94d7ad9daf714d9__%E9%A1%B9%E7%9B%AE-2.jpg\"></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">图2-6 创建Java项目</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><img style=\"margin: 0px; padding: 0px; border: 0px currentColor; height: auto !important; line-height: 1.5em;\" alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/19/283b4b04411f0e8a7e465b89340eadbe__%E9%A1%B9%E7%9B%AE-3.jpg\">&nbsp;</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">图2-7 创建Java项目</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;<img style=\"margin: 0px; padding: 0px; border: 0px currentColor; height: auto !important; line-height: 1.5em;\" alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/19/6b425f63206a21ed2e6bc5e3baf9fec0__%E9%A1%B9%E7%9B%AE-4.jpg\"></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">图2-8 创建Java项目</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; （3）配置项目依赖库文件，右击项目选择“Properties”；然后在弹出的对话框中点击“Add JARS”在弹出的对话框中选择“lib”目录下的jar包；然后再点击“Add Library”，然后在弹出的对话框中选择“Junit”，选择“Junit4”；</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;<img style=\"margin: 0px; padding: 0px; border: 0px currentColor; height: auto !important; line-height: 1.5em;\" alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/19/266138c7224966ae149dc5232e8df2b7__%E9%A1%B9%E7%9B%AE-6.jpg\"></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><br></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">图2-9 配置项目依赖库文件</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><br></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;<img width=\"700\" height=\"463\" title=\"点击查看原始大小图片\" class=\"magplus\" style=\"margin: 0px; padding: 0px; border: 0px currentColor; height: auto !important; line-height: 1.5em;\" alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/19/f05ff0907debcdd9c30a4b3d293a830a__%E9%A1%B9%E7%9B%AE-7.jpg\"></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><br></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">图2-10 配置项目依赖库文件</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><br></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;<img width=\"700\" height=\"503\" title=\"点击查看原始大小图片\" class=\"magplus\" style=\"margin: 0px; padding: 0px; border: 0px currentColor; height: auto !important; line-height: 1.5em;\" alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/19/309affe60e31cc6d789320f5015407ad__%E9%A1%B9%E7%9B%AE-8.jpg\"></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"margin: 0px; padding: 0px; line-height: 1.5em;\"><img width=\"700\" height=\"504\" title=\"点击查看原始大小图片\" class=\"magplus\" style=\"margin: 0px; padding: 0px; border: 0px currentColor; height: auto !important; line-height: 1.5em;\" alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/19/4004020600977b86272047716525f3eb__%E9%A1%B9%E7%9B%AE-9.jpg\"></span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">图2-11 配置项目依赖库文件</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">（4）项目目录结构如下图所示，其中“src”用于存放java文件；“lib”用于存放jar文件；“resources”用于存放配置文件；</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;<span style=\"margin: 0px; padding: 0px; line-height: 1.5em; white-space: pre;\"> <img style=\"margin: 0px; padding: 0px; border: 0px currentColor; height: auto !important; line-height: 1.5em;\" alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/19/dd19c5cf9424c6ce640f03a36a13544c__%E9%A1%B9%E7%9B%AE-5.jpg\"></span></p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">图2-12 项目目录结构</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">3、项目搭建好了，让我们来开发接口，此处我们只需实现打印“Hello World!”，所以我们定义一个“sayHello”接口，代码如下：</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><br style=\"margin: 0px; padding: 0px; line-height: 1.5em;\"><br style=\"margin: 0px; padding: 0px; line-height: 1.5em;\"></p><div style=\"margin: 0px auto; padding: 0px; border: 1px solid rgb(170, 187, 204); line-height: 25.2px; font-family: Helvetica,Tahoma,Arial,sans-serif;\"><span class=\"bold\" style=\"font-family:\'arial black\',\'avant garde\';font-size:14px;margin: 0px; padding: 0px; font-weight: bold;\">java代码：</span><div class=\"dp-highlighter\" style=\"border-width: 0px; margin: 18px 0px !important; padding: 1px 0px 0px; width: 671px; overflow: auto; font-family: Consolas,\'Courier New\',Courier,mono,serif; -ms-word-break: break-all; -ms-word-wrap: break-word; background-color: rgb(231, 229, 220);\"><div class=\"bar\" style=\"border-width: 0px; margin: 0px auto; padding: 0px 0px 0px 45px;\"><div class=\"tools\" style=\"margin: 0px; padding: 3px; font-weight: bold;\"><a target=\"_blank\" target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://sishuok.com/forum/blogPost/list/2428.html\">查看</a><a target=\"_blank\" target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://sishuok.com/forum/blogPost/list/2428.html\">复制到剪贴板</a><a target=\"_blank\" target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://sishuok.com/forum/blogPost/list/2428.html\">打印</a></div></div><ol class=\"dp-j\" style=\"margin: 0px 0px 1px 45px !important; padding: 0px; border: 1px solid rgb(209, 215, 220); color: rgb(92, 92, 92); line-height: 1.4em; background-color: rgb(255, 255, 255);\"><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px;\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\"><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; font-weight: bold; background-color: inherit;\">package</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;cn.javass.spring.chapter2.helloworld;&nbsp;&nbsp;</span></span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\"><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; font-weight: bold; background-color: inherit;\">public</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;</span><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; font-weight: bold; background-color: inherit;\">interface</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;HelloApi&nbsp;{&nbsp;&nbsp;</span></span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px;\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; font-weight: bold; background-color: inherit;\">public</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;</span><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; font-weight: bold; background-color: inherit;\">void</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;sayHello();&nbsp;&nbsp;</span></span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\">}&nbsp;&nbsp;</span></li></ol></div></div><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">4、接口开发好了，让我们来通过实现接口来完成打印“Hello World!”功能；</p><p style=\"line-height: 1.5em; padding-top: 0px; padding-bottom: 0px; font-family: verdana,arial,helvetica,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;</p><div style=\"margin: 0px auto; padding: 0px; border: 1px solid rgb(170, 187, 204); line-height: 25.2px; font-family: Helvetica,Tahoma,Arial,sans-serif;\"><span class=\"bold\" style=\"font-family:\'arial black\',\'avant garde\';font-size:14px;margin: 0px; padding: 0px; font-weight: bold;\">java代码：</span><div class=\"dp-highlighter\" style=\"border-width: 0px; margin: 18px 0px !important; padding: 1px 0px 0px; width: 671px; overflow: auto; font-family: Consolas,\'Courier New\',Courier,mono,serif; -ms-word-break: break-all; -ms-word-wrap: break-word; background-color: rgb(231, 229, 220);\"><div class=\"bar\" style=\"border-width: 0px; margin: 0px auto; padding: 0px 0px 0px 45px;\"><div class=\"tools\" style=\"margin: 0px; padding: 3px; font-weight: bold;\"><a target=\"_blank\" target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://sishuok.com/forum/blogPost/list/2428.html\">查看</a><a target=\"_blank\" target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://sishuok.com/forum/blogPost/list/2428.html\">复制到剪贴板</a><a target=\"_blank\" target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://sishuok.com/forum/blogPost/list/2428.html\">打印</a></div></div><ol class=\"dp-j\" style=\"margin: 0px 0px 1px 45px !important; padding: 0px; border: 1px solid rgb(209, 215, 220); color: rgb(92, 92, 92); line-height: 1.4em; background-color: rgb(255, 255, 255);\"><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px;\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\"><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; font-weight: bold; background-color: inherit;\">package</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;cn.javass.spring.chapter2.helloworld;&nbsp;&nbsp;</span></span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\"><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; font-weight: bold; background-color: inherit;\">public</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;</span><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; font-weight: bold; background-color: inherit;\">class</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;HelloImpl&nbsp;</span><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; font-weight: bold; background-color: inherit;\">implements</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;HelloApi&nbsp;{&nbsp;&nbsp;</span></span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px;\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"annotation\" style=\"color:#646464;margin: 0px; padding: 0px; background-color: inherit;\">@Override</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;</span></span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; font-weight: bold; background-color: in', '2016-04-16 01:21:18', '1');
INSERT INTO `article` VALUES ('10072', '10003', 'SpringMVC入门案例（1）', '\n<h1>开始Spring MVC</h1><h3>建立一个web project,并导入spring 3.x的jar包</h3><h3>配置web.xml</h3><p>根据上面的spring mvc流程图，我们知道DispatcherServlet是spring mvc 的一个前端控制器，所以我们当然要去配置它，以便于将请求转给DispatcherServlet处理</p><p>&nbsp;</p><pre class=\"html\" name=\"code\">  &lt;servlet&gt;\n\n    &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\n\n    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n\n    &lt;init-param&gt;\n\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n\n&lt;!-- 如果配置文件位于classpath下，可以这么写： classpath:dispatcher.xml --&gt;\n\n        &lt;param-value&gt;/WEB-INF/dispatcher.xml&lt;/param-value&gt;\n\n    &lt;/init-param&gt;\n\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n\n  &lt;/servlet&gt;\n\n \n\n  &lt;servlet-mapping&gt;\n\n    &lt;servlet-name&gt;dispatcher&lt;/servlet-name&gt;\n\n    &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n\n  &lt;/servlet-mapping&gt;\n</pre><p align=\"left\"><br>&nbsp;</p><p>&nbsp;</p><p>注：由于DispatcherServlet在初始化的过程中需要一个配置文件来生产文件中的各种bean,并生成WebApplicationContext对象，保存到ServletContext中(如果DispatcherServlet有多个，那么每一个DispatcherServlet都对应一个WebApplicationContext)，我们可以在Servlet的init-param中配置配置文件的路径，当然如果我们没有配置Init-Param,它会默认到WEB-INF的文件夹中找[servletname]-servlet.xml文件，例如上面如果我们没有配置，则会去寻找dispatcher-servlet.xml这个配置文件。（在init-param中我们可以指定多个配置文件，用逗号分隔也可以使用通配符*）</p><h3>配置上文中我们指定的所需的dispatcher.xml文件</h3><pre class=\"html\" name=\"code\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n \n\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n\n    xmlns:p=&quot;http://www.springframework.org/schema/p&quot;\n\n    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n\n    xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\n\n    xsi:schemaLocation=&quot;\n\n    http://www.springframework.org/schema/beans\n\n    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n\n    http://www.springframework.org/schema/context\n\n    http://www.springframework.org/schema/context/spring-context-3.0.xsd\n\n    http://www.springframework.org/schema/mvc\n\n    http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd&quot;&gt;\n\n \n\n    &lt;context:component-scan base-package=&quot;com.controls&quot; /&gt;\n\n   \n\n    &lt;mvc:annotation-driven /&gt;\n\n   \n\n    &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;\n\n       &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/views/&quot;&gt;&lt;/property&gt;\n\n       &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;&gt;&lt;/property&gt;\n\n       &lt;property name=&quot;viewClass&quot; value=&quot;org.springframework.web.servlet.view.JstlView&quot;&gt;&lt;/property&gt;\n\n    &lt;/bean&gt;\n\n   \n\n&lt;/beans&gt;\n</pre><p align=\"left\"><br>&nbsp;</p><p>&nbsp;</p><h1>配置文件说明：</h1><p align=\"left\">&lt;context:component-scan base-package=<em>&quot;com.controls&quot;</em> /&gt;</p><p>由于我们使用了基于注解的Controller，所以这里指定了需要被扫描的包路径，如果有多个可以使用逗号分隔</p><p>&nbsp;</p><p align=\"left\">&lt;mvc:annotation-driven /&gt;</p><p align=\"left\">上面的spring mvc流程图中我们知道DispatcherServlet接管请求后，会由HandlerMapping来执行映射，所以我们需要注册HanlderMapping，比如上面的标签会自动注册比如DefaultAnnotationHandlerMapping（执行请求到Controller的映射）和AnnotationMethodHandlerAdapter（调用controller中的方法）这样的bean，当然这个标签还提供了其他的一些支持(更多介绍请参照spring官方文档第455页)。</p><p align=\"left\">&nbsp;</p><pre class=\"html\" name=\"code\">&lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;\n\n       &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/views/&quot;&gt;&lt;/property&gt;\n\n       &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;&gt;&lt;/property&gt;\n\n       &lt;property name=&quot;viewClass&quot; value=&quot;org.springframework.web.servlet.view.JstlView&quot;&gt;&lt;/property&gt;\n\n&lt;/bean&gt;\n</pre><p align=\"left\"><br>&nbsp;</p><p align=\"left\">上面spring mvc流程图的最后controller处理完毕后会交给一个ViewResolver进行处理，大体上是解析视图逻辑名并经过一定的处理获取一个视图，这里的意思是设置视图用jsp来处理(比如我们设置viewClass为JstlView)来进行处理，就是以forward的形式转发给jsp，这个地址是：/WEB-INF/views/[controller返回值].jsp ，当然视图解析器可以定义多个，（视图解析器不会处理ModelAndView中已经设置了View的请求，因为已经有View来处理了，那当然就不需要它来解析到真正的视图View啦）</p><h3>编写Controller控制器</h3><p>这里我们使用例子的形式来说明</p><p>&nbsp;</p><h4>实现一个控制器类</h4><pre class=\"java\" name=\"code\">@Controller\n\n@RequestMapping(&quot;/user&quot;)\n\npublic class UserControl {\n\n}\n</pre><p align=\"left\"><br>&nbsp;</p><p>只要给类加上Controller的注解，并放在被扫描的包中，那么这个类就是一个控制器了，RequestMapping表明匹配的路径，可以写在类或者类的方法上，如果类上面有RequestMapping注解，那么其下面的方法就是相对于类上面注解地址的一个相对路径</p><p>&nbsp;</p><p>&nbsp;</p><h4>定义一个接管请求的方法</h4><p>方法名：无任何要求</p><p>--------------------------------------------------------------</p><p>参数：(顺序以及个数无任何要求)</p><p>HttpServletRequest</p><p>HttpServletResponse</p><p>PrintWriter&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 相当于HttpResponse.getWriter()获得的对象</p><p>Map&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 其实是获得了ModelAndView中的Model</p><p>BindingResult&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 绑定数据的处理结果</p><p>HttpSession&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 如果使用此参数，需要注意如果是第一次访问还没有session的话会报错</p><p>@PathVariable&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 用于接收路径变量</p><p>@RequestParam&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 相当于调用request.getParameter(“name”)方法</p><p>@CookieValue&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 获取cookie的值</p><p>@RequestHeader&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 获取header中的值</p><p>实体对象&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 会根据请求的参数名，注入到这个对象对于得属性中，必须提供set方法</p><p>等等等等等</p><p>--------------------------------------------------------------</p><p>返回值：</p><p>void&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p>返回值是void，如果接收了PrintWriter 或者&nbsp; HttpServletResponse 参数，那么返回的ModelAndView就是null，也就是直接将输出流输出到客户端，如果方法没有接收输出参数，后面会默认生成一个视图名</p><p>&nbsp;</p><p>String&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 视图逻辑名</p><p>&nbsp;</p><p>ModelAndView&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 是一个视图逻辑名+Map的封装类</p><p>其他任意类型&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;存入ModelAndView中的Model</p><p>--------------------------------------------------------------</p><p>&nbsp;</p><p>不管我们的返回类型是什么，返回值会通过处理，最终返回一个ModelAndView或者null</p><h4>例1:给方法定义一个请求映射并使用路径变量</h4><p align=\"left\">&nbsp;&nbsp;&nbsp; </p><pre class=\"java\" name=\"code\">@RequestMapping(&quot;/id/{userid}/name/{username}&quot;)\n\n    public String queryUser(@PathVariable(&quot;userid&quot;) long userID\n\n           , @PathVariable(&quot;username&quot;) String userName\n\n           , Map&lt;String, User&gt; model) {\n\n      \n\n       User user = new User();\n\n       user.setUserID(userID);\n\n       user.setUserName(userName);\n\n      \n\n       model.put(&quot;userInfo&quot;, user);\n\n      \n\n       return &quot;Home&quot;;\n\n    }\n</pre><p align=\"left\"><br>&nbsp;</p><p>&nbsp;</p><p>@RequestMapping定义路由映射，其中{userid} {username} 是PathVariable(路径变量)</p><p align=\"left\">这样我们只需访问 <a target=\"_blank\" href=\"http://localhost:8080/SpringMVC/user/id/10001/name/liudehua\">http://localhost:8080/SpringMVC/user/id/10001/name/liudehua</a> 就能进入上面的方法</p><p align=\"left\">RequestMapping还可以使用通配符，如： /test/*/name/{name}</p><h4>例2:接受请求参数</h4><pre class=\"java\" name=\"code\">@RequestMapping(&quot;/save&quot;)\n\n    public String save(@RequestParam(&quot;userName&quot;) String userName\n\n           ,@RequestParam(&quot;Age&quot;) int age) {\n\n      \n\n       System.out.println(userName);\n\n       System.out.println(age);\n\n      \n\n       return &quot;Home&quot;;\n\n    }\n</pre><p align=\"left\"><br>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><h4>例3:请求参数直接注入到Model</h4><pre class=\"java\" name=\"code\">@RequestMapping(&quot;/save&quot;)\n\n    public String save(User user) {\n\n      \n\n       System.out.println(user.getUserID());\n\n       System.out.println(user.getUserName());\n\n      \n\n       return &quot;Home&quot;;\n\n    }\n</pre><p align=\"left\"><br>&nbsp;</p><p>&nbsp;</p><h4>例4:转发与重定向</h4><p>转发：&nbsp;&nbsp; (相当于 request.getRequestDispatcher(“”).forward(request, response))</p><p>return “forward:/user/test”;</p><p>&nbsp;</p><p>重定向： (相当于response.redirect(“”))</p><p>return “redirect:/user/test”</p><p>return “redirect:http://www.google.com.hk”;</p><p>&nbsp;</p><h4>例5:根据HttpMethod来过滤请求</h4><p align=\"left\">@RequestMapping(value=&quot;&quot;, method=RequestMethod.<em>POST</em>)</p><p>&nbsp;&nbsp;&nbsp; <strong>public</strong> String Test(//…) {</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //…</p><p>}</p><p>&nbsp;</p><p>&nbsp;</p><h4>例6:根据参数来进行过滤</h4><p align=\"left\">@RequestMapping(params=&quot;hello=world&quot;,&nbsp;method={RequestMethod.GET,&nbsp;RequestMethod.POST})&nbsp;&nbsp;</p><p>public&nbsp;String&nbsp;helloworld()&nbsp;{</p><p>}&nbsp;&nbsp;</p><p>必须有个hello的参数并且名称为world，而且只能是get或post请求才会进入此方法</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>   \n', '2016-04-16 01:21:18', '0');
INSERT INTO `article` VALUES ('10073', '10003', 'Spring讲解------------SSH开发积分商城', '\n\n<h2 style=\"line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n11.1&nbsp; 概述</h2>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n11.1.1&nbsp; 功能概述</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 本节将通过介绍一个积分商城系统来演示如何使用SSH集成进行开发。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 积分商城一般是购物网站的子模块，提供一些&#31036;品或商品用于奖励老用户或使用积分来折换成现金，如图11-1所示。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;<img alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/23/08941044e6c44c7d16861bf5de4b87df__1.JPG\" style=\"border:0px\"></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n图11-1 购物网站与积分商城</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 积分商城功能点：</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>后台管理</strong></li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>交易管理模块：</strong>用于查看积分交易历史；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>商品管理模块：</strong>用于CRUD积分兑换商品；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>日报或月报：</strong>用于发送给运营人员每日积分兑换情况，一般通过email发送；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;……</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>前台展示</strong></li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>商品展示：</strong>展示给用户可以使用积分兑换的商品；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>支付模块：</strong>用户成功兑换商品后扣除用户相应积分</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>添加积分模块：</strong>提供接口用于其他产品赠送积分使用，如每天在线10小时赠送50积分，购买相应商品增加相应积分；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>订单管理模块：</strong>订单管理模块可以使用现有购物平台的订单管理。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>&nbsp;</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n购物平台、用户系统及积分商城交互如图11-2所示，其中用户系统负责用户登录，购物平台是购物网站核心，积分商城用于用户使用积分购买商品。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;<img alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/23/0f41369efb3f5ef6c218db9953289b08__2.JPG\" style=\"border:0px\"></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n图11-2 购物平台、用户系统及积分商城交互</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n由于积分商城也是很复杂，由于篇幅原因不打算完全介绍，只介绍其中一个模块——商品（兑换码）管理及购买，该模块主要提供给用户使用积分兑换一些优惠券或虚拟物品（如移动充&#20540;卡）等等。</p>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n&nbsp;</h3>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n11.1.2技术选型</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n由于本节是关于SSH集成的，因此选用技术如下：</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\">平台：Java EE；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\">运行环境：Windows XP，JDK1.6；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\">编辑器：Eclipse3.6 &#43; SpringSource Tool Suite；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\">Web容器：tomcat6.0.20；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\">数据库：mysql5.4.3；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\">框架：Struts2.0.14、Spring3.0.5、Hibernate3.6.0.Final；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\">日志记录：log4j1.2.15；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\">数据库连接池：proxool0.9.1；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\">视图技术：JSP 2.0。</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 技术选定了，应该考虑平台架构了，这关系到项目的成功与否。</p>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n&nbsp;</h3>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n11.1.3系统架构</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 积分商城系统架构也将采用经典的三层架构，如图11-3所示：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;<img alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/23/6891dab2a5f24555e7f4f09666769893__3.JPG\" style=\"border:0px\"></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n图11-3 三层架构</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 分层的目的是约束层次边界，每层的职责和目标应明确和单一，每层专注自己的事情，不要跨越分层边界，具体每层功能如下：</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><span class=\"bold\" style=\"font-weight:bold\">数据访问层：</span>封装底层数据库或文件系统访问细节，从而对业务逻辑层提供一致的接口，使业务逻辑层不关心底层细节；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><span class=\"bold\" style=\"font-weight:bold\">业务逻辑层：</span>专注于业务逻辑实现，不关心底层如何访问，并在该层实现如声明式事务管理，组装分页对象；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><span class=\"bold\" style=\"font-weight:bold\">表现层：</span>应该非常轻量级及非常“薄（功能非常少，几乎全是委托）”，拦截用户请求并响应，表现层数据验证，负责根据请求委托给业务逻辑层进行业务处理，本层不实现任何业务逻辑，且提供用户交互界面；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><span class=\"bold\" style=\"font-weight:bold\">数据模型层：</span>数据模型定义，提供给各层使用，不应该算作三层架构中的某一层，因为数据模型可使用其他对象（如Map）代替之。</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n系统架构已选定，在此我们进行优化一下，因为在进行基于SSH的三层架构进行开发时通常会有一些通用功能、如通用DAO、通用Service、通用Action、通用翻页等等，因此我们再进行开发时都是基于通用功能进行的，能节省不少开发时间，从而可以使用这些节约的时间干自己想干的事情，如图10-4所示。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;<img alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/23/8f5bfe9b3f1338f52a3de3c3a81961ab__4.JPG\" style=\"border:0px\"></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n图10-4 基于通用层的三层架构</p>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n11.1.4项目搭建</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1、创建动态web工程：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 通过【File】&gt;【New】&gt;【other】&gt;【Web】&gt;【Dynamic Web Project】创建一个Web工程，如图11-5所示；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;<img alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/23/cfdb7186d8c3eacdbf4eadec8c0f3bab__5.JPG\" title=\"点击查看原始大小图片\" class=\"magplus\" width=\"700\" height=\"433\" style=\"border:0px\"></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n图11-5 Web工程配置</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>1、&nbsp;项目结构，如图11-6所示：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<img alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/23/c865d5be99e126383a18eb3fd04faaf2__6.JPG\" title=\"点击查看原始大小图片\" class=\"magplus\" width=\"700\" height=\"347\" style=\"border:0px\"></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n图11-6 项目结构</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>3、项目属性修改：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>3.1、字符编码修改，如图11-7所示，在实际项目中一定要统一字符编码：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;<img alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/23/ae9074fdb01624c1d9fe4e36e4382347__7.JPG\" style=\"border:0px\"></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n图11-7 修改项目字符编码</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3.2、类路径输出修改，如图11-8，将类路径输出改为/WEB-INF/classes下：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;<img alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/23/50c89de686a5ef691e0710376914ec66__8.JPG\" style=\"border:0px\"></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n图11-8 类路径修改</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4、准备jar包：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.1、Spring项目依赖包，到下载的spring-framework-3.0.5.RELEASE-with-docs.zip中拷贝如下jar包：</strong></p>\n<table cellspacing=\"0\" border=\"0\" cellpadding=\"0\" style=\"color:rgb(0,0,0); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<tbody>\n<tr>\n<td style=\"font-size:14px\">\n<div class=\"shape\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\ndist\\org.springframework.aop-3.0.5.RELEASE.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\ndist\\org.springframework.asm-3.0.5.RELEASE.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\ndist\\org.springframework.beans-3.0.5.RELEASE.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\ndist\\org.springframework.context-3.0.5.RELEASE.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\ndist\\org.springframework.core-3.0.5.RELEASE.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\ndist\\org.springframework.expression-3.0.5.RELEASE.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\ndist\\org.springframework.jdbc-3.0.5.RELEASE.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\ndist\\org.springframework.orm-3.0.5.RELEASE.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\ndist\\org.springframework.transaction-3.0.5.RELEASE.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\ndist\\org.springframework.web-3.0.5.RELEASE.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\n&nbsp;</p>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>&nbsp;</strong>&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.2、Spring及其他项目依赖包，到spring-framework-3.0.5.RELEASE-dependencies.zip中拷贝如下jar吧：</strong></p>\n<table cellspacing=\"0\" border=\"0\" cellpadding=\"0\" style=\"color:rgb(0,0,0); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<tbody>\n<tr>\n<td style=\"font-size:14px\">\n<div class=\"shape\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\ncom.springsource.net.sf.cglib-2.2.0.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\ncom.springsource.org.aopalliance-1.0.0.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\ncom.springsource.org.apache.commons.beanutils-1.8.0.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\ncom.springsource.org.apache.commons.collections-3.2.1.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\ncom.springsource.org.apache.commons.digester-1.8.1.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\ncom.springsource.org.apache.commons.logging-1.1.1.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\ncom.springsource.org.apache.log4j-1.2.15.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\ncom.springsource.org.apache.taglibs.standard-1.1.2.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\ncom.springsource.org.aspectj.weaver-1.6.8.RELEASE.jar</p>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<span class=\"bold\" style=\"font-weight:bold\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.3、Hibernate依赖包，到hibernate-distribution-3.6.0.Final.zip中拷贝如下jar包：</span></p>\n<table cellspacing=\"0\" border=\"0\" cellpadding=\"0\" style=\"color:rgb(0,0,0); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<tbody>\n<tr>\n<td style=\"font-size:14px\">\n<div class=\"shape\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nhibernate3.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nlib\\jpa\\hibernate-jpa-2.0-api-1.0.0.Final.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nlib\\required\\dom4j-1.6.1.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nlib\\required\\javassist-3.12.0.GA.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nlib\\required\\jta-1.1.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nlib\\ required \\slf4j-api-1.6.1.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nlib\\required\\antlr-2.7.6.jar</p>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<span class=\"bold\" style=\"font-weight:bold\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.4、数据库连接池依赖包，到proxool-0.9.1.zip中拷贝如下jar包：</span></p>\n<table cellspacing=\"0\" border=\"0\" cellpadding=\"0\" style=\"color:rgb(0,0,0); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<tbody>\n<tr>\n<td style=\"font-size:14px\">\n<div class=\"shape\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nlib\\proxool-0.9.1.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nlib\\proxool-cglib.jar</p>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<span class=\"bold\" style=\"font-weight:bold\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.5、准备mysql JDBC连接依赖包：</span></p>\n<table cellspacing=\"0\" border=\"0\" cellpadding=\"0\" style=\"color:rgb(0,0,0); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<tbody>\n<tr>\n<td style=\"font-size:14px\">\n<div class=\"shape\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nmysql-connector-java-5.1.10.jar</p>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<span class=\"bold\" style=\"font-weight:bold\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.6、slf4j依赖包准备，到下载的slf4j-1.6.1.zip包中拷贝如下jar包：</span></p>\n<table cellspacing=\"0\" border=\"0\" cellpadding=\"0\" style=\"color:rgb(0,0,0); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<tbody>\n<tr>\n<td style=\"font-size:14px\">\n<div class=\"shape\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nslf4j-log4j12-1.6.1.jar</p>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<span class=\"bold\" style=\"font-weight:bold\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4.7、Strut2依赖包，到struts-2.2.1.1.zip中拷贝如下jar包：</span></p>\n<table cellspacing=\"0\" border=\"0\" cellpadding=\"0\" style=\"color:rgb(0,0,0); font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<tbody>\n<tr>\n<td style=\"font-size:14px\">\n<div class=\"shape\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nlib\\struts2-core-2.2.1.1.jar &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nlib\\xwork-core-2.2.1.1.jar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nlib\\freemarker-2.3.16.jar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nlib\\ognl-3.0.jar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nlib\\struts2-spring-plugin-2.2.1.1.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nlib\\commons-fileupload-1.2.1.jar&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\n&nbsp;</p>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; jar包终于准备完了，是不是很头疼啊，在此推荐使用maven进行依赖管理，无需拷贝这么多jar包，而是通过配置方式来指定使用的依赖，具体maven知识请到官方网站http://maven.apache.org/了解。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<br>\n</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n</p>\n<h2 style=\"line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n11.2&nbsp; 实现通用层</h2>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n11.2.1&nbsp; 功能概述</h3>\n<p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n通过抽象通用的功能，从而复用，减少重复工作：</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\">对于一些通用的常量使用一个专门的常量类进行定义；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\">对于视图分页，也应该抽象出来，如JSP做出JSP标签；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\">通用的数据层代码，如通用的CRUD，减少重复劳动，节约时间；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\">通用的业务逻辑层代码，如通用的CRUD，减少重复劳动，节约时间；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\">通用的表现层代码，同样用于减少重复，并提供更好的代码结构规范。</li></ul>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n&nbsp;</h3>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n11.2.2 通用的常量定义</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 目标：在一个常量类中定义通用的常量的好处是如果需要修改这些常量&#20540;只需在一个地方修改即可，变的地方只有一处而不是多处。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 如默认分页大小如果在多处硬编码定义为10，突然发生变故需要将默认分页大小10为5，怎么办？如果当初我们提取出来放在一个通用的常量类中是不是只有一处变动。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:677.046875px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">package</span>&nbsp;cn.javass.commons;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>&nbsp;Constants&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">static</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">final</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">int</span>&nbsp;DEFAULT_PAGE_SIZE&nbsp;=&nbsp;<span class=\"number\" style=\"color:rgb(192,0,0)\">5</span>;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//默认分页大小</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">static</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">final</span>&nbsp;String&nbsp;DEFAULT_PAGE_NAME&nbsp;=&nbsp;<span class=\"string\" style=\"color:blue\">&quot;page&quot;</span>;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">static</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">final</span>&nbsp;String&nbsp;CONTEXT_PATH&nbsp;=&nbsp;<span class=\"string\" style=\"color:blue\">&quot;ctx&quot;</span>;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 如上代码定义了通用的常量，如默认分页大小。</p>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n&nbsp;</h3>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n11.2.2通用分页功能</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 分页功能是项目中必不可少的功能，因此通用分页功能十分有必要，有了通用的分页功能，即有了规范，从而保证视图页面的干净并节约了开发时间。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>1、&nbsp;分页对象定义，用于存放是否有上一页或下一页、当前页记录、当前页码、分页上下文，该对象是分页中必不可少对象，一般在业务逻辑层组装Page对象，然后传送到表现层展示，然后通用的分页标签使用该对象来决定如何显示分页：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:677.046875px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">package</span>&nbsp;cn.javass.commons.pagination;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">import</span>&nbsp;java.util.Collections;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">import</span>&nbsp;java.util.List;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>&nbsp;Page&lt;E&gt;&nbsp;{<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">/**&nbsp;表示分页中的一页。*/</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">boolean</span>&nbsp;hasPre;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//是否有上一页</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">boolean</span>&nbsp;hasNext;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//是否有下一页</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;List&lt;E&gt;&nbsp;items;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//当前页包含的记录列表</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">int</span>&nbsp;index;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//当前页页码(起始为1)</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//省略setter</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">int</span>&nbsp;getIndex()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">return</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">this</span>.index;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">boolean</span>&nbsp;isHasPre()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">return</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">this</span>.hasPre;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">boolean</span>&nbsp;isHasNext()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">return</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">this</span>.hasNext;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;List&lt;E&gt;&nbsp;getItems()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">return</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">this</span>.items&nbsp;==&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">null</span>&nbsp;?&nbsp;Collections.&lt;E&gt;emptyList()&nbsp;:&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">this</span>.items;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n2、&nbsp;&nbsp;<strong>分页标签实现</strong>，将使用Page对象数据决定如何展示分页，如图11-9和11-10所示：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<img alt=\"\" src=\"http://sishuok.com/forum/upload/2012/2/23/22713d9151cf1bf34f2ff9a28858d641__1.JPG\" title=\"点击查看原始大小图片\" class=\"magplus\" width=\"700\" height=\"94\" style=\"border:0px\">&nbsp;&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n图11-9 11-10 通用分页标签实现</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 图11-9和11-10展示了两种分页展示策略，由于分页标签和集成SSH没多大关系且不是必须的并由于篇幅问题不再列出分页标签源代码，有兴趣的朋友请参考cn.javass.commons.pagination.NavigationTag类文件。<a target=\"_blank\" target=\"_blank\" href=\"http://sishuok.com/forum/blogPost/list/2561.html\" style=\"color:rgb(233,101,14)\">代码下载地址</a></p>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n&nbsp;</h3>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Helvetica,Tahoma,Arial,sans-serif\">\n11.2.3 通用数据访问层</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 目标：通过抽象实现最基本的CURD操作，提高代码复用，可变部分按需实现。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>1、通用数据访问层接口定义</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:677.046875px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">package</span>&nbsp;cn.javass.commons.dao;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">import</span>&nbsp;java.io.Serializable;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">import</span>&nbsp;java.util.List;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">interface</span>&nbsp;IBaseDao&lt;M&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">extends</span>&nbsp;Serializable,&nbsp;PK&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">extends</span>&nbsp;Serializable&gt;&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;save(M&nbsp;model);<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//&nbsp;保存模型对象</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;saveOrUpdate(M&nbsp;model);<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//&nbsp;保存或更新模型对象</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;update(M&nbsp;model);<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//&nbsp;更新模型对象</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;merge(M&nbsp;model);<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//&nbsp;合并模型对象状态到底层会话</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;delete(PK&nbsp;id);<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//&nbsp;根据主键删除模型对象</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;M&nbsp;get(PK&nbsp;id);<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//&nbsp;根据主键获取模型对象</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">int</span>&nbsp;countAll();<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//统计模型对象对应数据库表中的记录数</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;List&lt;M&gt;&nbsp;listAll();<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//查询所有模型对象</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;List&lt;M&gt;&nbsp;listAll(<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">int</span>&nbsp;pn,&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">int</span>&nbsp;pageSize);<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//&nbsp;分页获取所有模型对象</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n通用DAO接口定义了如CRUD通用操作，而可变的（如查询所有已发布的接口，即有条件查询等）需要在相应DAO接口中定义，并通过泛型“M”指定数据模型类型和“PK”指定数据模型主键类型。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>2、通用数据访问层DAO实现</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n此处使用Hibernate实现，即实现是可变的，对业务逻辑层只提供面向接口编程，从而隐藏数据访问层实现细节。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n实现时首先通过反射获取数据模型类型信息，并根据这些信息获取Hibernate对应的数据模型的实体名，再根据实体名组装出通用的查询和统计记录的HQL，从而达到同样目的。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n注意我们为什么把实现生成HQL时放到init方法中而不是构造器中呢？因为SessionFactory是通过setter注入，setter注入晚于构造器注入，因此在构造器中使用SessionFactory会是null，因此放到init方法中，并在Spring配置文件中指定初始化方法为init来完成生成HQL。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:677.046875px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏', '2016-04-16 01:21:18', '0');
INSERT INTO `article` VALUES ('10074', '10003', 'spring基础知识汇总', '\n\n<h2 id=\"Spring简介\">Spring简介</h2>\n<p>Spring框架由Rod Johnson开发，2004年发布了Spring框架的第一版。Spring是一个从实际开发中抽取出来的框架，因此它完成了大量开发中的通用步骤，留给开发者的仅仅是与特定应用相关的部分，从而大大提高了企业应用的开发效率。</p>\n<p>Spring总结起来优点如下</p>\n<ul>\n<li>低侵入式设计，代码的污染极低</li><li>独立于各种应用服务器，基于Spring框架的应用，可以真正实现Write Once，Run Anywhere的承诺</li><li>Spring的IoC容器降低了业务对象替换的复杂性，提高了组件之间的解耦</li><li>Spring的AOP支持允许将一些通用任务如安全、事务、日志等进行集中式管理，从而提供了更好的复用</li><li>Spring的ORM和DAO提供了与第三方持久层框架的良好整合，并简化了底层的数据库访问</li><li>Spring的高度开放性，并不强制应用完全依赖于Spring，开发者可自由选用Spring框架的部分或全部</li></ul>\n<p>Spring框架的组成结构图如下所示</p>\n<p><img alt=\"spring-overview\" src=\"http://static.codeceo.com/images/2015/07/673670c9a34075831373b711cb8f21b7.png\">spring-overview</p>\n<h2 id=\"Spring的核心机制\">Spring的核心机制</h2>\n<h3 id=\"管理Bean\">管理Bean</h3>\n<p>程序主要是通过Spring容器来访问容器中的Bean，ApplicationContext是Spring容器最常用的接口，该接口有如下两个实现类</p>\n<ul>\n<li>ClassPathXmlApplicationContext: 从类加载路径下搜索配置文件，并根据配置文件来创建Spring容器</li><li>FileSystemXmlApplicationContext: 从文件系统的相对路径或绝对路径下去搜索配置文件，并根据配置文件来创建Spring容器</li></ul>\n<pre class=\"brush: java; gutter: false; first-line: 1\">public class BeanTest{\n    public static void main(String args[]) throws Exception{\n        ApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;beans.xml&quot;);\n        Person p = ctx.getBean(&quot;person&quot;, Person.class);\n        p.say();\n    }\n}</pre>\n<h3 id=\"Eclipse使用Spring\">Eclipse使用Spring</h3>\n<p>在Eclipse等IDE工具中，用户可以自建<code>User Library</code>，然后把Spring的Jar包都放入其中，当然也可以将Jar包直接放在项目的<code>/WEB-INF/lib</code>目录下，但是如果使用<code>User Library</code>，在项目发布时，需要将用户库所引用的Jar文件随应用一起发布，就是将User Library所使用的Jar复制到<code>/WEB-INF/lib</code>目录下，这是因为对于一个Web应用，Eclipse部署Web应用时不会将用户库的Jar文件复制到<code>/WEB-INF/lib</code>下，需要手动复制。</p>\n<h3 id=\"依赖注入\">依赖注入</h3>\n<p>Spring框架的核心功能有两个</p>\n<ul>\n<li>Spring容器作为超级大工厂，负责创建、管理所有的Java对象，这些Java对象被称为Bean</li><li>Spring容器管理容器中Bean之间的依赖关系，Spring使用一种被称为“依赖注入”的方式来管理Bean之间的依赖关系</li></ul>\n<p>使用依赖注入，不仅可以为Bean注入普通的属性&#20540;，还可以注入其他Bean的引用。依赖注入是一种优秀的解耦方式，其可以让Bean以配置文件组织在一起，而不是以硬编码的方式耦合在一起。</p>\n<h4 id=\"理解依赖注入\">理解依赖注入</h4>\n<p>Rod Johnson是第一个高度重视以配置文件来管理Java实例的协作关系的人，他给这种方式起了一个名字：控制反转（Inverse of Control，IoC）。后来Martine Fowler为这种方式起了另一个名称：依赖注入（Dependency Injection），因此不管是依赖注入，还是控制反转，其含义完全相同。当某个Java对象（调用者）需要调用另一个Java对象（被依赖对象）的方法时，在传统模式下通常有两种做法</p>\n<ol>\n<li>原始做法: 调用者<strong>主动</strong>创建被依赖对象，然后再调用被依赖对象的方法</li><li>简单工厂模式: 调用者先找到被依赖对象的工厂，然后<strong>主动</strong>通过工厂去获取被依赖对象，最后再调用被依赖对象的方法</li></ol>\n<p>注意上面的<strong>主动</strong>二字，这必然会导致调用者与被依赖对象实现类的硬编码耦合，非常不利于项目升级的维护。使用Spring框架之后，调用者无需<strong>主动</strong>获取被依赖对象，调用者只要<strong>被动</strong>接受Spring容器为调用者的成员变量赋&#20540;即可，由此可见，使用Spring后，调用者获取被依赖对象的方式由原来的主动获取，变成了被动接受——所以Rod Johnson称之为控制反转。</p>\n<p>另外从Spring容器的角度来看，Spring容器负责将被依赖对象赋&#20540;给调用者的成员变量——相当于为调用者注入它依赖的实例，因此Martine Fowler称之为依赖注入。</p>\n<h4 id=\"设&#20540;注入\">设&#20540;注入</h4>\n<p>设&#20540;注入是指IoC容器通过成员变量的setter方法来注入被依赖对象。这种注入方式简单、直观，因而在Spring的依赖注入里大量使用。</p>\n<h4 id=\"构造注入\">构造注入</h4>\n<p>利用构造器来设置依赖关系的方式，被称为构造注入。通俗来说，就是驱动Spring在底层以反射方式执行带指定参数的构造器，当执行带参数的构造器时，就可利用构造器参数对成员变量执行初始化——这就是构造注入的本质。</p>\n<h4 id=\"两种注入方式的对比\">两种注入方式的对比</h4>\n<p>设&#20540;注入有如下优点</p>\n<ul>\n<li>与传统的JavaBean的写法更相&#20284;，程序开发人员更容易理解、接受。通过setter方法设定依赖关系显得更加直观、自然</li><li>对于复杂的依赖关系，如果采用构造注入，会导致构造器过于臃肿，难以阅读。Spring在创建Bean实例时，需要同时实例化其依赖的全部实例，因而导致性能下降。而使用设&#20540;注入，则能避免这些问题。</li><li>尤其在某些成员变量可选的情况下，多参数的构造器更加笨重</li></ul>\n<p>构造注入优势如下</p>\n<ul>\n<li>构造注入可以在构造器中决定依赖关系的注入顺序，优先依赖的优先注入</li><li>对于依赖关系无需变化的Bean，构造注入更有用处。因为没有setter方法，所有的依赖关系全部在构造器内设定，无须担心后续的代码对依赖关系产生破坏</li><li>依赖关系只能在构造器中设定，则只有组件的创建者才能改变组件的依赖关系，对组件的调用者而言，组件内部的依赖关系完全透明，更符合高内聚的原则</li></ul>\n<p><strong><em>Notes</em></strong><br>\n建议采用设&#20540;注入为主，构造注入为辅的注入策略。对于依赖关系无须变化的注入，尽量采用构造注入；而其他依赖关系的注入，则考虑采用设&#20540;注入。</p>\n<h3 id=\"Spring容器中的Bean\">Spring容器中的Bean</h3>\n<p>对于开发者来说，开发者使用Spring框架主要是做两件事：①开发Bean；②配置Bean。对于Spring框架来说，它要做的就是根据配置文件来创建Bean实例，并调用Bean实例的方法完成“依赖注入”——这就是所谓IoC的本质。</p>\n<h4 id=\"容器中Bean的作用域\">容器中Bean的作用域</h4>\n<p>当通过Spring容器创建一个Bean实例时，不仅可以完成Bean实例的实例化，还可以为Bean指定特定的作用域。Spring支持如下五种作用域</p>\n<ol>\n<li>singleton: 单例模式，在整个Spring IoC容器中，singleton作用域的Bean将只生成一个实例</li><li>prototype: 每次通过容器的getBean()方法获取prototype作用域的Bean时，都将产生一个新的Bean实例</li><li>request: 对于一次HTTP请求，request作用域的Bean将只生成一个实例，这意味着，在同一次HTTP请求内，程序每次请求该Bean，得到的总是同一个实例。只有在Web应用中使用Spring时，该作用域才真正有效</li><li>对于一次HTTP会话，session作用域的Bean将只生成一个实例，这意味着，在同一次HTTP会话内，程序每次请求该Bean，得到的总是同一个实例。只有在Web应用中使用Spring时，该作用域才真正有效</li><li>global session: 每个全局的HTTP Session对应一个Bean实例。在典型的情况下，仅在使用portlet context的时候有效，同样只在Web应用中有效</li></ol>\n<p>如果不指定Bean的作用域，Spring默认使用singleton作用域。prototype作用域的Bean的创建、销毁代价比较大。而singleton作用域的Bean实例一旦创建成果，就可以重复使用。因此，应该尽量避免将Bean设置成prototype作用域。</p>\n<h3 id=\"使用自动装配注入合作者Bean\">使用自动装配注入合作者Bean</h3>\n<p>Spring能自动装配Bean与Bean之间的依赖关系，即无须使用ref显式指定依赖Bean，而是由Spring容器检查XML配置文件内容，根据某种规则，为调用者Bean注入被依赖的Bean。<br>\nSpring自动装配可通过<code>&lt;beans/&gt;</code>元素的<code>default-autowire</code>属性指定，该属性对配置文件中所有的Bean起作用；也可通过对<code>&lt;bean/&gt;</code>元素的<code>autowire</code>属性指定，该属性只对该Bean起作用。</p>\n<p><code>autowire</code>和<code>default-autowire</code>可以接受如下&#20540;</p>\n<ul>\n<li><code>no</code>: 不使用自动装配。Bean依赖必须通过ref元素定义。这是默认配置，在较大的部署环境中不鼓励改变这个配置，显式配置合作者能够得到更清晰的依赖关系</li><li><code>byName</code>: 根据setter方法名进行自动装配。Spring容器查找容器中全部Bean，找出其id与setter方法名去掉set前缀，并小写首字母后同名的Bean来完成注入。如果没有找到匹配的Bean实例，则Spring不会进行任何注入</li><li><code>byType</code>: 根据setter方法的形参类型来自动装配。Spring容器查找容器中的全部Bean，如果正好有一个Bean类型与setter方法的形参类型匹配，就自动注入这个Bean；如果找到多个这样的Bean，就抛出一个异常；如果没有找到这样的Bean，则什么都不会发生，setter方法不会被调用</li><li><code>constructor</code>: 与byType类&#20284;，区别是用于自动匹配构造器的参数。如果容器不能恰好找到一个与构造器参数类型匹配的Bean，则会抛出一个异常</li><li><code>autodetect</code>: Spring容器根据Bean内部结构，自行决定使用constructor或byType策略。如果找到一个默认的构造函数，那么就会应用byType策略</li></ul>\n<p><strong>当一个Bean既使用自动装配依赖，又使用ref显式指定依赖时，则显式指定的依赖覆盖自动装配依赖；对于大型的应用，不鼓励使用自动装配。虽然使用自动装配可减少配置文件的工作量，但大大将死了依赖关系的清晰性和透明性。依赖关系的装配依赖于源文件的属性名和属性类型，导致Bean与Bean之间的耦合降低到代码层次，不利于高层次解耦</strong></p>\n<pre class=\"brush: xml; gutter: false; first-line: 1\">&lt;!--通过设置可以将Bean排除在自动装配之外--&gt;\n&lt;bean id=&quot;&quot; autowire-candidate=&quot;false&quot;/&gt;\n\n&lt;!--除此之外，还可以在beans元素中指定，支持模式字符串，如下所有以abc结尾的Bean都被排除在自动装配之外--&gt;\n&lt;beans default-autowire-candidates=&quot;*abc&quot;/&gt;</pre>\n<h2 id=\"创建Bean的3种方式\">创建Bean的3种方式</h2>\n<h3 id=\"使用构造器创建Bean实例\">使用构造器创建Bean实例</h3>\n<p>使用构造器来创建Bean实例是最常见的情况，如果不采用构造注入，Spring底层会调用Bean类的无参数构造器来创建实例，因此要求该Bean类提供无参数的构造器。</p>\n<p>采用默认的构造器创建Bean实例，Spring对Bean实例的所有属性执行默认初始化，即所有的基本类型的&#20540;初始化为0或false；所有的引用类型的&#20540;初始化为null。</p>\n<h3 id=\"使用静态工厂方法创建Bean\">使用静态工厂方法创建Bean</h3>\n<p>使用静态工厂方法创建Bean实例时，class属性也必须指定，但此时class属性并不是指定Bean实例的实现类，而是静态工厂类，Spring通过该属性知道由哪个工厂类来创建Bean实例。</p>\n<p>除此之外，还需要使用factory-method属性来指定静态工厂方法，Spring将调用静态工厂方法返回一个Bean实例，一旦获得了指定Bean实例，Spring后面的处理步骤与采用普通方法创建Bean实例完全一样。如果静态工厂方法需要参数，则使用<code>&lt;constructor-arg.../&gt;</code>元素指定静态工厂方法的参数。</p>\n<h3 id=\"调用实例工厂方法创建Bean\">调用实例工厂方法创建Bean</h3>\n<p>实例工厂方法与静态工厂方法只有一个不同：调用静态工厂方法只需使用工厂类即可，而调用实例工厂方法则需要工厂实例。使用实例工厂方法时，配置Bean实例的<code>&lt;bean.../&gt;</code>元素无须class属性，配置实例工厂方法使用<code>factory-bean</code>指定工厂实例。<br>\n采用实例工厂方法创建Bean的<code>&lt;bean.../&gt;</code>元素时需要指定如下两个属性</p>\n<ul>\n<li>factory-bean: 该属性的&#20540;为工厂Bean的id</li><li>factory-method: 该属性指定实例工厂的工厂方法</li></ul>\n<p>若调用实例工厂方法时需要传入参数，则使用<code>&lt;constructor-arg.../&gt;</code>元素确定参数&#20540;。</p>\n<h2 id=\"协调作用域不同步的Bean\">协调作用域不同步的Bean</h2>\n<p>当singleton作用域的Bean依赖于prototype作用域的Bean时，会产生不同步的现象，原因是因为当Spring容器初始化时，容器会预初始化容器中所有的<code>singleton Bean</code>，由于<code>singleton Bean</code>依赖于<code>prototype Bean</code>，因此Spring在初始化<code>singleton Bean</code>之前，会先创建<code>prototypeBean</code>——然后才创建<code>singleton\n Bean</code>，接下里将<code>prototype Bean</code>注入<code>singleton Bean</code>。<br>\n解决不同步的方法有两种</p>\n<ul>\n<li>放弃依赖注入: singleton作用域的Bean每次需要prototype作用域的Bean时，主动向容器请求新的Bean实例，即可保证每次注入的<code>prototype Bean</code>实例都是最新的实例</li><li>利用方法注入: 方法注入通常使用lookup方法注入，使用lookup方法注入可以让Spring容器重写容器中Bean的抽象或具体方法，返回查找容器中其他Bean的结果，被查找的Bean通常是一个<code>non-singleton Bean</code>。Spring通过使用JDK动态代理或cglib库修改客户端的二进制码，从而实现上述要求</li></ul>\n<p>建议采用第二种方法，使用方法注入。为了使用lookup方法注入，大致需要如下两步</p>\n<ol>\n<li>将调用者Bean的实现类定义为抽象类，并定义一个抽象方法来获取被依赖的Bean</li><li>在<code>&lt;bean.../&gt;</code>元素中添加<code>&lt;lookup-method.../&gt;</code>子元素让Spring为调用者Bean的实现类实现指定的抽象方法</li></ol>\n<p><strong><em>Notes</em></strong></p>\n<blockquote>\n<p>Spring会采用运行时动态增强的方式来实现<code>&lt;lookup-method.../&gt;</code>元素所指定的抽象方法，如果目标抽象类实现过接口，Spring会采用JDK动态代理来实现该抽象类，并为之实现抽象方法；如果目标抽象类没有实现过接口，Spring会采用cglib实现该抽象类，并为之实现抽象方法。Spring4.0的spring-core-xxx.jar包中已经集成了cglib类库。</p>\n</blockquote>\n<h2 id=\"两种后处理器\">两种后处理器</h2>\n<p>Spring提供了两种常用的后处理器</p>\n<ul>\n<li>Bean后处理器: 这种后处理器会对容器中Bean进行后处理，对Bean进行额外加强</li><li>容器后处理器: 这种后处理器会对IoC容器进行后处理，用于增强容器功能</li></ul>\n<h3 id=\"Bean后处理器\">Bean后处理器</h3>\n<p>Bean后处理器是一种特殊的Bean，这种特殊的Bean并不对外提供服务，它甚至可以无须id属性，它主要负责对容器中的其他Bean执行后处理，例如为容器中的目标Bean生成代理等，这种Bean称为Bean后处理器。Bean后处理器会在Bean实例创建成功之后，对Bean实例进行进一步的增强处理。Bean后处理器必须实现<code>BeanPostProcessor</code>接口，同时必须实现该接口的两个方法。</p>\n<ol>\n<li><code>Object postProcessBeforeInitialization(Object bean, String name) throws BeansException</code>: 该方法的第一个参数是系统即将进行后处理的Bean实例，第二个参数是该Bean的配置id</li><li><code>Object postProcessAfterinitialization(Object bean, String name) throws BeansException</code>: 该方法的第一个参数是系统即将进行后处理的Bean实例，第二个参数是该Bean的配置id</li></ol>\n<p>容器中一旦注册了Bean后处理器，Bean后处理器就会自动启动，在容器中每个Bean创建时自动工作，Bean后处理器两个方法的回调时机如下图</p>\n<p><img alt=\"bean-post-process\" src=\"http://static.codeceo.com/images/2015/07/e8970a58f831cd7613b680ef0541e7c7.jpg\">bean-post-process</p>\n<p>注意一点，如果使用<code>BeanFactory</code>作为Spring容器，则必须手动注册Bean后处理器，程序必须获取Bean后处理器实例，然后手动注册。</p>\n<pre class=\"brush: java; gutter: false; first-line: 1\">BeanPostProcessor bp = (BeanPostProcessor)beanFactory.getBean(&quot;bp&quot;);\nbeanFactory.addBeanPostProcessor(bp);\nPerson p = (Person)beanFactory.getBean(&quot;person&quot;);</pre>\n<h3 id=\"容器后处理器\">容器后处理器</h3>\n<p>Bean后处理器负责处理容器中的所有Bean实例，而容器后处理器则负责处理容器本身。容器后处理器必须实现<code>BeanFactoryPostProcessor</code>接口，并实现该接口的一个方法<code>postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory)</code>实现该方法的方法体就是对Spring容器进行的处理，这种处理可以对Spring容器进行自定义扩展，当然也可以对Spring容器不进行任何处理。</p>\n<p>类&#20284;于<code>BeanPostProcessor</code>，<code>ApplicationContext</code>可自动检测到容器中的容器后处理器，并且自动注册容器后处理器。但若使用<code>BeanFactory</code>作为Spring容器，则必须手动调用该容器后处理器来处理<code>BeanFactory</code>容器。</p>\n<h2 id=\"Spring的“零配置”支持\">Spring的“零配置”支持</h2>\n<h3 id=\"搜索Bean类\">搜索Bean类</h3>\n<p>Spring提供如下几个Annotation来标注Spring Bean</p>\n<ul>\n<li><code>@Component</code>: 标注一个普通的Spring Bean类</li><li><code>@Controller</code>: 标注一个控制器组件类</li><li><code>@Service</code>: 标注一个业务逻辑组件类</li><li><code>@Repository</code>: 标注一个DAO组件类</li></ul>\n<p>在Spring配置文件中做如下配置，指定自动扫描的包</p>\n<pre class=\"brush: xml; gutter: false; first-line: 1\">&lt;context:component-scan base-package=&quot;edu.shu.spring.domain&quot;/&gt;</pre>\n<h3 id=\"使用@Resource配置依赖\">使用@Resource配置依赖</h3>\n<p><code>@Resource</code>位于<code>javax.annotation</code>包下，是来自JavaEE规范的一个<code>Annotation</code>，Spring直接借鉴了该<code>Annotation</code>，通过使用该<code>Annotation</code>为目标Bean指定协作者Bean。使用<code>@Resource</code>与<code>&lt;property.../&gt;</code>元素的ref属性有相同的效果。<br>\n<code>@Resource</code>不仅可以修饰setter方法，也可以直接修饰实例变量，如果使用<code>@Resource</code>修饰实例变量将会更加简单，此时Spring将会直接使用JavaEE规范的Field注入，此时连setter方法都可以不要。</p>\n<h3 id=\"使用@PostConstruct和@PreDestroy定制生命周期行为\">使用@PostConstruct和@PreDestroy定制生命周期行为</h3>\n<p><code>@PostConstruct</code>和<code>@PreDestroy</code>同样位于javax.annotation包下，也是来自JavaEE规范的两个Annotation，Spring直接借鉴了它们，用于定制Spring容器中Bean的生命周期行为。它们都用于修饰方法，无须任何属性。其中前者修饰的方法时Bean的初始化方法；而后者修饰的方法时Bean销毁之前的方法。</p>\n<h3 id=\"Spring4-0增强的自动装配和精确装配\">Spring4.0增强的自动装配和精确装配</h3>\n<p>Spring提供了<code>@Autowired</code>注解来指定自动装配，<code>@Autowired</code>可以修饰setter方法、普通方法、实例变量和构造器等。当使用<code>@Autowired</code>标注setter方法时，默认采用byType自动装配策略。在这种策略下，符合自动装配类型的候选Bean实例常常有多个，这个时候就可能引起异常，为了实现精确的自动装配，Spring提供了<code>@Qualifier</code>注解，通过使用<code>@Qualifier</code>，允许根据Bean的id来执行自动装配。</p>\n<h2 id=\"Spring的AOP\">Spring的AOP</h2>\n<h3 id=\"为什么需要AOP\">为什么需要AOP</h3>\n<p>AOP（Aspect Orient Programming）也就是面向切面编程，作为面向对象编程的一种补充，已经成为一种比较成熟的编程方式。其实AOP问世的时间并不太长，AOP和OOP互为补充，面向切面编程将程序运行过程分解成各个切面。</p>\n<p>AOP专门用于处理系统中分布于各个模块（不同方法）中的交叉关注点的问题，在JavaEE应用中，常常通过AOP来处理一些具有横切性质的系统级服务，如事务管理、安全检查、缓存、对象池管理等，AOP已经成为一种非常常用的解决方案。</p>\n<h3 id=\"使用AspectJ实现AOP\">使用AspectJ实现AOP</h3>\n<p>AspectJ是一个基于Java语言的AOP框架，提供了强大的AOP功能，其他很多AOP框架都借鉴或采纳其中的一些思想。其主要包括两个部分：一个部分定义了如何表达、定义AOP编程中的语法规范，通过这套语法规范，可以方便地用AOP来解决Java语言中存在的交叉关注点的问题；另一个部分是工具部分，包括编译、调试工具等。</p>\n<p>AOP实现可分为两类</p>\n<ol>\n<li>静态AOP实现: AOP框架在编译阶段对程序进行修改，即实现对目标类的增强，生成静态的AOP代理类，以AspectJ为代表</li><li>动态AOP实现: AOP框架在运行阶段动态生成AOP代理，以实现对目标对象的增强，以Spring AOP为代表</li></ol>\n<p>一般来说，静态AOP实现具有较好的性能，但需要使用特殊的编译器。动态AOP实现是纯Java实现，因此无须特殊的编译器，但是通常性能略差。</p>\n<h3 id=\"AOP的基本概念\">AOP的基本概念</h3>\n<p>关于面向切面编程的一些术语</p>\n<ul>\n<li>切面（Aspect）: 切面用于组织多个Advice，Advice放在切面中定义</li><li>连接点（Joinpoint）: 程序执行过程中明确的点，如方法的调用，或者异常的抛出。在Spring AOP中，连接点总是方法的调用</li><li>增强处理（Advice）: AOP框架在特定的切入点执行的增强处理。处理有“around”、“before”和“after”等类型</li><li>切入点（Pointcut）: 可以插入增强处理的连接点。简而言之，当某个连接点满足指定要求时，该连接点将被添加增强处理，该连接点也就变成了切入点</li></ul>\n<h3 id=\"Spring的AOP支持\">Spring的AOP支持</h3>\n<p>Spring中的AOP代理由Spring的IoC容器负责生成、管理，其依赖关系也由IoC容器负责管理。<br>\n为了在应用中使用<code>@AspectJ</code>支持，Spring需要添加三个库</p>\n<ul>\n<li><code>aspectjweaver.jar</code></li><li><code>aspectjrt.jar</code></li><li><code>aopalliance.jar</code></li></ul>\n<p>并在Spring配置文件中做如下配置</p>\n<pre class=\"brush: java; gutter: false; first-line: 1\">&lt;!--启动@AspectJ支持--&gt;\n&lt;aop:aspectj-autoproxy/&gt;\n\n&lt;!--指定自动搜索Bean组件、自动搜索切面类--&gt;\n&lt;context:component-scan base-package=&quot;edu.shu.sprint.service&quot;&gt;\n    &lt;context:include-filter type=&quot;annotation&quot; expression=&quot;org.aspectj.lang.annotation.Aspect&quot;/&gt;\n&lt;/context:component-scan&gt;</pre>\n   \n', '2016-04-16 01:21:18', '0');
INSERT INTO `article` VALUES ('10075', '10003', '给Java开发者的PlayFramework(2.4)介绍Part2：使用Play，Spring，J', '\n<h3>1. 介绍</h3><p>这篇文章会使用Play，Spring，JPA（hibernate）开发一个简单的CRUD功能，主要是为了介绍如何使用Play进行开发。</p><h3>2. 界面截图</h3><p><img alt=\"\" src=\"http://skaka.me/images/custom/20150818/play2_1.png\"> <img alt=\"\" src=\"http://skaka.me/images/custom/20150818/play2_2.png\"> 很简单的新增和查询功能。我们来看看代码如何实现。</p><h3>3. 代码实现</h3><h4>1. Model</h4><p>代码架构使用典型的MVC，分层为Controller-Service-Dao-Model。首先来看Model。</p><figure class=\"code\"><figcaption><span></span></figcaption><div class=\"highlight\"><table><tbody><tr><td class=\"gutter\"><pre class=\"line-numbers\"><span class=\"line-number\">1</span>\n<span class=\"line-number\">2</span>\n<span class=\"line-number\">3</span>\n<span class=\"line-number\">4</span>\n<span class=\"line-number\">5</span>\n<span class=\"line-number\">6</span>\n<span class=\"line-number\">7</span>\n<span class=\"line-number\">8</span>\n<span class=\"line-number\">9</span>\n<span class=\"line-number\">10</span>\n<span class=\"line-number\">11</span>\n<span class=\"line-number\">12</span>\n<span class=\"line-number\">13</span>\n<span class=\"line-number\">14</span>\n<span class=\"line-number\">15</span>\n<span class=\"line-number\">16</span>\n<span class=\"line-number\">17</span>\n<span class=\"line-number\">18</span>\n<span class=\"line-number\">19</span>\n<span class=\"line-number\">20</span>\n<span class=\"line-number\">21</span>\n<span class=\"line-number\">22</span>\n<span class=\"line-number\">23</span>\n<span class=\"line-number\">24</span>\n<span class=\"line-number\">25</span>\n<span class=\"line-number\">26</span>\n<span class=\"line-number\">27</span>\n<span class=\"line-number\">28</span>\n<span class=\"line-number\">29</span>\n<span class=\"line-number\">30</span>\n<span class=\"line-number\">31</span>\n<span class=\"line-number\">32</span>\n<span class=\"line-number\">33</span>\n<span class=\"line-number\">34</span>\n<span class=\"line-number\">35</span>\n<span class=\"line-number\">36</span>\n<span class=\"line-number\">37</span>\n<span class=\"line-number\">38</span>\n<span class=\"line-number\">39</span>\n<span class=\"line-number\">40</span>\n<span class=\"line-number\">41</span>\n<span class=\"line-number\">42</span>\n<span class=\"line-number\">43</span>\n<span class=\"line-number\">44</span>\n<span class=\"line-number\">45</span>\n<span class=\"line-number\">46</span>\n<span class=\"line-number\">47</span>\n<span class=\"line-number\">48</span>\n<span class=\"line-number\">49</span>\n<span class=\"line-number\">50</span>\n<span class=\"line-number\">51</span>\n<span class=\"line-number\">52</span>\n<span class=\"line-number\">53</span>\n<span class=\"line-number\">54</span>\n<span class=\"line-number\">55</span>\n<span class=\"line-number\">56</span>\n<span class=\"line-number\">57</span>\n<span class=\"line-number\">58</span>\n<span class=\"line-number\">59</span>\n<span class=\"line-number\">60</span>\n<span class=\"line-number\">61</span>\n<span class=\"line-number\">62</span>\n<span class=\"line-number\">63</span>\n<span class=\"line-number\">64</span>\n<span class=\"line-number\">65</span>\n<span class=\"line-number\">66</span>\n<span class=\"line-number\">67</span>\n</pre></td><td class=\"code\"><pre><code class=\"java\"><span class=\"line\"><span class=\"c1\">//省略了部分字段</span>\n</span><span class=\"line\"><span class=\"nd\">@Table</span><span class=\"o\">(</span><span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"s\">&quot;test_object&quot;</span><span class=\"o\">)</span>\n</span><span class=\"line\"><span class=\"nd\">@Entity</span>\n</span><span class=\"line\"><span class=\"kd\">public</span> <span class=\"kd\">class</span> <span class=\"nc\">TestObject</span> <span class=\"kd\">implements</span> <span class=\"n\">EntityClass</span><span class=\"o\">&lt;</span><span class=\"n\">Integer</span><span class=\"o\">&gt;,</span> <span class=\"n\">OperableData</span> <span class=\"o\">{</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"kd\">private</span> <span class=\"n\">Integer</span> <span class=\"n\">id</span><span class=\"o\">;</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"kd\">private</span> <span class=\"n\">String</span> <span class=\"n\">orderNo</span><span class=\"o\">;</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"cm\">/**</span>\n</span><span class=\"line\"><span class=\"cm\">     * 状态</span>\n</span><span class=\"line\"><span class=\"cm\">     */</span>\n</span><span class=\"line\">    <span class=\"kd\">private</span> <span class=\"n\">TestObjectStatus</span> <span class=\"n\">status</span><span class=\"o\">;</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"c1\">//...</span>\n</span><span class=\"line\">    <span class=\"cm\">/**</span>\n</span><span class=\"line\"><span class=\"cm\">     * 下单时间</span>\n</span><span class=\"line\"><span class=\"cm\">     */</span>\n</span><span class=\"line\">    <span class=\"kd\">private</span> <span class=\"n\">DateTime</span> <span class=\"n\">buyTime</span><span class=\"o\">;</span>\n</span><span class=\"line\">    <span class=\"c1\">//...</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"kd\">private</span> <span class=\"n\">List</span><span class=\"o\">&lt;</span><span class=\"n\">TestObjectItem</span><span class=\"o\">&gt;</span> <span class=\"n\">testObjectItemList</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"n\">ArrayList</span><span class=\"o\">&lt;&gt;(</span><span class=\"mi\">0</span><span class=\"o\">);</span>\n</span><span class=\"line\">\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"nd\">@OneToMany</span><span class=\"o\">(</span><span class=\"n\">fetch</span> <span class=\"o\">=</span> <span class=\"n\">FetchType</span><span class=\"o\">.</span><span class=\"na\">LAZY</span><span class=\"o\">,</span> <span class=\"n\">mappedBy</span> <span class=\"o\">=</span> <span class=\"s\">&quot;testObject&quot;</span><span class=\"o\">)</span>\n</span><span class=\"line\">    <span class=\"kd\">public</span> <span class=\"n\">List</span><span class=\"o\">&lt;</span><span class=\"n\">TestObjectItem</span><span class=\"o\">&gt;</span> <span class=\"nf\">getTestObjectItemList</span><span class=\"o\">()</span> <span class=\"o\">{</span>\n</span><span class=\"line\">        <span class=\"k\">return</span> <span class=\"n\">testObjectItemList</span><span class=\"o\">;</span>\n</span><span class=\"line\">    <span class=\"o\">}</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"kd\">public</span> <span class=\"kt\">void</span> <span class=\"nf\">setTestObjectItemList</span><span class=\"o\">(</span><span class=\"n\">List</span><span class=\"o\">&lt;</span><span class=\"n\">TestObjectItem</span><span class=\"o\">&gt;</span> <span class=\"n\">testObjectItemList</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n</span><span class=\"line\">        <span class=\"k\">this</span><span class=\"o\">.</span><span class=\"na\">testObjectItemList</span> <span class=\"o\">=</span> <span class=\"n\">testObjectItemList</span><span class=\"o\">;</span>\n</span><span class=\"line\">    <span class=\"o\">}</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"nd\">@GeneratedValue</span><span class=\"o\">(</span><span class=\"n\">strategy</span> <span class=\"o\">=</span> <span class=\"n\">GenerationType</span><span class=\"o\">.</span><span class=\"na\">AUTO</span><span class=\"o\">)</span>\n</span><span class=\"line\">    <span class=\"nd\">@Id</span>\n</span><span class=\"line\">    <span class=\"kd\">public</span> <span class=\"n\">Integer</span> <span class=\"nf\">getId</span><span class=\"o\">()</span> <span class=\"o\">{</span>\n</span><span class=\"line\">        <span class=\"k\">return</span> <span class=\"n\">id</span><span class=\"o\">;</span>\n</span><span class=\"line\">    <span class=\"o\">}</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"kd\">public</span> <span class=\"kt\">void</span> <span class=\"nf\">setId</span><span class=\"o\">(</span><span class=\"n\">Integer</span> <span class=\"n\">id</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n</span><span class=\"line\">        <span class=\"k\">this</span><span class=\"o\">.</span><span class=\"na\">id</span> <span class=\"o\">=</span> <span class=\"n\">id</span><span class=\"o\">;</span>\n</span><span class=\"line\">    <span class=\"o\">}</span>\n</span><span class=\"line\">\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"nd\">@Column</span><span class=\"o\">(</span><span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"s\">&quot;status&quot;</span><span class=\"o\">)</span>\n</span><span class=\"line\">    <span class=\"nd\">@Enumerated</span><span class=\"o\">(</span><span class=\"n\">EnumType</span><span class=\"o\">.</span><span class=\"na\">STRING</span><span class=\"o\">)</span>\n</span><span class=\"line\">    <span class=\"kd\">public</span> <span class=\"n\">TestObjectStatus</span> <span class=\"nf\">getStatus</span><span class=\"o\">()</span> <span class=\"o\">{</span>\n</span><span class=\"line\">        <span class=\"k\">return</span> <span class=\"n\">status</span><span class=\"o\">;</span>\n</span><span class=\"line\">    <span class=\"o\">}</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"kd\">public</span> <span class=\"kt\">void</span> <span class=\"nf\">setStatus</span><span class=\"o\">(</span><span class=\"n\">TestObjectStatus</span> <span class=\"n\">status</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n</span><span class=\"line\">        <span class=\"k\">this</span><span class=\"o\">.</span><span class=\"na\">status</span> <span class=\"o\">=</span> <span class=\"n\">status</span><span class=\"o\">;</span>\n</span><span class=\"line\">    <span class=\"o\">}</span>\n</span><span class=\"line\">\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"nd\">@Column</span><span class=\"o\">(</span><span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"s\">&quot;buy_time&quot;</span><span class=\"o\">)</span>\n</span><span class=\"line\">    <span class=\"nd\">@Type</span><span class=\"o\">(</span><span class=\"n\">type</span><span class=\"o\">=</span><span class=\"s\">&quot;org.jadira.usertype.dateandtime.joda.PersistentDateTime&quot;</span><span class=\"o\">)</span>\n</span><span class=\"line\">    <span class=\"kd\">public</span> <span class=\"n\">DateTime</span> <span class=\"nf\">getBuyTime</span><span class=\"o\">()</span> <span class=\"o\">{</span>\n</span><span class=\"line\">        <span class=\"k\">return</span> <span class=\"n\">buyTime</span><span class=\"o\">;</span>\n</span><span class=\"line\">    <span class=\"o\">}</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"kd\">public</span> <span class=\"kt\">void</span> <span class=\"nf\">setBuyTime</span><span class=\"o\">(</span><span class=\"n\">DateTime</span> <span class=\"n\">buyTime</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n</span><span class=\"line\">        <span class=\"k\">this</span><span class=\"o\">.</span><span class=\"na\">buyTime</span> <span class=\"o\">=</span> <span class=\"n\">buyTime</span><span class=\"o\">;</span>\n</span><span class=\"line\">    <span class=\"o\">}</span>\n</span><span class=\"line\">\n</span><span class=\"line\">\n</span><span class=\"line\"><span class=\"o\">}</span>\n</span></code></pre></td></tr></tbody></table></div></figure><p>很普通的Entity，使用JPA注解，唯一需要注意的是在处理枚举类型和Joda DateTime类型的时候用到了不同的类型注解。</p><h4>2. Dao</h4><figure class=\"code\"><figcaption><span></span></figcaption><div class=\"highlight\"><table><tbody><tr><td class=\"gutter\"><pre class=\"line-numbers\"><span class=\"line-number\">1</span>\n<span class=\"line-number\">2</span>\n<span class=\"line-number\">3</span>\n<span class=\"line-number\">4</span>\n<span class=\"line-number\">5</span>\n<span class=\"line-number\">6</span>\n<span class=\"line-number\">7</span>\n<span class=\"line-number\">8</span>\n<span class=\"line-number\">9</span>\n<span class=\"line-number\">10</span>\n<span class=\"line-number\">11</span>\n<span class=\"line-number\">12</span>\n<span class=\"line-number\">13</span>\n<span class=\"line-number\">14</span>\n<span class=\"line-number\">15</span>\n<span class=\"line-number\">16</span>\n<span class=\"line-number\">17</span>\n<span class=\"line-number\">18</span>\n<span class=\"line-number\">19</span>\n<span class=\"line-number\">20</span>\n<span class=\"line-number\">21</span>\n<span class=\"line-number\">22</span>\n<span class=\"line-number\">23</span>\n<span class=\"line-number\">24</span>\n<span class=\"line-number\">25</span>\n<span class=\"line-number\">26</span>\n<span class=\"line-number\">27</span>\n<span class=\"line-number\">28</span>\n<span class=\"line-number\">29</span>\n<span class=\"line-number\">30</span>\n<span class=\"line-number\">31</span>\n<span class=\"line-number\">32</span>\n<span class=\"line-number\">33</span>\n<span class=\"line-number\">34</span>\n<span class=\"line-number\">35</span>\n<span class=\"line-number\">36</span>\n<span class=\"line-number\">37</span>\n<span class=\"line-number\">38</span>\n<span class=\"line-number\">39</span>\n<span class=\"line-number\">40</span>\n<span class=\"line-number\">41</span>\n<span class=\"line-number\">42</span>\n<span class=\"line-number\">43</span>\n<span class=\"line-number\">44</span>\n<span class=\"line-number\">45</span>\n<span class=\"line-number\">46</span>\n<span class=\"line-number\">47</span>\n<span class=\"line-number\">48</span>\n<span class=\"line-number\">49</span>\n<span class=\"line-number\">50</span>\n<span class=\"line-number\">51</span>\n<span class=\"line-number\">52</span>\n<span class=\"line-number\">53</span>\n<span class=\"line-number\">54</span>\n<span class=\"line-number\">55</span>\n<span class=\"line-number\">56</span>\n<span class=\"line-number\">57</span>\n<span class=\"line-number\">58</span>\n<span class=\"line-number\">59</span>\n<span class=\"line-number\">60</span>\n<span class=\"line-number\">61</span>\n<span class=\"line-number\">62</span>\n<span class=\"line-number\">63</span>\n<span class=\"line-number\">64</span>\n<span class=\"line-number\">65</span>\n<span class=\"line-number\">66</span>\n<span class=\"line-number\">67</span>\n<span class=\"line-number\">68</span>\n<span class=\"line-number\">69</span>\n<span class=\"line-number\">70</span>\n<span class=\"line-number\">71</span>\n<span class=\"line-number\">72</span>\n<span class=\"line-number\">73</span>\n<span class=\"line-number\">74</span>\n<span class=\"line-number\">75</span>\n<span class=\"line-number\">76</span>\n<span class=\"line-number\">77</span>\n</pre></td><td class=\"code\"><pre><code class=\"java\"><span class=\"line\"><span class=\"c1\">//省略了部分方法</span>\n</span><span class=\"line\"><span class=\"nd\">@Repository</span>\n</span><span class=\"line\"><span class=\"kd\">public</span> <span class=\"kd\">class</span> <span class=\"nc\">GeneralDao</span> <span class=\"o\">{</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"nd\">@PersistenceContext</span>\n</span><span class=\"line\">    <span class=\"n\">EntityManager</span> <span class=\"n\">em</span><span class=\"o\">;</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"kd\">public</span> <span class=\"nf\">GeneralDao</span><span class=\"o\">(){}</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"kd\">public</span> <span class=\"nf\">GeneralDao</span><span class=\"o\">(</span><span class=\"n\">EntityManager</span> <span class=\"n\">em</span><span class=\"o\">)</span> <span class=\"o\">{</span><span class=\"k\">this</span><span class=\"o\">.</span><span class=\"na\">em</span> <span class=\"o\">=</span> <span class=\"n\">em</span><span class=\"o\">;}</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"kd\">public</span> <span class=\"n\">EntityManager</span> <span class=\"nf\">getEm</span><span class=\"o\">()</span> <span class=\"o\">{</span>\n</span><span class=\"line\">        <span class=\"k\">return</span> <span class=\"n\">em</span><span class=\"o\">;</span>\n</span><span class=\"line\">    <span class=\"o\">}</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"cm\">/**</span>\n</span><span class=\"line\"><span class=\"cm\">     * 使用jpql进行查询</span>\n</span><span class=\"line\"><span class=\"cm\">     * @param ql jpql</span>\n</span><span class=\"line\"><span class=\"cm\">     * @param page 分页对象,可选</span>\n</span><span class=\"line\"><span class=\"cm\">     * @param queryParams 查询参数</span>\n</span><span class=\"line\"><span class=\"cm\">     * @param &lt;T&gt;</span>\n</span><span class=\"line\"><span class=\"cm\">     * @return</span>\n</span><span class=\"line\"><span class=\"cm\">     */</span>\n</span><span class=\"line\">    <span class=\"kd\">public</span> <span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;</span> <span class=\"n\">List</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;</span> <span class=\"nf\">query</span><span class=\"o\">(</span><span class=\"n\">String</span> <span class=\"n\">ql</span><span class=\"o\">,</span> <span class=\"n\">Optional</span><span class=\"o\">&lt;</span><span class=\"n\">Page</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;&gt;</span> <span class=\"n\">page</span><span class=\"o\">,</span> <span class=\"n\">Map</span><span class=\"o\">&lt;</span><span class=\"n\">String</span><span class=\"o\">,</span> <span class=\"n\">Object</span><span class=\"o\">&gt;</span> <span class=\"n\">queryParams</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n</span><span class=\"line\">      <span class=\"c1\">//...</span>\n</span><span class=\"line\">    <span class=\"o\">}</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"cm\">/**</span>\n</span><span class=\"line\"><span class=\"cm\">     * 使用jpql进行数据更新操作</span>\n</span><span class=\"line\"><span class=\"cm\">     * @param ql</span>\n</span><span class=\"line\"><span class=\"cm\">     * @param queryParams</span>\n</span><span class=\"line\"><span class=\"cm\">     * @return</span>\n</span><span class=\"line\"><span class=\"cm\">     */</span>\n</span><span class=\"line\">    <span class=\"kd\">public</span> <span class=\"kt\">int</span> <span class=\"nf\">update</span><span class=\"o\">(</span><span class=\"n\">String</span> <span class=\"n\">ql</span><span class=\"o\">,</span> <span class=\"n\">Map</span><span class=\"o\">&lt;</span><span class=\"n\">String</span><span class=\"o\">,</span> <span class=\"n\">Object</span><span class=\"o\">&gt;</span> <span class=\"n\">queryParams</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n</span><span class=\"line\">      <span class=\"c1\">//...</span>\n</span><span class=\"line\">    <span class=\"o\">}</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"kd\">public</span> <span class=\"o\">&lt;</span><span class=\"n\">T</span> <span class=\"kd\">extends</span> <span class=\"n\">EntityClass</span><span class=\"o\">&lt;</span><span class=\"n\">Integer</span><span class=\"o\">&gt;&gt;</span> <span class=\"kt\">void</span> <span class=\"nf\">persist</span><span class=\"o\">(</span><span class=\"n\">T</span> <span class=\"n\">t</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n</span><span class=\"line\">        <span class=\"n\">setOperableDataIfNecessary</span><span class=\"o\">(</span><span class=\"n\">t</span><span class=\"o\">,</span> <span class=\"n\">t</span><span class=\"o\">.</span><span class=\"na\">getId</span><span class=\"o\">()</span> <span class=\"o\">==</span> <span class=\"kc\">null</span> <span class=\"o\">||</span> <span class=\"n\">t</span><span class=\"o\">.</span><span class=\"na\">getId</span><span class=\"o\">()</span> <span class=\"o\">==</span> <span class=\"mi\">0</span><span class=\"o\">);</span>\n</span><span class=\"line\">        <span class=\"n\">em</span><span class=\"o\">.</span><span class=\"na\">persist</span><span class=\"o\">(</span><span class=\"n\">t</span><span class=\"o\">);</span>\n</span><span class=\"line\">    <span class=\"o\">}</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"kd\">public</span> <span class=\"o\">&lt;</span><span class=\"n\">T</span> <span class=\"kd\">extends</span> <span class=\"n\">EntityClass</span><span class=\"o\">&lt;</span><span class=\"n\">Integer</span><span class=\"o\">&gt;&gt;</span> <span class=\"n\">T</span> <span class=\"nf\">merge</span><span class=\"o\">(</span><span class=\"n\">T</span> <span class=\"n\">t</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n</span><span class=\"line\">        <span class=\"n\">setOperableDataIfNecessary</span><span class=\"o\">(</span><span class=\"n\">t</span><span class=\"o\">,</span> <span class=\"n\">t</span><span class=\"o\">.</span><span class=\"na\">getId</span><span class=\"o\">()</span> <span class=\"o\">==</span> <span class=\"kc\">null</span> <span class=\"o\">||</span> <span class=\"n\">t</span><span class=\"o\">.</span><span class=\"na\">getId</span><span class=\"o\">()</span> <span class=\"o\">==</span> <span class=\"mi\">0</span><span class=\"o\">);</span>\n</span><span class=\"line\">        <span class=\"k\">return</span> <span class=\"n\">em</span><span class=\"o\">.</span><span class=\"na\">merge</span><span class=\"o\">(</span><span class=\"n\">t</span><span class=\"o\">);</span>\n</span><span class=\"line\">    <span class=\"o\">}</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"kd\">public</span> <span class=\"o\">&lt;</span><span class=\"n\">T</span> <span class=\"kd\">extends</span> <span class=\"n\">EntityClass</span><span class=\"o\">&lt;</span><span class=\"n\">Integer</span><span class=\"o\">&gt;&gt;</span> <span class=\"kt\">boolean</span> <span class=\"nf\">remove</span><span class=\"o\">(</span><span class=\"n\">T</span> <span class=\"n\">t</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n</span><span class=\"line\">        <span class=\"k\">if</span><span class=\"o\">(</span><span class=\"n\">t</span> <span class=\"o\">!=</span> <span class=\"kc\">null</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n</span><span class=\"line\">            <span class=\"n\">em</span><span class=\"o\">.</span><span class=\"na\">remove</span><span class=\"o\">(</span><span class=\"n\">t</span><span class=\"o\">);</span>\n</span><span class=\"line\">            <span class=\"k\">return</span> <span class=\"kc\">true</span><span class=\"o\">;</span>\n</span><span class=\"line\">        <span class=\"o\">}</span> <span class=\"k\">else</span> <span class=\"o\">{</span>\n</span><span class=\"line\">            <span class=\"k\">return</span> <span class=\"kc\">false</span><span class=\"o\">;</span>\n</span><span class=\"line\">        <span class=\"o\">}</span>\n</span><span class=\"line\">    <span class=\"o\">}</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"kd\">public</span> <span class=\"o\">&lt;</span><span class=\"n\">T</span> <span class=\"kd\">extends</span> <span class=\"n\">EntityClass</span><span class=\"o\">&lt;</span><span class=\"n\">Integer</span><span class=\"o\">&gt;&gt;</span> <span class=\"kt\">boolean</span> <span class=\"nf\">removeById</span><span class=\"o\">(</span><span class=\"n\">Class</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;</span> <span class=\"n\">type</span><span class=\"o\">,</span> <span class=\"n\">Integer</span> <span class=\"n\">id</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n</span><span class=\"line\">        <span class=\"n\">T</span> <span class=\"n\">t</span> <span class=\"o\">=</span> <span class=\"n\">get</span><span class=\"o\">(</span><span class=\"n\">type</span><span class=\"o\">,</span> <span class=\"n\">id</span><span class=\"o\">);</span>\n</span><span class=\"line\">        <span class=\"k\">return</span> <span class=\"nf\">remove</span><span class=\"o\">(</span><span class=\"n\">t</span><span class=\"o\">);</span>\n</span><span class=\"line\">    <span class=\"o\">}</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"kd\">public</span> <span class=\"o\">&lt;</span><span class=\"n\">T</span> <span class=\"kd\">extends</span> <span class=\"n\">EntityClass</span><span class=\"o\">&lt;</span><span class=\"n\">Integer</span><span class=\"o\">&gt;&gt;</span> <span class=\"n\">T</span> <span class=\"nf\">get</span><span class=\"o\">(</span><span class=\"n\">Class</span><span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;</span> <span class=\"n\">type</span><span class=\"o\">,</span> <span class=\"n\">Integer</span> <span class=\"n\">id</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n</span><span class=\"line\">        <span class=\"k\">return</span> <span class=\"n\">em</span><span class=\"o\">.</span><span class=\"na\">find</span><span class=\"o\">(</span><span class=\"n\">type</span><span class=\"o\">,</span> <span class=\"n\">id</span><span class=\"o\">);</span>\n</span><span class=\"line\">    <span class=\"o\">}</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"kd\">public</span> <span class=\"kt\">void</span> <span class=\"nf\">flush</span><span class=\"o\">()</span> <span class=\"o\">{</span>\n</span><span class=\"line\">        <span class=\"n\">em</span><span class=\"o\">.</span><span class=\"na\">flush</span><span class=\"o\">();</span>\n</span><span class=\"line\">    <span class=\"o\">}</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"kd\">public</span> <span class=\"o\">&lt;</span><span class=\"n\">T</span> <span class=\"kd\">extends</span> <span class=\"n\">EntityClass</span><span class=\"o\">&lt;</span><span class=\"n\">Integer</span><span class=\"o\">&gt;&gt;</span> <span class=\"kt\">void</span> <span class=\"nf\">refresh</span><span class=\"o\">(</span><span class=\"n\">T</span> <span class=\"n\">t</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n</span><span class=\"line\">        <span class=\"n\">em</span><span class=\"o\">.</span><span class=\"na\">refresh</span><span class=\"o\">(</span><span class=\"n\">t</span><span class=\"o\">);</span>\n</span><span class=\"line\">    <span class=\"o\">}</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"kd\">public</span> <span class=\"o\">&lt;</span><span class=\"n\">T</span> <span class=\"kd\">extends</span> <span class=\"n\">EntityClass</span><span class=\"o\">&lt;</span><span class=\"n\">Integer</span><span class=\"o\">&gt;&gt;</span> <span class=\"kt\">void</span> <span class=\"nf\">detach</span><span class=\"o\">(</span><span class=\"n\">T</span> <span class=\"n\">t</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n</span><span class=\"line\">        <span class=\"n\">em</span><span class=\"o\">.</span><span class=\"na\">detach</span><span class=\"o\">(</span><span class=\"n\">t</span><span class=\"o\">);</span>\n</span><span class=\"line\">    <span class=\"o\">}</span>\n</span><span class=\"line\"><span class=\"o\">}</span>\n</span></code></pre></td></tr></tbody></table></div></figure><p>这里使用的是通用Dao，一般的增删改查操作可以直接通过该Dao完成。可以看出这个Dao只是对JPA的EntityManager一个简单封装， 大部分操作还是委派给EntityManager完成。代码中也可以直接取得EntityManager进行操作。</p><!-- more --> <h4>3. Service</h4><figure class=\"code\"><figcaption><span></span></figcaption><div class=\"highlight\"><table><tbody><tr><td class=\"gutter\"><pre class=\"line-numbers\"><span class=\"line-number\">1</span>\n<span class=\"line-number\">2</span>\n<span class=\"line-number\">3</span>\n<span class=\"line-number\">4</span>\n<span class=\"line-number\">5</span>\n<span class=\"line-number\">6</span>\n<span class=\"line-number\">7</span>\n<span class=\"line-number\">8</span>\n<span class=\"line-number\">9</span>\n<span class=\"line-number\">10</span>\n<span class=\"line-number\">11</span>\n<span class=\"line-number\">12</span>\n<span class=\"line-number\">13</span>\n<span class=\"line-number\">14</span>\n<span class=\"line-number\">15</span>\n<span class=\"line-number\">16</span>\n<span class=\"line-number\">17</span>\n<span class=\"line-number\">18</span>\n<span class=\"line-number\">19</span>\n<span class=\"line-number\">20</span>\n<span class=\"line-number\">21</span>\n<span class=\"line-number\">22</span>\n<span class=\"line-number\">23</span>\n<span class=\"line-number\">24</span>\n<span class=\"line-number\">25</span>\n<span class=\"line-number\">26</span>\n<span class=\"line-number\">27</span>\n<span class=\"line-number\">28</span>\n<span class=\"line-number\">29</span>\n<span class=\"line-number\">30</span>\n<span class=\"line-number\">31</span>\n<span class=\"line-number\">32</span>\n<span class=\"line-number\">33</span>\n<span class=\"line-number\">34</span>\n<span class=\"line-number\">35</span>\n<span class=\"line-number\">36</span>\n<span class=\"line-number\">37</span>\n<span class=\"line-number\">38</span>\n<span class=\"line-number\">39</span>\n<span class=\"line-number\">40</span>\n<span class=\"line-number\">41</span>\n<span class=\"line-number\">42</span>\n<span class=\"line-number\">43</span>\n<span class=\"line-number\">44</span>\n<span class=\"line-number\">45</span>\n<span class=\"line-number\">46</span>\n<span class=\"line-number\">47</span>\n<span class=\"line-number\">48</span>\n<span class=\"line-number\">49</span>\n<span class=\"line-number\">50</span>\n<span class=\"line-number\">51</span>\n<span class=\"line-number\">52</span>\n<span class=\"line-number\">53</span>\n<span class=\"line-number\">54</span>\n<span class=\"line-number\">55</span>\n<span class=\"line-number\">56</span>\n<span class=\"line-number\">57</span>\n<span class=\"line-number\">58</span>\n<span class=\"line-number\">59</span>\n<span class=\"line-number\">60</span>\n<span class=\"line-number\">61</span>\n<span class=\"line-number\">62</span>\n</pre></td><td class=\"code\"><pre><code class=\"java\"><span class=\"line\"><span class=\"c1\">//省略了部分方法</span>\n</span><span class=\"line\"><span class=\"nd\">@Service</span>\n</span><span class=\"line\"><span class=\"kd\">public</span> <span class=\"kd\">class</span> <span class=\"nc\">TestObjectService</span> <span class=\"o\">{</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"nd\">@PersistenceContext</span>\n</span><span class=\"line\">    <span class=\"n\">EntityManager</span> <span class=\"n\">em</span><span class=\"o\">;</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"nd\">@Autowired</span>\n</span><span class=\"line\">    <span class=\"n\">GeneralDao</span> <span class=\"n\">generalDao</span><span class=\"o\">;</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"nd\">@Transactional</span><span class=\"o\">(</span><span class=\"n\">readOnly</span> <span class=\"o\">=</span> <span class=\"kc\">true</span><span class=\"o\">)</span>\n</span><span class=\"line\">    <span class=\"kd\">public</span> <span class=\"n\">List</span><span class=\"o\">&lt;</span><span class=\"n\">TestObject</span><span class=\"o\">&gt;</span> <span class=\"nf\">findByKey</span><span class=\"o\">(</span><span class=\"n\">Optional</span><span class=\"o\">&lt;</span><span class=\"n\">Page</span><span class=\"o\">&lt;</span><span class=\"n\">TestObject</span><span class=\"o\">&gt;&gt;</span> <span class=\"n\">page</span><span class=\"o\">,</span> <span class=\"n\">Optional</span><span class=\"o\">&lt;</span><span class=\"n\">String</span><span class=\"o\">&gt;</span> <span class=\"n\">orderNo</span><span class=\"o\">,</span> <span class=\"n\">Optional</span><span class=\"o\">&lt;</span><span class=\"n\">TestObjectStatus</span><span class=\"o\">&gt;</span> <span class=\"n\">status</span><span class=\"o\">,</span>\n</span><span class=\"line\">            <span class=\"n\">Optional</span><span class=\"o\">&lt;</span><span class=\"n\">DateTime</span><span class=\"o\">&gt;</span> <span class=\"n\">createTimeStart</span><span class=\"o\">,</span> <span class=\"n\">Optional</span><span class=\"o\">&lt;</span><span class=\"n\">DateTime</span><span class=\"o\">&gt;</span> <span class=\"n\">createTimeEnd</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n</span><span class=\"line\">\n</span><span class=\"line\">        <span class=\"n\">CriteriaBuilder</span> <span class=\"n\">cb</span> <span class=\"o\">=</span> <span class=\"n\">em</span><span class=\"o\">.</span><span class=\"na\">getCriteriaBuilder</span><span class=\"o\">();</span>\n</span><span class=\"line\">        <span class=\"n\">CriteriaQuery</span><span class=\"o\">&lt;</span><span class=\"n\">TestObject</span><span class=\"o\">&gt;</span> <span class=\"n\">cq</span> <span class=\"o\">=</span> <span class=\"n\">cb</span><span class=\"o\">.</span><span class=\"na\">createQuery</span><span class=\"o\">(</span><span class=\"n\">TestObject</span><span class=\"o\">.</span><span class=\"na\">class</span><span class=\"o\">);</span>\n</span><span class=\"line\">        <span class=\"n\">Root</span><span class=\"o\">&lt;</span><span class=\"n\">TestObject</span><span class=\"o\">&gt;</span> <span class=\"n\">order</span> <span class=\"o\">=</span> <span class=\"n\">cq</span><span class=\"o\">.</span><span class=\"na\">from</span><span class=\"o\">(</span><span class=\"n\">TestObject</span><span class=\"o\">.</span><span class=\"na\">class</span><span class=\"o\">);</span>\n</span><span class=\"line\">\n</span><span class=\"line\">        <span class=\"n\">List</span><span class=\"o\">&lt;</span><span class=\"n\">Predicate</span><span class=\"o\">&gt;</span> <span class=\"n\">predicateList</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"n\">ArrayList</span><span class=\"o\">&lt;&gt;();</span>\n</span><span class=\"line\">        <span class=\"k\">if</span><span class=\"o\">(</span><span class=\"n\">orderNo</span><span class=\"o\">.</span><span class=\"na\">isPresent</span><span class=\"o\">())</span> <span class=\"o\">{</span>\n</span><span class=\"line\">            <span class=\"n\">predicateList</span><span class=\"o\">.</span><span class=\"na\">add</span><span class=\"o\">(</span><span class=\"n\">cb</span><span class=\"o\">.</span><span class=\"na\">equal</span><span class=\"o\">(</span><span class=\"n\">order</span><span class=\"o\">.</span><span class=\"na\">get</span><span class=\"o\">(</span><span class=\"s\">&quot;orderNo&quot;</span><span class=\"o\">),</span> <span class=\"n\">orderNo</span><span class=\"o\">.</span><span class=\"na\">get</span><span class=\"o\">()));</span>\n</span><span class=\"line\">        <span class=\"o\">}</span>\n</span><span class=\"line\">        <span class=\"k\">if</span><span class=\"o\">(</span><span class=\"n\">createTimeStart</span><span class=\"o\">.</span><span class=\"na\">isPresent</span><span class=\"o\">())</span> <span class=\"o\">{</span>\n</span><span class=\"line\">            <span class=\"n\">predicateList</span><span class=\"o\">.</span><span class=\"na\">add</span><span class=\"o\">(</span><span class=\"n\">cb</span><span class=\"o\">.</span><span class=\"na\">greaterThanOrEqualTo</span><span class=\"o\">(</span><span class=\"n\">order</span><span class=\"o\">.</span><span class=\"na\">get</span><span class=\"o\">(</span><span class=\"s\">&quot;createTime&quot;</span><span class=\"o\">),</span> <span class=\"n\">createTimeStart</span><span class=\"o\">.</span><span class=\"na\">get</span><span class=\"o\">()));</span>\n</span><span class=\"line\">        <span class=\"o\">}</span>\n</span><span class=\"line\">        <span class=\"k\">if</span><span class=\"o\">(</span><span class=\"n\">createTimeEnd</span><span class=\"o\">.</span><span class=\"na\">isPresent</span><span class=\"o\">())</span> <span class=\"o\">{</span>\n</span><span class=\"line\">            <span class=\"n\">predicateList</span><span class=\"o\">.</span><span class=\"na\">add</span><span class=\"o\">(</span><span class=\"n\">cb</span><span class=\"o\">.</span><span class=\"na\">lessThanOrEqualTo</span><span class=\"o\">(</span><span class=\"n\">order</span><span class=\"o\">.</span><span class=\"na\">get</span><span class=\"o\">(</span><span class=\"s\">&quot;createTime&quot;</span><span class=\"o\">),</span> <span class=\"n\">createTimeEnd</span><span class=\"o\">.</span><span class=\"na\">get</span><span class=\"o\">()));</span>\n</span><span class=\"line\">        <span class=\"o\">}</span>\n</span><span class=\"line\">        <span class=\"k\">if</span><span class=\"o\">(</span><span class=\"n\">status</span><span class=\"o\">.</span><span class=\"na\">isPresent</span><span class=\"o\">())</span> <span class=\"o\">{</span>\n</span><span class=\"line\">            <span class=\"n\">predicateList</span><span class=\"o\">.</span><span class=\"na\">add</span><span class=\"o\">(</span><span class=\"n\">cb</span><span class=\"o\">.</span><span class=\"na\">equal</span><span class=\"o\">(</span><span class=\"n\">order</span><span class=\"o\">.</span><span class=\"na\">get</span><span class=\"o\">(</span><span class=\"s\">&quot;status&quot;</span><span class=\"o\">),</span> <span class=\"n\">status</span><span class=\"o\">.</span><span class=\"na\">get</span><span class=\"o\">()));</span>\n</span><span class=\"line\">        <span class=\"o\">}</span>\n</span><span class=\"line\">\n</span><span class=\"line\">        <span class=\"n\">cq</span><span class=\"o\">.</span><span class=\"na\">select</span><span class=\"o\">(</span><span class=\"n\">order</span><span class=\"o\">).</span><span class=\"na\">where</span><span class=\"o\">(</span><span class=\"n\">predicateList</span><span class=\"o\">.</span><span class=\"na\">toArray</span><span class=\"o\">(</span><span class=\"k\">new</span> <span class=\"n\">Predicate</span><span class=\"o\">[</span><span class=\"n\">predicateList</span><span class=\"o\">.</span><span class=\"na\">size</span><span class=\"o\">()])).</span><span class=\"na\">orderBy</span><span class=\"o\">(</span><span class=\"n\">cb</span><span class=\"o\">.</span><span class=\"na\">desc</span><span class=\"o\">(</span><span class=\"n\">order</span><span class=\"o\">.</span><span class=\"na\">get</span><span class=\"o\">(</span><span class=\"s\">&quot;updateTime&quot;</span><span class=\"o\">)));</span>\n</span><span class=\"line\">\n</span><span class=\"line\">        <span class=\"n\">TypedQuery</span><span class=\"o\">&lt;</span><span class=\"n\">TestObject</span><span class=\"o\">&gt;</span> <span class=\"n\">query</span> <span class=\"o\">=</span> <span class=\"n\">em</span><span class=\"o\">.</span><span class=\"na\">createQuery</span><span class=\"o\">(</span><span class=\"n\">cq</span><span class=\"o\">);</span>\n</span><span class=\"line\">\n</span><span class=\"line\">        <span class=\"k\">if</span><span class=\"o\">(</span><span class=\"n\">page</span><span class=\"o\">.</span><span class=\"na\">isPresent</span><span class=\"o\">())</span> <span class=\"o\">{</span>\n</span><span class=\"line\">            <span class=\"n\">CriteriaQuery</span><span class=\"o\">&lt;</span><span class=\"n\">Long</span><span class=\"o\">&gt;</span> <span class=\"n\">countCq</span> <span class=\"o\">=</span> <span class=\"n\">cb</span><span class=\"o\">.</span><span class=\"na\">createQuery</span><span class=\"o\">(</span><span class=\"n\">Long</span><span class=\"o\">.</span><span class=\"na\">class</span><span class=\"o\">);</span>\n</span><span class=\"line\">            <span class=\"n\">countCq</span><span class=\"o\">.</span><span class=\"na\">select</span><span class=\"o\">(</span><span class=\"n\">cb</span><span class=\"o\">.</span><span class=\"na\">count</span><span class=\"o\">(</span><span class=\"n\">countCq</span><span class=\"o\">.</span><span class=\"na\">from</span><span class=\"o\">(</span><span class=\"n\">TestObject</span><span class=\"o\">.</span><span class=\"na\">class</span><span class=\"o\">))).</span><span class=\"na\">where</span><span class=\"o\">(</span><span class=\"n\">predicateList</span><span class=\"o\">.</span><span class=\"na\">toArray</span><span class=\"o\">(</span><span class=\"k\">new</span> <span class=\"n\">Predicate</span><span class=\"o\">[</span><span class=\"n\">predicateList</span><span class=\"o\">.</span><span class=\"na\">size</span><span class=\"o\">()]));</span>\n</span><span class=\"line\">            <span class=\"n\">Long</span> <span class=\"n\">count</span> <span class=\"o\">=</span> <span class=\"n\">em</span><span class=\"o\">.</span><span class=\"na\">createQuery</span><span class=\"o\">(</span><span class=\"n\">countCq</span><span class=\"o\">).</span><span class=\"na\">getSingleResult</span><span class=\"o\">();</span>\n</span><span class=\"line\">            <span class=\"n\">page</span><span class=\"o\">.</span><span class=\"na\">get</span><span class=\"o\">().</span><span class=\"na\">setTotalCount</span><span class=\"o\">(</span><span class=\"n\">count</span><span class=\"o\">.</span><span class=\"na\">intValue</span><span class=\"o\">());</span>\n</span><span class=\"line\">\n</span><span class=\"line\">            <span class=\"n\">query</span><span class=\"o\">.</span><span class=\"na\">setFirstResult</span><span class=\"o\">(</span><span class=\"n\">page</span><span class=\"o\">.</span><span class=\"na\">get</span><span class=\"o\">().</span><span class=\"na\">getStart</span><span class=\"o\">());</span>\n</span><span class=\"line\">            <span class=\"n\">query</span><span class=\"o\">.</span><span class=\"na\">setMaxResults</span><span class=\"o\">(</span><span class=\"n\">page</span><span class=\"o\">.</span><span class=\"na\">get</span><span class=\"o\">().</span><span class=\"na\">getLimit</span><span class=\"o\">());</span>\n</span><span class=\"line\">        <span class=\"o\">}</span>\n</span><span class=\"line\">\n</span><span class=\"line\">        <span class=\"n\">List</span><span class=\"o\">&lt;</span><span class=\"n\">TestObject</span><span class=\"o\">&gt;</span> <span class=\"n\">results</span> <span class=\"o\">=</span> <span class=\"n\">query</span><span class=\"o\">.</span><span class=\"na\">getResultList</span><span class=\"o\">();</span>\n</span><span class=\"line\">\n</span><span class=\"line\">        <span class=\"k\">if</span><span class=\"o\">(</span><span class=\"n\">page</span><span class=\"o\">.</span><span class=\"na\">isPresent</span><span class=\"o\">())</span> <span class=\"o\">{</span>\n</span><span class=\"line\">            <span class=\"n\">page</span><span class=\"o\">.</span><span class=\"na\">get</span><span class=\"o\">().</span><span class=\"na\">setResult</span><span class=\"o\">(</span><span class=\"n\">results</span><span class=\"o\">);</span>\n</span><span class=\"line\">        <span class=\"o\">}</span>\n</span><span class=\"line\">\n</span><span class=\"line\">        <span class=\"k\">return</span> <span class=\"n\">results</span><span class=\"o\">;</span>\n</span><span class=\"line\">    <span class=\"o\">}</span>\n</span><span class=\"line\">\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"nd\">@Transactional</span><span class=\"o\">(</span><span class=\"n\">readOnly</span> <span class=\"o\">=</span> <span class=\"kc\">true</span><span class=\"o\">)</span>\n</span><span class=\"line\">    <span class=\"kd\">public</span> <span class=\"n\">TestObject</span> <span class=\"nf\">get</span><span class=\"o\">(</span><span class=\"n\">Integer</span> <span class=\"n\">id</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n</span><span class=\"line\">        <span class=\"k\">return</span> <span class=\"n\">generalDao</span><span class=\"o\">.</span><span class=\"na\">get</span><span class=\"o\">(</span><span class=\"n\">TestObject</span><span class=\"o\">.</span><span class=\"na\">class</span><span class=\"o\">,</span> <span class=\"n\">id</span><span class=\"o\">);</span>\n</span><span class=\"line\">    <span class=\"o\">}</span>\n</span><span class=\"line\">\n</span><span class=\"line\"><span class=\"o\">}</span>\n</span></code></pre></td></tr></tbody></table></div></figure><p>findByKey方法是一个查询方法，这里使用的是JPA的Criteria查询。Service类没有使用接口，只有实现类。Service就是一个Spring管理的Bean， 事务边界在Service层。</p><h4>4. Controller</h4><figure class=\"code\"><figcaption><span></span></figcaption><div class=\"highlight\"><table><tbody><tr><td class=\"gutter\"><pre class=\"line-numbers\"><span class=\"line-number\">1</span>\n<span class=\"line-number\">2</span>\n<span class=\"line-number\">3</span>\n<span class=\"line-number\">4</span>\n<span class=\"line-number\">5</span>\n<span class=\"line-number\">6</span>\n<span class=\"line-number\">7</span>\n<span class=\"line-number\">8</span>\n<span class=\"line-number\">9</span>\n<span class=\"line-number\">10</span>\n<span class=\"line-number\">11</span>\n<span class=\"line-number\">12</span>\n<span class=\"line-number\">13</span>\n<span class=\"line-number\">14</span>\n<span class=\"line-number\">15</span>\n<span class=\"line-number\">16</span>\n<span class=\"line-number\">17</span>\n<span class=\"line-number\">18</span>\n<span class=\"line-number\">19</span>\n<span class=\"line-number\">20</span>\n<span class=\"line-number\">21</span>\n<span class=\"line-number\">22</span>\n<span class=\"line-number\">23</span>\n<span class=\"line-number\">24</span>\n<span class=\"line-number\">25</span>\n<span class=\"line-number\">26</span>\n</pre></td><td class=\"code\"><pre><code class=\"java\"><span class=\"line\"><span class=\"c1\">//省略了部分方法</span>\n</span><span class=\"line\"><span class=\"nd\">@org.springframework.stereotype.Controller</span>\n</span><span class=\"line\"><span class=\"kd\">public</span> <span class=\"kd\">class</span> <span class=\"nc\">TestObjectController</span> <span class=\"kd\">extends</span> <span class=\"n\">Controller</span> <span class=\"o\">{</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"nd\">@Autowired</span>\n</span><span class=\"line\">    <span class=\"kd\">private</span> <span class=\"n\">TestObjectService</span> <span class=\"n\">testObjectService</span><span class=\"o\">;</span>\n</span><span class=\"line\">\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"kd\">public</span> <span class=\"n\">Result</span> <span class=\"nf\">list</span><span class=\"o\">(</span><span class=\"n\">String</span> <span class=\"n\">status</span><span class=\"o\">,</span> <span class=\"n\">String</span> <span class=\"n\">orderNo</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n</span><span class=\"line\">\n</span><span class=\"line\">        <span class=\"n\">List</span><span class=\"o\">&lt;</span><span class=\"n\">TestObject</span><span class=\"o\">&gt;</span> <span class=\"n\">testObjectList</span> <span class=\"o\">=</span> <span class=\"n\">testObjectService</span><span class=\"o\">.</span><span class=\"na\">findByKey</span><span class=\"o\">(</span><span class=\"n\">of</span><span class=\"o\">(</span><span class=\"n\">PageFactory</span><span class=\"o\">.</span><span class=\"na\">getPage</span><span class=\"o\">(</span><span class=\"n\">request</span><span class=\"o\">())),</span> <span class=\"n\">ofNullable</span><span class=\"o\">(</span><span class=\"n\">orderNo</span><span class=\"o\">),</span>\n</span><span class=\"line\">                <span class=\"n\">ofNullable</span><span class=\"o\">(</span><span class=\"n\">status</span><span class=\"o\">).</span><span class=\"na\">map</span><span class=\"o\">(</span><span class=\"nl\">TestObjectStatus:</span><span class=\"o\">:</span><span class=\"n\">valueOf</span><span class=\"o\">),</span> <span class=\"n\">empty</span><span class=\"o\">(),</span> <span class=\"n\">empty</span><span class=\"o\">());</span>\n</span><span class=\"line\">\n</span><span class=\"line\">        <span class=\"k\">return</span> <span class=\"nf\">ok</span><span class=\"o\">(</span><span class=\"n\">list</span><span class=\"o\">.</span><span class=\"na\">render</span><span class=\"o\">(</span><span class=\"n\">testObjectList</span><span class=\"o\">));</span>\n</span><span class=\"line\">    <span class=\"o\">}</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"kd\">public</span> <span class=\"n\">Result</span> <span class=\"nf\">addPage</span><span class=\"o\">()</span> <span class=\"o\">{</span>\n</span><span class=\"line\">        <span class=\"k\">return</span> <span class=\"nf\">ok</span><span class=\"o\">(</span><span class=\"n\">add</span><span class=\"o\">.</span><span class=\"na\">render</span><span class=\"o\">(</span><span class=\"n\">Form</span><span class=\"o\">.</span><span class=\"na\">form</span><span class=\"o\">(</span><span class=\"n\">TestObject</span><span class=\"o\">.</span><span class=\"na\">class</span><span class=\"o\">)));</span>\n</span><span class=\"line\">    <span class=\"o\">}</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"kd\">public</span> <span class=\"n\">Result</span> <span class=\"nf\">updatePage</span><span class=\"o\">(</span><span class=\"n\">Integer</span> <span class=\"n\">id</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n</span><span class=\"line\">        <span class=\"k\">return</span> <span class=\"nf\">ok</span><span class=\"o\">(</span><span class=\"n\">update</span><span class=\"o\">.</span><span class=\"na\">render</span><span class=\"o\">(</span><span class=\"n\">Form</span><span class=\"o\">.</span><span class=\"na\">form</span><span class=\"o\">(</span><span class=\"n\">TestObject</span><span class=\"o\">.</span><span class=\"na\">class</span><span class=\"o\">).</span><span class=\"na\">fill</span><span class=\"o\">(</span><span class=\"n\">testObjectService</span><span class=\"o\">.</span><span class=\"na\">get</span><span class=\"o\">(</span><span class=\"n\">id</span><span class=\"o\">))));</span>\n</span><span class=\"line\">    <span class=\"o\">}</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"c1\">//...</span>\n</span><span class=\"line\"><span class=\"o\">}</span>\n</span></code></pre></td></tr></tbody></table></div></figure><p>Controller继承play.mvc.Controller。和SpringMVC一样，在Play中，Controller就是一系列Action的集合。例如我开发用户有关的功能， 那么我就建一个UserController，然后把用户的CRUD方法都放在UserController里，每个方法都有自己的路由规则。这里我们先来看list方法：</p><figure class=\"code\"><figcaption><span></span></figcaption><div class=\"highlight\"><table><tbody><tr><td class=\"gutter\"><pre class=\"line-numbers\"><span class=\"line-number\">1</span>\n<span class=\"line-number\">2</span>\n<span class=\"line-number\">3</span>\n<span class=\"line-number\">4</span>\n<span class=\"line-number\">5</span>\n<span class=\"line-number\">6</span>\n<span class=\"line-number\">7</span>\n</pre></td><td class=\"code\"><pre><code class=\"java\"><span class=\"line\"><span class=\"kd\">public</span> <span class=\"n\">Result</span> <span class=\"nf\">list</span><span class=\"o\">(</span><span class=\"n\">String</span> <span class=\"n\">status</span><span class=\"o\">,</span> <span class=\"n\">String</span> <span class=\"n\">orderNo</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"n\">List</span><span class=\"o\">&lt;</span><span class=\"n\">TestObject</span><span class=\"o\">&gt;</span> <span class=\"n\">testObjectList</span> <span class=\"o\">=</span> <span class=\"n\">testObjectService</span><span class=\"o\">.</span><span class=\"na\">findByKey</span><span class=\"o\">(</span><span class=\"n\">of</span><span class=\"o\">(</span><span class=\"n\">PageFactory</span><span class=\"o\">.</span><span class=\"na\">getPage</span><span class=\"o\">(</span><span class=\"n\">request</span><span class=\"o\">())),</span> <span class=\"n\">ofNullable</span><span class=\"o\">(</span><span class=\"n\">orderNo</span><span class=\"o\">),</span>\n</span><span class=\"line\">            <span class=\"n\">ofNullable</span><span class=\"o\">(</span><span class=\"n\">status</span><span class=\"o\">).</span><span class=\"na\">map</span><span class=\"o\">(</span><span class=\"nl\">TestObjectStatus:</span><span class=\"o\">:</span><span class=\"n\">valueOf</span><span class=\"o\">),</span> <span class=\"n\">empty</span><span class=\"o\">(),</span> <span class=\"n\">empty</span><span class=\"o\">());</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"k\">return</span> <span class=\"nf\">ok</span><span class=\"o\">(</span><span class=\"n\">list</span><span class=\"o\">.</span><span class=\"na\">render</span><span class=\"o\">(</span><span class=\"n\">testObjectList</span><span class=\"o\">));</span>\n</span><span class=\"line\"><span class=\"o\">}</span>\n</span></code></pre></td></tr></tbody></table></div></figure><p>这里list的功能是查询出所有满足条件的测试对象（TestObject对象）。首先来看参数，这里声明了两个查询参数status和orderNo，用来匹配Http请求QueryString中的参数， 这和SpringMVC中声明了RequestParam(“status”)的参数类似。注意有一点区别，这里的status和orderNo不能捕捉通过Http Body提交的参数，只能匹配QueryString中的参数。</p><p>Controller中调用service方法来完成查询，然后将结果返回。方法的返回值声明是play.mvc.Result接口，你可以理解Result的实现类只需要包含两个值： ResponseHeader和ResponseBody。对于ResponseHeader的设置，这里调用父类的ok方法设置返回的Http状态码为200，对应的还有created 201, notFound 404等方法。 ok方法参数需要传入的就是ResponseBody，参数类型声明为play.twirl.api.Content特质（Scala中的特质类似于Java的接口），你基本上永远不需要去手动构造这个特质的实现， 而是使用Play提供的模板。这里我在views.html.test目录下有一个list.scala.html模板，这个模板文件会被IDE自动编译成views.html.test.list类，类里面有一个render方法来完成模板的渲染， render方法返回值就是play.twirl.api.Content的子类。所以我在这里可以直接调用list.render(testObjectList)方法来完成模板的渲染。</p><p>好了，现在来对照SpringMVC，如果是用SpringMVC的话，这个方法应该是这样的</p><figure class=\"code\"><figcaption><span></span></figcaption><div class=\"highlight\"><table><tbody><tr><td class=\"gutter\"><pre class=\"line-numbers\"><span class=\"line-number\">1</span>\n<span class=\"line-number\">2</span>\n<span class=\"line-number\">3</span>\n<span class=\"line-number\">4</span>\n<span class=\"line-number\">5</span>\n<span class=\"line-number\">6</span>\n<span class=\"line-number\">7</span>\n<span class=\"line-number\">8</span>\n<span class=\"line-number\">9</span>\n<span class=\"line-number\">10</span>\n<span class=\"line-number\">11</span>\n</pre></td><td class=\"code\"><pre><code class=\"java\"><span class=\"line\"><span class=\"nd\">@RequestMapping</span><span class=\"o\">(</span><span class=\"n\">value</span> <span class=\"o\">=</span> <span class=\"s\">&quot;/test/objects&quot;</span><span class=\"o\">,</span> <span class=\"n\">method</span> <span class=\"o\">=</span> <span class=\"n\">RequestMethod</span><span class=\"o\">.</span><span class=\"na\">GET</span><span class=\"o\">)</span>\n</span><span class=\"line\"><span class=\"nd\">@ResponseStatus</span><span class=\"o\">(</span><span class=\"n\">HttpStatus</span><span class=\"o\">.</span><span class=\"na\">OK</span><span class=\"o\">)</span>  <span class=\"c1\">//可省略</span>\n</span><span class=\"line\"><span class=\"kd\">public</span> <span class=\"n\">String</span> <span class=\"nf\">list</span><span class=\"o\">(</span><span class=\"n\">String</span> <span class=\"n\">status</span><span class=\"o\">,</span> <span class=\"n\">String</span> <span class=\"n\">orderNo</span><span class=\"o\">,</span> <span class=\"n\">Model</span> <span class=\"n\">model</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"n\">List</span><span class=\"o\">&lt;</span><span class=\"n\">TestObject</span><span class=\"o\">&gt;</span> <span class=\"n\">testObjectList</span> <span class=\"o\">=</span> <span class=\"n\">testObjectService</span><span class=\"o\">.</span><span class=\"na\">findByKey</span><span class=\"o\">(</span><span class=\"n\">of</span><span class=\"o\">(</span><span class=\"n\">PageFactory</span><span class=\"o\">.</span><span class=\"na\">getPage</span><span class=\"o\">(</span><span class=\"n\">request</span><span class=\"o\">())),</span> <span class=\"n\">ofNullable</span><span class=\"o\">(</span><span class=\"n\">orderNo</span><span class=\"o\">),</span>\n</span><span class=\"line\">            <span class=\"n\">ofNullable</span><span class=\"o\">(</span><span class=\"n\">status</span><span class=\"o\">).</span><span class=\"na\">map</span><span class=\"o\">(</span><span class=\"nl\">TestObjectStatus:</span><span class=\"o\">:</span><span class=\"n\">valueOf</span><span class=\"o\">),</span> <span class=\"n\">empty</span><span class=\"o\">(),</span> <span class=\"n\">empty</span><span class=\"o\">());</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"n\">model</span><span class=\"o\">.</span><span class=\"na\">addAttribute</span><span class=\"o\">(</span><span class=\"s\">&quot;testObjectList&quot;</span><span class=\"o\">,</span> <span class=\"n\">testObjectList</span><span class=\"o\">);</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"k\">return</span> <span class=\"s\">&quot;views/html/test/list&quot;</span><span class=\"o\">;</span>\n</span><span class=\"line\"><span class=\"o\">}</span>\n</span></code></pre></td></tr></tbody></table></div></figure><p>细心的你可能已经发现了，Play的版本与SpringMVC的对照，少了一个路由的信息，那么在Play中怎么配置路由呢，请看下节</p><h4>5. routes文件（路由）</h4><p>在Play中，所有的路由信息都是统一放在一个文件里，即conf/routes文件。上面的list方法路由在routes中对应如下：</p><figure class=\"code\"><figcaption><span></span></figcaption><div class=\"highlight\"><table><tbody><tr><td class=\"gutter\"><pre class=\"line-numbers\"><span class=\"line-number\">1</span>\n</pre></td><td class=\"code\"><pre><code class=\"java\"><span class=\"line\"><span class=\"n\">GET</span>         <span class=\"o\">/</span><span class=\"n\">test</span><span class=\"o\">/</span><span class=\"n\">objects</span>                     <span class=\"nd\">@controllers.test.TestObjectController.list</span><span class=\"o\">(</span><span class=\"n\">status</span> <span class=\"o\">?=</span> <span class=\"kc\">null</span><span class=\"o\">,</span> <span class=\"n\">orderNo</span> <span class=\"o\">?=</span> <span class=\"kc\">null</span><span class=\"o\">)</span>\n</span></code></pre></td></tr></tbody></table></div></figure><p>最左边的GET声明的是Http Method，在Play中每个路由都要明确写出对应的Http Method，中间是路由的URI，最右边是映射的Controller方法。参数<code>status ?= null</code>代表参数是可选的， 如果请求参数中没有status则默认值是null。routes文件的一大好处是在写映射Controller方法的时候IDE能帮助自动补全，并且编译器在编译的时候也能校验声明的参数个数与类型是否一致， 这能有效的帮助开发者减少错误。路由也配好了，剩下的工作就是模板的编写。</p><h4>6. 模板</h4><p>list.scala.html</p><figure class=\"code\"><figcaption><span></span></figcaption><div class=\"highlight\"><table><tbody><tr><td class=\"gutter\"><pre class=\"line-numbers\"><span class=\"line-number\">1</span>\n<span class=\"line-number\">2</span>\n<span class=\"line-number\">3</span>\n<span class=\"line-number\">4</span>\n<span class=\"line-number\">5</span>\n<span class=\"line-number\">6</span>\n<span class=\"line-number\">7</span>\n<span class=\"line-number\">8</span>\n<span class=\"line-number\">9</span>\n<span class=\"line-number\">10</span>\n<span class=\"line-number\">11</span>\n<span class=\"line-number\">12</span>\n<span class=\"line-number\">13</span>\n<span class=\"line-number\">14</span>\n<span class=\"line-number\">15</span>\n<span class=\"line-number\">16</span>\n<span class=\"line-number\">17</span>\n<span class=\"line-number\">18</span>\n<span class=\"line-number\">19</span>\n<span class=\"line-number\">20</span>\n<span class=\"line-number\">21</span>\n<span class=\"line-number\">22</span>\n<span class=\"line-number\">23</span>\n<span class=\"line-number\">24</span>\n<span class=\"line-number\">25</span>\n<span class=\"line-number\">26</span>\n<span class=\"line-number\">27</span>\n<span class=\"line-number\">28</span>\n<span class=\"line-number\">29</span>\n<span class=\"line-number\">30</span>\n<span class=\"line-number\">31</span>\n<span class=\"line-number\">32</span>\n<span class=\"line-number\">33</span>\n<span class=\"line-number\">34</span>\n<span class=\"line-number\">35</span>\n<span class=\"line-number\">36</span>\n<span class=\"line-number\">37</span>\n<span class=\"line-number\">38</span>\n<span class=\"line-number\">39</span>\n<span class=\"line-number\">40</span>\n<span class=\"line-number\">41</span>\n<span class=\"line-number\">42</span>\n<span class=\"line-number\">43</span>\n<span class=\"line-number\">44</span>\n<span class=\"line-number\">45</span>\n<span class=\"line-number\">46</span>\n<span class=\"line-number\">47</span>\n<span class=\"line-number\">48</span>\n<span class=\"line-number\">49</span>\n<span class=\"line-number\">50</span>\n<span class=\"line-number\">51</span>\n<span class=\"line-number\">52</span>\n<span class=\"line-number\">53</span>\n<span class=\"line-number\">54</span>\n<span class=\"line-number\">55</span>\n<span class=\"line-number\">56</span>\n<span class=\"line-number\">57</span>\n<span class=\"line-number\">58</span>\n<span class=\"line-number\">59</span>\n<span class=\"line-number\">60</span>\n<span class=\"line-number\">61</span>\n<span class=\"line-number\">62</span>\n<span class=\"line-number\">63</span>\n<span class=\"line-number\">64</span>\n<span class=\"line-number\">65</span>\n<span class=\"line-number\">66</span>\n<span class=\"line-number\">67</span>\n<span class=\"line-number\">68</span>\n<span class=\"line-number\">69</span>\n<span class=\"line-number\">70</span>\n<span class=\"line-number\">71</span>\n<span class=\"line-number\">72</span>\n<span class=\"line-number\">73</span>\n<span class=\"line-number\">74</span>\n<span class=\"line-number\">75</span>\n<span class=\"line-number\">76</span>\n<span class=\"line-number\">77</span>\n</pre></td><td class=\"code\"><pre><code class=\"html\"><span class=\"line\">@(testObjects: List[ordercenter.models.TestObject])\n</span><span class=\"line\">\n</span><span class=\"line\">@import common.utils.DateUtils._\n</span><span class=\"line\">\n</span><span class=\"line\">@main()() {\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"nt\">&lt;div</span> <span class=\"na\">class=</span><span class=\"s\">&quot;breadcrumbs&quot;</span> <span class=\"na\">id=</span><span class=\"s\">&quot;breadcrumbs&quot;</span><span class=\"nt\">&gt;</span>\n</span><span class=\"line\">        <span class=\"nt\">&lt;script </span><span class=\"na\">type=</span><span class=\"s\">&quot;text/javascript&quot;</span><span class=\"nt\">&gt;</span>\n</span><span class=\"line\">        <span class=\"k\">try</span><span class=\"p\">{</span><span class=\"nx\">ace</span><span class=\"p\">.</span><span class=\"nx\">settings</span><span class=\"p\">.</span><span class=\"nx\">check</span><span class=\"p\">(</span><span class=\"s1\">\'breadcrumbs\'</span> <span class=\"p\">,</span> <span class=\"s1\">\'fixed\'</span><span class=\"p\">)}</span><span class=\"k\">catch</span><span class=\"p\">(</span><span class=\"nx\">e</span><span class=\"p\">){}</span>\n</span><span class=\"line\">        <span class=\"nt\">&lt;/script&gt;</span>\n</span><span class=\"line\">\n</span><span class=\"line\">        <span class=\"nt\">&lt;ul</span> <span class=\"na\">class=</span><span class=\"s\">&quot;breadcrumb&quot;</span><span class=\"nt\">&gt;</span>\n</span><span class=\"line\">            <span class=\"nt\">&lt;li&gt;</span>\n</span><span class=\"line\">                <span class=\"nt\">&lt;i</span> <span class=\"na\">class=</span><span class=\"s\">&quot;icon-home home-icon&quot;</span><span class=\"nt\">&gt;&lt;/i&gt;</span>测试对象管理\n</span><span class=\"line\">            <span class=\"nt\">&lt;/li&gt;</span>\n</span><span class=\"line\">            <span class=\"nt\">&lt;li</span> <span class=\"na\">class=</span><span class=\"s\">&quot;active&quot;</span><span class=\"nt\">&gt;&lt;a</span> <span class=\"na\">href=</span><span class=\"s\">&quot;@controllers.test.routes.TestObjectController.list()&quot;</span><span class=\"nt\">&gt;</span>测试对象查询<span class=\"nt\">&lt;/a&gt;&lt;/li&gt;</span>\n</span><span class=\"line\">        <span class=\"nt\">&lt;/ul&gt;</span><span class=\"c\">&lt;!-- .breadcrumb --&gt;</span>\n</span><span class=\"line\">    <span class=\"nt\">&lt;/div&gt;</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"nt\">&lt;div</span> <span class=\"na\">class=</span><span class=\"s\">&quot;page-content&quot;</span><span class=\"nt\">&gt;</span>\n</span><span class=\"line\">        <span class=\"nt\">&lt;div</span> <span class=\"na\">class=</span><span class=\"s\">&quot;page-header&quot;</span><span class=\"nt\">&gt;</span>\n</span><span class=\"line\">            <span class=\"nt\">&lt;h1&gt;</span>\n</span><span class=\"line\">                测试对象管理\n</span><span class=\"line\">                <span class=\"nt\">&lt;small&gt;</span>\n</span><span class=\"line\">                    <span class=\"nt\">&lt;i</span> <span class=\"na\">class=</span><span class=\"s\">&quot;icon-double-angle-right&quot;</span><span class=\"nt\">&gt;&lt;/i&gt;</span>测试对象查询\n</span><span class=\"line\">                <span class=\"nt\">&lt;/small&gt;</span>\n</span><span class=\"line\">            <span class=\"nt\">&lt;/h1&gt;</span>\n</span><span class=\"line\">        <span class=\"nt\">&lt;/div&gt;</span>\n</span><span class=\"line\">            <span class=\"c\">&lt;!-- /.page-header --&gt;</span>\n</span><span class=\"line\">\n</span><span class=\"line\">        <span class=\"nt\">&lt;div</span> <span class=\"na\">class=</span><span class=\"s\">&quot;row&quot;</span><span class=\"nt\">&gt;</span>\n</span><span class=\"line\">            <span class=\"nt\">&lt;div</span> <span class=\"na\">class=</span><span class=\"s\">&quot;col-xs-12&quot;</span><span class=\"nt\">&gt;</span>\n</span><span class=\"line\">                    <span class=\"c\">&lt;!-- PAGE CONTENT BEGINS --&gt;</span>\n</span><span class=\"line\">\n</span><span class=\"line\">                <span class=\"nt\">&lt;div</span> <span class=\"na\">class=</span><span class=\"s\">&quot;row&quot;</span><span class=\"nt\">&gt;</span>\n</span><span class=\"line\">                    <span class=\"nt\">&lt;div</span> <span class=\"na\">class=</span><span class=\"s\">&quot;col-xs-12&quot;</span><span class=\"nt\">&gt;</span>\n</span><span class=\"line\">                        <span class=\"nt\">&lt;div</span> <span class=\"na\">class=</span><span class=\"s\">&quot;table-responsive&quot;</span><span class=\"nt\">&gt;</span>\n</span><span class=\"line\">                            <span class=\"nt\">&lt;table</span> <span class=\"na\">id=</span><span class=\"s\">&quot;sample-table-1&quot;</span> <span class=\"na\">class=</span><span class=\"s\">&quot;table table-striped table-bordered table-hover&quot;</span><span class=\"nt\">&gt;</span>\n</span><span class=\"line\">                                <span class=\"nt\">&lt;thead&gt;</span>\n</span><span class=\"line\">                                    <span class=\"nt\">&lt;tr&gt;</span>\n</span><span class=\"line\">                                        <span class=\"nt\">&lt;th&gt;</span>状态<span class=\"nt\">&lt;/th&gt;</span>\n</span><span class=\"line\">                                        <span class=\"nt\">&lt;th&gt;</span>买家<span class=\"nt\">&lt;/th&gt;</span>\n</span><span class=\"line\">                                        <span class=\"nt\">&lt;th</span> <span class=\"na\">class=</span><span class=\"s\">&quot;', '2016-04-16 01:21:19', '0');
INSERT INTO `article` VALUES ('10076', '10003', 'Spring讲解----------集成框架', '\n\n<h2 style=\"line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n10.1&nbsp; 概述</h2>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n10.1.1&nbsp; Spring和Web框架</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Spring框架不仅提供了一套自己的Web框架实现，还支持集成第三方Web框架（如Struts1x、Struts2x）。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Spring实现的SpringMVC Web框架将在第十八章详细介绍。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 由于现在有很大部分公司在使用第三方Web框架，对于并不熟悉SpringMVC Web框架的公司，为了充分利用开发人员已掌握的技术并相使用Spring的功能，想集成所使用的Web框架；由于Spring框架的高度可配置和可选择性，因此集成这些第三方Web框架是非常简单的。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 之所以想把这些第三方Web框架集成到Spring中，最核心的价&#20540;是享受Spring的某些强大功能，如一致的数据访问，事务管理，IOC，AOP等等。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Spring为所有Web框架提供一致的通用配置，从而不管使用什么Web框架都使用该通用配置。</p>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n&nbsp;</h3>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n10.1.2 &nbsp;通用配置</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\nSpring对所有Web框架抽象出通用配置，以减少重复配置，其中主要有以下配置：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>1、Web环境准备：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>1.1、在spring项目下创建如图10-1目录结构：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;<img src=\"http://sishuok.com/forum/upload/2012/2/22/c8385312322e3cbb888921007fa9fa74__1.JPG\" alt=\"\" style=\"border:0px\"></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n图10-1 web目录结构</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>1.2、右击spring项目选择【Propeties】，然后选择【Java Build Path】中的【Source】选项卡，将类输出路径修改为“spring/webapp/WEB-INF/classes”，如图10-2所示：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<img src=\"http://sishuok.com/forum/upload/2012/2/22/a3254d85781bbc92b69cf9bf251ac61b__2.JPG\" alt=\"\" style=\"border:0px\">&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n图10-2 修改类输出路径</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>1.3、web.xml初始内容如下：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;?xml&nbsp;version=<span class=\"string\" style=\"color:blue\">&quot;1.0&quot;</span>&nbsp;encoding=<span class=\"string\" style=\"color:blue\">&quot;UTF-8&quot;</span>?&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;web-app&nbsp;version=<span class=\"string\" style=\"color:blue\">&quot;2.4&quot;</span>&nbsp;xmlns=<span class=\"string\" style=\"color:blue\">&quot;http://java.sun.com/xml/ns/j2ee&quot;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xmlns:xsi=<span class=\"string\" style=\"color:blue\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xsi:schemaLocation=&quot;http:<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//java.sun.com/xml/ns/j2ee</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http:<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;/web-app&gt;&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&lt;web-app version=&quot;2.4&quot;&gt;表示采用Servlet 2.4规范的Web程序部署描述&#26684;式</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>2、&nbsp;指定Web应用上下文实现：</strong>在Web环境中，Spring提供WebApplicationContext（继承ApplicationContext）接口用于配置Web应用，该接口应该被实现为在Web应用程序运行时只读，即在初始化完毕后不能修改Spring Web容器（WebApplicationContext），但可能支持重载。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\nSpring提供XmlWebApplicationContext实现，并在Web应用程序中默认使用该实现，可以通过在web.xml配置文件中使用如下方式指定：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;context-param&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;param-name&gt;contextClass&lt;/param-name&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;param-value&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.springframework.web.context.support.XmlWebApplicationContext&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/param-value&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;/context-param&gt;&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; 如上指定是可选的，只有当使用其他实现时才需要显示指定。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>3、&nbsp;指定加载文件位置：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n前边已经指定了Spring Web容器实现，那从什么地方加载配置文件呢？</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n默认情况下将加载/WEB-INF/applicationContext.xml配置文件，当然也可以使用如下形式在web.xml中定义要加载自定义的配置文件，多个配置文件用“，”分割：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;context-param&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;param-value&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;classpath:chapter10/applicationContext-message.xml&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/param-value&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;/context-param&gt;&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n通用Spring配置文件（resources/chapter10/applicationContext-message.xml）内容如下所示：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;bean&nbsp;id=<span class=\"string\" style=\"color:blue\">&quot;message&quot;</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>=<span class=\"string\" style=\"color:blue\">&quot;java.lang.String&quot;</span>&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;constructor-arg&nbsp;index=<span class=\"string\" style=\"color:blue\">&quot;0&quot;</span>&nbsp;value=<span class=\"string\" style=\"color:blue\">&quot;Hello&nbsp;Spring&quot;</span>/&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;/bean&gt;&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>4、&nbsp;加载和关闭Spring Web容器：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n我们已经指定了Spring Web容器实现和配置文件，那如何才能让Spring使用相应的Spring Web容器实现加载配置文件呢？</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\nSpring使用ContextLoaderListener监听器来加载和关闭Spring Web容器，即使用如下方式在web.xml中指定：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;listener&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;listener-<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.springframework.web.context.ContextLoaderListener&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/listener-<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;/listener&gt;&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\nContextLoaderListener监听器将在Web应用启动时使用指定的配置文件初始化Spring Web容器，在Web应用关闭时销毁Spring Web容器。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n注：监听器是从Servlet 2.3才开始支持的，因此如果Web应用所运行的环境是Servlet 2.2版本则可以使用ContextLoaderServlet来完成，但从Spring3.x版本之后ContextLoaderServlet被移除了。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>5、&nbsp;在Web环境中获取Spring Web容器:</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n既然已经定义了Spring Web容器，那如何在Web中访问呢？Spring提供如下方式来支持获取Spring Web容器（WebApplicationContext）：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">WebApplicationContextUtils.getWebApplicationContext(servletContext);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">或&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">WebApplicationContextUtils.getRequiredWebApplicationContext(servletContext);&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; &nbsp;如果当前Web应用中的ServletContext 中没有相应的Spring Web容器，对于getWebApplicationContext()方法将返回null,而getRequiredWebApplicationContext()方法将抛出异常，建议使用第二种方式，因为缺失Spring Web容器而又想获取它，很明显是错误的，应该抛出异常。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>6、&nbsp;通用jar包，从下载的spring-framework-3.0.5.RELEASE-with-docs.zip中dist目录查找如下jar包：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong><br>\n</strong></p>\n<table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"color:rgb(0,0,0); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<tbody>\n<tr>\n<td height=\"37\" width=\"498\" style=\"font-size:14px\">org.springframework.web-3.0.5.RELEASE.jar&nbsp;</td>\n</tr>\n</tbody>\n</table>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n此jar包为所有Web框架所共有，提供WebApplicationContext及实现等。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>7、Web服务器选择及测试：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 目前比较流行的支持Servlet规范的开源Web服务器包括Tomcat、Resin、Jetty等，Web服务器有独立运行和嵌入式运行之分，嵌入式Web服务器可以在测试用例中运行不依赖于外部环境，因此我们使用嵌入式Web服务器。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Jetty是一个非常轻量级的Web服务器，并且提供嵌入式运行支持，在此我们选用Jetty作为测试使用的Web服务器。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>7.1、准备Jetty嵌入式Web服务器运行需要的jar包：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<pre style=\"font-size:14px; line-height:25.2000007629395px\">到<a target=\"_blank\" href=\"http://dist.codehaus.org/jetty/%E7%BD%91%E7%AB%99%E4%B8%8B%E8%BD%BDjetty-6.1.24\" style=\"color:rgb(233,101,14)\">http://dist.codehaus.org/jetty/网站下载jetty-6.1.24</a>，在下载的<a target=\"_blank\" href=\"http://dist.codehaus.org/jetty/jetty-6.1.24/jetty-6.1.24.zip\" style=\"color:rgb(233,101,14)\">jetty-6.1.24.zip</a>包中拷贝如下jar包到项目的lib/jetty目录下，并添加到类路径中：&nbsp;&nbsp; </pre>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;<img src=\"http://sishuok.com/forum/upload/2012/2/22/58607ea0db5cfa95aeea3ecd2640c0b6__4.JPG\" alt=\"\" style=\"border:0px\"></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>7.2、在单元测试中启动Web服务器：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">package</span>&nbsp;cn.javass.spring.chapter10;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">import</span>&nbsp;org.junit.Test;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">import</span>&nbsp;org.mortbay.jetty.Server;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">import</span>&nbsp;org.mortbay.jetty.webapp.WebAppContext;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>&nbsp;WebFrameWorkIntegrateTest&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Test</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;testWebFrameWork()&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">throws</span>&nbsp;Exception&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Server&nbsp;server&nbsp;=&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">new</span>&nbsp;Server(<span class=\"number\" style=\"color:rgb(192,0,0)\">8080</span>);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WebAppContext&nbsp;webapp&nbsp;=&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">new</span>&nbsp;WebAppContext();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;webapp.setResourceBase(<span class=\"string\" style=\"color:blue\">&quot;webapp&quot;</span>);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//webapp.setDescriptor(&quot;webapp/WEB-INF/web.xml&quot;);</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;webapp.setContextPath(<span class=\"string\" style=\"color:blue\">&quot;/&quot;</span>);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;webapp.setClassLoader(Thread.currentThread().getContextClassLoader());&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server.setHandler(webapp);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server.start();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;server.join();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//server.stop();</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>创建内嵌式Web服务器：</strong>使用new Server(8080)新建一个Jetty服务器，监听端口为8080；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>创建一个Web应用：</strong>使用new WebAppContext()新建一个Web应用对象，一个Web应用可以认为就是一个WebAppContext对象；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>指定Web应用的目录：</strong>使用webapp.setResourceBase(&quot;webapp&quot;)指定Web应用位于项目根目录下的“webapp”目录下；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>指定部署描述符：</strong>使用webapp.setDescriptor(&quot;webapp/WEB-INF/web.xml&quot;)；此处指定部署描述符为项目根目录下的“webapp/WEB-INF/web.xml”，该步骤是可选的，如果web.xml位于Web应用的WEB-INF下。</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>指定Web应用请求上下文：</strong>使用webapp.setContextPath(&quot;/&quot;)指定请求上下文为“/”，从而访问该Web应用可以使用如“http://localhost:8080/hello.do”形式访问；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\">指定类装载器：因为Jetty自带的ClassLoader在内嵌环境中对中文路径处理有问题，因此我们使用Eclispe的ClassLoader，即通过“webapp.setClassLoader(Thread.currentThread().getContextClassLoader()) ”指定；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>启动Web服务器：</strong>使用“server.start()”启动并使用“server.join()”保证Web服务器一直运行；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>关闭Web服务器：</strong>可以通过某种方式执行“server.stop()”来关闭Web服务器；另一种方式是通过【Console】控制台面板的【Terminate】终止按钮关闭，如图10-3所示：</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<img src=\"http://sishuok.com/forum/upload/2012/2/22/54b1c923698d5cc7de8df7b89b9d5e4a__3.JPG\" alt=\"\" style=\"border:0px\">&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n图10-3 点击红色按钮关闭Web服务器</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n先进行通用配置，&nbsp;<a target=\"_blank\" title=\"【第十章】集成其它Web框架 之 10.1 概述 ——跟我学spring3\" href=\"http://sishuok.com/forum/blogPost/list/2510.html\" class=\"blogtitle\" style=\"color:rgb(233,101,14)\">【第十章】集成其它Web框架 之 10.1 概述</a>&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<h2 style=\"line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n10.3&nbsp; 集成Struts2.x</h2>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n10.3.1&nbsp; 概述</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\nStruts2前身是WebWork，核心并没有改变，其实就是把WebWork改名为struts2，与Struts1一点关系没有。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\nStruts2中通过ObjectFactory接口实现创建及获取Action实例，类&#20284;于Spring的IoC容器，所以Action实例可以由ObjectFactory实现来管理，因此集成Spring的关键点就是如何创建ObjectFactory实现来从Spring容器中获取相应的Action Bean。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\nStruts2提供一个默认的ObjectFactory接口实现StrutsSpringObjectFactory，该类用于根据Struts2配置文件中相应Bean信息从Spring 容器中获取相应的Action。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n因此Struts2.x与Spring集成需要使用StrutsSpringObjectFactory类作为中介者。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>接下来让我们首先让我们准备Struts2x所需要的jar包</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>准备Struts2.x需要的jar包，到Struts官网http://struts.apache.org/下载struts-2.2.1.1版本，拷贝如下jar包到项目的lib目录下并添加到类路径：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong><br>\n</strong></p>\n<table cellspacing=\"0\" border=\"0\" cellpadding=\"0\" style=\"color:rgb(0,0,0); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<tbody>\n<tr>\n<td style=\"font-size:14px\">\n<div class=\"shape\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nlib\\struts2-core-2.2.1.1.jar &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//核心struts2包</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nlib\\xwork-core-2.2.1.1.jar&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//命令框架包，独立于Web环境，为Struts2</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\n//提供核心功能的支持包</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nlib\\freemarker-2.3.16.jar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;//提供模板化UI标签及视图技术支持</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nlib\\ognl-3.0.jar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;//对象图导航工具包，类&#20284;于SpEL</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nlib\\ struts2-spring-plugin-2.2.1.1.jar&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;//集成Spring的插件包</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nlib\\commons-logging-1.0.4.jar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //日志记录组件包（已有）</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nlib\\commons-fileupload-1.2.1.jar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //用于支持文件上传的包</p>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n&nbsp;</h3>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n10.3.2&nbsp; 使用ObjectFactory集成</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>1、Struts2.x的Action实现：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">package</span>&nbsp;cn.javass.spring.chapter10.struts2x.action;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">import</span>&nbsp;org.apache.struts2.ServletActionContext;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">import</span>&nbsp;com.opensymphony.xwork2.ActionSupport;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>&nbsp;HelloWorldAction&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">extends</span>&nbsp;ActionSupport&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;String&nbsp;message;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Override</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;String&nbsp;execute()&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">throws</span>&nbsp;Exception&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ServletActionContext.getRequest().setAttribute(<span class=\"string\" style=\"color:blue\">&quot;message&quot;</span>,&nbsp;message);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">return</span>&nbsp;<span class=\"string\" style=\"color:blue\">&quot;hello&quot;</span>;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;setMessage(String&nbsp;message)&nbsp;{<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//setter注入</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">this</span>.message&nbsp;=&nbsp;message;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>2、JSP页面定义，使用Struts1x中定义的JSP页面“webapp/WEB-INF/jsp/hello.jsp”；</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>3、Spring一般配置文件定义（resources/chapter10/applicationContext-message.xml）：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n在此配置文件中定义我们使用的“message”Bean；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;bean&nbsp;id=<span class=\"string\" style=\"color:blue\">&quot;message&quot;</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>=<span class=\"string\" style=\"color:blue\">&quot;java.lang.String&quot;</span>&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-wid', '2016-04-16 01:21:19', '0');
INSERT INTO `article` VALUES ('10077', '10003', '史上最全最强SpringMVC详细示例实战教程', '\n\n<h2><strong>一、SpringMVC基础入门，创建一个HelloWorld程序</strong></h2>\n<p>1.首先，导入SpringMVC需要的jar包。</p>\n<div><img alt=\"史上最全最强SpringMVC详细示例实战教程\" src=\"http://static.codeceo.com/images/2015/06/032131066955378.png\"></div>\n<p>2.添加Web.xml配置文件中关于SpringMVC的配置</p>\n<pre>&lt;!--configure the setting of springmvcDispatcherServlet and configure the mapping--&gt;\n  &lt;servlet&gt;\n      &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;\n      &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n      &lt;init-param&gt;\n            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n            &lt;param-value&gt;classpath:springmvc-servlet.xml&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;!-- &lt;load-on-startup&gt;1&lt;/load-on-startup&gt; --&gt;\n  &lt;/servlet&gt;\n\n  &lt;servlet-mapping&gt;\n      &lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;\n      &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n  &lt;/servlet-mapping&gt;</pre>\n<p>3.在src下添加springmvc-servlet.xml配置文件</p>\n<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n    xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.1.xsd\n        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.1.xsd&quot;&gt;                    \n\n    &lt;!-- scan the package and the sub package --&gt;\n    &lt;context:component-scan base-package=&quot;test.SpringMVC&quot;/&gt;\n\n    &lt;!-- don\'t handle the static resource --&gt;\n    &lt;mvc:default-servlet-handler /&gt;\n\n    &lt;!-- if you use annotation you must configure following setting --&gt;\n    &lt;mvc:annotation-driven /&gt;\n\n    &lt;!-- configure the InternalResourceViewResolver --&gt;\n    &lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot; \n            id=&quot;internalResourceViewResolver&quot;&gt;\n        &lt;!-- 前缀 --&gt;\n        &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/jsp/&quot; /&gt;\n        &lt;!-- 后缀 --&gt;\n        &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot; /&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;</pre>\n<p>4.在WEB-INF文件夹下创建名为jsp的文件夹，用来存放jsp视图。创建一个hello.jsp，在body中添加“Hello World”。</p>\n<p>5.建立包及Controller，如下所示</p>\n<p><img alt=\"史上最全最强SpringMVC详细示例实战教程\" src=\"http://static.codeceo.com/images/2015/06/032227247897004.png\"></p>\n<p>6.编写Controller代码</p>\n<pre>@Controller\n@RequestMapping(&quot;/mvc&quot;)\npublic class mvcController {\n\n    @RequestMapping(&quot;/hello&quot;)\n    public String hello(){        \n        return &quot;hello&quot;;\n    }\n}</pre>\n<p>7.启动服务器，键入&nbsp;http://localhost:8080/项目名/mvc/hello</p>\n<h2>二、配置解析</h2>\n<p>1.Dispatcherservlet</p>\n<p>DispatcherServlet是前置控制器，配置在web.xml文件中的。拦截匹配的请求，Servlet拦截匹配规则要自已定义，把拦截下来的请求，依据相应的规则分发到目标Controller来处理，是配置spring MVC的第一步。</p>\n<p>2.InternalResourceViewResolver</p>\n<p>视图名称解析器</p>\n<p>3.以上出现的注解</p>\n<p>@Controller&nbsp;负责注册一个bean 到spring 上下文中</p>\n<p>@RequestMapping&nbsp;注解为控制器指定可以处理哪些 URL 请求</p>\n<h2>三、SpringMVC常用注解</h2>\n<p>@Controller</p>\n<p>负责注册一个bean 到spring 上下文中</p>\n<p>@RequestMapping</p>\n<p>注解为控制器指定可以处理哪些 URL 请求</p>\n<p>@RequestBody</p>\n<p>该注解用于读取Request请求的body部分数据，使用系统默认配置的HttpMessageConverter进行解析，然后把相应的数据绑定到要返回的对象上&nbsp;,再把HttpMessageConverter返回的对象数据绑定到 controller中方法的参数上</p>\n<p>@ResponseBody</p>\n<p>该注解用于将Controller的方法返回的对象，通过适当的HttpMessageConverter转换为指定&#26684;式后，写入到Response对象的body数据区</p>\n<p>@ModelAttribute</p>\n<p>在方法定义上使用 @ModelAttribute 注解：Spring MVC 在调用目标处理方法前，会先逐个调用在方法级上标注了@ModelAttribute 的方法</p>\n<p>在方法的入参前使用 @ModelAttribute 注解：可以从隐含对象中获取隐含的模型数据中获取对象，再将请求参数 –绑定到对象中，再传入入参将方法入参对象添加到模型中</p>\n<p>@RequestParam</p>\n<p>在处理方法入参处使用 @RequestParam 可以把请求参 数传递给请求方法</p>\n<p>@PathVariable</p>\n<p>绑定 URL 占位符到入参</p>\n<p>@ExceptionHandler</p>\n<p>注解到方法上，出现异常时会执行该方法</p>\n<p>@ControllerAdvice</p>\n<p>使一个Contoller成为全局的异常处理类，类中用@ExceptionHandler方法注解的方法可以处理所有Controller发生的异常</p>\n<h2>四、自动匹配参数</h2>\n<pre>//match automatically\n    @RequestMapping(&quot;/person&quot;)\n    public String toPerson(String name,double age){\n        System.out.println(name&#43;&quot; &quot;&#43;age);\n        return &quot;hello&quot;;\n    }</pre>\n<h2>五、自动装箱</h2>\n<p>1.编写一个Person实体类</p>\n<pre>package test.SpringMVC.model;\n\npublic class Person {\n    public String getName() {\n        return name;\n    }\n    public void setName(String name) {\n        this.name = name;\n    }\n    public int getAge() {\n        return age;\n    }\n    public void setAge(int age) {\n        this.age = age;\n    }\n    private String name;\n    private int age;\n\n}</pre>\n<p>2.在Controller里编写方法</p>\n<pre>//boxing automatically\n    @RequestMapping(&quot;/person1&quot;)\n    public String toPerson(Person p){\n        System.out.println(p.getName()&#43;&quot; &quot;&#43;p.getAge());\n        return &quot;hello&quot;;\n    }</pre>\n<h2>六、使用InitBinder来处理Date类型的参数</h2>\n<pre>//the parameter was converted in initBinder\n    @RequestMapping(&quot;/date&quot;)\n    public String date(Date date){\n        System.out.println(date);\n        return &quot;hello&quot;;\n    }\n\n    //At the time of initialization,convert the type &quot;String&quot; to type &quot;date&quot;\n    @InitBinder\n    public void initBinder(ServletRequestDataBinder binder){\n        binder.registerCustomEditor(Date.class, new CustomDateEditor(new SimpleDateFormat(&quot;yyyy-MM-dd&quot;),\n                true));\n    }</pre>\n<h2>七、向前台传递参数</h2>\n<pre>//pass the parameters to front-end\n    @RequestMapping(&quot;/show&quot;)\n    public String showPerson(Map&lt;String,Object&gt; map){\n        Person p =new Person();\n        map.put(&quot;p&quot;, p);\n        p.setAge(20);\n        p.setName(&quot;jayjay&quot;);\n        return &quot;show&quot;;\n    }</pre>\n<p>前台可在Request域中取到”p”</p>\n<h2>八、使用Ajax调用</h2>\n<pre>//pass the parameters to front-end using ajax\n    @RequestMapping(&quot;/getPerson&quot;)\n    public void getPerson(String name,PrintWriter pw){\n        pw.write(&quot;hello,&quot;&#43;name);        \n    }\n    @RequestMapping(&quot;/name&quot;)\n    public String sayHello(){\n        return &quot;name&quot;;\n    }</pre>\n<p>前台用下面的Jquery代码调用</p>\n<pre>$(function(){\n              $(&quot;#btn&quot;).click(function(){\n                  $.post(&quot;mvc/getPerson&quot;,{name:$(&quot;#name&quot;).val()},function(data){\n                      alert(data);\n                  });\n              });\n          });</pre>\n<h2>九、在Controller中使用redirect方式处理请求</h2>\n<pre>//redirect \n    @RequestMapping(&quot;/redirect&quot;)\n    public String redirect(){\n        return &quot;redirect:hello&quot;;\n    }</pre>\n<h2>十、文件上传</h2>\n<p>1.需要导入两个jar包</p>\n<p><img alt=\"史上最全最强SpringMVC详细示例实战教程\" src=\"http://static.codeceo.com/images/2015/06/052005184887879.png\"></p>\n<p>2.在SpringMVC配置文件中加入</p>\n<pre>&lt;!-- upload settings --&gt;\n    &lt;bean id=&quot;multipartResolver&quot;  class=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;&gt;\n        &lt;property name=&quot;maxUploadSize&quot; value=&quot;102400000&quot;&gt;&lt;/property&gt;\n    &lt;/bean&gt;</pre>\n<p>3.方法代码</p>\n<pre>@RequestMapping(value=&quot;/upload&quot;,method=RequestMethod.POST)\n    public String upload(HttpServletRequest req) throws Exception{\n        MultipartHttpServletRequest mreq = (MultipartHttpServletRequest)req;\n        MultipartFile file = mreq.getFile(&quot;file&quot;);\n        String fileName = file.getOriginalFilename();\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;yyyyMMddHHmmss&quot;);        \n        FileOutputStream fos = new FileOutputStream(req.getSession().getServletContext().getRealPath(&quot;/&quot;)&#43;\n                &quot;upload/&quot;&#43;sdf.format(new Date())&#43;fileName.substring(fileName.lastIndexOf(\'.\')));\n        fos.write(file.getBytes());\n        fos.flush();\n        fos.close();\n\n        return &quot;hello&quot;;\n    }</pre>\n<p>4.前台form表单</p>\n<pre>&lt;form action=&quot;mvc/upload&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;\n          &lt;input type=&quot;file&quot; name=&quot;file&quot;&gt;&lt;br&gt;\n          &lt;input type=&quot;submit&quot; value=&quot;submit&quot;&gt;\n      &lt;/form&gt;</pre>\n<h2>十一、使用@RequestParam注解指定参数的name</h2>\n<pre>@Controller\n@RequestMapping(&quot;/test&quot;)\npublic class mvcController1 {\n    @RequestMapping(value=&quot;/param&quot;)\n    public String testRequestParam(@RequestParam(value=&quot;id&quot;) Integer id,\n            @RequestParam(value=&quot;name&quot;)String name){\n        System.out.println(id&#43;&quot; &quot;&#43;name);\n        return &quot;/hello&quot;;\n    }    \n}</pre>\n<h2>十二、RESTFul风&#26684;的SringMVC</h2>\n<p>1.RestController</p>\n<pre>@Controller\n@RequestMapping(&quot;/rest&quot;)\npublic class RestController {\n    @RequestMapping(value=&quot;/user/{id}&quot;,method=RequestMethod.GET)\n    public String get(@PathVariable(&quot;id&quot;) Integer id){\n        System.out.println(&quot;get&quot;&#43;id);\n        return &quot;/hello&quot;;\n    }\n\n    @RequestMapping(value=&quot;/user/{id}&quot;,method=RequestMethod.POST)\n    public String post(@PathVariable(&quot;id&quot;) Integer id){\n        System.out.println(&quot;post&quot;&#43;id);\n        return &quot;/hello&quot;;\n    }\n\n    @RequestMapping(value=&quot;/user/{id}&quot;,method=RequestMethod.PUT)\n    public String put(@PathVariable(&quot;id&quot;) Integer id){\n        System.out.println(&quot;put&quot;&#43;id);\n        return &quot;/hello&quot;;\n    }\n\n    @RequestMapping(value=&quot;/user/{id}&quot;,method=RequestMethod.DELETE)\n    public String delete(@PathVariable(&quot;id&quot;) Integer id){\n        System.out.println(&quot;delete&quot;&#43;id);\n        return &quot;/hello&quot;;\n    }\n\n}</pre>\n<p>2.form表单发送put和delete请求</p>\n<p>在web.xml中配置</p>\n<pre>&lt;!-- configure the HiddenHttpMethodFilter,convert the post method to put or delete --&gt;\n  &lt;filter&gt;\n      &lt;filter-name&gt;HiddenHttpMethodFilter&lt;/filter-name&gt;\n      &lt;filter-class&gt;org.springframework.web.filter.HiddenHttpMethodFilter&lt;/filter-class&gt;\n  &lt;/filter&gt;\n  &lt;filter-mapping&gt;\n      &lt;filter-name&gt;HiddenHttpMethodFilter&lt;/filter-name&gt;\n      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n  &lt;/filter-mapping&gt;</pre>\n<p>在前台可以用以下代码产生请求</p>\n<pre>&lt;form action=&quot;rest/user/1&quot; method=&quot;post&quot;&gt;\n        &lt;input type=&quot;hidden&quot; name=&quot;_method&quot; value=&quot;PUT&quot;&gt;\n        &lt;input type=&quot;submit&quot; value=&quot;put&quot;&gt;\n    &lt;/form&gt;\n\n    &lt;form action=&quot;rest/user/1&quot; method=&quot;post&quot;&gt;\n        &lt;input type=&quot;submit&quot; value=&quot;post&quot;&gt;\n    &lt;/form&gt;\n\n    &lt;form action=&quot;rest/user/1&quot; method=&quot;get&quot;&gt;\n        &lt;input type=&quot;submit&quot; value=&quot;get&quot;&gt;\n    &lt;/form&gt;\n\n    &lt;form action=&quot;rest/user/1&quot; method=&quot;post&quot;&gt;\n        &lt;input type=&quot;hidden&quot; name=&quot;_method&quot; value=&quot;DELETE&quot;&gt;\n        &lt;input type=&quot;submit&quot; value=&quot;delete&quot;&gt;\n    &lt;/form&gt;</pre>\n<h2>十三、返回json&#26684;式的字符串</h2>\n<p>1.导入以下jar包</p>\n<p><img alt=\"史上最全最强SpringMVC详细示例实战教程\" src=\"http://static.codeceo.com/images/2015/06/052029372696778.png\"></p>\n<p>2.方法代码</p>\n<pre>@Controller\n@RequestMapping(&quot;/json&quot;)\npublic class jsonController {\n\n    @ResponseBody\n    @RequestMapping(&quot;/user&quot;)\n    public  User get(){\n        User u = new User();\n        u.setId(1);\n        u.setName(&quot;jayjay&quot;);\n        u.setBirth(new Date());\n        return u;\n    }\n}</pre>\n<h2>十四、异常的处理</h2>\n<p>1.处理局部异常（Controller内）</p>\n<pre>@ExceptionHandler\n    public ModelAndView exceptionHandler(Exception ex){\n        ModelAndView mv = new ModelAndView(&quot;error&quot;);\n        mv.addObject(&quot;exception&quot;, ex);\n        System.out.println(&quot;in testExceptionHandler&quot;);\n        return mv;\n    }\n\n    @RequestMapping(&quot;/error&quot;)\n    public String error(){\n        int i = 5/0;\n        return &quot;hello&quot;;\n    }</pre>\n<p>2.处理全局异常（所有Controller）</p>\n<pre>@ControllerAdvice\npublic class testControllerAdvice {\n    @ExceptionHandler\n    public ModelAndView exceptionHandler(Exception ex){\n        ModelAndView mv = new ModelAndView(&quot;error&quot;);\n        mv.addObject(&quot;exception&quot;, ex);\n        System.out.println(&quot;in testControllerAdvice&quot;);\n        return mv;\n    }\n}</pre>\n<p>3.另一种处理全局异常的方法</p>\n<p>在SpringMVC配置文件中配置</p>\n<pre>&lt;!-- configure SimpleMappingExceptionResolver --&gt;\n    &lt;bean class=&quot;org.springframework.web.servlet.handler.SimpleMappingExceptionResolver&quot;&gt;\n        &lt;property name=&quot;exceptionMappings&quot;&gt;\n            &lt;props&gt;\n                &lt;prop key=&quot;java.lang.ArithmeticException&quot;&gt;error&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;</pre>\n<p>error是出错页面</p>\n<h2>十五、设置一个自定义拦截器</h2>\n<p>1.创建一个MyInterceptor类，并实现HandlerInterceptor接口</p>\n<pre>public class MyInterceptor implements HandlerInterceptor {\n\n    @Override\n    public void afterCompletion(HttpServletRequest arg0,\n            HttpServletResponse arg1, Object arg2, Exception arg3)\n            throws Exception {\n        System.out.println(&quot;afterCompletion&quot;);\n    }\n\n    @Override\n    public void postHandle(HttpServletRequest arg0, HttpServletResponse arg1,\n            Object arg2, ModelAndView arg3) throws Exception {\n        System.out.println(&quot;postHandle&quot;);\n    }\n\n    @Override\n    public boolean preHandle(HttpServletRequest arg0, HttpServletResponse arg1,\n            Object arg2) throws Exception {\n        System.out.println(&quot;preHandle&quot;);\n        return true;\n    }\n\n}</pre>\n<p>2.在SpringMVC的配置文件中配置</p>\n<pre>&lt;!-- interceptor setting --&gt;\n    &lt;mvc:interceptors&gt;\n        &lt;mvc:interceptor&gt;\n            &lt;mvc:mapping path=&quot;/mvc/**&quot;/&gt;\n            &lt;bean class=&quot;test.SpringMVC.Interceptor.MyInterceptor&quot;&gt;&lt;/bean&gt;\n        &lt;/mvc:interceptor&gt;        \n    &lt;/mvc:interceptors&gt;</pre>\n<p>3.拦截器执行顺序</p>\n<p><img alt=\"史上最全最强SpringMVC详细示例实战教程\" src=\"http://static.codeceo.com/images/2015/06/052112090047146.png\"></p>\n<h2>十六、表单的验证（使用Hibernate-validate）及国际化</h2>\n<p>1.导入Hibernate-validate需要的jar包</p>\n<p><img alt=\"史上最全最强SpringMVC详细示例实战教程\" src=\"http://static.codeceo.com/images/2015/06/052116271296839.png\">(未选中不用导入)</p>\n<p><img alt=\"史上最全最强SpringMVC详细示例实战教程\" src=\"http://static.codeceo.com/images/2015/06/052116407233893.png\"></p>\n<p>2.编写实体类User并加上验证注解</p>\n<pre>public class User {\n    public int getId() {\n        return id;\n    }\n    public void setId(int id) {\n        this.id = id;\n    }\n    public String getName() {\n        return name;\n    }\n    public void setName(String name) {\n        this.name = name;\n    }\n    public Date getBirth() {\n        return birth;\n    }\n    public void setBirth(Date birth) {\n        this.birth = birth;\n    }\n    @Override\n    public String toString() {\n        return &quot;User [id=&quot; &#43; id &#43; &quot;, name=&quot; &#43; name &#43; &quot;, birth=&quot; &#43; birth &#43; &quot;]&quot;;\n    }    \n    private int id;\n    @NotEmpty\n    private String name;\n\n    @Past\n    @DateTimeFormat(pattern=&quot;yyyy-MM-dd&quot;)\n    private Date birth;\n}</pre>\n<p>ps:@Past表示时间必须是一个过去&#20540;</p>\n<p>3.在jsp中使用SpringMVC的form表单</p>\n<pre> &lt;form:form action=&quot;form/add&quot; method=&quot;post&quot; modelAttribute=&quot;user&quot;&gt;\n        id:&lt;form:input path=&quot;id&quot;/&gt;&lt;form:errors path=&quot;id&quot;/&gt;&lt;br&gt;\n        name:&lt;form:input path=&quot;name&quot;/&gt;&lt;form:errors path=&quot;name&quot;/&gt;&lt;br&gt;\n        birth:&lt;form:input path=&quot;birth&quot;/&gt;&lt;form:errors path=&quot;birth&quot;/&gt;\n        &lt;input type=&quot;submit&quot; value=&quot;submit&quot;&gt;\n    &lt;/form:form&gt;</pre>\n<p>ps:path对应name</p>\n<p>4.Controller中代码</p>\n<pre>@Controller\n@RequestMapping(&quot;/form&quot;)\npublic class formController {\n    @RequestMapping(value=&quot;/add&quot;,method=RequestMethod.POST)    \n    public String add(@Valid User u,BindingResult br){\n        if(br.getErrorCount()&gt;0){            \n            return &quot;addUser&quot;;\n        }\n        return &quot;showUser&quot;;\n    }\n\n    @RequestMapping(value=&quot;/add&quot;,method=RequestMethod.GET)\n    public String add(Map&lt;String,Object&gt; map){\n        map.put(&quot;user&quot;,new User());\n        return &quot;addUser&quot;;\n    }\n}</pre>\n<p>ps:</p>\n<p>1.因为jsp中使用了modelAttribute属性，所以必须在request域中有一个”user”.</p>\n<p>2.@Valid 表示按照在实体上标记的注解验证参数</p>\n<p>3.返回到原页面错误信息回回显，表单也会回显</p>\n<p>5.错误信息自定义</p>\n<p>在src目录下添加locale.properties</p>\n<pre>NotEmpty.user.name=name can\'t not be empty\nPast.user.birth=birth should be a past value\nDateTimeFormat.user.birth=the format of input is wrong\ntypeMismatch.user.birth=the format of input is wrong\ntypeMismatch.user.id=the format of input is wrong</pre>\n<p>在SpringMVC配置文件中配置</p>\n<pre>&lt;!-- configure the locale resource --&gt;\n    &lt;bean id=&quot;messageSource&quot; class=&quot;org.springframework.context.support.ResourceBundleMessageSource&quot;&gt;\n        &lt;property name=&quot;basename&quot; value=&quot;locale&quot;&gt;&lt;/property&gt;\n    &lt;/bean&gt;</pre>\n<p>6.国际化显示</p>\n<p>在src下添加locale_zh_CN.properties</p>\n<pre>username=账号\npassword=密码</pre>\n<p>locale.properties中添加</p>\n<pre>username=user name\npassword=password</pre>\n<p>创建一个locale.jsp</p>\n<pre>&lt;body&gt;\n    &lt;fmt:message key=&quot;username&quot;&gt;&lt;/fmt:message&gt;\n    &lt;fmt:message key=&quot;password&quot;&gt;&lt;/fmt:message&gt;\n  &lt;/body&gt;</pre>\n<p>在SpringMVC中配置</p>\n<pre> &lt;!-- make the jsp page can be visited --&gt;\n    &lt;mvc:view-controller path=&quot;/locale&quot; view-name=&quot;locale&quot;/&gt;</pre>\n<p>让locale.jsp在WEB-INF下也能直接访问</p>\n<p>最后，访问locale.jsp，切换浏览器语言，能看到账号和密码的语言也切换了</p>\n<h2>十七、压轴大戏–整合SpringIOC和SpringMVC</h2>\n<p>1.创建一个test.SpringMVC.integrate的包用来演示整合，并创建各类</p>\n<p><img alt=\"史上最全最强SpringMVC详细示例实战教程\" src=\"http://static.codeceo.com/images/2015/06/052306155821182.png\"></p>\n<p>2.User实体类</p>\n<pre>public class User {\n    public int getId() {\n        return id;\n    }\n    public void setId(int id) {\n        this.id = id;\n    }\n    public String getName() {\n        return name;\n    }\n    public void setName(String name) {\n        this.name = name;\n    }\n    public Date getBirth() {\n        return birth;\n    }\n    public void setBirth(Date birth) {\n        this.birth = birth;\n    }\n    @Override\n    public String toString() {\n        return &quot;User [id=&quot; &#43; id &#43; &quot;, name=&quot; &#43; name &#43; &quot;, birth=&quot; &#43; birth &#43; &quot;]&quot;;\n    }    \n    private int id;\n    @NotEmpty\n    private String name;\n\n    @Past\n    @DateTimeFormat(pattern=&quot;yyyy-MM-dd&quot;)\n    private Date birth;\n}</pre>\n<p>3.UserService类</p>\n<pre>@Component\npublic class UserService {\n    public UserService(){\n        System.out.println(&quot;UserService Constructor.../n/n/n/n/n/n&quot;);\n    }\n\n    public void save(){\n        System.out.println(&quot;save&quot;);\n    }\n}</pre>\n<p>4.UserController</p>\n<pre>@Controller\n@RequestMapping(&quot;/integrate&quot;)\npublic class UserController {\n    @Autowired\n    private UserService userService;\n\n    @RequestMapping(&quot;/user&quot;)\n    public String saveUser(@RequestBody @ModelAttribute User u){\n        System.out.println(u);\n        userService.save();\n        return &quot;hello&quot;;\n    }\n}</pre>\n<p>5.Spring配置文件</p>\n<p>在src目录下创建SpringIOC的配置文件applicationContext.xml</p>\n<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans  \n\nhttp://www.springframework.org/schema/beans/spring-beans.xsd\n\n\nhttp://www.springframework.org/schema/util\n\n\nhttp://www.springframework.org/schema/util/spring-util-4.0.xsd\n\n\nhttp://www.springframework.org/schema/context\n\n\nhttp://www.springframework.org/schema/context/spring-context.xsd\n\n        &quot;\n        xmlns:util=&quot;http://www.springframework.org/schema/util&quot;\n        xmlns:p=&quot;http://www.springframework.org/schema/p&quot;\n        xmlns:context=&quot;http://www.springframework.org/schema/context&quot;    \n        &gt;\n    &lt;context:component-scan base-package=&quot;test.SpringMVC.integrate&quot;&gt;\n        &lt;context:exclude-filter type=&quot;annotation&quot; \n            expression=&quot;org.springframework.stereotype.Controller&quot;/&gt;\n        &lt;context:exclude-filter type=&quot;annotation&quot; \n            expression=&quot;org.springframework.web.bind.annotation.ControllerAdvice&quot;/&gt;        \n    &lt;/context:component-scan&gt;\n\n&lt;/beans&gt;</pre>\n<p>在Web.xml中添加配置</p>\n<pre>&lt;!-- configure the springIOC --&gt;\n  &lt;listener&gt;\n      &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n  &lt;/listener&gt;\n  &lt;context-param&gt;  \n    &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;  \n    &lt;param-value&gt;classpath:applicationContext.xml&lt;/param-value&gt;\n  &lt;/context-param&gt;</pre>\n<p>6.在SpringMVC中进行一些配置，防止SpringMVC和SpringIOC对同一个对象的管理重合</p>\n<pre>&lt;!-- scan the package and the sub package --&gt;\n    &lt;context:component-scan base-package=&quot;test.SpringMVC.integrate&quot;&gt;\n        &lt;context:include-filter type=&quot;annotation&quot; \n            expression=&quot;org.springframework.stereotype.Controller&quot;/&gt;\n        &lt;context:include-filter type=&quot;annotation&quot; \n            expression=&quot;org.springframework.web.bind.annotation.ControllerAdvice&quot;/&gt;\n    &lt;/context:component-scan&gt;</pre>\n<h2><strong>十八、SpringMVC详细运行流程图</strong></h2>\n<p><img alt=\"史上最全最强SpringMVC详细示例实战教程\" src=\"http://static.codeceo.com/images/2015/06/052340331602684.png\"></p>\n<h2>十九、SpringMVC与struts2的区别</h2>\n<p>1、springmvc基于方法开发的，struts2基于类开发的。springmvc将url和controller里的方法映射。映射成功后springmvc生成一个Handler对象，对象中只包括了一个method。方法执行结束，形参数据销毁。springmvc的controller开发类&#20284;web service开发。<br>\n2、springmvc可以进行单例开发，并且建议使用单例开发，struts2通过类的成员变量接收参数，无法使用单例，只能使用多例。<br>\n3、经过实际测试，struts2速度慢，在于使用struts标签，如果使用struts建议使用jstl。</p>\n<p>&nbsp;</p>\n<p>本文转自<a target=\"_blank\" href=\"http://www.codeceo.com/article/best-springmvc-guide.html\" target=\"_blank\">http://www.codeceo.com/article/best-springmvc-guide.html</a></p>\n   \n', '2016-04-16 01:21:19', '0');
INSERT INTO `article` VALUES ('10078', '10003', '给Java开发者的PlayFramework(2.4)介绍Part1：Play的优缺点以及适用场景', '\n<h3>1. 关于这篇系列</h3><p>这篇系列不是Play框架的Hello World，因为这样的文章网上已经有很多。</p><p>这篇系列会首先结合实际代码介绍Play的特点以及适用场景，然后会有几篇文章介绍Play与Spring，JPA（Hibernate）的集成，以及一些Play应用的最佳实践， 这期间会在Github上提供一个脚手架项目，方便感兴趣的朋友直接动手尝试。最后会简单分析Play的部分源码，帮助大家理解黑盒子的内部机制。</p><p>我水平有限，有错误欢迎指出。</p><h3>2. Play介绍</h3><p>Play Framework是一个开源的Web框架，背后商业公司是Typesafe。要介绍Play之前，首先理清Play的两个不同的分支。 Play 1.x 使用Java开发，最新版本是1.3.1，只支持Java项目。从11年开始就进入了维护阶段，新项目一般不考虑使用Play1。 Play 2.x 使用Scala和Java开发，同时支持Java和Scala项目。 这里主要介绍最新的Play2.4 for Java。有一点需要提前说明，虽然Play2主要由Scala开发，但是对于项目中的一般开发人员而言， 使用Play可以完全不懂Scala，具体情况后面会说明。</p><h3>3. 为什么要了解Play</h3><p>现在的Web框架或者类库可以说是浩如烟海。近十年来，在Web开发领域，JVM阵营的占有率一直不高， <img src=\"http://skaka.me/images/custom/20150728/frameworks.png\" alt=\"\"> 数据来源(<a target=\"_blank\" href=\"http://hotframeworks.com/#rankings\">http://hotframeworks.com/#rankings</a>)<br>这是国外开源项目的数据，相对来说国内Java框架的使用率会高一些。而最近几年，Ruby和Python在国内的开发群体也在不断壮大。 Java框架在Web领域不那么受欢迎，主要原因在于开发速度远落后于其他的开发框架。对于初创公司而言，快速开发出产品投入市场试错比花半年打磨出一款功能性能齐备的 应用更加重要，而对于成熟产品，也需要快速响应频繁的需求变化，这方面动态语言又更胜一筹。所以说到Web后端框架的技术选型，除非技术团队有比较深的JVM背景， 否则会倾向于选择RoR，Django这些框架。</p><p>JVM阵营在Web领域逐渐落后主要有三个原因：编译的锅，技术栈的锅和语言的锅。</p><p>大家都知道Java源代码需要编译之后才能运行，直接结果是每次修改源代码都需要重启Web服务器才能看到效果。如果项目比较小类也少，重启时间还勉强能接受。 我以前参与的一个项目，使用的是WebLogic服务器，Spring容器里大概有上千个Bean，重启一次至少得花5分钟，还是优化后的结果。工作时间至少有20%花在重启上了。 虽然现在有JRebel之类的热加载技术，但是国内使用的相对较少。</p><p>Servlet规范在1997年出现，在当时可以说是很先进的技术，加上Tomcat的横空出世，直接促成了JSP的崛起。然而时过境迁，Servlet风光不再， Web容器存在的必要性也<a target=\"_blank\" href=\"https://jaxenter.com/java-application-servers-dead-112186.html\">被越来越多的人质疑</a>。原因就在于人为的将应用与容器剥离， 虽然这种做法本意是好的，但是结果就是给开发测试部署带来一系列集成的问题，现在越来越多的项目开始使用内嵌的Jetty或Tomcat就是一个现实的例子。 Servlet还带来一个问题，就是有状态的服务器。一旦使用了Session，服务器就无法享受到水平扩展的好处了，由此不得不采用Session复制或者粘性Session(Sticky Session)的 方案来解决这个问题，无论采取哪种方案都会有性能损耗，并且推高了技术成本。Servlet说到底是Java EE家族的一员，由于Sun的领导（Oracle背锅）， 从Java EE 5开始，Java EE的角色已经从技术创新者转换为跟随者，这些年基本上可以说是跟着开源社区的步子在走的，除了政府大单和跨国企业，你很难再看见它的身影了。</p><!-- more --> <p>至于语言，其实从JDK8开始，Java已经很好用了。不过从JDK5到JDK8，十年太长，尤其是在Web。</p><p>之前Java阵营受累于没有成熟的快速开发框架，Spring热衷于提供各种集成方案，可是配置和使用还是相当的麻烦，直到Spring Boot的出现才有改善。 不过近几年出现了一些相当优秀的框架，如<a target=\"_blank\" href=\"http://www.dropwizard.io/\">Dropwizard</a>，<a target=\"_blank\" href=\"https://playframework.com/\">Play</a>，<a target=\"_blank\" href=\"http://vertx.io/\">Vert.x</a>。 这篇系列要介绍的Play，通过ClassLoader在源代码修改的时候动态加载类，解决了修改代码需要重启服务器的问题，完全抛弃了Servlet技术栈，基于Netty实现了自己的 请求响应接口（Request/Result），基于Play的应用就是无状态的，另外Play处理请求的方式是无阻塞的（Non-Blocking）。Play2在设计的时候借鉴了RoR的许多优点， 学习Play能够让你了解一些现代化框架的特点，同时能够为你打开异步编程世界的大门。Promise已经被Scala，JavaScript等语言大量使用，Actor模型也已经遍地开花， 这些你都可以直接在Play中使用，或者你想保持原来的编程风格也完全没有问题。</p><h3>4. Play的特性</h3><h4>1. Play2的模板引擎</h4><p>Play2的模板是很强大并且容易上手的. 相对于Java领域其他模板引擎(Freemarker, Velocity, JSP, Groovy, etc), 主要有三个特点.<br>1) 简单易上手, 没有JSP里面繁杂的内置对象和指令, 所有功能都通过方法调用完成.<br>2) 主流IDE中都支持Play模板的静态类型检查, 类似JSP.<br> 3) 支持反向路由.<br>举个例子, 一般系统都会有一个固定的页面布局, 比如分出页头页尾。如果用JSP或者Velocity之类的模板， 一般都是通过sitemesh+filter或者在每个页面include来完成布局。使用Play模板, 完成这个功能非常容易。 首先定义一个main页面 main.scala.html：</p><figure class=\"code\"><figcaption><span></span></figcaption><div class=\"highlight\"><table><tbody><tr><td class=\"gutter\"><pre class=\"line-numbers\"><span class=\"line-number\">1</span>\n<span class=\"line-number\">2</span>\n<span class=\"line-number\">3</span>\n<span class=\"line-number\">4</span>\n<span class=\"line-number\">5</span>\n<span class=\"line-number\">6</span>\n<span class=\"line-number\">7</span>\n<span class=\"line-number\">8</span>\n<span class=\"line-number\">9</span>\n<span class=\"line-number\">10</span>\n<span class=\"line-number\">11</span>\n<span class=\"line-number\">12</span>\n<span class=\"line-number\">13</span>\n<span class=\"line-number\">14</span>\n<span class=\"line-number\">15</span>\n<span class=\"line-number\">16</span>\n<span class=\"line-number\">17</span>\n<span class=\"line-number\">18</span>\n<span class=\"line-number\">19</span>\n<span class=\"line-number\">20</span>\n<span class=\"line-number\">21</span>\n<span class=\"line-number\">22</span>\n</pre></td><td class=\"code\"><pre><code class=\"html\"><span class=\"line\">@(title: String = &quot;默认标题&quot;)(staticFile: Html = Html(&quot;&quot;))(content: Html)\n</span><span class=\"line\">\n</span><span class=\"line\"><span class=\"cp\">&lt;!DOCTYPE html&gt;</span>\n</span><span class=\"line\"><span class=\"nt\">&lt;html</span> <span class=\"na\">lang=</span><span class=\"s\">&quot;zh-cmn-Hans&quot;</span><span class=\"nt\">&gt;</span>\n</span><span class=\"line\"><span class=\"nt\">&lt;head&gt;</span>\n</span><span class=\"line\">    <span class=\"nt\">&lt;meta</span> <span class=\"na\">charset=</span><span class=\"s\">&quot;utf-8&quot;</span> <span class=\"nt\">/&gt;</span>\n</span><span class=\"line\">    <span class=\"nt\">&lt;title&gt;</span>@title<span class=\"nt\">&lt;/title&gt;</span>\n</span><span class=\"line\">\n</span><span class=\"line\">\n</span><span class=\"line\"><span class=\"nt\">&lt;/head&gt;</span>\n</span><span class=\"line\">\n</span><span class=\"line\"><span class=\"nt\">&lt;body&gt;</span>\n</span><span class=\"line\">\n</span><span class=\"line\">@header()  <span class=\"nt\">&lt;--</span> <span class=\"err\">页头</span> <span class=\"na\">--</span><span class=\"nt\">&gt;</span>\n</span><span class=\"line\">\n</span><span class=\"line\">@navigator() <span class=\"c\">&lt;!-- 导航 --&gt;</span>\n</span><span class=\"line\">\n</span><span class=\"line\">@content\n</span><span class=\"line\">\n</span><span class=\"line\"><span class=\"nt\">&lt;script </span><span class=\"na\">src=</span><span class=\"s\">&quot;@routes.Assets.versioned(&quot;</span><span class=\"na\">js</span><span class=\"err\">/</span><span class=\"na\">jquery-1</span><span class=\"err\">.</span><span class=\"na\">11</span><span class=\"err\">.</span><span class=\"na\">2</span><span class=\"err\">.</span><span class=\"na\">min</span><span class=\"err\">.</span><span class=\"na\">js</span><span class=\"err\">&quot;)&quot;</span><span class=\"nt\">&gt;&lt;/script&gt;</span>\n</span><span class=\"line\">\n</span><span class=\"line\">@staticFile\n</span></code></pre></td></tr></tbody></table></div></figure><figure class=\"code\"><figcaption><span></span></figcaption><div class=\"highlight\"><table><tbody><tr><td class=\"gutter\"><pre class=\"line-numbers\"><span class=\"line-number\">1</span>\n</pre></td><td class=\"code\"><pre><code class=\"html\"><span class=\"line\">@(title: String = &quot;默认标题&quot;)(staticFile: Html = Html(&quot;&quot;))(content: Html)\n</span></code></pre></td></tr></tbody></table></div></figure><p>这一部分是参数声明，这里声明了三个参数:title标题, 有默认值；staticFile为html代码块, 可以传js等；content为页面内容。</p><figure class=\"code\"><figcaption><span></span></figcaption><div class=\"highlight\"><table><tbody><tr><td class=\"gutter\"><pre class=\"line-numbers\"><span class=\"line-number\">1</span>\n<span class=\"line-number\">2</span>\n<span class=\"line-number\">3</span>\n</pre></td><td class=\"code\"><pre><code class=\"html\"><span class=\"line\">@header()  <span class=\"nt\">&lt;--</span> <span class=\"err\">页头</span> <span class=\"na\">--</span><span class=\"nt\">&gt;</span>\n</span><span class=\"line\">\n</span><span class=\"line\">@navigator() <span class=\"c\">&lt;!-- 导航 --&gt;</span>\n</span></code></pre></td></tr></tbody></table></div></figure><p>这一部分是引用同目录下的另外两个页面：header.scala.html和navigator.scala.html。为什么能这样引用，因为这些页面(main,header,navigator)都会被自动 编译成一个方法（准确地说是一个Scala object，不过这里先当做方法），所以这里相当于方法调用。同样，这个main也会被编译成方法，其他页面可以调用main来完成布局， 例如 login.scala.html</p><figure class=\"code\"><figcaption><span></span></figcaption><div class=\"highlight\"><table><tbody><tr><td class=\"gutter\"><pre class=\"line-numbers\"><span class=\"line-number\">1</span>\n<span class=\"line-number\">2</span>\n<span class=\"line-number\">3</span>\n<span class=\"line-number\">4</span>\n<span class=\"line-number\">5</span>\n<span class=\"line-number\">6</span>\n<span class=\"line-number\">7</span>\n<span class=\"line-number\">8</span>\n<span class=\"line-number\">9</span>\n</pre></td><td class=\"code\"><pre><code class=\"html\"><span class=\"line\">@main() {\n</span><span class=\"line\">    <span class=\"nt\">&lt;script </span><span class=\"na\">type=</span><span class=\"s\">&quot;text/javascript&quot;</span><span class=\"nt\">&gt;</span>\n</span><span class=\"line\">        <span class=\"nx\">FG</span><span class=\"p\">.</span><span class=\"nx\">user</span><span class=\"p\">.</span><span class=\"nx\">login</span><span class=\"p\">();</span>\n</span><span class=\"line\">    <span class=\"nt\">&lt;/script&gt;</span>\n</span><span class=\"line\">} {\n</span><span class=\"line\">    <span class=\"nt\">&lt;div</span> <span class=\"na\">class=</span><span class=\"s\">&quot;login width1200&quot;</span><span class=\"nt\">&gt;</span>\n</span><span class=\"line\">    <span class=\"c\">&lt;!-- login --&gt;</span>\n</span><span class=\"line\">    <span class=\"nt\">&lt;/div&gt;</span>\n</span><span class=\"line\">}\n</span></code></pre></td></tr></tbody></table></div></figure><p>这就是一个简单的登录页面。登录页面调用main页面的方法，第一个参数不传使用默认标题，第二个参数传入登录页面的js代码，第三个参数传入登录页面的html代码。 这样就完成了页面布局, 没有随处可见的include, 也没有暗箱操作的filter, 所有的一切都是方法调用, 是不是很简单清晰？</p><p>静态类型检查就不说了, 本来Java的一大优点(Que Dian)就是类型检查，所以在Java里用Freemarker或者Velocity这种模板的做法值得商榷。</p><p>反向路由的意思是, 在Play中, 所有的Controller url都配置在一个routes文件中, 例如</p><figure class=\"code\"><figcaption><span></span></figcaption><div class=\"highlight\"><table><tbody><tr><td class=\"gutter\"><pre class=\"line-numbers\"><span class=\"line-number\">1</span>\n</pre></td><td class=\"code\"><pre><code class=\"html\"><span class=\"line\">GET         /register                           @controllers.user.LoginController.registerPage\n</span></code></pre></td></tr></tbody></table></div></figure><p>之后无论是在Controller里还是模板中, 都不用硬编码url。而是使用routes文件。例如在Controller中使用<code>redirect(routes.LoginController.registerPage())</code>就能实现重定向。 而在模板中使用 <code>&lt;a href=&quot;@controllers.routes.LoginController.registerPage()&quot;&gt;</code>来指向链接。这种风格就是REST里的URI模板。</p><h4>2. 热部署</h4><p>这个上面介绍过，不用重启服务器。</p><h4>3. 内置dev/prod环境，内置部署脚本</h4><p>平常开发的时候使用run启动Play，是跑在dev模式。 Play会定时扫描源码目录进行热更新，并且类都是访问的时候再加载，提高启动速度。 使用start启动项目就运行在prod模式。Play内置dist命令，可以把所有的文件打包成一个zip，解压之后直接运行bin目录下的可执行文件即可启动项目，除了JDK之外无须任何其他外部依赖。 这大大减轻了运维成本，同时也能够很方便的进行持续集成（CI）。</p><h4>4. 使用Play开发的Server大部分能做到Stateless</h4><p>这个之前也说过，Play抛弃了Servlet/JSP里Session等概念, 内置没有提供方法将对象与服务器实例进行绑定(你要使用HashMap存的话Play也没办法)。 推荐的做法是使用外部缓存, 比如Redis, Memcached等。可能有人会觉得没有Session是Play的一个缺点（Play里的Session和Servlet Session不是一回事）, 但是只要你开发过流量大一点的应用, 你就会理解这点。</p><h4>5. 好用的配置库</h4><p>如果你之前开发过Java项目, 肯定写过**.properties或者管理过一大堆的xml。Java内置库对properties文件的处理是很弱的，你不得不自己写一些工具类去进行处理， 而且properties文件还不支持更复杂的语法。Play使用<a target=\"_blank\" href=\"https://github.com/typesafehub/config\">Typesafe Config</a>库，配置文件使用HOCON格式，默认配置文件为application.conf。 你能很容易读取里面的配置, 并且你也可以把自己的配置写在里面。所以项目中基本不需要使用properties或者xml文件了，除了第三方库需要的。</p><h4>6. Play插件</h4><p>RoR框架之所以好用，主要原因之一就是围绕RoR有相当丰富的插件可供选择，很多业务功能甚至都不需要开发就能实现。Play的插件数量当然相对于RoR还是要少一些， 不过你遇到的需求基本都有现成的插件可以使用。比如发邮件, 授权和验证, sitemap生成，第三方登录等等。自己写一个插件也很简单。</p><h4>7. 优秀的测试支持</h4><p>因为Play诞生的时候TDD已经很火热，所以Play对测试的支持非常好。 例如下面的几行代码就能对Controller进行测试。</p><figure class=\"code\"><figcaption><span></span></figcaption><div class=\"highlight\"><table><tbody><tr><td class=\"gutter\"><pre class=\"line-numbers\"><span class=\"line-number\">1</span>\n<span class=\"line-number\">2</span>\n<span class=\"line-number\">3</span>\n</pre></td><td class=\"code\"><pre><code class=\"Java\"><span class=\"line\"><span class=\"n\">Http</span><span class=\"o\">.</span><span class=\"na\">RequestBuilder</span> <span class=\"n\">request</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"n\">Http</span><span class=\"o\">.</span><span class=\"na\">RequestBuilder</span><span class=\"o\">().</span><span class=\"na\">method</span><span class=\"o\">(</span><span class=\"n\">POST</span><span class=\"o\">).</span><span class=\"na\">uri</span><span class=\"o\">(</span><span class=\"n\">routes</span><span class=\"o\">.</span><span class=\"na\">LoginController</span><span class=\"o\">.</span><span class=\"na\">requestPhoneCode</span><span class=\"o\">(</span><span class=\"n\">phone</span><span class=\"o\">).</span><span class=\"na\">url</span><span class=\"o\">());</span>\n</span><span class=\"line\"><span class=\"n\">Result</span> <span class=\"n\">result</span> <span class=\"o\">=</span> <span class=\"n\">route</span><span class=\"o\">(</span><span class=\"n\">request</span><span class=\"o\">);</span>\n</span><span class=\"line\"><span class=\"n\">assertThat</span><span class=\"o\">(</span><span class=\"n\">result</span><span class=\"o\">.</span><span class=\"na\">status</span><span class=\"o\">(),</span> <span class=\"n\">is</span><span class=\"o\">(</span><span class=\"n\">OK</span><span class=\"o\">));</span>\n</span></code></pre></td></tr></tbody></table></div></figure><p>Play还内置了对 Selenium WebDriver的支持，可以模拟浏览器进行测试。以下是官方的例子：</p><figure class=\"code\"><figcaption><span></span></figcaption><div class=\"highlight\"><table><tbody><tr><td class=\"gutter\"><pre class=\"line-numbers\"><span class=\"line-number\">1</span>\n<span class=\"line-number\">2</span>\n<span class=\"line-number\">3</span>\n<span class=\"line-number\">4</span>\n<span class=\"line-number\">5</span>\n<span class=\"line-number\">6</span>\n<span class=\"line-number\">7</span>\n<span class=\"line-number\">8</span>\n<span class=\"line-number\">9</span>\n</pre></td><td class=\"code\"><pre><code class=\"Java\"><span class=\"line\"><span class=\"kd\">public</span> <span class=\"kd\">class</span> <span class=\"nc\">BrowserFunctionalTest</span> <span class=\"kd\">extends</span> <span class=\"n\">WithBrowser</span> <span class=\"o\">{</span>\n</span><span class=\"line\">\n</span><span class=\"line\">    <span class=\"nd\">@Test</span>\n</span><span class=\"line\">    <span class=\"kd\">public</span> <span class=\"kt\">void</span> <span class=\"nf\">runInBrowser</span><span class=\"o\">()</span> <span class=\"o\">{</span>\n</span><span class=\"line\">        <span class=\"n\">browser</span><span class=\"o\">.</span><span class=\"na\">goTo</span><span class=\"o\">(</span><span class=\"s\">&quot;/&quot;</span><span class=\"o\">);</span>\n</span><span class=\"line\">        <span class=\"n\">assertNotNull</span><span class=\"o\">(</span><span class=\"n\">browser</span><span class=\"o\">.</span><span class=\"na\">$</span><span class=\"o\">(</span><span class=\"s\">&quot;title&quot;</span><span class=\"o\">).</span><span class=\"na\">getText</span><span class=\"o\">());</span>\n</span><span class=\"line\">    <span class=\"o\">}</span>\n</span><span class=\"line\">\n</span><span class=\"line\"><span class=\"o\">}</span>\n</span></code></pre></td></tr></tbody></table></div></figure><h4>8. 优秀的REST支持</h4><p>Play2从诞生起就能很容易的支持RESTful风格的架构（因为Play2在设计的时候REST就已经大行其道）， 在Play2中实现RESTful API的示例可以参考Stackoverflow上的这个<a target=\"_blank\" href=\"http://stackoverflow.com/questions/4379485/restful-on-play-framework\">回答</a></p><h3>5. 使用Play过程中遇到的坑</h3><h4>1. 首次编译速度过慢</h4><p>这是Scala的锅。Scala在编译过程中要<a target=\"_blank\" href=\"http://stackoverflow.com/questions/4527902/what-is-the-order-of-the-scala-compiler-phases\">经历至少30个步骤</a>， 导致编译速度相当慢。在我的机器上（Core™ i5-4590 CPU @ 3.30GHz，RAM 8GB），编译100多个Scala类大约需要1到2分钟。好在sbt可以增量编译， 即首次编译之后，你再修改代码，编译器只会编译那些它认为需要编译的类，编译几个类的时候速度很快，基本刷新页面就能完成。</p><h4>2. IDE的Scala插件偶尔会误报错误</h4><p>首先得说明，最适合开发Play项目的IDE是<a target=\"_blank\" href=\"https://www.jetbrains.com/idea\">IntelliJ IDEA</a>。现在IDEA最新的Scala插件相比之前的版本，已经有很大的提升。 不过偶尔还是会出现误报的情况，这个问题随着新版本插件的发布应该会慢慢解决。</p><h4>3. Scala和Sbt的学习成本较高</h4><p>这可能是初次接触Play的用户遇到的最大障碍。其实对于大多数业务开发人员来说，这不是问题。使用Play for Java版本，项目代码99%都是Java代码， 而Sbt类似于Maven，一旦项目搭建好后不需要过多接触，只要学会几个常用的命令就可以了，例如project root(切换项目), run(启动服务器在dev模式)。 我们团队大部分成员之前都没有接触过Scala和Play，经过一两周的磨合期之后都能很顺利的使用Play进行开发了。</p><h4>4. Play的API变化速度比较快</h4><p>Play的版本号遵循<a target=\"_blank\" href=\"http://semver.org/\">Semantic Versioning</a>，不同主版本的API变化非常大，比如Play1和Play2就是两个不同的框架。 而副版本之间API也会有一些变化，而且不一定完全向后兼容。例如使用Play2.3.x的项目在升级到2.4的时候，需要按照官方提供的迁移手册进行代码修改， 不然是运行不了的。这对于其他背景的开发者来说可能比较容易理解，但是如果是一直习惯于使用Spring MVC或Struts2的话，可能会对这点感到不适。</p><h3>6.总结</h3><p>Play2可以算是一个现代化的框架，吸收了RoR诸多优点，同时又解决了Java开发中的一些痛点，在国外已经被大量使用。参见 <img src=\"http://skaka.me/images/custom/20150728/playframework2.png\" alt=\"\"> 数据来源(<a target=\"_blank\" href=\"http://www.infoq.com/research/jvm-web-frameworks\">http://www.infoq.com/research/jvm-web-frameworks</a>)</p><p>Play和Spring MVC的定位有些相似，但是比Spring MVC提供更丰富的功能，和Web有关的项目都可以使用Play。但是如果要用好Play，对团队有一定的要求。</p><p>首先，你的团队应该不是墨守成规的团队。大部分人都害怕变化，这是不争的事实。JDK的发展缓慢加上国内的技术氛围，着实让Java开发人员过了几年的舒服日子。 你如果是05年学会了ibatis和Spring，然后这十年去环游世界了，在15年你照样能轻松找到一份待遇还算可以的工作。然而事情已经开始发生变化，不会学习可能会被淘汰。</p><p>其次，你的团队应该重视工作效率和质量，并且有时间做出改进。国内很多团队信奉的是人海战术。以低薪聘请大量不合格的开发人员来开发业务功能， 而不是注重单人的工作效率和质量，很多项目的加班和延期都源于此。这样的团队就不适合用Play。很难想象每天都要加班去应付工作的团队有时间打磨升级自己的工具和技能。 但是反过来低效率的工具和技能又拖累了自己的工作效率，这是一个恶性循环。</p><p>最后，团队中需要有人对Scala和Sbt有一定的了解。虽然Play有Java版本可以使用，但是如果不会Scala和Sbt，在搭建环境，使用一些高级功能（如Filter）的时候可能会遇到麻烦。</p><p>下篇我会介绍Play和Spring还有JPA（Hibernate）的集成，毕竟Spring在大部分Java项目还是主流。有问题和建议欢迎指出。</p><p>&nbsp;</p><p>本文借鉴：<a target=\"_blank\" href=\"http://skaka.me/blog/2015/07/27/play1/\">http://skaka.me/blog/2015/07/27/play1/</a></p>   \n', '2016-04-16 01:21:19', '1');
INSERT INTO `article` VALUES ('10079', '10003', 'Spring详解-----------事务详解', '\n\n<h2 style=\"line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n9.1&nbsp; 数据库事务概述</h2>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n事务首先是一系列操作组成的工作单元，该工作单元内的操作是不可分割的，即要么所有操作都做，要么所有操作都不做，这就是事务。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n事务必需满足ACID（原子性、一致性、隔离性和持久性）特性，缺一不可：</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>原子性（Atomicity）：</strong>即事务是不可分割的最小工作单元，事务内的操作要么全做，要么全不做；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>一致性（Consistency）：</strong>在事务执行前数据库的数据处于正确的状态，而事务执行完成后数据库的数据还是处于正确的状态，即数据完整性约束没有被破坏；如银行转帐，A转帐给B，必须保证A的钱一定转给B，一定不会出现A的钱转了但B没收到，否则数据库的数据就处于不一致（不正确）的状态。</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>隔离性（Isolation）：</strong>并发事务执行之间无影响，在一个事务内部的操作对其他事务是不产生影响，这需要事务隔离级别来指定隔离性；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>持久性（Durability）：</strong>事务一旦执行成功，它对数据库的数据的改变必须是永久的，不会因比如遇到系统故障或断电造成数据不一致或丢失。</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n在实际项目开发中数据库操作一般都是并发执行的，即有多个事务并发执行，并发执行就可能遇到问题，目前常见的问题如下：</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\">丢失更新：两个事务同时更新一行数据，最后一个事务的更新会覆盖掉第一个事务的更新，从而导致第一个事务更新的数据丢失，这是由于没有加锁造成的；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\">脏读：一个事务看到了另一个事务未提交的更新数据；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\">不可重复读：在同一事务中，多次读取同一数据却返回不同的结果；也就是有其他事务更改了这些数据；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\">幻读：一个事务在执行过程中读取到了另一个事务已提交的插入数据；即在第一个事务开始时读取到一批数据，但此后另一个事务又插入了新数据并提交，此时第一个事务又读取这批数据但发现多了一条，即好像发生幻觉一样。</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n为了解决这些并发问题，需要通过数据库隔离级别来解决，在标准SQL规范中定义了四种隔离级别：</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>未提交读（Read Uncommitted）</strong>：最低隔离级别，一个事务能读取到别的事务未提交的更新数据，很不安全，可能出现丢失更新、脏读、不可重复读、幻读；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>提交读（Read Committed）</strong>：一个事务能读取到别的事务提交的更新数据，不能看到未提交的更新数据，不可能可能出现丢失更新、脏读，但可能出现不可重复读、幻读；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>可重复读（Repeatable Read）</strong>：保证同一事务中先后执行的多次查询将返回同一结果，不受其他事务影响，可能可能出现丢失更新、脏读、不可重复读，但可能出现幻读；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>序列化（Serializable）</strong>：最高隔离级别，不允许事务并发执行，而必须串行化执行，最安全，不可能出现更新、脏读、不可重复读、幻读。</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n隔离级别越高，数据库事务并发执行性能越差，能处理的操作越少。因此在实际项目开发中为了考虑并发性能一般使用<strong>提交读</strong>隔离级别，它能避免丢失更新和脏读，尽管不可重复读和幻读不能避免，但可以在可能出现的场合使用<strong>悲观锁或乐观锁</strong>来解决这些问题。</p>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n9.1.1&nbsp; 事务类型</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n数据库事务类型有本地事务和分布式事务：</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\">本地事务：就是普通事务，能保证单台数据库上的操作的ACID，被限定在一台数据库上；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\">分布式事务：涉及两个或多个数据库源的事务，即跨越多台同类或异类数据库的事务（由每台数据库的本地事务组成的），分布式事务旨在保证这些本地事务的所有操作的ACID，使事务可以跨越多台数据库；</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\nJava事务类型有JDBC事务和JTA事务：</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\">JDBC事务：就是数据库事务类型中的本地事务，通过Connection对象的控制来管理事务；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\">JTA事务：JTA指Java事务API(Java Transaction API)，是Java EE数据库事务规范， JTA只提供了事务管理接口，由应用程序服务器厂商（如WebSphere Application Server）提供实现，JTA事务比JDBC更强大，支持分布式事务。</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\nJava EE事务类型有本地事务和全局事务：</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\">本地事务：使用JDBC编程实现事务；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\">全局事务：由应用程序服务器提供，使用JTA事务；</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n按是否通过编程实现事务有声明式事务和编程式事务；</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\">声明式事务： 通过注解或XML配置文件指定事务信息；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\">编程式事务：通过编写代码实现事务。</li></ul>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n9.1.2&nbsp; Spring提供的事务管理</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\nSpring框架最核心功能之一就是事务管理，而且提供一致的事务管理抽象，这能帮助我们：</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\">提供一致的编程式事务管理API，不管使用Spring JDBC框架还是集成第三方框架使用该API进行事务编程；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\">无侵入式的声明式事务支持。</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\nSpring支持声明式事务和编程式事务事务类型。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<br>\n</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<br>\n</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n</p>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n9.2.1&nbsp; 概述</h3>\n<p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Spring框架支持事务管理的核心是事务管理器抽象，对于不同的数据访问框架（如Hibernate）通过实现策略接口PlatformTransactionManager，从而能支持各种数据访问框架的事务管理，PlatformTransactionManager接口定义如下：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">interface</span>&nbsp;PlatformTransactionManager&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TransactionStatus&nbsp;getTransaction(TransactionDefinition&nbsp;definition)&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">throws</span>&nbsp;TransactionException;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;commit(TransactionStatus&nbsp;status)&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">throws</span>&nbsp;TransactionException;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;rollback(TransactionStatus&nbsp;status)&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">throws</span>&nbsp;TransactionException;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>getTransaction()：</strong>返回一个已经激活的事务或创建一个新的事务（根据给定的TransactionDefinition类型参数定义的事务属性），返回的是TransactionStatus对象代表了当前事务的状态，其中该方法抛出TransactionException（未检查异常）表示事务由于某种原因失败。</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>commit()：</strong>用于提交TransactionStatus参数代表的事务，具体语义请参考Spring Javadoc；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>rollback()：</strong>用于回滚TransactionStatus参数代表的事务，具体语义请参考Spring Javadoc。</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>TransactionDefinition接口定义如下：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">interface</span>&nbsp;TransactionDefinition&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">int</span>&nbsp;getPropagationBehavior();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">int</span>&nbsp;getIsolationLevel();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">int</span>&nbsp;getTimeout();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">boolean</span>&nbsp;isReadOnly();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;getName();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>getPropagationBehavior()：</strong>返回定义的事务传播行为；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>getIsolationLevel()：</strong>返回定义的事务隔离级别；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>getTimeout()：</strong>返回定义的事务超时时间；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>isReadOnly()：</strong>返回定义的事务是否是只读的；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>getName()：</strong>返回定义的事务名字。</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>TransactionStatus接口定义如下：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">interface</span>&nbsp;TransactionStatus&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">extends</span>&nbsp;SavepointManager&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">boolean</span>&nbsp;isNewTransaction();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">boolean</span>&nbsp;hasSavepoint();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;setRollbackOnly();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">boolean</span>&nbsp;isRollbackOnly();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;flush();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">boolean</span>&nbsp;isCompleted();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>isNewTransaction()：返回</strong>当前事务状态是否是新事务<strong>；</strong></li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>hasSavepoint()：返回当前事务是否有保存点</strong>；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>setRollbackOnly()：</strong>设置当前事务应该回滚；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>isRollbackOnly(()：</strong>返回当前事务是否应该回滚；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>flush()：</strong>用于刷新底层会话中的修改到数据库，一般用于刷新如Hibernate/JPA的会话，可能对如JDBC类型的事务无任何影响；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>isCompleted():</strong>当前事务否已经完成。</li></ul>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n&nbsp;</h3>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n9.2.2&nbsp;&nbsp; &nbsp;内置事务管理器实现</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\nSpring提供了许多内置事务管理器实现：</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>DataSourceTransactionManager：</strong>位于org.springframework.jdbc.datasource包中，数据源事务管理器，提供对单个javax.sql.DataSource事务管理，用于Spring JDBC抽象框架、iBATIS或MyBatis框架的事务管理；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>JdoTransactionManager：</strong>位于org.springframework.orm.jdo包中，提供对单个javax.jdo.PersistenceManagerFactory事务管理，用于集成JDO框架时的事务管理；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>JpaTransactionManager：</strong>位于org.springframework.orm.jpa包中，提供对单个javax.persistence.EntityManagerFactory事务支持，用于集成JPA实现框架时的事务管理；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>HibernateTransactionManager：</strong>位于org.springframework.orm.hibernate3包中，提供对单个org.hibernate.SessionFactory事务支持，用于集成Hibernate框架时的事务管理；该事务管理器只支持Hibernate3&#43;版本，且Spring3.0&#43;版本只支持Hibernate 3.2&#43;版本；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>JtaTransactionManager：</strong>位于org.springframework.transaction.jta包中，提供对分布式事务管理的支持，并将事务管理委托给Java EE应用服务器事务管理器；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>OC4JjtaTransactionManager：</strong>位于org.springframework.transaction.jta包中，Spring提供的对OC4J10.1.3&#43;应用服务器事务管理器的适配器，此适配器用于对应用服务器提供的高级事务的支持；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>WebSphereUowTransactionManager：</strong>位于org.springframework.transaction.jta包中，Spring提供的对WebSphere 6.0&#43;应用服务器事务管理器的适配器，此适配器用于对应用服务器提供的高级事务的支持；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>WebLogicJtaTransactionManager：</strong>位于org.springframework.transaction.jta包中，Spring提供的对WebLogic 8.1&#43;应用服务器事务管理器的适配器，此适配器用于对应用服务器提供的高级事务的支持。</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\nSpring不仅提供这些事务管理器，还提供对如JMS事务管理的管理器等，Spring提供一致的事务抽象如图9-1所示。</p>\n<p class=\"center\" style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; text-align:center\">\n<br>\n<img alt=\"\" src=\"http://dl.iteye.com/upload/attachment/0066/0970/632fd877-8165-3a60-ae7e-6429da8ed136.jpg\" title=\"点击查看原始大小图片\" class=\"magplus\" width=\"700\" height=\"373\" style=\"border:0px\"></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n图9-1 Spring事务管理器</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 接下来让我们学习一下如何在Spring配置文件中定义事务管理器：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>一、声明对本地事务的支持：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>a)JDBC及iBATIS、MyBatis框架事务管理器</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;bean&nbsp;id=<span class=\"string\" style=\"color:blue\">&quot;txManager&quot;</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>=<span class=\"string\" style=\"color:blue\">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span>&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=<span class=\"string\" style=\"color:blue\">&quot;dataSource&quot;</span>&nbsp;ref=<span class=\"string\" style=\"color:blue\">&quot;dataSource&quot;</span>/&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;/bean&gt;&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n通过dataSource属性指定需要事务管理的单个javax.sql.DataSource对象。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>b)Jdo事务管理器</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;bean&nbsp;id=<span class=\"string\" style=\"color:blue\">&quot;txManager&quot;</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>=<span class=\"string\" style=\"color:blue\">&quot;org.springframework.orm.jdo.JdoTransactionManager&quot;</span>&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=<span class=\"string\" style=\"color:blue\">&quot;persistenceManagerFactory&quot;</span>&nbsp;ref=<span class=\"string\" style=\"color:blue\">&quot;persistenceManagerFactory&quot;</span>/&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;/bean&gt;&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n通过persistenceManagerFactory属性指定需要事务管理的javax.jdo.PersistenceManagerFactory对象。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>c)Jpa事务管理器</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;bean&nbsp;id=<span class=\"string\" style=\"color:blue\">&quot;txManager&quot;</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>=<span class=\"string\" style=\"color:blue\">&quot;org.springframework.orm.jpa.JpaTransactionManager&quot;</span>&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=<span class=\"string\" style=\"color:blue\">&quot;entityManagerFactory&quot;</span>&nbsp;ref=<span class=\"string\" style=\"color:blue\">&quot;entityManagerFactory&quot;</span>/&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;/bean&gt;&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n通过entityManagerFactory属性指定需要事务管理的javax.persistence.EntityManagerFactory对象。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n还需要为entityManagerFactory对象指定jpaDialect属性，该属性所对应的对象指定了如何获取连接对象、开启事务、关闭事务等事务管理相关的行为。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;bean&nbsp;id=<span class=\"string\" style=\"color:blue\">&quot;entityManagerFactory&quot;</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>=<span class=\"string\" style=\"color:blue\">&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;</span>&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;……&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=<span class=\"string\" style=\"color:blue\">&quot;jpaDialect&quot;</span>&nbsp;ref=<span class=\"string\" style=\"color:blue\">&quot;jpaDialect&quot;</span>/&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;/bean&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;bean&nbsp;id=<span class=\"string\" style=\"color:blue\">&quot;jpaDialect&quot;</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>=<span class=\"string\" style=\"color:blue\">&quot;org.springframework.orm.jpa.vendor.HibernateJpaDialect&quot;</span>/&gt;&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>d)Hibernate事务管理器</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;bean&nbsp;id=<span class=\"string\" style=\"color:blue\">&quot;txManager&quot;</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>=<span class=\"string\" style=\"color:blue\">&quot;org.springframework.orm.hibernate3.HibernateTransactionManager&quot;</span>&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=<span class=\"string\" style=\"color:blue\">&quot;sessionFactory&quot;</span>&nbsp;ref=<span class=\"string\" style=\"color:blue\">&quot;sessionFactory&quot;</span>/&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;/bean&gt;&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n通过entityManagerFactory属性指定需要事务管理的org.hibernate.SessionFactory对象。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>二、Spring对全局事务的支持：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>a)Jta事务管理器</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;beans&nbsp;xmlns=<span class=\"string\" style=\"color:blue\">&quot;http://www.springframework.org/schema/beans&quot;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;xmlns:xsi=<span class=\"string\" style=\"color:blue\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;xmlns:jee=<span class=\"string\" style=\"color:blue\">&quot;http://www.springframework.org/schema/jee&quot;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;xsi:schemaLocation=&quot;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http:<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//www.springframework.org/schema/beans</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http:<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//www.springframework.org/schema/beans/spring-beans-3.0.xsd</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http:<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//www.springframework.org/schema/jee</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http:<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//www.springframework.org/schema/jee/spring-jee-3.0.xsd&quot;&gt;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&lt;jee:jndi-lookup&nbsp;id=<span class=\"string\" style=\"color:blue\">&quot;dataSource&quot;</span>&nbsp;jndi-name=<span class=\"string\" style=\"color:blue\">&quot;jdbc/test&quot;</span>/&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&lt;bean&nbsp;id=<span class=\"string\" style=\"color:blue\">&quot;txManager&quot;</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>=<span class=\"string\" style=\"color:blue\">&quot;org.springframework.transaction.jta.JtaTransactionManager&quot;</span>&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=<span class=\"string\" style=\"color:blue\">&quot;transactionManagerName&quot;</span>&nbsp;value=<span class=\"string\" style=\"color:blue\">&quot;&nbsp;java:comp/TransactionManager&quot;</span>/&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&lt;/bean&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;/beans&gt;&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n“dataSource”Bean表示从JNDI中获取的数据源，而txManager是JTA事务管理器，其中属性transactionManagerName指定了JTA事务管理器的JNDI名字，从而将事务管理委托给该事务管理器。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n这只是最简单的配置方式，更复杂的形式请参考Spring Javadoc。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n在此我们再介绍两个不依赖于应用服务器的开源JTA事务实现：JOTM和Atomikos Transactions Essentials。</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>JOTM：</strong>即基于Java开放事务管理器（Java Open Transaction Manager），实现JTA规范，能够运行在非应用服务器环境中，Web容器或独立Java SE环境，官网地址: http://jotm.objectweb.org/。</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>Atomikos Transactions Essentials：</strong>其为Atomikos开发的事务管理器，该产品属于开源产品，另外还一个商业的Extreme Transactions。官网地址为：http://www.atomikos.com。</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n对于以上JTA事务管理器使用，本文作者只是做演示使用，如果在实际项目中需要不依赖于应用服务器的JTA事务支持，需详细测试并选择合适的。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n在本文中将使用Atomikos Transactions Essentials来进行演示JTA事务使用，由于Atomikos对hsqldb分布式支持不是很好，在Atomikos官网中列出如下兼容的数据库：Oracle、Informix、FirstSQL、DB2、MySQL、SQLServer、Sybase，这不代表其他数据库不支持，而是Atomikos团队没完全测试，在此作者决定使用derby内存数据库来演示JTA分布式事务。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>1、首先准备jar包：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>1.1、准备derby数据jar包，</strong>到下载的spring-framework-3.0.5.RELEASE-dependencies.zip中拷贝如下jar包：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<table border=\"0\" cellspacing=\"0\" cellpadding=\"0\" style=\"color:rgb(0,0,0); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<tbody>\n<tr>\n<td style=\"font-size:14px\">\n<div class=\"shape\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\ncom.springsource.org.apache.derby-10.5.1000001.764942.jar</p>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>1．2、准备Atomikos Transactions Essentials&nbsp;对JTA事务支持的JTA包，</strong>此处使用AtomikosTransactionsEssentials3.5.5版本，到官网下载AtomikosTransactionsEssentials-3.5.5.zip，拷贝如下jar包到类路径：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; atomikos-util.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; transactions-api.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; transactions-essentials-all.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; transactions-jdbc.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; transactions-jta.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp; transactions.jar</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n将如上jar包放在lib\\atomikos目录下，并添加到类路径中。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; lin', '2016-04-16 01:21:19', '0');
INSERT INTO `article` VALUES ('10080', '10003', 'Spring学习笔记（20）----------Schema初步学习', '\n\n<p><span style=\"font-family:; font-size:14pt\"><span style=\"font-size:20px\"><strong>先来一个HelloWorld的简单例子，开开胃，爽一下~！</strong></span></span></p>\n<span style=\"font-family:; font-size:14pt\"></span>\n<p>&nbsp;</p>\n<span style=\"font-size:20px\"></span>\n<p>&nbsp;</p>\n<p>1、Aop配置文件spring-aop.xml</p>\n<p>\n<div class=\"dp-highlighter bg_html\">\n<div class=\"bar\">\n<div class=\"tools\"><strong>[html]</strong> <a target=\"_blank\" title=\"view plain\" class=\"ViewSource\" href=\"http://blog.csdn.net/acceptedxukai/article/details/7784986#\">\nview plain</a><a target=\"_blank\" title=\"copy\" class=\"CopyToClipboard\" href=\"http://blog.csdn.net/acceptedxukai/article/details/7784986#\">copy</a><a target=\"_blank\" title=\"print\" class=\"PrintSource\" href=\"http://blog.csdn.net/acceptedxukai/article/details/7784986#\">print</a><a target=\"_blank\" title=\"?\" class=\"About\" href=\"http://blog.csdn.net/acceptedxukai/article/details/7784986#\">?</a></div>\n</div>\n<ol class=\"dp-xml\">\n<li class=\"alt\"><span><span class=\"tag\">&lt;?</span><span class=\"tag-name\">xml</span><span>&nbsp;</span><span class=\"attribute\">version</span><span>=</span><span class=\"attribute-value\">&quot;1.0&quot;</span><span>&nbsp;</span><span class=\"attribute\">encoding</span><span>=</span><span class=\"attribute-value\">&quot;UTF-8&quot;</span><span class=\"tag\">?&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=\"tag\">&lt;</span><span class=\"tag-name\">beans</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">xmlns</span><span>=</span><span class=\"attribute-value\">&quot;http://www.springframework.org/schema/beans&quot;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">xmlns:xsi</span><span>=</span><span class=\"attribute-value\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">xmlns:p</span><span>=</span><span class=\"attribute-value\">&quot;http://www.springframework.org/schema/p&quot;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">xmlns:aop</span><span>=</span><span class=\"attribute-value\">&quot;http://www.springframework.org/schema/aop&quot;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">xsi:schemaLocation</span><span>=&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;http://www.springframework.org/schema/beans&nbsp;&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/beans/spring-beans-2.5.xsd&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/aop&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/aop/spring-aop-2.5.xsd&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;<span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">bean</span><span>&nbsp;</span><span class=\"attribute\">id</span><span>&nbsp;=&nbsp;</span><span class=\"attribute-value\">&quot;helloWorldServiceImpl&quot;</span><span>&nbsp;</span><span class=\"attribute\">class</span><span>=</span><span class=\"attribute-value\">&quot;com.spring.xkey.aop.HelloWorldServiceImpl&quot;</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;/</span><span class=\"tag-name\">bean</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">bean</span><span>&nbsp;</span><span class=\"attribute\">id</span><span>&nbsp;=&nbsp;</span><span class=\"attribute-value\">&quot;aspect&quot;</span><span>&nbsp;</span><span class=\"attribute\">class</span><span>&nbsp;=&nbsp;</span><span class=\"attribute-value\">&quot;com.spring.xkey.aop.HelloWorldAspect&quot;</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;/</span><span class=\"tag-name\">bean</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">aop:config</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">aop:pointcut</span><span>&nbsp;</span><span class=\"attribute\">id</span><span>=</span><span class=\"attribute-value\">&quot;pointcut&quot;</span><span>&nbsp;</span><span class=\"attribute\">expression</span><span>=</span><span class=\"attribute-value\">&quot;execution(*&nbsp;com.spring..*.sayHello(..))&nbsp;and&nbsp;args(user)&quot;</span><span class=\"tag\">/&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">aop:aspect</span><span>&nbsp;</span><span class=\"attribute\">ref</span><span>=</span><span class=\"attribute-value\">&quot;aspect&quot;</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">aop:before</span><span>&nbsp;</span><span class=\"attribute\">pointcut-ref</span><span>&nbsp;=&nbsp;</span><span class=\"attribute-value\">&quot;pointcut&quot;</span><span>&nbsp;</span><span class=\"attribute\">method</span><span>=</span><span class=\"attribute-value\">&quot;beforeAdvice(java.lang.String)&quot;</span><span>&nbsp;</span><span class=\"attribute\">arg-names</span><span>=</span><span class=\"attribute-value\">&quot;user&quot;</span><span class=\"tag\">/&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">aop:after</span><span>&nbsp;</span><span class=\"attribute\">pointcut</span><span>=</span><span class=\"attribute-value\">&quot;execution(*&nbsp;com.spring..*.sayHello(..))&quot;</span><span>&nbsp;</span><span class=\"attribute\">method</span><span>=</span><span class=\"attribute-value\">&quot;afterAdvice&quot;</span><span class=\"tag\">/&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">aop:after-returning</span><span>&nbsp;</span><span class=\"attribute\">pointcut</span><span>=</span><span class=\"attribute-value\">&quot;execution(*&nbsp;com.spring..*.sayAfterReturning(..))&quot;</span><span>&nbsp;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">method</span><span>=</span><span class=\"attribute-value\">&quot;afterReturningAdvice&quot;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">arg-names</span><span>=</span><span class=\"attribute-value\">&quot;value&quot;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">returning</span><span>=</span><span class=\"attribute-value\">&quot;value&quot;</span><span class=\"tag\">/&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">aop:after-throwing</span><span>&nbsp;</span><span class=\"attribute\">pointcut</span><span>=</span><span class=\"attribute-value\">&quot;execution(*&nbsp;com.spring..*.sayAfterThrowing(..))&quot;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">method</span><span>=</span><span class=\"attribute-value\">&quot;afterThrowingAdvice&quot;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">arg-names</span><span>=</span><span class=\"attribute-value\">&quot;e&quot;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">throwing</span><span>=</span><span class=\"attribute-value\">&quot;e&quot;</span><span class=\"tag\">/&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">aop:around</span><span>&nbsp;</span><span class=\"attribute\">pointcut</span><span>=</span><span class=\"attribute-value\">&quot;execution(*&nbsp;com.spring..*.sayAround(..))&quot;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">method</span><span>=</span><span class=\"attribute-value\">&quot;aroundAdvice&quot;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">/&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;/</span><span class=\"tag-name\">aop:aspect</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;/</span><span class=\"tag-name\">aop:config</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">beans</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li></ol>\n</div>\n<pre class=\"html\" style=\"display: none;\" name=\"code\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans\n	xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n	xmlns:p=&quot;http://www.springframework.org/schema/p&quot;\n	xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;\n	xsi:schemaLocation=\n		&quot;http://www.springframework.org/schema/beans \n		http://www.springframework.org/schema/beans/spring-beans-2.5.xsd\n		http://www.springframework.org/schema/aop\n		http://www.springframework.org/schema/aop/spring-aop-2.5.xsd\n		&quot;&gt;\n	\n	&lt;bean id = &quot;helloWorldServiceImpl&quot; class=&quot;com.spring.xkey.aop.HelloWorldServiceImpl&quot;&gt;\n	&lt;/bean&gt;\n	\n	&lt;bean id = &quot;aspect&quot; class = &quot;com.spring.xkey.aop.HelloWorldAspect&quot;&gt;\n	&lt;/bean&gt;\n	\n	&lt;aop:config&gt;\n		&lt;aop:pointcut id=&quot;pointcut&quot; expression=&quot;execution(* com.spring..*.sayHello(..)) and args(user)&quot;/&gt;\n		&lt;aop:aspect ref=&quot;aspect&quot;&gt;\n			&lt;aop:before pointcut-ref = &quot;pointcut&quot; method=&quot;beforeAdvice(java.lang.String)&quot; arg-names=&quot;user&quot;/&gt;\n			&lt;aop:after pointcut=&quot;execution(* com.spring..*.sayHello(..))&quot; method=&quot;afterAdvice&quot;/&gt;\n			&lt;aop:after-returning pointcut=&quot;execution(* com.spring..*.sayAfterReturning(..))&quot; \n								 method=&quot;afterReturningAdvice&quot;\n								 arg-names=&quot;value&quot;\n								 returning=&quot;value&quot;/&gt;\n			&lt;aop:after-throwing pointcut=&quot;execution(* com.spring..*.sayAfterThrowing(..))&quot;\n								method=&quot;afterThrowingAdvice&quot;\n								arg-names=&quot;e&quot;\n								throwing=&quot;e&quot;/&gt;\n			&lt;aop:around pointcut=&quot;execution(* com.spring..*.sayAround(..))&quot;\n						method=&quot;aroundAdvice&quot;\n						/&gt;\n		&lt;/aop:aspect&gt;\n	&lt;/aop:config&gt;\n&lt;/beans&gt;</pre>\n<p>2、HelloWorldService接口 </p>\n<p>\n<p>\n<div class=\"dp-highlighter bg_java\">\n<div class=\"bar\">\n<div class=\"tools\"><strong>[java]</strong> <a target=\"_blank\" title=\"view plain\" class=\"ViewSource\" href=\"http://blog.csdn.net/acceptedxukai/article/details/7784986#\">\nview plain</a><a target=\"_blank\" title=\"copy\" class=\"CopyToClipboard\" href=\"http://blog.csdn.net/acceptedxukai/article/details/7784986#\">copy</a><a target=\"_blank\" title=\"print\" class=\"PrintSource\" href=\"http://blog.csdn.net/acceptedxukai/article/details/7784986#\">print</a><a target=\"_blank\" title=\"?\" class=\"About\" href=\"http://blog.csdn.net/acceptedxukai/article/details/7784986#\">?</a></div>\n</div>\n<ol class=\"dp-j\">\n<li class=\"alt\"><span><span class=\"keyword\">package</span><span>&nbsp;com.spring.xkey.aop;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li class=\"alt\"><span><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">interface</span><span>&nbsp;HelloWorldService&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;sayHello(String&nbsp;username);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">boolean</span><span>&nbsp;sayAfterReturning();&nbsp;&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;sayAfterThrowing();&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">int</span><span>&nbsp;sayAround(String&nbsp;username,String&nbsp;password);&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>}&nbsp;&nbsp;</span></li></ol>\n</div>\n<pre class=\"java\" style=\"display: none;\" name=\"code\">package com.spring.xkey.aop;\n\npublic interface HelloWorldService {\n\n	public void sayHello(String username);\n	public boolean sayAfterReturning(); \n	public void sayAfterThrowing();\n	public int sayAround(String username,String password);\n}\n</pre>\n<p><br>\n3、HelloWorldServiceImpl类 </p>\n<p>\n<p>\n<div class=\"dp-highlighter bg_java\">\n<div class=\"bar\">\n<div class=\"tools\"><strong>[java]</strong> <a target=\"_blank\" title=\"view plain\" class=\"ViewSource\" href=\"http://blog.csdn.net/acceptedxukai/article/details/7784986#\">\nview plain</a><a target=\"_blank\" title=\"copy\" class=\"CopyToClipboard\" href=\"http://blog.csdn.net/acceptedxukai/article/details/7784986#\">copy</a><a target=\"_blank\" title=\"print\" class=\"PrintSource\" href=\"http://blog.csdn.net/acceptedxukai/article/details/7784986#\">print</a><a target=\"_blank\" title=\"?\" class=\"About\" href=\"http://blog.csdn.net/acceptedxukai/article/details/7784986#\">?</a></div>\n</div>\n<ol class=\"dp-j\">\n<li class=\"alt\"><span><span class=\"keyword\">package</span><span>&nbsp;com.spring.xkey.aop;&nbsp;&nbsp;</span></span></li><li><span><span class=\"keyword\">import</span><span>&nbsp;java.lang.RuntimeException;&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;</span></li><li><span><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">class</span><span>&nbsp;HelloWorldServiceImpl&nbsp;&nbsp;</span><span class=\"keyword\">implements</span><span>&nbsp;HelloWorldService{&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;sayHello(String&nbsp;username){&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;My&nbsp;first&nbsp;Aop&nbsp;test&nbsp;&quot;</span><span>&#43;username);&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">boolean</span><span>&nbsp;sayAfterReturning(){&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;after&nbsp;returning&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">return</span><span>&nbsp;</span><span class=\"keyword\">true</span><span>;&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;sayAfterThrowing(){&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;After&nbsp;throwing&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">throw</span><span>&nbsp;</span><span class=\"keyword\">new</span><span>&nbsp;RuntimeException();&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">int</span><span>&nbsp;sayAround(String&nbsp;username,String&nbsp;password){&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;Around:::&nbsp;&quot;</span><span>&#43;username&#43;</span><span class=\"string\">&quot;,&nbsp;&quot;</span><span>&#43;password);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">int</span><span>&nbsp;val&nbsp;=&nbsp;</span><span class=\"number\">1</span><span>;&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">return</span><span>&nbsp;val;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class=\"alt\"><span>}&nbsp;&nbsp;</span></li></ol>\n</div>\n<pre class=\"java\" style=\"display: none;\" name=\"code\">package com.spring.xkey.aop;\nimport java.lang.RuntimeException;\n\npublic class HelloWorldServiceImpl  implements HelloWorldService{\n	public void sayHello(String username){\n		System.out.println(&quot;My first Aop test &quot;+username);\n	}\n	public boolean sayAfterReturning(){\n		System.out.println(&quot;after returning&quot;);\n		return true;\n	}\n	\n	public void sayAfterThrowing(){\n		System.out.println(&quot;After throwing&quot;);\n		throw new RuntimeException();\n	}\n	\n	public int sayAround(String username,String password){\n		System.out.println(&quot;Around::: &quot;+username+&quot;, &quot;+password);\n		int val = 1;\n		return val;\n	}\n}\n</pre>\n<p><br>\n4、具体实现AOP编程的HelloWorldAspect类 </p>\n<p>\n<p>\n<div class=\"dp-highlighter bg_java\">\n<div class=\"bar\">\n<div class=\"tools\"><strong>[java]</strong> <a target=\"_blank\" title=\"view plain\" class=\"ViewSource\" href=\"http://blog.csdn.net/acceptedxukai/article/details/7784986#\">\nview plain</a><a target=\"_blank\" title=\"copy\" class=\"CopyToClipboard\" href=\"http://blog.csdn.net/acceptedxukai/article/details/7784986#\">copy</a><a target=\"_blank\" title=\"print\" class=\"PrintSource\" href=\"http://blog.csdn.net/acceptedxukai/article/details/7784986#\">print</a><a target=\"_blank\" title=\"?\" class=\"About\" href=\"http://blog.csdn.net/acceptedxukai/article/details/7784986#\">?</a></div>\n</div>\n<ol class=\"dp-j\">\n<li class=\"alt\"><span><span class=\"keyword\">package</span><span>&nbsp;com.spring.xkey.aop;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li class=\"alt\"><span><span class=\"keyword\">import</span><span>&nbsp;org.aspectj.lang.JoinPoint;&nbsp;&nbsp;</span></span></li><li><span><span class=\"keyword\">import</span><span>&nbsp;org.aspectj.lang.ProceedingJoinPoint;&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li class=\"alt\"><span><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">class</span><span>&nbsp;HelloWorldAspect&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;beforeAdvice(String&nbsp;user){&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">//System.out.println(jp.getArgs()[0].toString());</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;before&nbsp;advice&nbsp;&quot;</span><span>&nbsp;&#43;&nbsp;user);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;afterAdvice(JoinPoint&nbsp;jp){&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;after&nbsp;advice&nbsp;&quot;</span><span>&#43;jp.getArgs()[</span><span class=\"number\">0</span><span>].toString());&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;afterReturningAdvice(Object&nbsp;value){&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;afterReturning&nbsp;advice&nbsp;&quot;</span><span>&#43;value);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;afterThrowingAdvice(Exception&nbsp;e){&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;after&nbsp;throwing&nbsp;advice&nbsp;exception:&quot;</span><span>&nbsp;&#43;&nbsp;e);&nbsp;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;Object&nbsp;aroundAdvice(ProceedingJoinPoint&nbsp;pjp)&nbsp;</span><span class=\"keyword\">throws</span><span>&nbsp;Throwable{&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">/**System.out.println(pjp.toLongString());</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(pjp.getSignature().toString());</span>&nbsp;</span></li><li class=\"alt\"><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(pjp.getKind().toString());</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(pjp.getArgs()[0].toString());</span>&nbsp;</span></li><li class=\"alt\"><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;name&#43;psd&quot;);*/</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Object&nbsp;[]&nbsp;obj&nbsp;=&nbsp;pjp.getArgs();&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;username&nbsp;=&nbsp;(String)&nbsp;obj[<span class=\"number\">0</span><span>];&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;password&nbsp;=&nbsp;(String)&nbsp;obj[<span class=\"number\">1</span><span>];&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(username&#43;<span class=\"string\">&quot;,&quot;</span><span>&#43;password);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Object&nbsp;retVal;&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">if</span><span>(username.equals(</span><span class=\"string\">&quot;xkey&quot;</span><span>)&nbsp;&amp;&amp;&nbsp;password.equals(</span><span class=\"string\">&quot;color&quot;</span><span>)){&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retVal&nbsp;=&nbsp;pjp.proceed();&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<span class=\"keyword\">else</span><span>{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retVal&nbsp;=&nbsp;pjp.proceed(<span class=\"keyword\">new</span><span>&nbsp;Object[]{</span><span class=\"string\">&quot;ideal&quot;</span><span>,</span><span class=\"string\">&quot;*******&quot;</span><span>});&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;name&#43;psd&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">if</span><span>(retVal&nbsp;==&nbsp;</span><span class=\"keyword\">null</span><span>)&nbsp;System.out.println(</span><span class=\"string\">&quot;false&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">else</span><span>{&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(retVal.toString());&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">return</span><span>&nbsp;</span><span class=\"number\">2</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class=\"alt\"><span>}&nbsp;&nbsp;</span></li></ol>\n</div>\n<pre class=\"java\" style=\"display: none;\" name=\"code\">package com.spring.xkey.aop;\n\nimport org.aspectj.lang.JoinPoint;\nimport org.aspectj.lang.ProceedingJoinPoint;\n\n\npublic class HelloWorldAspect {\n	\n	public void beforeAdvice(String user){\n		//System.out.println(jp.getArgs()[0].toString());\n		System.out.println(&quot;before advice &quot; + user);\n	}\n	\n	public void afterAdvice(JoinPoint jp){\n		System.out.println(&quot;after advice &quot;+jp.getArgs()[0].toString());\n	}\n	\n	public void afterReturningAdvice(Object value){\n		System.out.println(&quot;afterReturning advice &quot;+value);\n		\n	}\n	public void afterThrowingAdvice(Exception e){\n		System.out.println(&quot;after throwing advice exception:&quot; + e); \n	}\n	\n	public Object aroundAdvice(ProceedingJoinPoint pjp) throws Throwable{\n		/**System.out.println(pjp.toLongString());\n		System.out.println(pjp.getSignature().toString());\n		System.out.println(pjp.getKind().toString());\n		System.out.println(pjp.getArgs()[0].toString());\n		System.out.println(&quot;name+psd&quot;);*/\n		Object [] obj = pjp.getArgs();\n		String username = (String) obj[0];\n		String password = (String) obj[1];\n		System.out.println(username+&quot;,&quot;+password);\n		Object retVal;\n		if(username.equals(&quot;xkey&quot;) &amp;&amp; password.equals(&quot;color&quot;)){\n			retVal = pjp.proceed();\n		}else{\n			retVal = pjp.proceed(new Object[]{&quot;ideal&quot;,&quot;*******&quot;});\n		}\n		System.out.println(&quot;name+psd&quot;);\n		if(retVal == null) System.out.println(&quot;false&quot;);\n		else{\n			System.out.println(retVal.toString());\n		}\n		return 2;\n	}\n}\n</pre>\n<p><br>\n5、测试类 </p>\n<p>\n<p>\n<div class=\"dp-highlighter bg_java\">\n<div class=\"bar\">\n<div class=\"tools\"><strong>[java]</strong> <a target=\"_blank\" title=\"view plain\" class=\"ViewSource\" href=\"http://blog.csdn.net/acceptedxukai/article/details/7784986#\">\nview plain</a><a target=\"_blank\" title=\"copy\" class=\"CopyToClipboard\" href=\"http://blog.csdn.net/acceptedxukai/article/details/7784986#\">copy</a><a target=\"_blank\" title=\"print\" class=\"PrintSource\" href=\"http://blog.csdn.net/acceptedxukai/article/details/7784986#\">print</a><a target=\"_blank\" title=\"?\" class=\"About\" href=\"http://blog.csdn.net/acceptedxukai/article/details/7784986#\">?</a></div>\n</div>\n<ol class=\"dp-j\">\n<li class=\"alt\"><span><span class=\"keyword\">package</span><span>&nbsp;com.spring.xkey.aop;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li class=\"alt\"><span><span class=\"keyword\">import</span><span>&nbsp;org.springframework.context.ApplicationContext;&nbsp;&nbsp;</span></span></li><li><span><span class=\"keyword\">import</span><span>&nbsp;org.springframework.context.support.ClassPathXmlApplicationContext;&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;</span></li><li><span><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">class</span><span>&nbsp;AopTest&nbsp;{&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">/**</span>&nbsp;</span></li><li class=\"alt\"><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;args</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">static</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;main(String[]&nbsp;args)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">//&nbsp;TODO&nbsp;Auto-generated&nbsp;method&nbsp;stub</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ApplicationContext&nbsp;context&nbsp;=&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">new</span><span>&nbsp;ClassPathXmlApplicationContext(</span><span class=\"string\">&quot;com/spring/xkey/aop/spring-aop.xml&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HelloWorldService&nbsp;hello&nbsp;=&nbsp;(HelloWorldService)context.getBean(<span class=\"string\">&quot;helloWorldServiceImpl&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hello.sayHello(<span class=\"string\">&quot;xkey&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;===================================&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li><span><span class=\"comment\">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hello.sayAfterReturning();</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span class=\"comment\">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;===================================&quot;);</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=\"comment\">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hello.sayAfterThrowing();</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span class=\"comment\">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;===================================&quot;);</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Object&nbsp;val&nbsp;=&nbsp;(Object)hello.sayAround(<span class=\"string\">&quot;xkey&quot;</span><span>,&nbsp;</span><span class=\"string\">&quot;colo&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(val.toString());&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class=\"alt\"><span>}&nbsp;&nbsp;</span></li></ol>\n</div>\n<pre class=\"java\" style=\"display: none;\" name=\"code\">package com.spring.xkey.aop;\n\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\npublic class AopTest {\n\n	/**\n	 * @param args\n	 */\n	public static void main(String[] args) {\n		// TODO Auto-generated method stub\n		ApplicationContext context =\n			new ClassPathXmlApplicationContext(&quot;com/spring/xkey/aop/spring-aop.xml&quot;);\n		HelloWorldService hello = (HelloWorldService)context.getBean(&quot;helloWorldServiceImpl&quot;);\n		hello.sayHello(&quot;xkey&quot;);\n		System.out.println(&quot;===================================&quot;);\n//		hello.sayAfterReturning();\n//		System.out.println(&quot;===================================&quot;);\n//		hello.sayAfterThrowing();\n//		System.out.println(&quot;===================================&quot;);\n		Object val = (Object)hello.sayAround(&quot;xkey&quot;, &quot;colo&quot;);\n		System.out.println(val.toString());\n	}\n}\n</pre>\n<p><br>\n&nbsp;</p>\n<p>6、AOP Around（环绕通知）可以控制返回对象，即你可以返回一个与目标对象完全不同的返回&#20540;，虽然这很危险，但是你却可以办到。目标方法的返回&#20540; 就是 环绕通知的返回&#20540;。proceed() 方法可以在通知体内调用一次、多次 或根本不用调用；还可以控制执行方法的参数&#20540;。具体见aroundAdvice方法的实现。</p>\n<p><br>\n</p>\n<p>7、给个更直观的结果</p>\n<p>\n<div class=\"dp-highlighter bg_java\">\n<div class=\"bar\">\n<div class=\"tools\"><strong>[java]</strong> <a target=\"_blank\" title=\"view plain\" class=\"ViewSource\" href=\"http://blog.csdn.net/acceptedxukai/article/details/7784986#\">\nview plain</a><a target=\"_blank\" title=\"copy\" class=\"CopyToClipboard\" href=\"http://blog.csdn.net/acceptedxukai/article/details/7784986#\">copy</a><a target=\"_blank\" title=\"print\" class=\"PrintSource\" href=\"http://blog.csdn.net/acceptedxukai/article/details/7784986#\">print</a><a target=\"_blank\" title=\"?\" class=\"About\" href=\"http://blog.csdn.net/acceptedxukai/article/details/7784986#\">?</a></div>\n</div>\n<ol class=\"dp-j\">\n<li class=\"alt\"><span><span>before&nbsp;advice&nbsp;xkey&nbsp;&nbsp;</span></span></li><li><span>My&nbsp;first&nbsp;Aop&nbsp;test&nbsp;xkey&nbsp;&nbsp;</span></li><li class=\"alt\"><span>after&nbsp;advice&nbsp;xkey&nbsp;&nbsp;</span></li><li><span>===================================&nbsp;&nbsp;</span></li><li class=\"alt\"><span>xkey,colo&nbsp;&nbsp;</span></li><li><span>Around:::&nbsp;ideal,&nbsp;********&nbsp;&nbsp;</span></li><li class=\"alt\"><span>name&#43;psd&nbsp;&nbsp;</span></li><li><span>In&nbsp;the&nbsp;AroundAdvice&nbsp;the&nbsp;<span class=\"keyword\">return</span><span>&nbsp;value&nbsp;is&nbsp;</span><span class=\"number\">1</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>After&nbsp;AroundAdvice&nbsp;modify&nbsp;<span class=\"keyword\">return</span><span>&nbsp;value&nbsp;is&nbsp;</span><span class=\"number\">2</span><span>&nbsp;&nbsp;</span></span></li></ol>\n</div>\n<pre class=\"java\" style=\"display: none;\" name=\"code\">before advice xkey\nMy first Aop test xkey\nafter advice xkey\n===================================\nxkey,colo\nAround::: ideal, ********\nname+psd\nIn the AroundAdvice the return value is 1\nAfter AroundAdvice modify return value is 2</pre>\n<p>\n<p><br>\n&nbsp;</p>\n<p>这里使用AOP Around就可以用来进行一个身份验证，通过面向切面编程（AOP）将验证部分独立出来，使得代码的耦合度降低，如果使用面向对象思想（OOP）就应该是独立写一个身份验证的方法，然后当需要使用该方法再去new 一个身份验证方法的类，然后传递参数通过验证类中的方法去验证，这样代码的耦合度就变强了。\n</p>\n<p><br>\n</p>\n<p>&nbsp;</p>\n<p><span style=\"font-family:; font-size:14pt\"><span style=\"font-size:20px\"><strong></strong></span></span>&nbsp;</p>\n<p><span style=\"font-family:; font-size:14pt\"><span style=\"font-size:20px\"><strong>通过Scheme配置实现AOP步骤</strong></span></span><br>\n<span style=\"font-family:; font-size:14pt\"><span style=\"font-size:20px\"><strong><br>\n</strong></span>&nbsp;<wbr><span style=\"color:#ff0000\">&nbsp;<wbr> <strong>步骤一、编写业务类：</strong></span><br>\n<br>\npublic class AspectBusiness {<br>\n&nbsp;<wbr>&nbsp;<wbr> //</span><span style=\"font-family:; font-size:14pt\"><span style=\"font-family:; font-size:14pt\">切入点</span></span><br>\n<span style=\"font-family:; font-size:14pt\">&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> public String delete(String obj) {<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> System.out.println(&quot;==========调用切入点：&quot; &#43; obj &#43; &quot;说：你敢删除我！===========\\n&quot;);<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> return obj &#43; &quot;：瞄～&quot;;<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> }<br>\n<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> public String add(String obj) {<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> System.out.println(&quot;================这个方法不能被切。。。============== \\n&quot;);<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> return obj &#43; &quot;：瞄～ 嘿嘿！&quot;;<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> }<br>\n<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> public String modify(String obj) {<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> System.out.println(&quot;=================这个也设置加入切吧====================\\n&quot;);<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> return obj &#43; &quot;：瞄改瞄啊！&quot;;<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> }<br>\n<br>\n}<br>\n<br>\n<span style=\"color:#ff1f00\"><strong>步骤二、编写切面类：切面类中，包含了所有的通知</strong></span><br>\n<br>\npublic class AspectAdvice {<br>\n<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> //</span><span style=\"font-family:; font-size:14pt\"><span style=\"font-family:; font-size:14pt\">前置通知</span></span><br>\n<span style=\"font-family:; font-size:14pt\">&nbsp;<wbr>&nbsp;<wbr> public void doBefore(JoinPoint jp) {<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> System.out.println(&quot;===========进入before advice============ \\n&quot;);<br>\n<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> System.out.print(&quot;准备在&quot; &#43; jp.getTarget().getClass() &#43; &quot;对象上用&quot;);<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> System.out.print(jp.getSignature().getName() &#43; &quot;方法进行对 \'&quot;);<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> System.out.print(jp.getArgs()[0] &#43; &quot;\'进行删除！\\n\\n&quot;);<br>\n<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> System.out.println(&quot;要进入切入点方法了 \\n&quot;);<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> }<br>\n<br>\n<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> // 后置通知<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> // @param jp<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> // &nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> 连接点<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> // @param result<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> // &nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> 返回&#20540;<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr><br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> public void doAfter(JoinPoint jp, String result) {<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> System.out.println(&quot;==========进入after advice=========== \\n&quot;);<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> System.out.println(&quot;切入点方法执行完了 \\n&quot;);<br>\n<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> System.out.print(jp.getArgs()[0] &#43; &quot;在&quot;);<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> System.out.print(jp.getTarget().getClass() &#43; &quot;对象上被&quot;);<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> System.out.print(jp.getSignature().getName() &#43; &quot;方法删除了&quot;);<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> System.out.print(&quot;只留下：&quot; &#43; result &#43; &quot;\\n\\n&quot;);<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> }<br>\n<br>\n<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> // 环绕通知<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> // @param pjp<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> // &nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> 连接点<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr><br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> public <span style=\"color:#ff0000\"><strong>object</strong></span> doAround(ProceedingJoinPoint pjp) throws Throwable {<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> System.out.println(&quot;===========进入around环绕方法！=========== \\n&quot;);<br>\n<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> // 调用目标方法之前执行的动作<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> System.out.println(&quot;调用方法之前: 执行！\\n&quot;);<br>\n<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> // 调用方法的参数<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> Object[] args = pjp.getArgs();<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> // 调用的方法名<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> String method = pjp.getSignature().getName();<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> // 获取目标对象<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> Object target = pjp.getTarget();<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> // 执行完方法的返回&#20540;：调用proceed()方法，就会触发切入点方法执行<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> Object result = pjp.proceed();<br>\n<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> System.out.println(&quot;输出：&quot; &#43; args[0] &#43; &quot;;&quot; &#43; method &#43; &quot;;&quot; &#43; target &#43; &quot;;&quot; &#43; result &#43; &quot;\\n&quot;);<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> System.out.println(&quot;调用方法结束：之后执行！\\n&quot;);<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> <span style=\"color:#f60d01\"><strong>return&nbsp;<wbr> result;</strong></span><br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> }<br>\n<br>\n&nbsp;<wbr><br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> //异常通知<br>\n&nbsp;<wbr>&nbsp;<wbr><br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> public void doThrow(JoinPoint jp, Throwable e) {<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> System.out.println(&quot;删除出错啦&quot;);<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> }<br>\n<br>\n}<br>\n<br>\n<span style=\"color:#ff1f00\"><strong>步骤四、配置文件的编写：</strong></span><br>\n<br>\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;<br>\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:p=&quot;http://www.springframework.org/schema/p&quot;<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> xmlns:context=&quot;http://www.springframework.org/schema/context&quot;<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> xsi:schemaLocation=&quot;&nbsp;<wbr>&nbsp;<wbr> &nbsp;<wbr><br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> http://www.springframework.org/schema/beans&nbsp;<wbr>&nbsp;<wbr> &nbsp;<wbr><br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&nbsp;<wbr>&nbsp;<wbr> &nbsp;<wbr><br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> http://www.springframework.org/schema/context&nbsp;<wbr>&nbsp;<wbr> &nbsp;<wbr><br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> http://www.springframework.org/schema/context/spring-context-3.0.xsd<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> http://www.springframework.org/schema/aop&nbsp;<wbr>&nbsp;<wbr> &nbsp;<wbr><br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> http://www.springframework.org/schema/aop/spring-aop-3.0.xsd&quot;<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> default-&gt;<br>\n<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;!-- ==============================利用spring 利用aspectj来配置AOP================================ --&gt;<br>\n<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;!-- 声明一个业务类 --&gt;<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;bean id=&quot;aspectBusiness&quot; class=&quot;aop.schema.AspectBusiness&quot; /&gt;<br>\n<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> <span style=\"color:#0a07ff\">&lt;!-- 声明通知类 --&gt;<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;bean id=&quot;aspectAdvice&quot; class=&quot;aop.schema.advice.AspectAdvice&quot; /&gt;</span><br>\n<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr><span style=\"color:#1004ff\"><strong>&lt;aop:config&gt;<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;aop:aspect id=&quot;businessAspect&quot; ref=&quot;aspectAdvice&quot;&gt;<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;!-- 配置指定切入的对象 --&gt;<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;aop:pointcut id=&quot;point_cut&quot; expression=&quot;execution(* aop.schema.*.*(..))&quot; /&gt;<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;!-- 只匹配add方法作为切入点<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;aop:pointcut id=&quot;except_add&quot; expression=&quot;execution(* aop.schema.*.add(..))&quot; /&gt;<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> --&gt;<br>\n<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;!-- 前置通知 --&gt;<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;aop:before method=&quot;doBefore&quot; pointcut-ref=&quot;point_cut&quot; /&gt;<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;!-- 后置通知 returning指定返回参数 --&gt;<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;aop:after-returning method=&quot;doAfter&quot;<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> pointcut-ref=&quot;point_cut&quot; returning=&quot;result&quot; /&gt;<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;aop:around method=&quot;doAround&quot; pointcut-ref=&quot;point_cut&quot;/&gt;<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;aop:after-throwing method=&quot;doThrow&quot; pointcut-ref=&quot;point_cut&quot; throwing=&quot;e&quot;/&gt;<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;/aop:aspect&gt;<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> &lt;/aop:config&gt;</strong></span><br>\n&lt;/beans&gt;<br>\n<br>\n<span style=\"color:#ff1f00\"><strong>步骤五、测试类：</strong></span><br>\n<br>\npublic class Debug {<br>\n<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> public static void main(String[] args) {<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> ApplicationContext context = new ClassPathXmlApplicationC<wbr>ontext(&quot;aop/schema_aop.xml&quot;);<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> AspectBusiness business = (AspectBusiness) context.getBean(&quot;aspectBusiness&quot;);<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> business.delete(&quot;猫&quot;);<br>\n&nbsp;<wbr>&nbsp;<wbr>&nbsp;<wbr> }<br>\n<br>\n<span style=\"font-family:; font-size:14pt\">}</span> </span></p>\n   \n', '2016-04-16 01:21:20', '0');
INSERT INTO `article` VALUES ('10081', '10003', 'SpringEL详解及应用', '\n<span style=\"font-size:18px;\"><span style=\"color:red;\">什么是SpringEL?</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Spring3中引入了Spring表达式语言—SpringEL,SpEL是一种强大,简洁的装配Bean的方式,他可以通过运行期间执行的表达式将值装配到我们的属性或构造函数当中,更可以调用JDK中提供的静态常量,获取外部Properties文件中的的配置&nbsp; </span><span style=\"font-size:18px;\"> <span style=\"color:red;\">为什么要使用SpringEL?</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 我们平常通过配置文件或Annotaton注入的Bean,其实都可以称为静态性注入,试想一下,若然我Bean A中有变量A,它的值需要根据Bean B的B变量为参考,在这场景下静态注入就对这样的处理显得非常无力,而Spring3增加的SpringEL就可以完全满足这种需求,而且还可以对不同Bean的字段进行计算再进行赋值,功能非常强大&nbsp; </span><span style=\"font-size:18px;\"> <span style=\"color:red;\">如何使用SpringEL?</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SpringEL从名字来看就能看出,和EL是有点关系的,SpringEL的使用和EL表达式的使用非常相似,EL表达式在JSP页面更方便的获取后台中的值,而SpringEL就是为了更方便获取Spring容器中的Bean的值,EL使用${},而SpringEL使用#{}进行表达式的声明&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 使用SpringEL注入简单值&nbsp; </span><pre class=\"java\">public class TestSpringEL {\n\n\n/*\n\n * @Value注解等同于XML配置中的&lt;property/&gt;标签, \n\n * SpringEL同样支持在XML&lt;property/&gt;中编写\n\n*/\n\n\n// 注入简单值,输出num为5\n\n@Value(&quot;#{5}&quot;)\n\nprivate Integer num;\n\n\n// 注入ID为testConstant的Bean\n\n@Value(&quot;#{testConstant}&quot;)\n\nprivate TestConstant Constant;\n\n\n// 注入ID为testConstant Bean中的STR常量/变量\n\n@Value(&quot;#{testConstant.STR}&quot;)\n\nprivate String str;\n\n}\n</pre><span style=\"font-size:18px;\"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 使用SpringEL调用方法&nbsp; </span> <pre class=\"java\">public class TestSpringEL {\n\n\n/*\n\n * TestConstant类中有两个方法重载,\n\n * 返回值为String类型\n\n*/\n\n\n// 调用无参方法\n\n@Value(&quot;#{testConstant.showProperty}&quot;)\n\nprivate String method1;\n\n\n\n\n// 有参接收字符串的方法\n\n@Value(&quot;#{testConstant.showProperty(\'Hello\')}&quot;)\n\nprivate String method2;\n\n\n\n\n/*\n\n * 若然希望方法返回的String为大写\n\n*/\n\n@Value(&quot;#{testConstant.showProperty().toUpperCase()}&quot;)\n\nprivate String method3;\n\n\n\n\n/*\n\n * 若使用method3这种方式,若然showProperty返回为null, \n\n * 将会抛出NullPointerException,可以使用以下方式避免\n\n*/\n\n@Value(&quot;#{testConstant.showProperty()?.toUpperCase}&quot;)\n\nprivate String method4;\n\n/*\n\n * 使用?.符号代表若然左边的值为null,将不执行右边方法, \n\n * 读者可以灵活运用在其他场景,只要左边可能返回null,\n\n * 即可使用上面示例中的?.\n\n*/\n}\n</pre><span style=\"font-size:18px;\"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SpringEL调用静态类或常量&nbsp; </span> <pre class=\"java\">public class TestSpringEL {\n\n\n/*\n\n * 注入JDK中的工具类常量或调用工具类的方法\n\n*/\n\n\n// 获取Math的PI常量\n\n@Value(&quot;#{T(java.lang.Math).PI&quot;)\n\nprivate double pi;\n\n\n// 调用random方法获取返回值\n\n@Value(&quot;#{T(java.lang.Math).random()}&quot;)\n\nprivate double ramdom;\n\n\n// 获取文件路径符号\n\n@Value(&quot;#{T(java.io.File).separator}&quot;)\n\nprivate String separator;\n}\n</pre><span style=\"font-size:18px;\"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SpringEL运算&nbsp; </span> <pre class=\"java\">public class TestSpringEL {\n\n\n/*\n\n * 使用SpringEL进行运算及逻辑操作\n\n*/\n\n\n// 拼接字符串\n\n@Value(&quot;#{testConstant.nickname + \' \' + testConstant.name}&quot;)\n\nprivate String concatString;\n\n\n// 对数字类型进行运算,testConstant拥有num属性\n\n@Value(&quot;#{ 3 * T(java.lang.Math).PI + testConstant.num}&quot;)\n\nprivate double operation;\n\n\n// 进行逻辑运算\n\n@Value(&quot;#{testConstant.num &gt; 100 and testConstant.num &lt;= 200}&quot;)\n\nprivate boolean logicOperation;\n\n\n// 进行或非逻辑操作\n\n@Value(&quot;#{ not testConstant.num == 100 or testConstant.num &lt;= 200}&quot;)\n\nprivate boolean logicOperation2;\n\n\n// 使用三元运算符\n\n@Value(&quot;#{testConstant.num &gt; 100 ? testConstant.num : testConstant.num + 100}&quot;)\n\nprivate Integer logicOperation3;\n}\n</pre><span style=\"font-size:18px;\"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SpringEL使用正则表达式&nbsp; </span> <pre class=\"java\">public class TestSpringEL {\n\n// 验证是否邮箱地址正则表达式\n\n@Value(&quot;#{testConstant.STR match \'\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+\'}&quot;)\n\nprivate boolean regularExpression;\n}\n</pre><span style=\"font-size:18px;\"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SpringEL操作集合&nbsp; </span> <pre class=\"java\">public class TestSpringEL {\n\n\n/*\n\n * TestConstant类中拥有名为testList的List变量, 和名为testMap的Map\n\n*/\n\n\n// 获取下标为0的元素\n\n@Value(&quot;#{testConstant.testList[0]}&quot;)\n\nprivate String str;\n\n\n// 获取下标为0元素的大写形式\n\n@Value(&quot;#{testConstant.testList[0]?.toUpperCase()}&quot;)\n\nprivate String upperStr;\n\n\n// 获取map中key为hello的value\n\n@Value(&quot;#{testConstant.testMap[\'hello\']}&quot;)\n\nprivate String mapValue;\n\n\n// 根据testList下标为0元素作为key获取testMap的value\n\n@Value(&quot;#{testConstant.testMap[testConstant.testList[0]]}&quot;)\n\nprivate String mapStrByTestList;\n}\n</pre><span style=\"font-size:18px;\"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Spring操作外部Properties文件&nbsp; </span> <span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 首先通过applicaContext.xml中&lt;util:properties&gt;增加properties文件&nbsp; </span> <pre class=\"xml\">&lt;!-- 注意需要引入Spring的util schemea命名空间和注意id属性,id属性将在SpringEL中使用 --&gt;\n\n&lt;util:properties id=&quot;test&quot;location=&quot;classpath:application.properties&quot;/&gt;\n</pre><pre class=\"java\">public class TestSpringEL {\n\n\n// 注意test为xml文件中声明的id\n\n@Value(&quot;#{test[\'jdbc.url\']}&quot;)\n\nprivate String propertiesValue;\n}\n</pre><span style=\"font-size:18px;\"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SpringEL查询筛选集合和投影&nbsp; </span> <pre class=\"java\">public class TestSpringEL {\n\n\n/*\n\n * 声明City类,有population属性 testContants拥有名叫cityList的City类List集合\n\n*/\n\n\n// 过滤testConstant中cityList集合population属性大于1000的全部数据注入到本属性\n\n@Value(&quot;#{testConstant.cityList.?[population &gt; 1000]}&quot;)\n\nprivate List&lt;City&gt; cityList;\n\n\n// 过滤testConstant中cityList集合population属性等于1000的第一条数据注入到本属性\n\n@Value(&quot;#{testConstant.cityList.^[population == 1000]}&quot;)\n\nprivate City city;\n\n\n// 过滤testConstant中cityList集合population属性小于1000的最后一条数据注入到本属性\n\n@Value(&quot;#{testConstant.cityList.$[population &lt; 1000]}&quot;)\n\nprivate City city2;\n\n\n/*\n\n * 首先为city增加name属性,代表城市的名称\n\n*/\n\n\n\n/*\n\n * 假如我们在过滤城市集合后只想保留城市的名称,\n\n * 可以使用如下方式进行投影\n\n*/\n\n@Value(&quot;#{testConstant.cityList.?[population &gt; 1000].![name]}&quot;)\n\nprivate List&lt;String&gt; cityName;\n</pre><span style=\"font-size:18px;\"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:red;\">优点</span>:SpringEL功能非常强大,在Annotation的方式开发时可能感觉并不强烈,因为可以直接编写到源代码来实现SpringEL的功能,但若然是在XML文件中进行配置,SpringEL可以弥补XML静态注入的不足,从而实现更强大的注入&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:red;\">缺点</span>:SpringEL在使用时仅仅是一个字符串,不易于排错与测试,也没有IDE检查我们的语法,当出现错误时较难检测&nbsp; </span> <span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:red;\">笔者实际应用</span>:笔者开发的项目当中比较频繁的使用SpringEL,例如通过SpringEL获取外部properties中的值,又或者项目当中的数据字典亦是使用SpringEL的一个场景,我们抽象出一个Param类的集合,通过SpringEL集合筛选和投影获取我们想要的字段参数添加到我们的程序逻辑当中(笔者项目中的Spring Security亦使用SpringEL,但本文章不加以叙述)&nbsp; </span> <span style=\"font-size:18px;\"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style=\"color:red;\">总结</span>:Spring3.0让人为之惊艳的非SpringEL莫属,为我们的注入提供了另一种强大的形式,传统注入能做到的事情,和做不到的事情,SpringEL一概能完成,但在项目当中并不适宜大量使用SpringEL,适当的技术方在适当的位置,才能更好的完成事情 </span>   \n', '2016-04-16 01:21:20', '0');
INSERT INTO `article` VALUES ('10082', '10003', 'Spring详解-----------对ORM的支持', '\n\n<h2 style=\"line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n8.1&nbsp; 概述</h2>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n8.1.1&nbsp; ORM框架</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ORM全称对象关系映射（Object/Relation Mapping），指将Java对象状态自动映射到关系数据库中的数据上，从而提供透明化的持久化支持，即把一种形式转化为另一种形式。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 对象与关系数据库之间是不匹配，我们把这种不匹配称为阻抗失配，主要表现在：</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\">关系数据库首先不支持面向对象技术如继承、多态，如何使关系数据库支持它们；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\">关系数据库是由表来存放数据，而面向对象使用对象来存放状态；其中表的列称为属性，而对象的属性就是属性，因此需要通过解决这种不匹配；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\">如何将对象透明的持久化到关系数据库表中；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\">如果一个对象存在横跨多个表的数据，应该如何为对象建模和映射。</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n其中这些阻抗失配只是其中的一小部分，比如还有如何将SQL集合函数结果集映射到对象，如何在对象中处理主键等。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\nORM框架就是用来解决这种阻抗失配，提供关系数据库的对象化支持。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\nORM框架不是万能的，同样符合<strong>80/20法则</strong>，应解决的最核心问题是如何在关系数据库表中的行和对象进行映射，并自动持久化对象到关系数据库。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\nORM解决方案适用于解决透明持久化、小结果集查询等；对于复杂查询，大结果集数据处理还是没有任何帮助的。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n目前已经有许多ORM框架产生，如Hibernate、JDO、JPA、iBATIS等等，这些ORM框架各有特色，Spring对这些ORM框架提供了很好的支持，接下来首先让我们看一下Spring如何支持这些ORM框架。</p>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n8.1.2&nbsp; Spring对ORM的支持</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Spring对ORM的支持主要表现在以下方面：</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\">一致的异常体系结构，对第三方ORM框架抛出的专有异常进行包装，从而在使我们在Spring中只看到DataAccessException异常体系；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\">一致的DAO抽象支持：提供类&#20284;与JdbcSupport的DAO支持类HibernateDaoSupport，使用HibernateTemplate模板类来简化常用操作，HibernateTemplate提供回调接口来支持复杂操作；</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\">Spring事务管理：Spring对所有数据访问提供一致的事务管理，通过配置方式，简化事务管理。</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\nSpring还在测试、数据源管理方面提供支持，从而允许方便测试，简化数据源使用。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n接下来让我们学习一下Spring如何集成ORM框架—Hibernate。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<br>\n</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n</p>\n<h2 style=\"line-height:31.5px; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n8.2&nbsp; 集成Hibernate3</h2>\n<p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Hibernate是全自动的ORM框架，能自动为对象生成相应SQL并透明的持久化对象到数据库。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n<strong>Spring2.5&#43;版本支持Hibernate 3.1&#43;版本，不支持低版本，Spring3.0.5版本提供对Hibernate 3.6.0 Final版本支持。</strong></p>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n8.2.1&nbsp; 如何集成</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Spring通过使用如下Bean进行集成Hibernate：</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\">LocalSessionFactoryBean ：用于支持XML映射定义读取：</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;configLocation和configLocations：用于定义Hibernate配置文件位置，一般使用如classpath:hibernate.cfg.xml形式指定；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;mappingLocations ：用于指定Hibenate映射文件位置，如chapter8/hbm/user.hbm.xml；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;hibernateProperties：用于定义Hibernate属性，即Hibernate配置文件中的属性；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;dataSource：定义数据源；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\nhibernateProperties、dataSource用于消除Hibernate配置文件，因此如果使用configLocations指定配置文件，就不要设置这两个属性了，否则会产生重复配置。推荐使用dataSource来指定数据源，而使用hibernateProperties指定Hibernate属性。</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\">AnnotationSessionFactoryBean：用于支持注解风&#26684;映射定义读取，该类继承LocalSessionFactoryBean并额外提供自动查找注解风&#26684;配置模型的能力：</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;annotatedClasses：设置注解了模型类，通过注解指定映射元数据。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;packagesToScan：通过扫描指定的包获取注解模型类，而不是手工指定，如“cn.javass.**.model”将扫描cn.javass包及子包下的model包下的所有注解模型类。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n接下来学习一下Spring如何集成Hibernate吧：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n<strong>1、准备jar包：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n首先准备Spring对ORM框架支持的jar包：</p>\n<table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"color:rgb(0,0,0); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n<tbody>\n<tr>\n<td width=\"486\" height=\"37\" style=\"font-size:14px\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\norg.springframework.orm-3.0.5.RELEASE.jar&nbsp; //提供对ORM框架集成</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n下载hibernate-distribution-3.6.0.Final包，获取如下Hibernate需要的jar包：</p>\n<table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"color:rgb(0,0,0); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n<tbody>\n<tr>\n<td width=\"486\" height=\"189\" style=\"font-size:14px\">\n<table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"width:484px\">\n<tbody>\n<tr>\n<td style=\"font-size:14px\">\n<div class=\"shape\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nhibernate3.jar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //核心包</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nlib\\required\\antlr-2.7.6.jar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //HQL解析时使用的包</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nlib\\required\\javassist-3.9.0.GA.jar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //字节码类库，类&#20284;于cglib</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nlib\\required\\commons-collections-3.1.jar&nbsp; //对集合类型支持包，前边测试时已经提供过了，无需再拷贝该包了</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nlib\\required\\dom4j-1.6.1.jar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //xml解析包，用于解析配置使用</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nlib\\required\\jta-1.1.jar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //JTA事务支持包</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nlib\\jpa\\hibernate-jpa-2.0-api-1.0.0.Final.jar //用于支持JPA</p>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n&nbsp;</td>\n</tr>\n</tbody>\n</table>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n下载slf4j-1.6.1.zip（http://www.slf4j.org/download.html），slf4j是日志系统门面（Simple Logging Facade for Java），用于对各种日志框架提供给一致的日志访问接口，从而能随时替换日志框架（如log4j、java.util.logging）：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"color:rgb(0,0,0); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n<tbody>\n<tr>\n<td style=\"font-size:14px\">\n<div class=\"shape\">\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nslf4j-api-1.6.1.jar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//核心API</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px\">\nslf4j-log4j12-1.6.1.jar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //log4j实现</p>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n将这些jar包添加到类路径中。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n<strong>2、对象模型定义，此处使用第七章中的UserModel：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:646.015625px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">package</span>&nbsp;cn.javass.spring.chapter7;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>&nbsp;UserModel&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">int</span>&nbsp;id;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;String&nbsp;myName;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//省略getter和setter</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n<strong>3、Hibernate映射定义（chapter8/hbm/user.hbm.xml），定义对象和数据库之间的映射：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:646.015625px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;?xml&nbsp;version=<span class=\"string\" style=\"color:blue\">&quot;1.0&quot;</span>&nbsp;encoding=<span class=\"string\" style=\"color:blue\">&quot;UTF-8&quot;</span>?&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;!DOCTYPE&nbsp;hibernate-mapping&nbsp;PUBLIC&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"string\" style=\"color:blue\">&quot;-//Hibernate/Hibernate&nbsp;Mapping&nbsp;DTD&nbsp;3.0//EN&quot;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"string\" style=\"color:blue\">&quot;http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd&quot;</span>&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;hibernate-mapping&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>&nbsp;name=<span class=\"string\" style=\"color:blue\">&quot;cn.javass.spring.chapter7.UserModel&quot;</span>&nbsp;table=<span class=\"string\" style=\"color:blue\">&quot;test&quot;</span>&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;id&nbsp;name=<span class=\"string\" style=\"color:blue\">&quot;id&quot;</span>&nbsp;column=<span class=\"string\" style=\"color:blue\">&quot;id&quot;</span>&gt;&lt;generator&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>=<span class=\"string\" style=\"color:blue\">&quot;native&quot;</span>/&gt;&lt;/id&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=<span class=\"string\" style=\"color:blue\">&quot;myName&quot;</span>&nbsp;column=<span class=\"string\" style=\"color:blue\">&quot;name&quot;</span>/&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;/hibernate-mapping&gt;&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n<strong>4、&nbsp;&nbsp;&nbsp;数据源定义，此处使用第7章的配置文件，即“chapter7/applicationContext-resources.xml”文件。</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n<strong>5、&nbsp;&nbsp;&nbsp;SessionFactory配置定义（chapter8/applicationContext-hibernate.xml）：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:646.015625px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;bean&nbsp;id=<span class=\"string\" style=\"color:blue\">&quot;sessionFactory&quot;</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>=<span class=\"string\" style=\"color:blue\">&quot;org.springframework.orm.hibernate3.LocalSessionFactoryBean&quot;</span>&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=<span class=\"string\" style=\"color:blue\">&quot;dataSource&quot;</span>&nbsp;ref=<span class=\"string\" style=\"color:blue\">&quot;dataSource&quot;</span>/&gt;&nbsp;&lt;!--&nbsp;指定数据源&nbsp;--&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=<span class=\"string\" style=\"color:blue\">&quot;mappingResources&quot;</span>&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;指定映射定义&nbsp;--&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;list&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;chapter8/hbm/user.hbm.xml&lt;/value&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/list&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/property&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;property&nbsp;name=<span class=\"string\" style=\"color:blue\">&quot;hibernateProperties&quot;</span>&gt;&nbsp;&nbsp;&nbsp;&lt;!--指定Hibernate属性&nbsp;--&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;props&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;prop&nbsp;key=<span class=\"string\" style=\"color:blue\">&quot;hibernate.dialect&quot;</span>&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.hibernate.dialect.HSQLDialect&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/prop&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/props&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/property&gt;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&lt;/bean&gt;&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n<strong>6、&nbsp;&nbsp;&nbsp;获取SessionFactory：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:646.015625px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">package</span>&nbsp;cn.javass.spring.chapter8;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//省略import</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>&nbsp;HibernateTest&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">static</span>&nbsp;SessionFactory&nbsp;sessionFactory;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"annotation\" style=\"color:rgb(100,100,100)\">@BeforeClass</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">static</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;beforeClass()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String[]&nbsp;configLocations&nbsp;=&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">new</span>&nbsp;String[]&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"string\" style=\"color:blue\">&quot;classpath:chapter7/applicationContext-resources.xml&quot;</span>,&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"string\" style=\"color:blue\">&quot;classpath:chapter8/applicationContext-hibernate.xml&quot;</span>};&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ApplicationContext&nbsp;ctx&nbsp;=&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">new</span>&nbsp;ClassPathXmlApplicationContext(configLocations);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sessionFactory&nbsp;=&nbsp;ctx.getBean(<span class=\"string\" style=\"color:blue\">&quot;sessionFactory&quot;</span>,&nbsp;SessionFactory.<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n此处我们使用了chapter7/applicationContext-resources.xml定义的“dataSource”数据源，通过ctx.getBean(&quot;sessionFactory&quot;, SessionFactory.class)获取SessionFactory。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n<strong>7、通过SessionFactory获取Session对象进行创建和删除表：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:646.015625px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Before</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;setUp()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//id自增主键从0开始</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">final</span>&nbsp;String&nbsp;createTableSql&nbsp;=&nbsp;<span class=\"string\" style=\"color:blue\">&quot;create&nbsp;memory&nbsp;table&nbsp;test&quot;</span>&nbsp;&#43;&nbsp;<span class=\"string\" style=\"color:blue\">&quot;(id&nbsp;int&nbsp;GENERATED&nbsp;BY&nbsp;DEFAULT&nbsp;AS&nbsp;IDENTITY&nbsp;PRIMARY&nbsp;KEY,&nbsp;&quot;</span>&nbsp;&#43;&nbsp;<span class=\"string\" style=\"color:blue\">&quot;name&nbsp;varchar(100))&quot;</span>;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;sessionFactory.openSession().&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;createSQLQuery(createTableSql).executeUpdate();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@After</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;tearDown()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">final</span>&nbsp;String&nbsp;dropTableSql&nbsp;=&nbsp;<span class=\"string\" style=\"color:blue\">&quot;drop&nbsp;table&nbsp;test&quot;</span>;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;sessionFactory.openSession().&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;createSQLQuery(dropTableSql).executeUpdate();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n使用SessionFactory创建Session，然后通过Session对象的createSQLQuery创建本地SQL执行创建和删除表。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n<strong>8、使用SessionFactory获取Session对象进行持久化数据：</strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:646.015625px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Test</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;testFirst()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;Session&nbsp;session&nbsp;=&nbsp;sessionFactory.openSession();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;Transaction&nbsp;transaction&nbsp;=&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">null</span>;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">try</span>&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transaction&nbsp;=&nbsp;beginTransaction(session);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UserModel&nbsp;model&nbsp;=&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">new</span>&nbsp;UserModel();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model.setMyName(<span class=\"string\" style=\"color:blue\">&quot;myName&quot;</span>);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;session.save(model);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">catch</span>&nbsp;(RuntimeException&nbsp;e)&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rollbackTransaction(transaction);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">throw</span>&nbsp;e;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">finally</span>&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;commitTransaction(session);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:646.015625px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;Transaction&nbsp;beginTransaction(Session&nbsp;session)&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;Transaction&nbsp;transaction&nbsp;=&nbsp;session.beginTransaction();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;transaction.begin();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">return</span>&nbsp;transaction;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;rollbackTransaction(Transaction&nbsp;transaction)&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">if</span>(transaction&nbsp;!=&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">null</span>)&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transaction.rollback();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;commitTransaction(Session&nbsp;session)&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;session.close();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n使用SessionFactory获取Session进行操作，必须自己控制事务，而且还要保证各个步骤不会出错，有没有更好的解决方案把我们从编程事务中解脱出来？Spring提供了HibernateTemplate模板类用来简化事务处理和常见操作。</p>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n&nbsp;</h3>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n8.2.2&nbsp;使用HibernateTemplate</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\nHibernateTimplate模板类用于简化事务管理及常见操作，类&#20284;于JdbcTemplate模板类，对于复杂操作通过提供HibernateCallback回调接口来允许更复杂的操作。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n接下来示例一下HibernateTemplate的使用：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:646.015625px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png', '2016-04-16 01:21:20', '0');
INSERT INTO `article` VALUES ('10083', '10003', 'Spring学习笔记（19）----------@AspectJ详细讲解', '\n<p><span style=\"font-size:18px;\">AspectJ切入点语法详解</span></p><p><span style=\"font-size:18px;\">&nbsp; Spring AOP支持的AspectJ切入点指示符</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 切入点指示符用来指示切入点表达式目的，，在Spring AOP中目前只有执行方法这一个连接点，Spring AOP支持的AspectJ切入点指示符如下：</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>execution：</strong>用于匹配方法执行的连接点；</span></p><p style=\"padding: 0px;\"><em><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>within：</strong>用于匹配指定类型内的方法执行；<strong></strong></span></em></p><p style=\"padding: 0px;\"><em><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>this：</strong>用于匹配当前AOP代理对象类型的执行方法；注意是AOP代理对象的类型匹配，这样就可能包括引入接口也类型匹配；<strong></strong></span></em></p><p style=\"padding: 0px;\"><em><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>target：</strong>用于匹配当前目标对象类型的执行方法；注意是目标对象的类型匹配，这样就不包括引入接口也类型匹配；<strong></strong></span></em></p><p style=\"padding: 0px;\"><em><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>args：</strong>用于匹配当前执行的方法传入的参数为指定类型的执行方法；<strong></strong></span></em></p><p style=\"padding: 0px;\"><em><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>@within：</strong>用于匹配所以持有指定注解类型内的方法；<strong></strong></span></em></p><p style=\"padding: 0px;\"><em><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>@target：</strong>用于匹配当前目标对象类型的执行方法，其中目标对象持有指定的注解；<strong></strong></span></em></p><p style=\"padding: 0px;\"><em><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>@args：</strong>用于匹配当前执行的方法传入的参数持有指定注解的执行；<strong></strong></span></em></p><p style=\"padding: 0px;\"><em><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>@annotation：</strong>用于匹配当前执行方法持有指定注解的方法；<strong></strong></span></em></p><p style=\"padding: 0px;\"><em><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>bean：</strong>Spring AOP扩展的，AspectJ没有对于指示符，用于匹配特定名称的Bean对象的执行方法；</span></em></p><p style=\"padding: 0px;\"><em><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>reference pointcut：</strong>表示引用其他命名切入点，只有@ApectJ风格支持，Schema风格不支持。<strong></strong></span></em></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; AspectJ切入点支持的切入点指示符还有： call、get、set、preinitialization、staticinitialization、initialization、handler、adviceexecution、withincode、cflow、cflowbelow、if、@this、@withincode；但Spring AOP目前不支持这些指示符，使用这些指示符将抛出IllegalArgumentException异常。这些指示符Spring AOP可能会在以后进行扩展。</span></p><h3><span style=\"font-size:18px;\">&nbsp;命名及匿名切入点</span></h3><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 命名切入点可以被其他切入点引用，而匿名切入点是不可以的。</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 只有@AspectJ支持命名切入点，而Schema风格不支持命名切入点。</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">如下所示，@AspectJ使用如下方式引用命名切入点：</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;<img alt=\"\" src=\"http://sishuok.com/forum/upload/2011/10/28/2bc1756a377c9da6a93b268da60afb69__1.GIF\"></span><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp; </span></p><h3><span style=\"font-size:18px;\">类型匹配语法</span></h3><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">首先让我们来了解下AspectJ类型匹配的通配符：</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;*：匹配任何数量字符；</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;..：匹配任何数量字符的重复，如在类型模式中匹配任何数量子包；而在方法参数模式中匹配任何数量参数。</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>+：</strong>匹配指定类型的子类型；仅能作为后缀放在类型模式后边。<strong></strong></span></p><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">&nbsp;</span></strong></p><p style=\"padding: 0px;\"><strong><br></strong><span style=\"font-size:18px;\"></span>&nbsp;</p><div><p class=\"alt\"><span><span><span style=\"font-size:18px;\">java.lang.String&nbsp;&nbsp;&nbsp;&nbsp;匹配String类型；&nbsp;&nbsp;</span></span></span></p><p><span><span style=\"font-size:18px;\">java.*.String&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;匹配java包下的任何“一级子包”下的String类型；&nbsp;&nbsp;</span></span></p><p class=\"alt\"><span><span style=\"font-size:18px;\">如匹配java.lang.String，但不匹配java.lang.ss.String&nbsp;&nbsp;</span></span></p><p><span><span style=\"font-size:18px;\">java..*&nbsp;&nbsp;匹配java包及任何子包下的任何类型;&nbsp;&nbsp;</span></span></p><p class=\"alt\"><span><span style=\"font-size:18px;\">如匹配java.lang.String、java.lang.annotation.Annotation&nbsp;&nbsp;</span></span></p><p><span><span style=\"font-size:18px;\">java.lang.*ing&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;匹配任何java.lang包下的以ing结尾的类型；&nbsp;&nbsp;</span></span></p><p class=\"alt\"><span><span style=\"font-size:18px;\">java.lang.Number+&nbsp;&nbsp;匹配java.lang包下的任何Number的自类型；&nbsp;&nbsp;</span></span></p><p><span><span style=\"font-size:18px;\">如匹配java.lang.Integer，也匹配java.math.BigInteger&nbsp;&nbsp;</span></span></p></div><p style=\"padding: 0px;\"><strong><br><span style=\"font-size:18px;\"></span></strong></p><p style=\"padding: 0px;\"><strong><br><span style=\"font-size:18px;\"></span></strong></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">接下来再看一下具体的匹配表达式类型吧：</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>匹配类型：</strong>使用如下方式匹配</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><div><div class=\"bar\"><div class=\"tools\"><span style=\"font-size:18px;\"></span>&nbsp;</div></div><p class=\"alt\"><span><span><span style=\"font-size:18px;\">注解？&nbsp;类的全限定名字&nbsp;&nbsp;</span></span></span></p></div><ul><li><span style=\"font-size:18px;\"><strong>注解：</strong>可选，类型上持有的注解，如@Deprecated；</span></li><li><span style=\"font-size:18px;\"><strong>类的全限定名：</strong>必填，可以是任何类全限定名。</span></li><li><span style=\"font-size:18px;\"><strong>匹配方法执行：</strong>使用如下方式匹配：</span></li></ul><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span>&nbsp;</p><div><p class=\"alt\"><span><span><span style=\"font-size:18px;\">注解？&nbsp;修饰符?&nbsp;返回值类型&nbsp;类型声明?方法名(参数列表)&nbsp;异常列表？&nbsp;&nbsp;</span></span></span></p></div><ul><li><span style=\"font-size:18px;\"><strong>注解：</strong>可选，方法上持有的注解，如@Deprecated；</span></li><li><span style=\"font-size:18px;\"><strong>修饰符：</strong>可选，如public、protected；</span></li><li><span style=\"font-size:18px;\"><strong>返回值类型：</strong>必填，可以是任何类型模式；“*”表示所有类型；</span></li><li><span style=\"font-size:18px;\"><strong>类型声明：</strong>可选，可以是任何类型模式；</span></li><li><span style=\"font-size:18px;\"><strong>方法名：</strong>必填，可以使用“*”进行模式匹配；</span></li><li><span style=\"font-size:18px;\"><strong>参数列表：</strong>“()”表示方法没有任何参数；“(..)”表示匹配接受任意个参数的方法，“(..,java.lang.String)”表示匹配接受java.lang.String类型的参数结束，且其前边可以接受有任意个参数的方法；“(java.lang.String,..)” 表示匹配接受java.lang.String类型的参数开始，且其后边可以接受任意个参数的方法；“(*,java.lang.String)” 表示匹配接受java.lang.String类型的参数结束，且其前边接受有一个任意类型参数的方法；</span></li><li><span style=\"font-size:18px;\"><strong>异常列表：</strong>可选，以“throws 异常全限定名列表”声明，异常全限定名列表如有多个以“，”分割，如throws java.lang.IllegalArgumentException, java.lang.ArrayIndexOutOfBoundsException。</span></li></ul><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<strong>匹配Bean名称：</strong>可以使用Bean的id或name进行匹配，并且可使用通配符“*”；</span></p><h3><span style=\"font-size:18px;\">组合切入点表达式</span></h3><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; AspectJ使用 且（&amp;&amp;）、或（||）、非（！）来组合切入点表达式。</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在Schema风格下，由于在XML中使用“&amp;&amp;”需要使用转义字符“&amp;amp;&amp;amp;”来代替之，所以很不方便，因此Spring ASP 提供了and、or、not来代替&amp;&amp;、||、！。</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><h3><span style=\"font-size:18px;\">&nbsp;切入点使用示例</span></h3><p style=\"padding: 0px;\"><span style=\"font-size:18px;\"><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;一、execution：</strong>使用“execution(方法表达式)”匹配方法执行；<strong></strong></span></p><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">&nbsp;</span></strong></p><div><table border=\"1\" cellspacing=\"0\" cellpadding=\"0\"><tbody><tr><td width=\"268\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">模式</span></strong></p></td><td width=\"288\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">描述</span></strong></p></td></tr><tr><td width=\"268\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">public * *(..)</span></p></td><td width=\"288\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">任何公共方法的执行</span></p></td></tr><tr><td width=\"268\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">* cn.javass..IPointcutService.*()</span></p></td><td width=\"288\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">cn.javass包及所有子包下IPointcutService接口中的任何无参方法</span></p></td></tr><tr><td width=\"268\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">* cn.javass..*.*(..)</span></p></td><td width=\"288\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">cn.javass包及所有子包下任何类的任何方法</span></p></td></tr><tr><td width=\"268\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">* cn.javass..IPointcutService.*(*)</span></p></td><td width=\"288\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">cn.javass包及所有子包下IPointcutService接口的任何只有一个参数方法</span></p></td></tr><tr><td width=\"268\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">* (!cn.javass..IPointcutService+).*(..)</span></p></td><td width=\"288\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">非“cn.javass包及所有子包下IPointcutService接口及子类型”的任何方法</span></p></td></tr><tr><td width=\"268\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">* cn.javass..IPointcutService+.*()</span></p></td><td width=\"288\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">cn.javass包及所有子包下IPointcutService接口及子类型的的任何无参方法</span></p></td></tr><tr><td width=\"268\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">* cn.javass..IPointcut*.test*(java.util.Date)</span></p></td><td width=\"288\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">cn.javass包及所有子包下IPointcut前缀类型的的以test开头的只有一个参数类型为java.util.Date的方法，注意该匹配是根据方法签名的参数类型进行匹配的，而不是根据执行时传入的参数类型决定的</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">如定义方法：public void test(Object obj);即使执行时传入java.util.Date，也不会匹配的；</span></p></td></tr><tr><td width=\"268\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">* cn.javass..IPointcut*.test*(..)&nbsp; throws</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;IllegalArgumentException, ArrayIndexOutOfBoundsException</span></p></td><td width=\"288\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">cn.javass包及所有子包下IPointcut前缀类型的的任何方法，且抛出IllegalArgumentException和ArrayIndexOutOfBoundsException异常</span></p></td></tr><tr><td width=\"268\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">* (cn.javass..IPointcutService+</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&amp;&amp; java.io.Serializable+).*(..)</span></p></td><td width=\"288\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">任何实现了cn.javass包及所有子包下IPointcutService接口和java.io.Serializable接口的类型的任何方法</span></p></td></tr><tr><td width=\"268\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">@java.lang.Deprecated * *(..)</span></p></td><td width=\"288\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">任何持有@java.lang.Deprecated注解的方法</span></p></td></tr><tr><td width=\"268\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">@java.lang.Deprecated @cn.javass..Secure &nbsp;* *(..)</span></p></td><td width=\"288\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">任何持有@java.lang.Deprecated和@cn.javass..Secure注解的方法</span></p></td></tr><tr><td width=\"268\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">@(java.lang.Deprecated || cn.javass..Secure) * *(..)</span></p></td><td width=\"288\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">任何持有@java.lang.Deprecated或@ cn.javass..Secure注解的方法</span></p></td></tr><tr><td width=\"268\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">(@cn.javass..Secure &nbsp;*)&nbsp; *(..)</span></p></td><td width=\"288\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">任何返回值类型持有@cn.javass..Secure的方法</span></p></td></tr><tr><td width=\"268\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">* &nbsp;(@cn.javass..Secure *).*(..)</span></p></td><td width=\"288\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">任何定义方法的类型持有@cn.javass..Secure的方法</span></p></td></tr><tr><td width=\"268\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">* *(@cn.javass..Secure (*) , @cn.javass..Secure (*))</span></p></td><td width=\"288\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">任何签名带有两个参数的方法，且这个两个参数都被@ Secure标记了，</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">如public void test(@Secure String str1,</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;@Secure String str1);</span></p></td></tr><tr><td width=\"268\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">* *((@ cn.javass..Secure *))或</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">* *(@ cn.javass..Secure *)</span></p></td><td width=\"288\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">任何带有一个参数的方法，且该参数类型持有@ cn.javass..Secure；</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">如public void test(Model model);且Model类上持有@Secure注解</span></p></td></tr><tr><td width=\"268\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">* *(</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">@cn.javass..Secure (@cn.javass..Secure *) ,</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">@ cn.javass..Secure (@cn.javass..Secure *))</span></p></td><td width=\"288\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">任何带有两个参数的方法，且这两个参数都被@ cn.javass..Secure标记了；且这两个参数的类型上都持有@ cn.javass..Secure；</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p></td></tr><tr><td width=\"268\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">* *(</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">java.util.Map&lt;cn.javass..Model, cn.javass..Model&gt;</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">, ..)</span></p></td><td width=\"288\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">任何带有一个java.util.Map参数的方法，且该参数类型是以&lt; cn.javass..Model, cn.javass..Model &gt;为泛型参数；注意只匹配第一个参数为java.util.Map,不包括子类型；</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">如public void test(HashMap&lt;Model, Model&gt; map, String str);将不匹配，必须使用“* *(</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">java.util.HashMap&lt;cn.javass..Model,cn.javass..Model&gt;</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">, ..)”进行匹配；</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">而public void test(Map map, int i);也将不匹配，因为泛型参数不匹配</span></p></td></tr><tr><td width=\"268\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">* *(java.util.Collection&lt;@cn.javass..Secure *&gt;)</span></p></td><td width=\"288\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">任何带有一个参数（类型为java.util.Collection）的方法，且该参数类型是有一个泛型参数，该泛型参数类型上持有@cn.javass..Secure注解；</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">如public void test(Collection&lt;Model&gt; collection);Model类型上持有@cn.javass..Secure</span></p></td></tr><tr><td width=\"268\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">* *(java.util.Set&lt;? extends HashMap&gt;)</span></p></td><td width=\"288\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">任何带有一个参数的方法，且传入的参数类型是有一个泛型参数，该泛型参数类型继承与HashMap；</span></p><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">Spring AOP目前测试不能正常工作</span></strong></p></td></tr><tr><td width=\"268\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">* *(java.util.List&lt;? super HashMap&gt;)</span></p></td><td width=\"288\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">任何带有一个参数的方法，且传入的参数类型是有一个泛型参数，该泛型参数类型是HashMap的基类型；如public voi test(Map map)；</span></p><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">Spring AOP目前测试不能正常工作</span></strong></p></td></tr><tr><td width=\"268\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">* *(*&lt;@cn.javass..Secure *&gt;)</span></p></td><td width=\"288\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">任何带有一个参数的方法，且该参数类型是有一个泛型参数，该泛型参数类型上持有@cn.javass..Secure注解；</span></p><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">Spring AOP目前测试不能正常工作</span></strong></p></td></tr></tbody></table></div><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">&nbsp;</span></strong></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\"><strong>二</strong><em>、</em><strong>within：使用“within(类型表达式)”</strong><em>匹配指定类型内的方法执行；</em><strong></strong></span></p><div><table border=\"1\" cellspacing=\"0\" cellpadding=\"0\"><tbody><tr><td width=\"189\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">模式</span></strong></p></td><td width=\"367\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">描述</span></strong></p></td></tr><tr><td width=\"189\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">within(cn.javass..*)</span></p></td><td width=\"367\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">cn.javass包及子包下的任何方法执行</span></p></td></tr><tr><td width=\"189\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">within(cn.javass..IPointcutService+)</span></p></td><td width=\"367\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">cn.javass包或所有子包下IPointcutService类型及子类型的任何方法</span></p></td></tr><tr><td width=\"189\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">within(@cn.javass..Secure *)</span></p></td><td width=\"367\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">持有cn.javass..Secure注解的任何类型的任何方法</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">必须是在目标对象上声明这个注解，在接口上声明的对它不起作用</span></p></td></tr></tbody></table></div><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">&nbsp;</span></strong></p><p style=\"padding: 0px;\"><qpan style=\"font-size:18px;\"><strong>三</strong><em>、<strong>this：</strong>使用“this(类型全限定名)”匹配当前AOP代理对象类型的执行方法；注意是AOP代理对象的类型匹配，这样就可能包括引入接口方法也可以匹配；注意this中使用的表达式必须是类型全限定名，不支持通配符；</em><p><p style=\"padding: 0px;\"><em><strong><span style=\"font-size:18px;\">&nbsp;</span></strong></em></p><table border=\"1\" cellspacing=\"0\" cellpadding=\"0\"><tbody><tr><td width=\"189\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">模式</span></strong></p></td><td width=\"370\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">描述</span></strong></p></td></tr><tr><td width=\"189\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">this(cn.javass.spring.chapter6.service.IPointcutService)</span></p></td><td width=\"370\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">当前AOP对象实现了 IPointcutService接口的任何方法</span></p></td></tr><tr><td width=\"189\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">this(cn.javass.spring.chapter6.service.IIntroductionService)</span></p></td><td width=\"370\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">当前AOP对象实现了 IIntroductionService接口的任何方法</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">也可能是引入接口</span></p></td></tr></tbody></table><p style=\"padding: 0px;\"><em><span style=\"font-size:18px;\">&nbsp;</span></em></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><p style=\"padding: 0px;\"><em><span style=\"font-size:18px;\">四、<strong>target：</strong>使用“target(类型全限定名)”匹配当前目标对象类型的执行方法；注意是目标对象的类型匹配，这样就不包括引入接口也类型匹配；注意target中使用的表达式必须是类型全限定名，不支持通配符；</span></em></p><table border=\"1\" cellspacing=\"0\" cellpadding=\"0\"><tbody><tr><td width=\"310\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">模式</span></strong></p></td><td width=\"252\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">描述</span></strong></p></td></tr><tr><td width=\"310\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">target(cn.javass.spring.chapter6.service.IPointcutService)</span></p></td><td width=\"252\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">当前目标对象（非AOP对象）实现了 IPointcutService接口的任何方法</span></p></td></tr><tr><td width=\"310\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">target(cn.javass.spring.chapter6.service.IIntroductionService)</span></p></td><td width=\"252\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">当前目标对象（非AOP对象） 实现了IIntroductionService 接口的任何方法</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">不可能是引入接口</span></p></td></tr></tbody></table><p style=\"padding: 0px;\"><em><span style=\"font-size:18px;\"></span></em>&nbsp;</p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><p style=\"padding: 0px;\"><em><span style=\"font-size:18px;\">五、<strong>args：</strong>使用“args(参数类型列表)”匹配当前执行的方法传入的参数为指定类型的执行方法；注意是匹配传入的参数类型，不是匹配方法签名的参数类型；参数类型列表中的参数必须是类型全限定名，通配符不支持；args属于动态切入点，这种切入点开销非常大，非特殊情况最好不要使用；</span></em></p><table border=\"1\" cellspacing=\"0\" cellpadding=\"0\"><tbody><tr><td width=\"223\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">模式</span></strong></p></td><td width=\"336\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">描述</span></strong></p></td></tr><tr><td width=\"223\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">args (java.io.Serializable,..)</span></p></td><td width=\"336\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">任何一个以接受“传入参数类型为 java.io.Serializable” 开头，且其后可跟任意个任意类型的参数的方法执行，args指定的参数类型是在运行时动态匹配的</span></p></td></tr></tbody></table><p style=\"padding: 0px;\"><em><strong><span style=\"font-size:18px;\">&nbsp;</span></strong></em></p><p style=\"padding: 0px;\"><em><span style=\"font-size:18px;\"><strong>六、@within：</strong>使用“@within(注解类型)”匹配所以持有指定注解类型内的方法；注解类型也必须是全限定类型名；</span></em></p><table border=\"1\" cellspacing=\"0\" cellpadding=\"0\"><tbody><tr><td width=\"223\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">模式</span></strong></p></td><td width=\"336\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">描述</span></strong></p></td></tr><tr><td width=\"223\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">@within cn.javass.spring.chapter6.Secure)</span></p></td><td width=\"336\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">任何目标对象对应的类型持有Secure注解的类方法；</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">必须是在目标对象上声明这个注解，在接口上声明的对它不起作用</span></p></td></tr></tbody></table><p style=\"padding: 0px;\"><em><strong><span style=\"font-size:18px;\">&nbsp;</span></strong></em></p><p style=\"padding: 0px;\"><em><span style=\"font-size:18px;\"><strong>七、@target：</strong>使用“@target(注解类型)”匹配当前目标对象类型的执行方法，其中目标对象持有指定的注解；注解类型也必须是全限定类型名；&nbsp;</span></em></p><p style=\"padding: 0px;\"><em><span style=\"font-size:18px;\">&nbsp;</span></em></p><table border=\"1\" cellspacing=\"0\" cellpadding=\"0\"><tbody><tr><td width=\"223\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">模式</span></strong></p></td><td width=\"336\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">描述</span></strong></p></td></tr><tr><td width=\"223\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">@target (cn.javass.spring.chapter6.Secure)</span></p></td><td width=\"336\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">任何目标对象持有Secure注解的类方法；</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">必须是在目标对象上声明这个注解，在接口上声明的对它不起作用</span></p></td></tr></tbody></table><p style=\"padding: 0px;\"><em><strong><span style=\"font-size:18px;\">&nbsp;</span></strong></em></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><p style=\"padding: 0px;\"><em><span style=\"font-size:18px;\"><strong>八、@args：</strong>使用“@args(注解列表)”匹配当前执行的方法传入的参数持有指定注解的执行；注解类型也必须是全限定类型名；</span></em></p><table border=\"1\" cellspacing=\"0\" cellpadding=\"0\"><tbody><tr><td width=\"223\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">模式</span></strong></p></td><td width=\"336\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">描述</span></strong></p></td></tr><tr><td width=\"223\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">@args (cn.javass.spring.chapter6.Secure)</span></p></td><td width=\"336\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">任何一个只接受一个参数的方法，且方法运行时传入的参数持有注解 cn.javass.spring.chapter6.Secure；动态切入点，类似于arg指示符；</span></p></td></tr></tbody></table><p style=\"padding: 0px;\"><span style=\"font-size:18px;\"></span>&nbsp;</p><p style=\"padding: 0px;\"><em><span style=\"font-size:18px;\"><strong>九、@annotation：</strong>使用“@annotation(注解类型)”匹配当前执行方法持有指定注解的方法；注解类型也必须是全限定类型名；</span></em></p><table border=\"1\" cellspacing=\"0\" cellpadding=\"0\"><tbody><tr><td width=\"187\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">模式</span></strong></p></td><td width=\"372\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">描述</span></strong></p></td></tr><tr><td width=\"187\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">@annotation(cn.javass.spring.chapter6.Secure )</span></p></td><td width=\"372\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">当前执行方法上持有注解 cn.javass.spring.chapter6.Secure将被匹配</span></p></td></tr></tbody></table><p style=\"padding: 0px;\"><em><strong><span style=\"font-size:18px;\">&nbsp;</span></strong></em></p><p style=\"padding: 0px;\"><em><span style=\"font-size:18px;\"><strong>十、bean：</strong>使用“bean(Bean id或名字通配符)”匹配特定名称的Bean对象的执行方法；Spring ASP扩展的，在AspectJ中无相应概念；</span></em></p><table border=\"1\" cellspacing=\"0\" cellpadding=\"0\"><tbody><tr><td width=\"187\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">模式</span></strong></p></td><td width=\"372\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">描述</span></strong></p></td></tr><tr><td width=\"187\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">bean(*Service)</span></p></td><td width=\"372\" style=\"font-size: 14px;\"><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">匹配所有以Service命名（id或name）结尾的Bean</span></p></td></tr></tbody></table><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">&nbsp;</span></strong></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\"><strong>十一、reference pointcut：</strong>表示引用其他命名切入点，只有@ApectJ风格支持，Schema风格不支持，如下所示：</span></p><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">&nbsp;</span></strong></p><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img alt=\"\" src=\"http://sishuok.com/forum/upload/2011/10/28/4cc2811bcbcd2a9566d55fd4df84f670__2.GIF\"></span></strong></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\"><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</strong>比如我们定义如下切面：</span></p><p style=\"padding: 0px;\"><span><span><br><span style=\"font-size:18px;\"></span></span></span></p><div><span style=\"font-size:18px;\"><span class=\"bold\" style=\"font-weight: bold;\">java代码：</span></span><div class=\"bar\"><div class=\"tools\"><span style=\"font-size:18px;\"></span>&nbsp;</div></div><span><span style=\"font-size:18px;\"><span class=\"keyword\"></span></span></span><pre class=\"java\" name=\"code\">package cn.javass.spring.chapter6.aop;  \n\nimport org.aspectj.lang.annotation.Aspect;  \n\nimport org.aspectj.lang.annotation.Pointcut;  \n\n@Aspect  \n\npublic class ReferencePointcutAspect {  \n\n    @Pointcut(value=&quot;execution(* *())&quot;)  \n\n    public void pointcut() {}  \n\n}  \n\n \n</pre><span style=\"font-size:18px;\"></span></div><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 可以通过如下方式引用：</span></p><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\"></span></strong>&nbsp;</p><div><div class=\"bar\"><div class=\"tools\"><span><span style=\"font-size:18px;\"><span class=\"annotation\">@Before</span><span>(value&nbsp;=&nbsp;</span><span class=\"string\">&quot;cn.javass.spring.chapter6.aop.ReferencePointcutAspect.pointcut()&quot;</span><span>)&nbsp;&nbsp;</span></span></span></div></div><p class=\"dp-highlighter\"><span><span style=\"font-size:18px;\"><span class=\"keyword\">&nbsp;&nbsp;&nbsp; public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;referencePointcutTest2(JoinPoint&nbsp;jp)&nbsp;{}&nbsp;&nbsp;</span></span></span></p></div><p style=\"padding: 0px;\"><strong><br><span style=\"font-size:18px;\"></span></strong></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 除了可以在@AspectJ风格的切面内引用外，也可以在Schema风格的切面定义内引用，引用方式与@AspectJ完全一样。</span></p><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">&nbsp;</span></strong></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 到此我们切入点表达式语法示例就介绍完了，我们这些示例几乎包含了日常开发中的所有情况，但当然还有更复杂的语法等等，如果以上介绍的不能满足您的需要，请参考AspectJ文档。</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 由于测试代码相当长，所以为了节约篇幅本示例代码在cn.javass.spring.chapter6. PointcutTest文件中，需要时请参考该文件。</span></p><h2><span style=\"font-size:18px;\">&nbsp;通知参数</span></h2><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 前边章节已经介绍了声明通知，但如果想获取被被通知方法参数并传递给通知方法，该如何实现呢？接下来我们将介绍两种获取通知参数的方式。</span></p><ul><li><span style=\"font-size:18px;\"><strong>使用JoinPoint获取</strong>：Spring AOP提供使用org.aspectj.lang.JoinPoint类型获取连接点数据，任何通知方法的第一个参数都可以是JoinPoint(环绕通知是ProceedingJoinPoint，JoinPoint子类)，当然第一个参数位置也可以是JoinPoint.StaticPart类型，这个只返回连接点的静态部分。</span></li></ul><p style=\"padding: 0px;\"><span style=\"font-size:18px;\"><strong>1) JoinPoint：</strong>提供访问当前被通知方法的目标对象、代理对象、方法参数等数据：</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><div><span style=\"font-size:18px;\"><span class=\"bold\" style=\"font-weight: bold;\">java代码：</span></span><div class=\"bar\"><div class=\"tools\"><span style=\"font-size:18px;\"></span>&nbsp;</div></div><span><span style=\"font-size:18px;\"><span class=\"keyword\"></span></span></span><pre class=\"java\" name=\"code\">package org.aspectj.lang;  \n\nimport org.aspectj.lang.reflect.SourceLocation;  \n\npublic interface JoinPoint {  \n\n    String toString();         //连接点所在位置的相关信息  \n\n    String toShortString();     //连接点所在位置的简短相关信息  \n\n    String toLongString();     //连接点所在位置的全部相关信息  \n\n    Object getThis();         //返回AOP代理对象  \n\n    Object getTarget();       //返回目标对象  \n\n    Object[] getArgs();       //返回被通知方法参数列表  \n\n    Signature getSignature();  //返回当前连接点签名  \n\n    SourceLocation getSourceLocation();//返回连接点方法所在类文件中的位置  \n\n    String getKind();        //连接点类型  \n\n    StaticPart getStaticPart(); //返回连接点静态部分  \n\n} \n</pre><p class=\"alt\">&nbsp;</p></div><p style=\"padding: 0px;\">&nbsp;</p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\"><strong>2）</strong>ProceedingJoinPoint：用于环绕通知，使用proceed()方法来执行目标方法：<strong></strong></span></p><p style=\"padding: 0px;\"><strong><span style=\"font-size:18px;\">&nbsp;<br></span></strong></p><div><span style=\"font-size:18px;\"><span class=\"bold\" style=\"font-weight: bold;\">java代码：</span></span><div class=\"bar\"><div class=\"tools\"><span style=\"font-size:18px;\">&nbsp;</span></div></div><span><span style=\"font-size:18px;\"><span class=\"keyword\"></span></span></span><pre class=\"java\" name=\"code\">public interface ProceedingJoinPoint extends JoinPoint {  \n\n    public Object proceed() throws Throwable;  \n\n    public Object proceed(Object[] args) throws Throwable;  \n\n}  \n</pre><span style=\"font-size:18px;\"></span></div><p style=\"padding: 0px;\"><span style=\"font-size:18px;\"><strong>3) JoinPoint.StaticPart：</strong>提供访问连接点的静态部分，如被通知方法签名、连接点类型等：</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><div><span style=\"font-size:18px;\"><span class=\"bold\" style=\"font-weight: bold;\">java代码：</span></span></div><div class=\"bar\"><div class=\"tools\"><span style=\"font-size:18px;\"></span><pre class=\"java\" name=\"code\"> \n\npublic interface StaticPart {  \n\nSignature getSignature();    //返回当前连接点签名  \n\nString getKind();          //连接点类型  \n\n    int getId();               //唯一标识  \n\nString toString();         //连接点所在位置的相关信息  \n\n    String toShortString();     //连接点所在位置的简短相关信息  \n\n    String toLongString();     //连接点所在位置的全部相关信息  \n\n}  \n</pre><br></div></div><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">使用如下方式在通知方法上声明，必须是在第一个参数，然后使用jp.getArgs()就能获取到被通知方法参数：</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><div><span style=\"font-size:18px;\"><span class=\"bold\" style=\"font-weight: bold;\">java代码：</span></span><div class=\"bar\"><div class=\"tools\"><span style=\"font-size:18px;\"></span>&nbsp;</div></div><p class=\"alt\"><span><span style=\"font-size:18px;\"><span class=\"annotation\">@Before</span><span>(value=</span><span class=\"string\">&quot;execution(*&nbsp;sayBefore(*))&quot;</span><span>)&nbsp;&nbsp;</span></span></span></p><p class=\"dp-highlighter\"><span><span style=\"font-size:18px;\"><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;before(JoinPoint&nbsp;jp)&nbsp;{}&nbsp;&nbsp;</span></span></span></p><p class=\"dp-highlighter\"><span><span style=\"font-size:18px;\"><span class=\"annotation\">@Before</span><span>(value=</span><span class=\"string\">&quot;execution(*&nbsp;sayBefore(*))&quot;</span><span>)&nbsp;&nbsp;</span></span></span></p><p class=\"alt\"><span><span style=\"font-size:18px;\"><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;before(JoinPoint.StaticPart&nbsp;jp)&nbsp;{}&nbsp;&nbsp;</span></span></span></p></div><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><ul><li><span style=\"font-size:18px;\"><strong>自动获取：</strong>通过切入点表达式可以将相应的参数自动传递给通知方法，例如前边章节讲过的返回值和异常是如何传递给通知方法的。</span></li></ul><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">在Spring AOP中，除了execution和bean指示符不能传递参数给通知方法，其他指示符都可以将匹配的相应参数或对象自动传递给通知方法。</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><div><span style=\"font-size:18px;\"><span class=\"bold\" style=\"font-weight: bold;\">java代码：</span></span><div class=\"bar\"><div class=\"tools\"><span style=\"font-size:18px;\"></span>&nbsp;</div></div><p class=\"alt\"><span><span style=\"font-size:18px;\"><span class=\"annotation\">@Before</span><span>(value=</span><span class=\"string\">&quot;execution(*&nbsp;test(*))&nbsp;&amp;&amp;&nbsp;args(param)&quot;</span><span>,&nbsp;argNames=</span><span class=\"string\">&quot;param&quot;</span><span>)&nbsp;&nbsp;</span></span></span></p><p class=\"dp-highlighter\"><span><span style=\"font-size:18px;\"><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;before1(String&nbsp;param)&nbsp;{&nbsp;&nbsp;</span></span></span></p><p class=\"alt\"><span><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;===param:&quot;</span><span>&nbsp;+&nbsp;param);&nbsp;&nbsp;</span></span></span></p><p class=\"dp-highlighter\"><span><span style=\"font-size:18px;\">}&nbsp;&nbsp;</span></span></p></div><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 切入点表达式execution(* test(*)) &amp;&amp; args(param) ：</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">1）首先execution(* test(*))匹配任何方法名为test，且有一个任何类型的参数；</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">2）args(param)将首先查找通知方法上同名的参数，并在方法执行时（运行时）匹配传入的参数是使用该同名参数类型，即java.lang.String；如果匹配将把该被通知参数传递给通知方法上同名参数。</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">其他指示符（除了execution和bean指示符）都可以使用这种方式进行参数绑定。</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">在此有一个问题，即前边提到的类似于【3.1.2构造器注入】中的参数名注入限制：<strong>在class文件中没生成变量调试信息是获取不到方法参数名字的。</strong></span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">所以我们可以使用策略来确定参数名：</span></p><ol><li><span style=\"font-size:18px;\">如果我们通过“argNames”属性指定了参数名，那么就是要我们指定的；</span></li></ol><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><div><span style=\"font-size:18px;\"><span class=\"bold\" style=\"font-weight: bold;\">java代码：</span></span><div class=\"bar\"><div class=\"tools\"><span style=\"font-size:18px;\"></span>&nbsp;</div></div><p class=\"alt\"><span><span style=\"font-size:18px;\"><span class=\"annotation\">@Before</span><span>(value=</span><span class=\"string\">&quot;&nbsp;args(param)&quot;</span><span>,&nbsp;argNames=</span><span class=\"string\">&quot;param&quot;</span><span>)&nbsp;</span><span class=\"comment\">//明确指定了</span><span>&nbsp;&nbsp;</span></span></span></p><p class=\"dp-highlighter\"><span><span style=\"font-size:18px;\"><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;before1(String&nbsp;param)&nbsp;{&nbsp;&nbsp;</span></span></span></p><p class=\"alt\"><span><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;===param:&quot;</span><span>&nbsp;+&nbsp;param);&nbsp;&nbsp;</span></span></span></p><p class=\"dp-highlighter\"><span><span style=\"font-size:18px;\">}&nbsp;&nbsp;</span></span></p></div><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><ol><li><span style=\"font-size:18px;\">如果第一个参数类型是JoinPoint、ProceedingJoinPoint或JoinPoint.StaticPart类型，应该从“argNames”属性省略掉该参数名（可选，写上也对），这些类型对象会自动传入的，但必须作为第一个参数；</span></li></ol><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><div><span style=\"font-size:18px;\"><span class=\"bold\" style=\"font-weight: bold;\">java代码：</span></span><div class=\"bar\"><div class=\"tools\"><span style=\"font-size:18px;\">&nbsp;</span></div></div><p class=\"alt\"><span><span style=\"font-size:18px;\"><span class=\"annotation\">@Before</span><span>(value=</span><span class=\"string\">&quot;&nbsp;args(param)&quot;</span><span>,&nbsp;argNames=</span><span class=\"string\">&quot;param&quot;</span><span>)&nbsp;</span><span class=\"comment\">//明确指定了</span><span>&nbsp;&nbsp;</span></span></span></p><p class=\"dp-highlighter\"><span><span style=\"font-size:18px;\"><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;before1(JoinPoint&nbsp;jp,&nbsp;String&nbsp;param)&nbsp;{&nbsp;&nbsp;</span></span></span></p><p class=\"alt\"><span><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;===param:&quot;</span><span>&nbsp;+&nbsp;param);&nbsp;&nbsp;</span></span></span></p><p class=\"dp-highlighter\"><span><span style=\"font-size:18px;\">}&nbsp;&nbsp;</span></span></p></div><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><ol><li><span style=\"font-size:18px;\">如果“<strong>class文件中含有变量调试信息</strong>”将使用这些方法签名中的参数名来确定参数名；</span></li></ol><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><div><span style=\"font-size:18px;\"><span class=\"bold\" style=\"font-weight: bold;\">java代码：</span></span><div class=\"bar\"><div class=\"tools\"><span style=\"font-size:18px;\"></span>&nbsp;</div></div><p class=\"alt\"><span><span style=\"font-size:18px;\"><span class=\"annotation\">@Before</span><span>(value=</span><span class=\"string\">&quot;&nbsp;args(param)&quot;</span><span>)&nbsp;</span><span class=\"comment\">//不需要argNames了</span><span>&nbsp;&nbsp;</span></span></span></p><p class=\"dp-highlighter\"><span><span style=\"font-size:18px;\"><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;before1(JoinPoint&nbsp;jp,&nbsp;String&nbsp;param)&nbsp;{&nbsp;&nbsp;</span></span></span></p><p class=\"alt\"><span><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;===param:&quot;</span><span>&nbsp;+&nbsp;param);&nbsp;&nbsp;</span></span></span></p><p class=\"dp-highlighter\"><span><span style=\"font-size:18px;\">}&nbsp;&nbsp;</span></span></p></div><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><ol><li><span style=\"font-size:18px;\">如果没有“<strong>class文件中含有变量调试信息</strong>”，将尝试自己的参数匹配算法，如果发现参数绑定有二义性将抛出AmbiguousBindingException异常；对于只有一个绑定变量的切入点表达式，而通知方法只接受一个参数，说明绑定参数是明确的，从而能配对成功。</span></li></ol><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><div><span style=\"font-size:18px;\"><span class=\"bold\" style=\"font-weight: bold;\">java代码：</span></span><div class=\"bar\"><div class=\"tools\"><span style=\"font-size:18px;\">&nbsp;</span></div></div><p class=\"alt\"><span><span style=\"font-size:18px;\"><span class=\"annotation\">@Before</span><span>(value=</span><span class=\"string\">&quot;&nbsp;args(param)&quot;</span><span>)&nbsp;&nbsp;&nbsp;</span></span></span></p><p class=\"dp-highlighter\"><span><span style=\"font-size:18px;\"><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;before1(JoinPoint&nbsp;jp,&nbsp;String&nbsp;param)&nbsp;{&nbsp;&nbsp;</span></span></span></p><p class=\"alt\"><span><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;===param:&quot;</span><span>&nbsp;+&nbsp;param);&nbsp;&nbsp;</span></span></span></p><p class=\"dp-highlighter\"><span><span style=\"font-size:18px;\">}&nbsp;&nbsp;</span></span></p></div><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><ol><li><span style=\"font-size:18px;\">以上策略失败将抛出IllegalArgumentException。</span></li></ol><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">接下来让我们示例一下组合情况吧：</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><div><span style=\"font-size:18px;\"><span class=\"bold\" style=\"font-weight: bold;\">java代码：</span></span><div class=\"bar\"><div class=\"tools\"><span style=\"font-size:18px;\">&nbsp;</span></div></div><p class=\"alt\"><span><span style=\"font-size:18px;\"><span class=\"annotation\">@Before</span><span>(args(param)&nbsp;&amp;&amp;&nbsp;target(bean)&nbsp;&amp;&amp;&nbsp;</span><span class=\"annotation\">@annotation</span><span>(secure)&quot;,&nbsp;&nbsp;&nbsp;</span></span></span></p><p class=\"dp-highlighter\"><span><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;argNames=<span class=\"string\">&quot;jp,param,bean,secure&quot;</span><span>)&nbsp;&nbsp;</span></span></span></p><p class=\"alt\"><span><span style=\"font-size:18px;\"><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;before5(JoinPoint&nbsp;jp,&nbsp;String&nbsp;param,&nbsp;&nbsp;</span></span></span></p><p class=\"dp-highlighter\"><span><span style=\"font-size:18px;\">&nbsp;IPointcutService&nbsp;pointcutService,&nbsp;Secure&nbsp;secure)&nbsp;{&nbsp;&nbsp;</span></span></p><p class=\"alt\"><span><span style=\"font-size:18px;\">……&nbsp;&nbsp;</span></span></p><p class=\"dp-highlighter\"><span><span style=\"font-size:18px;\">}&nbsp;&nbsp;</span></span></p></div><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 该示例的执行步骤如图6-5所示。</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\"><img width=\"700\" height=\"421\" title=\"点击查看原始大小图片\" class=\"magplus\" alt=\"\" src=\"http://sishuok.com/forum/upload/2011/10/28/43427fd6ca58ffa1c21c4a46e52d62be__5.GIF\">&nbsp;</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">图6-5 参数自动获取流程</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">除了上边介绍的普通方式，也可以对使用命名切入点自动获取参数：</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><div><span style=\"font-size:18px;\"><span class=\"bold\" style=\"font-weight: bold;\">java代码：</span></span><div class=\"bar\"><div class=\"tools\"><span style=\"font-size:18px;\">&nbsp;</span></div></div><p class=\"alt\"><span><span style=\"font-size:18px;\"><span class=\"annotation\">@Pointcut</span><span>(value=</span><span class=\"string\">&quot;args(param)&quot;</span><span>,&nbsp;argNames=</span><span class=\"string\">&quot;param&quot;</span><span>)&nbsp;&nbsp;</span></span></span></p><p class=\"dp-highlighter\"><span><span style=\"font-size:18px;\"><span class=\"keyword\">private</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;pointcut1(String&nbsp;param){}&nbsp;&nbsp;</span></span></span></p><p class=\"alt\"><span><span style=\"font-size:18px;\"><span class=\"annotation\">@Pointcut</span><span>(value=</span><span class=\"string\">&quot;@annotation(secure)&quot;</span><span>,&nbsp;argNames=</span><span class=\"string\">&quot;secure&quot;</span><span>)&nbsp;&nbsp;</span></span></span></p><p class=\"dp-highlighter\"><span><span style=\"font-size:18px;\"><span class=\"keyword\">private</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;pointcut2(Secure&nbsp;secure){}&nbsp;&nbsp;</span></span></span></p><p class=\"alt\"><span><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p><p class=\"dp-highlighter\"><span><span style=\"font-size:18px;\"><span class=\"annotation\">@Before</span><span>(value&nbsp;=&nbsp;</span><span class=\"string\">&quot;pointcut1(param)&nbsp;&amp;&amp;&nbsp;pointcut2(secure)&quot;</span><span>,&nbsp;&nbsp;</span></span></span></p><p class=\"alt\"><span><span style=\"font-size:18px;\">&nbsp;argNames=<span class=\"string\">&quot;param,&nbsp;secure&quot;</span><span>)&nbsp;&nbsp;</span></span></span></p><p class=\"dp-highlighter\"><span><span style=\"font-size:18px;\"><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;before6(JoinPoint&nbsp;jp,&nbsp;String&nbsp;param,&nbsp;Secure&nbsp;secure)&nbsp;{&nbsp;&nbsp;</span></span></span></p><p class=\"alt\"><span><span style=\"font-size:18px;\">……&nbsp;&nbsp;</span></span></p><p class=\"dp-highlighter\"><span><span style=\"font-size:18px;\">}&nbsp;&nbsp;</span></span></p></div><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 自此给通知传递参数已经介绍完了，示例代码在cn.javass.spring.chapter6.ParameterTest文件中。</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 在Spring配置文件中，所以AOP相关定义必须放在&lt;aop:config&gt;标签下，该标签下可以有&lt;aop:pointcut&gt;、&lt;aop:advisor&gt;、&lt;aop:aspect&gt;标签，配置顺序不可变。</span></p><ul><li><span style=\"font-size:18px;\">&lt;aop:pointcut&gt;：用来定义切入点，该切入点可以重用；</span></li><li><span style=\"font-size:18px;\">&lt;aop:advisor&gt;：用来定义只有一个通知和一个切入点的切面；</span></li><li><span style=\"font-size:18px;\">&lt;aop:aspect&gt;：用来定义切面，该切面可以包含多个切入点和通知，而且标签内部的通知和切入点定义是无序的；和advisor的区别就在此，advisor只包含一个通知和一个切入点。</span></li></ul><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><p style=\"padding: 0px;\"><span style=\"font-size:18px;\">&nbsp;<img alt=\"\" src=\"http://sishuok.com/forum/upload/2011/10/28/e1a15f0edbe99b96b27f6119d65b4cc8__4.GIF\"></span></p>   \n</qpan>', '2016-04-16 01:21:20', '0');
INSERT INTO `article` VALUES ('10084', '10003', 'Spring详解-----------对JDBC的支持', '\n\n<h2 style=\"line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n7.1&nbsp; 概述</h2>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n7.1.1&nbsp; JDBC回顾</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 传统应用程序开发中，进行JDBC编程是相当痛苦的，如下所示：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:661.53125px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//cn.javass.spring.chapter7.&nbsp;TraditionalJdbcTest</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Test</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;test()&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">throws</span>&nbsp;Exception&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;Connection&nbsp;conn&nbsp;=&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">null</span>;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;PreparedStatement&nbsp;pstmt&nbsp;=&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">null</span>;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">try</span>&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn&nbsp;=&nbsp;getConnection();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//1.获取JDBC连接</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//2.声明SQL</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;sql&nbsp;=&nbsp;<span class=\"string\" style=\"color:blue\">&quot;select&nbsp;*&nbsp;from&nbsp;INFORMATION_SCHEMA.SYSTEM_TABLES&quot;</span>;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pstmt&nbsp;=&nbsp;conn.prepareStatement(sql);&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//3.预编译SQL</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ResultSet&nbsp;rs&nbsp;=&nbsp;pstmt.executeQuery();&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//4.执行SQL</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;process(rs);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//5.处理结果集</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;closeResultSet(rs);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//5.释放结果集</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;closeStatement(pstmt);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//6.释放Statement</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn.commit();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//8.提交事务</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">catch</span>&nbsp;(Exception&nbsp;e)&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//9.处理异常并回滚事务</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;conn.rollback();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">throw</span>&nbsp;e;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">finally</span>&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//10.释放JDBC连接，防止JDBC连接不关闭造成的内存泄漏</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;closeConnection(conn);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 以上代码片段具有冗长、重复、容易忘记某一步骤从而导致出错、显示控制事务、显示处理受检查异常等等。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 有朋友可能重构出自己的一套JDBC模板，从而能简化日常开发，但自己开发的JDBC模板不够通用，而且对于每一套JDBC模板实现都差不多，从而导致开发人员必须掌握每一套模板。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Spring JDBC提供了一套JDBC抽象框架，用于简化JDBC开发，而且如果各个公司都使用该抽象框架，开发人员首先减少了学习成本，直接上手开发，如图7-1所示。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;<img src=\"http://sishuok.com/forum/upload/2012/2/22/92e26629cf94f0abce8b334f005312c5__1.JPG\" alt=\"\" style=\"border:0px\"></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n图7-1 Spring JDBC与传统JDBC编程对比</p>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n7.1.2&nbsp; Spring对JDBC的支持</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Spring通过抽象JDBC访问并提供一致的API来简化JDBC编程的工作量。我们只需要<strong>声明SQL、调用合适的Spring JDBC框架API、处理结果集</strong>即可。事务由Spring管理，并将JDBC受查异常转换为Spring一致的非受查异常，从而简化开发。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Spring主要提供<strong>JDBC模板方式、关系数据库对象化方式和SimpleJdbc</strong>方式三种方式来简化JDBC编程，这三种方式就是Spring JDBC的工作模式：</p>\n<ul style=\"margin:0px 0px 1.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>&nbsp;JDBC模板方式：</strong>Spring JDBC框架提供以下几种模板类来简化JDBC编程，实现GoF模板设计模式，将可变部分和非可变部分分离，可变部分采用回调接口方式由用户来实现：如JdbcTemplate、NamedParameterJdbcTemplate、SimpleJdbcTemplate。</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>关系数据库操作对象化方式：</strong>Spring JDBC框架提供了将关系数据库操作对象化的表示形式，从而使用户可以采用面向对象编程来完成对数据库的访问；如MappingSqlQuery、SqlUpdate、SqlCall、SqlFunction、StoredProcedure等类。这些类的实现一旦建立即可重用并且是线程安全的。</li><li style=\"margin:0px 0px 0.25em 30px; padding:0px\"><strong>SimpleJdbc方式：</strong>Spring JDBC框架还提供了<strong>SimpleJdbc方式</strong>来简化JDBC编程，SimpleJdbcInsert 、 SimpleJdbcCall用来简化数据库表插入、存储过程或函数访问。</li></ul>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\nSpring JDBC还提供了一些强大的工具类，如DataSourceUtils来在必要的时候手工获取数据库连接等。</p>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n7.1.4&nbsp;&nbsp; &nbsp;Spring的JDBC架构</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\nSpring JDBC抽象框架由四部分组成：datasource、support、core、object。如图7-2所示。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;<img src=\"http://sishuok.com/forum/upload/2012/2/22/3415c26d23bd3aa79cd10f62311d1514__2.JPG\" alt=\"\" style=\"border:0px\"></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n图7-2 Spring JDBC架构图</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>support包：</strong>提供将JDBC异常转换为DAO非检查异常转换类、一些工具类如JdbcUtils等。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>datasource包：</strong>提供简化访问JDBC 数据源（javax.sql.DataSource实现）工具类，并提供了一些DataSource简单实现类从而能使从这些DataSource获取的连接能自动得到Spring管理事务支持。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>core包：</strong>提供JDBC模板类实现及可变部分的回调接口，还提供SimpleJdbcInsert等简单辅助类。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; object包：</strong>提供关系数据库的对象表示形式，如MappingSqlQuery、SqlUpdate、SqlCall、SqlFunction、StoredProcedure等类，该包是基于core包JDBC模板类实现。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n<br>\n</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2000007629395px\">\n</p>\n<h2 style=\"line-height:31.5px; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n7.2&nbsp; JDBC模板类</h2>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n7.2.1&nbsp; 概述</h3>\n<p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Spring JDBC抽象框架core包提供了JDBC模板类，其中JdbcTemplate是core包的核心类，所以其他模板类都是基于它封装完成的，JDBC模板类是第一种工作模式。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; JdbcTemplate类通过模板设计模式帮助我们消除了冗长的代码，只做需要做的事情（即可变部分），并且帮我们做哪些固定部分，如连接的创建及关闭。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; JdbcTemplate类对可变部分采用回调接口方式实现，如ConnectionCallback通过回调接口返回给用户一个连接，从而可以使用该连接做任何事情、StatementCallback通过回调接口返回给用户一个Statement，从而可以使用该Statement做任何事情等等，还有其他一些回调接口如图7-3所示。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;<img src=\"http://sishuok.com/forum/upload/2012/2/22/da9313bfefabc6152c3bfd45a71f4974__1.JPG\" alt=\"\" title=\"点击查看原始大小图片\" class=\"magplus\" width=\"700\" height=\"304\" style=\"border:0px\"></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n图7-3 JdbcTemplate支持的回调接口</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\nSpring除了提供JdbcTemplate核心类，还提供了基于JdbcTemplate实现的NamedParameterJdbcTemplate类用于支持命名参数绑定、&nbsp;SimpleJdbcTemplate类用于支持Java5&#43;的可变参数及自动装箱拆箱等特性。</p>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n&nbsp;</h3>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n7.2.3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;传统JDBC编程替代方案</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n前边我们已经使用过传统JDBC编程方式，接下来让我们看下Spring JDBC框架提供的更好的解决方案。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n1）准备需要的jar包并添加到类路径中：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:646.015625px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//JDBC抽象框架模块</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">org.springframework.jdbc-<span class=\"number\" style=\"color:rgb(192,0,0)\">3.0</span>.<span class=\"number\" style=\"color:rgb(192,0,0)\">5</span>.RELEASE.jar&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//Spring事务管理及一致的DAO访问及非检查异常模块&nbsp;</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">org.springframework.transaction-<span class=\"number\" style=\"color:rgb(192,0,0)\">3.0</span>.<span class=\"number\" style=\"color:rgb(192,0,0)\">5</span>.RELEASE.jar&nbsp;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//hsqldb驱动，hsqldb是一个开源的Java实现数据库，请下载hsqldb2.0.0&#43;版本</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">hsqldb.jar&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n2）传统JDBC编程替代方案：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n在使用JdbcTemplate模板类时必须通过DataSource获取数据库连接，Spring JDBC提供了DriverManagerDataSource实现，它通过包装“DriverManager.getConnection”获取数据库连接，具体DataSource相关请参考【7.5.1控制数据库连接】。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:646.015625px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">package</span>&nbsp;cn.javass.spring.chapter7;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">import</span>&nbsp;java.sql.ResultSet;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">import</span>&nbsp;java.sql.SQLException;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">import</span>&nbsp;org.junit.AfterClass;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">import</span>&nbsp;org.junit.BeforeClass;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">import</span>&nbsp;org.junit.Test;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">import</span>&nbsp;org.springframework.jdbc.core.JdbcTemplate;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">import</span>&nbsp;org.springframework.jdbc.core.RowCallbackHandler;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">import</span>&nbsp;org.springframework.jdbc.datasource.DriverManagerDataSource;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">class</span>&nbsp;JdbcTemplateTest&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">static</span>&nbsp;JdbcTemplate&nbsp;jdbcTemplate;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"annotation\" style=\"color:rgb(100,100,100)\">@BeforeClass</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">static</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;setUpClass()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;url&nbsp;=&nbsp;<span class=\"string\" style=\"color:blue\">&quot;jdbc:hsqldb:mem:test&quot;</span>;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;username&nbsp;=&nbsp;<span class=\"string\" style=\"color:blue\">&quot;sa&quot;</span>;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;password&nbsp;=&nbsp;<span class=\"string\" style=\"color:blue\">&quot;&quot;</span>;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DriverManagerDataSource&nbsp;dataSource&nbsp;=&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">new</span>&nbsp;DriverManagerDataSource(url,&nbsp;username,&nbsp;password);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dataSource.setDriverClassName(<span class=\"string\" style=\"color:blue\">&quot;org.hsqldb.jdbcDriver&quot;</span>);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jdbcTemplate&nbsp;=&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">new</span>&nbsp;JdbcTemplate(dataSource);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Test</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;test()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//1.声明SQL</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;sql&nbsp;=&nbsp;<span class=\"string\" style=\"color:blue\">&quot;select&nbsp;*&nbsp;from&nbsp;INFORMATION_SCHEMA.SYSTEM_TABLES&quot;</span>;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jdbcTemplate.query(sql,&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">new</span>&nbsp;RowCallbackHandler()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Override</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;processRow(ResultSet&nbsp;rs)&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">throws</span>&nbsp;SQLException&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//2.处理结果集</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;value&nbsp;=&nbsp;rs.getString(<span class=\"string\" style=\"color:blue\">&quot;TABLE_NAME&quot;</span>);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\" style=\"color:blue\">&quot;Column&nbsp;TABLENAME:&quot;</span>&nbsp;&#43;&nbsp;value);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n<br>\n</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n接下来让我们具体分析一下：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n1）&nbsp;&nbsp;<strong>jdbc:hsqldb:mem:test：</strong>表示使用hsqldb内存数据库，数据库名为“test”。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n2）&nbsp;&nbsp;<strong>public static void setUpClass()：</strong>使用junit的@BeforeClass注解，表示在所以测试方法之前执行，且只执行一次。在此方法中定义了DataSource并使用DataSource对象创建了JdbcTemplate对象。JdbcTemplate对象是线程安全的。<strong></strong></p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n3）&nbsp;&nbsp;<strong>JdbcTemplate执行流程：</strong>首先定义SQL，其次调用JdbcTemplate方法执行SQL，最后通过RowCallbackHandler回调处理ResultSet结果集。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\nSpring JDBC解决方法相比传统JDBC编程方式是不是简单多了，是不是只有可变部分需要我们来做，其他的都由Spring JDBC框架来实现了。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n接下来让我们深入JdbcTemplate及其扩展吧。</p>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n&nbsp;</h3>\n<h3 style=\"font-size:1.2em; line-height:1.5em; margin:0px 0px 0.5em; padding:0px; font-family:Verdana,Arial,Helvetica,sans-serif\">\n7.2.4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;JdbcTemplate</h3>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 首先让我们来看下如何使用JdbcTemplate来实现增删改查。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n一、首先创建表结构：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:646.015625px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"comment\" style=\"color:rgb(0,130,0); padding:0px; margin:0px; width:auto; border:0px\">//代码片段(cn.javass.spring.chapter7.JdbcTemplateTest)</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Before</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;setUp()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;String&nbsp;createTableSql&nbsp;=&nbsp;<span class=\"string\" style=\"color:blue\">&quot;create&nbsp;memory&nbsp;table&nbsp;test&quot;</span>&nbsp;&#43;&nbsp;<span class=\"string\" style=\"color:blue\">&quot;(id&nbsp;int&nbsp;GENERATED&nbsp;BY&nbsp;DEFAULT&nbsp;AS&nbsp;IDENTITY&nbsp;PRIMARY&nbsp;KEY,&nbsp;&quot;</span>&nbsp;&#43;&nbsp;<span class=\"string\" style=\"color:blue\">&quot;name&nbsp;varchar(100))&quot;</span>;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;jdbcTemplate.update(createTableSql);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@After</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;tearDown()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;String&nbsp;dropTableSql&nbsp;=&nbsp;<span class=\"string\" style=\"color:blue\">&quot;drop&nbsp;table&nbsp;test&quot;</span>;&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;jdbcTemplate.execute(dropTableSql);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n1）&nbsp; org.junit包下的<strong>@Before和@After</strong>分别表示在测试方法之前和之后执行的方法，对于每个测试方法都将执行一次；</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n2）&nbsp;&nbsp;<strong>create memory table test</strong>表示创建hsqldb内存表，包含两个字段id和name，其中id是具有自增功能的主键，如果有朋友对此不熟悉hsqldb可以换成熟悉的数据库。</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n二、定义测试骨架，该测试方法将用于实现增删改查测试：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:646.015625px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"annotation\" style=\"color:rgb(100,100,100)\">@Test</span>&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">public</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;testCURD()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;insert();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;delete();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;update();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;&nbsp;&nbsp;select();&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n三、新增测试：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:646.015625px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;insert()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;jdbcTemplate.update(<span class=\"string\" style=\"color:blue\">&quot;insert&nbsp;into&nbsp;test(name)&nbsp;values(\'name1\')&quot;</span>);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;jdbcTemplate.update(<span class=\"string\" style=\"color:blue\">&quot;insert&nbsp;into&nbsp;test(name)&nbsp;values(\'name2\')&quot;</span>);&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;Assert.assertEquals(<span class=\"number\" style=\"color:rgb(192,0,0)\">2</span>,&nbsp;jdbcTemplate.queryForInt(<span class=\"string\" style=\"color:blue\">&quot;select&nbsp;count(*)&nbsp;from&nbsp;test&quot;</span>));&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n四、删除测试：</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<div style=\"font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px; border:1px solid rgb(170,187,204)\">\n<span class=\"bold\" style=\"font-weight:bold; font-size:14px; font-family:\'arial black\',\'avant garde\'\">java代码：</span>\n<div class=\"dp-highlighter\" id=\"\" style=\"font-family:Monaco,\'DejaVu Sans Mono\',\'Bitstream Vera Sans Mono\',Consolas,\'Courier New\',monospace; font-size:12px; width:646.015625px; overflow:auto; margin-left:9px; padding:1px; word-break:break-all; word-wrap:break-word; background-color:transparent\">\n<div class=\"bar\">\n<div class=\"tools\" style=\"padding:3px; margin:0px; font-weight:bold\">Java代码&nbsp;&nbsp;<a target=\"_blank\" title=\"收藏这段代码\" style=\"color:rgb(233,101,14); text-decoration:underline\"><img class=\"star\" src=\"http://jinnianshilongnian.iteye.com/images/icon_star.png\" alt=\"收藏代码\" style=\"border:0px\"></a></div>\n</div>\n<ol start=\"1\" class=\"dp-j\" style=\"font-size:1em; line-height:1.4em; margin:0px 0px 1px; padding:2px 0px; border:1px solid rgb(209,215,220); list-style-position:initial; color:rgb(43,145,175)\">\n<li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\"><span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">private</span>&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">void</span>&nbsp;delete()&nbsp;{&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;jdbcTemplate.update(<span class=\"string\" style=\"color:blue\">&quot;delete&nbsp;from&nbsp;test&nbsp;where&nbsp;name=?&quot;</span>,&nbsp;<span class=\"keyword\" style=\"color:rgb(127,0,85); font-weight:bold\">new</span>&nbsp;Object[]{<span class=\"string\" style=\"color:blue\">&quot;name2&quot;</span>});&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">&nbsp;&nbsp;Assert.assertEquals(<span class=\"number\" style=\"color:rgb(192,0,0)\">1</span>,&nbsp;jdbcTemplate.queryForInt(<span class=\"string\" style=\"color:blue\">&quot;select&nbsp;count(*)&nbsp;from&nbsp;test&quot;</span>));&nbsp;&nbsp;</span></li><li style=\"font-size:1em; margin:0px 0px 0px 38px; padding:0px 0px 0px 10px; border-left-width:1px; border-left-style:solid; border-left-color:rgb(209,215,220); line-height:18px; background-color:rgb(250,250,250)\">\n<span style=\"color:black\">}&nbsp;&nbsp;</span></li></ol>\n</div>\n</div>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n&nbsp;</p>\n<p style=\"margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:31.5px\">\n五、', '2016-04-16 01:21:20', '0');
INSERT INTO `article` VALUES ('10085', '10003', 'Spring学习笔记（17）-----------SpringAOP总结（2）', '\n\n<blockquote dir=\"ltr\" style=\"margin-right:0px\">\n<p><span style=\"font-size:14px\"><u><span style=\"color:#0066cc\">Spring中AOP的代理方式</span></u></span></p>\n<p><u><span style=\"font-size:14px; color:#0066cc\"></span></u>&nbsp;</p>\n</blockquote>\n<span style=\"font-size:14px\"></span>\n<blockquote dir=\"ltr\" style=\"margin-right:0px\">\n<blockquote dir=\"ltr\" style=\"margin-right:0px\"><span style=\"color:#ff0000\"></span>\n<p style=\"margin:0px\"><span style=\"font-size:24px\"><span style=\"background-color:rgb(255,153,0)\">&nbsp;静态代理类：<br>\n</span>&nbsp;&nbsp;&nbsp;<span>&nbsp;</span> </span><span style=\"font-size:24px\"><span style=\"background-color:rgb(204,255,204)\">由程序员创建或由特定工具自动生成源代码，再对其编译。在程序运行前，代理类的<br>\n.class文件就已经存在了。</span> </span></p>\n<p style=\"margin:0px\"><span style=\"background-color:rgb(204,255,204)\"><br>\n</span><span style=\"font-size:24px\">&nbsp;&nbsp;<span style=\"background-color:rgb(255,153,0)\"><span>&nbsp;</span> 动态代理类</span> ：<span style=\"background-color:rgb(204,255,204)\">在程序运行时，运用反射机制动态创建而成</span> 。动态代理分为两种代理；</span></p>\n<p style=\"margin:0px\"><span style=\"font-size:24px\">&nbsp;</span></p>\n<p style=\"margin:0px\"><span style=\"font-size:24px\"><span><span>jdk代理和cglib的代理</span>\n</span></span></p>\n<p style=\"margin:0px\"><span style=\"font-size:24px\"><span><span>jdk代理必须有一个接口用来实现,就是对目标对象生成代理，进行代理,然后就是返回目标对象的代理。Invoction</span>\n</span></span></p>\n<p style=\"margin:0px\"><span style=\"font-size:24px\"><span><span>cglib和jdk代理的区别在与 他需要导入一个cglib.jar包，cglib是基于jdk封装而成的，主要的就是cglib相对灵活，因为jdk必须要实现接口</span>\n</span></span></p>\n<p style=\"margin:0px\"><span><span style=\"font-size:24px\"><span>而cglib可以使接口也可以是类。</span>\n</span></span></p>\n<p style=\"margin:0px\">&nbsp;</p>\n<p style=\"margin:0px\">&nbsp;</p>\n<p style=\"margin:0px\"><span style=\"color:#ff0000\"></span>&nbsp;</p>\n</blockquote>\n</blockquote>\n<p style=\"margin:0px\"><span style=\"font-size:24px; color:#ff0000\">静态代理和动态代理</span></p>\n<p style=\"margin:0px\"><span style=\"font-size:24px; color:#ff0000\"></span>&nbsp;</p>\n<p>代理，应该就是在不破坏原有代码的基础上，对原有代码进行扩充。</p>\n<p>一、静态代理</p>\n<p>代理类与原类实现相同的接口。</p>\n<p>不过静态代理会在代码里写死，对于需要在运行期生成的代码就无能为力了。</p>\n<p>1.UserManager.java</p>\n<p><wbr></p>\n<p style=\"margin:0px\">&nbsp;</p>\n<table border=\"1\" cellspacing=\"1\" cellpadding=\"3\" style=\"width:80%\">\n<tbody>\n<tr>\n<td>\n<p>package com;</p>\n<p>public interface UserManager {</p>\n<p><wbr>public void addUser(String username, String password);<br>\n<wbr><br>\n<wbr>public void deleteUser(int id);<br>\n<wbr><br>\n<wbr>public void modifyUser(int id, String username, String password);<br>\n<wbr><br>\n<wbr>public String findUserByID(int id);<br>\n}</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p style=\"margin:0px\">&nbsp;</p>\n<p><wbr></p>\n<p>2.UserManagerImpl.java</p>\n<p><wbr></p>\n<p style=\"margin:0px\">&nbsp;</p>\n<table border=\"1\" cellspacing=\"1\" cellpadding=\"3\" style=\"width:80%\">\n<tbody>\n<tr>\n<td>\n<p>package com;</p>\n<p>public class UserManagerImpl implements UserManager {</p>\n<p><wbr>public void addUser(String username, String password) {<br>\n<wbr><wbr>System.out.println(&quot;========UserManagerImpl.addUser()===================&quot;);<br>\n<wbr>}</p>\n<p><wbr>public void deleteUser(int id) {<br>\n<wbr><wbr>System.out.println(&quot;========UserManagerImpl.deleteUser()===================&quot;);<br>\n<wbr>}</p>\n<p><wbr>public String findUserByID(int id) {<br>\n<wbr><wbr>System.out.println(&quot;========UserManagerImpl.findUserByID()===================&quot;);<br>\n<wbr><wbr>return &quot;ok&quot;;<br>\n<wbr>}</p>\n<p><wbr>public void modifyUser(int id, String username, String password) {<br>\n<wbr><wbr>System.out.println(&quot;========UserManagerImpl.modifyUser()===================&quot;);<br>\n<wbr>}</p>\n<p>}</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p style=\"margin:0px\">&nbsp;</p>\n<p><wbr></p>\n<p>3.UserManagerImplProxy.java(代理类)</p>\n<p><wbr></p>\n<p style=\"margin:0px\">&nbsp;</p>\n<table border=\"1\" cellspacing=\"1\" cellpadding=\"3\" style=\"width:80%\">\n<tbody>\n<tr>\n<td>\n<p>package com;</p>\n<p>public class UserManagerImplProxy implements UserManager {</p>\n<p><wbr>private UserManager userManager;<br>\n<wbr>public UserManagerImplProxy(UserManager userManager) {<br>\n<wbr><wbr>this.userManager = userManager;<br>\n<wbr>}<br>\n<wbr>@Override<br>\n<wbr>public void addUser(String username, String password) {<br>\n<wbr><wbr>// TODO Auto-generated method stub<br>\n<wbr><wbr>checkSecurity();<br>\n<wbr><wbr>userManager.addUser(username, password);<br>\n<wbr>}</p>\n<p><wbr>@Override<br>\n<wbr>public void deleteUser(int id) {<br>\n<wbr><wbr>// TODO Auto-generated method stub<br>\n<wbr><wbr>userManager.deleteUser(id);<br>\n<wbr>}</p>\n<p><wbr>@Override<br>\n<wbr>public String findUserByID(int id) {<br>\n<wbr><wbr>// TODO Auto-generated method stub<br>\n<wbr><wbr>return userManager.findUserByID(id);<br>\n<wbr>}</p>\n<p><wbr>@Override<br>\n<wbr>public void modifyUser(int id, String username, String password) {<br>\n<wbr><wbr>// TODO Auto-generated method stub<br>\n<wbr><wbr>userManager.modifyUser(id, username, password);<br>\n<wbr>}</p>\n<p><wbr>private void checkSecurity() {<br>\n<wbr><wbr>System.out.println(&quot;==============checkSecurity()==================&quot;);<br>\n<wbr>}<br>\n}</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p style=\"margin:0px\">&nbsp;</p>\n<p><wbr></p>\n<p>4.Client.java(客户端)</p>\n<p><wbr></p>\n<p style=\"margin:0px\">&nbsp;</p>\n<table border=\"1\" cellspacing=\"1\" cellpadding=\"3\" style=\"width:80%\">\n<tbody>\n<tr>\n<td>\n<p>package com;</p>\n<p>public class Client {</p>\n<p><wbr>public static void main(String[] args) {<br>\n<wbr><wbr>UserManager userManager = new UserManagerImplProxy(new UserManagerImpl());<br>\n<wbr><wbr>userManager.addUser(&quot;Tom&quot;, &quot;123&quot;);<br>\n<wbr>}</p>\n<p>}</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p style=\"margin:0px\">&nbsp;</p>\n<p><wbr></p>\n<p><wbr></p>\n<p>二、动态代理</p>\n<p>可以解决运行期执行的问题，动态代理没有必要事先将代码写死。</p>\n<p>1.SecurityHandler.java</p>\n<p><wbr></p>\n<p style=\"margin:0px\">&nbsp;</p>\n<table border=\"1\" cellspacing=\"1\" cellpadding=\"3\" style=\"width:80%\">\n<tbody>\n<tr>\n<td>\n<p>package com;</p>\n<p>import java.lang.reflect.InvocationHandler;<br>\nimport java.lang.reflect.Method;<br>\nimport java.lang.reflect.Proxy;</p>\n<p>public class SecurityHandler implements InvocationHandler {</p>\n<p><wbr><br>\n<wbr>private Object targetObject;<br>\n<wbr><br>\n<wbr><br>\n<wbr>public Object newProxy(Object targetObject) {<br>\n<wbr><wbr>this.targetObject = targetObject;<br>\n<wbr><wbr>return Proxy.newProxyInstance(targetObject.getClass().getClassLoader(),<br>\n<wbr><wbr><wbr><wbr>targetObject.getClass().getInterfaces(), this);<br>\n<wbr>}<br>\n<wbr><br>\n<wbr>public Object invoke(Object proxy, Method method, Object[] args)<br>\n<wbr><wbr><wbr>throws Throwable {<br>\n<wbr><wbr>checkSecurity();<br>\n<wbr><wbr>//方法返回&#20540;<br>\n<wbr><wbr>Object ret = null;<br>\n<wbr><wbr>try {<br>\n<wbr><wbr><wbr>//args是方法参数<br>\n<wbr><wbr><wbr>ret = method.invoke(targetObject, args);<br>\n<wbr><wbr>} catch (RuntimeException e) {<br>\n<wbr><wbr><wbr>// TODO Auto-generated catch block<br>\n<wbr><wbr><wbr>e.printStackTrace();<br>\n<wbr><wbr>}<br>\n<wbr><wbr>return ret;<br>\n<wbr>}</p>\n<p><wbr>private void checkSecurity() {<br>\n<wbr><wbr>System.out.println(&quot;===============checkSecurity()===================&quot;);<br>\n<wbr>}<br>\n}</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p style=\"margin:0px\">&nbsp;</p>\n<p><wbr></p>\n<p>2.Client.java</p>\n<p><wbr></p>\n<p style=\"margin:0px\">&nbsp;</p>\n<table border=\"1\" cellspacing=\"1\" cellpadding=\"3\" style=\"width:80%\">\n<tbody>\n<tr>\n<td>\n<p>package com;</p>\n<p>public class Client {</p>\n<p><wbr>public static void main(String[] args) {<br>\n<wbr><wbr>SecurityHandler handler = new SecurityHandler();<br>\n<wbr><wbr><br>\n<wbr><wbr>UserManager userManager = (UserManager)handler.newProxy(new UserManagerImpl());<br>\n<wbr><wbr>userManager.addUser(&quot;Tom&quot;, &quot;123&quot;);<br>\n<wbr><wbr>System.out.println(userManager.findUserByID(1));<br>\n<wbr>}</p>\n<p>\n<p>}</p>\n<p><span style=\"font-size:24px; color:#ff0000\">&nbsp;</span></p>\n</td>\n</tr>\n</tbody>\n</table>\n<p style=\"margin:0px\"><span style=\"font-size:24px; color:#ff0000\"></span>&nbsp;</p>\n<p style=\"margin:0px\"><span style=\"font-size:24px; color:#ff0000\"></span>&nbsp;</p>\n<p style=\"margin:0px\"><span style=\"font-size:24px; color:#ff0000\"></span>&nbsp;</p>\n<p><span style=\"font-size:24px; color:#ff0000\">动态代理的JDK代理和CGLib代理</span></p>\n<p><span style=\"font-size:14px\"></span>&nbsp;</p>\n<p><span style=\"font-size:24px; color:#ff0000\">JDK代理</span></p>\n<span style=\"font-size:14px\"></span>\n<p>这里我们学习一下代理模式，JDK的动态代理，以及以JDK为基础的springAOP实现 <br>\n代理模式：类结构的模式，优点就是不需要更改原有类（被代理类）就能增强原有类（被代理类）的功能，缺点就是必须实现原有类（被代理类）的接口 <br>\nJDK的动态代理：优点就是不必“复制”原有类（被代理类）接口实现类，缺点就是必须为每个被代理类实现几乎一样的方法 <br>\nspringAOP：优点就是采用springIOC，JDK动态代理等技术来实现AOP机制 <br>\n我们展示一个类的几个方法，分别采用代理模式，JDK动态代理，springAOP机制来做些额外功能 <br>\n这里定义一个接口，一个实现类 <br>\n</p>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\">Java代码 <a target=\"_blank\" title=\"收藏这段代码\" href=\"\"><img class=\"spinner\" src=\"http://fruitking.iteye.com/images/spinner.gif\" alt=\"\" style=\"\"></a></div>\n</div>\n<ol class=\"dp-j\">\n<li><span><span class=\"keyword\">package</span><span>&nbsp;com.fruitking.proxy;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class=\"comment\">/**</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*&nbsp;汽车服务类接口</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*&nbsp;@author&nbsp;fruitking</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*&nbsp;@since&nbsp;2010-02-23</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">interface</span><span>&nbsp;CarService&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">/**</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;启动汽车</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;start();&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">/**</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;获得汽车搭载人数</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">int</span><span>&nbsp;getLoadAmount();&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">/**</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;设置驾驶员</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;driver</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;String&nbsp;setDriver(String&nbsp;driver);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">/**</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;搭载货物</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;goods</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;NullPointerException</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;IllegalArgumentException</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;loadGoods(String&nbsp;goods)</span><span class=\"keyword\">throws</span><span>&nbsp;NullPointerException,IllegalArgumentException;&nbsp;&nbsp;</span></span></li><li><span>}&nbsp;&nbsp;</span></li></ol>\n</div>\n<pre title=\"代理模式，JDK动态代理，SpringAOP来龙去脉\" class=\"java\" style=\"display: none;\" name=\"code\" codeable_id=\"601106\" codeable_type=\"Blog\" source_url=\"http://fruitking.iteye.com/blog/601106\" pre_index=\"0\">package com.fruitking.proxy;\n\n/**\n * 汽车服务类接口\n * @author fruitking\n * @since 2010-02-23\n */\npublic interface CarService {\n	\n	/**\n	 * 启动汽车\n	 */\n	public void start();\n	\n	/**\n	 * 获得汽车搭载人数\n	 * @return\n	 */\n	public int getLoadAmount();\n	\n	/**\n	 * 设置驾驶员\n	 * @param driver\n	 * @return\n	 */\n	public String setDriver(String driver);\n	\n	/**\n	 * 搭载货物\n	 * @param goods\n	 * @throws NullPointerException\n	 * @throws IllegalArgumentException\n	 */\n	public void loadGoods(String goods)throws NullPointerException,IllegalArgumentException;\n}\n</pre>\n<p><br>\n<br>\n&nbsp;</p>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\">Java代码 <a target=\"_blank\" title=\"收藏这段代码\" href=\"\"><img class=\"spinner\" src=\"http://fruitking.iteye.com/images/spinner.gif\" alt=\"\" style=\"\"></a></div>\n</div>\n<ol class=\"dp-j\">\n<li><span><span class=\"keyword\">package</span><span>&nbsp;com.fruitking.proxy;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class=\"comment\">/**</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*&nbsp;汽车服务类接口实现</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*&nbsp;@author&nbsp;fruitking</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*&nbsp;@since&nbsp;2010-02-23</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">class</span><span>&nbsp;CarServiceImpl&nbsp;</span><span class=\"keyword\">implements</span><span>&nbsp;CarService{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">/**</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;启动汽车</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;start(){&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;start&nbsp;my&nbsp;car...&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">/**</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;获得汽车搭载人数</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">int</span><span>&nbsp;getLoadAmount(){&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;count&nbsp;the&nbsp;person&nbsp;amount&nbsp;in&nbsp;my&nbsp;car...&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">return</span><span>&nbsp;</span><span class=\"number\">5</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">/**</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;设置驾驶员</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;driver</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;String&nbsp;setDriver(String&nbsp;driver){&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;driver&nbsp;is:&quot;</span><span>&#43;driver);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">if</span><span>(driver==</span><span class=\"keyword\">null</span><span>||</span><span class=\"string\">&quot;&quot;</span><span>.equals(driver)){&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">return</span><span>&nbsp;</span><span class=\"string\">&quot;There&nbsp;is&nbsp;not&nbsp;driver.&quot;</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<span class=\"keyword\">else</span><span>{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">return</span><span>&nbsp;</span><span class=\"string\">&quot;The&nbsp;driver\'s&nbsp;name&nbsp;is&nbsp;&quot;</span><span>&nbsp;&#43;&nbsp;driver&nbsp;&#43;&nbsp;</span><span class=\"string\">&quot;.&quot;</span><span>;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">/**</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;搭载货物</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;goods</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;NullPointerException</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;IllegalArgumentException</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;loadGoods(String&nbsp;goods)</span><span class=\"keyword\">throws</span><span>&nbsp;NullPointerException,IllegalArgumentException{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">if</span><span>(goods==</span><span class=\"keyword\">null</span><span>||</span><span class=\"string\">&quot;&quot;</span><span>.equals(goods)){&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">throw</span><span>&nbsp;</span><span class=\"keyword\">new</span><span>&nbsp;NullPointerException(</span><span class=\"string\">&quot;The&nbsp;argument&nbsp;goods&nbsp;is&nbsp;null.&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<span class=\"keyword\">else</span><span>&nbsp;</span><span class=\"keyword\">if</span><span>(</span><span class=\"string\">&quot;tiger&quot;</span><span>.equals(goods)){&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">throw</span><span>&nbsp;</span><span class=\"keyword\">new</span><span>&nbsp;IllegalArgumentException(</span><span class=\"string\">&quot;The&nbsp;argument&nbsp;goods&nbsp;is&nbsp;invalid.&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;load&nbsp;goods&nbsp;is:&quot;</span><span>&#43;goods);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>}&nbsp;&nbsp;</span></li></ol>\n</div>\n<pre title=\"代理模式，JDK动态代理，SpringAOP来龙去脉\" class=\"java\" style=\"display: none;\" name=\"code\" codeable_id=\"601106\" codeable_type=\"Blog\" source_url=\"http://fruitking.iteye.com/blog/601106\" pre_index=\"1\">package com.fruitking.proxy;\n\n/**\n * 汽车服务类接口实现\n * @author fruitking\n * @since 2010-02-23\n */\npublic class CarServiceImpl implements CarService{\n	\n	/**\n	 * 启动汽车\n	 */\n	public void start(){\n		System.out.println(&quot;start my car...&quot;);\n	}\n	\n	/**\n	 * 获得汽车搭载人数\n	 * @return\n	 */\n	public int getLoadAmount(){\n		System.out.println(&quot;count the person amount in my car...&quot;);\n		return 5;\n	}\n	\n	/**\n	 * 设置驾驶员\n	 * @param driver\n	 * @return\n	 */\n	public String setDriver(String driver){\n		System.out.println(&quot;driver is:&quot;+driver);\n		if(driver==null||&quot;&quot;.equals(driver)){\n			return &quot;There is not driver.&quot;;\n		}else{\n			return &quot;The driver&#39;s name is &quot; + driver + &quot;.&quot;;\n		}\n	}\n	\n	/**\n	 * 搭载货物\n	 * @param goods\n	 * @throws NullPointerException\n	 * @throws IllegalArgumentException\n	 */\n	public void loadGoods(String goods)throws NullPointerException,IllegalArgumentException{\n		if(goods==null||&quot;&quot;.equals(goods)){\n			throw new NullPointerException(&quot;The argument goods is null.&quot;);\n		}else if(&quot;tiger&quot;.equals(goods)){\n			throw new IllegalArgumentException(&quot;The argument goods is invalid.&quot;);\n		}\n		System.out.println(&quot;load goods is:&quot;+goods);\n	}\n}\n</pre>\n<p><br>\n先来看看代理模式，定义一个代理类，然后调用代理类 <br>\n</p>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\">Java代码 <a target=\"_blank\" title=\"收藏这段代码\" href=\"\"><img class=\"spinner\" src=\"http://fruitking.iteye.com/images/spinner.gif\" alt=\"\" style=\"\"></a></div>\n</div>\n<ol class=\"dp-j\">\n<li><span><span class=\"keyword\">package</span><span>&nbsp;com.fruitking.proxy.pattern;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class=\"keyword\">import</span><span>&nbsp;com.fruitking.proxy.CarService;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class=\"comment\">/**</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*&nbsp;汽车服务类接口的代理类实现</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*&nbsp;@author&nbsp;fruitking</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*&nbsp;@since&nbsp;2010-02-23</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">class</span><span>&nbsp;CarServiceProxy&nbsp;</span><span class=\"keyword\">implements</span><span>&nbsp;CarService&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">private</span><span>&nbsp;CarService&nbsp;carServiceTarget;</span><span class=\"comment\">//被代理的目标类</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">/**</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;在构造函数中设置被代理的目标类</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;也可以使用set方法设置被代理的目标类</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;carServiceTarget</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;CarServiceProxy(CarService&nbsp;carServiceTarget){&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">this</span><span>.carServiceTarget&nbsp;=&nbsp;carServiceTarget;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">/**</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;启动汽车</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;start(){&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;before&nbsp;excute&nbsp;target&nbsp;object...&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carServiceTarget.start();&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;after&nbsp;excute&nbsp;target&nbsp;object...&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">/**</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;获得汽车搭载人数</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">int</span><span>&nbsp;getLoadAmount(){&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;before&nbsp;excute&nbsp;target&nbsp;object...&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">int</span><span>&nbsp;amount&nbsp;=&nbsp;carServiceTarget.getLoadAmount();&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;after&nbsp;excute&nbsp;target&nbsp;object...&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">return</span><span>&nbsp;amount;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">/**</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;设置驾驶员</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;driver</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;String&nbsp;setDriver(String&nbsp;driver){&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;before&nbsp;excute&nbsp;target&nbsp;object...&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;resultObject&nbsp;=&nbsp;carServiceTarget.setDriver(driver);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;after&nbsp;excute&nbsp;target&nbsp;object...&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">return</span><span>&nbsp;resultObject;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">/**</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;搭载货物</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;goods</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;NullPointerException</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;IllegalArgumentException</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;loadGoods(String&nbsp;goods)</span><span class=\"keyword\">throws</span><span>&nbsp;NullPointerException,IllegalArgumentException{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">//这里不实现任何操作</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>}&nbsp;&nbsp;</span></li></ol>\n</div>\n<pre title=\"代理模式，JDK动态代理，SpringAOP来龙去脉\" class=\"java\" style=\"display: none;\" name=\"code\" codeable_id=\"601106\" codeable_type=\"Blog\" source_url=\"http://fruitking.iteye.com/blog/601106\" pre_index=\"2\">package com.fruitking.proxy.pattern;\n\nimport com.fruitking.proxy.CarService;\n\n/**\n * 汽车服务类接口的代理类实现\n * @author fruitking\n * @since 2010-02-23\n */\npublic class CarServiceProxy implements CarService {\n	\n	private CarService carServiceTarget;//被代理的目标类\n	\n	/**\n	 * 在构造函数中设置被代理的目标类\n	 * 也可以使用set方法设置被代理的目标类\n	 * @param carServiceTarget\n	 */\n	public CarServiceProxy(CarService carServiceTarget){\n		this.carServiceTarget = carServiceTarget;\n	}\n\n	/**\n	 * 启动汽车\n	 */\n	public void start(){\n		System.out.println(&quot;before excute target object...&quot;);\n		carServiceTarget.start();\n		System.out.println(&quot;after excute target object...&quot;);\n	}\n	\n	/**\n	 * 获得汽车搭载人数\n	 * @return\n	 */\n	public int getLoadAmount(){\n		System.out.println(&quot;before excute target object...&quot;);\n		int amount = carServiceTarget.getLoadAmount();\n		System.out.println(&quot;after excute target object...&quot;);\n		return amount;\n	}\n	\n	/**\n	 * 设置驾驶员\n	 * @param driver\n	 * @return\n	 */\n	public String setDriver(String driver){\n		System.out.println(&quot;before excute target object...&quot;);\n		String resultObject = carServiceTarget.setDriver(driver);\n		System.out.println(&quot;after excute target object...&quot;);\n		return resultObject;\n	}\n	\n	/**\n	 * 搭载货物\n	 * @param goods\n	 * @throws NullPointerException\n	 * @throws IllegalArgumentException\n	 */\n	public void loadGoods(String goods)throws NullPointerException,IllegalArgumentException{\n		//这里不实现任何操作\n	}\n}\n</pre>\n<p><br>\n<br>\n&nbsp;</p>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\">Java代码 <a target=\"_blank\" title=\"收藏这段代码\" href=\"\"><img class=\"spinner\" src=\"http://fruitking.iteye.com/images/spinner.gif\" alt=\"\" style=\"\"></a></div>\n</div>\n<ol class=\"dp-j\">\n<li><span><span class=\"keyword\">package</span><span>&nbsp;com.fruitking.proxy.pattern;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class=\"keyword\">import</span><span>&nbsp;com.fruitking.proxy.CarService;&nbsp;&nbsp;</span></span></li><li><span><span class=\"keyword\">import</span><span>&nbsp;com.fruitking.proxy.CarServiceImpl;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">class</span><span>&nbsp;TestProxyPattern&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">/**</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;代理模式中的调用</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;args</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">static</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;main(String[]&nbsp;args)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CarService&nbsp;carServiceTarget&nbsp;=&nbsp;<span class=\"keyword\">new</span><span>&nbsp;CarServiceImpl();&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CarServiceProxy&nbsp;carServiceProxy&nbsp;=&nbsp;<span class=\"keyword\">new</span><span>&nbsp;CarServiceProxy(carServiceTarget);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">//执行代理类的方法</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">//作用一：间接执行被代理类的方法，</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">//作用二：代理类可以在被代理类方法执行前后做一些额外操作</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">//总结：不更改原有类的功能和程序代码情况下，实现额外的功能能</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">//缺点：要为每个被代理类编写一个代理类，且需要实现相同接口的所有方法</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carServiceProxy.start();&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carServiceProxy.getLoadAmount();&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;driver&nbsp;=&nbsp;carServiceProxy.setDriver(<span class=\"string\">&quot;fruitking&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(driver);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>}&nbsp;&nbsp;</span></li></ol>\n</div>\n<pre title=\"代理模式，JDK动态代理，SpringAOP来龙去脉\" class=\"java\" style=\"display: none;\" name=\"code\" codeable_id=\"601106\" codeable_type=\"Blog\" source_url=\"http://fruitking.iteye.com/blog/601106\" pre_index=\"3\">package com.fruitking.proxy.pattern;\n\nimport com.fruitking.proxy.CarService;\nimport com.fruitking.proxy.CarServiceImpl;\n\npublic class TestProxyPattern {\n\n	/**\n	 * 代理模式中的调用\n	 * @param args\n	 */\n	public static void main(String[] args) {\n		CarService carServiceTarget = new CarServiceImpl();\n		CarServiceProxy carServiceProxy = new CarServiceProxy(carServiceTarget);\n		//执行代理类的方法\n		//作用一：间接执行被代理类的方法，\n		//作用二：代理类可以在被代理类方法执行前后做一些额外操作\n		//总结：不更改原有类的功能和程序代码情况下，实现额外的功能能\n		//缺点：要为每个被代理类编写一个代理类，且需要实现相同接口的所有方法\n		carServiceProxy.start();\n		carServiceProxy.getLoadAmount();\n		String driver = carServiceProxy.setDriver(&quot;fruitking&quot;);\n		System.out.println(driver);\n	}\n}\n\n</pre>\n<p><br>\n<br>\n再来看看JDK动态代理 <br>\n</p>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\">Java代码 <a target=\"_blank\" title=\"收藏这段代码\" href=\"\"><img class=\"spinner\" src=\"http://fruitking.iteye.com/images/spinner.gif\" alt=\"\" style=\"\"></a></div>\n</div>\n<ol class=\"dp-j\">\n<li><span><span class=\"keyword\">package</span><span>&nbsp;com.fruitking.proxy.jdkdproxy;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class=\"keyword\">import</span><span>&nbsp;java.lang.reflect.InvocationHandler;&nbsp;&nbsp;</span></span></li><li><span><span class=\"keyword\">import</span><span>&nbsp;java.lang.reflect.Method;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class=\"keyword\">import</span><span>&nbsp;com.fruitking.proxy.CarService;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class=\"comment\">/**</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*&nbsp;java动态代理实现类</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*&nbsp;@author&nbsp;fruitking</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*&nbsp;@since&nbsp;2010-02-23</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">class</span><span>&nbsp;CarServiceJDKDynamicProxy&nbsp;</span><span class=\"keyword\">implements</span><span>&nbsp;InvocationHandler&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">private</span><span>&nbsp;CarService&nbsp;carServiceTarget;</span><span class=\"comment\">//被代理的目标类</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">/**</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;在构造函数中设置被代理的目标类</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;也可以使用set方法设置被代理的目标类</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;carServiceTarget</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;CarServiceJDKDynamicProxy(CarService&nbsp;carServiceTarget){&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">this</span><span>.carServiceTarget&nbsp;=&nbsp;carServiceTarget;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;Object&nbsp;invoke(Object&nbsp;proxy,&nbsp;Method&nbsp;method,&nbsp;Object[]&nbsp;args)&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">throws</span><span>&nbsp;Throwable&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;before&nbsp;excute&nbsp;target&nbsp;object...&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Object&nbsp;object&nbsp;=&nbsp;method.invoke(<span class=\"keyword\">this</span><span>.carServiceTarget,args);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;after&nbsp;excute&nbsp;target&nbsp;object...&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">return</span><span>&nbsp;object;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>}&nbsp;&nbsp;</span></li></ol>\n</div>\n<pre title=\"代理模式，JDK动态代理，SpringAOP来龙去脉\" class=\"java\" style=\"display: none;\" name=\"code\" codeable_id=\"601106\" codeable_type=\"Blog\" source_url=\"http://fruitking.iteye.com/blog/601106\" pre_index=\"4\">package com.fruitking.proxy.jdkdproxy;\n\nimport java.lang.reflect.InvocationHandler;\nimport java.lang.reflect.Method;\n\nimport com.fruitking.proxy.CarService;\n\n/**\n * java动态代理实现类\n * @author fruitking\n * @since 2010-02-23\n */\npublic class CarServiceJDKDynamicProxy implements InvocationHandler {\n\n	private CarService carServiceTarget;//被代理的目标类\n	\n	/**\n	 * 在构造函数中设置被代理的目标类\n	 * 也可以使用set方法设置被代理的目标类\n	 * @param carServiceTarget\n	 */\n	public CarServiceJDKDynamicProxy(CarService carServiceTarget){\n		this.carServiceTarget = carServiceTarget;\n	}\n	\n	public Object invoke(Object proxy, Method method, Object[] args)\n			throws Throwable {\n		System.out.println(&quot;before excute target object...&quot;);\n		Object object = method.invoke(this.carServiceTarget,args);\n		System.out.println(&quot;after excute target object...&quot;);\n		return object;\n	}\n}\n</pre>\n<p><br>\n<br>\n&nbsp;</p>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\">Java代码 <a target=\"_blank\" title=\"收藏这段代码\" href=\"\"><img class=\"spinner\" src=\"http://fruitking.iteye.com/images/spinner.gif\" alt=\"\" style=\"\"></a></div>\n</div>\n<ol class=\"dp-j\">\n<li><span><span class=\"keyword\">package</span><span>&nbsp;com.fruitking.proxy.jdkdproxy;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class=\"keyword\">import</span><span>&nbsp;java.lang.reflect.Proxy;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class=\"keyword\">import</span><span>&nbsp;com.fruitking.proxy.CarService;&nbsp;&nbsp;</span></span></li><li><span><span class=\"keyword\">import</span><span>&nbsp;com.fruitking.proxy.CarServiceImpl;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">class</span><span>&nbsp;TestJDKDynamicProxy&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">/**</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;JDK中动态代理技术中的代理调用</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;args</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">static</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;main(String[]&nbsp;args)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CarService&nbsp;carServiceTarget&nbsp;=&nbsp;<span class=\"keyword\">new</span><span>&nbsp;CarServiceImpl();&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CarServiceJDKDynamicProxy&nbsp;carServiceJDKDynamicProxyTarget&nbsp;=&nbsp;<span class=\"keyword\">new</span><span>&nbsp;CarServiceJDKDynamicProxy(carServiceTarget);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CarService&nbsp;carServiceProxy&nbsp;=&nbsp;(CarService)Proxy.newProxyInstance(carServiceTarget.getClass().getClassLoader(),<span class=\"keyword\">new</span><span>&nbsp;Class[]{CarService.</span><span class=\"keyword\">class</span><span>},&nbsp;carServiceJDKDynamicProxyTarget);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">//执行代理类的方法</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">//作用一：间接执行被代理类的方法，</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">//作用二：代理类可以在被代理类方法执行前后做一些额外操作</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">//总结：不更改原有类的功能和程序代码情况下，实现额外的功能能</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">//缺点：要为每个被代理类编写一个代理类，且具有相同的接口</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carServiceProxy.start();&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;carServiceProxy.getLoadAmount();&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;driver&nbsp;=&nbsp;carServiceProxy.setDriver(<span class=\"string\">&quot;fruitking&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(driver);&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>}&nbsp;&nbsp;</span></li></ol>\n</div>\n<pre title=\"代理模式，JDK动态代理，SpringAOP来龙去脉\" class=\"java\" style=\"display: none;\" name=\"code\" codeable_id=\"601106\" codeable_type=\"Blog\" source_url=\"http://fruitking.iteye.com/blog/601106\" pre_index=\"5\">package com.fruitking.proxy.jdkdproxy;\n\nimport java.lang.reflect.Proxy;\n\nimport com.fruitking.proxy.CarService;\nimport com.fruitking.proxy.CarServiceImpl;\n\npublic class TestJDKDynamicProxy {\n\n	/**\n	 * JDK中动态代理技术中的代理调用\n	 * @param args\n	 */\n	public static void main(String[] args) {\n		CarService carServiceTarget = new CarServiceImpl();\n		CarServiceJDKDynamicProxy carServiceJDKDynamicProxyTarget = new CarServiceJDKDynamicProxy(carServiceTarget);\n		CarService carServiceProxy = (CarService)Proxy.newProxyInstance(carServiceTarget.getClass().getClassLoader(),new Class[]{CarService.class}, carServiceJDKDynamicProxyTarget);\n		//执行代理类的方法\n		//作用一：间接执行被代理类的方法，\n		//作用二：代理类可以在被代理类方法执行前后做一些额外操作\n		//总结：不更改原有类的功能和程序代码情况下，实现额外的功能能\n		//缺点：要为每个被代理类编写一个代理类，且具有相同的接口\n		carServiceProxy.start();\n		carServiceProxy.getLoadAmount();\n		String driver = carServiceProxy.setDriver(&quot;fruitking&quot;);\n		System.out.println(driver);\n	}\n\n}\n</pre>\n<p><br>\n<br>\n最后来看看spring的AOP机制的实现 <br>\n</p>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\">Java代码 <a target=\"_blank\" title=\"收藏这段代码\" href=\"\"><img class=\"spinner\" src=\"http://fruitking.iteye.com/images/spinner.gif\" alt=\"\" style=\"\"></a></div>\n</div>\n<ol class=\"dp-j\">\n<li><span><span class=\"keyword\">package</span><span>&nbsp;com.fruitking.proxy.springaop;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class=\"keyword\">import</span><span>&nbsp;java.lang.reflect.Method;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class=\"keyword\">import</span><span>&nbsp;org.springframework.aop.MethodBeforeAdvice;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class=\"comment\">/**</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*&nbsp;使用spring的AOP机制的事前通知接口实现</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*&nbsp;@author&nbsp;fruitking</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*&nbsp;@since&nbsp;2010-02-23</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">class</span><span>&nbsp;CarServiceBeforeAdvice&nbsp;</span><span class=\"keyword\">implements</span><span>&nbsp;MethodBeforeAdvice{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;before(Method&nbsp;method,&nbsp;Object[]&nbsp;args,&nbsp;Object&nbsp;target)</span><span class=\"keyword\">throws</span><span>&nbsp;Throwable&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;before&nbsp;excute&nbsp;target&nbsp;object...&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;methodName&nbsp;=&nbsp;method.getName();&nbsp;&nbsp;<span class=\"comment\">//得到方法名&nbsp;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;targetClassName&nbsp;=&nbsp;target.getClass().getName();<span class=\"comment\">//得到调用类名</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(targetClassName&#43;<span class=\"string\">&quot;.&quot;</span><span>&#43;methodName&#43;</span><span class=\"string\">&quot;()&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>}&nbsp;&nbsp;</span></li></ol>\n</div>\n<pre title=\"代理模式，JDK动态代理，SpringAOP来龙去脉\" class=\"java\" style=\"display: none;\" name=\"code\" codeable_id=\"601106\" codeable_type=\"Blog\" source_url=\"http://fruitking.iteye.com/blog/601106\" pre_index=\"6\">package com.fruitking.proxy.springaop;\n\nimport java.lang.reflect.Method;\n\nimport org.springframework.aop.MethodBeforeAdvice;\n\n/**\n * 使用spring的AOP机制的事前通知接口实现\n * @author fruitking\n * @since 2010-02-23\n */\npublic class CarServiceBeforeAdvice implements MethodBeforeAdvice{\n	\n	public void before(Method method, Object[] args, Object target)throws Throwable {\n		System.out.println(&quot;before excute target object...&quot;);\n		String methodName = method.getName();  //得到方法名 \n		String targetClassName = target.getClass().getName();//得到调用类名\n		System.out.println(targetClassName+&quot;.&quot;+methodName+&quot;()&quot;);\n	}\n}\n</pre>\n<p><br>\n&nbsp;</p>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\">Java代码 <a target=\"_blank\" title=\"收藏这段代码\" href=\"\"><img class=\"spinner\" src=\"http://fruitking.iteye.com/images/spinner.gif\" alt=\"\" style=\"\"></a></div>\n</div>\n<ol class=\"dp-j\">\n<li><span><span class=\"keyword\">package</span><span>&nbsp;com.fruitking.proxy.springaop;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class=\"keyword\">import</span><span>&nbsp;java.lang.reflect.Method;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class=\"keyword\">import</span><span>&nbsp;org.springframework.aop.AfterReturningAdvice;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class=\"comment\">/**</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*&nbsp;使用spring的AOP机制的事前通知接口实现</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*&nbsp;@author&nbsp;fruitking</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*&nbsp;@since&nbsp;2010-02-23</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">class</span><span>&nbsp;CarServiceAfterAdvice&nbsp;</span><span class=\"keyword\">implements</span><span>&nbsp;AfterReturningAdvice&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;afterReturning(Object&nbsp;returnValue,Method&nbsp;method,Object[]&nbsp;args,Object&nbsp;target)</span><span class=\"keyword\">throws</span><span>&nbsp;Throwable{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;methodName&nbsp;=&nbsp;method.getName();&nbsp;&nbsp;<span class=\"comment\">//得到方法名&nbsp;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;targetClassName&nbsp;=&nbsp;target.getClass().getName();<span class=\"comment\">//得到调用类名</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(targetClassName&#43;<span class=\"string\">&quot;.&quot;</span><span>&#43;methodName&#43;</span><span class=\"string\">&quot;()&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;after&nbsp;excute&nbsp;target&nbsp;object...&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>}&nbsp;&nbsp;</span></li></ol>\n</div>\n<pre title=\"代理模式，JDK动态代理，SpringAOP来龙去脉\" class=\"java\" style=\"display: none;\" name=\"code\" codeable_id=\"601106\" codeable_type=\"Blog\" source_url=\"http://fruitking.iteye.com/blog/601106\" pre_index=\"7\">package com.fruitking.proxy.springaop;\n\nimport java.lang.reflect.Method;\n\nimport org.springframework.aop.AfterReturningAdvice;\n\n/**\n * 使用spring的AOP机制的事前通知接口实现\n * @author fruitking\n * @since 2010-02-23\n */\npublic class CarServiceAfterAdvice implements AfterReturningAdvice {\n\n	public void afterReturning(Object returnValue,Method method,Object[] args,Object target)throws Throwable{\n		String methodName = method.getName();  //得到方法名 \n		String targetClassName = target.getClass().getName();//得到调用类名\n		System.out.println(targetClassName+&quot;.&quot;+methodName+&quot;()&quot;);\n		System.out.println(&quot;after excute target object...&quot;);\n	}\n}\n</pre>\n<p><br>\n&nbsp;</p>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\">Java代码 <a target=\"_blank\" title=\"收藏这段代码\" href=\"\"><img class=\"spinner\" src=\"http://fruitking.iteye.com/images/spinner.gif\" alt=\"\" style=\"\"></a></div>\n</div>\n<ol class=\"dp-j\">\n<li><span><span class=\"keyword\">package</span><span>&nbsp;com.fruitking.proxy.springaop;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class=\"keyword\">import</span><span>&nbsp;org.aopalliance.intercept.MethodInterceptor;&nbsp;&nbsp;</span></span></li><li><span><span class=\"keyword\">import</span><span>&nbsp;org.aopalliance.intercept.MethodInvocation;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class=\"comment\">/**</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*&nbsp;使用spring的AOP机制的事前通知接口实现</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*&nbsp;@author&nbsp;fruitking</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*&nbsp;@since&nbsp;2010-02-23</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">class</span><span>&nbsp;CarServiceAroundAdvice&nbsp;</span><span class=\"keyword\">implements</span><span>&nbsp;MethodInterceptor&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;Object&nbsp;invoke(MethodInvocation&nbsp;invocation)&nbsp;</span><span class=\"keyword\">throws</span><span>&nbsp;Throwable&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;before&nbsp;around&nbsp;excute&nbsp;target&nbsp;object...&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;methodName&nbsp;=&nbsp;invocation.getMethod().getName();&nbsp;&nbsp;<span class=\"comment\">//得到方法名&nbsp;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String&nbsp;targetClassName&nbsp;=&nbsp;invocation.getClass().getName();<span class=\"comment\">//得到调用类名</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(targetClassName&#43;<span class=\"string\">&quot;.&quot;</span><span>&#43;methodName&#43;</span><span class=\"string\">&quot;()&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Object&nbsp;result&nbsp;=&nbsp;invocation.proceed();&nbsp;<span class=\"comment\">//调用横切点，即真实操作</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;after&nbsp;around&nbsp;excute&nbsp;target&nbsp;object...&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">return</span><span>&nbsp;result;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>}&nbsp;&nbsp;</span></li></ol>\n</div>\n<pre title=\"代理模式，JDK动态代理，SpringAOP来龙去脉\" class=\"java\" style=\"display: none;\" name=\"code\" codeable_id=\"601106\" codeable_type=\"Blog\" source_url=\"http://fruitking.iteye.com/blog/601106\" pre_index=\"8\">package com.fruitking.proxy.springaop;\n\nimport org.aopalliance.intercept.MethodInterceptor;\nimport org.aopalliance.intercept.MethodInvocation;\n\n/**\n * 使用spring的AOP机制的事前通知接口实现\n * @author fruitking\n * @since 2010-02-23\n */\npublic class CarServiceAroundAdvice implements MethodInterceptor {\n	\n	public Object invoke(MethodInvocation invocation) throws Throwable {\n		System.out.println(&quot;before around excute target object...&quot;);\n		String methodName = invocation.getMethod().getName();  //得到方法名 \n		String targetClassName = invocation.getClass().getName();//得到调用类名\n		System.out.println(targetClassName+&quot;.&quot;+methodName+&quot;()&quot;);\n		Object result = invocation.proceed(); //调用横切点，即真实操作\n		System.out.println(&quot;after around excute target object...&quot;);\n		return result;\n	}\n}\n</pre>\n<p><br>\n&nbsp;</p>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\">Java代码 <a target=\"_blank\" title=\"收藏这段代码\" href=\"\"><img class=\"spinner\" src=\"http://fruitking.iteye.com/images/spinner.gif\" alt=\"\" style=\"\"></a></div>\n</div>\n<ol class=\"dp-j\">\n<li><span><span class=\"keyword\">package</span><span>&nbsp;com.fruitking.proxy.springaop;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class=\"keyword\">import</span><span>&nbsp;org.springframework.aop.ThrowsAdvice;&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;</span></li><li><span><span class=\"comment\">/**</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*&nbsp;使用spring的AOP机制的事前通知接口实现</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*&nbsp;@author&nbsp;fruitking</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*&nbsp;@since&nbsp;2010-02-23</span>&nbsp;</span></li><li><span><span class=\"comment\">&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">class</span><span>&nbsp;CarServiceThrowsAdvice&nbsp;</span><span class=\"keyword\">implements</span><span>&nbsp;ThrowsAdvice&nbsp;{&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;afterThrowing(NullPointerException&nbsp;e){</span><span class=\"comment\">//可以定义多个方法，只要传入的参数是不同异常</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.print(<span class=\"string\">&quot;not&nbsp;load&nbsp;anything&nbsp;goods!&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;afterThrowing(IllegalArgumentException&nbsp;e){</span><span class=\"comment\">//可以定义多个方法，只要传入的参数是不同异常</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.print(<span class=\"string\">&quot;load&nbsp;a&nbsp;tiger,it\'s&nbsp;very&nbsp;much&nbsp;dangerous!&quot;</span><span>);&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;</span></li><li><span>}&nbsp;&nbsp;</span></li></ol>\n</div>\n<pre title=\"代理模式，JDK动态代理，SpringAOP来龙去脉\" class=\"java\" style=\"display: none;\" name=\"code\" codeable_id=\"601106\" codeable_type=\"Blog\" source_url=\"http://fruitking.iteye.com/blog/601106\" pre_index=\"9\">package com.fruitking.proxy.springaop;\n\nimport org.springframework.aop.ThrowsAdvice;\n\n/**\n * 使用spring的AOP机制的事前通知接口实现\n * @author fruitking\n * @since 2010-02-23\n */\npublic class CarServiceThrowsAdvice implements ThrowsAdvice {\n	\n	public void afterThrowing(NullPointerException e){//可以定义多个方法，只要传入的参数是不同异常\n		System.out.print(&quot;not load anything goods!&quot;);\n	}\n	\n	public void afterThrowing(IllegalArgumentException e){//可以定义多个方法，只要传入的参数是不同异常\n		System.out.print(&quot;load a tiger,it&#39;s very much dangerous!&quot;);\n	}\n\n}\n</pre>\n<p><br>\nspring的配置文件，把这些使用IOC处理 <br>\n</p>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\">Java代码 <a target=\"_blank\" title=\"收藏这段代码\" href=\"\"><img class=\"spinner\" src=\"http://fruitking.iteye.com/images/spinner.gif\" alt=\"\" style=\"\"></a></div>\n</div>\n<ol class=\"dp-j\">\n<li><span><span>&lt;?xml&nbsp;version=</span><span class=\"string\">&quot;1.0&quot;</span><span>&nbsp;encoding=</span><span class=\"string\">&quot;UTF-8&quot;</span><span>?&gt;&nbsp;&nbsp;</span></span></li><li><span>&lt;!DOCTYPE&nbsp;beans&nbsp;PUBLIC&nbsp;<span class=\"string\">&quot;-//SPRING//DTD&nbsp;BEAN&nbsp;2.0//EN&quot;</span><span>&nbsp;</span><span class=\"string\">&quot;http://www.springframework.org/dtd/spring-beans-2.0.dtd&quot;</span><span>&gt;&nbsp;&nbsp;</span></span></li><li><span>&lt;beans&gt;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&lt;bean&nbsp;id=<span class=\"string\">&quot;carServiceTarget&quot;</span><span>&nbsp;</span><span class=\"keyword\">class</span><span>=</span><span class=\"string\">&quot;com.fruitking.proxy.CarServiceImpl&quot;</span><sp', '2016-04-16 01:21:20', '0');
INSERT INTO `article` VALUES ('10086', '10003', 'Spring学习笔记（18）-----------@ASpectJ学习起步', '\n<p><span style=\"font-size:18px;\">明天就要考试了，提前复习一下关于@AspectJ 的内容，尤其是这里还是重点，所以，在网上找了一点不错的学习资料，来与大家分享一下，同时也是为了学习。</span></p><p><span style=\"font-size:18px;\"></span>&nbsp;</p><p><span style=\"font-size:18px;\">从Spring 2.0开始，可以使用基于schema及@AspectJ的方式来实现AOP，本文以一个简单的实例介绍了如何以@AspectJ方式在Spring中实现AOP。由于@Aspect是基于注解的，因此要求支持注解的5.0版本以上的JDK。</span></p><p><span style=\"font-size:18px;\">&nbsp;环境要求：<br>&nbsp;&nbsp;&nbsp; 1. Web应用<br>&nbsp;&nbsp;&nbsp; 2. 有一个专门提供系统服务的Service层</span></p><p><span style=\"font-size:18px;\">&nbsp;我们的目标是，如果用户调用Service层中任一方法，都在其插入一个记录信息的功能。</span></p><p><span style=\"font-size:18px;\">&nbsp;1. 一个最简单的AOP</span></p><p><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp; 共有2步。</span></p><p><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp; 1.1 定义一个Aspect</span></p><p>&nbsp;</p><span style=\"font-size:18px;\"></span><p>&nbsp;&nbsp;&nbsp; </p><pre class=\"java\" name=\"code\">package com.sarkuya.aop.aspect;\n    import org.aspectj.lang.annotation.Aspect;\n    import org.aspectj.lang.annotation.Before;\n  @Aspect\n     public class SampleAspect {\n  @Before(&quot;execution(* com.sarkuya.service..*.*(..))&quot;)\n        public void doBeforeInServiceLayer() {\n          System.out.println(&quot;=====================================&quot;);\n          System.out.println(&quot;Aop: do before in Service layer&quot;);\n          System.out.println(&quot;=====================================&quot;);\n       }\n     }</pre><p>&nbsp;</p><p><span style=\"font-size:18px;\">&nbsp;第4行，必须使用@Aspect在类名之前注解。</span></p><p><span style=\"font-size:18px;\">&nbsp;第6行，当用户调用com.sarkuya.service包中任一类的任一方法，在调用前，Spring将自动执行下面的doBeforeInServiceLayer()方法，此方法只是简单地打印一些信息。</span></p><p><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp; 1.2 在Spring配置文件applicationContext.xml中配置</span></p><p><span style=\"font-size:18px;\"></span><p>&nbsp;&nbsp;&nbsp;&nbsp;</p><pre class=\"html\" name=\"code\"> &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;   xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n        xmlns:p=&quot;http://www.springframework.org/schema/p&quot; xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;\n        xsi:schemaLocation=&quot;\n            <a target=\"_blank\" href=\"http://www.springframework.org/schema/beanshttp://www.springframework.org/schema/beans/spring-beans-2.5.xsd\">http://www.springframework.org/schema/beanshttp://www.springframework.org/schema/beans/spring-beans-2.5.xsd</a>\n            http://www.springframework.org/schema/aophttp://www.springframework.org/schema/aop/spring-aop-2.5.xsd&quot;&gt;\n\n         <span style=\"color:#ff0000;\"><strong>&lt;aop:aspectj-autoproxy /&gt;</strong>\n</span>      &lt;bean class=&quot;com.sarkuya.aop.aspect.SampleAspect&quot; /&gt;\n         &lt;!-- ================ YOUR CONTENTS GOES BELOW =================== --&gt;\n     &lt;/bean&gt;\n</pre><p><br>其中&lt;aop：aspectj-autoproxy/&gt;是必不可少的，通过这个，才可以自动代理！将增强切入到切点</p><p><p><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp; 就这么简单。</span></p><p><span style=\"font-size:18px;\">&nbsp;2. 将Pointcut及Advice分开</span></p><p><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp; 上面的Aspect中混杂了Pointcut及Advice，因此最好将其分开。共有3步。</span></p><p><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp; 2.1 定义Pointcut（切点）</span></p><span style=\"font-size:18px;\"></span><pre class=\"java\" name=\"code\">  package com.sarkuya.aop.aspect;\n  import org.aspectj.lang.annotation.Aspect;\n  import org.aspectj.lang.annotation.Pointcut;\n  @Aspect\n  public class SampleAspect {\n      @Pointcut(&quot;execution(* com.sarkuya.service..*.*(..))&quot;)\n      public void inServiceLayer() {\n      }\n }</pre><p>&nbsp;</p><p>&nbsp;</p><p><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp; Pointcut是植入Advice的触发条件。每个Pointcut的定义包括2部分，一是表达式，如第6行；二是方法签名，如第7行。方法签名必须是public及void型。可以将Pointcut中的方法看作是一个被Advice引用的助记符，因为表达式不直观，因此我们可以通过方法签名的方式为此表达式命名。因此Pointcut中的方法只需要方法签名，而不需要在方法体内编写实际代码。</span></p><p><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp; 2.2 定义Advice</span></p><span style=\"font-size:18px;\"></span><pre class=\"java\" name=\"code\">  package com.sarkuya.aop.advice;\n  import org.aspectj.lang.annotation.Aspect;\n  import org.aspectj.lang.annotation.Before;\n  @Aspect\n  public class SampleAdvice {\n      @Before(&quot;com.sarkuya.aop.aspect.SampleAspect.inServiceLayer()&quot;)\n      public void logInfo() {\n         System.out.println(&quot;=====================================&quot;);\n          System.out.println(&quot;Aop: do before in service layer&quot;);\n         System.out.println(&quot;=====================================&quot;);\n     }\n </pre><p>&nbsp;</p><pre class=\"java\" name=\"code\"><span style=\"font-size:18px;\">第4行，对于Advice，也只能使用@Aspect来注解。</span></pre><p><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp; 第6行，与第1.1节中第6行不同，这次不是直接使用Pointcut的表达式，而是使用了Pointcut中的方法签名。</span></p><p><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp; 单独定义Pointcut的好处是，一是通过使用有意义的方法名，而不是难读的Pointcut表达式，使代码更加直观；二是Pointcut可以实现共享，被多个Advice直接调用。若有多个Advice调用某个Pointcut，而这个Pointcut的表达式在将来有改变时，只需修改一个地方，维护更加方便。</span></p><p><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp; 第7行，我们将Advice的方法法改为logInfo()，以更加明确此Advice的作用。</span></p><p><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp; 2.3 配置文件</span></p><span style=\"font-size:18px;\"></span><p>&nbsp;</p><pre class=\"html\" name=\"code\">  &lt;aop:aspectj-autoproxy /&gt;\n  &lt;bean class=&quot;com.sarkuya.aop.advice.SampleAdvice&quot; /&gt;</pre><p>&nbsp;</p><p><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp; 只需配置SampleAdvice，无需配置SampleAspect。</span></p><p><span style=\"font-size:18px;\">&nbsp;3. 重构：明确Pointcut职责</span></p><p><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp; 对于SampleAspect来说，其主要职责是定义Pointcut，可以在此类中同时定义多个Pointcuts。但其类名反映不出这个特点，因此，应将其重构以明确其职责。</span></p><span style=\"font-size:18px;\"></span><p>&nbsp;</p><pre class=\"java\" name=\"code\">  package com.sarkuya.aop.pointcut;\n    import org.aspectj.lang.annotation.Aspect;\n    import org.aspectj.lang.annotation.Pointcut;\n    @Aspect\n    public class PointcutsDefinition {\n        @Pointcut(&quot;execution(* com.sarkuya.service..*.*(..))&quot;)\n        public void inServiceLayer() {\n        }\n    }</pre><p>&nbsp;</p><p><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp; 将SampleAspect重命名为PointcutsDefinition，并移到com.sarkuya.aop.pointcut包中。</span></p><p><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp; 对于SampleAdvice来说，只需改变@Before()的注解，指向<br>&nbsp;&nbsp;&nbsp; @Before(&quot;com.sarkuya.aop.pointcut.PointcutsDefinition.inServiceLayer()&quot;)</span></p><p><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp; 而Spring配置文件保持不变。</span></p><p><span style=\"font-size:18px;\">&nbsp;小结：<br>&nbsp;&nbsp;&nbsp; 我们先从一个最简单的Aspect实例开始，了解AOP的作用及最基本的要求，再重构为更有意义的代码，明确了AOP中的Pointcut及Advice的概念，有助于我们构建更复杂的Aspect。</span></p><p>&nbsp;</p><p><span style=\"font-size:18px;\">本文借鉴：</span><a target=\"_blank\" href=\"http://blog.csdn.net/sarkuya/article/details/3862987\" target=\"_blank\"><span style=\"font-size:18px;\">http://blog.csdn.net/sarkuya/article/details/3862987</span></a></p><p><span style=\"font-size:18px;\"></span>&nbsp;</p><p><span style=\"font-size:18px;\"></span>&nbsp;</p>   \n', '2016-04-16 01:21:20', '0');
INSERT INTO `article` VALUES ('10087', '10003', 'Spring学习笔记（16）--------------SpringAOP总结（1）', '\n<div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><span style=\"font-size:24px;color:#ff0000;\">1.AOP</span></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp;</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">AOP是Aspect-Oriented &nbsp;Programming （面向方面编程或面向切面）的简称。</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><br style=\"background-color: inherit;\"></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">spring &nbsp;AOP 使用了两种代理机制：</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1.基于JDK的动态代理。</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 2.基于CGLib的动态代理。</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">这两种动态代理技术都是在运行期织入增强，所以我们不需要装备特殊的编译器或类装载器就可以使用AOP功能。</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">JDK的动态代理，目标类必须实现接口（InvocationHandler）。</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">CGLib动态代理，则不对目标类做任何限制，它通过动态生成目标类子类的方式提供代理。</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><br style=\"background-color: inherit;\"></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">JDK 和 CGLib两个动态代理实现区别：</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">JDK在创建代理对象时性能高于CGLib，而生成代理对象的运行性能却比CGLib低，如果是singeton的代理，推荐使用CGLib动态代理。</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><br style=\"background-color: inherit;\"></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">spring 只能在方法级别上织入增强，spring提供了4种类型的方法增强，分别是前置增强、后置增强、环绕增强和异常抛出增强，此外还有一种特殊的引介增强，引介增强是类级别的，它为目标类织入新的接口实现</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><br style=\"background-color: inherit;\"></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><br style=\"background-color: inherit;\"></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">Spring AOP通过Pointcut（切点）指定在那些类的那些方法上织入横切逻辑，通过Advice（增强）描述横切逻辑和方法的具体织入点（方法前、方法后、方法两端等）。Spring 通过Advisor（切面）将Poincut 和advice 两者组装起来。有了Advisor的信息，spring就可以利用JDK或CGLib的动态代理技术采用统一的方式为目标Bean创建织入切面的代理对象了。</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp;</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><span style=\"font-size:24px;color:#ff0000;\">2.增强</span></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp;&nbsp;&nbsp; Advice (通知)定义在连接点做什么，为切面增强提供织入接口。在spring AOP中，它主要描述Spring AOP围绕方法调用而注入的切面行为。<div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><br></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; 具体接口定义在：<br style=\"background-color: inherit;\"></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<img alt=\"\" src=\"http://img.blog.csdn.net/20140411105718656?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaGVoZXhpYW95b3U=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><br></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp; &nbsp; &nbsp; 接口的实现：<br style=\"background-color: inherit;\"></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><img alt=\"\" src=\"http://img.blog.csdn.net/20140411105751828?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaGVoZXhpYW95b3U=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp;</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><span style=\"font-size:24px;color:#ff0000;\">3.切点</span></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">Pointcut (切点) 决定advice 通知应该作用于那个连接点，也就是说通过Pointcut来定义需要增强方法的集合，这些集合的选取可以按照一定的规则来完成。</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><br style=\"background-color: inherit;\"></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在Pointcut的基本接口定义中可以看到，需要返回一个MethodMatcher，对于Pointde 匹配判断功能，具体是由这个返回的MethodMatcher来完成的，也就是说，由这个MethodMatcher来判断是否需要对当前方法调用进行增强，或者是否需要对当前调用方法应用配置好的Advice通知。</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><br></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><img alt=\"\" src=\"http://img.blog.csdn.net/20140411105904375?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaGVoZXhpYW95b3U=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"><br></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><u><span style=\"font-size:24px;color:#ff0000;\">4.Advisor 通知器</span></u></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><u><span style=\"font-size:24px;color:#ff0000;\"></span></u>&nbsp;</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp; 完成对目标方法的切面设计（Advice）和关注点的设计（Pointcut）以后，需要一个对象把他们结核起来，完成这个作用的就是Advisor（通知器）。<div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><br style=\"background-color: inherit;\"></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; 通过Advisor，可以定义应该使用那个通知并在哪个关注点使用它，也就是说Advisor，把Advice和Pointcut结合起来，这个结合为使用IoC容器配置AOP应用，或者说即开即用地使用AOP基础设施，提供了便利。</div></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp;</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><span style=\"font-size:24px;color:#ff0000;\">5.AOP的增强类型</span></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><span style=\"font-size:24px;color:#ff0000;\"></span>&nbsp;</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">spring aop 增强类型支持5种：</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><ul style=\"background-color: inherit;\"><li style=\"background-color: inherit;\">前置增强</li></ul><div style=\"background-color: inherit;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;org.springframework.aop.BeforeAdvice &nbsp;代表前置增强，因为spring只支持方法级的增强，所以MethodBeforeAdvice 是目前可用前置增强，表示在目标方法执行前实施增强。</div><ul style=\"background-color: inherit;\"><li style=\"background-color: inherit;\">后置增强</li></ul><div style=\"background-color: inherit;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;org.springframework.aop.AfterAdvice 代表后增强，表示目标方法在执行后实施增强&nbsp;</div><ul style=\"background-color: inherit;\"><li style=\"background-color: inherit;\">环绕增强</li></ul><div style=\"background-color: inherit;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; org.springframework.aop.MethodInterceptor 代表环绕增强，表示目标方法执行前后实施增强</div><ul style=\"background-color: inherit;\"><li style=\"background-color: inherit;\">异常抛出增强</li></ul><div style=\"background-color: inherit;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; org.springframework.aop.ThrowsAdvice 代表抛出异常增强，表示目标方法抛出异常后实施增强</div><ul style=\"background-color: inherit;\"><li style=\"background-color: inherit;\">引介增强</li></ul><div style=\"background-color: inherit;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; org.springframework.aop.IntroductionInterceptor 代表引介增强，表示在目标类中添加一些新的方法和属性</div></div></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><span style=\"font-size:24px;color:#ff0000;\"></span>&nbsp;</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><span style=\"font-size:24px;color:#ff0000;\">6.前置增强的实现</span></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">1.创建一个接口类</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><pre class=\"java\" name=\"code\">public interface Waiter {\n\n\n void greetTo(String name);\n\n void serveTo(String name);\n\n}</pre><br></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">2.创建接口实现类</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><pre class=\"java\" name=\"code\">public class NaiveWaiter implements Waiter {\n\n @Override\n\n public void greetTo(String name) {\n\n  System.out.println(&quot;greet to &quot;+name+&quot;...&quot;);\n\n }\n\n\n @Override\n\n public void serveTo(String name) {\n\n  System.out.println(&quot;serving &quot;+name+&quot;...&quot;);\n\n }\n\n}</pre><br></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">4.实现前置增强接口</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><pre class=\"java\" name=\"code\">public class GreetingBeforAdvice implements MethodBeforeAdvice {\n\n /**\n\n  * method 为目标类的方法\n\n  *\n\n  * args 为目标类的入参\n\n  *\n\n  * obj 为目标类的实例\n\n  */\n\n @Override\n\n public void before(Method method, Object[] args, Object target)\n\n   throws Throwable {\n\n  String clientName = (String) args[0];\n\n  System.out.println(&quot;How are you! Mr &quot; + clientName + &quot;.&quot;);\n\n  // System.out.println(target.getClass().getName());\n\n }\n\n}</pre><br><br style=\"background-color: inherit;\">5.advisor 上场</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><pre class=\"java\" name=\"code\">public class TestBeforAdvice {\n\n \n\n public static void main(String[] args) {\n\n  Waiter target=new NaiveWaiter();\n\n \n\n  BeforeAdvice beforeAdvice=new GreetingBeforAdvice();\n\n \n\n  //spring 提供的代理工厂\n\n  ProxyFactory pf=new ProxyFactory();\n\n  //设置代理目标\n\n  pf.setTarget(target);\n\n  //为代理目标添加增强\n\n  pf.addAdvice(beforeAdvice);\n\n  //生成代理实例\n\n  Waiter waiter=(Waiter) pf.getProxy();\n\n  waiter.greetTo(&quot;John&quot;);\n\n  waiter.serveTo(&quot;Tom&quot;);\n\n }\n\n}</pre><br></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">main方法运行结果：</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><img alt=\"\" src=\"http://img.blog.csdn.net/20140411110458921?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaGVoZXhpYW95b3U=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></div></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp;</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><u><span style=\"font-size:24px;color:#ff0000;\">7.JDK的动态代理特性</span></u></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><u><span style=\"font-size:24px;color:#ff0000;\"></span></u>&nbsp;</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">在JDK1.3以上版本，实现了动态代理模式。通过JDK的动态代理特性，可以为任意java对象创建代理对象，对于具体使用来说，这个特性是通过java Reflection API 来完成的。<div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><br style=\"background-color: inherit;\"></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><span style=\"background-color: inherit;\"><span style=\"color:#ff00;background-color: inherit;\">Proxy原理：</span></span></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; Proxy的调用过程中，如果客户（Client）调用Proxy的request方法，会在调用目标对象的request方法的前后调用一系列的处理，而这些一系列的处理相对于目标对象来说是透明的，目标对象对这些处理可以毫不知情，这就是Proxy模式。<br style=\"background-color: inherit;\"></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><br style=\"background-color: inherit;\"></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; JDK中的proxy代理需要实现InvocationHandler接口。<br style=\"background-color: inherit;\"></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;<img alt=\"\" src=\"http://img.blog.csdn.net/20140411110812015?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaGVoZXhpYW95b3U=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; 三个参数解析：<br style=\"background-color: inherit;\"></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; 1.代理对象实例<br style=\"background-color: inherit;\"></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; 2.method方法对象，代表的是当前Proxy被调用的方法<br style=\"background-color: inherit;\"></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; 3.被调用的方法中的参数<br style=\"background-color: inherit;\"><br style=\"background-color: inherit;\"></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><span style=\"background-color: inherit;\">jdk动态代理实现，实现InvocationHandler&nbsp;</span>&nbsp;接口，代码如下：</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><br style=\"background-color: inherit;\"></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">jdk的动态代理是基于接口模式下的代理。</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;步骤：</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp; 1.定义接口，如下实例：<br style=\"background-color: inherit;\"></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <pre class=\"java\" name=\"code\">  public interface UserManagement {\n\n     void addUser(String name,int age);\n\n     String deleteUser(String...str);\n\n  }</pre><br></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp;&nbsp;2.接口类的实现。如下代码:<br style=\"background-color: inherit;\"></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<pre class=\"java\" name=\"code\"> import com.yc.jdk.proxy.UserManagement;\n\n    public class UserManagementImpl implements UserManagement {\n\n        public void addUser(String name, int age) {\n          System.out.println(&quot;add&quot;);\n\n        }\n\n        public String deleteUser(String... str) {\n\n          System.out.println(&quot;delete&quot;);\n\n          return &quot;delete&quot;;\n\n        }\n\n}\n\n3.继承jdk中的代理类InvocationHandler\n\nimport java.lang.reflect.InvocationHandler;\n\nimport java.lang.reflect.Method;\n\nimport java.lang.reflect.Proxy;\n\npublic class CheckSecurity implements InvocationHandler {\n\n\n//声明目标类\n\nprivate Object targetObject;\n\n/**\n* 传入要代理的对象\n* \n* @param targetObject\n\n* @return object\n*/\npublic Object CheckSecurity(Object targetObject) {\n\nthis.targetObject = targetObject;\nreturn Proxy.newProxyInstance(this.targetObject.getClass().getClassLoader(),\n                   this.targetObject.getClass().getInterfaces(), this);\n\n}\n\n//模拟 环绕代理方法\n\npublic Object invoke(Object proxy, Method method, Object[] args)throws Throwable {\n        checkseiurity();\n        Object chckObject = null;\n        // 获取方法名称\n        p(&quot;method name value &quot;, method.getName());\n        // 取得此方法是不是可变参数\n        p(&quot;method is var args &quot;, method.isVarArgs());\n        System.out.println(args.length);\n        try {\n           chckObject = method.invoke(this.targetObject, args);\n        } catch (RuntimeException e) {\n            e.printStackTrace();\n        }\n        checkseiurity();\n        return chckObject;\n}\n</pre><pre class=\"java\" name=\"code\">&nbsp;</pre><pre class=\"java\" name=\"code\">private void checkseiurity() {\n     System.out.println(&quot;--------------check----------------&quot;);\n }\n</pre><pre class=\"java\" name=\"code\">&nbsp;</pre><pre class=\"java\" name=\"code\">public void p(Object... object) {\n\n  for (int i = 0; i &lt; object.length; i++) {\n\n  System.out.print(object[i].toString());\n\n  }\n// 产生换行\n   System.out.println();\n }\n}\n\n4.测试jdk动态代理\n\n\nimport java.lang.reflect.Proxy;\nimport com.yc.jdk.proxy.impl.UserManagementImpl;\npublic class JdkPorxy {\n\n  public static void main(String[] args) throws Exception {\n\n   CheckSecurity checkSecurity = new CheckSecurity();\n   UserManagement management = (UserManagement) checkSecurity.CheckSecurity(new UserManagementImpl());\n   p(Proxy.isProxyClass(UserManagement.class));\n // management.addUser(&quot;张三&quot;, 12);\n   management.deleteUser(&quot;张三&quot;, &quot;李四&quot;, &quot;王五&quot;, &quot;赵六&quot;);\n\n  }\n   public static void p(Object object) {\n\n    System.out.println(object.toString());\n\n  }\n\n}</pre><br></div><div style=\"background-color: inherit;\"><br style=\"background-color: inherit;\"></div><hr style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><span style=\"font-family:微软雅黑;font-size:14px;\">运行结果：</span><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><div style=\"background-color: inherit;\">false</div><div style=\"background-color: inherit;\">--------------check----------------</div><div style=\"background-color: inherit;\">method name value deleteUser</div><div style=\"background-color: inherit;\">method is var args true</div><div style=\"background-color: inherit;\">1</div><div style=\"background-color: inherit;\">delete</div><div style=\"background-color: inherit;\">--------------check----------------</div></div></div></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp;</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><span style=\"font-size:24px;color:#ff0000;\">8.剖析ProxyFactory</span></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><span style=\"font-size:24px;color:#ff0000;\"></span>&nbsp;</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><p><span style=\"font-family:微软雅黑;font-size:14px;\">Spring 定义了org.springframework.aop.framework.AopProxy接口，并提供了两个final类型实现类</span></p><p><span style=\"font-family:微软雅黑;font-size:14px;\"><img alt=\"\" src=\"http://img.blog.csdn.net/20140411111013953?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaGVoZXhpYW95b3U=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\"><br></span></p><p><span style=\"font-family:微软雅黑;font-size:14px;\"></span></p><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp;ProxyFactory的setInterfaces（Class[] Interfaces）指定只对接口进行代理，ProxyFactory就是用JdkDynamicAopProxy；如果是针对类型的代理，则使用Cglib2AopProxy&nbsp;</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp; &nbsp; &nbsp; 另外ProxyFactory的setOptimize（true）方法，让ProxyFactory启动优化代理方式，这样，针对接口的代理也会使用Cglib2AopProxy 。</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><br style=\"background-color: inherit;\"></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><br style=\"background-color: inherit;\"><pre class=\"java\" name=\"code\">\nimport org.springframework.aop.BeforeAdvice;\n\nimport org.springframework.aop.framework.ProxyFactory;\n\n\nimport com.web.spring.aop.example.beforadvice.GreetingBeforAdvice;\n\nimport com.web.spring.aop.example.beforadvice.NaiveWaiter;\n\nimport com.web.spring.aop.example.beforadvice.Waiter;\n\n\n/**\n\n * @author Chris\n\n *\n\n */\n\npublic class TestProxyFactory {\n\n\n public static void main(String[] args) {\n\n\n  //cglibProxyMethod();\n\n  jdkProxyMethod();\n\n }\n\n\n public static void jdkProxyMethod() {\n\n  Waiter target = new NaiveWaiter();\n\n\n  BeforeAdvice beforeAdvice = new GreetingBeforAdvice();\n\n\n  ProxyFactory proxyFactory = new ProxyFactory();\n\n\n  // 指向jdk代理\n\n  proxyFactory.setInterfaces(target.getClass().getInterfaces());\n\n\n  proxyFactory.setTarget(target);\n\n\n  proxyFactory.addAdvice(beforeAdvice);\n\n\n  create(proxyFactory);\n\n }\n\n\n public static void cglibProxyMethod() {\n\n  Waiter target = new NaiveWaiter();\n\n\n  BeforeAdvice beforeAdvice = new GreetingBeforAdvice();\n\n\n  ProxyFactory proxyFactory = new ProxyFactory();\n\n  //强制使用cglib代理\n\n  proxyFactory.setOptimize(true);\n\n \n\n  proxyFactory.setTarget(target);\n\n\n  proxyFactory.addAdvice(beforeAdvice);\n\n  create(proxyFactory);\n\n }\n\n\n private static void create(ProxyFactory proxyFactory) {\n\n  Waiter waiter = (Waiter) proxyFactory.getProxy();\n\n  waiter.greetTo(&quot;John&quot;);\n\n  waiter.serveTo(&quot;Tom&quot;);\n\n }\n\n}</pre><br></div></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp;</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><span style=\"font-size:24px;color:#ff0000;\">9.ProxyFactory的XML的配置</span></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><span style=\"font-size:24px;color:#ff0000;\"></span>&nbsp;</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">在spring中配置，将所有的xml贴出来了，以及proxyFactory 所使用的一些属性解释：</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><pre class=\"html\" name=\"code\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n\n xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n\n xmlns:p=&quot;http://www.springframework.org/schema/p&quot; xmlns:util=&quot;http://www.springframework.org/schema/util&quot;\n\n xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;\n\n xsi:schemaLocation=&quot;\n\n  http://www.springframework.org/schema/beans\n\n  http://www.springframework.org/schema/beans/spring-beans-4.0.xsd\n\n  http://www.springframework.org/schema/context\n\n  http://www.springframework.org/schema/context/spring-context-4.0.xsd\n\n  http://www.springframework.org/schema/util\n\n  http://www.springframework.org/schema/util/spring-util-4.0.xsd\n\n  http://www.springframework.org/schema/tx\n\n  http://www.springframework.org/schema/tx/spring-tx-4.0.xsd\n\n  http://www.springframework.org/schema/aop\n\n  http://www.springframework.org/schema/aop/spring-aop-4.0.xsd&quot;&gt;\n\n \n\n &lt;bean id=&quot;greetingAdvice&quot; class=&quot;com.web.spring.aop.example.beforadvice.GreetingBeforAdvice&quot;/&gt;\n\n &lt;bean id=&quot;target&quot; class=&quot;com.web.spring.aop.example.beforadvice.NaiveWaiter&quot;/&gt;\n\n &lt;!--ProxyFactoryBean 是FactoryBean接口的实现类 --&gt;\n\n &lt;bean id=&quot;waiter&quot; class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;\n\n  p:proxyInterfaces=&quot;com.web.spring.aop.example.beforadvice.Waiter&quot;\n\n  p:interceptorNames=&quot;greetingAdvice&quot;\n\n  p:target-ref=&quot;target&quot;\n\n  p:proxyTargetClass=&quot;true&quot;\n\n /&gt;\n\n&lt;!--\n\n 1.proxyInterfaces代理所要实现的接口，可以是多个接口。该属性还有一个别名interfaces\n\n 2.interceptorNames需要织入目标对象的bean列表，采用Bean的名称指定。这些Bean必须实现了\n\n  org.aopalliance.intercept.MethodInterceptor或\n\n  org.springframework.aop.Advisor 的Bean，配置中的顺序对应调用的顺序。\n\n 3.singleton 返回的代理是否是简单实例，默认为单实例；\n\n 4.optimize 当设置成true 时，强制使用Cglib代理。\n\n 5.proxyTargetClass 是否对类进行代理（而不是对接口进行代理），设置为true时，使用CGLib代理。\n\n --&gt;\n\n&lt;/beans&gt;</pre><br></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><br style=\"background-color: inherit;\"></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><span style=\"color:#ff00;background-color: inherit;\"><span style=\"background-color: inherit;\">此外，在xml配置文件中proxyTargetClass 设置为true后，无需再设置proxyInterfaces属性，即使设置也会被ProxyFactoryBean忽略。</span></span></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><br style=\"background-color: inherit;\"></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">main方法测试：</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><br style=\"background-color: inherit;\"></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp;public static void main(String[] args) {</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp; ApplicationContext applicationContext=new ClassPathXmlApplicationContext(&quot;proxyFcatory.xml&quot;);</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp;</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp; Waiter waiter = (Waiter) applicationContext.getBean(&quot;waiter&quot;);</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp;</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp; waiter.greetTo(&quot;John&quot;);</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp;}</div></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\">&nbsp;</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><span style=\"font-size:24px;color:#ff0000;\">11.CGlib动态代理</span></div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><span style=\"font-size:24px;color:#ff0000;\"></span>&nbsp;</div><div style=\"font-family: 微软雅黑; font-size: 14px; background-color: inherit;\"><div class=\"tag2box\"><a target=\"_blank\" href=\"http://www.csdn.net/tag/spring\" target=\"_blank\">spring</a><a target=\"_blank\" href=\"http://www.csdn.net/tag/aop\" target=\"_blank\">aop</a><a target=\"_blank\" href=\"http://www.csdn.net/tag/jdk\" target=\"_blank\">jdk</a><a target=\"_blank\" href=\"http://www.csdn.net/tag/string\" target=\"_blank\">string</a><a target=\"_blank\" href=\"http://www.csdn.net/tag/java\" target=\"_blank\">java</a><a target=\"_blank\" href=\"http://www.csdn.net/tag/object\" target=\"_blank\">object</a></div><div class=\"article_content\" id=\"article_content\"><div style=\"color: rgb(51, 51, 51); line-height: 21px; font-family: tahoma,arial,宋体,sans-serif; font-size: 14px;\"><span style=\"color:#ff00;\"><strong><span style=\"font-family:verdana,arial,helvetica,sans-serif;color:#333333;line-height: 21px; font-size: 15px; background-color: rgb(250, 250, 250);\">代理的核心就是拦截方法调用，并在需要的时候执行匹配某方法的通知链。&nbsp;</span><br style=\"color: rgb(51, 51, 51); line-height: 21px; font-family: verdana,arial,helvetica,sans-serif; font-size: 15px; background-color: rgb(250, 250, 250);\"><br style=\"color: rgb(51, 51, 51); line-height: 21px; font-family: verdana,arial,helvetica,sans-serif; font-size: 15px; background-color: rgb(250, 250, 250);\"><span style=\"font-family:verdana,arial,helvetica,sans-serif;color:#333333;line-height: 21px; font-size: 15px; background-color: rgb(250, 250, 250);\">和CGLIB不同的是，JDK代理只能代理接口，不能代理类。&nbsp;</span><br style=\"color: rgb(51, 51, 51); line-height: 21px; font-family: verdana,arial,helvetica,sans-serif; font-size: 15px; background-color: rgb(250, 250, 250);\"><br style=\"color: rgb(51, 51, 51); line-height: 21px; font-family: verdana,arial,helvetica,sans-serif; font-size: 15px; background-color: rgb(250, 250, 250);\"><span style=\"font-family:verdana,arial,helvetica,sans-serif;color:#333333;line-height: 21px; font-size: 15px; background-color: rgb(250, 250, 250);\">使用JDK代理时，如何处理一个特定的方法调用的决定是在程序运行时做出的，也就是在每次方法被调用时。使用CGLIB代理可以边开这种处理方法，CGLIB会在运行中随时为代理创建新类的字节码，并尽可能的重用已经生成的类的字节码。&nbsp;</span><br></strong></span></div><div style=\"color: rgb(51, 51, 51); line-height: 21px; font-family: tahoma,arial,宋体,sans-serif; font-size: 14px;\"><span style=\"color:#ff00;\"><strong><br></strong></span></div><div style=\"color: rgb(51, 51, 51); line-height: 21px; font-family: tahoma,arial,宋体,sans-serif; font-size: 14px;\"><span style=\"color:#ff00;\"><strong><br></strong></span></div><div style=\"color: rgb(51, 51, 51); line-height: 21px; font-family: tahoma,arial,宋体,sans-serif; font-size: 14px;\"><span style=\"color:#ff00;\"><strong>Spring1.2:</strong></span></div><div style=\"color: rgb(51, 51, 51); line-height: 21px; font-family: tahoma,arial,宋体,sans-serif; font-size: 14px;\"><span style=\"color:#ff990;\"><strong>将事务代理工厂[<span style=\"color:#ff00;\">TransactionProxyFactoryBean</span>] 或 自动代理拦截器[<span style=\"color:#ff00;\">BeanNameAutoProxyCreator</span>]</strong></span></div><div style=\"color: rgb(51, 51, 51); line-height: 21px; font-family: tahoma,arial,宋体,sans-serif; font-size: 14px;\"><span style=\"color:#ff990;\"><strong>的&nbsp;<span style=\"color:#ff00;\">proxyTargetClass</span>&nbsp;属性,设置为<span style=\"color:#ff00;\">true</span>,则使用<span style=\"color:#38761d;\">CGLIB</span>代理,此属性默认为<span style=\"color:#ff00;\">false</span>,使用<span style=\"color:#38761d;\">JDK</span>动态代理.</strong></span></div><div style=\"color: rgb(51, 51, 51); line-height: 21px; font-family: tahoma,arial,宋体,sans-serif; font-size: 14px;\"><span style=\"color:#6aa84f;\"><strong>以下引用 Spring Framework reference 2.0.5:</strong></span></div><div style=\"color: rgb(51, 51, 51); line-height: 21px; font-family: tahoma,arial,宋体,sans-serif; font-size: 14px;\"><span style=\"color:#ff00;\"><strong>Spring2.0:</strong></span></div><p style=\"color: rgb(51, 51, 51); line-height: 21px; padding-top: 0px; padding-bottom: 0px; font-family: tahoma,arial,宋体,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">Spring AOP部分使用JDK动态代理或者CGLIB来为目标对象创建代理。（建议尽量使用JDK的动态代理）</p><p style=\"color: rgb(51, 51, 51); line-height: 21px; padding-top: 0px; padding-bottom: 0px; font-family: tahoma,arial,宋体,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">如果被代理的目标对象实现了至少一个接口，则会使用JDK动态代理。所有该目标类型实现的接口都将被代理。若该目标对象没有实现任何接口，则创建一个CGLIB代理。<br><br>如果你希望强制使用CGLIB代理，（例如：希望代理目标对象的所有方法，而不只是实现自接口的方法）那也可以。但是需要考虑以下问题:<br><br>无法通知（advise）Final 方法，因为他们不能被覆写。&nbsp;<br>你需要将CGLIB 2二进制发行包放在classpath下面，与之相较JDK本身就提供了动态代理&nbsp;<br>强制使用CGLIB代理需要将 |aop:config| 的 proxy-target-class 属性设为true:</p><p style=\"color: rgb(51, 51, 51); line-height: 21px; padding-top: 0px; padding-bottom: 0px; font-family: tahoma,arial,宋体,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">|aop:config proxy-target-class=&quot;true&quot;|<br>...<br>|/aop:config|<br><br>当需要使用CGLIB代理和@AspectJ自动代理支持，请按照如下的方式设置 |aop:aspectj-autoproxy| 的 proxy-target-class 属性：</p><p style=\"color: rgb(51, 51, 51); line-height: 21px; padding-top: 0px; padding-bottom: 0px; font-family: tahoma,arial,宋体,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">|aop:aspectj-autoproxy proxy-target-class=&quot;true&quot;/|<br><br>而实际使用的过程中才会发现细节问题的差别，The devil is in the detail.JDK动态代理：其代理对象必须是某个接口的实现，它是通过在运行期间创建一个接口的实现类来完成对目标对象的代理。<br>CGLIB代理：实现原理类似于JDK动态代理，只是它在运行期间生成的代理对象是针对目标类扩展的子类。CGLIB是高效的代码生成包，底层是依靠ASM（开源的java字节码编辑类库）操作字节码实现的，性能比JDK强。<br>Spring是依靠什么来判断采用哪种代理策略来生成AOP代理呢？以下代码就是Spring的判断逻辑&nbsp;&nbsp;</p><p style=\"color: rgb(51, 51, 51); line-height: 21px; padding-top: 0px; padding-bottom: 0px; font-family: tahoma,arial,宋体,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"color:#0800;\"></span><p style=\"color: rgb(51, 51, 51); line-height: 21px; padding-top: 0px; padding-bottom: 0px; font-family: tahoma,arial,宋体,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"color:#000000;\"></span><p style=\"color: rgb(51, 51, 51); line-height: 21px; padding-top: 0px; padding-bottom: 0px; font-family: tahoma,arial,宋体,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">&nbsp;&nbsp;</p><pre class=\"java\" name=\"code\">  //org.springframework.aop.framework.DefaultAopProxyFactory   \n    //参数AdvisedSupport 是Spring AOP配置相关类   \n    public AopProxy createAopProxy(AdvisedSupport advisedSupport)   \n            throws AopConfigException {   \n        //在此判断使用JDK动态代理还是CGLIB代理   \n        if (advisedSupport.isOptimize() || advisedSupport.isProxyTargetClass()   \n                || hasNoUserSuppliedProxyInterfaces(advisedSupport)) {   \n            if (!cglibAvailable) {   \n                thrownew AopConfigException(   \n                        &quot;Cannot proxy target class because CGLIB2 is not available. &quot;  \n                                +&quot;Add CGLIB to the class path or specify proxy interfaces.&quot;);   \n              }   \n            return CglibProxyFactory.createCglibProxy(advisedSupport);   \n          } else {   \n            returnnew JdkDynamicAopProxy(advisedSupport);   \n          }   \n      }  </pre><p style=\"color: rgb(51, 51, 51); line-height: 21px; padding-top: 0px; padding-bottom: 0px; font-family: tahoma,arial,宋体,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><br></p><p style=\"color: rgb(51, 51, 51); line-height: 21px; padding-top: 0px; padding-bottom: 0px; font-family: tahoma,arial,宋体,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><p style=\"color: rgb(51, 51, 51); line-height: 21px; padding-top: 0px; padding-bottom: 0px; font-family: tahoma,arial,宋体,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"color:#000000;\"><br></span></p><p style=\"color: rgb(51, 51, 51); line-height: 21px; padding-top: 0px; padding-bottom: 0px; font-family: tahoma,arial,宋体,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">advisedSupport.isOptimize()与advisedSupport.isProxyTargetClass()默认返回都是false，所以在默认情况下目标对象有没有实现接口决定着Spring采取的策略，当然可以设置advisedSupport.isOptimize()或者advisedSupport.isProxyTargetClass()返回为true，这样无论目标对象有没有实现接口Spring都会选择使用CGLIB代理。<br><br>所以在默认情况下，如果一个目标对象如果实现了接口Spring则会选择JDK动态代理策略动态的创建一个接口实现类（动态代理类）来代理目标对象，可以通俗的理解这个动态代理类是目标对象的另外一个版本，所以这两者之间在强制转换的时候会抛出java.lang.ClassCastException。而所以在默认情况下，如果目标对象没有实现任何接口，Spring会选择CGLIB代理， 其生成的动态代理对象是目标类的子类。<br><br>上说的是默认情况下，也可以手动配置一些选项使Spring采用CGLIB代理。&nbsp;<br>org.springframework.transaction.interceptor.TransactionProxyFactoryBean是org.springframework.aop.framework. ProxyConfig的子类，所以可以参照ProxyConfig里的一些设置如下所示，将optimize和proxyTargetClass任意一个设置为true都可以强制Spring采用CGLIB代理。</p><p style=\"color: rgb(51, 51, 51); line-height: 21px; padding-top: 0px; padding-bottom: 0px; font-family: tahoma,arial,宋体,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">如果当需要使用CGLIB代理和@AspectJ自动代理支持，请按照如下的方式设置 |aop:aspectj-autoproxy| 的 proxy-target-<span style=\"color:#000000;\">class 属性</span>：&nbsp;<br>|aop:aspectj-autoproxy proxy-target-class=&quot;true&quot;/|</p><p style=\"color: rgb(51, 51, 51); line-height: 21px; padding-top: 0px; padding-bottom: 0px; font-family: tahoma,arial,宋体,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\">这样使用CGLIB代理也就不会出现前面提到的ClassCastException问题了，也可以在性能上有所提高，关键是对于代理对象是否继承接口可以统一使用。</p><p style=\"color: rgb(51, 51, 51); line-height: 21px; padding-top: 0px; padding-bottom: 0px; font-family: tahoma,arial,宋体,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><br></p><p style=\"color: rgb(51, 51, 51); line-height: 21px; padding-top: 0px; padding-bottom: 0px; font-family: tahoma,arial,宋体,sans-serif; font-size: 14px; margin-top: 0px; margin-bottom: 0px;\"><span style=\"font-family:verdana,arial,helvetica,sans-serif;line-height: 21px; font-size: 15px; background-color: rgb(250, 250, 250);\">两种类型AOP：静态AOP和动态AOP。</span><span style=\"font-family:verdana,arial,helvetica,sans-serif;line-height: 21px; font-size: 15px; background-color: rgb(250, 250, 250);\">&nbsp;</span><br style=\"line-height: 21px; font-family: verdana,arial,helvetica,sans-serif; font-size: 15px; background-color: rgb(250, 250, 250);\"><br style=\"line-height: 21px; font-family: verdana,arial,helvetica,sans-serif; font-size: 15px; background-color: rgb(250, 250, 250);\"><span style=\"font-family:verdana,arial,helvetica,sans-serif;line-height: 21px; font-size: 15px; background-color: rgb(250, 250, 250);\">静态代理：&nbsp;<br>代理对象与被代理对象必须实现同一个接口。</span><span style=\"font-family:verdana,arial,helvetica,sans-serif;line-height: 21px; font-size: 15px; background-color: rgb(250, 250, 250);\">&nbsp;</span><br style=\"line-height: 21px; font-family: verdana,arial,helvetica,sans-serif; font-size: 15px; background-color: rgb(250, 250, 250);\"><span style=\"font-family:verdana,arial,helvetica,sans-serif;line-height: 21px; font-size: 15px; background-color: rgb(250, 250, 250);\">demo：</span></p><div class=\"dp-highlighter\"><div class=\"bar\" style=\"padding-left: 45px;\"><div class=\"tools\" style=\"font: 9px/normal Verdana, Geneva, Arial, Helvetica, sans-serif; padding: 3px 8px 10px 10px; color: silver; border-left-color: rgb(108, 226, 108); border-left-width: 3px; border-left-style: solid; font-size-adjust: none; font-stretch: normal; background-color: rgb(248, 248, 248);\"><a target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://localhost:8033/jforum/posts/list/68.page#\" target=\"_blank\">view plain</a><a target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://localhost:8033/jforum/posts/list/68.page#\" target=\"_blank\">copy to clipboard</a><a target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://localhost:8033/jforum/posts/list/68.page#\" target=\"_blank\">print</a><a target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://localhost:8033/jforum/posts/list/68.page#\" target=\"_blank\">?</a></div></div><ol class=\"dp-j\" style=\"margin: 0px 0px 1px 45px !important; padding: 0px; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);\" start=\"1\"><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; color: inherit; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important;\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\"><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; font-weight: bold; background-color: inherit;\">package</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;cn.partner4java.proxy.staticproxy;&nbsp;&nbsp;</span></span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;</span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; color: inherit; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important;\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;</span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\"><span class=\"comment\" style=\"color:#0820;margin: 0px; padding: 0px; background-color: inherit;\">/**</span>&nbsp;</span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; color: inherit; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important;\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\"><span class=\"comment\" style=\"color:#0820;margin: 0px; padding: 0px; background-color: inherit;\">*&nbsp; 静态代理，统一接口</span>&nbsp;</span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\"><span class=\"comment\" style=\"color:#0820;margin: 0px; padding: 0px; background-color: inherit;\">* @author partner4java</span>&nbsp;</span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; color: inherit; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important;\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\"><span class=\"comment\" style=\"color:#0820;margin: 0px; padding: 0px; background-color: inherit;\">*</span>&nbsp;</span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\"><span class=\"comment\" style=\"color:#0820;margin: 0px; padding: 0px; background-color: inherit;\">*/</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;</span></span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; color: inherit; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important;\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\"><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; font-weight: bold; background-color: inherit;\">public</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;</span><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; font-weight: bold; background-color: inherit;\">interface</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;IHello {&nbsp;&nbsp;</span></span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\" style=\"color:#0820;margin: 0px; padding: 0px; background-color: inherit;\">/**</span>&nbsp;</span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; color: inherit; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important;\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\"><span class=\"comment\" style=\"color:#0820;margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp; * 可以带来的统一方法</span>&nbsp;</span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\"><span class=\"comment\" style=\"color:#0820;margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp; * @param name</span>&nbsp;</span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; color: inherit; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important;\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\"><span class=\"comment\" style=\"color:#0820;margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp; */</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;</span></span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; font-weight: bold; background-color: inherit;\">public</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;</span><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; font-weight: bold; background-color: inherit;\">void</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;hello(String name);&nbsp;&nbsp;</span></span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; color: inherit; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important;\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\">}&nbsp;&nbsp;</span></li></ol></div><div class=\"dp-highlighter\"><div class=\"bar\" style=\"padding-left: 45px;\"><div class=\"tools\" style=\"font: 9px/normal Verdana, Geneva, Arial, Helvetica, sans-serif; padding: 3px 8px 10px 10px; color: silver; border-left-color: rgb(108, 226, 108); border-left-width: 3px; border-left-style: solid; font-size-adjust: none; font-stretch: normal; background-color: rgb(248, 248, 248);\"><a target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://localhost:8033/jforum/posts/list/68.page#\" target=\"_blank\">view plain</a><a target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://localhost:8033/jforum/posts/list/68.page#\" target=\"_blank\">copy to clipboard</a><a target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://localhost:8033/jforum/posts/list/68.page#\" target=\"_blank\">print</a><a target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://localhost:8033/jforum/posts/list/68.page#\" target=\"_blank\">?</a></div></div><ol class=\"dp-j\" style=\"margin: 0px 0px 1px 45px !important; padding: 0px; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);\" start=\"1\"><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; color: inherit; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important;\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\"><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; font-weight: bold; background-color: inherit;\">package</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;cn.partner4java.proxy.staticproxy;&nbsp;&nbsp;</span></span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;</span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; color: inherit; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important;\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\"><span class=\"comment\" style=\"color:#0820;margin: 0px; padding: 0px; background-color: inherit;\">/**</span>&nbsp;</span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\"><span class=\"comment\" style=\"color:#0820;margin: 0px; padding: 0px; background-color: inherit;\">*&nbsp; 被代理的对象，需要借助代理对象加入日志</span>&nbsp;</span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; color: inherit; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important;\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\"><span class=\"comment\" style=\"color:#0820;margin: 0px; padding: 0px; background-color: inherit;\">* @author partner4java</span>&nbsp;</span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\"><span class=\"comment\" style=\"color:#0820;margin: 0px; padding: 0px; background-color: inherit;\">*</span>&nbsp;</span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; color: inherit; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important;\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\"><span class=\"comment\" style=\"color:#0820;margin: 0px; padding: 0px; background-color: inherit;\">*/</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;</span></span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\"><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; font-weight: bold; background-color: inherit;\">public</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;</span><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; font-weight: bold; background-color: inherit;\">class</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;HelloSpeaker&nbsp;</span><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; font-weight: bold; background-color: inherit;\">implements</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;IHello {&nbsp;&nbsp;</span></span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; color: inherit; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important;\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;</span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; font-weight: bold; background-color: inherit;\">public</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;</span><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; font-weight: bold; background-color: inherit;\">void</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;hello(String name) {&nbsp;&nbsp;</span></span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; color: inherit; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important;\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\" style=\"color:blue;margin: 0px; padding: 0px; background-color: inherit;\">&quot;Hello &quot;</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;+ name);&nbsp;&nbsp;</span></span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></li><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; color: inherit; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important;\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;&nbsp;</span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important; background-color: rgb(248, 248, 248);\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\">}&nbsp;&nbsp;</span></li></ol></div><div class=\"dp-highlighter\"><div class=\"bar\" style=\"padding-left: 45px;\"><div class=\"tools\" style=\"font: 9px/normal Verdana, Geneva, Arial, Helvetica, sans-serif; padding: 3px 8px 10px 10px; color: silver; border-left-color: rgb(108, 226, 108); border-left-width: 3px; border-left-style: solid; font-size-adjust: none; font-stretch: normal; background-color: rgb(248, 248, 248);\"><a target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://localhost:8033/jforum/posts/list/68.page#\" target=\"_blank\">view plain</a><a target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://localhost:8033/jforum/posts/list/68.page#\" target=\"_blank\">copy to clipboard</a><a target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://localhost:8033/jforum/posts/list/68.page#\" target=\"_blank\">print</a><a target=\"_blank\" style=\"margin: 0px 10px 0px 0px; padding: 0px; color: rgb(160, 160, 160); font-size: 9px; text-decoration: none; background-color: inherit;\" href=\"http://localhost:8033/jforum/posts/list/68.page#\" target=\"_blank\">?</a></div></div><ol class=\"dp-j\" style=\"margin: 0px 0px 1px 45px !important; padding: 0px; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);\" start=\"1\"><li class=\"alt\" style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; color: inherit; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-width: 3px; list-style-type: decimal-leading-zero; list-style-position: outside !important;\"><span style=\"color:black;margin: 0px; padding: 0px; background-color: inherit;\"><span class=\"keyword\" style=\"color:#06699;margin: 0px; padding: 0px; font-weight: bold; background-color: inherit;\">package</span><span style=\"margin: 0px; padding: 0px; background-color: inherit;\">&nbsp;cn.partner4java.proxy.staticproxy;&nbsp;&nbsp;</span></span></li><li style=\"border-style: none none none solid; margin: 0px !important; padding: 0px 3px 0px 10px !important; line-height: 14px; border-left-color: rgb(108, 226, 108); border-left-wi', '2016-04-16 01:21:21', '0');
INSERT INTO `article` VALUES ('10088', '10003', 'Spring学习笔记（7）-----------Bean的基本配置', '\n\n<p><strong><span style=\"font-family:Times New Roman\"><strong><span style=\"font-family:Times New Roman\"></span></strong><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 先从IOC说起，这个概念其实是从我们平常new一个对象的对立面来说的，我们平常使用对象的时候，一般都是直接使用关键字类new一个对象，那这样有什么坏处呢？其实很显然的，使用new那么就表示当前模块已经不知不觉的和new的对象耦合了，而我们通常都是更高层次的抽象模块调用底层的实现模块，这样也就产生了模块依赖于具体的实现，这样与我们JAVA中提倡的面向接口面向抽象编程是相冲突的，而且这样做也带来系统的模块架构问题。很简单的例子，我们在进行数据库操作的时候，总是业务层调用DAO层，当然我们的DAO一般都是会采用接口开发，这在一定程度上满足了松耦合，使业务逻辑层不依赖于具体的数据库DAO层。但是我们在使用的时候还是会new一个特定数据库的DAO层，这无形中也与特定的数据库绑定了，虽然我们可以使用抽象工厂模式来获取DAO实现类，但除非我们一次性把所有数据库的DAO写出来，否则在进行数据库迁移的时候我们还是得修改DAO工厂类。\n<br>\n<br>\n&nbsp;&nbsp;&nbsp; 那我们使用IOC能达到什么呢？IOC，就是DAO接口的实现不再是业务逻辑层调用工厂类去获取，而是通过容器（比如spring）来自动的为我们的业务层设置DAO的实现类。这样整个过程就反过来，以前是我们业务层主动去获取DAO，而现在是DAO主动被设置到业务逻辑层中来了，这也就是反转控制的由来。通过IOC，我们就可以在不修改任何代码的情况下，无缝的实现数据库的换库迁移，当然前提还是必须得写一个实现特定数据库的DAO。我们把DAO普遍到更多的情况下，那么IOC就为我们带来更大的方便性，比如一个接口的多个实现，我们只需要配置一下就ok了，而不需要再一个个的写工厂来来获取了。这就是IOC为我们带来的模块的松耦合和应用的便利性。\n<br>\n<br>\n&nbsp;&nbsp;&nbsp; 那为什么说IOC很简单呢？说白了其实就是由我们平常的new转成了使用反射来获取类的实例，相信任何人只要会用java的反射机制，那么自己写一个IOC框架也不是不可能的。比如：\n<br>\n<br>\n…… <br>\npublic Object getInstance(String className) throws Exception <br>\n{ <br>\n&nbsp;&nbsp;&nbsp; Object obj = Class.forName(className).newInstance(); <br>\n&nbsp;&nbsp;&nbsp; Method[] methods = obj.getClass().getMethods(); <br>\n&nbsp;&nbsp;&nbsp; for (Method method : methods) { <br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (method.getName().intern() == &quot;setString&quot;) { <br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; method.invoke(obj, &quot;hello world!&quot;); <br>\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } <br>\n&nbsp;&nbsp;&nbsp; } <br>\n} <br>\n…… <br>\n<br>\n&nbsp;&nbsp;&nbsp; 上面的一个方法我们就很简单的使用了反射为指定的类的setString方法来设置一个hello world!字符串。其实可以看到IOC真的很简单，当然了IOC简单并不表示spring的IOC就简单，spring的IOC的功能强大就在于有一系列非常强大的配置文件维护类，它们可以维护spring配置文件中的各个类的关系，这才是spring的IOC真正强大的地方。在spring的Bean定义文件中，不仅可以为定义Bean设置属性，还支持Bean之间的继承、Bean的抽象和不同的获取方式等等功能。\n<br>\n<br>\n在spring的Bean配置中总的来说其实就一个标签&lt;bean&gt;&lt;/bean&gt;，这个bean标签就攘括了几乎所有的配置，然后bean的继承、抽象等都是基于此标签之上的，掌握了bean的配置，详细可以使自己有一个比较大的提升，尤其是对于新手来说（我也是，呵呵&nbsp; ）。最基础的bean配置如下：\n<br>\n<br>\n&lt;bean id=&quot;bean_test&quot; class=&quot;cn.qtone.test.HelloWorld&quot;&gt;&lt;/bean&gt; <br>\n<br>\n&nbsp;&nbsp;&nbsp; 这里我们就简单的使用HelloWorld类来实例化，使用默认的构造方法，即相当于我们使用： <br>\n<br>\nHelloWorld tmp = new HelloWorld(); <br>\n<br>\n&nbsp;&nbsp;&nbsp; 但有一点不同的是在spring配置中的在整个应用期间只有一个实例，即是单例的，当然这个单例是指对一个IOC容器（spring）来说的，而不是我们通常说说的单态模式。当然，spring也可以这样配置不是单态的实例，比如我们修改如下：\n<br>\n<br>\n&lt;bean id=&quot;bean_test&quot; class=&quot;cn.qtone.test.HelloWorld&quot; scope=&quot;prototype&quot;&gt;&lt;/bean&gt; <br>\n<br>\n&nbsp;&nbsp;&nbsp; 注意其中的不同颜色部分，这样配置后就表明每次从spring容器中获取HelloWorld的实例的时候就会new一个新对象，即我们所说的原型，spring中scope默认的是单态（singleton），当然针对web应用程序，还可以配置为request、session等范围。至于什么时候使用什么权限范围就要看应用程序的使用了，比如在多线程程序中，单态是否会对程序有所影响就需要考虑了。\n<br>\n<br>\n&nbsp;&nbsp;&nbsp; 如果HelloWorld类没有空的构造方法，只有如下的两个构造方法，那我们该如何配置呢？ <br>\n<br>\n…… <br>\npublic HelloWorld(String str) <br>\n{ <br>\n&nbsp;&nbsp;&nbsp; …… <br>\n} <br>\n<br>\npublic HelloWorld(Date date, int i) <br>\n{ <br>\n&nbsp;&nbsp;&nbsp; …… <br>\n} <br>\n…… <br>\n<br>\n&nbsp;&nbsp;&nbsp; 由于没有默认构造方法，所以我们就需要在bean的配置中写上构造参数才可以，如下： <br>\n<br>\n&lt;!-- 使用一个参数的构造 --&gt;<br>\n&lt;bean id=&quot;bean_test&quot; class=&quot;cn.qtone.test.HelloWorld&quot; scope=&quot;prototype&quot;&gt; <br>\n&nbsp;&nbsp;&nbsp; &lt;constructor-arg&gt;&lt;value&gt;hello&lt;/value&gt;&lt;/constructor-arg&gt;&nbsp; <br>\n&lt;/bean&gt; <br>\n<br>\n&nbsp;&nbsp;&nbsp; 上面说的使用一个参数的，即带字符串参数的构造方法，如果想使用带日期和整型的构造方法，那么就要做如下的配置了： <br>\n<br>\n&lt;bean id=&quot;bean_date&quot; class=&quot;java.util.Date&quot; /&gt; <br>\n<br>\n&lt;!-- 使用二个参数的构造 --&gt;<br>\n&lt;bean id=&quot;bean_test&quot; class=&quot;cn.qtone.test.HelloWorld&quot; scope=&quot;prototype&quot;&gt; <br>\n&nbsp;&nbsp;&nbsp; &lt;constructor-arg ref=&quot;bean_date&quot;&gt;&lt;/constructor-arg&gt;&nbsp; <br>\n&nbsp;&nbsp;&nbsp; &lt;constructor-arg&gt;&lt;value&gt;345&lt;/value&gt;&lt;/constructor-arg&gt;&nbsp; <br>\n&lt;/bean&gt; <br>\n<br>\n&nbsp;&nbsp;&nbsp; 注意到上面的配置中我们使用了ref关键字，这个是表示引用配置文件中的ID为bean_date的对象，另外对于类型，spring会做恰当的转换，比如将345转换成数字等。当然，这样对简单的构造来说不会有什么问题，如果情况比较复杂的话，那么一般建议使用序号来标定，如下：\n<br>\n<br>\n&lt;!-- 使用二个参数的构造 --&gt;<br>\n&lt;bean id=&quot;bean_test&quot; class=&quot;cn.qtone.test.HelloWorld&quot; scope=&quot;prototype&quot;&gt; <br>\n&nbsp;&nbsp;&nbsp; &lt;constructor-arg index=&quot;0&quot; ref=&quot;bean_date&quot;&gt;&lt;/constructor-arg&gt;&nbsp; <br>\n&nbsp;&nbsp;&nbsp; &lt;constructor-arg index=&quot;1&quot;&gt;&lt;value&gt;345&lt;/value&gt;&lt;/constructor-arg&gt;&nbsp; <br>\n&lt;/bean&gt; <br>\n<br>\n&nbsp;&nbsp;&nbsp; 这样，使用index属性表示该参数所在位置了后，无论是spring构造起来，还是我们查看都会很方便。当然，spring也提供了自动查找，也就是依赖查找的功能，但是这个我觉得大家还是少用，因为这样会使整个配置文件看起来非常的不直观，而且不清晰，说不定过了一段时间再去看的时候就不知道是什么意思了，在正式应用项目中，还是将各个bean的关系进行组织和编写清楚为好。\n<br>\n<br>\n&nbsp;&nbsp;&nbsp; 上面所说的都是构造来实例化一个bean，但有时候我们都会使用工厂模式来获取bean。对于工厂模式，我们一般也使用静态工厂模式和实例工厂模式，这两个在spring中配置也是不太一样的。对于静态工厂模式来实例化bean的，我们的配置如下：\n<br>\n<br>\n&lt;bean id=&quot;bean_string&quot; class=&quot;cn.qtone.test.TestFactory&quot; factory-method=&quot;getBean&quot;/&gt;\n<br>\n<br>\n&nbsp;&nbsp;&nbsp; 当然，我们也可以为静态工厂模式的bean来使用构造参数，这个就不说了。我们上面的bean配置对应的实际代码就应该是： <br>\n<br>\n…… <br>\npublic static Object getBean() <br>\n{ <br>\n&nbsp;&nbsp;&nbsp; return &quot;hello world&quot;; <br>\n} <br>\n…… <br>\n<br>\n&nbsp;&nbsp;&nbsp; 那么spring在实例化ID为bean_string的bean时，就会使用TestFactory的getBean()方法来获取，而且TestFactory是没有被实例化的，即是使用静态方法来获取的。对于实例工厂模式的话，我们的配置和上面就稍微有点不一样了，那我们就应该配置两个bean， 一个是实例的工厂bean，还一个就是我们要获取的bean的配置了，如下：\n<br>\n<br>\n&lt;bean id=&quot;bean_factory&quot; class=&quot;cn.qtone.test.TestBeanFactory&quot;/&gt; <br>\n<br>\n&lt;bean id=&quot;bean_helloWorld&quot; factory-bean=&quot;bean_factory&quot; factory-method=&quot;getHello&quot;/&gt;\n<br>\n<br>\n&nbsp;&nbsp;&nbsp; 上面的配置中，spring容器将首先实例化一个TestBeanFactory,然后再根据该类的方法getHello来获取一个bean的实例，我们这里以HelloWorld对象为例，对应的代码就应该如下：\n<br>\n<br>\n…… <br>\npublic HelloWorld getHello() <br>\n{ <br>\n&nbsp;&nbsp;&nbsp; return new HelloWorld(); <br>\n} <br>\n…… <br>\n<br>\n&nbsp;&nbsp;&nbsp; 注意到，我们这里的getHello方法并不是静态方法，而是实例方法，所以必须先实例化TestBeanFactory后才能够调用。 <br>\n<br>\n&nbsp;&nbsp;&nbsp; 上面说的都是如何去实例化一个bean，没有说到bean的属性注入。虽然我们也可以通过构造的时候进行一次注入，但这样做不仅失去了灵活性，而且一长串的构造参数看着也&#30524;疼哈，呵呵。当然，有一种情况下，我们是应该使用构造注入的，就是希望注入的对象不能够被外界修改时，我们这时候就必须使用构造注入了。对于bean的属性注入，以HelloWorld为例，我们可以简单的配置如下：\n<br>\n<br>\n&lt;bean id=&quot;bean_test&quot; class=&quot;cn.qtone.test.HelloWorld&quot;&gt; <br>\n&nbsp;&nbsp;&nbsp; &lt;property name=&quot;hello&quot; value=&quot;你好！&quot; /&gt; <br>\n&nbsp;&nbsp;&nbsp; &lt;property name=&quot;world&quot; value=&quot;世界&quot; /&gt; <br>\n&nbsp;&nbsp;&nbsp; &lt;property name=&quot;date&quot; ref=&quot;bean_date&quot; /&gt; <br>\n&lt;/bean&gt; <br>\n<br>\n&nbsp;&nbsp;&nbsp; 上面的配置中使用了三个属性注入，即spring中的setter注入方式。注意第三个属性，使用了ref，表明这个date属性的设置参数是关联到ID为bean_date的bean上去的。注意在使用setter注入的时候，属性的名称不是方法的全名称，而是满足javaBean规范的命名方式，即如果属性名称为xxx，那么其对应的方法名称就应该是：setXxx()，注意的是除了xxx中第一个字符不区分大小写之外，其他的是要严&#26684;区分的。那么对照上面的配置，我们的HelloWorld的方法就应该如下：\n<br>\n<br>\n…… <br>\npublic void setHello(String hello) <br>\n{ <br>\n&nbsp;&nbsp;&nbsp; …… <br>\n} <br>\n<br>\npublic void setWorld(String world) <br>\n{ <br>\n&nbsp;&nbsp;&nbsp; …… <br>\n} <br>\n<br>\npublic void setDate(Date date) <br>\n{ <br>\n&nbsp;&nbsp;&nbsp; …… <br>\n} <br>\n…… <br>\n<br>\n&nbsp;&nbsp;&nbsp; 使用setter注入的好处就是可以很清晰的知道每一个注入的是什么参数和意义，通过名称就可以很容易的看出来，这也是spring提倡使用setter注入的原因之一。</span></span></strong></p>\n<p><strong><span style=\"font-family:Times New Roman\"><span style=\"font-size:18px\">Spring的配置文件的基本元素介绍：</span></span></strong></p>\n<p><strong><span style=\"font-family:Times New Roman\"><span style=\"font-size:18px\">&lt;beans&gt;</span></span></strong></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Times New Roman\">Spring</span>配置文件的根元素，包含一个或多个<span style=\"font-family:Times New Roman\">bean</span>元素。</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">default-autowire</span>属性</strong>：默认的<span style=\"font-family:Times New Roman\">bean</span>自动装配模式。可选<span style=\"font-family:Times New Roman\">5</span>种模式。</span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Times New Roman\">no</span>：不使用自动装配。<span style=\"font-family:Times New Roman\">Bean</span>的引用必须通过<span style=\"font-family:Times New Roman\">ref</span>元素定义。</span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Times New Roman\">byName</span>：通过属性名字进行自动装配。</span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Times New Roman\">byType</span>：如果<span style=\"font-family:Times New Roman\">BeanFactory</span>中正好有一个同属性类型一样的<span style=\"font-family:Times New Roman\">bean</span>，就自动装配这个属性。如果有多于一个这样的<span style=\"font-family:Times New Roman\">bean</span>，就抛出一个致命异常，它指出你可能不能对那个<span style=\"font-family:Times New Roman\">bean</span>使用<span style=\"font-family:Times New Roman\">byType</span>的自动装配。如果没有匹配的<span style=\"font-family:Times New Roman\">bean</span>，则什么都不会发生，属性不会被设置。如果这是你不想要的情况（什么都不发生），通过设置<span style=\"font-family:Times New Roman\">dependency-check=&quot;objects&quot;</span>属性&#20540;来指定在这种情况下应该抛出错误。</span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Times New Roman\">constructor</span>：这个同<span style=\"font-family:Times New Roman\">byType</span>类&#20284;，不过是应用于构造函数的参数。如果在<span style=\"font-family:Times New Roman\">BeanFactory</span>中不是恰好有一个<span style=\"font-family:Times New Roman\">bean</span>与构造函数参数相同类型，则一个致命的错误会产生。</span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Times New Roman\">autodetect</span>：通过对<span style=\"font-family:Times New Roman\">bean</span> 检查类的内部来选择<span style=\"font-family:Times New Roman\">constructor</span>或<span style=\"font-family:Times New Roman\">byType</span>。如果找到一个缺省的构造函数，那么就会应用<span style=\"font-family:Times New Roman\">byType</span>。</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">default-dependency-check</span>属性</strong>：默认的依赖检查模式。可选四种。</span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Times New Roman\">none</span> ：不进行依赖检查。没有指定&#20540;的<span style=\"font-family:Times New Roman\">bean</span>属性仅仅是没有设&#20540;。</span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Times New Roman\">Simple</span>：对基本类型和集合（除了合作者外，比如其他的<span style=\"font-family:Times New Roman\">bean</span>，所有东西）进行依赖检查。</span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Times New Roman\">Object</span>：对合作者进行依赖检查。</span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Times New Roman\">all</span> ：对合作者，基本类型和集合都进行依赖检查。</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">default-lazy-init</span>属性</strong>：默认延迟加载。<span style=\"font-family:Times New Roman\">True</span> 或<span style=\"font-family:Times New Roman\">False</span> 。</span></p>\n<p><span style=\"font-size:18px\"></span></p>\n<p><span style=\"font-family:Times New Roman; font-size:18px\"><strong>&lt;bean&gt;</strong></span></p>\n<p><span style=\"font-size:18px\">用于告诉<span style=\"font-family:Times New Roman\">Spring</span>容器一个类以及它是如何配置的。</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">class</span>属性</strong>：<span style=\"font-family:Times New Roman\">Java Bean</span> 类名。</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">id</span>属性</strong>：<span style=\"font-family:Times New Roman\">Java Bean</span>在<span style=\"font-family:Times New Roman\">BeanFactory</span>中的唯一标识，代码中通过<span style=\"font-family:Times New Roman\">BeanFactory</span>获取<span style=\"font-family:Times New Roman\">JavaBean</span>实例时需以此作为索引名称。</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">name</span>属性</strong>：同上，如果给<span style=\"font-family:Times New Roman\">bean</span>增加别名，可以通过<span style=\"font-family:Times New Roman\">name</span>属性指定一个或多个<span style=\"font-family:Times New Roman\">id</span>。</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">singleton</span>属性</strong>：指定此<span style=\"font-family:Times New Roman\">Java Bean</span>是否采用单例（<span style=\"font-family:Times New Roman\">Singleton</span>）模式，如果设为“<span style=\"font-family:Times New Roman\">true</span>”，则在<span style=\"font-family:Times New Roman\">BeanFactory</span>作用范围内，只维护此<span style=\"font-family:Times New Roman\">Java\n Bean</span>的一个实例，代码通过<span style=\"font-family:Times New Roman\">BeanFactory</span>获得此<span style=\"font-family:Times New Roman\">Java Bean</span>实例的引用。反之，如果设为“<span style=\"font-family:Times New Roman\">false</span>”，则通过<span style=\"font-family:Times New Roman\">BeanFactory</span>获取此<span style=\"font-family:Times New Roman\">Java\n Bean</span>实例时，<span style=\"font-family:Times New Roman\">BeanFactory</span>每次都将创建一个新的实例返回。</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">abstract</span>属性</strong>：设定<span style=\"font-family:Times New Roman\">ApplicationContext</span>是否对<span style=\"font-family:Times New Roman\">bean</span>进行预先的初始化。</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">parent</span>属性</strong>：定义一个模板。</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">autowire</span>属性</strong>：<span style=\"font-family:Times New Roman\">bean</span>自动装配模式。可选<span style=\"font-family:Times New Roman\">5</span>种模式。</span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Times New Roman\">no</span>：不使用自动装配。<span style=\"font-family:Times New Roman\">Bean</span>的引用必须通过<span style=\"font-family:Times New Roman\">ref</span>元素定义。</span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Times New Roman\">byName</span>：通过属性名字进行自动装配。</span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Times New Roman\">byType</span>：如果<span style=\"font-family:Times New Roman\">BeanFactory</span>中正好有一个同属性类型一样的<span style=\"font-family:Times New Roman\">bean</span>，就自动装配这个属性。如果有多于一个这样的<span style=\"font-family:Times New Roman\">bean</span>，就抛出一个致命异常，它指出你可能不能对那个<span style=\"font-family:Times New Roman\">bean</span>使用<span style=\"font-family:Times New Roman\">byType</span>的自动装配。如果没有匹配的<span style=\"font-family:Times New Roman\">bean</span>，则什么都不会发生，属性不会被设置。如果这是你不想要的情况（什么都不发生），通过设置<span style=\"font-family:Times New Roman\">dependency-check=&quot;objects&quot;</span>属性&#20540;来指定在这种情况下应该抛出错误。</span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Times New Roman\">constructor</span>：这个同<span style=\"font-family:Times New Roman\">byType</span>类&#20284;，不过是应用于构造函数的参数。如果在<span style=\"font-family:Times New Roman\">BeanFactory</span>中不是恰好有一个<span style=\"font-family:Times New Roman\">bean</span>与构造函数参数相同类型，则一个致命的错误会产生。</span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Times New Roman\">autodetect</span>：通过对<span style=\"font-family:Times New Roman\">bean</span> 检查类的内部来选择<span style=\"font-family:Times New Roman\">constructor</span>或<span style=\"font-family:Times New Roman\">byType</span>。如果找到一个缺省的构造函数，那么就会应用<span style=\"font-family:Times New Roman\">byType</span>。</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">dependency-check</span>属性</strong>：依赖检查模式。可选四种。</span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Times New Roman\">none</span> ：不进行依赖检查。没有指定&#20540;的<span style=\"font-family:Times New Roman\">bean</span>属性仅仅是没有设&#20540;。</span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Times New Roman\">Simple</span>：对基本类型和集合（除了合作者外，比如其他的<span style=\"font-family:Times New Roman\">bean</span>，所有东西）进行依赖检查。</span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Times New Roman\">Object</span>：对合作者进行依赖检查。</span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Times New Roman\">all</span> ：对合作者，基本类型和集合都进行依赖检查。</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">lazy-init</span>属性</strong>：延迟加载。<span style=\"font-family:Times New Roman\">True</span> 或<span style=\"font-family:Times New Roman\">False</span> 。</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">init-method</span>属性</strong>：初始化方法，此方法将在<span style=\"font-family:Times New Roman\">BeanFactory</span>创建<span style=\"font-family:Times New Roman\">JavaBean</span>实例之后，在向应用层返回引用之前执行。一般用于一些资源的初始化工作。</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">destroy-method</span>属性</strong>：销毁方法。此方法将在<span style=\"font-family:Times New Roman\">BeanFactory</span>销毁的时候执行，一般用于资源释放。</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">factory-bean</span>属性</strong>：通过实例工厂方法创建<span style=\"font-family:Times New Roman\">bean</span>，<span style=\"font-family:Times New Roman\">class</span>属性必须为空，<span style=\"font-family:Times New Roman\">factory-bean</span>属性必</span></p>\n<p><span style=\"font-size:18px\">须指定一个<span style=\"font-family:Times New Roman\">bean</span>的名字，这个<span style=\"font-family:Times New Roman\">bean</span>一定要在当前的<span style=\"font-family:Times New Roman\">bean</span>工厂或者父<span style=\"font-family:Times New Roman\">bean</span>工厂中，并包含工厂方法。而工厂方法本身通过<span style=\"font-family:Times New Roman\">factory-method</span>属性设置。</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">factory-method</span>属性</strong>：设定工厂类的工厂方法。</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">depends-on</span>属性</strong>：<span style=\"font-family:Times New Roman\">Bean</span>依赖关系。一般情况下无需设定。<span style=\"font-family:Times New Roman\">Spring</span>会根据情况组织各个依赖关系的构建工作。只有某些特殊情况下，如<span style=\"font-family:Times New Roman\">JavaBean</span>中的某些静态变量需要进行初始化（这是一种<span style=\"font-family:Times New Roman\">BadSmell</span>，应该在设计上应该避免）。通过<span style=\"font-family:Times New Roman\">depends-on</span>指定其依赖关系可保证在此<span style=\"font-family:Times New Roman\">Bean</span>加载之前，首先对<span style=\"font-family:Times New Roman\">depends-on</span>所指定的资源进行加载。</span></p>\n<p><span style=\"font-size:18px\">----------------------------------------------------------------------------------------------</span></p>\n<p><span style=\"font-size:18px\"></span></p>\n<table>\n<tbody>\n<tr>\n<td>\n<div>\n<p><span style=\"font-size:18px\"></span></p>\n<p align=\"center\"><strong><span style=\"font-family:Times New Roman; font-size:18px\"><strong>Spring Bean 配置说明</strong></span></strong></p>\n<p><strong><span style=\"font-family:Times New Roman; font-size:18px\">&lt;property&gt;</span></strong></p>\n<p><span style=\"font-size:18px\">用于设置一个属性。</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">name</span>属性</strong>：属性的名称。</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">value</span>属性</strong>：指定<span style=\"font-family:Times New Roman\">bean</span>的属性&#20540;。<span style=\"font-family:Times New Roman\">BeanFactory</span>将自动根据<span style=\"font-family:Times New Roman\">Java\n Bean</span>对应的属性类型加以匹配。如果需要将属性&#20540;设定为<span style=\"font-family:Times New Roman\">null</span>，必须使用<span style=\"font-family:Times New Roman\">&lt;null/&gt;</span>节点。</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">ref</span>属性</strong>：指定了属性对<span style=\"font-family:Times New Roman\">BeanFactory</span>中其他<span style=\"font-family:Times New Roman\">Bean</span>的引用关系。</span></p>\n<p><span style=\"font-size:18px\"></span></p>\n<p><strong><span style=\"font-size:18px\">&lt;value&gt;</span></strong></p>\n<p><span style=\"font-size:18px\">指定<span style=\"font-family:Times New Roman\">bean</span>的属性&#20540;。</span></p>\n<p><span style=\"font-size:18px\"></span></p>\n<p><strong><span style=\"font-size:18px\">&lt;ref&gt;</span></strong></p>\n<p><span style=\"font-size:18px\">指定了属性对<span style=\"font-family:Times New Roman\">BeanFactory</span>中其他<span style=\"font-family:Times New Roman\">Bean</span>的引用关系。</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">bean</span>属性</strong>：指定了属性对<span style=\"font-family:Times New Roman\">BeanFactory</span>中其他<span style=\"font-family:Times New Roman\">Bean</span>的引用关系。</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">local</span>属性</strong>：指定了属性对<span style=\"font-family:Times New Roman\">BeanFactory</span>中其他<span style=\"font-family:Times New Roman\">Bean</span>的引用关系。（仅在本地（同一个）<span style=\"font-family:Times New Roman\">xml</span>文件里寻找<span style=\"font-family:Times New Roman\">bean</span>。</span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Times New Roman\"><strong>parent</strong></span><strong>属性</strong>：指定了属性对<span style=\"font-family:Times New Roman\">BeanFactory</span>中其他<span style=\"font-family:Times New Roman\">Bean</span>模板的引用关系。</span></p>\n<p><span style=\"font-size:18px\"></span></p>\n<p><strong><span style=\"font-family:Times New Roman; font-size:18px\">&lt;list&gt;</span></strong></p>\n<p><span style=\"font-size:18px\">指定<span style=\"font-family:Times New Roman\">bean</span>的属性类型为<span style=\"font-family:Times New Roman\">List</span>的属性&#20540;。</span></p>\n<p><span style=\"font-size:18px\"></span></p>\n<p><strong><span style=\"font-family:Times New Roman; font-size:18px\">&lt;map&gt;</span></strong></p>\n<p><span style=\"font-size:18px\">指定<span style=\"font-family:Times New Roman\">bean</span>的属性类型为<span style=\"font-family:Times New Roman\">List</span>的属性&#20540;。</span></p>\n<p><span style=\"font-size:18px\"></span></p>\n<p><strong><span style=\"font-family:Times New Roman; font-size:18px\">&lt;set&gt;</span></strong></p>\n<p><span style=\"font-size:18px\">指定<span style=\"font-family:Times New Roman\">bean</span>的属性类型为<span style=\"font-family:Times New Roman\">List</span>的属性&#20540;。</span></p>\n<p><span style=\"font-size:18px\"></span></p>\n<p><span style=\"font-family:Times New Roman; font-size:18px\"><strong>&lt;props&gt;</strong></span></p>\n<p><span style=\"font-size:18px\">指定<span style=\"font-family:Times New Roman\">bean</span>的属性类型为<span style=\"font-family:Times New Roman\">Properties</span>的属性&#20540;。</span></p>\n<p><span style=\"font-size:18px\"></span></p>\n<p><strong><span style=\"font-family:Times New Roman; font-size:18px\">&lt;prop&gt;</span></strong></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">key</span>属性</strong>：指定<span style=\"font-family:Times New Roman\">Properties</span>的键</span></p>\n<p><span style=\"font-size:18px\"></span></p>\n<p><strong><span style=\"font-family:Times New Roman; font-size:18px\">&lt;idref&gt;</span></strong></p>\n<p><span style=\"font-size:18px\">用来设置属性&#20540;为容器中其他<span style=\"font-family:Times New Roman\">bean</span>的<span style=\"font-family:Times New Roman\">id</span> 或<span style=\"font-family:Times New Roman\">name</span>。</span></p>\n<p><span style=\"font-size:18px\"></span></p>\n<p><span style=\"font-family:Times New Roman; font-size:18px\"><strong>&lt;null&gt;</strong></span></p>\n<p><span style=\"font-size:18px\">指定一个空&#20540;。</span></p>\n<p><span style=\"font-size:18px\"></span></p>\n<p><span style=\"font-family:Times New Roman; font-size:18px\"><strong>&lt;constructor-arg&gt;</strong></span></p>\n<p><span style=\"font-size:18px\">使用构造方法注入，指定构造方法的参数。</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">index</span>属性</strong>：设置参数的序号。</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">ref</span>属性</strong>：同<span style=\"font-family:Times New Roman\">ref</span></span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">type</span>属性</strong>：参数类型。</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">value</span>属性</strong>：参数的&#20540;。</span></p>\n<p><span style=\"font-size:18px\"></span></p>\n<p><span style=\"font-family:Times New Roman; font-size:18px\"><strong>&lt;lookup-method&gt;</strong></span></p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Times New Roman\">lookup</span>方法注入</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">bean</span>属性</strong>：要注入的<span style=\"font-family:Times New Roman\">bean</span>名</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">name</span>属性</strong>：要注入的方法名称</span></p>\n<p><span style=\"font-size:18px\"></span></p>\n<p><span style=\"font-family:Times New Roman; font-size:18px\"><strong>&lt;replaced-method&gt;</strong></span></p>\n<p><span style=\"font-size:18px\">用来把已存在的方法实现替换为其他的实现。</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">name</span>属性</strong>：要替换的方法名</span></p>\n<p><span style=\"font-size:18px\"><strong><span style=\"font-family:Times New Roman\">replacer</span>属性</strong>：替换者类，实现<span style=\"font-family:Times New Roman\">org.springframework.beans.factory.support.MethodReplacer</span></span></p>\n<p><span style=\"font-size:18px\">接口）</span></p>\n<p><span style=\"font-size:18px\"></span></p>\n<p><strong><span style=\"font-family:Times New Roman; font-size:18px\">&lt;arg-type&gt;</span></strong></p>\n<p><span style=\"font-size:18px\">方法返回的类型</span></p>\n<p><span style=\"font-size:18px\"></span>&nbsp;</p>\n<p><span style=\"font-size:18px\"></span>&nbsp;</p>\n<p dir=\"ltr\" style=\"margin-right:0px\"><span style=\"font-size:24px\"><span style=\"color:#ff00\"><span style=\"font-family:Calibri\"><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n</span>一、Bean</span>的定义</span></span></p>\n<p dir=\"ltr\" style=\"margin-right:0px\"><span style=\"font-size:18px\"><span style=\"font-family:Calibri\"><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n</span>&lt;beans…/&gt;</span>元素是<span style=\"font-family:Calibri\">Spring</span>配置文件的根元素，<span style=\"font-family:Calibri\">&lt;bean…/&gt;</span>元素师<span style=\"font-family:Calibri\">&lt;beans../&gt;</span>元素的子元素，<span style=\"font-family:Calibri\">&lt;beans…/&gt;</span>元素可以包含多个<span style=\"font-family:Calibri\">&lt;bean…/&gt;</span>子元素，每个<span style=\"font-family:Calibri\">&lt;bean…/&gt;</span>元素可以定义一个<span style=\"font-family:Calibri\">Bean</span>实例，每一个<span style=\"font-family:Calibri\">Bean</span>对应<span style=\"font-family:Calibri\">Spring</span>容器里的一个<span style=\"font-family:Calibri\">Java</span>实例</span><span style=\"font-size:18px\">定义<span style=\"font-family:Calibri\">Bean</span>时通常需要指定两个属性。</span></p>\n<p dir=\"ltr\" style=\"margin-right:0px\"><span style=\"font-size:18px\"><span style=\"font-family:Calibri\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Id</span>：确定该<span style=\"font-family:Calibri\">Bean</span>的唯一标识符，容器对<span style=\"font-family:Calibri\">Bean</span>管理、访问、以及该<span style=\"font-family:Calibri\">Bean</span>的依赖关系，都通过该属性完成。<span style=\"font-family:Calibri\">Bean</span>的<span style=\"font-family:Calibri\">id</span>属性在<span style=\"font-family:Calibri\">Spring</span>容器中是唯一的。<span style=\"font-family:Calibri\">&nbsp;&nbsp;&nbsp;&nbsp;\n</span></span></p>\n<p dir=\"ltr\" style=\"margin-right:0px\"><span style=\"font-size:18px\"><span style=\"font-family:Calibri\"><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n</span>Class</span>：指定该<span style=\"font-family:Calibri\">Bean</span>的具体实现类。注意这里不能使接口。通常情况下，<span style=\"font-family:Calibri\">Spring</span>会直接使用<span style=\"font-family:Calibri\">new</span>关键字创建该<span style=\"font-family:Calibri\">Bean</span>的实例，因此，这里必须提供<span style=\"font-family:Calibri\">Bean</span>实现类的类名。</span></p>\n<p dir=\"ltr\" style=\"margin-right:0px\"><span style=\"font-size:18px\"><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n</span>下面是定义一个<span style=\"font-family:Calibri\">Bean</span>的简单配置</span><span style=\"font-size:18px\"><span style=\"font-family:Calibri\"><span style=\"font-size:18px\"></span></span></span></p>\n<div class=\"dp-highlighter bg_html\">\n<div class=\"bar\">\n<div class=\"tools\"><strong>[html]</strong> <a target=\"_blank\" title=\"view plain\" class=\"ViewSource\" href=\"http://blog.csdn.net/chenssy/article/details/8222744#\">\nview plain</a><a target=\"_blank\" title=\"copy\" class=\"CopyToClipboard\" href=\"http://blog.csdn.net/chenssy/article/details/8222744#\">copy</a><a target=\"_blank\" title=\"print\" class=\"PrintSource\" href=\"http://blog.csdn.net/chenssy/article/details/8222744#\">print</a><a target=\"_blank\" title=\"?\" class=\"About\" href=\"http://blog.csdn.net/chenssy/article/details/8222744#\">?</a></div>\n</div>\n<ol class=\"dp-xml\">\n<li class=\"alt\"><span><span class=\"tag\">&lt;?</span><span class=\"tag-name\">xml</span><span>&nbsp;</span><span class=\"attribute\">version</span><span>=</span><span class=\"attribute-value\">&quot;1.0&quot;</span><span>&nbsp;</span><span class=\"attribute\">encoding</span><span>=</span><span class=\"attribute-value\">&quot;UTF-8&quot;</span><span class=\"tag\">?&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=\"tag\">&lt;</span><span class=\"tag-name\">beans</span><span>&nbsp;</span><span class=\"attribute\">xmlns:xsi</span><span>=</span><span class=\"attribute-value\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">xmlns</span><span>=</span><span class=\"attribute-value\">&quot;http://www.springframework.org/schema/beans&quot;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">xsi:schemaLocation</span><span>=&quot;http://www.springframework.org/schema/beans&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;<span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comments\">&lt;!--&nbsp;定义第一个Bean实例：bean1&nbsp;--&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">bean</span><span>&nbsp;</span><span class=\"attribute\">id</span><span>=</span><span class=\"attribute-value\">&quot;bean1&quot;</span><span>&nbsp;</span><span class=\"attribute\">class</span><span>=</span><span class=\"attribute-value\">&quot;com.Bean1&quot;</span><span>&nbsp;</span><span class=\"tag\">/&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comments\">&lt;!--&nbsp;定义第二个Bean实例：bean2&nbsp;--&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">bean</span><span>&nbsp;</span><span class=\"attribute\">id</span><span>=</span><span class=\"attribute-value\">&quot;bean2&quot;</span><span>&nbsp;</span><span class=\"attribute\">class</span><span>=</span><span class=\"attribute-value\">&quot;com.Bean2&quot;</span><span>&nbsp;</span><span class=\"tag\">/&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li><span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">bean</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li></ol>\n</div>\n<pre class=\"html\" style=\"display: none;\" name=\"code\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n	xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n	xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\n	http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;&gt;\n	&lt;!-- 定义第一个Bean实例：bean1 --&gt;\n	&lt;bean id=&quot;bean1&quot; class=&quot;com.Bean1&quot; /&gt;\n	\n	&lt;!-- 定义第二个Bean实例：bean2 --&gt;\n	&lt;bean id=&quot;bean2&quot; class=&quot;com.Bean2&quot; /&gt;\n	\n&lt;/bean&gt;</pre>\n<p>&nbsp;</p>\n<p dir=\"ltr\" style=\"margin-right:0px\"><span style=\"font-size:18px\"><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n</span></span></p>\n<p><span style=\"font-family:Calibri; font-size:14px\"><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n</span>Spring</span>容器集中管理<span style=\"font-family:Calibri\">Bean</span>的实例化，<span style=\"font-family:Calibri\">Bean</span>实例可以通过<span style=\"font-family:Calibri\">BeanFactory</span>的<span style=\"font-family:Calibri\">getBean(Stringbeanid)</span>方法得到。<span style=\"font-family:Calibri\">BeanFactory</span>是一个工厂，程序只需要获取<span style=\"font-family:Calibri\">BeanFactory</span>引用，即可获得<span style=\"font-family:Calibri\">Spring</span>容器管理全部实例的引用。程序不需要与具体实例的实现过程耦合。大部分<span style=\"font-family:Calibri\">Java\n EE</span>应用里，应用在启动时，会自动创建<span style=\"font-family:Calibri\">Spring</span>容器，组件之间直接以依赖注入的方式耦合，甚至无须主动访问<span style=\"font-family:Calibri\">Spring</span>容器本身。</p>\n<p dir=\"ltr\" style=\"margin-right:0px\"><span style=\"font-size:18px\"><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n</span>当我们在配置文件中通过<span style=\"font-family:Calibri\">&lt;bean id=”xxxx” class=”xx.XxClass”/&gt;</span>方法配置一个<span style=\"font-family:Calibri\">Bean</span>时，这样就需要该<span style=\"font-family:Calibri\">Bean</span>实现类中必须有一个无参构造器。故<span style=\"font-family:Calibri\">Spring</span>底层相当于调用了如下代码：</span></p>\n<p><span style=\"font-family:Calibri; font-size:18px\"></span>&nbsp;</p>\n<div class=\"dp-highlighter bg_html\">\n<div class=\"bar\">\n<div class=\"tools\"><strong>[html]</strong> <a target=\"_blank\" title=\"view plain\" class=\"ViewSource\" href=\"http://blog.csdn.net/chenssy/article/details/8222744#\">\nview plain</a><a target=\"_blank\" title=\"copy\" class=\"CopyToClipboard\" href=\"http://blog.csdn.net/chenssy/article/details/8222744#\">copy</a><a target=\"_blank\" title=\"print\" class=\"PrintSource\" href=\"http://blog.csdn.net/chenssy/article/details/8222744#\">print</a><a target=\"_blank\" title=\"?\" class=\"About\" href=\"http://blog.csdn.net/chenssy/article/details/8222744#\">?</a></div>\n</div>\n<ol class=\"dp-xml\">\n<li class=\"alt\"><span><span class=\"attribute\">Xxx</span><span>&nbsp;=&nbsp;</span><span class=\"attribute-value\">new</span><span>&nbsp;xx.XxClass()&nbsp;&nbsp;</span></span></li></ol>\n</div>\n<pre class=\"html\" style=\"display: none;\" name=\"code\">Xxx = new xx.XxClass()</pre>\n<p>&nbsp;</p>\n<p dir=\"ltr\" style=\"margin-right:0px\"><br>\n<span style=\"font-size:18px\"><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>如果在配置文件中通过构造注入来创建<span style=\"font-family:Calibri\">Bean</span>：</span></p>\n<p><span style=\"font-size:18px\"></span>&nbsp;</p>\n<div class=\"dp-highlighter bg_html\">\n<div class=\"bar\">\n<div class=\"tools\"><strong>[html]</strong> <a target=\"_blank\" title=\"view plain\" class=\"ViewSource\" href=\"http://blog.csdn.net/chenssy/article/details/8222744#\">\nview plain</a><a target=\"_blank\" title=\"copy\" class=\"CopyToClipboard\" href=\"http://blog.csdn.net/chenssy/article/details/8222744#\">copy</a><a target=\"_blank\" title=\"print\" class=\"PrintSource\" href=\"http://blog.csdn.net/chenssy/article/details/8222744#\">print</a><a target=\"_blank\" title=\"?\" class=\"About\" href=\"http://blog.csdn.net/chenssy/article/details/8222744#\">?</a></div>\n</div>\n<ol class=\"dp-xml\">\n<li class=\"alt\"><span><span class=\"tag\">&lt;?</span><span class=\"tag-name\">xml</span><span>&nbsp;</span><span class=\"attribute\">version</span><span>=</span><span class=\"attribute-value\">&quot;1.0&quot;</span><span>&nbsp;</span><span class=\"attribute\">encoding</span><span>=</span><span class=\"attribute-value\">&quot;UTF-8&quot;</span><span class=\"tag\">?&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=\"tag\">&lt;</span><span class=\"tag-name\">beans</span><span>&nbsp;</span><span class=\"attribute\">xmlns:xsi</span><span>=</span><span class=\"attribute-value\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">xmlns</span><span>=</span><span class=\"attribute-value\">&quot;http://www.springframework.org/schema/beans&quot;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">xsi:schemaLocation</span><span>=&quot;http://www.springframework.org/schema/beans&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;<span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">bean</span><span>&nbsp;</span><span class=\"attribute\">id</span><span>=</span><span class=\"attribute-value\">&quot;bean1&quot;</span><span>&nbsp;</span><span class=\"attribute\">class</span><span>=</span><span class=\"attribute-value\">&quot;com.Bean1&quot;</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">constructor-arg</span><span>&nbsp;</span><span class=\"attribute\">value</span><span>=</span><span class=\"attribute-value\">&quot;chenssy&quot;</span><span class=\"tag\">/&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">constructor-arg</span><span>&nbsp;</span><span class=\"attribute\">value</span><span>=</span><span class=\"attribute-value\">&quot;35-354&quot;</span><span class=\"tag\">/&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;/</span><span class=\"tag-name\">bean</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class=\"alt\"><span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">beans</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li></ol>\n</div>\n<pre class=\"html\" style=\"display: none;\" name=\"code\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n	xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n	xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\n	http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;&gt;\n	&lt;bean id=&quot;bean1&quot; class=&quot;com.Bean1&quot;&gt;\n		&lt;constructor-arg value=&quot;chenssy&quot;/&gt;\n		&lt;constructor-arg value=&quot;35-354&quot;/&gt;\n	&lt;/bean&gt;\n	\n&lt;/beans&gt;</pre>\n<p>&nbsp;</p>\n<p dir=\"ltr\" style=\"margin-right:0px\"><br>\n<span style=\"font-size:18px\"><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>则<span style=\"font-family:Calibri\">Spring</span>相当于调用如下代码：</span></p>\n<p><span style=\"font-family:Calibri; font-size:18px\"></span>&nbsp;</p>\n<div class=\"dp-highlighter bg_html\">\n<div class=\"bar\">\n<div class=\"tools\"><strong>[html]</strong> <a target=\"_blank\" title=\"view plain\" class=\"ViewSource\" href=\"http://blog.csdn.net/chenssy/article/details/8222744#\">\nview plain</a><a target=\"_blank\" title=\"copy\" class=\"CopyToClipboard\" href=\"http://blog.csdn.net/chenssy/article/details/8222744#\">copy</a><a target=\"_blank\" title=\"print\" class=\"PrintSource\" href=\"http://blog.csdn.net/chenssy/article/details/8222744#\">print</a><a target=\"_blank\" title=\"?\" class=\"About\" href=\"http://blog.csdn.net/chenssy/article/details/8222744#\">?</a></div>\n</div>\n<ol class=\"dp-xml\">\n<li class=\"alt\"><span><span>Bean&nbsp;</span><span class=\"attribute\">bean</span><span>&nbsp;=&nbsp;</span><span class=\"attribute-value\">new</span><span>&nbsp;com.Test(&quot;chenssy&quot;,&quot;35-354&quot;);&nbsp;&nbsp;</span></span></li></ol>\n</div>\n<pre class=\"html\" style=\"display: none;\" name=\"code\">Bean bean = new com.Test(&quot;chenssy&quot;,&quot;35-354&quot;);</pre>\n<p>&nbsp;</p>\n<p dir=\"ltr\" style=\"margin-right:0px\"><span style=\"font-size:18px\"><span style=\"font-family:Calibri; font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n</span>除了可以为<span style=\"font-family:Calibri\">&lt;bean…/&gt;</span>元素指定一个<span style=\"font-family:Calibri\">id</span>属性外，还可以为<span style=\"font-family:Calibri\">&lt;bean…/&gt;</span>元素指定<span style=\"font-family:Calibri\">name</span>属性，用于为<span style=\"font-family:Calibri\">Bean</span>实例指定别名。如果需要为<span style=\"font-family:Calibri\">Bean</span>实例指定多个别名，可以在<span style=\"font-family:Calibri\">name</span>属性中使用逗号、冒号或者空&#26684;来分隔多个别名，后面通过任一别名即可访问该<span style=\"font-family:Calibri\">Bean</span>实例。但是在一些特殊的情况下，程序无法在定义<span style=\"font-family:Calibri\">Bean</span>时就指定所有的别名，而是在其他地方为一个已经存在的<span style=\"font-family:Calibri\">Bean</span>实例指定别名，则可以使用<span style=\"font-family:Calibri\">&lt;alias…/&gt;</span>元素来完成，该元素有如下两个属性：</span></p>\n<p dir=\"ltr\" style=\"margin-right:0px\"><span style=\"font-size:18px\"><span style=\"font-family:Calibri\"><span style=\"font-family:Calibri; font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n</span>name</span>：该属性指定一个<span style=\"font-family:Calibri\">Bean</span>实例的标识名，表示将会为该<span style=\"font-family:Calibri\">Bean</span>指定别名。</span></p>\n<p dir=\"ltr\" style=\"margin-right:0px\"><span style=\"font-size:18px\"><span style=\"font-family:Calibri\"><span style=\"font-family:Calibri; font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n</span>alias</span>：指定一个别名<span style=\"font-family:Calibri\">.</span></span></p>\n<p dir=\"ltr\" style=\"margin-right:0px\"><span style=\"font-size:18px\"><span style=\"font-family:Calibri; font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n</span>如：</span></p>\n<p><span style=\"font-family:Calibri; font-size:18px\"></span>&nbsp;</p>\n<div class=\"dp-highlighter bg_html\">\n<div class=\"bar\">\n<div class=\"tools\"><strong>[html]</strong> <a target=\"_blank\" title=\"view plain\" class=\"ViewSource\" href=\"http://blog.csdn.net/chenssy/article/details/8222744#\">\nview plain</a><a target=\"_blank\" title=\"copy\" class=\"CopyToClipboard\" href=\"http://blog.csdn.net/chenssy/article/details/8222744#\">copy</a><a target=\"_blank\" title=\"print\" class=\"PrintSource\" href=\"http://blog.csdn.net/chenssy/article/details/8222744#\">print</a><a target=\"_blank\" title=\"?\" class=\"About\" href=\"http://blog.csdn.net/chenssy/article/details/8222744#\">?</a></div>\n</div>\n<ol class=\"dp-xml\">\n<li class=\"alt\"><span><span class=\"tag\">&lt;</span><span class=\"tag-name\">alias</span><span>&nbsp;</span><span class=\"attribute\">name</span><span>=”bean1”&nbsp;</span><span class=\"attribute\">alias</span><span>=”name1”</span><span class=\"tag\">/&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=\"tag\">&lt;</span><span class=\"tag-name\">alias</span><span>&nbsp;</span><span class=\"attribute\">name</span><span>=”bean2”&nbsp;</span><span class=\"attribute\">alias</span><span>=”name2”</span><span class=\"tag\">/&gt;</span><span>&nbsp;&nbsp;</span></span></li></ol>\n</div>\n<pre class=\"html\" style=\"display: none;\" name=\"code\">&lt;alias name=”bean1” alias=”name1”/&gt;\n&lt;alias name=”bean2” alias=”name2”/&gt;\n</pre>\n<p>&nbsp;</p>\n<p dir=\"ltr\" style=\"margin-right:0px\"><span style=\"font-size:18px\"><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n</span>在默认情况下，当<span style=\"font-family:Calibri\">Spring</span>创建<span style=\"font-family:Calibri\">ApplicationContext</span>容器时，<span style=\"font-family:Calibri\">Spring</span>会自动预初始化容器中所有的<span style=\"font-family:Calibri\">singleton</span>实例，如果我们想让<span style=\"font-family:Calibri\">Spring</span>容器预初始化某个<span style=\"font-family:Calibri\">singleton\n Bean</span>，则可以为该<span style=\"font-family:Calibri\">&lt;bean…/&gt;</span>元素增加<span style=\"font-family:Calibri\">lazy-init</span>属性，该属性用于指定该<span style=\"font-family:Calibri\">Bean</span>实例的预初始化，如果设置为<span style=\"font-family:Calibri\">true</span>，则<span style=\"font-family:Calibri\">Spring</span>不会预初始化该<span style=\"font-family:Calibri\">Bean</span>实例。</span></p>\n<div class=\"dp-highlighter bg_html\">\n<div class=\"bar\">\n<div class=\"tools\"><strong>[html]</strong> <a target=\"_blank\" title=\"view plain\" class=\"ViewSource\" href=\"http://blog.csdn.net/chenssy/article/details/8222744#\">\nview plain</a><a target=\"_blank\" title=\"copy\" class=\"CopyToClipboard\" href=\"http://blog.csdn.net/chenssy/article/details/8222744#\">copy</a><a target=\"_blank\" title=\"print\" class=\"PrintSource\" href=\"http://blog.csdn.net/chenssy/article/details/8222744#\">print</a><a target=\"_blank\" title=\"?\" class=\"About\" href=\"http://blog.csdn.net/chenssy/article/details/8222744#\">?</a></div>\n</div>\n<ol class=\"dp-xml\">\n<li class=\"alt\"><span><span class=\"tag\">&lt;</span><span class=\"tag-name\">bean</span><span>&nbsp;</span><span class=\"attribute\">id</span><span>=”person”&nbsp;</span><span class=\"attribute\">class</span><span>=”com.Person”&nbsp;</span><span class=\"attribute\">lazy-init</span><span>=”true”</span><span class=\"tag\">/&gt;</span><span>&nbsp;&nbsp;</span></span></li></ol>\n</div>\n<pre class=\"html\" style=\"display: none;\" name=\"code\">&lt;bean id=”person” class=”com.Person” lazy-init=”true”/&gt;</pre>\n<p>&nbsp;</p>\n<p dir=\"ltr\" style=\"margin-right:0px\">&nbsp;</p>\n<p><span style=\"font-size:18px\"><span style=\"font-family:Calibri\"></span></span></p>\n<p><span style=\"color:red\"><span style=\"font-family:Calibri\"><span style=\"font-family:Calibri; font-size:18px; color:#ff00\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n</span>一、</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style=\"color:red\">容器中</span><span style=\"color:red\"><span style=\"font-family:Calibri\">Bean</span></span><span style=\"color:red\">的作用域</span><span style=\"font-size:18px\"><span style=\"font-family:Calibri; font-size:18px; color:#ff00\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n</span>当通过<span style=\"font-family:Calibri\">Spring</span>容器创建一个<span style=\"font-family:Calibri\">Bean</span>实例时，不仅可以完成<span style=\"font-family:Calibri\">Bean</span>实例的实例化，还可以为<span style=\"font-family:Calibri\">Bean</span>指定特定的作用域。</span></p>\n<p dir=\"ltr\" style=\"margin-right:0px\"><span style=\"font-size:18px\"><span style=\"font-family:Calibri\"><span style=\"font-family:Calibri; font-size:18px; color:#ff00\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n</span>Spring</span>支持<span style=\"font-family:Calibri\">5</span>种作用域：</span></p>\n<p dir=\"ltr\" style=\"margin-right:0px\"><span style=\"font-size:18px\"><span style=\"font-family:Calibri\"><span style=\"font-family:Calibri; font-size:18px; color:#ff00\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;Singleton</span>：单例模式。在整个<span style=\"font-family:Calibri\">SpringIoC</span>容器中，使用<span style=\"font-family:Calibri\">singleton</span>定义的<span style=\"font-family:Calibri\">Bean</span>将只有一个实例。</span></p>\n<p dir=\"ltr\" style=\"margin-right:0px\"><span style=\"font-size:18px\"><span style=\"font-family:Calibri\"><span style=\"font-family:Calibri; font-size:18px; color:#ff00\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp;&nbsp;Prototype</span>：原型模式。每次通过容器的<span style=\"font-family:Calibri\">getBean</span>方法获取<span style=\"font-family:Calibri\">prototype</span>定义的<span style=\"font-family:Calibri\">Bean</span>时，都将产生一个新的<span style=\"font-family:Calibri\">Bean</span>实例。</span></p>\n<p dir=\"ltr\" style=\"margin-right:0px\"><span style=\"font-size:18px\"><span style=\"font-family:Calibri\"><span style=\"font-family:Calibri; font-size:18px; color:#ff00\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>&nbsp;&nbsp;&nbsp; request</span>：对于每次<span style=\"font-family:Calibri\">HTTP</span>请求，使用<span style=\"font-family:Calibri\">request</span>定义的<span style=\"font-family:Calibri\">Bean</span>都将产生一个新的实例，即每次<span style=\"font-family:Calibri\">HTTP</span>请求都会产生不同的<span style=\"font-family:Calibri\">Bean</span>实例。当然只有在<span style=\"font-family:Calibri\">WEB</span>应用中使用<span style=\"font-family:Calibri\">Spring</span>时，该作用域才真正有效。</span></p>\n<p dir=\"ltr\" style=\"margin-right:0px\"><span style=\"font-size:18px\"><span style=\"font-family:Calibri\"><span style=\"font-family:Calibri; font-size:18px; color:#ff00\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n</span>session</span>：对于每次<span style=\"font-family:Calibri\">HTTPSession</span>，使用<span style=\"font-family:Calibri\">session</span>定义的<span style=\"font-family:Calibri\">Bean</span>都将产生一个新的实例时，即每次<span style=\"font-family:Calibri\">HTTP Session</span>都将产生不同的<span style=\"font-family:Calibri\">Bean</span>实例。同<span style=\"font-family:Calibri\">HTTP</span>一样，只有在<span style=\"font-family:Calibri\">WEB</span>应用才会有效。</span></p>\n<p dir=\"ltr\" style=\"margin-right:0px\"><span style=\"font-size:18px\"><span style=\"font-family:Calibri\"><span style=\"font-family:Calibri; font-size:18px; color:#ff00\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n</span>global session</span>：每个全局的<span style=\"font-family:Calibri\">HTTPSession</span>对应一个<span style=\"font-family:Calibri\">Bean</span>实例。仅在<span style=\"font-family:Calibri\">portlet Context</span>的时候才有效。</span></p>\n<p dir=\"ltr\" style=\"margin-right:0px\"><span style=\"font-size:18px\"><span style=\"font-family:Calibri; font-size:18px; color:#ff00\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n</span></span></p>\n<p dir=\"ltr\" style=\"margin-right:0px\"><span style=\"font-size:18px\"><span style=\"font-family:Calibri; font-size:18px; color:#ff00\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n</span>比较常用的<span style=\"font-family:Calibri\">singleton</span>和<span style=\"font-family:Calibri\">prototype</span>。如果一个<span style=\"font-family:Calibri\">Bean</span>实例被设置为<span style=\"font-family:Calibri\">singleton</span>，那么每次请求该<span style=\"font-family:Calibri\">Bean</span>时都会获得相同的实例。容器负责跟踪<span style=\"font-family:Calibri\">Bean</span>实例的状态，负责维护<span style=\"font-family:Calibri\">Bean</span>实例的生命周期行为。如果一个<span style=\"font-family:Calibri\">Bean</span>实例被设置为<span style=\"font-family:Calibri\">prototype</span>，那么每次请求该<span style=\"font-family:Calibri\">di</span>的<span style=\"font-family:Calibri\">Bean</span>，<span style=\"font-family:Calibri\">Spring</span>都会创建一个新的<span style=\"font-family:Calibri\">Bean</span>实例返回给程序，在这种情况下，<span style=\"font-family:Calibri\">Spring</span>容器仅仅使用<span style=\"font-family:Calibri\">new</span>关键字创建<span style=\"font-family:Calibri\">Bean</span>实例，一旦创建成功，容器将不会再跟踪实例，也不会维护<span style=\"font-family:Calibri\">Bean</span>实例的状态。</span></p>\n<p dir=\"ltr\" style=\"margin-right:0px\"><span style=\"font-size:18px\"><span style=\"font-family:Calibri; font-size:18px; color:#ff00\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n</span>如果我们不指定<span style=\"font-family:Calibri\">Bean</span>的作用域，则<span style=\"font-family:Calibri\">Spring</span>会默认使用<span style=\"font-family:Calibri\">singleton</span>作用域。</span></p>\n<p dir=\"ltr\" style=\"margin-right:0px\"><span style=\"font-size:18px\"><span style=\"font-family:Calibri\"><span style=\"font-family:Calibri; font-size:18px; color:#ff00\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n</span>Java</span>在创建<span style=\"font-family:Calibri\">Java</span>实例时，需要进行内存申请。销毁实例时，需要完成垃圾回收。这些工作都会导致系统开销的增加。因此，<span style=\"font-family:Calibri\">prototype</span>作用域<span style=\"font-family:Calibri\">Bean</span>的创建、销毁代价会比较大。而<span style=\"font-family:Calibri\">singleton</span>作用域的<span style=\"font-family:Calibri\">Bean</span>实例一旦创建成功，可以重复使用。因此，除非必要，否则尽量避免将<span style=\"font-family:Calibri\">Bean</span>的作用域设置为<span style=\"font-family:Calibri\">prototype</span>。</span></p>\n<p dir=\"ltr\" style=\"margin-right:0px\"><span style=\"font-size:18px\"><span style=\"font-family:Calibri; font-size:18px; color:#ff00\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n</span>设置<span style=\"font-family:Calibri\">Bean</span>的作用域是通过<span style=\"font-family:Calibri\">scope</span>属性来指定。可以接受<span style=\"font-family:Calibri\">Singleton</span>、<span style=\"font-family:Calibri\">prototype</span>、<span style=\"font-family:Calibri\">request</span>、<span style=\"font-family:Calibri\">session</span>、<span style=\"font-family:Calibri\">global\n session 5</span>个&#20540;。</span></p>\n<p><span style=\"font-size:18px\"></span>&nbsp;</p>\n<div class=\"dp-highlighter bg_html\">\n<div class=\"bar\">\n<div class=\"tools\"><strong>[html]</strong> <a target=\"_blank\" title=\"view plain\" class=\"ViewSource\" href=\"http://blog.csdn.net/chenssy/article/details/8222744#\">\nview plain</a><a target=\"_blank\" title=\"copy\" class=\"CopyToClipboard\" href=\"http://blog.csdn.net/chenssy/article/details/8222744#\">copy</a><a target=\"_blank\" title=\"print\" class=\"PrintSource\" href=\"http://blog.csdn.net/chenssy/article/details/8222744#\">print</a><a target=\"_blank\" title=\"?\" class=\"About\" href=\"http://blog.csdn.net/chenssy/article/details/8222744#\">?</a></div>\n</div>\n<ol class=\"dp-xml\">\n<li class=\"alt\"><span><span class=\"tag\">&lt;?</span><span class=\"tag-name\">xml</span><span>&nbsp;</span><span class=\"attribute\">version</span><span>=</span><span class=\"attribute-value\">&quot;1.0&quot;</span><span>&nbsp;</span><span class=\"attribute\">encoding</span><span>=</span><span class=\"attribute-value\">&quot;UTF-8&quot;</span><span class=\"tag\">?&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span><span class=\"tag\">&lt;</span><span class=\"tag-name\">beans</span><span>&nbsp;</span><span class=\"attribute\">xmlns:xsi</span><span>=</span><span class=\"attribute-value\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">xmlns</span><span>=</span><span class=\"attribute-value\">&quot;http://www.springframework.org/schema/beans&quot;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">xsi:schemaLocation</span><span>=&quot;http://www.springframework.org/schema/beans&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;<span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comments\">&lt;!--&nbsp;配置一个singleton&nbsp;Bean实例：默认&nbsp;--&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">bean</span><span>&nbsp;</span><span class=\"attribute\">id</span><span>=</span><span class=\"attribute-value\">&quot;bean1&quot;</span><span>&nbsp;</span><span class=\"attribute\">class</span><span>=</span><span class=\"attribute-value\">&quot;com.Bean1&quot;</span><span>&nbsp;</span><span class=\"tag\">/&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comments\">&lt;!--&nbsp;配置一个prototype&nbsp;Bean实例&nbsp;--&gt;</span><span>&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">bean</span><span>&nbsp;</span><span class=\"attribute\">id</span><span>=</span><span class=\"attribute-value\">&quot;bean2&quot;</span><span>&nbsp;</span><span class=\"attribute\">class</span><span>=</span><span class=\"attribute-value\">&quot;com.Bean2&quot;</span><span>&nbsp;</span><span class=\"attribute\">scope</span><span>=</span><span class=\"attribute-value\">&quot;prototype&quot;</span><span class=\"tag\">/&gt;</span><span>&nbsp;&nbsp;</span></span></li><li><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></li><li class=\"alt\"><span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">beans</span><span cla', '2016-04-16 01:21:21', '0');
INSERT INTO `article` VALUES ('10089', '10003', 'Spring学习笔记（15）-----------Spring转折点（2）', '\n<p><span style=\"font-size:14px;\">　　利用方式一的配置起来，可见代码还是非常的厚重的，定义一个切面就要定义一个切面类，然而切面类中，就一个通知方法，着实没有必要。所以Spring提供</span><span style=\"font-size:14px;\">了，依赖aspectj的schema配置和基于aspectj 注解方式。这两种方式非常简介方便使用，也是项目中普遍的使用方式。梳理之：</span></p><p><span style=\"font-size:14px;\"><strong>4、方式二：schema配置</strong></span></p><p><span style=\"font-size:14px;\"><strong>a、</strong>业务类：</span></p><div class=\"cnblogs_code\"><div class=\"cnblogs_code_hide\" id=\"cnblogs_code_open_2d99bf74-f305-435c-90f0-e74f63ca60b8\"><pre><span style=\"color:#0800;\"></span><pre class=\"java\" name=\"code\"><pre class=\"java\" name=\"code\">/**\n * 业务类\n * \n */\npublic class AspectBusiness {\n\n    /**\n     * 切入点\n     */\n    public String delete(String obj) {\n        System.out.println(&quot;==========调用切入点：&quot; + obj + &quot;说：你敢删除我！===========\\n&quot;);\n        return obj + &quot;：瞄～&quot;;\n    }\n\n    public String add(String obj) {\n        System.out.println(&quot;================这个方法不能被切。。。============== \\n&quot;);\n        return obj + &quot;：瞄～ 嘿嘿！&quot;;\n    }\n\n    public String modify(String obj) {\n        System.out.println(&quot;=================这个也设置加入切吧====================\\n&quot;);\n        return obj + &quot;：瞄改瞄啊！&quot;;\n    }\n\n}\n\n\n\nb、切面类：切面类中，包含了所有的通知\n\n\n/**\n * 定义一个切面\n * \n * @author yanbin\n * \n */\npublic class AspectAdvice {\n\n    /**\n     * 前置通知\n     * \n     * @param jp\n     */\n    public void doBefore(JoinPoint jp) {\n        System.out.println(&quot;===========进入before advice============ \\n&quot;);\n\n        System.out.print(&quot;准备在&quot; + jp.getTarget().getClass() + &quot;对象上用&quot;);\n        System.out.print(jp.getSignature().getName() + &quot;方法进行对 \'&quot;);\n        System.out.print(jp.getArgs()[0] + &quot;\'进行删除！\\n\\n&quot;);\n\n        System.out.println(&quot;要进入切入点方法了 \\n&quot;);\n    }\n\n    /**\n     * 后置通知\n     * \n     * @param jp\n     *            连接点\n     * @param result\n     *            返回值\n     */\n    public void doAfter(JoinPoint jp, String result) {\n        System.out.println(&quot;==========进入after advice=========== \\n&quot;);\n        System.out.println(&quot;切入点方法执行完了 \\n&quot;);\n\n        System.out.print(jp.getArgs()[0] + &quot;在&quot;);\n        System.out.print(jp.getTarget().getClass() + &quot;对象上被&quot;);\n        System.out.print(jp.getSignature().getName() + &quot;方法删除了&quot;);\n        System.out.print(&quot;只留下：&quot; + result + &quot;\\n\\n&quot;);\n    }\n\n    /**\n     * 环绕通知\n     * \n     * @param pjp\n     *            连接点\n     */\n    public void doAround(ProceedingJoinPoint pjp) throws Throwable {\n        System.out.println(&quot;===========进入around环绕方法！=========== \\n&quot;);\n\n        // 调用目标方法之前执行的动作\n        System.out.println(&quot;调用方法之前: 执行！\\n&quot;);\n\n        // 调用方法的参数\n        Object[] args = pjp.getArgs();\n        // 调用的方法名\n        String method = pjp.getSignature().getName();\n        // 获取目标对象\n        Object target = pjp.getTarget();\n        // 执行完方法的返回值：调用proceed()方法，就会触发切入点方法执行\n        Object result = pjp.proceed();\n\n        System.out.println(&quot;输出：&quot; + args[0] + &quot;;&quot; + method + &quot;;&quot; + target + &quot;;&quot; + result + &quot;\\n&quot;);\n        System.out.println(&quot;调用方法结束：之后执行！\\n&quot;);\n    }\n\n    /**\n     * 异常通知\n     * \n     * @param jp\n     * @param e\n     */\n    public void doThrow(JoinPoint jp, Throwable e) {\n        System.out.println(&quot;删除出错啦&quot;);\n    }\n\n}\n</pre></pre><pre class=\"java\" name=\"code\">&nbsp;</pre></pre></div></div><p><span style=\"font-size:14px;\"><strong>c、</strong>配置文件：</span></p><div class=\"cnblogs_code\"><div class=\"cnblogs_code_hide\" id=\"cnblogs_code_open_134228de-0885-4725-a2c5-0f82b3bde7bf\"><pre><span style=\"color:#00ff;\"></span><pre class=\"html\" name=\"code\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:p=&quot;http://www.springframework.org/schema/p&quot;\n    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n    xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;\n    xsi:schemaLocation=&quot;     \n          http://www.springframework.org/schema/beans     \n          http://www.springframework.org/schema/beans/spring-beans-3.0.xsd     \n          http://www.springframework.org/schema/context     \n          http://www.springframework.org/schema/context/spring-context-3.0.xsd \n          http://www.springframework.org/schema/aop     \n          http://www.springframework.org/schema/aop/spring-aop-3.0.xsd&quot;\n    default-autowire=&quot;byName&quot;&gt;\n\n    &lt;!-- ==============================利用spring 利用aspectj来配置AOP================================ --&gt;\n\n    &lt;!-- 声明一个业务类 --&gt;\n    &lt;bean id=&quot;aspectBusiness&quot; class=&quot;aop.schema.AspectBusiness&quot; /&gt;\n\n    &lt;!-- 声明通知类 --&gt;\n    &lt;bean id=&quot;aspectAdvice&quot; class=&quot;aop.schema.advice.AspectAdvice&quot; /&gt;\n\n    &lt;aop:config&gt;\n        &lt;aop:aspect id=&quot;businessAspect&quot; ref=&quot;aspectAdvice&quot;&gt;\n            &lt;!-- 配置指定切入的对象 --&gt;\n            &lt;aop:pointcut id=&quot;point_cut&quot; expression=&quot;execution(* aop.schema.*.*(..))&quot; /&gt;\n            &lt;!-- 只匹配add方法作为切入点\n            &lt;aop:pointcut id=&quot;except_add&quot; expression=&quot;execution(* aop.schema.*.add(..))&quot; /&gt;\n             --&gt;\n\n            &lt;!-- 前置通知 --&gt;\n            &lt;aop:before method=&quot;doBefore&quot; pointcut-ref=&quot;point_cut&quot; /&gt;\n            &lt;!-- 后置通知 returning指定返回参数 --&gt;\n            &lt;aop:after-returning method=&quot;doAfter&quot;\n                pointcut-ref=&quot;point_cut&quot; returning=&quot;result&quot; /&gt;\n            &lt;aop:around method=&quot;doAround&quot; pointcut-ref=&quot;point_cut&quot;/&gt;\n            &lt;aop:after-throwing method=&quot;doThrow&quot; pointcut-ref=&quot;point_cut&quot; throwing=&quot;e&quot;/&gt;\n        &lt;/aop:aspect&gt;\n    &lt;/aop:config&gt;\n&lt;/beans&gt;</pre><br></pre></div></div><p><span style=\"font-size:14px;\"><strong>d、</strong>测试类：</span></p><div class=\"cnblogs_code\"><div class=\"cnblogs_code_hide\" id=\"cnblogs_code_open_43585cb4-d510-495a-b0e0-ca03f3582d63\"><pre><span style=\"color:#00ff;\"></span><pre class=\"java\" name=\"code\">public class Debug {\n\n    public static void main(String[] args) {\n        ApplicationContext context = new ClassPathXmlApplicationContext(&quot;aop/schema_aop.xml&quot;);\n        AspectBusiness business = (AspectBusiness) context.getBean(&quot;aspectBusiness&quot;);\n        business.delete(&quot;猫&quot;);\n    }\n}</pre></pre></div></div><p><span style=\"font-size:14px;\"><strong>5、方式三：aspectj注解</strong></span></p><p><span style=\"font-size:14px;\">注解在项目中已经到处都是了，撇开一些优劣不提，开发的便利性和可读性是非常的方便的。用来配置Spring AOP也非常简单便利</span></p><p><span style=\"font-size:14px;\"><strong>a、</strong>业务类：</span></p><div class=\"cnblogs_code\"><div class=\"cnblogs_code_hide\" id=\"cnblogs_code_open_dde7a1ed-a77b-4fb4-ad2b-dabad9457883\"><pre><span style=\"color:#0800;\"></span><pre class=\"java\" name=\"code\">/**\n * 业务类\n * \n */\n@Component\npublic class Business {\n\n    /**\n     * 切入点\n     */\n    public String delete(String obj) {\n        System.out.println(&quot;==========调用切入点：&quot; + obj + &quot;说：你敢删除我！===========\\n&quot;);\n        return obj + &quot;：瞄～&quot;;\n    }\n\n    public String add(String obj) {\n        System.out.println(&quot;================这个方法不能被切。。。============== \\n&quot;);\n        return obj + &quot;：瞄～ 嘿嘿！&quot;;\n    }\n\n    public String modify(String obj) {\n        System.out.println(&quot;=================这个也设置加入切吧====================\\n&quot;);\n        return obj + &quot;：瞄改瞄啊！&quot;;\n    }\n\n}</pre></pre></div></div><p><span style=\"font-size:14px;\"><strong>b、</strong>切面类：</span></p><div class=\"cnblogs_code\"><div class=\"cnblogs_code_hide\" id=\"cnblogs_code_open_036d8d7f-25ca-4955-ba66-d057c96edcef\"><pre><span style=\"color:#0800;\"></span><pre class=\"java\" name=\"code\">/**\n * 定义切面\n * \n * @Aspect : 标记为切面类\n * @Pointcut : 指定匹配切点\n * @Before : 指定前置通知，value中指定切入点匹配\n * @AfterReturning ：后置通知，具有可以指定返回值\n * @AfterThrowing ：异常通知\n * \n * @author yanbin\n * \n */\n@Component\n@Aspect\npublic class AspectAdvice {\n\n    /**\n     * 指定切入点匹配表达式，注意它是以方法的形式进行声明的。\n     */\n    <strong>@Pointcut(&quot;execution(* aop.annotation.*.*(..))&quot;)</strong>\n    public void anyMethod() {\n    }\n\n    /**\n     * 前置通知\n     * \n     * @param jp\n     */\n   <strong> @Before(value = &quot;execution(* aop.annotation.*.*(..))&quot;)</strong>\n    public void doBefore(JoinPoint jp) {\n        System.out.println(&quot;===========进入before advice============ \\n&quot;);\n\n        System.out.print(&quot;准备在&quot; + jp.getTarget().getClass() + &quot;对象上用&quot;);\n        System.out.print(jp.getSignature().getName() + &quot;方法进行对 \'&quot;);\n        System.out.print(jp.getArgs()[0] + &quot;\'进行删除！\\n\\n&quot;);\n\n        System.out.println(&quot;要进入切入点方法了 \\n&quot;);\n    }\n\n    /**\n     * 后置通知\n     * \n     * @param jp\n     *            连接点\n     * @param result\n     *            返回值\n     */\n<strong>    @AfterReturning(value = &quot;anyMethod()&quot;, returning = &quot;result&quot;)</strong>\n    public void doAfter(JoinPoint jp, String result) {\n        System.out.println(&quot;==========进入after advice=========== \\n&quot;);\n        System.out.println(&quot;切入点方法执行完了 \\n&quot;);\n\n        System.out.print(jp.getArgs()[0] + &quot;在&quot;);\n        System.out.print(jp.getTarget().getClass() + &quot;对象上被&quot;);\n        System.out.print(jp.getSignature().getName() + &quot;方法删除了&quot;);\n        System.out.print(&quot;只留下：&quot; + result + &quot;\\n\\n&quot;);\n    }\n\n    /**\n     * 环绕通知\n     * \n     * @param pjp\n     *            连接点\n     */\n    <strong>@Around(value = &quot;execution(* aop.annotation.*.*(..))&quot;)\n</strong>    public void doAround(ProceedingJoinPoint pjp) throws Throwable {\n        System.out.println(&quot;===========进入around环绕方法！=========== \\n&quot;);\n\n        // 调用目标方法之前执行的动作\n        System.out.println(&quot;调用方法之前: 执行！\\n&quot;);\n\n        // 调用方法的参数\n        Object[] args = pjp.getArgs();\n        // 调用的方法名\n        String method = pjp.getSignature().getName();\n        // 获取目标对象\n        Object target = pjp.getTarget();\n        // 执行完方法的返回值：调用proceed()方法，就会触发切入点方法执行\n        Object result = pjp.proceed();\n\n        System.out.println(&quot;输出：&quot; + args[0] + &quot;;&quot; + method + &quot;;&quot; + target + &quot;;&quot; + result + &quot;\\n&quot;);\n        System.out.println(&quot;调用方法结束：之后执行！\\n&quot;);\n    }\n\n    /**\n     * 异常通知\n     * \n     * @param jp\n     * @param e\n    <strong> */\n    @AfterThrowing(value = &quot;execution(* aop.annotation.*.*(..))&quot;, throwing = &quot;e&quot;)</strong>\n    public void doThrow(JoinPoint jp, Throwable e) {\n        System.out.println(&quot;删除出错啦&quot;);\n    }\n\n}</pre></pre></div></div><p><span style=\"font-size:14px;\"><strong>c、</strong>配置：</span></p><div class=\"cnblogs_code\"><img class=\"code_img_closed\" id=\"code_img_closed_9004ccfa-c82e-4d8b-b21b-037d4992317a\" alt=\"\" src=\"http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif\"><img class=\"code_img_opened\" id=\"code_img_opened_9004ccfa-c82e-4d8b-b21b-037d4992317a\" alt=\"\" src=\"http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif\"><span class=\"cnblogs_code_collapse\">View Code </span><div class=\"cnblogs_code_hide\" id=\"cnblogs_code_open_9004ccfa-c82e-4d8b-b21b-037d4992317a\"><pre><span style=\"color:#00ff;\"></span><pre class=\"java\" name=\"code\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:p=&quot;http://www.springframework.org/schema/p&quot;\n    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n    xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;\n    xsi:schemaLocation=&quot;     \n          http://www.springframework.org/schema/beans     \n          http://www.springframework.org/schema/beans/spring-beans-3.0.xsd     \n          http://www.springframework.org/schema/context     \n          http://www.springframework.org/schema/context/spring-context-3.0.xsd \n          http://www.springframework.org/schema/aop     \n          http://www.springframework.org/schema/aop/spring-aop-3.0.xsd&quot;\n    default-autowire=&quot;byName&quot;&gt;\n\n    &lt;context:component-scan base-package=&quot;aop.annotation&quot; /&gt;\n    &lt;!-- 打开aop 注解 --&gt;\n    &lt;aop:aspectj-autoproxy /&gt;\n\n&lt;/beans&gt;</pre></pre></div></div><p><span style=\"font-size:14px;\"><strong>d、</strong>测试类：</span></p><p class=\"cnblogs_code\"><span class=\"cnblogs_code_collapse\">本文借鉴<a target=\"_blank\" href=\"http://www.cnblogs.com/yanbincn/archive/2012/08/13/2636961.html\" target=\"_blank\">http://www.cnblogs.com/yanbincn/archive/2012/08/13/2636961.html</a></span></p><p class=\"cnblogs_code\"><span class=\"cnblogs_code_collapse\">作者相当给力，写的很不错呀@这回aop可以学的明白些了！</span></p>   \n', '2016-04-16 01:21:21', '0');
INSERT INTO `article` VALUES ('10090', '10003', 'Spring学习笔记（6）---------IoC的三种注入方式', '\n<a href=\"#\" class=\"bds_more\" data-cmd=\"more\" style=\"background-position:0 0 !important; background-image: url(http://bdimg.share.baidu.com/static/api/img/share/icons_0_16.png?v=d754dcc0.png) !important\"></a>\n<a href=\"#\" class=\"bds_qzone\" data-cmd=\"qzone\" title=\"分享到QQ空间\" style=\"background-position:0 -52px !important\"></a>\n<a href=\"#\" class=\"bds_tsina\" data-cmd=\"tsina\" title=\"分享到新浪微博\" style=\"background-position:0 -104px !important\"></a>\n<a href=\"#\" class=\"bds_tqq\" data-cmd=\"tqq\" title=\"分享到腾讯微博\" style=\"background-position:0 -260px !important\"></a>\n<a href=\"#\" class=\"bds_renren\" data-cmd=\"renren\" title=\"分享到人人网\" style=\"background-position:0 -208px !important\"></a>\n<a href=\"#\" class=\"bds_weixin\" data-cmd=\"weixin\" title=\"分享到微信\" style=\"background-position:0 -1612px !important\"></a>\n', '2016-04-16 01:21:22', '0');
INSERT INTO `article` VALUES ('10091', '10003', 'Spring学习笔记(14)-----------aop学习转折点(1)', '\n<span style=\"font-size:14px;\">Spring有两大核心，IOC和AOP。IOC在java web项目中无时无刻不在使用。然而AOP用的比较少，的确也是一般的项目用的场所不多。事务控制基本都用，但却是Spring封装的不需要我们再去实现，但Spring的AOP远不止这些，不能因为项目中没有使用，而不去学习及理解。我觉得这是作为一个java web软件开发人员必须具备的技能。业内很多将AOP应用在日志记录上，可惜我们项目没这么做，后面需要学习下。<span>在这先把Spring AOP的基本用法，在脑子里理一边，做一次积累。</span></span><p style=\"text-align: left;\"><span style=\"font-size:14px;\"><strong>1、概念术语　　</strong></span></p><p style=\"text-align: left;\"><span style=\"font-size:14px;\">　　在开始之前，需要理解Spring aop 的一些基本的概念术语(总结的个人理解，并非Spring官方定义)：</span></p><p style=\"text-align: left;\"><span style=\"font-size:14px;\">　　<strong>切面(aspect)：</strong>用来切插业务方法的类。</span></p><p style=\"text-align: left;\"><span style=\"font-size:14px;\">　　<strong>连接点(joinpoint)：</strong>是切面类和业务类的连接点，其实就是封装了业务方法的一些基本属性，作为通知的参数来解析。</span></p><p style=\"text-align: left;\"><span style=\"font-size:14px;\">　　<strong>通知(advice)：</strong>在切面类中，声明对业务方法做额外处理的方法。</span></p><p style=\"text-align: left;\"><span style=\"font-size:14px;\">　　<strong>切入点(pointcut)：</strong>业务类中指定的方法，作为切面切入的点。其实就是指定某个方法作为切面切的地方。</span></p><p style=\"text-align: left;\"><span style=\"font-size:14px;\">　　<strong>目标对象(target object)：</strong>被代理对象。</span></p><p style=\"text-align: left;\"><span style=\"font-size:14px;\">　　<strong>AOP代理(aop proxy)：</strong>代理对象。</span></p><p style=\"text-align: left;\"><span style=\"font-size:14px;\">　　通知：</span></p><p style=\"text-align: left;\"><span style=\"font-size:14px;\">　　<strong>前置通知(before advice)：</strong>在切入点之前执行。</span></p><p style=\"text-align: left;\"><span style=\"font-size:14px;\">　　<strong>后置通知(after returning advice)：</strong>在切入点执行完成后，执行通知。</span></p><p style=\"text-align: left;\"><span style=\"font-size:14px;\">　　<strong>环绕通知(around advice)：</strong>包围切入点，调用方法前后完成自定义行为。</span></p><p style=\"text-align: left;\"><span style=\"font-size:14px;\">　　<strong>异常通知(after throwing advice)：</strong>在切入点抛出异常后，执行通知。</span></p><p style=\"text-align: left;\"><span style=\"font-size:14px;\"><strong>2、Spring AOP环境</strong></span></p><p style=\"text-align: left;\"><span style=\"font-size:14px;\">　　要在项目中使用Spring AOP 则需要在项目中导入除了spring jar包之外，还有aspectjweaver.jar，aopalliance.jar ，asm.jar 和cglib.jar 。</span></p><p style=\"text-align: left;\"><span style=\"font-size:14px;line-height: 22px;\">好了，前提工作准备完成，Spring 提供了很多的实现AOP的方式，在学习过程中，循序渐进。进行Spring 接口方式，schema配置方式和注解的三种方式进行学习。好了废话不多说了，开始spring aop学习之旅：</span></p><p style=\"text-align: left;\"><span style=\"font-size:14px;\"><strong>3、方式一：AOP接口</strong></span></p><p style=\"text-align: left;\"><span style=\"font-size:14px;\">　　利用Spring AOP接口实现AOP，主要是为了指定自定义通知来供spring AOP机制识别。主要接口：前置通知&nbsp;MethodBeforeAdvice ，后置通知：AfterReturningAdvice，环绕通知：MethodInterceptor，异常通知：ThrowsAdvice 。见例子代码：</span></p><p style=\"text-align: left;\"><span style=\"font-size:14px;\"><strong>a、</strong>业务接口：</span></p><div class=\"cnblogs_code\"><div class=\"cnblogs_code_hide\" id=\"cnblogs_code_open_cc63849a-f4d8-4892-a469-6356bf30c0d2\"><pre><span style=\"color:#0800;\"></span><pre class=\"java\" name=\"code\">/**\n * 代理类接口，也是业务类接口&lt;br&gt;\n * \n * 利用接口的方式，spring aop 将默认通过jdk 动态代理来实现代理类&lt;br&gt;\n * 不利用接口，则spring aop 将通过cglib 来实现代理类\n * \n * @author yanbin\n * \n */\npublic interface IBaseBusiness {\n\n    /**\n     * 用作代理的切入点方法\n     * \n     * @param obj\n     * @return\n     */\n    public String delete(String obj);\n\n    /**\n     * 这方法不被切面切\n     * \n     * @param obj\n     * @return\n     */\n    public String add(String obj);\n\n    /**\n     * 这方法切不切呢？可以设置\n     * \n     * @param obj\n     * @return\n     */\n    public String modify(String obj);\n\n}</pre><br></pre></div></div><p style=\"text-align: left;\"><span style=\"font-size:14px;\"><strong>b、</strong>业务类：</span></p><div class=\"cnblogs_code\"><div class=\"cnblogs_code_hide\" id=\"cnblogs_code_open_60b8a5ad-daeb-40e4-89cf-43084e84a720\"><pre><span style=\"color:#0800;\"></span><pre class=\"java\" name=\"code\">/**\n * 业务类，也是目标对象\n * \n * @author yanbin\n * \n */\npublic class BaseBusiness implements IBaseBusiness {\n\n    /**\n     * 切入点\n     */\n    public String delete(String obj) {\n        System.out.println(&quot;==========调用切入点：&quot; + obj + &quot;说：你敢删除我！===========\\n&quot;);\n        return obj + &quot;：瞄～&quot;;\n    }\n\n    public String add(String obj) {\n        System.out.println(&quot;================这个方法不能被切。。。============== \\n&quot;);\n        return obj + &quot;：瞄～ 嘿嘿！&quot;;\n    }\n\n    public String modify(String obj) {\n        System.out.println(&quot;=================这个也设置加入切吧====================\\n&quot;);\n        return obj + &quot;：瞄改瞄啊！&quot;;\n    }\n\n}</pre><br></pre></div></div><p><span style=\"font-size:14px;\"><strong style=\"text-align: left; font-size: 16px;\">c、</strong><span style=\"text-align: left;\">通知类：</span></span></p><p><span style=\"font-size:14px;\">前置通知：</span></p><div class=\"cnblogs_code\"><div class=\"cnblogs_code_hide\" id=\"cnblogs_code_open_512e1b9c-7ea5-4273-8619-e06a563aab02\"><pre><span style=\"color:#0800;\"></span><pre class=\"java\" name=\"code\">/**\n * 前置通知。\n * \n * @author yanbin\n * \n */\npublic class BaseBeforeAdvice implements MethodBeforeAdvice {\n\n    /**\n     * method : 切入的方法 &lt;br&gt;\n     * args ：切入方法的参数 &lt;br&gt;\n     * target ：目标对象\n     */\n    @Override\n    public void before(Method method, Object[] args, Object target) throws Throwable {\n        System.out.println(&quot;===========进入beforeAdvice()============ \\n&quot;);\n\n        System.out.print(&quot;准备在&quot; + target + &quot;对象上用&quot;);\n        System.out.print(method + &quot;方法进行对 \'&quot;);\n        System.out.print(args[0] + &quot;\'进行删除！\\n\\n&quot;);\n\n        System.out.println(&quot;要进入切入点方法了 \\n&quot;);\n    }\n\n}</pre></pre></div></div><p><span style=\"font-size:14px;\">后置通知：</span></p><div class=\"cnblogs_code\"><div class=\"cnblogs_code_hide\" id=\"cnblogs_code_open_83f5fb4a-1c81-4ee1-a99b-9792739c22af\"><pre><span style=\"color:#0800;\"></span><pre class=\"java\" name=\"code\">/**\n * 后置通知\n * \n * @author yanbin\n * \n */\npublic class BaseAfterReturnAdvice implements AfterReturningAdvice {\n\n    /**\n     * returnValue ：切入点执行完方法的返回值，但不能修改 &lt;br&gt;\n     * method ：切入点方法 &lt;br&gt;\n     * args ：切入点方法的参数数组 &lt;br&gt;\n     * target ：目标对象\n     */\n    @Override\n    public void afterReturning(Object returnValue, Method method, Object[] args, Object target) throws Throwable {\n        System.out.println(&quot;==========进入afterReturning()=========== \\n&quot;);\n        System.out.println(&quot;切入点方法执行完了 \\n&quot;);\n\n        System.out.print(args[0] + &quot;在&quot;);\n        System.out.print(target + &quot;对象上被&quot;);\n        System.out.print(method + &quot;方法删除了&quot;);\n        System.out.print(&quot;只留下：&quot; + returnValue + &quot;\\n\\n&quot;);\n    }\n\n}</pre></pre></div></div><p><span style=\"font-size:14px;\">环绕通知：</span></p><div class=\"cnblogs_code\"><div class=\"cnblogs_code_hide\" id=\"cnblogs_code_open_efac358c-79a8-4f9d-924f-25923a9be83e\"><pre><span style=\"color:#0800;\"></span><pre class=\"java\" name=\"code\">/**\n * 环绕通知\n * \n * @author yanbin\n * \n */\npublic class BaseAroundAdvice implements MethodInterceptor {\n\n    /**\n     * invocation ：连接点\n     */\n    @Override\n    public Object invoke(MethodInvocation invocation) throws Throwable {\n        System.out.println(&quot;===========进入around环绕方法！=========== \\n&quot;);\n\n        // 调用目标方法之前执行的动作\n        System.out.println(&quot;调用方法之前: 执行！\\n&quot;);\n\n        // 调用方法的参数\n        Object[] args = invocation.getArguments();\n        // 调用的方法\n        Method method = invocation.getMethod();\n        // 获取目标对象\n        Object target = invocation.getThis();\n        // 执行完方法的返回值：调用proceed()方法，就会触发切入点方法执行\n        Object returnValue = invocation.proceed();\n\n        System.out.println(&quot;===========结束进入around环绕方法！=========== \\n&quot;);\n        \n        System.out.println(&quot;输出：&quot; + args[0] + &quot;;&quot; + method + &quot;;&quot; + target + &quot;;&quot; + returnValue + &quot;\\n&quot;);\n\n        System.out.println(&quot;调用方法结束：之后执行！\\n&quot;);\n\n        return returnValue;\n    }\n\n}</pre></pre></div></div><p><span style=\"font-size:14px;\">异常通知：</span></p><div class=\"cnblogs_code\"><div class=\"cnblogs_code_hide\" id=\"cnblogs_code_open_aa43a28e-829c-49ad-bfc6-732cb77431e5\"><pre><span style=\"color:#0800;\"></span><pre class=\"java\" name=\"code\">/**\n * 异常通知，接口没有包含任何方法。通知方法自定义\n * \n * @author yanbin\n * \n */\npublic class BaseAfterThrowsAdvice implements ThrowsAdvice {\n\n    /**\n     * 通知方法，需要按照这种格式书写\n     * \n     * @param method\n     *            可选：切入的方法\n     * @param args\n     *            可选：切入的方法的参数\n     * @param target\n     *            可选：目标对象\n     * @param throwable\n     *            必填 : 异常子类，出现这个异常类的子类，则会进入这个通知。\n     */\n    public void afterThrowing(Method method, Object[] args, Object target, Throwable throwable) {\n        System.out.println(&quot;删除出错啦&quot;);\n    }\n\n}</pre></pre></div></div><p><span style=\"font-size:14px;\"><strong style=\"font-size: 16px;\">d、</strong>定义指定切点：</span></p><div class=\"cnblogs_code\"><div class=\"cnblogs_code_hide\" id=\"cnblogs_code_open_235ae126-3322-4040-abe9-2de18f7d416b\"><pre><span style=\"color:#0800;\"></span><pre class=\"java\" name=\"code\">/**\n * 定义一个切点，指定对应方法匹配。来供切面来针对方法进行处理&lt;br&gt;\n * \n * 继承NameMatchMethodPointcut类，来用方法名匹配\n * \n * @author yanbin\n * \n */\npublic class Pointcut extends NameMatchMethodPointcut {\n\n    private static final long serialVersionUID = 3990456017285944475L;\n\n    @SuppressWarnings(&quot;rawtypes&quot;)\n    @Override\n    public boolean matches(Method method, Class targetClass) {\n        // 设置单个方法匹配\n        this.setMappedName(&quot;delete&quot;);\n        // 设置多个方法匹配\n        String[] methods = { &quot;delete&quot;, &quot;modify&quot; };\n        \n        //也可以用“ * ” 来做匹配符号\n        // this.setMappedName(&quot;get*&quot;);\n        \n        this.setMappedNames(methods);\n\n        return super.matches(method, targetClass);\n    }\n\n}</pre><br></pre></div></div><p><span style=\"font-size:14px;\"><strong style=\"font-size: 16px;\">e、</strong>配置：&nbsp;</span></p><div class=\"cnblogs_code\"><div class=\"cnblogs_code_hide\" id=\"cnblogs_code_open_82d4937c-88d1-426c-9023-77d00584efd3\"><pre><span style=\"color:#00ff;\"></span><pre class=\"html\" name=\"code\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:p=&quot;http://www.springframework.org/schema/p&quot;\n    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n    xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;\n    xsi:schemaLocation=&quot;     \n          http://www.springframework.org/schema/beans     \n          http://www.springframework.org/schema/beans/spring-beans-3.0.xsd     \n          http://www.springframework.org/schema/context     \n          http://www.springframework.org/schema/context/spring-context-3.0.xsd \n          http://www.springframework.org/schema/aop     \n          http://www.springframework.org/schema/aop/spring-aop-3.0.xsd&quot;\n    default-autowire=&quot;byName&quot;&gt;\n\n    &lt;!-- ==============================利用spring自己的aop配置================================ --&gt;\n    &lt;!-- 声明一个业务类 --&gt;\n    &lt;bean id=&quot;baseBusiness&quot; class=&quot;aop.base.BaseBusiness&quot; /&gt;\n    \n    &lt;!-- 声明通知类 --&gt;\n    &lt;bean id=&quot;baseBefore&quot; class=&quot;aop.base.advice.BaseBeforeAdvice&quot; /&gt;\n    &lt;bean id=&quot;baseAfterReturn&quot; class=&quot;aop.base.advice.BaseAfterReturnAdvice&quot; /&gt;\n    &lt;bean id=&quot;baseAfterThrows&quot; class=&quot;aop.base.advice.BaseAfterThrowsAdvice&quot; /&gt;\n    &lt;bean id=&quot;baseAround&quot; class=&quot;aop.base.advice.BaseAroundAdvice&quot; /&gt;\n\n    &lt;!-- 指定切点匹配类 --&gt;\n    &lt;bean id=&quot;pointcut&quot; class=&quot;aop.base.pointcut.Pointcut&quot; /&gt;\n\n    &lt;!-- 包装通知，指定切点 --&gt;\n    &lt;bean id=&quot;matchBeforeAdvisor&quot; class=&quot;org.springframework.aop.support.DefaultPointcutAdvisor&quot;&gt;\n        &lt;property name=&quot;pointcut&quot;&gt;\n            &lt;ref bean=&quot;pointcut&quot; /&gt;\n        &lt;/property&gt;\n        &lt;property name=&quot;advice&quot;&gt;\n            &lt;ref bean=&quot;baseBefore&quot; /&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- 使用ProxyFactoryBean 产生代理对象 --&gt;\n    &lt;bean id=&quot;businessProxy&quot; class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;\n        &lt;!-- 代理对象所实现的接口 ，如果有接口可以这样设置 --&gt;\n        &lt;property name=&quot;proxyInterfaces&quot;&gt;\n            &lt;value&gt;aop.base.IBaseBusiness&lt;/value&gt;\n        &lt;/property&gt;\n\n        &lt;!-- 设置目标对象 --&gt;\n        &lt;property name=&quot;target&quot;&gt;\n            &lt;ref local=&quot;baseBusiness&quot; /&gt;\n        &lt;/property&gt;\n        &lt;!-- 代理对象所使用的拦截器 --&gt;\n        &lt;property name=&quot;interceptorNames&quot;&gt;\n            &lt;list&gt;\n                &lt;value&gt;matchBeforeAdvisor&lt;/value&gt;\n                &lt;value&gt;baseAfterReturn&lt;/value&gt;\n                &lt;value&gt;baseAround&lt;/value&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;</pre><br></pre></div></div><p><span style=\"font-size:14px;\"><strong style=\"font-size: 16px;\">f、</strong>测试类：</span></p><div class=\"cnblogs_code\"><div class=\"cnblogs_code_hide\" id=\"cnblogs_code_open_0cd98545-54b7-461e-a638-dddfedad52fd\"><pre><span style=\"color:#00ff;\"></span><pre class=\"java\" name=\"code\">public class Debug {\n\npublic static void main(String[] args) {\n        ApplicationContext context = new ClassPathXmlApplicationContext(&quot;aop/schema_aop.xml&quot;);\n        IBaseBusiness business = (IBaseBusiness ) context.getBean(&quot;businessProxy&quot;);\n        business.delete(&quot;猫&quot;);\n    }\n}</pre></pre></div></div><p><strong>g、</strong>测试结果：运行下测试类，清晰明了。由于结果呈现太长就不贴了。</p><p><span style=\"font-size:14px;\">　　具体的代码实现可以从代码注释中很容易理解 接口方式的实现。结果也可想而知，前置方法会在切入点方法之前执行，后置会在切入点方法执行之后执行，环绕则会在切入点方法执行前执行同事方法结束也会执行对应的部分。主要是调用proceed()方法来执行切入点方法。来作为环绕通知前后方法的分水岭。然后在实现的过程中，有几点却是可以细揣摩一下的。</span></p><p><span style=\"font-size:14px;color:#00ff;\">　　可以看出在xml 配置 businessProxy这个bean的时候，ProxyFactoryBean类中指定了，proxyInterfaces参数。这里我把他配置了IBaseBusiness接口。因为在项目开发过程中，往往业务类都会有对应的接口，以方便利用IOC解耦。但Spring AOP却也能支持没有接口的代理。这就是为什么需要导入cglib.jar的包了。看过spring的源码，知道在目标切入对象如果有实现接口，spring会默认走jdk动态代理来实现代理类。如果没有接口，则会通过cglib来实现代理类。</span></p><p><span style=\"font-size:14px;color:#00ff;\">　　这个业务类现在有 前置通知，后置通知，环绕三个通知同时作用，可能以及更多的通知进行作用。那么这些通知的执行顺序是怎么样的？就这个例子而言，同时实现了三个通知。在例子xml中，则显示执行before通知，然后执行around的前处理，执行切点方法，再执行return处理。最后执行around的后处理。经过测试，知道spring 处理顺序是按照xml配置顺序依次处理通知，以队列的方式存放前通知，以压栈的方式存放后通知。所以是前通知依次执行，后通知到切入点执行完之后，从栈里在后进先出的形式把后通知执行。</span></p><p><span style=\"font-size:14px;color:#00ff;\">　　在实现过程中发现通知执行对应目标对象的整个类中的方法，如何精确到某个方法，则需要定义一个切点匹配的方式：spring提供了方法名匹配或正则方式来匹配。然后通过DefaultPointcutAdvisor来包装通知，指定切点。</span></p><p><span style=\"font-size:14px;color:#00ff00;\"></span>&nbsp;</p><p><span style=\"font-size:14px;color:#00ff00;\">本文借鉴：<a target=\"_blank\" href=\"http://www.cnblogs.com/yanbincn/archive/2012/08/13/2635413.html\" target=\"_blank\">http://www.cnblogs.com/yanbincn/archive/2012/08/13/2635413.html</a></span></p><p><span style=\"font-size:14px;color:#00ff00;\"></span>&nbsp;</p>   \n', '2016-04-16 01:21:22', '1');
INSERT INTO `article` VALUES ('10092', '10003', 'Spring学习笔记(5)-----------IoC再度学习', '\n<a href=\"#\" class=\"bds_more\" data-cmd=\"more\" style=\"background-position:0 0 !important; background-image: url(http://bdimg.share.baidu.com/static/api/img/share/icons_0_16.png?v=d754dcc0.png) !important\"></a>\n<a href=\"#\" class=\"bds_qzone\" data-cmd=\"qzone\" title=\"分享到QQ空间\" style=\"background-position:0 -52px !important\"></a>\n<a href=\"#\" class=\"bds_tsina\" data-cmd=\"tsina\" title=\"分享到新浪微博\" style=\"background-position:0 -104px !important\"></a>\n<a href=\"#\" class=\"bds_tqq\" data-cmd=\"tqq\" title=\"分享到腾讯微博\" style=\"background-position:0 -260px !important\"></a>\n<a href=\"#\" class=\"bds_renren\" data-cmd=\"renren\" title=\"分享到人人网\" style=\"background-position:0 -208px !important\"></a>\n<a href=\"#\" class=\"bds_weixin\" data-cmd=\"weixin\" title=\"分享到微信\" style=\"background-position:0 -1612px !important\"></a>\n', '2016-04-16 01:21:22', '0');
INSERT INTO `article` VALUES ('10093', '10003', 'Spring学习笔记（13）----------aop拦截器', '\n<p><strong><span style=\"font-size:14px;color:#00ff;\">原理</span></strong></p><p><span style=\"font-size:14px;\">AOP(Aspect Oriented Programming)，也就是面向方面编程的技术。AOP基于IoC基础，是对OOP的有益补充。</span></p><p><span style=\"font-size:14px;\">　　AOP将应用系统分为两部分，核心业务逻辑（Core business concerns）及横向的通用逻辑，也就是所谓的方面Crosscutting enterprise concerns，例如，所有大中型应用都要涉及到的持久化管理（Persistent）、事务管理（Transaction Management）、安全管理（Security）、日志管理（Logging）和调试管理（Debugging）等。</span></p><p><span style=\"font-size:14px;\">　　AOP正在成为软件开发的下一个光环。使用AOP，你可以将处理aspect的代码注入主程序，通常主程序的主要目的并不在于处理这些aspect。AOP可以防止代码混乱。</span></p><p><span style=\"font-size:14px;\">　　Spring framework是很有前途的AOP技术。作为一种非侵略性的、轻型的AOP framework，你无需使用预编译器或其他的元标签，便可以在Java程序中使用它。这意味着开发团队里只需一人要对付AOP framework，其他人还是像往常一样编程。</span></p><p><span style=\"font-size:14px;\">　　<strong>AOP概念</strong></span></p><p><span style=\"font-size:14px;\">　　让我们从定义一些重要的AOP概念开始。</span></p><p><span style=\"font-size:14px;\">　　— 方面（Aspect）：一个关注点的模块化，这个关注点实现可能另外横切多个对象。事务管理是J2EE应用中一个很好的横切关注点例子。方面用Spring的Advisor或拦截器实现。</span></p><p><span style=\"font-size:14px;\">　　— 连接点（Joinpoint）：程序执行过程中明确的点，如方法的调用或特定的异常被抛出。</span></p><p><span style=\"font-size:14px;\">　　— 通知（Advice）：在特定的连接点，AOP框架执行的动作。各种类型的通知包括“around”、“before”和“throws”通知。通知类型将在下面讨论。许多AOP框架包括Spring都是以拦截器做通知模型，维护一个“围绕”连接点的拦截器链。</span></p><p><span style=\"font-size:14px;\">　　— 切入点（Pointcut）：指定一个通知将被引发的一系列连接点的集合。AOP框架必须允许开发者指定切入点，例如，使用正则表达式。</span></p><p><span style=\"font-size:14px;\">　　— 引入（Introduction）：添加方法或字段到被通知的类。Spring允许引入新的接口到任何被通知的对象。例如，你可以使用一个引入使任何对象实现IsModified接口，来简化缓存。</span></p><p><span style=\"font-size:14px;\">　　— 目标对象（Target Object）：包含连接点的对象，也被称作被通知或被代理对象。</span></p><p><span style=\"font-size:14px;\">　　— AOP代理（AOP Proxy）：AOP框架创建的对象，包含通知。在Spring中，AOP代理可以是JDK动态代理或CGLIB代理。</span></p><p><span style=\"font-size:14px;\">　　— 编织（Weaving）：组装方面来创建一个被通知对象。这可以在编译时完成（例如使用AspectJ编译器），也可以在运行时完成。Spring和其他纯Java AOP框架一样，在运行时完成织入。</span></p><p><span style=\"font-size:14px;\">　　<strong>各种通知类型包括：</strong></span></p><p><span style=\"font-size:14px;\">　　—&nbsp; Around通知：包围一个连接点的通知，如方法调用。这是最强大的通知。Aroud通知在方法调用前后完成自定义的行为，它们负责选择继续执行连接点或通过返回它们自己的返回值或抛出异常来短路执行。</span></p><p><span style=\"font-size:14px;\">　　—&nbsp; Before通知：在一个连接点之前执行的通知，但这个通知不能阻止连接点前的执行（除非它抛出一个异常）。</span></p><p><span style=\"font-size:14px;\">　　—&nbsp; Throws通知：在方法抛出异常时执行的通知。Spring提供强制类型的Throws通知，因此你可以书写代码捕获感兴趣的异常（和它的子类），不需要从Throwable或Exception强制类型转换。</span></p><p><span style=\"font-size:14px;\">　　—&nbsp; After returning通知：在连接点正常完成后执行的通知，例如，一个方法正常返回，没有抛出异常。</span></p><p><span style=\"font-size:14px;\">　　Around通知是最通用的通知类型。大部分基于<span style=\"color:#ff00;\">拦截</span>的AOP框架（如Nanning和Jboss 4）只提供Around通知。</span></p><p><span style=\"font-size:14px;\">　　如同AspectJ，Spring提供所有类型的通知，我们推荐你使用最为合适的通知类型来实现需要的行为。例如，如果只是需要用一个方法的返回值来更新缓存，你最好实现一个after returning通知，而不是around通知，虽然around通知也能完成同样的事情。使用最合适的通知类型使编程模型变得简单，并能减少潜在错误。例如，你不需要调用在around通知中所需使用的MethodInvocation的proceed()方法，因此就调用失败。</span></p><p><span style=\"font-size:14px;\">　　切入点的概念是AOP的关键，它使AOP区别于其他使用拦截的技术。切入点使通知独立于OO的层次选定目标。例如，提供声明式事务管理的around通知可以被应用到跨越多个对象的一组方法上。 因此切入点构成了AOP的结构要素。</span></p><p><span style=\"font-size:14px;color:#00ff;\"><strong>&nbsp;拦截器（也称拦截机）</strong></span></p><p><span style=\"font-size:14px;\">&nbsp;&nbsp;&nbsp; 拦截机 (Interceptor), 是 AOP (<span style=\"font-weight: bold;\">A</span>spect-<span style=\"font-weight: bold;\">O</span>riented<span style=\"font-weight: bold;\">P</span>rogramming) 的另一种叫法。AOP本身是一门语言，只不过我们使用的是基于JAVA的集成到Spring 中的 SpringAOP。同样，我们将通过我们的例子来理解陌生的概念。</span></p><p><span style=\"font-size:14px;\">&nbsp;&nbsp; 接口类</span></p><div class=\"bar\"><div class=\"tools\">Java代码</div></div><span><span class=\"keyword\"></span></span><pre class=\"java\" name=\"code\">package com.test.TestSpring3;  \n\n  \n\npublic interface UserService // 被拦截的接口  \n\n...{  \n\n    public void printUser(String user);  \n\n}  \n</pre><p class=\"dp-highlighter\">&nbsp;</p><pre title=\"Spring AOP原理及拦截器\" class=\"java\" style=\"display: none;\" codeable_id=\"794035\" codeable_type=\"Blog\" source_url=\"http://javacrazyer.iteye.com/blog/794035\" pre_index=\"0\" name=\"code\">&lt;span style=&quot;font-size:14px;&quot;&gt;package com.test.TestSpring3;\n\npublic interface UserService // 被拦截的接口\n...{\n    public void printUser(String user);\n}\n&lt;/span&gt;</pre><p><span style=\"font-size:14px;\">&nbsp;实现类</span></p><div class=\"bar\"><div class=\"tools\">Java代码 </div></div><span><span class=\"keyword\"></span></span><pre class=\"java\" name=\"code\">package com.test.TestSpring3;  \n\n  \n\npublic class UserServiceImp implements UserService // 实现UserService接口  \n\n...{  \n\n    public void printUser(String user) ...{  \n\n        System.out.println(&quot;printUser user:&quot; + user);// 显示user  \n\n    }  \n\n} \n</pre><p>&nbsp;</p><pre title=\"Spring AOP原理及拦截器\" class=\"java\" style=\"display: none;\" codeable_id=\"794035\" codeable_type=\"Blog\" source_url=\"http://javacrazyer.iteye.com/blog/794035\" pre_index=\"1\" name=\"code\">&lt;span style=&quot;font-size:14px;&quot;&gt;package com.test.TestSpring3;\n\npublic class UserServiceImp implements UserService // 实现UserService接口\n...{\n    public void printUser(String user) ...{\n        System.out.println(&quot;printUser user:&quot; + user);// 显示user\n    }\n}\n\n&lt;/span&gt;</pre><p><span style=\"font-size:14px;\">&nbsp;AOP拦截器</span></p><div class=\"bar\"><div class=\"tools\">Java代码 </div></div><span><span class=\"keyword\"></span></span><pre class=\"java\" name=\"code\">package com.test.TestSpring3;  \n\n  \n\nimport org.aopalliance.intercept.MethodInterceptor;  \n\nimport org.aopalliance.intercept.MethodInvocation;  \n\n  \n\npublic class UserInterceptor implements MethodInterceptor  \n\n// AOP方法拦截器  \n\n...{  \n\n  \n\n    public Object invoke(MethodInvocation arg0) throws Throwable ...{  \n\n          try ...{  \n\n  \n\n            if (arg0.getMethod().getName().equals(&quot;printUser&quot;))  \n\n            // 拦截方法是否是UserService接口的printUser方法  \n\n            ...{  \n\n                Object[] args = arg0.getArguments();// 被拦截的参数  \n\n                System.out.println(&quot;user:&quot; + args[0]);  \n\n                arg0.getArguments()[0] = &quot;hello!&quot;;// 修改被拦截的参数  \n\n  \n\n            }  \n\n  \n\n            System.out.println(arg0.getMethod().getName() + &quot;---!&quot;);  \n\n            return arg0.proceed();// 运行UserService接口的printUser方法  \n\n  \n\n        } catch (Exception e) ...{  \n\n            throw e;  \n\n        }  \n\n    }  \n\n}  \n</pre><p class=\"dp-highlighter\">&nbsp;</p><p class=\"dp-highlighter\">&nbsp;</p><pre title=\"Spring AOP原理及拦截器\" class=\"java\" style=\"display: none;\" codeable_id=\"794035\" codeable_type=\"Blog\" source_url=\"http://javacrazyer.iteye.com/blog/794035\" pre_index=\"2\" name=\"code\">&lt;span style=&quot;font-size:14px;&quot;&gt;package com.test.TestSpring3;\n\nimport org.aopalliance.intercept.MethodInterceptor;\nimport org.aopalliance.intercept.MethodInvocation;\n\npublic class UserInterceptor implements MethodInterceptor\n// AOP方法拦截器\n...{\n\n    public Object invoke(MethodInvocation arg0) throws Throwable ...{\n\n        try ...{\n\n            if (arg0.getMethod().getName().equals(&quot;printUser&quot;))\n            // 拦截方法是否是UserService接口的printUser方法\n            ...{\n                Object[] args = arg0.getArguments();// 被拦截的参数\n                System.out.println(&quot;user:&quot; + args[0]);\n                arg0.getArguments()[0] = &quot;hello!&quot;;// 修改被拦截的参数\n\n            }\n\n            System.out.println(arg0.getMethod().getName() + &quot;---!&quot;);\n            return arg0.proceed();// 运行UserService接口的printUser方法\n\n        } catch (Exception e) ...{\n            throw e;\n        }\n    }\n}\n&lt;/span&gt;&lt;span style=&quot;font-size:14px;&quot;&gt;\n&lt;/span&gt;</pre><p><span style=\"font-size:14px;\">&nbsp;测试类</span></p><div class=\"bar\"><div class=\"tools\">Java代码 </div></div><span><span class=\"keyword\"></span></span><pre class=\"java\" name=\"code\">package com.test.TestSpring3;  \n\nimport org.springframework.beans.factory.BeanFactory;    \n\nimport org.springframework.beans.factory.xml.XmlBeanFactory;  \n\nimport org.springframework.context.ApplicationContext;  \n\nimport org.springframework.context.support.ClassPathXmlApplicationContext;  \n\nimport org.springframework.context.support.FileSystemXmlApplicationContext;  \n\nimport org.springframework.core.io.ClassPathResource;  \n\nimport org.springframework.core.io.Resource;  \n\nimport org.springframework.web.context.support.WebApplicationContextUtils;  \n\n  \n\npublic class TestInterceptor ...{  \n\n  \n\n    public static void main(String[] args) ...{  \n\n        ApplicationContext ctx = new FileSystemXmlApplicationContext(  \n\n                &quot;classpath:applicationContext.xml&quot;);  \n\n//        ApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);      \n\n          \n\n        UserService us = (UserService) ctx.getBean(&quot;userService&quot;);  \n\n        us.printUser(&quot;shawn&quot;);  \n\n      }  \n}</pre><p class=\"dp-highlighter\">&nbsp;</p><pre title=\"Spring AOP原理及拦截器\" class=\"java\" style=\"display: none;\" codeable_id=\"794035\" codeable_type=\"Blog\" source_url=\"http://javacrazyer.iteye.com/blog/794035\" pre_index=\"3\" name=\"code\">&lt;span style=&quot;font-size:14px;&quot;&gt;package com.test.TestSpring3;\n\nimport org.springframework.beans.factory.BeanFactory;\n\nimport org.springframework.beans.factory.xml.XmlBeanFactory;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\nimport org.springframework.context.support.FileSystemXmlApplicationContext;\nimport org.springframework.core.io.ClassPathResource;\nimport org.springframework.core.io.Resource;\nimport org.springframework.web.context.support.WebApplicationContextUtils;\n\npublic class TestInterceptor ...{\n\n    public static void main(String[] args) ...{\n        ApplicationContext ctx = new FileSystemXmlApplicationContext(\n                &quot;classpath:applicationContext.xml&quot;);\n//        ApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);    \n        \n        UserService us = (UserService) ctx.getBean(&quot;userService&quot;);\n        us.printUser(&quot;shawn&quot;);\n\n    }\n}&lt;/span&gt;&lt;span style=&quot;font-size:14px;&quot;&gt;\n&lt;/span&gt;</pre><p><span style=\"font-size:14px;\">&nbsp;配置文件</span><span style=\"font-size:14px;\">&nbsp; </span></p><div class=\"bar\"><div class=\"tools\">Xml代码 </div></div><span><span class=\"tag\"></span></span><pre class=\"html\" name=\"code\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;  \n\n&lt;!DOCTYPE beans PUBLIC &quot;-//SPRING//DTD BEAN//EN&quot; &quot;http://www.springframework.org/dtd/spring-beans.dtd&quot;&gt;  \n\n&lt;beans&gt;  \n\n    &lt;bean id=&quot;userServiceImp&quot;  \n\n        class=&quot;com.test.TestSpring3.UserServiceImp&quot; /&gt;  \n\n  \n\n    &lt;bean id=&quot;userInterceptor&quot; class=&quot;com.test.TestSpring3.UserInterceptor&quot; /&gt;  \n\n  \n\n    &lt;bean id=&quot;userService&quot;  \n\n        class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;  \n\n      &lt;!-- 代理接口 --&gt;  \n\n        &lt;property name=&quot;proxyInterfaces&quot;&gt;  \n\n            &lt;value&gt;com.test.TestSpring3.UserService&lt;/value&gt;  \n\n        &lt;/property&gt;  \n\n       &lt;!-- 目标实现类 --&gt;  \n\n        &lt;property name=&quot;target&quot;&gt;  \n\n            &lt;ref local=&quot;userServiceImp&quot; /&gt;   \n\n      &lt;/property&gt;  \n\n        &lt;!-- 拦截器 --&gt;  \n\n        &lt;property name=&quot;interceptorNames&quot;&gt;  \n\n            &lt;list&gt;  \n\n                &lt;value&gt;userInterceptor&lt;/value&gt;  \n\n            &lt;/list&gt;  \n\n        &lt;/property&gt;  \n\n    &lt;/bean&gt;  \n\n&lt;/beans&gt;  \n\n \n</pre><p class=\"dp-highlighter\">&nbsp;</p><p>&nbsp;</p><p>&nbsp;<span style=\"font-size:14px;color:#000000;\">输出:<br>&nbsp; user:shawn<br>&nbsp;&nbsp; printUser---!<br>&nbsp; printUser&nbsp;user:hello!&nbsp;</span></p><p><span style=\"font-size:14px;color:#000000;\">&nbsp;</span></p><p><span style=\"font-size:14px;color:#000000;\">结论：调用方法的时候&nbsp;传入的值被拦截修改了.</span></p><p><span><span style=\"font-size:14px;color:#00ff;\"><strong>拦截器中的事务管理（事务拦截机）</strong></span></span></p><p><span style=\"color:#000000;\"><span style=\"font-size:14px;\">&nbsp;如果不采用拦截机的机制时，在使用JDBC进行数据库访问时，存在两种情况：</span></span></p><ul><li><span style=\"font-size:14px;\"><span style=\"font-weight: bold;\">自动提交</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 这是JDBC驱动默认的模式，每次数据库操作(CRUD)成功完成后，都作为一个单独的事务自动提交，如果未成功完成，即抛出了 SQLException 的话，仅最近的一个操作将回滚。</span></li><li><span style=\"font-size:14px;\"><span style=\"font-weight: bold;\">非自动提交</span>&nbsp;&nbsp;&nbsp; 这是想更好的控制事务时需要程序地方式进行控制：</span><span style=\"color:#000000;\"></span><ul><li><span style=\"font-size:14px;\">在进行该事务单元的任何操作之前 <span>setAutoCommit(false)</span></span></li><li><span style=\"font-size:14px;\">在成功完成事务单元后 <span>commit()</span> </span></li><li><span style=\"font-size:14px;\">在异常发生后<span> rollback()</span></span></li></ul></li><ul></ul></ul><p><span style=\"font-size:14px;\">自动提交模式是不被推荐的，因为每个操作都将产生一个事务点，这对于大的应用来说性能将受到影响；再有，对于常见的业务逻辑，这种模式显得无能为力。比如：<br>转帐，从A帐户取出100元，将其存入B帐户；如果在这两个操作之间发生了错误，那么用户A将损失了100元，而本来应该给帐户B的，却因为失败给了银行。<br>所以，建议在所有的应用中，如果使用 JDBC 都将不得不采用非自动提交模式(你们要能发现了在我们的 JDBC 那个例子中，我们采用的就是自动提交模式，我们是为了把精力放在JDBC上，而不是事务处理上)，即我们不得不在每个方法中：<br></span></p><div class=\"bar\"><div class=\"tools\">Java代码 </div></div><span><span class=\"keyword\"></span></span><pre class=\"java\" name=\"code\">try {      \n\n // 在获得连接后，立即通过调用　setAutoCommit(false) 将事务处理置为非自动提交模式  // Prepare Query to fetch the user Information         \n\n     pst = conn.prepareStatement(findByName);                   \n\n       // ...            conn.commit();         \n\n }  catch(Exception ex) {         \n\n     conn.rollback();        \n\n      throw ex;         \n\n }finally {     \n\n         try {      \n\n           // Close Result Set and Statement    \n\n          if (rset != null) rset.close();                 \n\n         if (pst != null) pst.close();                          \n\n    } catch (Exception ex) {                 \n\n       throw new Exception(&quot;SQL Error while closing objects = &quot; + ex.toString());              \n\n}    \n\n}  \n\n \n</pre><p class=\"dp-highlighter\"><br>&nbsp;</p><p class=\"dp-highlighter\">&nbsp;</p><pre title=\"Spring AOP原理及拦截器\" class=\"java\" style=\"display: none;\" codeable_id=\"794035\" codeable_type=\"Blog\" source_url=\"http://javacrazyer.iteye.com/blog/794035\" pre_index=\"5\" name=\"code\">&lt;span style=&quot;font-size:14px;&quot;&gt;try {    \n // 在获得连接后，立即通过调用　setAutoCommit(false) 将事务处理置为非自动提交模式  // Prepare Query to fetch the user Information       \n     pst = conn.prepareStatement(findByName);                 \n       // ...            conn.commit();       \n }  catch(Exception ex) {       \n     conn.rollback();      \n      throw ex;       \n }finally {   \n         try {    \n           // Close Result Set and Statement  \n          if (rset != null) rset.close();               \n         if (pst != null) pst.close();                        \n    } catch (Exception ex) {               \n       ex.printStackTrace();                \n       throw new Exception(&quot;SQL Error while closing objects = &quot; + ex.toString());            \n}  \n}\n&lt;/span&gt;</pre><p><span style=\"font-size:14px;\">&nbsp;这样代码在AOP的倡导者看来是“肮脏”的代码。他们认为，所有的与事务有关的方法都应当可以集中配置（见</span><a><span style=\"font-size:14px;\">声明性事务控制</span></a><span style=\"font-size:14px;\">），并自动拦截，程序应当关心他们的主要任务，即商业逻辑，而不应和事务处理的代码搅和在一起。<br><br>我先看看 Spring 是怎么做到拦截的：<br></span></p><h3><span style=\"font-size:14px;color:#00ff;\">Spring 内置支持的事务处理拦截机</span></h3><p><span style=\"font-size:14px;\">这里因为要用到JpetStore项目中的代码，我们将 applicationContext.xml 全部内容列出:<br></span><span class=\"921372908-18012007\"></span></p><pre><span style=\"font-size:14px;\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;!--\n  - Application context definition for JPetStore\'s business layer.\n  - Contains bean references to the transaction manager and to the DAOs in\n  - dataAccessContext-local/jta.xml (see web.xml\'s &quot;contextConfigLocation&quot;).\n\n    <span style=\"color:#ff00;\">Jpetstore 的应用上下文定义，包含事务管理和引用了在 dataAccessContext-local/jta.xml(具体使用了哪个要看 web.xml 中的 \'contextConfigLocation\' 的配置）中注册的DAO</span>\n--&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n       xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;\n       xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\n       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd\n       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd\nhttp://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.0.xsd&quot;&gt;\n    \n    \n    &lt;!-- ========================= GENERAL DEFINITIONS ========================= --&gt;\n\n    &lt;!-- Configurer that replaces ${...} placeholders with values from properties files \n         <span style=\"color:#ff00;\">占位符的值将从列出的属性文件中抽取出来</span>\n     --&gt;\n    &lt;!-- (in this case, mail and JDBC related properties) --&gt;\n    &lt;bean id=&quot;propertyConfigurer&quot; class=&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;&gt;\n        &lt;property name=&quot;locations&quot;&gt;\n            &lt;list&gt;\n                &lt;value&gt;WEB-INF/mail.properties&lt;/value&gt;\n                &lt;value&gt;WEB-INF/jdbc.properties&lt;/value&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n    \n    &lt;!-- MailSender used by EmailAdvice \n         <span style=\"color:#ff00;\">指定用于发送邮件的 javamail 实现者，这里使用了 spring 自带的实现。此 bean 将被 emailAdvice 使用</span>\n     --&gt;\n    &lt;bean id=&quot;mailSender&quot; class=&quot;org.springframework.mail.javamail.JavaMailSenderImpl&quot;&gt;\n        &lt;property name=&quot;host&quot; value=&quot;${mail.host}&quot;/&gt;\n    &lt;/bean&gt;\n    \n    \n    \n    &lt;!-- ========================= BUSINESS OBJECT DEFINITIONS ======================== --&gt;\n\n    &lt;!-- <span style=\"color:#ff00;\">不需要，因为被 SpringMVC 的实现使用 </span>Generic validator for Account objects, to be used for example by the Spring web tier --&gt;\n    &lt;bean id=&quot;accountValidator&quot; class=&quot;org.springframework.samples.jpetstore.domain.logic.AccountValidator&quot;/&gt;\n    \n    &lt;!-- <span style=\"color:#ff00;\">不需要，因为被 SpringMVC 的实现使用</span> Generic validator for Order objects, to be used for example by the Spring web tier --&gt;\n    &lt;bean id=&quot;orderValidator&quot; class=&quot;org.springframework.samples.jpetstore.domain.logic.OrderValidator&quot;/&gt;\n    \n    &lt;!--\n        <span style=\"color:#ff00;\">主要的商业逻辑对象，即我们所说的门面对象</span><br style=\"color: rgb(255, 0, 0);\"><span style=\"color:#ff00;\">        注入了所有的DAO，这些DAO是引用了 dataAccessContext-xxx.xml 中定义的DAO</span><br style=\"color: rgb(255, 0, 0);\"><span style=\"color:#ff00;\">        门面对象中的所有方法的事务控制将通过下面的 aop:config 来加以控制</span>\n\n      - JPetStore primary business object (default implementation).\n      - Transaction advice gets applied through the AOP configuration below.\n   --&gt;\n    &lt;bean id=&quot;petStore&quot; class=&quot;org.springframework.samples.jpetstore.domain.logic.PetStoreImpl&quot;&gt;\n        &lt;property name=&quot;accountDao&quot; ref=&quot;accountDao&quot;/&gt;\n        &lt;property name=&quot;categoryDao&quot; ref=&quot;categoryDao&quot;/&gt;\n        &lt;property name=&quot;productDao&quot; ref=&quot;productDao&quot;/&gt;\n        &lt;property name=&quot;itemDao&quot; ref=&quot;itemDao&quot;/&gt;\n        &lt;property name=&quot;orderDao&quot; ref=&quot;orderDao&quot;/&gt;\n    &lt;/bean&gt;\n    \n    \n    &lt;!-- ========================= ASPECT CONFIGURATION ======================== --&gt;\n    &lt;!-- <span style=\"color:#ff00;\">AOP配置，用来控制<big><big><span style=\"font-weight: bold;\">哪些</span></big></big>方法将需要进行事务处理，采用了AspectJ 的语法</span> --&gt;\n    &lt;aop:config&gt;\n        &lt;!--\n        This definition creates auto-proxy infrastructure based on the given pointcut,\n        expressed in AspectJ pointcut language. Here: applying the advice named\n        &quot;txAdvice&quot; to all methods on classes named PetStoreImpl.\n    --&gt;\n        &lt;!-- <span style=\"color:#ff00;\">指出在 PetStoreFacade 的所有方法都将采用 txAdvice(在紧接着的元素中定义了）事务方针，注意，我们这里虽然指定的是接口 PetStoreFacace, 但其暗示着其所有的实现类也将</span><br style=\"color: rgb(255, 0, 0);\"><span style=\"color:#ff00;\">　　　　　　　　同样具有这种性质，因为本身就是实现类的方法在执行的，接口是没有方法体的。</span> --&gt;\n        &lt;aop:advisor pointcut=&quot;execution(* *..PetStoreFacade.*(..))&quot; advice-ref=&quot;txAdvice&quot;/&gt;\n        \n        &lt;!--\n            This definition creates auto-proxy infrastructure based on the given pointcut,\n            expressed in AspectJ pointcut language. Here: applying the advice named\n            &quot;emailAdvice&quot; to insertOrder(Order) method of PetStoreImpl\n    --&gt;\n        &lt;!-- <span style=\"color:#ff00;\">当执行 PetStoreFacade.insertOrder方法，该方法最后一个参数为Order类型时（其实我们的例子中只有一个 insertOrder 方法，但这告诉了我们，当我们的接口或类中有重载了的方法，</span><br style=\"color: rgb(255, 0, 0);\"><span style=\"color:#ff00;\">　　　　　　　　并且各个重载的方法可能使用不同的拦截机机制时，我们可以通过方法的参数加以指定），将执行emailAdvice(在最后定义的那个元素）</span>--&gt;\n        &lt;aop:advisor pointcut=&quot;execution(* *..PetStoreFacade.insertOrder(*..Order))&quot; advice-ref=&quot;emailAdvice&quot;/&gt;\n        \n    &lt;/aop:config&gt;\n    \n    &lt;!--\n　　　　　\n        <span style=\"color:#ff00;\">事务方针声明，用于控制采用<big style=\"font-weight: bold;\"><big>什么样</big></big>的事务策略</span>\n        Transaction advice definition, based on method name patterns.\n        Defaults to PROPAGATION_REQUIRED for all methods whose name starts with\n        &quot;insert&quot; or &quot;update&quot;, and to PROPAGATION_REQUIRED with read-only hint\n        for all other methods.\n    --&gt;\n    &lt;tx:advice id=&quot;txAdvice&quot;&gt;\n        &lt;tx:attributes&gt;\n            &lt;tx:method name=&quot;insert*&quot;/&gt;\n            &lt;tx:method name=&quot;update*&quot;/&gt;\n            &lt;tx:method name=&quot;*&quot; read-only=&quot;true&quot;/&gt;\n        &lt;/tx:attributes&gt;\n    &lt;/tx:advice&gt;\n    \n\n    &lt;!-- <span style=\"color:#ff00;\">拦截机，用于在适当的时机(通过AOP配置，如上面)在方法执行成功后发送邮件</span>\n      AOP advice used to send confirmation email after order has been submitted --&gt;\n    &lt;!-- --&gt;\n    &lt;bean id=&quot;emailAdvice&quot; class=&quot;org.springframework.samples.jpetstore.domain.logic.SendOrderConfirmationEmailAdvice&quot;&gt;\n        &lt;property name=&quot;mailSender&quot; ref=&quot;mailSender&quot;/&gt;\n    &lt;/bean&gt;\n    \n    \n    &lt;!-- ========================= <span style=\"color:#ff00;\">忽略</span> REMOTE EXPORTER DEFINITIONS ======================== --&gt;\n\n    \n&lt;/beans&gt;</span></pre><p>&nbsp;</p><p>&nbsp;</p><p><span style=\"font-size:14px;\">这个配置比想象的要简单的多：</span></p><div class=\"bar\"><div class=\"tools\">Xml代码 </div></div><p class=\"dp-highlighter\"><span><span class=\"tag\">&lt;</span><span class=\"tag-name\">aop:config</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p><p class=\"dp-highlighter\"><span>&nbsp;&lt;!--&nbsp;This&nbsp;definition&nbsp;creates&nbsp;auto-proxy&nbsp;infrastructure&nbsp;based&nbsp;on&nbsp;the&nbsp;given&nbsp;pointcut,&nbsp;expressed&nbsp;in&nbsp;AspectJ&nbsp;pointcut&nbsp;language.&nbsp;&nbsp;&nbsp;</span></p><p class=\"dp-highlighter\"><span>Here:&nbsp;applying&nbsp;the&nbsp;advice&nbsp;named&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;txAdvice&quot;&nbsp;to&nbsp;all&nbsp;methods&nbsp;on&nbsp;classes&nbsp;named&nbsp;PetStoreImpl.&nbsp;指出在&nbsp;PetStoreFacade&nbsp;&nbsp;&nbsp;</span></p><p class=\"dp-highlighter\"><span>的所有方法都将采用&nbsp;txAdvice(在紧接着的元素中定义了）事务方针，注意，我们这里虽然指定的是接口&nbsp;PetStoreFacace,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p class=\"dp-highlighter\"><span>&nbsp;但其暗示着其所有的实现类也将同样具有这种性质，因为本身就是实现类的方法在执行的，接口是没有方法体的。&nbsp;&nbsp;&nbsp;&nbsp;--<span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p><p class=\"dp-highlighter\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">aop:advisor</span><span>&nbsp;</span><span class=\"attribute\">pointcut</span><span>=</span><span class=\"attribute-value\">&quot;execution(*&nbsp;*..PetStoreFacade.*(..))&quot;</span><span>&nbsp;</span><span class=\"attribute\">advice-ref</span><span>=</span><span class=\"attribute-value\">&quot;txAdvice&quot;</span><span class=\"tag\">/&gt;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p><p class=\"dp-highlighter\"><span>&nbsp;<span class=\"comments\">&lt;!--&nbsp;其它拦截机--&gt;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span></p><p class=\"dp-highlighter\"><span><span class=\"tag\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/</span><span class=\"tag-name\">aop:config</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></p><p><span><span>&nbsp;</span></span></p><pre title=\"Spring AOP原理及拦截器\" class=\"xml\" style=\"display: none;\" codeable_id=\"794035\" codeable_type=\"Blog\" source_url=\"http://javacrazyer.iteye.com/blog/794035\" pre_index=\"6\" name=\"code\">&lt;span style=&quot;font-size:14px;&quot;&gt;&lt;aop:config&gt;       \n &lt;!-- This definition creates auto-proxy infrastructure based on the given pointcut, expressed in AspectJ pointcut language. \nHere: applying the advice named        &quot;txAdvice&quot; to all methods on classes named PetStoreImpl. 指出在 PetStoreFacade \n的所有方法都将采用 txAdvice(在紧接着的元素中定义了）事务方针，注意，我们这里虽然指定的是接口 PetStoreFacace,        \n 但其暗示着其所有的实现类也将同样具有这种性质，因为本身就是实现类的方法在执行的，接口是没有方法体的。    --&gt;   \n       &lt;aop:advisor pointcut=&quot;execution(* *..PetStoreFacade.*(..))&quot; advice-ref=&quot;txAdvice&quot;/&gt;               \n &lt;!-- 其它拦截机--&gt;  \n&lt;/aop:config&gt;\n&lt;/span&gt;</pre><p><span style=\"font-size:14px;\">1. 所有的拦截机配置都放在 &lt;aop:config&gt; 配置元素中.<br>2. 下面还是需要理解一下几个有关AOP的专用名词，不过，是挺抽象的，最好能会意出其的用意<br></span></p><ul><li><span style=\"font-size:14px;\">pointcut 切入点，比如：updateAccount 方法需要进行事务管理，则这个切入点就是“执行方法体”(execution)。Spring 所有支持的切入点类型在都在 Spring reference: 6.2.3.1. Supported Pointcut Designators 中列出了。</span></li><li><span style=\"font-size:14px;\">advice&nbsp;&nbsp;&nbsp; 要对这个切入点进行什么操作，比如事务控制 </span></li><li><span style=\"font-size:14px;\">advisor&nbsp;&nbsp; Spring 特有的概念，将上两个概念合到一个概念中来，即一个 advisor 包含了一个切入点及对这个切入点所实施的操作。</span></li></ul><p><span style=\"font-size:14px;\">因为 方法执行切入点 execution 为最常见的切入点类型，我们着重介绍一下，execution 的完全形式为：<br></span></p><pre class=\"programlisting\"><span style=\"font-size:14px;\"><span style=\"font-weight: bold;\">execution</span>(modifiers-pattern? ret-type-pattern declaring-type-pattern? name-pattern(param-pattern) throws-pattern?)</span></pre><p><span style=\"font-size:14px;\">这是一个正则表达式，其中由 \'?\' 结尾的部分是可选的。翻译过来就是：<br></span></p><pre class=\"programlisting\"><span style=\"font-size:14px;\"><span style=\"font-weight: bold;\"><span>执行</span></span>(方法访问修饰符? 方法返回类型 声明类型? 方法名(方法参数类型) 抛出异常?)</span></pre><p><span style=\"font-size:14px;\">所有的这些都是用来定义执行切入点，即那些方法应该被侯选为切入点：<br></span></p><ul><li><span style=\"font-size:14px;\">方法访问修饰符&nbsp;&nbsp; 即 public, private 等等 </span></li><li><span style=\"font-size:14px;\">方法返回类型&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 即方法返回的类型，如 void, String 等等 </span></li><li><span style=\"font-size:14px;\">声明类型&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; 1.5的语法，现在可以先忽略它 </span></li><li><span style=\"font-size:14px;\">方法名&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 方法的名字 </span></li><li><span style=\"font-size:14px;\">方法参数类型&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 方法的参数类型 </span></li><li><span style=\"font-size:14px;\">抛出异常&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp; 方法声明的抛出的异常 </span></li></ul><p><br><br><span style=\"font-size:14px;\">例如，所有dao代码被定义在包 com.xyz.dao　及子包 com.xyz.dao.hibernate, 或者其它，如果还有的话，子包中, 里面定义的是提供DAO功能的接口或类，那么表达式：<br></span></p><pre class=\"programlisting\"><span style=\"font-weight: bold;\"><span style=\"font-size:14px;\">execution(* com.xyz.dao..*.*(..))</span></span></pre><p><span style=\"font-size:14px;\">表示切入点为：执行定义在包 com.xyz.dao 及其子包（因为 <span>.. </span>所致) 中的任何方法<br><br>详细情况可以参见 Spring refernce: <span style=\"font-weight: bold;\">6.2.3.4. Examples</span><br><br><br></span><span class=\"921372908-18012007\"></span><span style=\"font-size:14px;\">因此这个表达式为执行定义在类 PetStoreFacade　及其实现类中的所有方法，采取的动作定义在 txAdvice 中. 关于该 advice 的定义，（见</span><a><span style=\"font-size:14px;\">声明性事务控制</span></a><span style=\"font-size:14px;\">）一节</span></p><pre><span style=\"color:#ff00;\"><span style=\"font-size:14px;\">&lt;aop:advisor pointcut=&quot;execution(* *..PetStoreFacade.*(..))&quot; advice-ref=&quot;txAdvice&quot;/&gt;\n</span></span></pre><p>&nbsp;</p><h3><span style=\"font-size:14px;color:#00ff;\">Spring 自定拦截机</span></h3><p><span style=\"font-size:14px;\">来为了进行事务控制，我们只需简单地配置几下，所有的工作都由 Spring 来做。这样固然很好，但有时我们需要有我们特有的控制逻辑。因为Spring 不可能包含所有人需要的所有拦截机。所以它提供了通过程序的方式加以定制的方式。我们的项目中就有这么一个拦截机，在用户确认付款后，将定单信息通过 email 的方式发送给注册用户的邮箱中。<br><br></span></p><pre class=\"programlisting\"><span style=\"font-weight: bold;\"><span><span style=\"font-size:14px;\">&lt;aop:config&gt;\n  ...\n\n        &lt;!-- </span></span></span><span><span style=\"font-size:14px;\"><span style=\"color:#ff00;\">当执行 PetStoreFacade.insertOrder方法，该方法最后一个参数为Order类型时（其实我们的例子中只有一个 insertOrder 方法，但这告诉了我们，当我们的接口或类中有重载了的方法，</span><br style=\"color: rgb(255, 0, 0);\"><span style=\"color:#ff00;\">　　　　　　　　并且各个重载的方法可能使用不同的拦截机机制时，我们可以通过方法的参数加以指定），将执行emailAdvice(在最后定义的那个元素）</span></span></span><span style=\"font-weight: bold;\"><span><span style=\"font-size:14px;\">--&gt;\n        &lt;aop:advisor pointcut=&quot;execution(* *..PetStoreFacade.insertOrder(*..Order))&quot; advice-ref=&quot;emailAdvice&quot;/&gt;\n        \n    &lt;/aop:config&gt;</span></span></span></pre><p><span style=\"font-size:14px;\">红色的注释已经说的很清楚这个 Advisor 了，它的切入点(pointcut) 为 PetStoreFacade 的 void insertOrder(Order order) 方法，采取的动作为引用的 emailAdvice, 下面我们就来看看 emailAdvice:<br><br></span></p><pre class=\"programlisting\"><span style=\"font-weight: bold;\"><span><span style=\"font-size:14px;\">    &lt;bean id=&quot;emailAdvice&quot; class=&quot;org.springframework.samples.jpetstore.domain.logic.SendOrderConfirmationEmailAdvice&quot;&gt;\n        &lt;property name=&quot;mailSender&quot; ref=&quot;mailSender&quot;/&gt;\n    &lt;/bean&gt;</span></span></span></pre><p><span style=\"font-size:14px;\">它给了这个 advice 的实现类为 logic 包中 SendOrderConfirmationEmailAdvice, 该Bean 引用了我们前面定义的邮件发送器（一个 Spring 内置的邮件发送器）.<br><br>下面看看这个实现类：<br></span></p><pre class=\"programlisting\"><span style=\"font-weight: bold;\"><span><span style=\"font-size:14px;\">public class SendOrderConfirmationEmailAdvice implements <span style=\"color:#33cc0;\">AfterReturningAdvice</span>, <span style=\"color:#ff00;\"><span style=\"color:#3333ff;\">InitializingBean</span> </span>{\n    // user jes on localhost\n    private static final String DEFAULT_MAIL_FROM = &quot;test@pprun.org&quot;;\n    \n    private static final String DEFAULT_SUBJECT = &quot;Thank you for your order!&quot;;\n    \n    private final Log logger = LogFactory.getLog(getClass());\n    \n    <span style=\"color:#ff00;\">private MailSender mailSender;</span>\n    \n    private String mailFrom = DEFAULT_MAIL_FROM;\n    \n    private String subject = DEFAULT_SUBJECT;\n    \n   <span style=\"color:#ff00;\"> public void setMailSender(MailSender mailSender) {</span><br style=\"color: rgb(255, 0, 0);\"><span style=\"color:#ff00;\">        this.mailSender = mailSender;</span><br style=\"color: rgb(255, 0, 0);\"><span style=\"color:#ff00;\">    }</span>\n    \n    public void setMailFrom(String mailFrom) {\n        this.mailFrom = mailFrom;\n    }\n    \n    public void setSubject(String subject) {\n        this.subject = subject;\n    }\n    \n    public void throws Exception {\n        if (this.mailSender == null) {\n            throw new IllegalStateException(&quot;mailSender is required&quot;);\n        }\n    }\n    \n    <span style=\"color:#cc9933;\">/**</span><br style=\"color: rgb(204, 153, 51);\"><span style=\"color:#cc9933;\">     * </span><br style=\"color: rgb(204, 153, 51);\"><span style=\"color:#cc9933;\">     * @param returnValue 被拦截的方法的返回值</span><br style=\"color: rgb(204, 153, 51);\"><span style=\"color:#cc9933;\">     * @param m 被拦截的方法的所有信息（Method类封装了这些信息）</span><br style=\"color: rgb(204, 153, 51);\"><span style=\"color:#cc9933;\">     * @param args 被拦截的方法的所有参数组成的数组</span><br style=\"color: rgb(204, 153, 51);\"><span style=\"color:#cc9933;\">     * @param target 目标对象，对于方法执行来说，即是方法所在的类的实例（与 this 同，批当前对象）</span><br style=\"color: rgb(204, 153, 51);\"><span style=\"color:#cc9933;\">     * @throws java.lang.Throwable </span><br style=\"color: rgb(204, 153, 51);\"><span style=\"color:#cc9933;\">     */</span>\n    public void <span style=\"color:#0660;\"><span style=\"color:#33cc0;\">afterReturning</span>(</span>Object returnValue, Method m, Object[] args, Object target) throws Throwable {\n        </span><span style=\"font-size:14px;\"><span style=\"color:#cc9933;\">// 我们被拦截的方法为 void insertOrder(Order order)，方法只有一个参数，所以可知数据的第1个元素即是被传进的　order 对象\n        // 得到了order 对象，就可以将 order 对应的帐户名及帐单号发送到邮件中，以便确认无误。\n</span>        Order order = (Order) args[0];\n        Account account = ((PetStoreFacade) target).getAccount(<span style=\"color:#cc9933;\">order</span>.getUser().getUsername());\n        \n        // don\'t do anything if email address is not set\n        if (account.getEmail() == null || account.getEmail().length() == 0) {\n            return;\n        }\n        \n        StringBuffer text = new StringBuffer();\n        text.append(&quot;Dear &quot;).append(account.getFirstname()).\n                append(\' \').append(account.getLastname());\n        text.append(&quot;, thank your for your order from JPetStore. &quot; +\n                &quot;Please note that your order number is &quot;);\n        text.append(<span style=\"color:#cc9933;\">order</span>.getId());\n        \n        SimpleMailMessage mailMessage = new SimpleMailMessage();\n        mailMessage.setTo(account.getEmail());\n        mailMessage.setFrom(this.mailFrom);\n        mailMessage.setSubject(this.subject);\n        mailMessage.setText(text.toString());\n        try {\n            this.<span style=\"color:#ff00;\">mailSender</span>.send(mailMessage);\n        } catch (MailException ex) {\n            // just log it and go on\n            logger.warn(&quot;An exception occured when trying to send email&quot;, ex);\n        }\n    }\n    \n}</span></span></span></pre><p><span style=\"font-size:14px;\">&nbsp;</span></p><p><span style=\"font-size:14px;\">1. <span style=\"color:#ff00;\">红</span>色的内容即为反向注入的 <span style=\"color:#ff00;\">mailSender </span>属性<br><br>2. <span style=\"color:#3333ff;\">蓝</span>色的内容为 Spring Bean 的一个通用的接口 <span style=\"color:#3366ff;\">InitializingBean </span>，实现类需要实现该接口定义的方法 <span style=\"color:#3366ff;\">afterPropertiesSet()</span> ，该方法中一般是在Bean 被初始化后并设置了所有的 setter 注入后调用的。所以这里是保证邮件发送器配置正确。因为如果没有配置正确，下面的工作是无法进行的，所以与其等那时抛出异常，还不如早早地在部署时就告知（通过抛出 IllegalStateException 来提示）<br><br>3. <span style=\"color:#33cc0;\">绿</span>色的内容为这个 Advise 的核心，即在切入点被切入后将采用的动作。因为 Advise 也同样有多种类型，比如我们这里的“<span style=\"font-weight: bold;\">方法正常返回</span>”，“<span style=\"font-weight: bold;\">方法执行前</span>”，“<span style=\"font-weight: bold;\">方法执行后</span>”，“<span style=\"font-weight: bold;\">环绕在方法执行前后</span>”，“<span style=\"font-weight: bold;\">方法抛出异常时</span>”等等(详情参见 Spring Reference:<span style=\"font-weight: bold;\"> 6.2.4. Declaring advice</span>)。但是我们的逻辑为在用户确认定单并且执行成功（所谓的成功是指将这一定单插入到了表 Order 中了）后，将发送一确认信。所以”方法正常返回“完全符合我们的要求。<br><span style=\"color:#33cc0;\"><span style=\"color:#000000;\">接口</span>AfterReturningAdvice<span style=\"color:#000000;\">即是 Spring中表示</span></span></span><span style=\"color:#000000;\"><span style=\"font-size:14px;\">”方法正常返回“ 这一语义的 Advice, 所以我们实现这个接口及其必须的方法</span><span style=\"color:#33cc0;\"><span style=\"font-size:14px;\">afterReturning.<br></span></span></span><span style=\"font-size:14px;\">方法代码的工作其实并不重要，只要我们理解这些“魔法”一样的技术后，实现代码是很简单的。值得提及的是这个方法的参数，这些参数是封装了切入点的所有信息，请见上面的<span style=\"color:#cc9933;\">注释</span>。在我们的实现中只使用了被拦截方法的参数，在复杂的 Advice 实现中可能会用到切入点所有信息。</span></p><p><span style=\"font-size:14px;\"></span>&nbsp;</p><p><span style=\"font-size:14px;\">本文转自<a target=\"_blank\" href=\"http://javacrazyer.iteye.com/blog/794035\" target=\"_blank\">http://javacrazyer.iteye.com/blog/794035</a></span></p>   \n', '2016-04-16 01:21:22', '0');
INSERT INTO `article` VALUES ('10094', '10003', 'Spring学习笔记（2）----------设计理念', '\n<p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">我们知道Bean包装的是Object，而Object必然有数据，如何给这些数据提供生存环境就是Context要解决的问题，对Context来说他就是要发现每个Bean之间的关系，为它们建立这种关系并且要维护好 这种关系。所以Context就是一个Bean关系的集合，这个关系集合又叫Ioc容器，一旦建立起这个Ioc容器后Spring就可以为你工作了。那Core组件又有什么用武之地呢？其实Core就是发现、建立和维护每 个Bean之间的关系所需要的一些列的工具，从这个角度看来，Core这个组件叫Util更能让你理解。</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">它们之间可以用下图来表示：</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; text-align: center; background-color: rgb(248, 248, 248);\"><a target=\"_blank\" target=\"_blank\" href=\"http://images.51cto.com/files/uploadimg/20100611/1508521.gif\" style=\"color: rgb(0, 66, 118);\"><img class=\"fit-image\" border=\"0\" alt=\"三个组件关系\" width=\"435\" height=\"230\" src=\"http://images.51cto.com/files/uploadimg/20100611/1508521.gif\" style=\"border: 0px;\"></a><br style=\"clear: both; width: 0px; height: 0px;\"><span style=\"font-size:undefined;\"><strong>图2.三个组件关系</strong></span></p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\"><strong style=\"text-align: center;\">核心组件详解</strong></p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">这里将详细介绍每个组件内部类的层次关系，以及它们在运行时的时序顺序。我们在使用Spring是应该注意的地方。</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\"><strong style=\"text-align: center;\">Bean组件</strong></p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">前面已经说明了Bean组件对Spring的重要性，下面看看Bean这个组件式怎么设计的。Bean组件在Spring的org.springframework.beans包下。这个包下的所有类主要解决了三件事：Bean的定义、Bean 的创建以及对Bean的解析。对Spring的使用者来说唯一需要关心的就是Bean的创建，其他两个由Spring在内部帮你完成了，对你来说是透明的。</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">SpringBean的创建时典型的工厂模式，他的顶级接口是BeanFactory，下图是这个工厂的继承层次关系：</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; text-align: center; background-color: rgb(248, 248, 248);\"><a target=\"_blank\" target=\"_blank\" href=\"http://images.51cto.com/files/uploadimg/20100611/1508522.png\" style=\"color: rgb(0, 66, 118);\"><img class=\"fit-image\" border=\"0\" alt=\"Bean工厂的继承关系\" width=\"498\" height=\"252\" src=\"http://images.51cto.com/files/uploadimg/20100611/1508522.png\" style=\"border: 0px;\"></a>&nbsp;<br style=\"clear: both; width: 0px; height: 0px;\"><span style=\"font-size:undefined;\"><strong>图4.Bean工厂的继承关系</strong></span></p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">BeanFactory有三个子类：ListableBeanFactory、HierarchicalBeanFactory和Autowire Capable Bean Factory。但是从上图中我们可以发现最终的默认实现类是DefaultListableBeanFactory，他实 现了所有的接口。那为何要定义这么多层次的接口呢？查阅这些接口的源码和说明发现，每个接口都有他使用的场合，它主要是为了区分在Spring内部在操作过程中对象的传递和转化过程中，对对象的 数据访问所做的限制。例如ListableBeanFactory接口表示这些Bean是可列表的，而HierarchicalBeanFactory表示的是这些Bean是有继承关系的，也就是每个Bean有可能有父Bean。 AutowireCapableBeanFactory接口定义Bean的自动装配规则。这四个接口共同定义了Bean的集合、Bean之间的关系、以及Bean行为。</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">Bean的定义主要有BeanDefinition描述，如下图说明了这些类的层次关系：</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; text-align: center; background-color: rgb(248, 248, 248);\"><a target=\"_blank\" target=\"_blank\" href=\"http://images.51cto.com/files/uploadimg/20100611/1508523.png\" style=\"color: rgb(0, 66, 118);\"><img class=\"fit-image\" border=\"0\" alt=\"Bean定义的类层次关系图\" width=\"497\" height=\"336\" src=\"http://images.51cto.com/files/uploadimg/20100611/1508523.png\" style=\"border: 0px;\"></a><br style=\"clear: both; width: 0px; height: 0px;\"><span style=\"font-size:undefined;\"><strong>图5.Bean定义的类层次关系图</strong></span></p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">Bean的定义就是完整的描述了在Spring的配置文件中你定义的<bean></bean>节点中所有的信息，包括各种子节点。当Spring成功解析你定义的一个<bean></bean>节点后，在Spring的内部他就被转化 成BeanDefinition对象。以后所有的操作都是对这个对象完成的。</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">Bean的解析过程非常复杂，功能被分的很细，因为这里需要被扩展的地方很多，必须保证有足够的灵活性，以应对可能的变化。Bean的解析主要就是对Spring配置文件的解析。这个解析过程主要通过 下图中的类完成：</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; text-align: center; background-color: rgb(248, 248, 248);\"><a target=\"_blank\" target=\"_blank\" href=\"http://images.51cto.com/files/uploadimg/20100611/1508524.png\" style=\"color: rgb(0, 66, 118);\"><img class=\"fit-image\" border=\"0\" alt=\"Bean的解析类\" width=\"498\" height=\"192\" src=\"http://images.51cto.com/files/uploadimg/20100611/1508524.png\" style=\"border: 0px;\"></a><br style=\"clear: both; width: 0px; height: 0px;\"><span style=\"font-size:undefined;\"><strong>图6.Bean的解析类</strong></span></p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">当然还有具体对tag的解析这里并没有列出。</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\"><strong style=\"text-align: center;\">Context组件</strong></p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">Context在Spring的org.springframework.context包下，前面已经讲解了Context组件在Spring中的作用，他实际上就是给Spring提供一个运行时的环境，用以保存各个对象的状态。下面看一下这个 环境是如何构建的。</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">ApplicationContext是Context的顶级父类，他除了能标识一个应用环境的基本信息外，他还继承了五个接口，这五个接口主要是扩展了Context的功能。下面是Context的类结构图：</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; text-align: center; background-color: rgb(248, 248, 248);\"><a target=\"_blank\" target=\"_blank\" href=\"http://images.51cto.com/files/uploadimg/20100611/1508525.png\" style=\"color: rgb(0, 66, 118);\"><img class=\"fit-image\" border=\"0\" alt=\"Context相关的类结构图\" width=\"498\" height=\"234\" src=\"http://images.51cto.com/files/uploadimg/20100611/1508525.png\" style=\"border: 0px;\"></a><br style=\"clear: both; width: 0px; height: 0px;\"><span style=\"font-size:undefined;\"><strong>图7.Context相关的类结构图</strong></span></p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">从上图中可以看出ApplicationContext继承了BeanFactory，这也说明了Spring容器中运行的主体对象是Bean，另外ApplicationContext继承了ResourceLoader接口，使得ApplicationContext可以访 问到任何外部资源，这将在Core中详细说明。</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\"><strong style=\"text-align: center;\">ApplicationContext的子类主要包含两个方面：</strong></p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">ConfigurableApplicationContext表示该Context是可修改的，也就是在构建Context中用户可以动态添加或修改已有的配置信息，它下面又有多个子类，其中最经常使用的是可更新的Context，即 AbstractRefreshableApplicationContext类。</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">WebApplicationContext顾名思义，就是为web准备的Context他可以直接访问到ServletContext，通常情况下，这个接口使用的少。</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">再往下分就是按照构建Context的文件类型，接着就是访问Context的方式。这样一级一级构成了完整的Context等级层次。</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">总体来说ApplicationContext必须要完成以下几件事：</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">◆标识一个应用环境</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">◆利用BeanFactory创建Bean对象</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">◆保存对象关系表</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">◆能够捕获各种事件</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">Context作为Spring的Ioc容器，基本上整合了Spring的大部分功能，或者说是大部分功能的基础。</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\"><strong style=\"text-align: center;\">Core组件</strong></p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">Core组件作为Spring的核心组件，他其中包含了很多的关键类，其中一个重要组成部分就是定义了资源的访问方式。这种把所有资源都抽象成一个接口的方式很值得在以后的设计中拿来学习。下面就 重要看一下这个部分在Spring的作用。</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">下图是Resource相关的类结构图：</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; text-align: center; background-color: rgb(248, 248, 248);\"><a target=\"_blank\" target=\"_blank\" href=\"http://images.51cto.com/files/uploadimg/20100611/1508526.png\" style=\"color: rgb(0, 66, 118);\"><img class=\"fit-image\" border=\"0\" alt=\"Resource相关的类结构图\" width=\"498\" height=\"235\" src=\"http://images.51cto.com/files/uploadimg/20100611/1508526.png\" style=\"border: 0px;\"></a><br style=\"clear: both; width: 0px; height: 0px;\"><span style=\"font-size:undefined;\"><strong>图8.Resource相关的类结构图</strong></span></p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">从上图可以看出Resource接口封装了各种可能的资源类型，也就是对使用者来说屏蔽了文件类型的不同。对资源的提供者来说，如何把资源包装起来交给其他人用这也是一个问题，我们看到Resource 接口继承了InputStreamSource接口，这个接口中有个getInputStream方法，返回的是InputStream类。这样所有的资源都被可以通过InputStream这个类来获取，所以也屏蔽了资源的提供者。另外还有一 个问题就是加载资源的问题，也就是资源的加载者要统一，从上图中可以看出这个任务是由ResourceLoader接口完成，他屏蔽了所有的资源加载者的差异，只需要实现这个接口就可以加载所有的资源， 他的默认实现是DefaultResourceLoader。</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">下面看一下Context和Resource是如何建立关系的？首先看一下他们的类关系图：</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; text-align: center; background-color: rgb(248, 248, 248);\"><a target=\"_blank\" target=\"_blank\" href=\"http://images.51cto.com/files/uploadimg/20100611/1508527.png\" style=\"color: rgb(0, 66, 118);\"><img class=\"fit-image\" border=\"0\" alt=\"Context和Resource的类关系图\" width=\"498\" height=\"359\" src=\"http://images.51cto.com/files/uploadimg/20100611/1508527.png\" style=\"border: 0px;\"></a><br style=\"clear: both; width: 0px; height: 0px;\"><span style=\"font-size:undefined;\"><strong>图9.Context和Resource的类关系图</strong></span></p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">从上图可以看出，Context是把资源的加载、解析和描述工作委托给了ResourcePatternResolver类来完成，他相当于一个接头人，他把资源的加载、解析和资源的定义整合在一起便于其他组件使用。 Core组件中还有很多类似的方式。</p>   \n', '2016-04-16 01:21:23', '0');
INSERT INTO `article` VALUES ('10095', '10003', 'Spring学习笔记（12）----------aop', '\n<p><span style=\"font-size:18px;\">先了解AOP的相关术语:<br>1.通知(Advice):<br>通知定义了切面是什么以及何时使用。描述了切面要完成的工作和何时需要执行这个工作。<br>2.连接点(Joinpoint):<br>程序能够应用通知的一个“时机”，这些“时机”就是连接点，例如方法被调用时、异常被抛出时等等。<br>3.切入点(Pointcut)<br>通知定义了切面要发生的“故事”和时间，那么切入点就定义了“故事”发生的地点，例如某个类或方法的名称，Spring中允许我们方便的用正则表达式来指定<br>4.切面(Aspect)<br>通知和切入点共同组成了切面：时间、地点和要发生的“故事”<br>5.引入(Introduction)<br>引入允许我们向现有的类添加新的方法和属性(Spring提供了一个方法注入的功能）<br>6.目标(Target)<br>即被通知的对象，如果没有AOP,那么它的逻辑将要交叉别的事务逻辑，有了AOP之后它可以只关注自己要做的事（AOP让他做爱做的事）<br>7.代理(proxy)<br>应用通知的对象，详细内容参见设计模式里面的代理模式<br>8.织入(Weaving)<br>把切面应用到目标对象来创建新的代理对象的过程，织入一般发生在如下几个时机:<br>(1)编译时：当一个类文件被编译时进行织入，这需要特殊的编译器才可以做的到，例如AspectJ的织入编译器<br>(2)类加载时：使用特殊的ClassLoader在目标类被加载到程序之前增强类的字节代码<br>(3)运行时：切面在运行的某个时刻被织入,SpringAOP就是以这种方式织入切面的，原理应该是使用了JDK的动态代理技术<br><br>Spring提供了4种实现AOP的方式：<br>1.经典的基于代理的AOP<br>2.@AspectJ注解驱动的切面<br>3.纯POJO切面<br>4.注入式AspectJ切面<br><br>首先看经典的基于代理的AOP:<br>Spring支持五种类型的通知：<br>Before(前)&nbsp; org.apringframework.aop.MethodBeforeAdvice<br>After-returning(返回后) org.springframework.aop.AfterReturningAdvice<br>After-throwing(抛出后) org.springframework.aop.ThrowsAdvice<br>Arround(周围) org.aopaliance.intercept.MethodInterceptor<br>Introduction(引入) org.springframework.aop.IntroductionInterceptor</span></p><p><span style=\"font-size:18px;\">&nbsp;</span></p><p><span style=\"font-size:18px;\">&nbsp;</span></p><p><span style=\"font-size:18px;color:#3333ff;\">&nbsp;&nbsp;&nbsp; 上边这些谁也不愿意看！但是，要是要想学好这部分内容的话，没有办法，还是要硬着头皮去理解这些含义的。</span></p><p><span style=\"font-size:18px;color:#ff00;\">aop要怎么玩？就几个步骤而已！</span></p><p><span style=\"font-size:18px;\">1.创建通知：实现这几个接口，把其中的方法实现了</span></p><p><br><span style=\"font-size:18px;\">2.定义切点和通知者：在Spring配制文件中配置这些信息</span></p><p><br><span style=\"font-size:18px;\">3.使用ProxyFactoryBean来生成代理</span></p><p><span style=\"font-size:18px;\">&nbsp;</span></p><p><span style=\"background-color: rgb(51, 255, 51);\"><span style=\"font-size:18px;\">----------------------&nbsp; 就拿睡觉举例&nbsp;&nbsp;&nbsp; --------------------------</span></span></p><p><span style=\"background-color: rgb(51, 255, 51);\"><span style=\"font-size:18px;\">（我认为吧！学it就不能把知识学死了，万万不能的是死记代码！我们可以把抽象的知识形象化，以便更好地理解）</span></span></p><p><span style=\"background-color: rgb(51, 255, 51);\"></span><span style=\"font-size:18px;\">&nbsp;</span></p><p><span style=\"background-color: rgb(51, 255, 51);\"></span><span style=\"font-size:18px;\">&nbsp;</span></p><p><span style=\"font-size:18px;\">&nbsp;</span></p><p><span style=\"font-size:18px;\">&nbsp;&nbsp; 首先写一个接口叫Sleepable,这是一个牛X的接口,所有具有睡觉能力的东西都可以实现该接口（不光生物，包括关机选项里面的休眠）上代码！</span></p><p><span style=\"font-size:18px;\">&nbsp;接口Sleepable</span></p><div class=\"bar\"><div class=\"tools\">&nbsp;</div></div><span><span style=\"font-size:18px;\"><span class=\"keyword\"></span></span></span><pre class=\"java\" name=\"code\">package com.spring.aop.bean;  \n\npublic interface Sleepable {     \n\n    public void sleep();  \n\n}\n</pre><p class=\"alt\"><span style=\"font-size:18px;\"><br><span style=\"font-size:18px;background-color: rgb(240, 240, 240);\"></span></span>&nbsp;</p><p class=\"alt\"><span style=\"font-size:18px;\"><span style=\"font-size:18px;background-color: rgb(240, 240, 240);\">然后写一个Human类，他实现了这个接口</span></span></p><span style=\"font-size:18px;\"></span><p><span style=\"font-size:18px;\">&nbsp; </span></p><span style=\"font-size:18px;\"></span><p><span style=\"font-size:18px;\">Human类</span></p><div class=\"bar\"><div class=\"tools\">&nbsp;</div></div><span><span style=\"font-size:18px;\"><span class=\"keyword\"></span></span></span><pre class=\"java\" name=\"code\">package com.spring.aop.bean;  \n\npublic class Human implements Sleepable {   \n\n    public void sleep() {  \n\n       // TODO Auto-generated method stub  \n\n        System.out.println(&quot;失眠了！哎！一只羊。。。Z 。zzz。梦中自有颜如玉&quot;);  \n\n    }   \n\n}  \n</pre><p class=\"alt\">&nbsp;</p><pre class=\"java\" style=\"display: none;\" name=\"code\">&lt;span style=&quot;font-size:18px;&quot;&gt;package com.spring.aop.bean;\n\npublic class Human implements Sleepable {\n\n	public void sleep() {\n		// TODO Auto-generated method stub\n        System.out.println(&quot;失眠了！哎！一只羊。。。Z 。zzz。梦中自有颜如玉&quot;);\n	}\n\n}\n&lt;/span&gt;</pre><p><br><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 好了，这是主角，不过睡觉前后要做些辅助工作的，最基本的是脱穿衣服，失眠的人还要吃安眠药什么的,但是这些动作与纯粹的睡觉这一“业务逻辑”是不相干的，如果把这些代码全部加入到sleep方法中，是不是有违单一职责呢？，这时候我们就需要AOP了。<br>编写一个SleepHelper类，它里面包含了睡觉的辅助工作,用AOP术语来说它就应该是通知了，我们需要实现上面的接口</span></p><p><span style=\"font-size:18px;\">&nbsp;</span></p><p><span style=\"font-size:18px;\">SleepHelper类</span></p><span><span style=\"font-size:18px;\"><span class=\"keyword\"></span></span></span><pre class=\"java\" name=\"code\">package com.spring.aop.bean;  \n\n  \n\nimport java.lang.reflect.Method;  \n\n  \n\nimport org.springframework.aop.AfterReturningAdvice;  \n\nimport org.springframework.aop.MethodBeforeAdvice;  \n\n  \n\npublic class SleepHelper implements MethodBeforeAdvice, AfterReturningAdvice {  \n\n  \n\n    public void afterReturning(Object arg0, Method arg1, Object[] arg2,  \n\n            Object arg3) throws Throwable {  \n\n        // TODO Auto-generated method stub  \n\n          \n\n        System.out.println(&quot;穿衣服！吃饭饭！打泡泡！别比比!&quot;);  \n\n  \n\n    }  \n\n  \n\n    public void before(Method arg0, Object[] arg1, Object arg2)  \n\n            throws Throwable {  \n\n        // TODO Auto-generated method stub  \n\n        System.out.println(&quot;脱衣服！睡觉觉，打泡泡！别比比！&quot;);  \n\n  \n\n    }  \n\n  \n\n}  \n</pre><p><span style=\"font-size:18px;\"></span>&nbsp;</p><p><span style=\"font-size:18px;\">然后在spring配置文件中进行配置:</span></p><div class=\"bar\"><div class=\"tools\">&nbsp;</div></div><span><span><span style=\"font-size:18px;\"></span></span></span><pre class=\"java\" name=\"code\">&lt;bean id=&quot;sleepHelper&quot; class=&quot;test.spring.aop.bean.SleepHelper&quot;&gt;  &lt;/bean&gt;  </pre><p class=\"alt\">&nbsp;</p><pre class=\"plain\" style=\"display: none;\" name=\"code\">&lt;span style=&quot;font-size:18px;&quot;&gt;&lt;bean id=&quot;sleepHelper&quot; class=&quot;test.spring.aop.bean.SleepHelper&quot;&gt;\n&lt;/bean&gt;&lt;/span&gt;</pre><p><br><span style=\"font-size:18px;\">OK!现在创建通知的工作就完成了.<br><br>第二步是进行配置，这是很令人蛋疼的操作，尤其是这么热的天，Spring又把东西的名字起的见鬼的长！它为啥不能像usr这种风格呢？<br><br>首先要做的是配置一个切点,据说切点的表示方式在Spring中有好几种，但是常用的只有两种：1.使用正则表达式 2.使用AspectJ表达式 AspectJ我不是很熟悉(我也是熟悉<br><br>党 or 精通党？),我还是习惯用正则表达式<br><br>Spring使用org.springframework.aop.support.JdkRegexpMethodPointcut来定义正则表达式切点</span></p><span><span><span style=\"font-size:18px;\"></span></span></span><pre class=\"java\" name=\"code\">&lt;bean id=&quot;spleepPointcut&quot; class=&quot;org.springframework.aop.support.JdkRegexpMethodPointcut&quot;&gt;  \n\n  &lt;property name=&quot;pattern&quot; value=&quot;.*sleep&quot;/&gt;  \n\n&lt;/bean&gt;  \n</pre><p><br><span style=\"font-size:18px;\">pattern属性指定了正则表达式，它匹配所有的sleep方法<br><br>切点仅仅是定义了故事发生的地点，还有故事发生的时间以及最重要的故事的内容,就是通知了，我们需要把通知跟切点结合起来，我们要使用的通知者是:<br>org.springframework.aop.support.DefaultPointcutAdvisor</span></p><p><span style=\"font-size:18px;\"></span>&nbsp;</p><span><span><span style=\"font-size:18px;\"></span></span></span><pre class=\"java\" name=\"code\">&lt;bean id=&quot;sleepHelperAdvisor&quot; class=&quot;org.springframework.aop.support.DefaultPointcutAdvisor&quot;&gt;  \n\n     &lt;property name=&quot;advice&quot; ref=&quot;sleepHelper&quot;/&gt;  \n\n     &lt;property name=&quot;pointcut&quot; ref=&quot;sleepPointcut&quot;/&gt;  \n\n&lt;/bean&gt;  \nbean id=&quot;sleepHelperAdvisor&quot; class=&quot;org.springframework.aop.support.DefaultPointcutAdvisor&quot;&gt;\n     &lt;property name=&quot;advice&quot; ref=&quot;sleepHelper&quot;/&gt;\n     &lt;property name=&quot;pointcut&quot; ref=&quot;sleepPointcut&quot;/&gt;\n&lt;/bean&gt;\n</pre><p class=\"alt\"><br><br><span style=\"font-size:18px;\">切入点和通知都配置完成，接下来该调用ProxyFactoryBean产生代理对象了<br></span></p><span><span><span style=\"font-size:18px;\"></span></span></span><pre class=\"java\" name=\"code\">&lt;bean id=&quot;humanProxy&quot; class=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&gt;  \n\n     &lt;property name=&quot;target&quot; ref=&quot;human&quot;/&gt;  \n\n     &lt;property name=&quot;interceptorNames&quot; value=&quot;sleepHelperAdvisor&quot; /&gt;  \n\n     &lt;property name=&quot;proxyInterfaces&quot; value=&quot;test.spring.aop.bean.Sleepable&quot; /&gt;  \n\n&lt;/bean&gt;  \n</pre><p>&nbsp;</p><span style=\"font-size:18px;\"><strong>以上就是配置文件中的内容了！ </strong></span><p><br><span style=\"font-size:18px;\">ProxyFactoryBean是一个代理，我们可以把它转换为proxyInterfaces中指定的实现该interface的代理对象</span></p><p><span style=\"font-size:18px;\">下面就是展现真正奇迹的时候了！</span></p><p><span style=\"font-size:18px;\">&nbsp;</span></p><p><span style=\"font-size:18px;\">TestAOP类</span></p><span><span style=\"font-size:18px;\"><span class=\"keyword\"></span></span></span><pre class=\"java\" name=\"code\">package com.spring.aop.bean;  \n\n  \n\nimport org.springframework.context.ApplicationContext;  \n\nimport org.springframework.context.support.ClassPathXmlApplicationContext;   \n\npublic class TestAOP {       \n\n    public static void main(String[] args) {  \n\n        ApplicationContext ac = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);  \n\n        Sleepable sleeper = (Sleepable) ac.getBean(&quot;human&quot;);  \n\n        sleeper.sleep();  \n\n    }  \n\n}  \n</pre><p><br><span style=\"font-size:18px;color:#3333ff;\"><strong>实现后，打印出----------------------------------&gt;</strong></span></p><p><strong><span style=\"color:#3333ff;\"></span></strong><span style=\"font-size:18px;\">&nbsp;</span></p><p><span style=\"font-size:18px;color:#ff00;\">脱衣服！睡觉觉，打泡泡！别比比！<br>失眠了！哎！一只羊。。。Z 。zzz。梦中自有颜如玉<br>穿衣服！吃饭饭！打泡泡！别比比!</span></p><p><span style=\"font-size:18px;\">&nbsp;</span></p><p><span style=\"font-size:18px;color:#0660;\"><strong>OK!</strong></span></p><p><span style=\"font-size:18px;color:#0660;\"><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 这是我们想要的结果，但是上面这个过程貌似有点复杂，尤其是配置切点跟通知,Spring提供了一种自动代理的功能，能让切点跟通知自动进行匹配，修改配置文件如下:</strong></span></p><p><strong><span style=\"font-size:18px;color:#0660;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 原来的配置需要注释掉</span></strong></p><span><span><span style=\"font-size:18px;\"></span></span></span><pre class=\"java\" name=\"code\">&lt;bean id=&quot;sleepHelper&quot; class=&quot;test.spring.aop.bean.SleepHelper&quot;&gt;  \n\n &lt;/bean&gt;  \n\n &lt;bean id=&quot;sleepAdvisor&quot; class=&quot;org.springframework.aop.support.RegexpMethodPointcutAdvisor&quot;&gt;  \n\n   &lt;property name=&quot;advice&quot; ref=&quot;sleepHelper&quot;/&gt;  \n\n   &lt;property name=&quot;pattern&quot; value=&quot;.*sleep&quot;/&gt;  \n\n &lt;/bean&gt;  \n\n &lt;bean id=&quot;human&quot; class=&quot;test.spring.aop.bean.Human&quot;&gt;  \n\n &lt;/bean&gt;  \n\n&lt;bean class=&quot;org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator&quot;/&gt;  \n&lt;bean id=&quot;sleepHelper&quot; class=&quot;test.spring.aop.bean.SleepHelper&quot;&gt;&lt;/bean&gt;\n  &lt;bean id=&quot;sleepAdvisor&quot; class=&quot;org.springframework.aop.support.RegexpMethodPointcutAdvisor&quot;&gt;\n    &lt;property name=&quot;advice&quot; ref=&quot;sleepHelper&quot;/&gt;\n    &lt;property name=&quot;pattern&quot; value=&quot;.*sleep&quot;/&gt;\n  &lt;/bean&gt;\n  &lt;bean id=&quot;human&quot; class=&quot;test.spring.aop.bean.Human&quot;&gt;\n&lt;/bean&gt;\n&lt;bean class=&quot;org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator&quot;/&gt;\n</pre><p class=\"alt\"><br><span style=\"font-size:18px;\">成功输出结果跟前面一样!</span></p><p><br><span style=\"font-size:18px;\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;只要我们声明了org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator(我勒个去的，名太长了)就能为方法匹配的bean自动创建代理！<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 但是这样还是要有很多工作要做,有更简单的方式吗?&nbsp;<span style=\"color:#ff6666;\">&nbsp;&nbsp;&nbsp;<strong> 有！！！！！</strong></span></span></p><p><span style=\"font-size:18px;color:#ff6666;\">本人很懒就直接粘贴复制了！</span></p><p><span style=\"font-size:18px;\"></span><p>一种方式是使用AspectJ提供的注解:<br><br></p><pre class=\"java\" name=\"code\">package test.mine.spring.bean;\n\nimport org.aspectj.lang.annotation.AfterReturning;\nimport org.aspectj.lang.annotation.Aspect;\nimport org.aspectj.lang.annotation.Before;\nimport org.aspectj.lang.annotation.Pointcut;\n@Aspect\npublic class SleepHelper {\n\n    public SleepHelper(){\n        \n    }\n    \n    @Pointcut(&quot;execution(* *.sleep())&quot;)\n    public void sleeppoint(){}\n    \n    @Before(&quot;sleeppoint()&quot;)\n    public void beforeSleep(){\n        System.out.println(&quot;睡觉前要脱衣服!&quot;);\n    }\n    \n    @AfterReturning(&quot;sleeppoint()&quot;)\n    public void afterSleep(){\n        System.out.println(&quot;睡醒了要穿衣服！&quot;);\n    }\n    \n}\n</pre><p><br><br>用@Aspect的注解来标识切面,注意不要把它漏了，否则Spring创建代理的时候会找不到它,@Pointcut注解指定了切点，@Before和@AfterReturning指定了运行时的通知，注意的是要在注解中传入切点的名称<br>然后我们在Spring配置文件上下点功夫,首先是增加AOP的XML命名空间和声明相关schema<br>命名空间:<br>xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;<br>schema声明:<br>http://www.springframework.org/schema/aop<br>http://www.springframework.org/schema/aop/spring-aop-2.0.xsd<br><br>然后加上这个标签:<br>&lt; aop:aspectj-autoproxy/&gt; 有了这个Spring就能够自动扫描被@Aspect标注的切面了<br><br>最后是运行，很简单方便了：<br></p><pre class=\"java\" name=\"code\">public class Test {\n\n    public static void main(String[] args){\n        ApplicationContext appCtx = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);\n        Sleepable human = (Sleepable)appCtx.getBean(&quot;human&quot;);\n        human.sleep();\n    }\n}</pre><p><br>下面我们来看最后一种常用的实现AOP的方式:使用Spring来定义纯粹的POJO切面<br><br>前面我们用到了&lt;aop:aspectj-autoproxy/&gt;标签,Spring在aop的命名空间里面还提供了其他的配置元素:<br>&lt; aop:advisor&gt; 定义一个AOP通知者<br>&lt;aop:after&gt; 后通知<br>&lt;aop:after-returning&gt; 返回后通知<br>&lt;aop:after-throwing&gt; 抛出后通知<br>&lt;aop:around&gt; 周围通知<br>&lt;aop:aspect&gt;定义一个切面<br>&lt;aop:before&gt;前通知<br>&lt;aop:config&gt;顶级配置元素，类似于&lt;beans&gt;这种东西<br>&lt;aop:pointcut&gt;定义一个切点<br><br>我们用AOP标签来实现睡觉这个过程:<br>代码不变，只是修改配置文件,加入AOP配置即可:<br></p><pre class=\"java\" name=\"code\">&lt; aop:config&gt;\n    &lt;aop:aspect ref=&quot;sleepHelper&quot;&gt;\n    &lt;aop:before method=&quot;beforeSleep&quot; pointcut=&quot;execution(* *.sleep(..))&quot;/&gt;\n    &lt;aop:after method=&quot;afterSleep&quot; pointcut=&quot;execution(* *.sleep(..))&quot;/&gt;\n    &lt;/aop:aspect&gt;\n&lt; /aop:config&gt;</pre><p><br><br><span style=\"color:#339999;\">完！</span><br><br>OK~~基本上就这么多了吧，要想用好还得多折腾折腾，另外玩玩AspectJ~不就是个玩！</p><p>   \n', '2016-04-16 01:21:23', '0');
INSERT INTO `article` VALUES ('10096', '10003', 'Spring学习笔记（1）---------初识Spring', '\n<div style=\"box-sizing: border-box; font-family: \'Open Sans\', Arial, \'Hiragino Sans GB\', \'Microsoft YaHei\', 微软雅黑, STHeiti, \'WenQuanYi Micro Hei\', SimSun, sans-serif, sans-serif; font-size: 16px; color: rgb(83, 91, 96); line-height: 22px;\"></div><div style=\"box-sizing: border-box; font-family: \'Open Sans\', Arial, \'Hiragino Sans GB\', \'Microsoft YaHei\', 微软雅黑, STHeiti, \'WenQuanYi Micro Hei\', SimSun, sans-serif, sans-serif; font-size: 16px; color: rgb(83, 91, 96); line-height: 22px;\"></div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\"><strong>一、Spring是什么</strong></div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">通常说的Spring其实指的是Spring Framework，它是Spring下的一个子项目，Spring围绕Spring Framework这个核心项目开发了大量其他项目，比如Spring Security，Spring Data，Spring WebFlow等等。</div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">Spring是为简化Java EE开发而生，而在Java EE中使用最多的就是Spring Framework，接下来我们主要就是学习Spring Framework。</div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">Spring Framework包括他的核心解决方案IoC容器、Spring AOP。另外，还有对Web、数据访问层的支持。</div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">下面是Spring Framework架构图：</div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\"><img src=\"http://images.51cto.com/files/uploadimg/20100611/1508520.gif\" alt=\"Spring框架的总体架构图\"><br><br></div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\"><img src=\"file:///C:/Documents%20and%20Settings/boya/Local%20Settings/Temp/Wiz/dfe7e97a-0823-42fa-b0c7-b8d6581caad6_0_files/abd534d5-6a92-3663-8a1a-1d41580d93b1[1].png\" alt=\"\" style=\"max-width: 96%; height: auto; vertical-align: middle; border: 0px none; margin: 0px auto; text-align: center;\"></div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\"><strong><br></strong></div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\"><strong>二、Spring IoC容器</strong></div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">Spring IoC(Inversion of Control，控制反转)是Spring Framework的最核心的部分。</div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">所谓控制反转，是指通过使用IoC容器对象依赖关系的管理被反转了，也就是说，对象之间的依赖关系由IoC容器进行管理，并且由Ioc容器通过依赖注入（DI，Dependency Injection）的方式来完成对象的注入。</div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">&nbsp;</div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">在使用Spring的开发中，我们需要将所有的类在Spring的IoC容器中进行注册，告诉Spring你是什么，你需要什么，然后IoC容器会在你需要哪个对象时为你创建这个对象以及该对象依赖的其他对象实例（这就是依赖注入）。这些类的创建、销毁都会交由IoC容器来管理，而不再由引用它的对象维护。将以前的“对象-对象”的依赖模式转变为了“对象-IoC容器-对象”的依赖模式。</div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">&nbsp;</div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">Spring提供了两种注册IoC容器的方式：XML方式和注解的方式。</div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\"><strong>&nbsp; &nbsp; &nbsp;Spring的设计理念</strong><br></div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\"><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">其实Spring就是面向Bean的编程（BOP,Bean Oriented Programming），Bean在Spring 中才是真正的主角。</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">Bean在Spring中作用就像Object对OOP的意义一样，没有对象的概念就像没有面向对象编程，Spring中没有Bean也就没有Spring存在的意义。就像一次演出舞台都准备好了但是却没有演员一样。为什 么要Bean这种角色Bean或者为何在Spring如此重要，这由Spring框架的设计目标决定，Spring为何如此流行，我们用Spring的原因是什么，想想你会发现原来Spring解决了一个非常关键的问题他可以让 你把对象之间的依赖关系转而用配置文件来管理，也就是他的依赖注入机制。而这个注入关系在一个叫Ioc容器中管理，那Ioc容器中有又是什么就是被Bean包裹的对象。Spring正是通过把对象包装在 Bean中而达到对这些对象管理以及一些列额外操作的目的。</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">它这种设计策略完全类似于Java实现OOP的设计理念，当然了Java本身的设计要比Spring复杂太多太多，但是都是构建一个数据结构，然后根据这个数据结构设计他的生存环境，并让它在这个环境中 按照一定的规律在不停的运动，在它们的不停运动中设计一系列与环境或者与其他个体完成信息交换。这样想来回过头想想我们用到的其他框架都是大慨类似的设计理念。</p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\"><span style=\"text-align: center;\">核心组件如何协同工作</span></p><p style=\"margin-top: 10px; margin-bottom: 10px; padding-top: 0px; padding-bottom: 0px; color: rgb(51, 51, 51); text-indent: 28px; font-family: 宋体; font-size: 14px; line-height: 28px; background-color: rgb(248, 248, 248);\">前面说Bean是Spring中关键因素，那Context和Core又有何作用呢？前面吧Bean比作一场演出中的演员的话，那Context就是这场演出的舞台背景，而Core应该就是演出的道具了。只有他们在一起才能 具备能演出一场好戏的最基本的条件。当然有最基本的条件还不能使这场演出脱颖而出，还要他表演的节目足够的精彩，这些节目就是Spring能提供的特色功能了。</p><br></div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">&nbsp;</div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\"><strong>三、Spring IoC的XML配置</strong></div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">1、添加Spring基本依赖包</div><blockquote dir=\"ltr\" style=\"padding: 0px 0px 0px 10px; margin: 0px 0px 1.5em; border-left-width: 5px; border-left-style: solid; border-left-color: rgb(10, 162, 132); font-size: 14px; word-wrap: break-word; word-break: break-all; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; line-height: 27.2px; background-color: rgb(246, 246, 246);\"><div style=\"font-size: 16px; line-height: 1.7em;\"><div style=\"line-height: 1.7em;\">aopalliance-1.0.jar</div><div style=\"line-height: 1.7em;\">commons-logging-1.1.1.jar</div><div style=\"line-height: 1.7em;\">spring-aop-3.2.0.RELEASE.jar</div><div style=\"line-height: 1.7em;\">spring-beans-3.2.0.RELEASE.jar</div><div style=\"line-height: 1.7em;\">spring-context-3.2.0.RELEASE.jar</div><div style=\"line-height: 1.7em;\">spring-core-3.2.0.RELEASE.jar</div><div style=\"line-height: 1.7em;\">spring-expression-3.2.0.RELEASE.jar</div></div></blockquote><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">2、添加Spring配置文件applicationContext.xml&nbsp;<br><pre class=\"prettyprint xml\" style=\"padding: 0.3em; font-family: Monaco, Menlo, Consolas, \'Courier New\', monospace; border-radius: 4px; margin-top: 0px; margin-bottom: 1.5em; font-size: 12px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; border: 1px solid rgba(0, 0, 0, 0.14902); overflow-y: auto; background-color: rgb(246, 246, 246);\"><span class=\"pi\" style=\"color: rgb(153, 153, 153); font-weight: bold;\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>\n<span class=\"tag\" style=\"color: rgb(0, 0, 128);\">&lt;<span class=\"title\">beans</span> <span class=\"attribute\" style=\"color: rgb(0, 128, 128);\">xmlns</span>=<span class=\"value\" style=\"color: rgb(221, 17, 68);\">&quot;http://www.springframework.org/schema/beans&quot;</span>\n       <span class=\"attribute\" style=\"color: rgb(0, 128, 128);\">xmlns:xsi</span>=<span class=\"value\" style=\"color: rgb(221, 17, 68);\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>\n       <span class=\"attribute\" style=\"color: rgb(0, 128, 128);\">xsi:schemaLocation</span>=<span class=\"value\" style=\"color: rgb(221, 17, 68);\">&quot;http://www.springframework.org/schema/beans \n           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;</span>&gt;</span>\n    <span class=\"tag\" style=\"color: rgb(0, 0, 128);\">&lt;<span class=\"title\">bean</span> <span class=\"attribute\" style=\"color: rgb(0, 128, 128);\">id</span>=<span class=\"value\" style=\"color: rgb(221, 17, 68);\">&quot;userDao&quot;</span> <span class=\"attribute\" style=\"color: rgb(0, 128, 128);\">class</span>=<span class=\"value\" style=\"color: rgb(221, 17, 68);\">&quot;com.boya.spring.ioc.UserDao&quot;</span> /&gt;</span>\n    <span class=\"tag\" style=\"color: rgb(0, 0, 128);\">&lt;<span class=\"title\">bean</span> <span class=\"attribute\" style=\"color: rgb(0, 128, 128);\">id</span>=<span class=\"value\" style=\"color: rgb(221, 17, 68);\">&quot;exampleBean&quot;</span> <span class=\"attribute\" style=\"color: rgb(0, 128, 128);\">class</span>=<span class=\"value\" style=\"color: rgb(221, 17, 68);\">&quot;com.boya.spring.ioc.ExampleBean&quot;</span>&gt;</span>\n        <span class=\"tag\" style=\"color: rgb(0, 0, 128);\">&lt;<span class=\"title\">property</span> <span class=\"attribute\" style=\"color: rgb(0, 128, 128);\">name</span>=<span class=\"value\" style=\"color: rgb(221, 17, 68);\">&quot;name&quot;</span> <span class=\"attribute\" style=\"color: rgb(0, 128, 128);\">value</span>=<span class=\"value\" style=\"color: rgb(221, 17, 68);\">&quot;boya&quot;</span> /&gt;</span>\n        <span class=\"tag\" style=\"color: rgb(0, 0, 128);\">&lt;<span class=\"title\">property</span> <span class=\"attribute\" style=\"color: rgb(0, 128, 128);\">name</span>=<span class=\"value\" style=\"color: rgb(221, 17, 68);\">&quot;userDao&quot;</span> <span class=\"attribute\" style=\"color: rgb(0, 128, 128);\">ref</span>=<span class=\"value\" style=\"color: rgb(221, 17, 68);\">&quot;userDao&quot;</span> /&gt;</span>\n    <span class=\"tag\" style=\"color: rgb(0, 0, 128);\">&lt;/<span class=\"title\">bean</span>&gt;</span>\n<span class=\"tag\" style=\"color: rgb(0, 0, 128);\">&lt;/<span class=\"title\">beans</span>&gt;</span></pre></div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">3、分别创建User类和ExampleBean类</div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">User类：&nbsp;<br><pre class=\"prettyprint java\" style=\"padding: 0.3em; font-family: Monaco, Menlo, Consolas, \'Courier New\', monospace; border-radius: 4px; margin-top: 0px; margin-bottom: 1.5em; font-size: 12px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; border: 1px solid rgba(0, 0, 0, 0.14902); overflow-y: auto; background-color: rgb(246, 246, 246);\"><span class=\"keyword\" style=\"font-weight: bold;\">public</span> <span class=\"class\" style=\"color: rgb(68, 85, 136); font-weight: bold;\"><span class=\"keyword\" style=\"color: rgb(51, 51, 51);\">class</span> <span class=\"title\">UserDao</span> {</span>\n    <span class=\"keyword\" style=\"font-weight: bold;\">public</span> String getName() {\n        <span class=\"keyword\" style=\"font-weight: bold;\">return</span> <span class=\"string\" style=\"color: rgb(221, 17, 68);\">&quot;boya&quot;</span>;\n    }\n}</pre></div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">ExampleBean类：&nbsp;<br><pre class=\"prettyprint cs\" style=\"padding: 0.3em; font-family: Monaco, Menlo, Consolas, \'Courier New\', monospace; border-radius: 4px; margin-top: 0px; margin-bottom: 1.5em; font-size: 12px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; border: 1px solid rgba(0, 0, 0, 0.14902); overflow-y: auto; background-color: rgb(246, 246, 246);\"><span class=\"keyword\" style=\"font-weight: bold;\">public</span> <span class=\"keyword\" style=\"font-weight: bold;\">class</span> ExampleBean {\n    <span class=\"keyword\" style=\"font-weight: bold;\">private</span> String name;\n    <span class=\"keyword\" style=\"font-weight: bold;\">private</span> UserDao userDao;\n    \n    <span class=\"keyword\" style=\"font-weight: bold;\">public</span> <span class=\"keyword\" style=\"font-weight: bold;\">void</span> print(){\n        System.<span class=\"keyword\" style=\"font-weight: bold;\">out</span>.println(<span class=\"string\" style=\"color: rgb(221, 17, 68);\">&quot;Name is :&quot;</span>+name);\n    }\n    \n    <span class=\"keyword\" style=\"font-weight: bold;\">public</span> <span class=\"keyword\" style=\"font-weight: bold;\">void</span> userPrint(){\n        System.<span class=\"keyword\" style=\"font-weight: bold;\">out</span>.println(<span class=\"string\" style=\"color: rgb(221, 17, 68);\">&quot;User name is :&quot;</span>+userDao.getName());\n    }\n    \n    <span class=\"comment\" style=\"color: rgb(153, 153, 136); font-style: italic;\">//省略getter、setter方法</span>\n}</pre></div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">4、IoC容器测试&nbsp;<br><pre class=\"prettyprint cs\" style=\"padding: 0.3em; font-family: Monaco, Menlo, Consolas, \'Courier New\', monospace; border-radius: 4px; margin-top: 0px; margin-bottom: 1.5em; font-size: 12px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; border: 1px solid rgba(0, 0, 0, 0.14902); overflow-y: auto; background-color: rgb(246, 246, 246);\">ApplicationContext context = <span class=\"keyword\" style=\"font-weight: bold;\">new</span> ClassPathXmlApplicationContext(<span class=\"string\" style=\"color: rgb(221, 17, 68);\">&quot;classpath:applicationContext.xml&quot;</span>);\nExampleBean exampleBean = context.getBean(<span class=\"string\" style=\"color: rgb(221, 17, 68);\">&quot;exampleBean&quot;</span>, ExampleBean.<span class=\"keyword\" style=\"font-weight: bold;\">class</span>);\nexampleBean.print();\nexampleBean.userPrint();</pre></div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">&nbsp;&nbsp;&nbsp;&nbsp;输出：</div><blockquote dir=\"ltr\" style=\"padding: 0px 0px 0px 10px; margin: 0px 0px 1.5em; border-left-width: 5px; border-left-style: solid; border-left-color: rgb(10, 162, 132); font-size: 14px; word-wrap: break-word; word-break: break-all; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; line-height: 27.2px; background-color: rgb(246, 246, 246);\"><div style=\"font-size: 16px; line-height: 1.7em;\"><div style=\"line-height: 1.7em;\">Name is :boya</div><div style=\"line-height: 1.7em;\">User name is :boya</div></div></blockquote><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">&nbsp;</div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\"><strong>四、Spring IoC注解</strong></div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">Spring 的依赖配置方式与 Spring 框架的内核自身是松耦合设计的。然而，直到 Spring 3.0 以前，使用 XML 进行依赖配置几乎是唯一的选择。Spring 3.0 的出现改变了这一状况，它提供了一系列的针对依赖注入的注解，这使得 Spring IoC 在 XML 文件之外多了一种可行的选择。下面介绍如何使用这些注解进行依赖配置的管理。</div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">&nbsp;</div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">我将注解分为两类，第一类用于属性装配，第二类用于类的注册。</div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\"><br></div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">属性装配使用的注解一般有两种，分别是Autowired、Resource。</div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">@Autowired</div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">1、@Autowired默认按照类型匹配的方式(byType)进行注入<div style=\"line-height: 1.7em;\">3、@Autowired注解可以用于成员变量、setter方法、构造器函数等</div><div style=\"line-height: 1.7em;\">4、使用@Autowired注解须有且仅有一个与之匹配的Bean，当找不到匹配的 Bean 或者存在多个匹配的Bean时，Spring 容器将抛出异常</div><div style=\"line-height: 1.7em;\">5、Spring 允许我们通过 @Qualifier 注释指定注入 Bean 的名称。@Autowired 和 @Qualifier 结合使用时，自动注入的策略就从 byType 转变成 byName 了</div><div style=\"line-height: 1.7em;\">&nbsp;</div><div style=\"line-height: 1.7em;\"><div style=\"line-height: 1.7em;\">@Resource</div><div style=\"line-height: 1.7em;\">1、@Resource 的作用相当于 @Autowired，只不过 @Autowired 按 byType 自动注入，@Resource 默认按 byName 自动注入罢了</div><div style=\"line-height: 1.7em;\">2、@Resource 有两个属性，分别是 name 和 type，Spring 将 @Resource 注释的 name 属性解析为 Bean 的名字，而 type 属性则解析为 Bean 的类型。所以如果使用 name 属性，则使用 byName 的自动注入策略，而使用 type 属性时则使用 byType 自动注入策略。</div></div></div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\"><br></div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">需要将某个类在IoC容器注册时，可以使用@Component、@Repository、@Service和 @Controller&nbsp;</div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">@Component</div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">1、@Component是所有受Spring管理组件的通用形式，而@Repository、@Service和 @Controller则是@Component的细化， 用来表示更具体的用例(分别对应了持久化层、服务层和表现层)</div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">2、使用@Component注解定义的Bean，默认的名称（id）是小写开头的非限定类名。如UserDao类定义的Bean名称就是userDao。你也可以指定Bean的名称： @Component(&quot;abc&quot;)</div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\"><br></div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">下面，我们把上面的示例改为注解配置的形式。</div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">首先，需要修改配置文件applicationContext.xml，如下：&nbsp;<br><pre class=\"prettyprint xml\" style=\"padding: 0.3em; font-family: Monaco, Menlo, Consolas, \'Courier New\', monospace; border-radius: 4px; margin-top: 0px; margin-bottom: 1.5em; font-size: 12px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; border: 1px solid rgba(0, 0, 0, 0.14902); overflow-y: auto; background-color: rgb(246, 246, 246);\"><span class=\"pi\" style=\"color: rgb(153, 153, 153); font-weight: bold;\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>\n<span class=\"tag\" style=\"color: rgb(0, 0, 128);\">&lt;<span class=\"title\">beans</span> <span class=\"attribute\" style=\"color: rgb(0, 128, 128);\">xmlns</span>=<span class=\"value\" style=\"color: rgb(221, 17, 68);\">&quot;http://www.springframework.org/schema/beans&quot;</span>\n       <span class=\"attribute\" style=\"color: rgb(0, 128, 128);\">xmlns:xsi</span>=<span class=\"value\" style=\"color: rgb(221, 17, 68);\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>\n       <span class=\"attribute\" style=\"color: rgb(0, 128, 128);\">xmlns:context</span>=<span class=\"value\" style=\"color: rgb(221, 17, 68);\">&quot;http://www.springframework.org/schema/context&quot;</span>\n       <span class=\"attribute\" style=\"color: rgb(0, 128, 128);\">xsi:schemaLocation</span>=<span class=\"value\" style=\"color: rgb(221, 17, 68);\">&quot;http://www.springframework.org/schema/beans \n           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n           http://www.springframework.org/schema/context \n           http://www.springframework.org/schema/context/spring-context-3.0.xsd&quot;</span>&gt;</span>\n    <span class=\"tag\" style=\"color: rgb(0, 0, 128);\">&lt;<span class=\"title\">context:component-scan</span> <span class=\"attribute\" style=\"color: rgb(0, 128, 128);\">base-package</span>=<span class=\"value\" style=\"color: rgb(221, 17, 68);\">&quot;com.boya.spring.ioc&quot;</span> /&gt;</span>\n<span class=\"tag\" style=\"color: rgb(0, 0, 128);\">&lt;/<span class=\"title\">beans</span>&gt;</span></pre></div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\"><span style=\"line-height: 25px; font-family: Helvetica, Tahoma, Arial, sans-serif;\">&lt;context:component-scan /&gt;的base-package属性指定了需要扫描的类包，类包及其递归子包中所有的类使用的注解都会被处理。&nbsp;</span></div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">2、在类中添加注解</div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">UserDao类：&nbsp;<br><pre class=\"prettyprint java\" style=\"padding: 0.3em; font-family: Monaco, Menlo, Consolas, \'Courier New\', monospace; border-radius: 4px; margin-top: 0px; margin-bottom: 1.5em; font-size: 12px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; border: 1px solid rgba(0, 0, 0, 0.14902); overflow-y: auto; background-color: rgb(246, 246, 246);\"><span class=\"annotation\">@Repository</span>\n<span class=\"keyword\" style=\"font-weight: bold;\">public</span> <span class=\"class\" style=\"color: rgb(68, 85, 136); font-weight: bold;\"><span class=\"keyword\" style=\"color: rgb(51, 51, 51);\">class</span> <span class=\"title\">UserDao</span> {</span>\n    <span class=\"keyword\" style=\"font-weight: bold;\">public</span> String getName() {\n        <span class=\"keyword\" style=\"font-weight: bold;\">return</span> <span class=\"string\" style=\"color: rgb(221, 17, 68);\">&quot;boya&quot;</span>;\n    }\n}</pre></div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">ExampleBean类：&nbsp;<br><pre class=\"prettyprint java\" style=\"padding: 0.3em; font-family: Monaco, Menlo, Consolas, \'Courier New\', monospace; border-radius: 4px; margin-top: 0px; margin-bottom: 1.5em; font-size: 12px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; border: 1px solid rgba(0, 0, 0, 0.14902); overflow-y: auto; background-color: rgb(246, 246, 246);\"><span class=\"annotation\">@Service</span>\n<span class=\"keyword\" style=\"font-weight: bold;\">public</span> <span class=\"class\" style=\"color: rgb(68, 85, 136); font-weight: bold;\"><span class=\"keyword\" style=\"color: rgb(51, 51, 51);\">class</span> <span class=\"title\">ExampleBean</span> {</span>\n    <span class=\"annotation\">@Resource</span>\n    <span class=\"annotation\">@Value</span>(<span class=\"string\" style=\"color: rgb(221, 17, 68);\">&quot;boya&quot;</span>)\n    <span class=\"keyword\" style=\"font-weight: bold;\">private</span> String name;\n    <span class=\"annotation\">@Resource</span>\n    <span class=\"keyword\" style=\"font-weight: bold;\">private</span> UserDao userDao;\n    \n    <span class=\"keyword\" style=\"font-weight: bold;\">public</span> <span class=\"keyword\" style=\"font-weight: bold;\">void</span> print(){\n        System.out.println(<span class=\"string\" style=\"color: rgb(221, 17, 68);\">&quot;Name is :&quot;</span>+name);\n    }\n    \n    <span class=\"keyword\" style=\"font-weight: bold;\">public</span> <span class=\"keyword\" style=\"font-weight: bold;\">void</span> userPrint(){\n        System.out.println(<span class=\"string\" style=\"color: rgb(221, 17, 68);\">&quot;User name is :&quot;</span>+userDao.getName());\n    }\n}</pre></div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">前面介绍了，用于装配属性的注解@Autowired和@Service是可以用于成员变量的，所以当我们在成员变量设置这两个注解后，setter方法就可以去除了。</div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">&nbsp;</div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">3、IoC容器测试&nbsp;<br><pre class=\"prettyprint cs\" style=\"padding: 0.3em; font-family: Monaco, Menlo, Consolas, \'Courier New\', monospace; border-radius: 4px; margin-top: 0px; margin-bottom: 1.5em; font-size: 12px; line-height: 1.5em; word-break: break-all; word-wrap: break-word; white-space: pre-wrap; border: 1px solid rgba(0, 0, 0, 0.14902); overflow-y: auto; background-color: rgb(246, 246, 246);\">ApplicationContext context = <span class=\"keyword\" style=\"font-weight: bold;\">new</span> ClassPathXmlApplicationContext(<span class=\"string\" style=\"color: rgb(221, 17, 68);\">&quot;classpath:applicationContext.xml&quot;</span>);\nExampleBean exampleBean = context.getBean(<span class=\"string\" style=\"color: rgb(221, 17, 68);\">&quot;exampleBean&quot;</span>, ExampleBean.<span class=\"keyword\" style=\"font-weight: bold;\">class</span>);\nexampleBean.print();\nexampleBean.userPrint();</pre></div><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">输出结果：</div><blockquote dir=\"ltr\" style=\"padding: 0px 0px 0px 10px; margin: 0px 0px 1.5em; border-left-width: 5px; border-left-style: solid; border-left-color: rgb(10, 162, 132); font-size: 14px; word-wrap: break-word; word-break: break-all; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; line-height: 27.2px; background-color: rgb(246, 246, 246);\"><div style=\"font-size: 16px; line-height: 1.7em;\"><div style=\"line-height: 1.7em;\"><span style=\"color: windowtext; font-family: \'Courier New\';\">Name&nbsp;is&nbsp;:boya</span></div><div style=\"line-height: 1.7em;\"><span style=\"color: windowtext; font-family: \'Courier New\';\">User&nbsp;name&nbsp;is&nbsp;:boya</span></div></div></blockquote><div style=\"font-size: 16px; line-height: 27.2px; color: rgb(51, 51, 51); font-family: \'Helvetica Neue\', Helvetica, Tahoma, Arial, STXihei, \'Microsoft YaHei\', 微软雅黑, sans-serif; background-color: rgb(254, 254, 254);\">&nbsp;</div><pre style=\"box-sizing: border-box; font-family: \'Courier New\', Courier, monospace; font-size: 14px; overflow: auto; padding: 0.5em; margin-top: 1em; margin-bottom: 1em; line-height: 1.42857; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); border-width: 1px 1px 1px 3px; border-style: solid; border-color: rgb(204, 204, 204); border-radius: 0px; white-space: pre-wrap; background-color: rgb(245, 245, 245);\"></pre>   \n', '2016-04-16 01:21:23', '0');
INSERT INTO `article` VALUES ('10097', '10003', 'Spring学习笔记（11）------------bean之间的关系', '\n<p><span style=\"font-size:18px;\">1）继承：</span></p><p><span style=\"font-size:18px;\">如果多个bean存在相同的配置信息，Spring允许我们定义一个父，子将自动继承父的配置信息。</span></p><p><span style=\"font-size:18px;\">如下：</span></p><p><span style=\"font-size:18px;\"></span></p><div><div class=\"syntaxhighlighter  java ie\" id=\"highlighter_324400\"><div class=\"toolbar\"><span></span>&nbsp;</div><table border=\"0\" cellspacing=\"0\" cellpadding=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\"><span style=\"font-size:18px;\"></span>&nbsp;</div><div class=\"line number2 index1 alt1\"><span style=\"font-size:18px;\"></span>&nbsp;</div><div class=\"line number3 index2 alt2\"><span style=\"font-size:18px;\"></span>&nbsp;</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><span style=\"font-size:18px;\"><code class=\"java plain\">&lt;bean</code><code class=\"java keyword\">class</code><code class=\"java plain\">=</code><code class=\"java string\">&quot;com.baobaobao.Car&quot;</code><code class=\"java plain\">id=</code><code class=\"java string\">&quot;car1&quot;</code><code class=\"java plain\">p:color=</code><code class=\"java string\">&quot;红色&quot;</code> <code class=\"java plain\">p:price=</code><code class=\"java string\">&quot;200000&quot;</code><code class=\"java plain\">p:brand=</code><code class=\"java string\">&quot;奥迪&quot;</code><code class=\"java plain\">&gt;</code></span></div><div class=\"line number2 index1 alt1\"><span style=\"font-size:18px;\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</span></div><div class=\"line number3 index2 alt2\"><span style=\"font-size:18px;\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java plain\">&lt;bean</code><code class=\"java keyword\">class</code><code class=\"java plain\">=</code><code class=\"java string\">&quot;com.baobaobao.Car&quot;</code><code class=\"java plain\">id=</code><code class=\"java string\">&quot;car2&quot;</code><code class=\"java plain\">p:color=</code><code class=\"java string\">&quot;白色&quot;</code> <code class=\"java plain\">p:price=</code><code class=\"java string\">&quot;200000&quot;</code><code class=\"java plain\">p:brand=</code><code class=\"java string\">&quot;奥迪&quot;</code><code class=\"java plain\">&gt;&lt;/bean&gt;&lt;/bean&gt;</code></span></div></div></td></tr></tbody></table></div></div><br><p><p><span style=\"font-size:18px;\"></span></p><p><span style=\"font-size:18px;\"></span></p><p><span style=\"font-size:18px;\">这两个bean的配置存在大量重复信息，可以通过父子bean很好的消除这种重复配置：</span></p><p><span style=\"font-size:18px;\"></span></p><div><div class=\"syntaxhighlighter  java ie\" id=\"highlighter_311694\"><div class=\"toolbar\"><span><span style=\"font-size:18px;\"></span></span></div><table border=\"0\" cellspacing=\"0\" cellpadding=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\"><span style=\"font-size:18px;\"></span>&nbsp;</div><div class=\"line number2 index1 alt1\"><span style=\"font-size:18px;\"></span>&nbsp;</div><div class=\"line number3 index2 alt2\"><span style=\"font-size:18px;\"></span>&nbsp;</div><div class=\"line number4 index3 alt1\"><span style=\"font-size:18px;\"></span>&nbsp;</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><span style=\"font-size:18px;\"><code class=\"java plain\">&lt;bean </code><code class=\"java keyword\">class</code><code class=\"java plain\">=</code><code class=\"java string\">&quot;com.baobaobao.Car&quot;</code><code class=\"java plain\">id=</code><code class=\"java string\">&quot;abstractcar&quot; </code><code class=\"java plain\">p:color=</code><code class=\"java string\">&quot;黑色&quot; </code><code class=\"java plain\">p:price=</code><code class=\"java string\">&quot;200000&quot; </code><code class=\"java plain\">p:brand=</code><code class=\"java string\">&quot;奥迪&quot;</code> <code class=\"java keyword\">abstract</code><code class=\"java plain\">=</code><code class=\"java string\">&quot;true&quot;</code><code class=\"java plain\">&gt;</code></span></div><div class=\"line number2 index1 alt1\"><span style=\"font-size:18px;\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</span></div><div class=\"line number3 index2 alt2\"><span style=\"font-size:18px;\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java plain\">&lt;bean id=</code><code class=\"java string\">&quot;car1&quot;</code><code class=\"java plain\">p:color=</code><code class=\"java string\">&quot;红色&quot;</code><code class=\"java plain\">parent=</code><code class=\"java string\">&quot;abstractcar&quot;</code><code class=\"java plain\">&gt;</code></span></div><div class=\"line number4 index3 alt1\"><span style=\"font-size:18px;\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java plain\">&lt;bean id=</code><code class=\"java string\">&quot;car2&quot;</code><code class=\"java plain\">p:color=</code><code class=\"java string\">&quot;白色&quot;</code><code class=\"java plain\">parent=</code><code class=\"java string\">&quot;abstractcar&quot;</code><code class=\"java plain\">&gt;</code></span></div><div class=\"line number4 index3 alt1\"><span style=\"font-size:18px;\"><code class=\"java plain\">&lt;/bean&gt;</code></span></div><div class=\"line number4 index3 alt1\"><span style=\"font-size:18px;\"><code class=\"java plain\">&lt;/bean&gt;&lt;/bean&gt;</code></span></div></div></td></tr></tbody></table></div></div><span style=\"font-size:18px;\">Car1跟Car2都继承自abstractcar,Spring会将父bean的配置信息传递给子bean，如果子bean提供了父bean已有的配置信息，那么子bean的会覆盖父bean的</span><p><p><p><span style=\"font-size:18px;\"></span></p><p><span style=\"font-size:18px;\">父bean的功能主要是为了简化子bean的配置，所以一般声明为abstract=“true”，表示这个不实例化为一个对应的Bean，如果用户不指定该属性为true，那么IOC容器会实例化一个名叫abstractcar的Bean。</span></p><p><span style=\"font-size:18px;\"><br></span></p><p><span style=\"font-size:18px;\">2）依赖</span></p><p><span style=\"font-size:18px;\">一般情况使用即可建立一个bean对其他bean的依赖关系，Spring负责管理这些Bean的关系，当实例化一个Bean时，Spring保证该Bean所依赖的其他Bean已经初始化。</span></p><p><span style=\"font-size:18px;\">书上举了一个比较经典而特殊的例子：</span></p><p><span style=\"font-size:18px;\">例如一个系统，有一个SystemSetting类，</span></p><div><div class=\"syntaxhighlighter  java ie\" id=\"highlighter_530918\"><div class=\"toolbar\"><span></span>&nbsp;</div><table border=\"0\" cellspacing=\"0\" cellpadding=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\"><span style=\"font-size:18px;\"></span>&nbsp;</div><div class=\"line number2 index1 alt1\"><span style=\"font-size:18px;\"></span>&nbsp;</div><div class=\"line number3 index2 alt2\"><span style=\"font-size:18px;\"></span>&nbsp;</div><div class=\"line number4 index3 alt1\"><span style=\"font-size:18px;\"></span>&nbsp;</div><div class=\"line number5 index4 alt2\"><span style=\"font-size:18px;\"></span>&nbsp;</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><span style=\"font-size:18px;\"><code class=\"java keyword\">public</code><code class=\"java keyword\">class</code><code class=\"java plain\">SystemSetting {</code></span></div><div class=\"line number2 index1 alt1\"><span style=\"font-size:18px;\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java keyword\">public</code><code class=\"java keyword\">static</code><code class=\"java keyword\">int</code> <code class=\"java plain\">SESSION_TIMEOUT=</code><code class=\"java value\">30</code><code class=\"java plain\">;</code></span></div><div class=\"line number3 index2 alt2\"><span style=\"font-size:18px;\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java keyword\">public</code><code class=\"java keyword\">static</code><code class=\"java keyword\">int</code> <code class=\"java plain\">REFRESH_CYCLE=</code><code class=\"java value\">60</code><code class=\"java plain\">;</code></span></div><div class=\"line number4 index3 alt1\"><span style=\"font-size:18px;\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java plain\">.....</code></span><code class=\"java plain\"><span style=\"font-size:18px;\">}</span></code></div></div></td></tr></tbody></table></div></div><p><p><span style=\"font-size:18px;\"></span></p><p><span style=\"font-size:18px;\"></span></p><p><span style=\"font-size:18px;\">里面有一些系统参数的默认值。</span></p><p><span style=\"font-size:18px;\">而这个系统有个管理后台，可以修改这些值保存到</span><a target=\"_blank\" class=\"keylink\" href=\"http://www.2cto.com/database/\" target=\"_blank\"><span style=\"font-size:18px;\">数据库</span></a><span style=\"font-size:18px;\">中，而有一个SysInit类,在初始化的时候从数据中拿到值，修改SystemSetting的参数</span></p><p><span style=\"font-size:18px;\"></span></p><div><div class=\"syntaxhighlighter  java ie\" id=\"highlighter_504332\"><div class=\"toolbar\"><span></span>&nbsp;</div><table border=\"0\" cellspacing=\"0\" cellpadding=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\"><span style=\"font-size:18px;\"></span>&nbsp;</div><div class=\"line number2 index1 alt1\"><span style=\"font-size:18px;\"></span>&nbsp;</div><div class=\"line number3 index2 alt2\"><span style=\"font-size:18px;\"></span>&nbsp;</div><div class=\"line number4 index3 alt1\"><span style=\"font-size:18px;\"></span>&nbsp;</div><div class=\"line number5 index4 alt2\"><span style=\"font-size:18px;\"></span>&nbsp;</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><span style=\"font-size:18px;\"><code class=\"java keyword\">public</code><code class=\"java keyword\">class</code><code class=\"java plain\">SysInit {</code></span></div><div class=\"line number2 index1 alt1\"><span style=\"font-size:18px;\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java keyword\">public</code><code class=\"java plain\">SysInit(){</code></span></div><div class=\"line number3 index2 alt2\"><span style=\"font-size:18px;\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java plain\">SystemSetting.SESSION_TIMEOUT=</code><code class=\"java value\">100</code><code class=\"java plain\">;</code></span></div><div class=\"line number4 index3 alt1\"><span style=\"font-size:18px;\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java plain\">SystemSetting.REFRESH_CYCLE=</code><code class=\"java value\">120</code><code class=\"java plain\">;</code></span></div><div class=\"line number5 index4 alt2\"><span style=\"font-size:18px;\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java plain\">}</code></span></div><div class=\"line number6 index5 alt1\"><code class=\"java plain\"><span style=\"font-size:18px;\">}</span></code></div></div></td></tr></tbody></table></div></div><br><span style=\"font-size:18px;\">假设这个</span><a target=\"_blank\" class=\"keylink\" href=\"http://www.2cto.com/os/\" target=\"_blank\"><span style=\"font-size:18px;\">系统</span></a><span style=\"font-size:18px;\">有一个缓存刷新管理器，它需要根据系统参数SystemSetting.REFRESH_CYCLE创建缓存刷新定时任务：</span><p>&nbsp;</p><div><div class=\"syntaxhighlighter  java ie\" id=\"highlighter_750703\"><table border=\"0\" cellspacing=\"0\" cellpadding=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\"><span style=\"font-size:18px;\"></span>&nbsp;</div><div class=\"line number2 index1 alt1\"><span style=\"font-size:18px;\"></span>&nbsp;</div><div class=\"line number3 index2 alt2\"><span style=\"font-size:18px;\"></span>&nbsp;</div><div class=\"line number4 index3 alt1\"><span style=\"font-size:18px;\"></span>&nbsp;</div><div class=\"line number5 index4 alt2\"><span style=\"font-size:18px;\"></span>&nbsp;</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><span style=\"font-size:18px;\"><code class=\"java keyword\">public</code><code class=\"java keyword\">class</code><code class=\"java plain\">CacheManager {</code></span></div><div class=\"line number2 index1 alt1\"><span style=\"font-size:18px;\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java keyword\">public</code><code class=\"java plain\">CacheManager(){</code></span></div><div class=\"line number3 index2 alt2\"><span style=\"font-size:18px;\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java plain\">Timer timer =</code><code class=\"java keyword\">new</code><code class=\"java plain\">Timer();</code></span></div><div class=\"line number4 index3 alt1\"><span style=\"font-size:18px;\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java plain\">TimerTask cacheTask =</code><code class=\"java keyword\">new</code><code class=\"java plain\">CacheTask();</code></span></div><div class=\"line number5 index4 alt2\"><span style=\"font-size:18px;\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java plain\">timer.schedule(cacheTask,</code><code class=\"java value\">0</code><code class=\"java plain\">,SystemSetting.REFRESH_CYCLE);</code></span><span style=\"font-size:18px;\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java plain\">}</code></span></div><div class=\"line number7 index6 alt2\"><code class=\"java plain\"><span style=\"font-size:18px;\">}</span></code></div></div></td></tr></tbody></table></div></div><br><span style=\"font-size:18px;\">在上面的例子中CacheManager依赖于SystemSetting,而SystemSetting的值由SysInit负责初始化，虽然CacheManager不直接依赖于SysInit,但是，从逻辑上讲，CacheManager希望在SysInit加载并完成系统参数设置后再启动，以避免调用不到真实的参数值。如果这三个Bean都在配置中配，如何保证SysInit在CacheManager之前初始化呢</span><p>&nbsp;</p><p><span style=\"font-size:18px;\">使用depends-on属性可以指定Bean的前置依赖Bean，前置依赖Bean会在本Bean实例化之前创建好：</span></p><p><span></span>&nbsp;</p><div><div class=\"syntaxhighlighter  java ie\" id=\"highlighter_155424\"><table border=\"0\" cellspacing=\"0\" cellpadding=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\"><span style=\"font-size:18px;\"></span>&nbsp;</div><div class=\"line number2 index1 alt1\"><span style=\"font-size:18px;\"></span>&nbsp;</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><span style=\"font-size:18px;\"><code class=\"java plain\">&lt;bean </code><code class=\"java keyword\">class</code><code class=\"java plain\">=</code><code class=\"java string\">&quot;com.baobaobao.CacheManager&quot;</code><code class=\"java plain\">id=</code><code class=\"java string\">&quot;manager&quot;</code><code class=\"java plain\">depends-on=</code><code class=\"java string\">&quot;sysinit&quot;</code><code class=\"java plain\">&gt;</code></span></div><div class=\"line number3 index2 alt2\"><span style=\"font-size:18px;\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java plain\">&lt;bean </code><code class=\"java keyword\">class</code><code class=\"java plain\">=</code><code class=\"java string\">&quot;com.baobaobao.SysInit&quot;</code><code class=\"java plain\">id=</code><code class=\"java string\">&quot;sysinit&quot;</code><code class=\"java plain\">&gt;</code></span></div><div class=\"line number3 index2 alt2\"><span style=\"font-size:18px;\"><code class=\"java plain\">&lt;/bean&gt;&lt;/bean&gt;</code></span></div></div></td></tr></tbody></table></div></div><br><span style=\"font-size:18px;\">这样配置就哦了，如果前置依赖于多个bean，可以通过逗号，空格，或分号分隔开来。</span><p><p><span style=\"font-size:18px;\"></span>&nbsp;</p><p><span style=\"font-size:18px;\">3）引用</span></p><p><span style=\"font-size:18px;\">假如一个bean要引用另一个bean的配置的id属性值,可以使用如下配置：</span></p><p><span></span>&nbsp;</p><div><div class=\"syntaxhighlighter  java ie\" id=\"highlighter_40077\"><table border=\"0\" cellspacing=\"0\" cellpadding=\"0\"><tbody><tr><td class=\"gutter\"><div class=\"line number1 index0 alt2\"><span style=\"font-size:18px;\"></span>&nbsp;</div><div class=\"line number2 index1 alt1\"><span style=\"font-size:18px;\"></span>&nbsp;</div><div class=\"line number4 index3 alt1\"><span style=\"font-size:18px;\"></span>&nbsp;</div><div class=\"line number5 index4 alt2\"><span style=\"font-size:18px;\"></span>&nbsp;</div><div class=\"line number6 index5 alt1\"><span style=\"font-size:18px;\"></span>&nbsp;</div></td><td class=\"code\"><div class=\"container\"><div class=\"line number1 index0 alt2\"><span style=\"font-size:18px;\"><code class=\"java plain\">&lt;bean</code><code class=\"java keyword\">class</code><code class=\"java plain\">=</code><code class=\"java string\">&quot;com.baobaobao.Car&quot;</code><code class=\"java plain\">id=</code><code class=\"java string\">&quot;car&quot;</code><code class=\"java plain\">&gt;</code></span></div><div class=\"line number2 index1 alt1\"><span style=\"font-size:18px;\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java plain\">&lt;bean</code><code class=\"java keyword\">class</code><code class=\"java plain\">=</code><code class=\"java string\">&quot;com.baobaobao.Boss&quot;</code><code class=\"java plain\">id=</code><code class=\"java string\">&quot;boss&quot;</code><code class=\"java plain\">&gt;</code></span></div><div class=\"line number3 index2 alt2\"><span style=\"font-size:18px;\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java plain\">&lt;property name=</code><code class=\"java string\">&quot;carId&quot;</code><code class=\"java plain\">&gt;</code></span></div><div class=\"line number4 index3 alt1\"><span style=\"font-size:18px;\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java plain\">&lt;idref bean=</code><code class=\"java string\">&quot;car&quot;</code><code class=\"java plain\">&gt;</code></span></div><div class=\"line number5 index4 alt2\"><span style=\"font-size:18px;\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java plain\">&lt;/idref&gt;</code></span></div><div class=\"line number6 index5 alt1\"><span style=\"font-size:18px;\"><code class=\"java spaces\">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class=\"java plain\">&lt;/property&gt;&lt;/bean&gt;&lt;/bean&gt;</code></span></div></div></td></tr></tbody></table></div></div><p>&nbsp;</p><p><span style=\"font-size:18px;\">如果引用者与被引用者位于同一个配置文件中，可以使用，这是IDE的XML分析器就可以在开发期发现引用错误了。</span></p><p><span style=\"font-size:18px;\"></span>&nbsp;</p><p><span style=\"font-size:18px;\">&nbsp; Java实例的属性值可以有很多种数据类型、基本类型值、字符串类型、java实例甚至其他的Bean实例、java集合、数组等。所以Spring允许通过如下几个元素为Bean实例的属性指定值：</span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;value</span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;ref</span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;bean</span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;list、set、map、props</span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8;\">&nbsp;&nbsp;<span style=\"margin: 0px; padding: 0px; line-height: 1.8;\">一、value：设置普通属性值</span></span></span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&lt;value.../&gt;元素用于指定字符串类型、基本类型的属性值。Spring使用XML解析器来解析出这些数据，然后利用java.beans.PropertyEdior完成类型转换：从java.lang.String类型转换为所需的参数值类型。如果目标类型是基本数据类型，通常都是可以正确转换。</span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">在Spring配置文件中使用&lt;value.../&gt;元素来为这两个属性指定属性值。</span></p><p><span style=\"font-size:18px;\"></span>&nbsp;</p><div class=\"cnblogs_code\" style=\"margin: 5px 0px; padding: 5px; border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: \'Courier New\' !important; font-size: 12px !important; background-color: rgb(245, 245, 245);\"><pre><span style=\"font-size:18px;\"><span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">1</span> <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&lt;</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">bean </span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">id</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;text&quot;</span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\"> class</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;com.spring.service.impl.ValueTest&quot;</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&gt;</span>\n<span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">2</span>         <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&lt;</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">property </span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">name</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;age&quot;</span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\"> value</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;1&quot;</span> <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">/&gt;</span>\n<span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">3</span>         <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&lt;</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">property </span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">name</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;name&quot;</span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\"> value</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;chenssy&quot;</span> <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">/&gt;</span>\n<span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">4</span>     <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&lt;/</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">bean</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&gt;</span></span></pre></div><p><span style=\"font-size:18px;\"></span>&nbsp;</p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;通过上面可以知道&lt;value.../&gt;元素主要用于传入字符串、基本类型的属性值。</span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span style=\"margin: 0px; padding: 0px; line-height: 1.8;\">&nbsp;&nbsp;<span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8;\">二、ref:配置合作者</span></span></span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&lt;value.../&gt;主要是配置基本类型的属性值，但是如果我们需要为Bean设置属性值是另一个Bean实例时，这个时候需要使用&lt;ref.../&gt;元素。使用&lt;ref.../&gt;元素可以指定如下两个属性。</span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;bean:引用不在同一份XML配置文件中的其他Bean实例的id属性值。</span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;local：引用同一份XML配置文件中的其他Bean实例的id属性值。</span></p><p><span style=\"font-size:18px;\"></span>&nbsp;</p><div class=\"cnblogs_code\" style=\"margin: 5px 0px; padding: 5px; border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: \'Courier New\' !important; font-size: 12px !important; background-color: rgb(245, 245, 245);\"><div class=\"cnblogs_code_toolbar\" style=\"margin: 5px 0px 0px; padding: 0px;\"><span class=\"cnblogs_code_copy\" style=\"margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.8; font-size: 12px !important;\"><a target=\"_blank\" title=\"复制代码\" style=\"margin: 0px; padding: 0px; border: currentColor !important; color: rgb(0, 0, 0);\" target=\"_blank\"><span style=\"font-size:18px;\"></span></a></span></div><pre><span style=\"font-size:18px;\"><span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">1</span> <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&lt;</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">bean </span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">id</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;steelAxe&quot;</span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\"> class</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;com.spring.service.impl.SteelAce&quot;</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&gt;&lt;/</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">bean</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&gt;</span>\n<span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">2</span>     <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&lt;</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">bean </span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">id</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;chinese&quot;</span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\"> class</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;com.spring.service.impl.Chinese&quot;</span> <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&gt;</span>\n<span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">3</span>         <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&lt;</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">property </span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">name</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;axe&quot;</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&gt;</span>\n<span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">4</span>             <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&lt;</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">ref </span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">local</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;steelAxe&quot;</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">/&gt;</span>\n<span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">5</span>         <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&lt;/</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">property</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&gt;</span>\n<span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">6</span>     <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&lt;/</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">bean</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&gt;</span></span></pre><div class=\"cnblogs_code_toolbar\" style=\"margin: 5px 0px 0px; padding: 0px;\"><span class=\"cnblogs_code_copy\" style=\"margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.8; font-size: 12px !important;\"><a target=\"_blank\" title=\"复制代码\" style=\"margin: 0px; padding: 0px; border: currentColor !important; color: rgb(0, 0, 0);\" target=\"_blank\"><span style=\"font-size:18px;\"></span></a></span></div></div><p><span style=\"font-size:18px;\"></span>&nbsp;</p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;其实Spring提供了一种更加简洁的写法：</span></p><p><span style=\"font-size:18px;\"></span>&nbsp;</p><div class=\"cnblogs_code\" style=\"margin: 5px 0px; padding: 5px; border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: \'Courier New\' !important; font-size: 12px !important; background-color: rgb(245, 245, 245);\"><pre><span style=\"font-size:18px;\"><span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">1</span> <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&lt;</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">bean </span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">id</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;steelAxe&quot;</span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\"> class</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;com.spring.service.impl.SteelAce&quot;</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&gt;&lt;/</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">bean</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&gt;</span>\n<span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">2</span>     <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&lt;</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">bean </span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">id</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;chinese&quot;</span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\"> class</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;com.spring.service.impl.Chinese&quot;</span> <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&gt;</span>\n<span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">3</span>         <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&lt;</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">property </span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">name</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;axe&quot;</span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\"> ref</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;steelAxe&quot;</span> <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">/&gt;</span>\n<span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">4</span>     <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&lt;/</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">bean</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&gt;</span></span></pre></div><p><span style=\"font-size:18px;\"></span>&nbsp;</p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;通过property增加ref属性，一样可以将另一个Bean的引用设置成axe属性值。这样写的效果和使用&lt;ref.../&gt;属性一样，而且不需要区分是使用bean属性还是local属性，所以推荐这种写法。</span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8;\">2.1、使用自动装配注入合作者bean</span></span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;Spring支持自动装配Bean与Bean之间的依赖关系，也就是说我们无需显示的指定依赖Bean。由BeanFactory检查XML配置文件内容，根据某种规则，为主调Bean注入依赖关系。</span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">Spring的自动装配机制可以通过&lt;bean.../&gt;元素的default-autowire属性指定，也可以通过&lt;bean.../&gt;元素的autowire属性指定。</span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;自动装配可以减少配置文件的工作量，但是它降低了依赖关系的透明性和清晰性，所以一般来说在较大部署环境中不推荐使用，显示配置合作者能够得到更加清晰的依赖关系。Spring提供了如下几种规则来实现自动装配。</span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;no:不适用自动装配。Bean依赖必须通过ref元素定义。</span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;byName：根据属性名自动装配。BeanFactory查找容器中的全部Bean，找出其中id属性与属性同名的Bean来完成注入。如果没有找到匹配的Bean实例，则Spring不会进行任何注入。</span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;byType：根据属性类型自动装配。BeanFactory查找容器中的全部Bean，如果正好有一个与依赖属性类型相同的Bean，就自动注入这个属性；但是如果有多个这样的Bean，就会抛出一个异常。如果没有匹配的Bean，则什么都不会发生，属性就不会被设置。如果需要无法自动装配时抛出异常，则设置dependency-check=”objects”。</span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;constructor:与不Type类似，区别是用于构造注入的参数。</span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;Autodetect:BeanFactory根据Bean内部结构，决定使用constructor或者byType。如果找到一个默认的构造函数，则使用byTe。</span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8;\">byName规则</span></span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;byTyep规则是指通过名字注入<em><strong>依赖关系</strong></em>，假如Bean&nbsp;A的实现类里面包含setB()方法，而Spring的配置文件恰好包含一个id为b的Bean，则Spring容器就会将b实例注入Bean&nbsp;A中。如果容器中没有名字匹配的Bean，Spring则不会做任何事情。</span></p><p><span style=\"font-size:18px;\"></span>&nbsp;</p><div class=\"cnblogs_code\" style=\"margin: 5px 0px; padding: 5px; border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: \'Courier New\' !important; font-size: 12px !important; background-color: rgb(245, 245, 245);\"><pre><span style=\"font-size:18px;\"><span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">1</span> <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&lt;</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">bean </span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">id</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;chinese&quot;</span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\"> class</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;com.spring.service.impl.Chinese&quot;</span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\"> autowire</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;byName&quot;</span> <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">/&gt;</span>\n<span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">2</span>     <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&lt;</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">bean </span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">id</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;gundog&quot;</span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\"> class</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;com.spring.service.impl.Gundog&quot;</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&gt;</span>\n<span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">3</span>         <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&lt;</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">property </span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">name</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;name&quot;</span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\"> value</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;wangwang&quot;</span> <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">/&gt;</span>\n<span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">4</span>     <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&lt;/</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">bean</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&gt;</span></span></pre></div><p><span style=\"font-size:18px;\"></span>&nbsp;</p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 上面的配置文件指定了byName规则。则com.app.service.impl.Chinese类中提供如下的依赖注入方法：</span></p><p><span style=\"font-size:18px;\"></span>&nbsp;</p><div class=\"cnblogs_code\" style=\"margin: 5px 0px; padding: 5px; border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: \'Courier New\' !important; font-size: 12px !important; background-color: rgb(245, 245, 245);\"><div class=\"cnblogs_code_toolbar\" style=\"margin: 5px 0px 0px; padding: 0px;\"><span class=\"cnblogs_code_copy\" style=\"margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.8; font-size: 12px !important;\"><a target=\"_blank\" title=\"复制代码\" style=\"margin: 0px; padding: 0px; border: currentColor !important; color: rgb(0, 0, 0);\" target=\"_blank\"><span style=\"font-size:18px;\"></span></a></span></div><pre><span style=\"font-size:18px;\"><span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">1</span> <span style=\"color:#000000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">/*\n</span><span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">2</span> <span style=\"color:#000000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">     * 依赖关系必须的setter方法，因为需要通过名字自动装配\n</span><span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">3</span> <span style=\"color:#000000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">     * 所以setter方法必须提供set+Bean名，Bean名的首字母大写\n</span><span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">4</span> <span style=\"color:#000000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">     * @param dog 设置的dog值\n</span><span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">5</span> <span style=\"color:#000000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">     */\n</span><span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">6</span> <span style=\"color:#000000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">    public void setGundog(Dog dog){\n</span><span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">7</span> <span style=\"color:#000000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">        this.dog = dog;\n</span><span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">8</span>     }</span></pre><div class=\"cnblogs_code_toolbar\" style=\"margin: 5px 0px 0px; padding: 0px;\"><span class=\"cnblogs_code_copy\" style=\"margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.8; font-size: 12px !important;\"><a target=\"_blank\" title=\"复制代码\" style=\"margin: 0px; padding: 0px; border: currentColor !important; color: rgb(0, 0, 0);\" target=\"_blank\"><span style=\"font-size:18px;\"></span></a></span></div></div><p><span style=\"font-size:18px;\"></span>&nbsp;</p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8;\">byType规则</span></span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;byType规则是根据类型匹配注入依赖关系。假如A实例有setB(B&nbsp;b)方法，而Spring配置文件中恰好有一个类型B的Bean实例，容器为A注入类型匹配的Bean实例。如果容器中存在多个B的实例，则会抛出异常，如果没有B实例，则不会发生任何事情。</span></p><p><span style=\"font-size:18px;\"></span>&nbsp;</p><div class=\"cnblogs_code\" style=\"margin: 5px 0px; padding: 5px; border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: \'Courier New\' !important; font-size: 12px !important; background-color: rgb(245, 245, 245);\"><pre><span style=\"font-size:18px;\"><span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">1</span> <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&lt;</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">bean </span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">id</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;chinese&quot;</span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\"> class</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;com.spring.service.impl.Chinese&quot;</span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\"> autowire</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;byType&quot;</span> <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">/&gt;</span>\n<span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">2</span>     <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&lt;</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">bean </span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">id</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;gundog&quot;</span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\"> class</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;com.spring.service.impl.Gundog&quot;</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&gt;</span>\n<span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">3</span>         <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&lt;</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">property </span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">name</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;name&quot;</span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\"> value</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;wangwang&quot;</span> <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">/&gt;</span>\n<span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">4</span>     <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&lt;/</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">bean</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&gt;</span></span></pre></div><p><span style=\"font-size:18px;\"></span>&nbsp;</p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 针对上面的配置文件Chinese类有如下方法。</span></p><p><span style=\"font-size:18px;\"></span>&nbsp;</p><div class=\"cnblogs_code\" style=\"margin: 5px 0px; padding: 5px; border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: \'Courier New\' !important; font-size: 12px !important; background-color: rgb(245, 245, 245);\"><div class=\"cnblogs_code_toolbar\" style=\"margin: 5px 0px 0px; padding: 0px;\"><span class=\"cnblogs_code_copy\" style=\"margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.8; font-size: 12px !important;\"><a target=\"_blank\" title=\"复制代码\" style=\"margin: 0px; padding: 0px; border: currentColor !important; color: rgb(0, 0, 0);\" target=\"_blank\"><span style=\"font-size:18px;\"></span></a></span></div><pre><span style=\"font-size:18px;\"><span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">1</span> <span style=\"color:#000000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">/**\n</span><span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">2</span> <span style=\"color:#000000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">     * 依赖关系必须的setter方法\n</span><span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">3</span> <span style=\"color:#000000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">     * 因为使用按类型自动装配，setter方法的参数类型与容器的Bean的类型相同\n</span><span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">4</span> <span style=\"color:#000000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">     * 程序中的Gundog实现了Dog接口\n</span><span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">5</span> <span style=\"color:#000000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">     * @param dog传入的dog对象\n</span><span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">6</span> <span style=\"color:#000000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">     */\n</span><span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">7</span> <span style=\"color:#000000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">    public void setDog(Dog dog){\n</span><span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">8</span> <span style=\"color:#000000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">        this.dog = dog;\n</span><span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">9</span>     }</span></pre><div class=\"cnblogs_code_toolbar\" style=\"margin: 5px 0px 0px; padding: 0px;\"><span class=\"cnblogs_code_copy\" style=\"margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.8; font-size: 12px !important;\"><a target=\"_blank\" title=\"复制代码\" style=\"margin: 0px; padding: 0px; border: currentColor !important; color: rgb(0, 0, 0);\" target=\"_blank\"><span style=\"font-size:18px;\"></span></a></span></div></div><p><span style=\"font-size:18px;\"></span>&nbsp;</p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 当一个Bean即使用自动装配依赖，又使用ref显示依赖时，则显示指定的依赖就会覆盖自动装配。</span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;在默认的情况下，Spring会自动搜索容器中的全部Bean，并对这些Bean进行判断，判断他们是否满足自动装配的条件，如果满足就会将该Bean注入目标Bean实例中。如果我们不想让Spring搜索容器中的全部Bean，也就是说，我们需要Spring来判断哪些Bean需要搜索，哪些Bean不需要搜索，这个时候就需要用到autowire-candidate属性。通过为&lt;bean.../&gt;元素设置autowire-candidate=”false”，即可将该Bean限制在自动装配范围之外，容器在查找自动装配对象时将不考虑该Bean。</span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8;\">&nbsp;三、Bean：注入嵌套Bean</span></span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;如果某个Bean所依赖的Bean不想被Spring容器直接访问，则可以使用嵌套Bean。&lt;bean.../&gt;元素用来定义嵌套Bean，嵌套Bean只对嵌套它的外部Bean有效，Spring容器无法直接访问嵌套Bean，因此在定义嵌套Bean时是无需指定id属性的。</span></p><p><span style=\"font-size:18px;\"></span>&nbsp;</p><div class=\"cnblogs_code\" style=\"margin: 5px 0px; padding: 5px; border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: \'Courier New\' !important; font-size: 12px !important; background-color: rgb(245, 245, 245);\"><div class=\"cnblogs_code_toolbar\" style=\"margin: 5px 0px 0px; padding: 0px;\"><span class=\"cnblogs_code_copy\" style=\"margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.8; font-size: 12px !important;\"><a target=\"_blank\" title=\"复制代码\" style=\"margin: 0px; padding: 0px; border: currentColor !important; color: rgb(0, 0, 0);\" target=\"_blank\"><span style=\"font-size:18px;\"></span></a></span></div><pre><span style=\"font-size:18px;\"><span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">1</span> <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&lt;</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">bean </span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">id</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;chinese&quot;</span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\"> class</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;com.spring.service.impl.Chinese&quot;</span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\"> autowire</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;byName&quot;</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&gt;</span>\n<span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">2</span>         <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&lt;</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">property </span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">name</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;axe&quot;</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&gt;</span>\n<span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">3</span>             <span style=\"color:#0800;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&lt;!--</span> \n<span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">4</span> <span style=\"color:#0800;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">                属性值为嵌套Bean，嵌套Bean不能由Spring容器直接访问，\n</span><span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">5</span> <span style=\"color:#0800;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">                所以嵌套Bean是不需要id属性\n</span><span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">6</span>              <span style=\"color:#0800;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">--&gt;</span>\n<span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">7</span>             <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&lt;</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">bean </span><span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">class</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">=&quot;com.spring.service.impl.SteelAce&quot;</span> <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">/&gt;</span>\n<span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">8</span>         <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&lt;/</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">property</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&gt;</span>\n<span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">9</span>     <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&lt;/</span><span style=\"color:#8000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">bean</span><span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">&gt;</span></span></pre><div class=\"cnblogs_code_toolbar\" style=\"margin: 5px 0px 0px; padding: 0px;\"><span class=\"cnblogs_code_copy\" style=\"margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.8; font-size: 12px !important;\"><a target=\"_blank\" title=\"复制代码\" style=\"margin: 0px; padding: 0px; border: currentColor !important; color: rgb(0, 0, 0);\" target=\"_blank\"><span style=\"font-size:18px;\"></span></a></span></div></div><p><span style=\"font-size:18px;\"></span>&nbsp;</p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 采用上面的配置可以保证嵌套Bean不能被容器访问，因此不用担心其他程序修改嵌套bean。但是嵌套Bean限制了Bean的访问，提高了程序的内聚性。</span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp;</span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<span style=\"color:#ff00;margin: 0px; padding: 0px; line-height: 1.8;\">四、list、set、map、props</span></span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&lt;value.../&gt;元素是注入基本数据类型和String类型的，但是如果某个Bean的属性是集合呢？这个时候我们就需要使用集合元素，&lt;list.../&gt;、&lt;set.../&gt;、&lt;map.../&gt;和&lt;props.../&gt;元素分别用来设置类型list、set、map和Properties的集合属性值。</span></p><p style=\"margin: 10px auto; padding-top: 0px; padding-bottom: 0px;\"><span style=\"font-size:18px;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;先看下面java类：</span></p><p><span style=\"font-size:18px;\"></span>&nbsp;</p><div class=\"cnblogs_code\" style=\"margin: 5px 0px; padding: 5px; border: 1px solid rgb(204, 204, 204); overflow: auto; font-family: \'Courier New\' !important; font-size: 12px !important; background-color: rgb(245, 245, 245);\"><div class=\"cnblogs_code_toolbar\" style=\"margin: 5px 0px 0px; padding: 0px;\"><span class=\"cnblogs_code_copy\" style=\"margin: 0px; padding: 0px 5px 0px 0px; line-height: 1.8; font-size: 12px !important;\"><a target=\"_blank\" title=\"复制代码\" style=\"margin: 0px; padding: 0px; border: currentColor !important; color: rgb(0, 0, 0);\" target=\"_blank\"><span style=\"font-size:18px;\"></span></a></span></div><pre><span style=\"font-size:18px;\"><span style=\"color:#08080;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\"> 1</span> <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">public</span> <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">class</span> Chinese <span style=\"color:#00ff;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\">implements</span><span style=\"color:#000000;margin: 0px; padding: 0px; line-height: 1.8; font-size: 12px !important;\"> Per', '2016-04-16 01:21:24', '0');
INSERT INTO `article` VALUES ('10098', '10003', '程序员的幸福', '\n<p>无论你在开发领域是何种职位，不管是首席黑客官还是代码魔术师，或者就是普通的软件开发人员，你的一天生活都基本上都可以用下面3个词语来总结：<strong>吃、睡、写代码。</strong></p><p>如果说有什么不一样，那很可能是你把顺序颠倒了。但有一点可以确定，一天中的大部分时间你都在与代码打交道。<br></p><p><img src=\"http://img.blog.csdn.net/20160412171058340?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"><br></p><p>“……最难的是，要搞明白你没日没夜地拼命工作到底是为了什么。”<br></p><p>我告诉你程序员的幸福是什么？</p><p><strong>1.写代码过程中的参与感</strong></p><p>这句话其实说起来很简单，但是做到和理解到的很难。我们参加项目的开发，参与世界的进步，立志于用程序改变世界！<br></p><p><strong>2.为自己的兴趣奋斗终生</strong></p><p>为什么不能在最好的时间里拥有更多呢？等牙掉了才去吃龙虾，满脸皱纹了才去用护肤品？我必须着急，因为大多数人都错过了自己人生中最好的时候。<br></p><p>在自己最喜欢的行业干一件或者一项伟大的事情是多么的幸福。说白了，程序员就是为了自己的兴趣成就伟大的事业。</p><p>重要的是需要相信，只有干自己有兴趣的工作，才会赢到最后。<br></p><p><strong>欢迎大家关注我的博客，关注我的微博，如有疑问，请加qq群：454796847、135430763 共同进步！</strong><br></p><p><br></p><p><br></p>   \n', '2016-04-16 01:21:24', '0');
INSERT INTO `article` VALUES ('10099', '10003', 'Spring学习笔记（10）-----------方法注入', '\n\n<div class=\"quote_title\"><span style=\"font-size:18px\">引用</span></div>\n<div class=\"quote_div\"><span style=\"font-size:18px\">在大部分情况下，容器中的bean都是singleton类型的。如果一个singleton bean要引用另外一个singleton bean，或者一个非singleton bean要引用另外一个非singleton bean时，通常情况下将一个bean定义为另一个bean的property&#20540;就可以了。不过对于具有不同生命周期的bean来说这样做就会有问题了，比如在调用一个singleton类型bean A的某个方法时，需要引用另一个非singleton（prototype）类型的bean\n B，对于bean A来说，容器只会创建一次，这样就没法在需要的时候每次让容器为bean A提供一个新的的bean B实例</span></div>\n<br>\n<br>\n<span style=\"font-size:18px\">对于上面的问题Spring提供了三种解决方案： <br>\n</span>\n<ul>\n<li><span style=\"font-size:18px\">放弃控制反转。通过实现ApplicationContextAware接口让bean A能够感知bean 容器，并且在需要的时候通过使用getBean(&quot;B&quot;)方式向容器请求一个新的bean B实例。\n</span></li><li><span style=\"font-size:18px\">Lookup方法注入。Lookup方法注入利用了容器的覆盖受容器管理的bean方法的能力，从而返回指定名字的bean实例。\n</span></li><li><span style=\"font-size:18px\">自定义方法的替代方案。该注入能使用bean的另一个方法实现去替换自定义的方法。 </span></li></ul>\n<br>\n<br>\n<span style=\"font-size:18px\">这里只说前两种方案的实现，第三种方案因为不常用，略过不提，有兴趣的可以了解一下。 <br>\n<br>\n<strong>一：实现环境</strong> <br>\n</span>\n<ul>\n<li><span style=\"font-size:18px\">Eclipse3.4 </span></li><li><span style=\"font-size:18px\">JDK1.5 </span></li><li><span style=\"font-size:18px\">Spring3.0.3 </span></li><li><span style=\"font-size:18px\">Junit 4测试框架 </span></li><li><span style=\"font-size:18px\">依赖jar有log4j-1.2.16.jar，commons-logging-api-1.1.1.jar，cglib-nodep-2.2.jar。\n</span></li></ul>\n<br>\n<span style=\"font-size:18px\"><strong>二：通过实现ApplicationContextAware接口以编程的方式实现</strong>\n<br>\nApplicationContextAware和BeanFactoryAware差不多，用法也差不多，实现了ApplicationContextAware接口的对象会拥有一个ApplicationContext的引用，这样我们就可以已编程的方式操作ApplicationContext。看下面的例子。\n<br>\n</span>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\"><span style=\"font-size:18px\">Java代码 </span><a target=\"_blank\" title=\"收藏这段代码\" href=\"\"><span style=\"font-size:18px\"><img class=\"spinner\" src=\"http://flysnow.iteye.com/images/spinner.gif\" alt=\"\" style=\"\"></span></a></div>\n</div>\n<ol class=\"dp-j\">\n<li><span><span style=\"font-size:18px\"><span class=\"keyword\">package</span><span>&nbsp;com.flysnow.injection;&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\"><span class=\"keyword\">import</span><span>&nbsp;org.springframework.beans.BeansException;&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\"><span class=\"keyword\">import</span><span>&nbsp;org.springframework.context.ApplicationContext;&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\"><span class=\"keyword\">import</span><span>&nbsp;org.springframework.context.ApplicationContextAware;&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\"><span class=\"keyword\">import</span><span>&nbsp;com.flysnow.injection.command.Command;&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\"><span class=\"comment\">/**</span>&nbsp;</span></span></li><li><span><span style=\"font-size:18px\"><span class=\"comment\">&nbsp;*&nbsp;命令管理器</span>&nbsp;</span></span></li><li><span><span style=\"font-size:18px\"><span class=\"comment\">&nbsp;*&nbsp;@author&nbsp;飞雪无情</span>&nbsp;</span></span></li><li><span><span style=\"font-size:18px\"><span class=\"comment\">&nbsp;*</span>&nbsp;</span></span></li><li><span><span style=\"font-size:18px\"><span class=\"comment\">&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\"><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">class</span><span>&nbsp;CommandManager&nbsp;</span><span class=\"keyword\">implements</span><span>&nbsp;ApplicationContextAware&nbsp;{&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">//用于保存ApplicationContext的引用，set方式注入</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">private</span><span>&nbsp;ApplicationContext&nbsp;applicationContext;&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">//模拟业务处理的方法</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;Object&nbsp;process(){&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Command&nbsp;command=createCommand();&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">return</span><span>&nbsp;command.execute();&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">//获取一个命令</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">private</span><span>&nbsp;Command&nbsp;createCommand()&nbsp;{&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">return</span><span>&nbsp;(Command)&nbsp;</span><span class=\"keyword\">this</span><span>.applicationContext.getBean(</span><span class=\"string\">&quot;asyncCommand&quot;</span><span>);&nbsp;</span><span class=\"comment\">//</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;setApplicationContext(ApplicationContext&nbsp;applicationContext)&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">throws</span><span>&nbsp;BeansException&nbsp;{&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">this</span><span>.applicationContext=applicationContext;</span><span class=\"comment\">//获得该ApplicationContext引用</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">}&nbsp;&nbsp;</span></span></li></ol>\n</div>\n<pre title=\"Spring方法注入\" class=\"java\" style=\"display: none;\" name=\"code\" pre_index=\"0\" source_url=\"http://flysnow.iteye.com/blog/733785\" codeable_type=\"Blog\" codeable_id=\"733785\">&lt;span style=&quot;font-size:18px;&quot;&gt;package com.flysnow.injection;\n\nimport org.springframework.beans.BeansException;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.ApplicationContextAware;\n\nimport com.flysnow.injection.command.Command;\n\n/**\n * 命令管理器\n * @author 飞雪无情\n *\n */\npublic class CommandManager implements ApplicationContextAware {\n	//用于保存ApplicationContext的引用，set方式注入\n	private ApplicationContext applicationContext;\n	//模拟业务处理的方法\n	public Object process(){\n		Command command=createCommand();\n		return command.execute();\n	}\n	//获取一个命令\n	private Command createCommand() {\n	    return (Command) this.applicationContext.getBean(&quot;asyncCommand&quot;); //\n	}\n\n	public void setApplicationContext(ApplicationContext applicationContext)\n			throws BeansException {\n		this.applicationContext=applicationContext;//获得该ApplicationContext引用\n	}\n\n}\n&lt;/span&gt;</pre><br>\n<span style=\"font-size:18px\">下面定义Command接口和其实现类AsyncCommand。 <br>\n</span>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\"><span style=\"font-size:18px\">Java代码 </span><a target=\"_blank\" title=\"收藏这段代码\" href=\"\"><span style=\"font-size:18px\"><img class=\"spinner\" src=\"http://flysnow.iteye.com/images/spinner.gif\" alt=\"\" style=\"\"></span></a></div>\n</div>\n<ol class=\"dp-j\">\n<li><span><span style=\"font-size:18px\"><span class=\"keyword\">package</span><span>&nbsp;com.flysnow.injection.command;&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\"><span class=\"comment\">/**</span>&nbsp;</span></span></li><li><span><span style=\"font-size:18px\"><span class=\"comment\">&nbsp;*&nbsp;一个命令接口</span>&nbsp;</span></span></li><li><span><span style=\"font-size:18px\"><span class=\"comment\">&nbsp;*&nbsp;@author&nbsp;飞雪无情</span>&nbsp;</span></span></li><li><span><span style=\"font-size:18px\"><span class=\"comment\">&nbsp;*</span>&nbsp;</span></span></li><li><span><span style=\"font-size:18px\"><span class=\"comment\">&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\"><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">interface</span><span>&nbsp;Command&nbsp;{&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">/**</span>&nbsp;</span></span></li><li><span><span style=\"font-size:18px\"><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;执行命令</span>&nbsp;</span></span></li><li><span><span style=\"font-size:18px\"><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return</span>&nbsp;</span></span></li><li><span><span style=\"font-size:18px\"><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;Object&nbsp;execute();&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">}&nbsp;&nbsp;</span></span></li></ol>\n</div>\n<pre title=\"Spring方法注入\" class=\"java\" style=\"display: none;\" name=\"code\" pre_index=\"1\" source_url=\"http://flysnow.iteye.com/blog/733785\" codeable_type=\"Blog\" codeable_id=\"733785\">&lt;span style=&quot;font-size:18px;&quot;&gt;package com.flysnow.injection.command;\n\n/**\n * 一个命令接口\n * @author 飞雪无情\n *\n */\npublic interface Command {\n	/**\n	 * 执行命令\n	 * @return\n	 */\n	public Object execute();\n}\n&lt;/span&gt;</pre><br>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\"><span style=\"font-size:18px\">Java代码 </span><a target=\"_blank\" title=\"收藏这段代码\" href=\"\"><span style=\"font-size:18px\"><img class=\"spinner\" src=\"http://flysnow.iteye.com/images/spinner.gif\" alt=\"\" style=\"\"></span></a></div>\n</div>\n<ol class=\"dp-j\">\n<li><span><span style=\"font-size:18px\"><span class=\"keyword\">package</span><span>&nbsp;com.flysnow.injection.command;&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\"><span class=\"comment\">/**</span>&nbsp;</span></span></li><li><span><span style=\"font-size:18px\"><span class=\"comment\">&nbsp;*&nbsp;一个异步处理命令的实现</span>&nbsp;</span></span></li><li><span><span style=\"font-size:18px\"><span class=\"comment\">&nbsp;*&nbsp;@author&nbsp;飞雪无情</span>&nbsp;</span></span></li><li><span><span style=\"font-size:18px\"><span class=\"comment\">&nbsp;*</span>&nbsp;</span></span></li><li><span><span style=\"font-size:18px\"><span class=\"comment\">&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\"><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">class</span><span>&nbsp;AsyncCommand&nbsp;</span><span class=\"keyword\">implements</span><span>&nbsp;Command&nbsp;{&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">/*&nbsp;(non-Javadoc)</span>&nbsp;</span></span></li><li><span><span style=\"font-size:18px\"><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@see&nbsp;com.flysnow.lookup.command.Command#execute()</span>&nbsp;</span></span></li><li><span><span style=\"font-size:18px\"><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;Object&nbsp;execute()&nbsp;{&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">//返回自身实例，是为了测试的时候好看出每次返回的不是同一个实例</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">return</span><span>&nbsp;</span><span class=\"keyword\">this</span><span>;&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">}&nbsp;&nbsp;</span></span></li></ol>\n</div>\n<pre title=\"Spring方法注入\" class=\"java\" style=\"display: none;\" name=\"code\" pre_index=\"2\" source_url=\"http://flysnow.iteye.com/blog/733785\" codeable_type=\"Blog\" codeable_id=\"733785\">&lt;span style=&quot;font-size:18px;&quot;&gt;package com.flysnow.injection.command;\n\n/**\n * 一个异步处理命令的实现\n * @author 飞雪无情\n *\n */\npublic class AsyncCommand implements Command {\n\n	/* (non-Javadoc)\n	 * @see com.flysnow.lookup.command.Command#execute()\n	 */\n	public Object execute() {\n		//返回自身实例，是为了测试的时候好看出每次返回的不是同一个实例\n		return this;\n	}\n\n}\n&lt;/span&gt;</pre><br>\n<span style=\"font-size:18px\">Bean配置文件如下： <br>\n</span>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\"><span style=\"font-size:18px\">Xml代码 </span><a target=\"_blank\" title=\"收藏这段代码\" href=\"\"><span style=\"font-size:18px\"><img class=\"spinner\" src=\"http://flysnow.iteye.com/images/spinner.gif\" alt=\"\" style=\"\"></span></a></div>\n</div>\n<ol class=\"dp-xml\">\n<li><span><span style=\"font-size:18px\"><span class=\"tag\">&lt;?</span><span class=\"tag-name\">xml</span><span>&nbsp;</span><span class=\"attribute\">version</span><span>=</span><span class=\"attribute-value\">&quot;1.0&quot;</span><span>&nbsp;</span><span class=\"attribute\">encoding</span><span>=</span><span class=\"attribute-value\">&quot;UTF-8&quot;</span><span class=\"tag\">?&gt;</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\"><span class=\"tag\">&lt;</span><span class=\"tag-name\">beans</span><span>&nbsp;</span><span class=\"attribute\">xmlns</span><span>=</span><span class=\"attribute-value\">&quot;http://www.springframework.org/schema/beans&quot;</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">xmlns:xsi</span><span>=</span><span class=\"attribute-value\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">xsi:schemaLocation</span><span>=&quot;http://www.springframework.org/schema/beans&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;<span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comments\">&lt;!--&nbsp;通过scope=&quot;prototype&quot;界定该bean是多例的&nbsp;--&gt;</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">bean</span><span>&nbsp;</span><span class=\"attribute\">id</span><span>=</span><span class=\"attribute-value\">&quot;asyncCommand&quot;</span><span>&nbsp;</span><span class=\"attribute\">class</span><span>=</span><span class=\"attribute-value\">&quot;com.flysnow.injection.command.AsyncCommand&quot;</span><span>&nbsp;</span><span class=\"attribute\">scope</span><span>=</span><span class=\"attribute-value\">&quot;prototype&quot;</span><span class=\"tag\">&gt;</span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">bean</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">bean</span><span>&nbsp;</span><span class=\"attribute\">id</span><span>=</span><span class=\"attribute-value\">&quot;commandManager&quot;</span><span>&nbsp;</span><span class=\"attribute\">class</span><span>=</span><span class=\"attribute-value\">&quot;com.flysnow.injection.CommandManager&quot;</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;/</span><span class=\"tag-name\">bean</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\"><span class=\"tag\">&lt;/</span><span class=\"tag-name\">beans</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></span></li></ol>\n</div>\n<pre title=\"Spring方法注入\" class=\"xml\" style=\"display: none;\" name=\"code\" pre_index=\"3\" source_url=\"http://flysnow.iteye.com/blog/733785\" codeable_type=\"Blog\" codeable_id=\"733785\">&lt;span style=&quot;font-size:18px;&quot;&gt;&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\n        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot;&gt;\n        &lt;!-- 通过scope=&quot;prototype&quot;界定该bean是多例的 --&gt;\n        &lt;bean id=&quot;asyncCommand&quot; class=&quot;com.flysnow.injection.command.AsyncCommand&quot; scope=&quot;prototype&quot;&gt;&lt;/bean&gt;\n        &lt;bean id=&quot;commandManager&quot; class=&quot;com.flysnow.injection.CommandManager&quot;&gt;\n        &lt;/bean&gt;\n&lt;/beans&gt;\n&lt;/span&gt;</pre><br>\n<span style=\"font-size:18px\">以上主要是单例Bean commandManager的process()方法需要引用一个prototype(非单例)的bean，所以在调用process的时候先通过createCommand方法从容器中取得一个Command，然后在执行业务计算，代码中有注释，很简单。\n<br>\n测试类如下： <br>\n</span>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\"><span style=\"font-size:18px\">Java代码 </span><a target=\"_blank\" title=\"收藏这段代码\" href=\"\"><span style=\"font-size:18px\"><img class=\"spinner\" src=\"http://flysnow.iteye.com/images/spinner.gif\" alt=\"\" style=\"\"></span></a></div>\n</div>\n<ol class=\"dp-j\">\n<li><span><span style=\"font-size:18px\"><span class=\"keyword\">package</span><span>&nbsp;com.flysnow.injection;&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\"><span class=\"keyword\">import</span><span>&nbsp;org.junit.Before;&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\"><span class=\"keyword\">import</span><span>&nbsp;org.junit.Test;&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\"><span class=\"keyword\">import</span><span>&nbsp;org.springframework.context.ApplicationContext;&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\"><span class=\"keyword\">import</span><span>&nbsp;org.springframework.context.support.ClassPathXmlApplicationContext;&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\"><span class=\"keyword\">import</span><span>&nbsp;com.flysnow.injection.CommandManager;&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\"><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">class</span><span>&nbsp;TestCommandManager&nbsp;{&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">private</span><span>&nbsp;ApplicationContext&nbsp;context;&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"annotation\">@Before</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;setUp()&nbsp;</span><span class=\"keyword\">throws</span><span>&nbsp;Exception&nbsp;{&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;context=<span class=\"keyword\">new</span><span>&nbsp;ClassPathXmlApplicationContext(</span><span class=\"string\">&quot;beans.xml&quot;</span><span>);&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"annotation\">@Test</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;testProcess()&nbsp;{&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CommandManager&nbsp;manager=context.getBean(<span class=\"string\">&quot;commandManager&quot;</span><span>,&nbsp;CommandManager.</span><span class=\"keyword\">class</span><span>);&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;第一执行process,Command的地址是:&quot;</span><span>&#43;manager.process());&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(<span class=\"string\">&quot;第二执行process,Command的地址是:&quot;</span><span>&#43;manager.process());&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">}&nbsp;&nbsp;</span></span></li></ol>\n</div>\n<pre title=\"Spring方法注入\" class=\"java\" style=\"display: none;\" name=\"code\" pre_index=\"4\" source_url=\"http://flysnow.iteye.com/blog/733785\" codeable_type=\"Blog\" codeable_id=\"733785\">&lt;span style=&quot;font-size:18px;&quot;&gt;package com.flysnow.injection;\n\nimport org.junit.Before;\nimport org.junit.Test;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\nimport com.flysnow.injection.CommandManager;\n\npublic class TestCommandManager {\n	private ApplicationContext context;\n	@Before\n	public void setUp() throws Exception {\n		context=new ClassPathXmlApplicationContext(&quot;beans.xml&quot;);\n	}\n\n	@Test\n	public void testProcess() {\n		CommandManager manager=context.getBean(&quot;commandManager&quot;, CommandManager.class);\n		System.out.println(&quot;第一执行process,Command的地址是:&quot;+manager.process());\n		System.out.println(&quot;第二执行process,Command的地址是:&quot;+manager.process());\n	}\n\n}\n&lt;/span&gt;</pre><br>\n<br>\n<span style=\"font-size:18px\">可以通过控制台输出看到两次的输出借中的Command的地址是不一样的，因为我们为asyncCommand配置了scope=&quot;prototype&quot;属性，这种方式就是使得每次从容器中取得的bean实例都不一样。通过这样方式我们实现了单例bean(commandManager)中的方法(process方法)引用非单例的bean(asyncCommand)。虽然我们实现了，但是这不是一种好的方法，因为我们的业务代码和Spring Framework产生了耦合。下面介绍Spring提供的另外一种干净的实现方式，就是Lookup方法注入。\n<br>\n<br>\n<strong>三：通过Lookup方法注入来实现</strong> <br>\n使用这种方式很简单，因为Spring已经为我们做了很大一部分工作，我们要做的就是bean配置和业务类。 <br>\n</span>\n<ul>\n<li><span style=\"font-size:18px\">首先修改CommandManager类为abstract的，修改createCommand方法也为abstract的。\n</span></li><li><span style=\"font-size:18px\">去掉ApplicationContextAware的实现及相关set方法和applicationContext变量定义\n</span></li><li><span style=\"font-size:18px\">修改bean配置文件，在commandManager Bean中增加&lt;lookup-method name=&quot;createCommand&quot; bean=&quot;asyncCommand&quot;/&gt;。\n</span></li><li><span style=\"font-size:18px\">其他保持不变 </span></li></ul>\n<br>\n<span style=\"font-size:18px\">修改后的CommandManager和bean配置文件如下： <br>\n</span>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\"><span style=\"font-size:18px\">Java代码 </span><a target=\"_blank\" title=\"收藏这段代码\" href=\"\"><span style=\"font-size:18px\"><img class=\"spinner\" src=\"http://flysnow.iteye.com/images/spinner.gif\" alt=\"\" style=\"\"></span></a></div>\n</div>\n<ol class=\"dp-j\">\n<li><span><span style=\"font-size:18px\"><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">abstract</span><span>&nbsp;</span><span class=\"keyword\">class</span><span>&nbsp;CommandManager&nbsp;{&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">//模拟业务处理的方法</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;Object&nbsp;process(){&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Command&nbsp;command=createCommand();&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">return</span><span>&nbsp;command.execute();&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">//获取一个命令</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">protected</span><span>&nbsp;</span><span class=\"keyword\">abstract</span><span>&nbsp;Command&nbsp;createCommand();&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">}&nbsp;&nbsp;</span></span></li></ol>\n</div>\n<pre title=\"Spring方法注入\" class=\"java\" style=\"display: none;\" name=\"code\" pre_index=\"5\" source_url=\"http://flysnow.iteye.com/blog/733785\" codeable_type=\"Blog\" codeable_id=\"733785\">&lt;span style=&quot;font-size:18px;&quot;&gt;public abstract class CommandManager {\n	//模拟业务处理的方法\n	public Object process(){\n		Command command=createCommand();\n		return command.execute();\n	}\n	//获取一个命令\n	protected abstract Command createCommand();\n}\n&lt;/span&gt;</pre><br>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\"><span style=\"font-size:18px\">Xml代码 </span><a target=\"_blank\" title=\"收藏这段代码\" href=\"\"><span style=\"font-size:18px\"><img class=\"spinner\" src=\"http://flysnow.iteye.com/images/spinner.gif\" alt=\"\" style=\"\"></span></a></div>\n</div>\n<ol class=\"dp-xml\">\n<li><span><span style=\"font-size:18px\"><span class=\"tag\">&lt;</span><span class=\"tag-name\">bean</span><span>&nbsp;</span><span class=\"attribute\">id</span><span>=</span><span class=\"attribute-value\">&quot;commandManager&quot;</span><span>&nbsp;</span><span class=\"attribute\">class</span><span>=</span><span class=\"attribute-value\">&quot;com.flysnow.injection.CommandManager&quot;</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">lookup-method</span><span>&nbsp;</span><span class=\"attribute\">name</span><span>=</span><span class=\"attribute-value\">&quot;createCommand&quot;</span><span>&nbsp;</span><span class=\"attribute\">bean</span><span>=</span><span class=\"attribute-value\">&quot;asyncCommand&quot;</span><span class=\"tag\">/&gt;</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;/</span><span class=\"tag-name\">bean</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></span></li></ol>\n</div>\n<pre title=\"Spring方法注入\" class=\"xml\" style=\"display: none;\" name=\"code\" pre_index=\"6\" source_url=\"http://flysnow.iteye.com/blog/733785\" codeable_type=\"Blog\" codeable_id=\"733785\">&lt;span style=&quot;font-size:18px;&quot;&gt;&lt;bean id=&quot;commandManager&quot; class=&quot;com.flysnow.injection.CommandManager&quot;&gt;\n        	&lt;lookup-method name=&quot;createCommand&quot; bean=&quot;asyncCommand&quot;/&gt;\n        &lt;/bean&gt;\n&lt;/span&gt;</pre><br>\n<span style=\"font-size:18px\">运行测试，控制台打印出的两个Command的地址不一样，说明我们实现了。 <br>\n&lt;lookup-method&gt;标签中的name属性就是commandManager Bean的获取Command实例(AsyncCommand)的方法，也就createCommand方法，bean属性是要返回哪种类型的Command的，这里是AsyncCommand。\n<br>\n这里的createCommand方法就成为被注入方法，他的定义形式必须为： <br>\n</span>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\"><span style=\"font-size:18px\">Java代码 </span><a target=\"_blank\" title=\"收藏这段代码\" href=\"\"><span style=\"font-size:18px\"><img class=\"spinner\" src=\"http://flysnow.iteye.com/images/spinner.gif\" alt=\"\" style=\"\"></span></a></div>\n</div>\n<ol class=\"dp-j\">\n<li><span><span style=\"font-size:18px\"><span>&lt;</span><span class=\"keyword\">public</span><span>|</span><span class=\"keyword\">protected</span><span>&gt;&nbsp;[</span><span class=\"keyword\">abstract</span><span>]&nbsp;&lt;</span><span class=\"keyword\">return</span><span>-type&gt;&nbsp;theMethodName(no-arguments);&nbsp;&nbsp;</span></span></span></li></ol>\n</div>\n<pre title=\"Spring方法注入\" class=\"java\" style=\"display: none;\" name=\"code\" pre_index=\"7\" source_url=\"http://flysnow.iteye.com/blog/733785\" codeable_type=\"Blog\" codeable_id=\"733785\">&lt;span style=&quot;font-size:18px;&quot;&gt;&lt;public|protected&gt; [abstract] &lt;return-type&gt; theMethodName(no-arguments);&lt;/span&gt;</pre>\n<p><br>\n<span style=\"font-size:18px\">被注入方法不一定是抽象的，如果被注入方法是抽象的，动态生成的子类(这里就是动态生成的CommandManager的子类)会实现该方法。否则，动态生成的子类会覆盖类里的具体方法。为了让这个动态子类得以正常工作，需要把CGLIB的jar文件放在classpath里，这就是我们引用cglib包的原因。还有，Spring容器要子类化的类(CommandManager)不能是final的，要覆盖的方法(createCommand)也不能是final的。\n</span></p>\n<p><span style=\"font-size:18px\"></span>&nbsp;</p>\n<p><span style=\"font-size:18px\">当一个Bean依赖的Bean和自己生命周期不同的时候:如Bean A依赖Bean B,Bean A 是singleton,如果需要在Bean A每次用到Bean B的时候都用一个Bean B的新的实例,通过在配置文件中通过 property或者 contructor-arg是不能实现的.这时候只能在Bean A中用Bean B的时候动态得到.通常的做法有两种:</span></p>\n<p><span style=\"font-size:18px\">1,Bean A实现 ApplicationContextAware, Spring初始化的时候会将 ApplicationContext 传给Bean A,Bean A通过getBean(&quot;BeanB&quot;)方法每次得到Bean B.(&quot;BeanB&quot;最好不要hardcode,通过property传入)例:</span></p>\n<div class=\"dp-highlighter bg_html\">\n<div class=\"bar\">\n<div class=\"tools\"><span style=\"font-size:18px\"><strong>[html]</strong> </span><a target=\"_blank\" title=\"view plain\" class=\"ViewSource\" href=\"http://blog.csdn.net/kkdelta/article/details/5476423#\"><span style=\"font-size:18px\">view plain</span></a><a target=\"_blank\" title=\"copy\" class=\"CopyToClipboard\" href=\"http://blog.csdn.net/kkdelta/article/details/5476423#\"><span style=\"font-size:18px\">copy</span></a><a target=\"_blank\" title=\"print\" class=\"PrintSource\" href=\"http://blog.csdn.net/kkdelta/article/details/5476423#\"><span style=\"font-size:18px\">print</span></a><a target=\"_blank\" title=\"?\" class=\"About\" href=\"http://blog.csdn.net/kkdelta/article/details/5476423#\"><span style=\"font-size:18px\">?</span></a></div>\n</div>\n<ol class=\"dp-xml\">\n<li class=\"alt\"><span><span><span style=\"font-size:18px\">public&nbsp;class&nbsp;ContextAwareBean&nbsp;implements&nbsp;ApplicationContextAware&nbsp;{&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;static&nbsp;final&nbsp;Log&nbsp;<span class=\"attribute\">log</span><span>&nbsp;=&nbsp;</span><span class=\"attribute-value\">LogFactory</span><span>.getLog(AnotherBean.class);&nbsp;&nbsp;</span></span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;String&nbsp;anotherBeanName;&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;ApplicationContext&nbsp;applicationContext;&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getAnotherBeanName()&nbsp;{&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;anotherBeanName;&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setAnotherBeanName(String&nbsp;anotherBeanName)&nbsp;{&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">this.anotherBeanName</span><span>&nbsp;=&nbsp;</span><span class=\"attribute-value\">anotherBeanName</span><span>;&nbsp;&nbsp;</span></span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;process()&nbsp;{&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.info(&quot;process&nbsp;applicationContext&nbsp;&quot;&nbsp;&#43;&nbsp;applicationContext);&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AnotherBean&nbsp;<span class=\"attribute\">anotherBean</span><span>&nbsp;=&nbsp;</span><span class=\"attribute-value\">createAnotheBean</span><span>();&nbsp;&nbsp;</span></span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;anotherBean.doSth();&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;AnotherBean&nbsp;createAnotheBean()&nbsp;{&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;this.applicationContext.getBean(anotherBeanName,&nbsp;AnotherBean.class);&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setApplicationContext(ApplicationContext&nbsp;applicationContext){&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.info(&quot;setApplicationContext&nbsp;&quot;&nbsp;&#43;&nbsp;applicationContext);&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"attribute\">this.applicationContext</span><span>&nbsp;=&nbsp;</span><span class=\"attribute-value\">applicationContext</span><span>;&nbsp;&nbsp;</span></span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">}&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;public&nbsp;class&nbsp;AnotherBean&nbsp;{&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;protected&nbsp;static&nbsp;final&nbsp;Log&nbsp;<span class=\"attribute\">log</span><span>&nbsp;=&nbsp;</span><span class=\"attribute-value\">LogFactory</span><span>.getLog(AnotherBean.class);&nbsp;&nbsp;</span></span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;doSth(){&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.info(&quot;AnotherBean.doSth&quot;);&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;do&nbsp;something&quot;;&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">}&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\"><span class=\"tag\">&lt;</span><span class=\"tag-name\">bean</span><span>&nbsp;</span><span class=\"attribute\">id</span><span>=</span><span class=\"attribute-value\">&quot;AnotherBean&quot;</span><span>&nbsp;</span><span class=\"attribute\">class</span><span>=</span><span class=\"attribute-value\">&quot;com.test.spring.di.mtddi.AnotherBean&quot;</span><span>&nbsp;&nbsp;</span><span class=\"attribute\">scope</span><span>=</span><span class=\"attribute-value\">&quot;prototype&quot;</span><span class=\"tag\">/&gt;</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">bean</span><span>&nbsp;</span><span class=\"attribute\">id</span><span>=</span><span class=\"attribute-value\">&quot;ContextAwareBean&quot;</span><span>&nbsp;</span><span class=\"attribute\">class</span><span>=</span><span class=\"attribute-value\">&quot;com.test.spring.di.mtddi.ContextAwareBean&quot;</span><span>&nbsp;</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;</span><span class=\"tag-name\">property</span><span>&nbsp;</span><span class=\"attribute\">name</span><span>=</span><span class=\"attribute-value\">&quot;anotherBeanName&quot;</span><span>&nbsp;</span><span class=\"attribute\">value</span><span>=</span><span class=\"attribute-value\">&quot;AnotherBean&quot;</span><span class=\"tag\">/&gt;</span><span>&nbsp;&nbsp;</span></span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"tag\">&lt;/</span><span class=\"tag-name\">bean</span><span class=\"tag\">&gt;</span><span>&nbsp;&nbsp;</span></span></span></li></ol>\n</div>\n<pre class=\"html\" style=\"display: none;\" name=\"code\">&lt;span style=&quot;font-size:18px;&quot;&gt;public class ContextAwareBean implements ApplicationContextAware {\n    protected static final Log log = LogFactory.getLog(AnotherBean.class);\n    private String anotherBeanName;\n    private ApplicationContext applicationContext;\n   \n    public String getAnotherBeanName() {\n        return anotherBeanName;\n    }\n    public void setAnotherBeanName(String anotherBeanName) {\n        this.anotherBeanName = anotherBeanName;\n    }\n    public void process() {\n        log.info(&quot;process applicationContext &quot; + applicationContext);\n        AnotherBean anotherBean = createAnotheBean();\n        anotherBean.doSth();\n       \n    }\n    protected AnotherBean createAnotheBean() {\n   \n    return this.applicationContext.getBean(anotherBeanName, AnotherBean.class);\n    }\n    public void setApplicationContext(ApplicationContext applicationContext){\n        log.info(&quot;setApplicationContext &quot; + applicationContext);\n        this.applicationContext = applicationContext;\n    }\n}\n&#160;public class AnotherBean {\n    protected static final Log log = LogFactory.getLog(AnotherBean.class);\n    public String doSth(){\n        log.info(&quot;AnotherBean.doSth&quot;);\n        return &quot;do something&quot;;\n    }\n}\n\n&lt;bean id=&quot;AnotherBean&quot; class=&quot;com.test.spring.di.mtddi.AnotherBean&quot;  scope=&quot;prototype&quot;/&gt;\n   \n    &lt;bean id=&quot;ContextAwareBean&quot; class=&quot;com.test.spring.di.mtddi.ContextAwareBean&quot; &gt;\n        &lt;property name=&quot;anotherBeanName&quot; value=&quot;AnotherBean&quot;/&gt;\n    &lt;/bean&gt;&lt;/span&gt;</pre>\n<p>\n<p><span style=\"font-size:18px\">2,方法注入:在Bean A中定义一个方法,返回类型是Bean B,在配置文件中通过&quot;lookup-method&quot;告诉Spring动态覆盖该方法,并返回Bean B的一个实例:</span></p>\n<p><span style=\"font-size:18px\"></span></p>\n<p><span style=\"font-size:18px\"></span></p>\n<div class=\"dp-highlighter bg_java\">\n<div class=\"bar\">\n<div class=\"tools\"><span style=\"font-size:18px\"><strong>[java]</strong> </span><a target=\"_blank\" title=\"view plain\" class=\"ViewSource\" href=\"http://blog.csdn.net/kkdelta/article/details/5476423#\"><span style=\"font-size:18px\">view plain</span></a><a target=\"_blank\" title=\"copy\" class=\"CopyToClipboard\" href=\"http://blog.csdn.net/kkdelta/article/details/5476423#\"><span style=\"font-size:18px\">copy</span></a><a target=\"_blank\" title=\"print\" class=\"PrintSource\" href=\"http://blog.csdn.net/kkdelta/article/details/5476423#\"><span style=\"font-size:18px\">print</span></a><a target=\"_blank\" title=\"?\" class=\"About\" href=\"http://blog.csdn.net/kkdelta/article/details/5476423#\"><span style=\"font-size:18px\">?</span></a></div>\n</div>\n<ol class=\"dp-j\">\n<li class=\"alt\"><span><span style=\"font-size:18px\"><span class=\"keyword\">public</span><span>&nbsp;&nbsp;</span><span class=\"keyword\">abstract</span><span>&nbsp;</span><span class=\"keyword\">class</span><span>&nbsp;ReplacedBean&nbsp;{&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\"><span class=\"keyword\">protected</span><span>&nbsp;</span><span class=\"keyword\">static</span><span>&nbsp;</span><span class=\"keyword\">final</span><span>&nbsp;Log&nbsp;log&nbsp;=&nbsp;LogFactory.getLog(ReplacedBean.</span><span class=\"keyword\">class</span><span>);&nbsp;&nbsp;</span></span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;process()&nbsp;{&nbsp;&nbsp;</span></span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AnotherBean&nbsp;anotherBean&nbsp;=&nbsp;createAnotheBean();&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;anotherBean.doSth();&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">protected</span><span>&nbsp;</span><span class=\"keyword\">abstract</span><span>&nbsp;AnotherBean&nbsp;createAnotheBean();&nbsp;&nbsp;</span></span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">}&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&lt;bean&nbsp;id=<span class=\"string\">&quot;AnotherBean&quot;</span><span>&nbsp;</span><span class=\"keyword\">class</span><span>=</span><span class=\"string\">&quot;com.test.spring.di.mtddi.AnotherBean&quot;</span><span>&nbsp;&nbsp;scope=</span><span class=\"string\">&quot;prototype&quot;</span><span>/&gt;&nbsp;&nbsp;</span></span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&lt;bean&nbsp;id=<span class=\"string\">&quot;ReplacedBean&quot;</span><span>&nbsp;</span><span class=\"keyword\">class</span><span>=</span><span class=\"string\">&quot;com.test.spring.di.mtddi.ReplacedBean&quot;</span><span>&nbsp;&gt;&nbsp;&nbsp;</span></span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;lookup-method&nbsp;name=<span class=\"string\">&quot;createAnotheBean&quot;</span><span>&nbsp;bean=</span><span class=\"string\">&quot;AnotherBean&quot;</span><span>/&gt;&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&lt;/bean&gt;&nbsp;&nbsp;</span></span></li></ol>\n</div>\n<pre class=\"java\" style=\"display: none;\" name=\"code\">&lt;span style=&quot;font-size:18px;&quot;&gt;public  abstract class ReplacedBean {\nprotected static final Log log = LogFactory.getLog(ReplacedBean.class);\n   \n    public void process() {\n       \n        AnotherBean anotherBean = createAnotheBean();\n        anotherBean.doSth();\n       \n    }\n    protected abstract AnotherBean createAnotheBean();\n   \n}\n\n&lt;bean id=&quot;AnotherBean&quot; class=&quot;com.test.spring.di.mtddi.AnotherBean&quot;  scope=&quot;prototype&quot;/&gt;\n\n&lt;bean id=&quot;ReplacedBean&quot; class=&quot;com.test.spring.di.mtddi.ReplacedBean&quot; &gt;\n        &lt;lookup-method name=&quot;createAnotheBean&quot; bean=&quot;AnotherBean&quot;/&gt;\n    &lt;/bean&gt;&lt;/span&gt;</pre>\n<p><span style=\"font-size:18px\">客户端代码:</span></p>\n<div class=\"dp-highlighter bg_java\">\n<div class=\"bar\">\n<div class=\"tools\"><span style=\"font-size:18px\"><strong>[java]</strong> </span><a target=\"_blank\" title=\"view plain\" class=\"ViewSource\" href=\"http://blog.csdn.net/kkdelta/article/details/5476423#\"><span style=\"font-size:18px\">view plain</span></a><a target=\"_blank\" title=\"copy\" class=\"CopyToClipboard\" href=\"http://blog.csdn.net/kkdelta/article/details/5476423#\"><span style=\"font-size:18px\">copy</span></a><a target=\"_blank\" title=\"print\" class=\"PrintSource\" href=\"http://blog.csdn.net/kkdelta/article/details/5476423#\"><span style=\"font-size:18px\">print</span></a><a target=\"_blank\" title=\"?\" class=\"About\" href=\"http://blog.csdn.net/kkdelta/article/details/5476423#\"><span style=\"font-size:18px\">?</span></a></div>\n</div>\n<ol class=\"dp-j\">\n<li class=\"alt\"><span><span style=\"font-size:18px\"><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">class</span><span>&nbsp;MtddiClient&nbsp;{&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">private</span><span>&nbsp;</span><span class=\"keyword\">static</span><span>&nbsp;BeanFactory&nbsp;factory;&nbsp;&nbsp;</span></span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">private</span><span>&nbsp;</span><span class=\"keyword\">static</span><span>&nbsp;ApplicationContext&nbsp;ctx;&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">static</span><span>&nbsp;{&nbsp;&nbsp;</span></span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Resource&nbsp;resource&nbsp;=&nbsp;<span class=\"keyword\">new</span><span>&nbsp;ClassPathResource(</span><span class=\"string\">&quot;conf/mtddiAppcontext.xml&quot;</span><span>);&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;factory&nbsp;=&nbsp;<span class=\"keyword\">new</span><span>&nbsp;XmlBeanFactory(resource);&nbsp;&nbsp;</span></span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ctx&nbsp;=&nbsp;<span class=\"keyword\">new</span><span>&nbsp;ClassPathXmlApplicationContext(</span><span class=\"string\">&quot;conf/mtddiAppcontext.xml&quot;</span><span>);&nbsp;&nbsp;</span></span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">/**</span>&nbsp;</span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\"><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;args</span>&nbsp;</span></span></li><li><span><span style=\"font-size:18px\"><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">static</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;main(String[]&nbsp;args)&nbsp;{&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">/*不能通过bean&nbsp;factory的方式得到bean</span>&nbsp;</span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\"><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ContextAwareBean&nbsp;bean&nbsp;=&nbsp;(ContextAwareBean)&nbsp;factory.getBean(&quot;ContextAwareBean&quot;);</span>&nbsp;</span></span></li><li><span><span style=\"font-size:18px\"><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bean.process();</span>&nbsp;</span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\"><span class=\"comment\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">//ContextAwareBean&nbsp;只能从ApplicationContext获得bean</span><span>&nbsp;&nbsp;</span></span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">//ContextAwareBean&nbsp;bean&nbsp;=&nbsp;(ContextAwareBean)&nbsp;ctx.getBean(&quot;ContextAwareBean&quot;);</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"comment\">//bean.process();</span><span>&nbsp;&nbsp;</span></span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ReplacedBean&nbsp;bean1&nbsp;=&nbsp;(ReplacedBean)&nbsp;factory.getBean(<span class=\"string\">&quot;ReplacedBean&quot;</span><span>);&nbsp;&nbsp;</span></span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bean1.process();&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">}&nbsp;&nbsp;</span></span></li></ol>\n</div>\n<pre class=\"java\" style=\"display: none;\" name=\"code\">&lt;span style=&quot;font-size:18px;&quot;&gt;public class MtddiClient {\n    private static BeanFactory factory;\n    private static ApplicationContext ctx;\n    static {\n        Resource resource = new ClassPathResource(&quot;conf/mtddiAppcontext.xml&quot;);\n        factory = new XmlBeanFactory(resource);\n       \n        ctx = new ClassPathXmlApplicationContext(&quot;conf/mtddiAppcontext.xml&quot;);\n    }\n    /**\n     * @param args\n     */\n    public static void main(String[] args) {\n        /*不能通过bean factory的方式得到bean\n        ContextAwareBean bean = (ContextAwareBean) factory.getBean(&quot;ContextAwareBean&quot;);\n        bean.process();\n        */\n        //ContextAwareBean 只能从ApplicationContext获得bean\n        //ContextAwareBean bean = (ContextAwareBean) ctx.getBean(&quot;ContextAwareBean&quot;);\n        //bean.process();\n                \n        ReplacedBean bean1 = (ReplacedBean) factory.getBean(&quot;ReplacedBean&quot;);\n        bean1.process();\n    }\n}&lt;/span&gt;</pre>\n<p><span style=\"font-size:18px\">*对于实现ApplicationContextAware的Bean,必须用 ApplicationContext的getBean方法.对于方法注入(<span style=\"font-family:Arial; color:#333333; text-align:left; line-height:26px\">lookup-method方式</span>):用BeanFactory和ApplicationContext的getBean都可以.如果要用BeanFactory,应该实现BeanFactoryAware:</span></p>\n<div class=\"dp-highlighter bg_java\">\n<div class=\"bar\">\n<div class=\"tools\"><span style=\"font-size:18px\"><strong>[java]</strong> </span><a target=\"_blank\" title=\"view plain\" class=\"ViewSource\" href=\"http://blog.csdn.net/kkdelta/article/details/5476423#\"><span style=\"font-size:18px\">view plain</span></a><a target=\"_blank\" title=\"copy\" class=\"CopyToClipboard\" href=\"http://blog.csdn.net/kkdelta/article/details/5476423#\"><span style=\"font-size:18px\">copy</span></a><a target=\"_blank\" title=\"print\" class=\"PrintSource\" href=\"http://blog.csdn.net/kkdelta/article/details/5476423#\"><span style=\"font-size:18px\">print</span></a><a target=\"_blank\" title=\"?\" class=\"About\" href=\"http://blog.csdn.net/kkdelta/article/details/5476423#\"><span style=\"font-size:18px\">?</span></a></div>\n</div>\n<ol class=\"dp-j\">\n<li class=\"alt\"><span><span style=\"font-size:18px\"><span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">class</span><span>&nbsp;BeanFactoryAwareBean&nbsp;</span><span class=\"keyword\">implements</span><span>&nbsp;BeanFactoryAware&nbsp;{&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">protected</span><span>&nbsp;</span><span class=\"keyword\">static</span><span>&nbsp;</span><span class=\"keyword\">final</span><span>&nbsp;Log&nbsp;log&nbsp;=&nbsp;LogFactory.getLog(BeanFactoryAwareBean.</span><span class=\"keyword\">class</span><span>);&nbsp;&nbsp;</span></span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">private</span><span>&nbsp;String&nbsp;anotherBeanName;&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">private</span><span>&nbsp;BeanFactory&nbsp;beanFactory;&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;String&nbsp;getAnotherBeanName()&nbsp;{&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">return</span><span>&nbsp;anotherBeanName;&nbsp;&nbsp;</span></span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;setAnotherBeanName(String&nbsp;anotherBeanName)&nbsp;{&nbsp;&nbsp;</span></span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">this</span><span>.anotherBeanName&nbsp;=&nbsp;anotherBeanName;&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;process()&nbsp;{&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.info(<span class=\"string\">&quot;process&nbsp;beanFactory&nbsp;&quot;</span><span>&nbsp;&#43;&nbsp;beanFactory);&nbsp;&nbsp;</span></span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AnotherBean&nbsp;anotherBean&nbsp;=&nbsp;createAnotheBean();&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;anotherBean.doSth();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">protected</span><span>&nbsp;AnotherBean&nbsp;createAnotheBean()&nbsp;{&nbsp;&nbsp;</span></span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">return</span><span>&nbsp;</span><span class=\"keyword\">this</span><span>.beanFactory.getBean(anotherBeanName,&nbsp;AnotherBean.</span><span class=\"keyword\">class</span><span>);&nbsp;&nbsp;</span></span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"annotation\">@Override</span><span>&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">public</span><span>&nbsp;</span><span class=\"keyword\">void</span><span>&nbsp;setBeanFactory(BeanFactory&nbsp;beanFactory)&nbsp;</span><span class=\"keyword\">throws</span><span>&nbsp;BeansException&nbsp;{&nbsp;&nbsp;</span></span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"keyword\">this</span><span>.beanFactory&nbsp;=&nbsp;beanFactory;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></li><li class=\"alt\"><span><span style=\"font-size:18px\">}&nbsp;&nbsp;</span></span></li></ol>\n</div>\n<pre class=\"java\" style=\"display: none;\" name=\"code\">&lt;span style=&quot;font-size:18px;&quot;&gt;public class BeanFactoryAwareBean implements BeanFactoryAware {\n    protected static final Log log = LogFactory.getLog(BeanFactoryAwareBean.class);\n    private String anotherBeanName;\n   \n    private BeanFactory beanFactory;\n   \n    public String getAnotherBeanName() {\n        return anotherBeanName;\n    }\n    public void setAnotherBeanName(String anotherBeanName) {\n        this.anotherBeanName = anotherBeanName;\n    }\n    public void process() {\n        log.info(&quot;process beanFactory &quot; + beanFactory);\n        AnotherBean anotherBean = createAnotheBean();\n        anotherBean.doSth();      \n    }\n    protected AnotherBean createAnotheBean() {\n   \n    return this.beanFactory.getBean(anotherBeanName, AnotherBean.class);\n    }\n   \n    @Override\n    public void setBeanFactory(BeanFactory beanFactory) throws BeansException {\n        this.beanFactory = beanFactory;       \n    }\n}&lt;/span&gt;</pre>\n<p><span style=\"font-size:18px\">两种方法的比较:理论上来讲,第二种方法更体现了IoC的思想,而且在bean类里面没有依赖到Spring,只是一个POJO.客户端在使用它的时候可以是依靠Spring配置(lookup-method)来使用,也可以通过提供实现类来完成调用.<br>\n<br>\n<strong>四：小结</strong> <br>\nLookup方法注入干净整洁，易于扩展，更符合Ioc规则，所以尽量采用这种方式。</span></p>\n<p><span style=\"font-size:18px\"></span>&nbsp;</p>\n<p><span style=\"font-size:18px\"></span>&nbsp;</p>\n<p><span style=\"font-size:18px\"></span>&nbsp;</p>\n   \n', '2016-04-16 01:21:24', '0');
INSERT INTO `article` VALUES ('10100', '10003', '浅谈HTML5WebSocket的机制', '\n<p style=\"margin-top:15px; margin-bottom:15px; padding:8px; font-size:14px; color:white; font-family:宋体,Calibri; background-color:rgb(128,128,128)\"><span style=\"line-height:28.8px\">回顾上一章</span></p><p>&nbsp; &nbsp; &nbsp; 在上一章《<a target=\"_blank\" target=\"_blank\" href=\"http://blog.csdn.net/xmtblog/article/details/50905881\">为什么我们需要HTML5 WebSocket</a>》中，我简单的介绍了下WebSocket的前世今生。相信大家已对WebSocket有了初步的了解。那么今天我们继续深入学习WebSocket的机制。</p><p style=\"margin-top:15px; margin-bottom:15px; padding:8px; font-size:14px; color:white; font-family:宋体,Calibri; background-color:rgb(128,128,128)\"><span style=\"line-height:28.8px\">WebSocket机制</span></p><p><span style=\"white-space:pre\">	</span>我们知道WebSocket是HTML5一种新的协议。它实现了浏览器与服务器<a target=\"_blank\" target=\"_blank\" href=\"http://baike.baidu.com/link?url=qlU8XghJo-dnl7rq4s2gaFTPnmPUF3ng7igeL2DUI3A3jH_TFNIMkx62M3_oBMSn-fZ6BmubZMNFYs-287qWEa\">全双工通信</a>（不知道的可以看下全双工通信RS-422标准），能更好的节省服务器资源和带宽并达到实时通讯，它建立在TCP之上，同HTTP一样通过TCP来传输数据，但是它和HTTP最大不同是：</p><p><span style=\"white-space:pre\">	</span><strong>WebSocket是一种双向通信协议，在建立连接后，WebSocket服务器和Browser/Client Agent都能主动的向对方发送或接收数据，就像Socket一样；</strong></p><p><span style=\"white-space:pre\">	</span><strong>WebSocket需要类似TCP的客户端和服务器端通过握手连接，连接成功后才能相互通信。</strong></p><p>非WebSocket模式传统 HTTP 客户端与服务器的交互如下：</p><p><h5 id=\"2.0.1. 图 1. 传统 HTTP 请求响应客户端服务器交互图|outline\" style=\"margin: 5px 0px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; font-size: 1.166em !important;\">传统 HTTP 请求响应客户端服务器交互图</h5><div><img src=\"http://img.blog.csdn.net/20160322143826312?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"><br></div><div><span style=\"color: rgb(34, 34, 34); font-family: Arial, sans-serif; font-size: 14.9248px; line-height: 22.3872px;\">使用 WebSocket 模式客户端与服务器的交互如下：</span><br></div><h5 id=\"2.0.2. 图 2.WebSocket 请求响应客户端服务器交互图|outline\" style=\"margin: 5px 0px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; font-size: 1.166em !important;\">WebSocket 请求响应客户端服务器交互图</h5><img src=\"http://img.blog.csdn.net/20160322143931516?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"><br><p><p>根据上面两张图对比可以看出，相对于传统的HTTP每次请求-应答都需要客户端与服务端建立连接的模式，WebSocket是类似Socket的TCP长连接的通讯模式，一旦WebSocket连接建立后，后续数据都以帧序列的形式传输。在客户端断开WebSocket连接或Server端断掉连接前，不需要客户端和服务端重新发起连接请求。在海量并发及客户端与服务器交互负载流量大的情况下，极大的节省了网络带宽资源的消耗，有明显的性能优势，且客户端发送和接受消息是在同一个持久连接上发起，实时性优势明显。</p><p style=\"margin-top:15px; margin-bottom:15px; padding:8px; font-size:14px; color:white; font-family:宋体,Calibri; background-color:rgb(128,128,128)\"><span style=\"line-height:28.8px\">WebSocket和HTTP的报文</span></p><p>我们再来看看WebSocket通讯与传统HTTP的不同交互的报文：</p><p>在客户端(浏览器端js)，创建WebSocket 实例化一个新的 WebSocket 客户端对象，连接类似 ws://yourdomain:port/path 的服务端 WebSocket URL，WebSocket 客户端对象会自动解析并识别为 WebSocket 请求，从而连接服务端端口，执行双方握手过程，客户端发送数据格式类似：<br></p><p><h5 id=\"2.0.3. 清单 1.WebSocket 客户端连接报文|outline\" style=\"margin: 5px 0px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; font-size: 1.166em !important;\">WebSocket 客户端连接报文</h5><img src=\"http://img.blog.csdn.net/20160322150704026?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"><br><p><p>可以看到，客户端发起的 WebSocket 连接报文类似传统 HTTP 报文，”Upgrade：websocket”参数值表明这是WebSocket类型请求，“Sec-WebSocket-Key”是WebSocket客户端发送的一个base64编码的密文，要求服务端必须返回一个对应加密的“Sec-WebSocket-Accept”应答，否则客户端会抛出“Error during WebSocket handshake”错误，并关闭连接。</p><p>服务端收到报文后返回的数据格式类似：</p><p><h5 id=\"2.0.4. 清单 2.WebSocket 服务端响应报文|outline\" style=\"margin: 5px 0px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; font-size: 1.166em !important;\">WebSocket 服务端响应报文</h5><img src=\"http://img.blog.csdn.net/20160322150104030?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"><br><p><p>“Sec-WebSocket-Accept”的值是服务端采用与客户端一致的密钥计算出来后返回客户端的,“HTTP/1.1 101 Switching Protocols”表示服务端接受WebSocket协议的客户端连接，经过这样的请求-响应处理后，客户端服务端的WebSocket连接握手成功, 后续就可以进行TCP通讯了。</p><p style=\"margin-top:15px; margin-bottom:15px; padding:8px; font-size:14px; color:white; font-family:宋体,Calibri; background-color:rgb(128,128,128)\"><span style=\"line-height:28.8px\">欢迎大家关注我的博客，关注我的微博，如有疑问，请加qq群：454796847、135430763 共同进步！</span></p>   \n', '2016-04-16 01:21:24', '1');
INSERT INTO `article` VALUES ('10101', '10003', 'Spring学习笔记（9）-----------注入参数', '\n\n<p>&nbsp;</p>\n<p><span style=\"font-size:18px\">集合类型属性</span></p>\n<p><span style=\"font-size:18px\">1.Set类型</span></p>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\"><span style=\"font-size:18px\">Java代码 </span></div>\n</div>\n<ol class=\"dp-j\">\n<li><span><span style=\"font-size:18px\"><span class=\"keyword\"><strong><span style=\"color:#7f0055\">private</span></strong></span><span>&nbsp;Set&lt;String&gt;&nbsp;sets=</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">new</span></strong></span><span>&nbsp;HashSet&lt;String&gt;();\n &nbsp;&nbsp;</span></span></span></li><li><span></span><span style=\"font-size:18px\"><span class=\"comment\"><span style=\"color:#008200\">//我们需要给它添加set方法\n</span></span><span>&nbsp;&nbsp;</span></span></li><li><span></span><span style=\"font-size:18px\"><span class=\"keyword\"><strong><span style=\"color:#7f0055\">public</span></strong></span><span>&nbsp;Set&lt;String&gt;&nbsp;getSets() &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;{ &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">return</span></strong></span><span>&nbsp;sets; &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">public</span></strong></span><span>&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">void</span></strong></span><span>&nbsp;setSets(Set&lt;String&gt;&nbsp;sets)\n &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;{ &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">this</span></strong></span><span>.sets&nbsp;=&nbsp;sets; &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;</span></span></li><li><span></span><span style=\"font-size:18px\"><span class=\"keyword\"><strong><span style=\"color:#7f0055\">public</span></strong></span><span>&nbsp;Set&lt;String&gt;&nbsp;showSet() &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;{ &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">return</span></strong></span><span>&nbsp;sets; &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span><pre class=\"java\" style=\"display: none;\" name=\"code\">&lt;span style=&quot;font-size:18px;&quot;&gt;&#160;&lt;/span&gt;</pre></li></ol>\n</div>\n<p><span style=\"font-size:18px\">&nbsp;然后根据属性修改配置文件</span></p>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\"><span style=\"font-size:18px\">Xml代码 </span></div>\n</div>\n<ol class=\"dp-xml\">\n<li><span><span style=\"font-size:18px\"><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;</span><span class=\"tag-name\">bean</span></span></strong><span>&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">id</span></span><span>=</span><span class=\"attribute-value\"><span style=\"color:#0000ff\">&quot;userService&quot;</span></span><span>&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">class</span></span><span>=</span><span class=\"attribute-value\"><span style=\"color:#0000ff\">&quot;com.szy.spring.service.UserServiceImpl&quot;</span></span><span class=\"tag\"><strong><span style=\"color:#006699\">&gt;</span></strong></span><span>&nbsp;&nbsp;</span></span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;</span><span class=\"tag-name\">property</span></span></strong><span>&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">name</span></span><span>=</span><span class=\"attribute-value\"><span style=\"color:#0000ff\">&quot;sets&quot;</span></span><span class=\"tag\"><strong><span style=\"color:#006699\">&gt;</span></strong></span><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;</span><span class=\"tag-name\">set</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;</span><span class=\"tag-name\">value</span><span class=\"tag\">&gt;</span></span></strong><span>Set1</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;/</span><span class=\"tag-name\">value</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;</span><span class=\"tag-name\">value</span><span class=\"tag\">&gt;</span></span></strong><span>Set2</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;/</span><span class=\"tag-name\">value</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;</span><span class=\"tag-name\">value</span><span class=\"tag\">&gt;</span></span></strong><span>Set3</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;/</span><span class=\"tag-name\">value</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;/</span><span class=\"tag-name\">set</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;/</span><span class=\"tag-name\">property</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;</span></span></li><li><span></span><span style=\"font-size:18px\"><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;/</span><span class=\"tag-name\">bean</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span><pre class=\"xml\" style=\"display: none;\" name=\"code\">&lt;span style=&quot;font-size:18px;&quot;&gt;&#160;&lt;/span&gt;</pre></li></ol>\n</div>\n<p><span style=\"font-size:18px\">&nbsp;与以前不同的是我们在property下面添加了&lt;set&gt;&lt;/set&gt;</span></p>\n<p><span style=\"font-size:18px\">这样就能装配set类型的属性</span></p>\n<p><span style=\"font-size:18px\">2.List类型</span></p>\n<p><span style=\"font-size:18px\">List类型的属性和Set类型的方法一样，主要是把配置文件中的set修改成list。</span></p>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\"><span style=\"font-size:18px\">Java代码 </span></div>\n</div>\n<ol class=\"dp-j\">\n<li><span><span style=\"font-size:18px\"><span class=\"keyword\"><strong><span style=\"color:#7f0055\">private</span></strong></span><span>&nbsp;List&lt;String&gt;&nbsp;lists=</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">new</span></strong></span><span>&nbsp;ArrayList&lt;String&gt;();\n &nbsp;&nbsp;</span></span></span></li><li><span></span><span style=\"font-size:18px\"><span class=\"keyword\"><strong><span style=\"color:#7f0055\">public</span></strong></span><span>&nbsp;List&lt;String&gt;&nbsp;getLists() &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;{ &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">return</span></strong></span><span>&nbsp;lists; &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">public</span></strong></span><span>&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">void</span></strong></span><span>&nbsp;setLists(List&lt;String&gt;&nbsp;lists)\n &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;{ &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">this</span></strong></span><span>.lists&nbsp;=&nbsp;lists; &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;</span></span></li><li><span></span><span style=\"font-size:18px\"><span class=\"keyword\"><strong><span style=\"color:#7f0055\">public</span></strong></span><span>&nbsp;List&lt;String&gt;&nbsp;showList() &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;{ &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">return</span></strong></span><span>&nbsp;lists; &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span><pre class=\"java\" style=\"display: none;\" name=\"code\">&lt;span style=&quot;font-size:18px;&quot;&gt;&#160;&lt;/span&gt;</pre></li></ol>\n</div>\n<p><span style=\"font-size:18px\">&nbsp;配置文件修改如下</span></p>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\"><span style=\"font-size:18px\">Xml代码 </span></div>\n</div>\n<ol class=\"dp-xml\">\n<li><span><span style=\"font-size:18px\"><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;</span><span class=\"tag-name\">bean</span></span></strong><span>&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">id</span></span><span>=</span><span class=\"attribute-value\"><span style=\"color:#0000ff\">&quot;userService&quot;</span></span><span>&nbsp;&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">class</span></span><span>=</span><span class=\"attribute-value\"><span style=\"color:#0000ff\">&quot;com.szy.spring.service.UserServiceImpl&quot;</span></span><span class=\"tag\"><strong><span style=\"color:#006699\">&gt;</span></strong></span><span>&nbsp;&nbsp;</span></span></span></li><li><span></span><span style=\"font-size:18px\"><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;</span><span class=\"tag-name\">property</span></span></strong><span>&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">name</span></span><span>=</span><span class=\"attribute-value\"><span style=\"color:#0000ff\">&quot;lists&quot;</span></span><span class=\"tag\"><strong><span style=\"color:#006699\">&gt;</span></strong></span><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;</span><span class=\"tag-name\">list</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;</span><span class=\"tag-name\">value</span><span class=\"tag\">&gt;</span></span></strong><span>List1</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;/</span><span class=\"tag-name\">value</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;</span><span class=\"tag-name\">value</span><span class=\"tag\">&gt;</span></span></strong><span>List2</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;/</span><span class=\"tag-name\">value</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;</span><span class=\"tag-name\">value</span><span class=\"tag\">&gt;</span></span></strong><span>List3</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;/</span><span class=\"tag-name\">value</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;/</span><span class=\"tag-name\">list</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;/</span><span class=\"tag-name\">property</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;/</span><span class=\"tag-name\">bean</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span><pre class=\"xml\" style=\"display: none;\" name=\"code\">&lt;span style=&quot;font-size:18px;&quot;&gt;&#160;&lt;/span&gt;</pre></li></ol>\n</div>\n<p><span style=\"font-size:18px\">3.Properties类型</span></p>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\"><span style=\"font-size:18px\">Java代码 </span></div>\n</div>\n<ol class=\"dp-j\">\n<li><span><span style=\"font-size:18px\"><span class=\"keyword\"><strong><span style=\"color:#7f0055\">private</span></strong></span><span>&nbsp;Properties&nbsp;properties=</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">new</span></strong></span><span>&nbsp;Properties();\n &nbsp;&nbsp;</span></span></span></li><li><span></span><span style=\"font-size:18px\"><span class=\"keyword\"><strong><span style=\"color:#7f0055\">public</span></strong></span><span>&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">void</span></strong></span><span>&nbsp;setProperties(Properties&nbsp;properties)\n &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;{ &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">this</span></strong></span><span>.properties&nbsp;=&nbsp;properties; &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;</span></span></li><li><span></span><span style=\"font-size:18px\"><span class=\"keyword\"><strong><span style=\"color:#7f0055\">public</span></strong></span><span>&nbsp;Properties&nbsp;getProperties() &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;{ &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">return</span></strong></span><span>&nbsp;properties; &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;</span></span></li><li><span></span><span style=\"font-size:18px\"><span class=\"keyword\"><strong><span style=\"color:#7f0055\">public</span></strong></span><span>&nbsp;Properties&nbsp;showProperties() &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;{ &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">return</span></strong></span><span>&nbsp;properties; &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span><pre class=\"java\" style=\"display: none;\" name=\"code\">&lt;span style=&quot;font-size:18px;&quot;&gt;&#160;&lt;/span&gt;</pre></li></ol>\n</div>\n<p><span style=\"font-size:18px\">&nbsp;配置文件需要如下配置</span></p>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\"><span style=\"font-size:18px\">Xml代码 </span></div>\n</div>\n<ol class=\"dp-xml\">\n<li><span><span style=\"font-size:18px\"><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;</span><span class=\"tag-name\">bean</span></span></strong><span>&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">id</span></span><span>=</span><span class=\"attribute-value\"><span style=\"color:#0000ff\">&quot;userService&quot;</span></span><span>&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">class</span></span><span>=</span><span class=\"attribute-value\"><span style=\"color:#0000ff\">&quot;com.szy.spring.service.UserServiceImpl&quot;</span></span><span class=\"tag\"><strong><span style=\"color:#006699\">&gt;</span></strong></span><span>&nbsp;&nbsp;</span></span></span></li><li><span></span><span style=\"font-size:18px\"><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;</span><span class=\"tag-name\">property</span></span></strong><span>&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">name</span></span><span>=</span><span class=\"attribute-value\"><span style=\"color:#0000ff\">&quot;properties&quot;</span></span><span class=\"tag\"><strong><span style=\"color:#006699\">&gt;</span></strong></span><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;</span><span class=\"tag-name\">props</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;</span><span class=\"tag-name\">prop</span></span></strong><span>&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">key</span></span><span>=</span><span class=\"attribute-value\"><span style=\"color:#0000ff\">&quot;key1&quot;</span></span><span class=\"tag\"><strong><span style=\"color:#006699\">&gt;</span></strong></span><span>Properties1</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;/</span><span class=\"tag-name\">prop</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;</span><span class=\"tag-name\">prop</span></span></strong><span>&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">key</span></span><span>=</span><span class=\"attribute-value\"><span style=\"color:#0000ff\">&quot;key2&quot;</span></span><span class=\"tag\"><strong><span style=\"color:#006699\">&gt;</span></strong></span><span>Properties2</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;/</span><span class=\"tag-name\">prop</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;</span><span class=\"tag-name\">prop</span></span></strong><span>&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">key</span></span><span>=</span><span class=\"attribute-value\"><span style=\"color:#0000ff\">&quot;key3&quot;</span></span><span class=\"tag\"><strong><span style=\"color:#006699\">&gt;</span></strong></span><span>Properties3</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;/</span><span class=\"tag-name\">prop</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;/</span><span class=\"tag-name\">props</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;/</span><span class=\"tag-name\">property</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;/</span><span class=\"tag-name\">bean</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><pre class=\"xml\" style=\"display: none;\" name=\"code\">&lt;span style=&quot;font-size:18px;&quot;&gt;&#160;&lt;/span&gt;</pre></li></ol>\n</div>\n<p><span style=\"font-size:18px\">&nbsp;4.Map类型</span></p>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\"><span style=\"font-size:18px\">Java代码 </span></div>\n</div>\n<ol class=\"dp-j\">\n<li><span><span style=\"font-size:18px\"><span class=\"keyword\"><strong><span style=\"color:#7f0055\">private</span></strong></span><span>&nbsp;Map&lt;String,&nbsp;String&gt;&nbsp;maps=</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">new</span></strong></span><span>&nbsp;HashMap&lt;String,&nbsp;String&gt;();\n &nbsp;&nbsp;</span></span></span></li><li><span></span><span style=\"font-size:18px\"><span class=\"keyword\"><strong><span style=\"color:#7f0055\">public</span></strong></span><span>&nbsp;List&lt;String&gt;&nbsp;getLists() &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;{ &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">return</span></strong></span><span>&nbsp;lists; &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">public</span></strong></span><span>&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">void</span></strong></span><span>&nbsp;setLists(List&lt;String&gt;&nbsp;lists)\n &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;{ &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">this</span></strong></span><span>.lists&nbsp;=&nbsp;lists; &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;</span></span></li><li><span></span><span style=\"font-size:18px\"><span class=\"keyword\"><strong><span style=\"color:#7f0055\">public</span></strong></span><span>&nbsp;Map&lt;String,&nbsp;String&gt;&nbsp;showMaps() &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;{ &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">return</span></strong></span><span>&nbsp;maps; &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></li></ol>\n</div>\n<pre class=\"java\" style=\"display: none;\" name=\"code\">&lt;span style=&quot;font-size:18px;&quot;&gt;&#160;&lt;/span&gt;</pre>\n<p><span style=\"font-size:18px\">&nbsp;配置文件做相应的配置</span></p>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\"><span style=\"font-size:18px\">Xml代码 </span></div>\n</div>\n<ol class=\"dp-xml\">\n<li><span><span style=\"font-size:18px\"><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;</span><span class=\"tag-name\">bean</span></span></strong><span>&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">id</span></span><span>=</span><span class=\"attribute-value\"><span style=\"color:#0000ff\">&quot;userService&quot;</span></span><span>&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">class</span></span><span>=</span><span class=\"attribute-value\"><span style=\"color:#0000ff\">&quot;com.szy.spring.service.UserServiceImpl&quot;</span></span><span class=\"tag\"><strong><span style=\"color:#006699\">&gt;</span></strong></span><span>&nbsp;&nbsp;</span></span></span></li><li><span style=\"font-size:18px\"><span>lt;property&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">name</span></span><span>=</span><span class=\"attribute-value\"><span style=\"color:#0000ff\">&quot;maps&quot;</span></span><span class=\"tag\"><strong><span style=\"color:#006699\">&gt;</span></strong></span><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;</span><span class=\"tag-name\">map</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;</span><span class=\"tag-name\">entry</span></span></strong><span>&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">key</span></span><span>=</span><span class=\"attribute-value\"><span style=\"color:#0000ff\">&quot;key1&quot;</span></span><span>&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">value</span></span><span>=</span><span class=\"attribute-value\"><span style=\"color:#0000ff\">&quot;Map1&quot;</span></span><strong><span style=\"color:#006699\"><span class=\"tag\">&gt;</span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">entry</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;</span><span class=\"tag-name\">entry</span></span></strong><span>&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">key</span></span><span>=</span><span class=\"attribute-value\"><span style=\"color:#0000ff\">&quot;key2&quot;</span></span><span>&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">value</span></span><span>=</span><span class=\"attribute-value\"><span style=\"color:#0000ff\">&quot;Map2&quot;</span></span><strong><span style=\"color:#006699\"><span class=\"tag\">&gt;</span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">entry</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;</span><span class=\"tag-name\">entry</span></span></strong><span>&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">key</span></span><span>=</span><span class=\"attribute-value\"><span style=\"color:#0000ff\">&quot;key3&quot;</span></span><span>&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">value</span></span><span>=</span><span class=\"attribute-value\"><span style=\"color:#0000ff\">&quot;Map3&quot;</span></span><strong><span style=\"color:#006699\"><span class=\"tag\">&gt;</span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">entry</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;/</span><span class=\"tag-name\">map</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;/</span><span class=\"tag-name\">property</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span></li><li><span></span><span style=\"font-size:18px\"><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;/</span><span class=\"tag-name\">bean</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span><pre class=\"xml\" style=\"display: none;\" name=\"code\">&lt;span style=&quot;font-size:18px;&quot;&gt;&#160;&lt;/span&gt;</pre></li></ol>\n</div>\n<p><span style=\"font-size:18px\">这样就完成了对Map类型的属性进行装配。</span></p>\n<p><span style=\"font-size:18px\"></span>&nbsp;</p>\n<p><span style=\"font-size:18px\">Spring完成自动扫描和管理bean</span></p>\n<p><span style=\"font-size:18px\"></span>&nbsp;</p>\n<div class=\"tools\"><span style=\"font-size:18px\">Java代码 </span></div>\n<ol class=\"dp-j\">\n<li><span><span style=\"font-size:18px\"><span class=\"keyword\"><strong><span style=\"color:#7f0055\">package</span></strong></span><span>&nbsp;com.szy.spring.service; &nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;</span></span></li><li><span></span><span style=\"font-size:18px\"><span class=\"keyword\"><strong><span style=\"color:#7f0055\">import</span></strong></span><span>&nbsp;org.springframework.stereotype.Service; &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;</span></span></li><li><span></span><span style=\"font-size:18px\"><span class=\"keyword\"><strong><span style=\"color:#7f0055\">import</span></strong></span><span>&nbsp;com.szy.spring.dao.PersonDao; &nbsp;&nbsp;</span></span></li><li><span></span><span style=\"font-size:18px\"><span class=\"annotation\"><span style=\"color:#646464\">@Service</span></span><span>(</span><span class=\"string\"><span style=\"color:#0000ff\">&quot;service&quot;</span></span><span>) &nbsp;&nbsp;</span></span></li><li><span></span><span style=\"font-size:18px\"><span class=\"keyword\"><strong><span style=\"color:#7f0055\">public</span></strong></span><span>&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">class</span></strong></span><span>&nbsp;UserServiceImpl&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">implements</span></strong></span><span>&nbsp;UserService\n &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">{ &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">private</span></strong></span><span>&nbsp;PersonDao&nbsp;personDaoBean; &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">public</span></strong></span><span>&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">void</span></strong></span><span>&nbsp;show() &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;{ &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;personDaoBean.show(); &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">public</span></strong></span><span>&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">void</span></strong></span><span>&nbsp;setPersonDaoBean(PersonDao&nbsp;personDaoBean)\n &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;{ &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">this</span></strong></span><span>.personDaoBean&nbsp;=&nbsp;personDaoBean; &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">}&nbsp;&nbsp;</span></span></li></ol>\n<pre class=\"java\" style=\"display: none;\" name=\"code\">&lt;span style=&quot;font-size:18px;&quot;&gt;&#160;&lt;/span&gt;</pre>\n<p><span style=\"font-size:18px\"></span>&nbsp;</p>\n<p><span style=\"font-size:18px\">&nbsp;在前面的例子中，都是使用XML的bean定义来使用组件，在大的项目中，通常会有上百个组件，如果这些组件采用xml的bean定义来配置，显然会使配置文件显得很臃肿，查找和维护起来不方便。Spring2.5为我们引入了组件自动扫描机制，它可以在类路径下寻找标记了@Component、@Service、@Controller、@Repository注解的类，并把这些类纳入到spring容器中管理，它的作用和在xml中使用bean节点配置组件一样。要使用自动扫描机制，我们需要把配置文件如下配置：</span></p>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\"><span style=\"font-size:18px\">Xml代码 </span></div>\n</div>\n<ol class=\"dp-xml\">\n<li><span><span style=\"font-size:18px\"><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;?</span><span class=\"tag-name\">xml</span></span></strong><span>&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">version</span></span><span>=</span><span class=\"attribute-value\"><span style=\"color:#0000ff\">&quot;1.0&quot;</span></span><span>&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">encoding</span></span><span>=</span><span class=\"attribute-value\"><span style=\"color:#0000ff\">&quot;UTF-8&quot;</span></span><span class=\"tag\"><strong><span style=\"color:#006699\">?&gt;</span></strong></span><span>&nbsp;&nbsp;</span></span></span></li><li><span></span><span style=\"font-size:18px\"><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;</span><span class=\"tag-name\">beans</span></span></strong><span>&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">xmlns</span></span><span>=</span><span class=\"attribute-value\"><span style=\"color:#0000ff\">&quot;http://www.springframework.org/schema/beans&quot;</span></span><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">xmlns:xsi</span></span><span>=</span><span class=\"attribute-value\"><span style=\"color:#0000ff\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">xmlns:context</span></span><span>=</span><span class=\"attribute-value\"><span style=\"color:#0000ff\">&quot;http://www.springframework.org/schema/context&quot;</span></span><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">xmlns:tx</span></span><span>=</span><span class=\"attribute-value\"><span style=\"color:#0000ff\">&quot;http://www.springframework.org/schema/tx&quot;</span></span><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">xsi:schemaLocation</span></span><span>=&quot;http://www.springframework.org/schema/beans&nbsp;http://www.springframework.org/schema/beans/spring-beans-2.5.xsd &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/context&nbsp;http://www.springframework.org/schema/context/spring-context-2.5.xsd &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/tx&nbsp;http://www.springframework.org/schema/tx/spring-tx-2.5.xsd&quot;</span><span class=\"tag\"><strong><span style=\"color:#006699\">&gt;</span></strong></span><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;</span><span class=\"tag-name\">context:component-scan</span></span></strong><span>&nbsp;</span><span class=\"attribute\"><span style=\"color:#ff0000\">base-package</span></span><span>=</span><span class=\"attribute-value\"><span style=\"color:#0000ff\">&quot;com.szy.spring&quot;</span></span><strong><span style=\"color:#006699\"><span class=\"tag\">&gt;</span><span class=\"tag\">&lt;/</span><span class=\"tag-name\">context:component-scan</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span></li><li><span></span><span style=\"font-size:18px\"><strong><span style=\"color:#006699\"><span class=\"tag\">&lt;/</span><span class=\"tag-name\">beans</span><span class=\"tag\">&gt;</span></span></strong><span>&nbsp;&nbsp;</span></span><pre class=\"xml\" style=\"display: none;\" name=\"code\">&lt;span style=&quot;font-size:18px;&quot;&gt;&#160;&lt;/span&gt;</pre></li></ol>\n</div>\n<p><span style=\"font-size:18px\">&nbsp;其中base-package为需要扫描的包（包括子包）</span></p>\n<p><span style=\"font-size:18px\">@Service用于标注业务层的组件，@Controller用于标注控制层组件（如struts中的action），@Repository用于标注数据访问组件，即DAO组件，而@Component泛指组件，当组件不好归类的时候，我们可以使用这个注解进行标注。但是在目前的spring版本中，这几个注解的作用是一样的，但是在以后可能会进行区分。</span></p>\n<p><span style=\"font-size:18px\">&nbsp;</span></p>\n<p><span style=\"font-size:18px\">下面把先前的例子修改一下：</span></p>\n<p><span style=\"font-size:18px\">首先是PersonDaoBean类，修改如下</span></p>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\"><span style=\"font-size:18px\">Java代码 </span></div>\n</div>\n<ol class=\"dp-j\">\n<li><span><span style=\"font-size:18px\"><span class=\"keyword\"><strong><span style=\"color:#7f0055\">package</span></strong></span><span>&nbsp;com.szy.spring.dao; &nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;</span></span></li><li><span></span><span style=\"font-size:18px\"><span class=\"keyword\"><strong><span style=\"color:#7f0055\">import</span></strong></span><span>&nbsp;org.springframework.stereotype.Repository; &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;</span></span></li><li><span></span><span style=\"font-size:18px\"><span class=\"annotation\"><span style=\"color:#646464\">@Repository</span></span><span>&nbsp;&nbsp;</span></span></li><li><span></span><span style=\"font-size:18px\"><span class=\"comment\"><span style=\"color:#008200\">//告诉spring这个类要交给spring管理，\n</span></span><span>&nbsp;&nbsp;</span></span></li><li><span></span><span style=\"font-size:18px\"><span class=\"keyword\"><strong><span style=\"color:#7f0055\">public</span></strong></span><span>&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">class</span></strong></span><span>&nbsp;PersonDaoBean&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">implements</span></strong></span><span>&nbsp;PersonDao\n &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">{ &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">public</span></strong></span><span>&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">void</span></strong></span><span>&nbsp;show() &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;{ &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(</span><span class=\"string\"><span style=\"color:#0000ff\">&quot;执行PersonDaoBean中的add()方法&quot;</span></span><span>); &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">}&nbsp;&nbsp;</span></span><pre class=\"java\" style=\"display: none;\" name=\"code\">&lt;span style=&quot;font-size:18px;&quot;&gt;&#160;&lt;/span&gt;</pre></li></ol>\n</div>\n<p><span style=\"font-size:18px\">然后是UserServiceImpl类</span></p>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\"><span style=\"font-size:18px\">Java代码 </span></div>\n</div>\n<ol class=\"dp-j\">\n<li><span><span style=\"font-size:18px\"><span class=\"keyword\"><strong><span style=\"color:#7f0055\">package</span></strong></span><span>&nbsp;com.szy.spring.service; &nbsp;&nbsp;</span></span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;</span></span></li><li><span></span><span style=\"font-size:18px\"><span class=\"keyword\"><strong><span style=\"color:#7f0055\">import</span></strong></span><span>&nbsp;org.springframework.stereotype.Service; &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;</span></span></li><li><span></span><span style=\"font-size:18px\"><span class=\"keyword\"><strong><span style=\"color:#7f0055\">import</span></strong></span><span>&nbsp;com.szy.spring.dao.PersonDao; &nbsp;&nbsp;</span></span></li><li><span></span><span style=\"font-size:18px\"><span class=\"annotation\"><span style=\"color:#646464\">@Service</span></span><span>&nbsp;&nbsp;</span></span></li><li><span></span><span style=\"font-size:18px\"><span class=\"comment\"><span style=\"color:#008200\">//把这个类交给spring管理，作为服务了。\n</span></span><span>&nbsp;&nbsp;</span></span></li><li><span></span><span style=\"font-size:18px\"><span class=\"keyword\"><strong><span style=\"color:#7f0055\">public</span></strong></span><span>&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">class</span></strong></span><span>&nbsp;UserServiceImpl&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">implements</span></strong></span><span>&nbsp;UserService\n &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">{ &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">private</span></strong></span><span>&nbsp;PersonDao&nbsp;personDaoBean; &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">public</span></strong></span><span>&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">void</span></strong></span><span>&nbsp;show() &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;{ &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;personDaoBean.show(); &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">public</span></strong></span><span>&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">void</span></strong></span><span>&nbsp;setPersonDaoBean(PersonDao&nbsp;personDaoBean)\n &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;{ &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">this</span></strong></span><span>.personDaoBean&nbsp;=&nbsp;personDaoBean; &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">public</span></strong></span><span>&nbsp;PersonDao&nbsp;getPersonDaoBean() &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;{ &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">return</span></strong></span><span>&nbsp;personDaoBean; &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">}&nbsp;&nbsp;</span></span><pre class=\"java\" style=\"display: none;\" name=\"code\">&lt;span style=&quot;font-size:18px;&quot;&gt;&#160;&lt;/span&gt;</pre></li></ol>\n</div>\n<p><span style=\"font-size:18px\">&nbsp;下面我们进行测试，原来的测试代码是userServiceImpl </span></p>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\"><span style=\"font-size:18px\">Java代码 </span></div>\n</div>\n<ol class=\"dp-j\">\n<li><span><span style=\"font-size:18px\"><span>ApplicationContext&nbsp;ctx=</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">new</span></strong></span><span>&nbsp;ClassPathXmlApplicationContext(</span><span class=\"string\"><span style=\"color:#0000ff\">&quot;applicationContext.xml&quot;</span></span><span>);\n &nbsp;&nbsp;</span></span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UserService&nbsp;service=(UserService)ctx.getBean(</span><span class=\"string\"><span style=\"color:#0000ff\">&quot;userService&quot;</span></span><span>); &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;service.show();&nbsp;&nbsp;</span></span></li></ol>\n</div>\n<p><span style=\"font-size:18px\">其中userService是我们在配置文件中配置的bean的id。但是如今我们并没有id这个属性，在spring2.5中，默认的id是类的名称，但是开后是小写，也就是userServiceImpl，因此测试代码应修改如下：</span></p>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\"><span style=\"font-size:18px\">Java代码 </span></div>\n</div>\n<ol class=\"dp-j\">\n<li><span><span style=\"font-size:18px\"><span>AbstractApplicationContext&nbsp;ctx=</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">new</span></strong></span><span>&nbsp;ClassPathXmlApplicationContext(</span><span class=\"string\"><span style=\"color:#0000ff\">&quot;applicationContext.xml&quot;</span></span><span>);\n &nbsp;&nbsp;</span></span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UserService&nbsp;service=(UserService)ctx.getBean(</span><span class=\"string\"><span style=\"color:#0000ff\">&quot;userServiceImpl&quot;</span></span><span>); &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(service);&nbsp;&nbsp;</span></span><pre class=\"java\" style=\"display: none;\" name=\"code\">&lt;span style=&quot;font-size:18px;&quot;&gt;&#160;&lt;/span&gt;</pre></li></ol>\n</div>\n<p><span style=\"font-size:18px\">如果我们想自己命名的话，则只需在注解后加上括号，里面写入你希望的名字，如</span></p>\n<p><span style=\"font-size:18px\">@Service(&quot;userService&quot;)。</span></p>\n<p><span style=\"font-size:18px\">&nbsp;</span></p>\n<p><span style=\"font-size:18px\">在spring中默认的是之生成一个bean实例，如果我们想每次调用都产生一个实例，则标注需如下配置</span></p>\n<p><span style=\"font-size:18px\">@Service @Scope(&quot;prototype&quot;)</span></p>\n<p><span style=\"font-size:18px\">&nbsp;</span></p>\n<p><span style=\"font-size:18px\">在xml中我们还可以配置初始化方法和销毁方法，使用标注后只需如下标注</span></p>\n<div class=\"dp-highlighter\">\n<div class=\"bar\">\n<div class=\"tools\"><span style=\"font-size:18px\">Java代码 </span></div>\n</div>\n<ol class=\"dp-j\">\n<li><span><span style=\"font-size:18px\"><span class=\"annotation\"><span style=\"color:#646464\">@PostConstruct</span></span><span>&nbsp;&nbsp;</span></span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">public</span></strong></span><span>&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">void</span></strong></span><span>&nbsp;init() &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;{ &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(</span><span class=\"string\"><span style=\"color:#0000ff\">&quot;初始化&quot;</span></span><span>); &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;} &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"annotation\"><span style=\"color:#646464\">@PreDestroy</span></span><span>&nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">public</span></strong></span><span>&nbsp;</span><span class=\"keyword\"><strong><span style=\"color:#7f0055\">void</span></strong></span><span>&nbsp;destory() &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;{ &nbsp;&nbsp;</span></span></li><li><span style=\"font-size:18px\"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(</span><span class=\"string\"><span style=\"color:#0000ff\">&quot;销毁&quot;</span></span><span>); &nbsp;&nbsp;</span></span></li><li><span><span style=\"font-size:18px\">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></li></ol>\n</div>\n<p><span style=\"font-size:18px\">&nbsp;</span></p>\n<p><span style=\"font-size:18px\">&nbsp;使用注解后，我们的xml文件变得十分简单，因此建议大家在以后的开发中使用注解。</span></p>\n<p><span style=\"font-size:18px\"></span>&nbsp;</p>\n   \n', '2016-04-16 01:21:25', '0');
INSERT INTO `article` VALUES ('10102', '10003', '为什么我们需要HTML5WebSocket', '\n<p style=\"margin-top:15px; margin-bottom:15px; padding:8px; font-size:14px; color:white; font-family:宋体,Calibri; background-color:rgb(128,128,128)\"><span style=\"line-height:28.8px\">HTML5 WebSocket简介</span></p><p>&nbsp;&nbsp;&nbsp;&nbsp;HTML5作为下一代的 Web 标准，它拥有许多引人注目的新特性，如 Canvas、本地存储、多媒体编程接口、WebSocket等等。这其中有“Web 的 TCP ”之称的WebSocket格外吸引开发人员的注意。WebSocket的出现使得浏览器提供对Socket的支持成为可能，从而在浏览器和服务器之间提供了一个基于TCP连接的双向通道。Web开发人员可以非常方便地使用WebSocket构建实时web应用，开发人员的手中从此又多了一柄神兵利器。</p><p style=\"margin-top:15px; margin-bottom:15px; padding:8px; font-size:14px; color:white; font-family:宋体,Calibri; background-color:rgb(128,128,128)\"><span style=\"line-height:28.8px\">实时Web应用的窘境</span></p>&nbsp;&nbsp;&nbsp;&nbsp;Web应用的信息交互过程通常是客户端通过浏览器发出一个请求，服务器端接收和审核完请求后进行处理并返回结果给客户端，然后客户端浏览器将信息呈现出来，这种机制对于信息变化不是特别频繁的应用尚能相安无事，但是对于那些实时要求比较高的应用来说，比如说在线游戏、股票查询，在线证券、设备监控、新闻在线播报、RSS订阅推送等等，当客户端浏览器准备呈现这些信息的时候，这些信息在服务器端可能已经过时了。所以保持客户端和服务器端的信息同步是实时 Web 应用的关键要素，对 Web 开发人员来说也是一个难题。在WebSocket规范出来之前，开发人员想实现这些实时的Web应用，不得不采用一些折衷的方案，其中最常用的就是轮询(Polling)和Comet技术。而Comet 技术实际上是轮询技术的改进，又可细分为两种实现方式，一种是长轮询机制，一种称为流技术。下面我们简单介绍一下这几种技术：<br><p style=\"margin-top:15px; margin-bottom:15px; padding:8px; font-size:14px; color:white; font-family:宋体,Calibri; background-color:rgb(128,128,128)\"><span style=\"line-height:28.8px\">轮询：</span></p>&nbsp;&nbsp;&nbsp;&nbsp;这是最早的一种实现实时Web应用的方案。客户端以一定的时间间隔向服务端发出请求，以频繁请求的方式来保持客户端和服务器端的同步。这种同步方案的最大问题是，当客户端以固定频率向服务器发起请求的时候，服务器端的数据可能并没有更新，这样会带来很多无谓的网络传输，所以这是一种非常低效的实时方案。<br><p style=\"margin-top:15px; margin-bottom:15px; padding:8px; font-size:14px; color:white; font-family:宋体,Calibri; background-color:rgb(128,128,128)\"><span style=\"line-height:28.8px\">长轮询：</span></p>&nbsp;&nbsp;&nbsp;&nbsp;长轮询是对定时轮询的改进和提高，目地是为了降低无效的网络传输。当服务器端没有数据更新的时候，连接会保持一段时间周期直到数据或状态改变或者时间过期，通过这种机制来减少无效的客户端和服务器间的交互。当然，如果服务端的数据变更非常频繁的话，这种机制和定时轮询比较起来没有本质上的性能的提高。<br><p style=\"margin-top:15px; margin-bottom:15px; padding:8px; font-size:14px; color:white; font-family:宋体,Calibri; background-color:rgb(128,128,128)\"><span style=\"line-height:28.8px\">流：</span></p>&nbsp;&nbsp;&nbsp;&nbsp;流技术方案通常就是在客户端的页面使用一个隐藏的窗口向服务端发出一个长连接的请求。服务器端接到这个请求后作出回应并不断更新连接状态以保证客户端和服务器端的连接不过期。通过这种机制可以将服务器端的信息源源不断地推向客户端。这种机制在用户体验上有一点问题，需要针对不同的浏览器设计不同的方案来改进用户体验，同时这种机制在并发比较大的情况下，对服务器端的资源是一个极大的考验。<br>综合这几种方案，您会发现这些目前我们所使用的所谓的实时技术并不是真正的实时技术，它们只是在用Ajax方式来模拟实时的效果，在每次客户端和服务器端交互的时候都是一次HTTP的请求和应答的过程，而每一次的HTTP请求和应答都带有完整的HTTP头信息，这就增加了每次传输的数据量，而且这些方案中客户端和服务器端的编程实现都比较复杂，在实际的应用中，为了模拟比较真实的实时效果，开发人员往往需要构造两个HTTP连接来模拟客户端和服务器之间的双向通讯，一个连接用来处理客户端到服务器端的数据传输，一个连接用来处理服务器端到客户端的数据传输，这不可避免地增加了编程实现的复杂度，也增加了服务器端的负载，制约了应用系统的扩展性。<br><p style=\"margin-top:15px; margin-bottom:15px; padding:8px; font-size:14px; color:white; font-family:宋体,Calibri; background-color:rgb(128,128,128)\"><span style=\"line-height:28.8px\">WebSocket 的拯救</span></p><p>&nbsp;&nbsp;&nbsp;&nbsp;HTML5 WebSocket设计出来的目的就是要取代轮询和Comet技术，使客户端浏览器具备像C/S架构下桌面系统的实时通讯能力。浏览器通过JavaScript向服务器发出建立WebSocket连接的请求，连接建立以后，客户端和服务器端就可以通过TCP连接直接交换数据。因为WebSocket连接本质上就是一个TCP连接，所以在数据传输的稳定性和数据传输量的大小方面，和轮询以及Comet技术比较，具有很大的性能优势。Websocket.org网站对传统的轮询方式和WebSocket调用方式作了一个详细的测试和比较，将一个简单的Web应用分别用轮询方式和WebSocket方式来实现，在这里引用一下他们的测试结果图：</p><p><h5 id=\"fig1\" style=\"margin: 5px 0px 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; font-family: Arial, sans-serif; font-size: 1.166em !important;\">轮询和 WebSocket 实现方式的网络负载对比图</h5><br><p><p><img src=\"http://img.blog.csdn.net/20160316160635179?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"轮询和 WebSocket 实现方式的网络负载对比图\" width=\"504\" height=\"360\"><br></p><p>通过这张图可以清楚的看出，在流量和负载增大的情况下，WebSocket方案相比传统的Ajax轮询方案有极大的性能优势。这也是为什么我们认为WebSocket是未来实时Web应用的首选方案的原因。</p><p style=\"margin-top:15px; margin-bottom:15px; padding:8px; font-size:14px; color:white; font-family:宋体,Calibri; background-color:rgb(128,128,128)\"><span style=\"line-height:28.8px\">欢迎大家关注我的博客，关注我的微博，如有疑问，请加qq群：454796847、135430763 共同进步！</span></p>   \n', '2016-04-16 01:21:25', '0');
INSERT INTO `article` VALUES ('10103', '10003', 'Spring学习笔记（8）-----------依赖注入', '\n<a href=\"#\" class=\"bds_more\" data-cmd=\"more\" style=\"background-position:0 0 !important; background-image: url(http://bdimg.share.baidu.com/static/api/img/share/icons_0_16.png?v=d754dcc0.png) !important\"></a>\n<a href=\"#\" class=\"bds_qzone\" data-cmd=\"qzone\" title=\"分享到QQ空间\" style=\"background-position:0 -52px !important\"></a>\n<a href=\"#\" class=\"bds_tsina\" data-cmd=\"tsina\" title=\"分享到新浪微博\" style=\"background-position:0 -104px !important\"></a>\n<a href=\"#\" class=\"bds_tqq\" data-cmd=\"tqq\" title=\"分享到腾讯微博\" style=\"background-position:0 -260px !important\"></a>\n<a href=\"#\" class=\"bds_renren\" data-cmd=\"renren\" title=\"分享到人人网\" style=\"background-position:0 -208px !important\"></a>\n<a href=\"#\" class=\"bds_weixin\" data-cmd=\"weixin\" title=\"分享到微信\" style=\"background-position:0 -1612px !important\"></a>\n', '2016-04-16 01:21:25', '0');
INSERT INTO `article` VALUES ('10104', '10003', '推荐一下我的个人博客:业余草-www.xttblog.com', '\n<p style=\"margin-top:15px; margin-bottom:15px; padding:8px; font-size:14px; color:white; font-family:宋体,Calibri; background-color:rgb(128,128,128)\"><span style=\"line-height:28.8px\">牢骚：</span></p><p><span style=\"white-space:pre\">	</span>在中国盗版问题真的很严重，以前我写在csdn上的博客都被盗到其他网站上了。而最近，我建立了自己的个人博客：<a target=\"_blank\" href=\"http://www.xttblog.com\" target=\"_blank\">业余草</a>，然后我写的文章不到2个小时都出现在其他网站上了。对此我资讯了各大博客专家，也没寻找到好的解决办法。建议以后写文章都带上：<span style=\"font-family: Arial, Console, Verdana, \'Courier New\'; font-size: 14px; line-height: 14px;\"><strong>版权声明：本文为博主原创文章，未经博主允许不得转载。</strong></span></p><p style=\"margin-top:15px; margin-bottom:15px; padding:8px; font-size:14px; color:white; font-family:宋体,Calibri; background-color:rgb(128,128,128)\"><span style=\"line-height:28.8px\">业余草网站概述：</span></p><p><img src=\"http://img.blog.csdn.net/20160308171405090?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\" style=\"float:left;margin-right:10px;margin-bottom:10px;\"></p><p style=\"margin-top: 0px; margin-bottom: 5px; padding-top: 0px; padding-bottom: 0px; text-indent: 2em; word-wrap: break-word; line-height: 24px; font-family: Arial, SimSun; font-size: 14px;\">业余草，创办于2015年7月，是IT知识交流学习网站，依托CSDN众多专家，形成由众多专家，各编程语言的组成的综合性的学习交流网站。<a target=\"_blank\" style=\"color: rgb(51, 102, 204); text-decoration: underline;\">&nbsp;</a></p><p style=\"margin-top: 0px; margin-bottom: 5px; padding-top: 0px; padding-bottom: 0px; text-indent: 2em; word-wrap: break-word; line-height: 24px; font-family: Arial, SimSun; font-size: 14px;\">业余草以“传播IT知识”为职责，以“高质量”为理念，提供程序员学习的各种技能知识文章。<a target=\"_blank\" style=\"color: rgb(51, 102, 204); text-decoration: underline;\"></a></p><p style=\"margin-top: 0px; margin-bottom: 5px; padding-top: 0px; padding-bottom: 0px; text-indent: 2em; word-wrap: break-word; line-height: 24px; font-family: Arial, SimSun; font-size: 14px;\">业余草原来是写科技博客为主，技术文章为辅的综合性网站。在经过2015年后半年的发展，逐渐转型为已技术文章为主，杂谈为辅的IT知识学习网站。</p><p style=\"margin-top: 0px; margin-bottom: 5px; padding-top: 0px; padding-bottom: 0px; text-indent: 2em; word-wrap: break-word; line-height: 24px; font-family: Arial, SimSun; font-size: 14px;\">业余草目前支持评论，订阅等功能。后续可能会提供点赞等功能。</p><p style=\"margin-top: 0px; margin-bottom: 5px; padding-top: 0px; padding-bottom: 0px; text-indent: 2em; word-wrap: break-word; line-height: 24px; font-family: Arial, SimSun; font-size: 14px;\">官网地址：http://www.xttblog.com</p><p style=\"margin-top: 0px; margin-bottom: 5px; padding-top: 0px; padding-bottom: 0px; text-indent: 2em; word-wrap: break-word; line-height: 24px; font-family: Arial, SimSun; font-size: 14px;\"><br></p><p style=\"margin-top: 0px; margin-bottom: 5px; padding-top: 0px; padding-bottom: 0px; text-indent: 2em; word-wrap: break-word; line-height: 24px; font-family: Arial, SimSun; font-size: 14px;\"><br></p><p style=\"margin-top:15px; margin-bottom:15px; padding:8px; font-size:14px; color:white; font-family:宋体,Calibri; background-color:rgb(128,128,128)\"><span style=\"line-height:28.8px\">网站业务：</span></p><p style=\"margin-top: 0px; margin-bottom: 5px; padding-top: 0px; padding-bottom: 0px; text-indent: 2em; word-wrap: break-word; line-height: 24px; font-family: Arial, SimSun; font-size: 14px;\">截止到2016年3月，共有4大板块。</p><p style=\"margin-top: 0px; margin-bottom: 5px; padding-top: 0px; padding-bottom: 0px; text-indent: 2em; word-wrap: break-word; line-height: 24px; font-family: Arial, SimSun; font-size: 14px;\">JAVA——java板块主要提供java开发者学习的内容板块。</p><p style=\"margin-top: 0px; margin-bottom: 5px; padding-top: 0px; padding-bottom: 0px; text-indent: 2em; word-wrap: break-word; line-height: 24px; font-family: Arial, SimSun; font-size: 14px;\">HTML——主要提供丰富的HTML5学习分享交流内容。</p><p style=\"margin-top: 0px; margin-bottom: 5px; padding-top: 0px; padding-bottom: 0px; text-indent: 2em; word-wrap: break-word; line-height: 24px; font-family: Arial, SimSun; font-size: 14px;\">SQL——主要提供以MySQL、ORACLE等数据库语言为主的学习交流内容。</p><p style=\"margin-top: 0px; margin-bottom: 5px; padding-top: 0px; padding-bottom: 0px; text-indent: 2em; word-wrap: break-word; line-height: 24px; font-family: Arial, SimSun; font-size: 14px;\">C++——提供C++学习者的学习内容。</p><p style=\"margin-top:15px; margin-bottom:15px; padding:8px; font-size:14px; color:white; font-family:宋体,Calibri; background-color:rgb(128,128,128)\"><span style=\"line-height:28.8px\">欢迎大家关注我的博客，关注我的微博，如有疑问，请加qq群：454796847、135430763 共同进步！</span></p>   \n', '2016-04-16 01:21:25', '1');
INSERT INTO `article` VALUES ('10105', '10003', '使用easydrag实现可拖动的DIV弹出框', '\n最近在工作中遇到了jquery的easydrag插件，我有一种相见恨晚的赶脚！easydrag极大的方法我们实现div弹框这个功能，使我爱不释手！<br>在没遇到easydrag插件之前，想实现一个弹出框并不是一件轻而易举的事情！<br>人们常说没有不劳而获的事情，但在编码的世界中却不是这样。更多的开源框架方面了我们，也毒害了我们！<br><p style=\"margin-top:15px; margin-bottom:15px; padding:8px; font-size:14px; color:white; font-family:宋体,Calibri; background-color:rgb(128,128,128)\"><span style=\"line-height:28.8px\">废话少说，先看效果：</span></p><img src=\"http://img.blog.csdn.net/20160219142619924?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"><p style=\"margin-top:15px; margin-bottom:15px; padding:8px; font-size:14px; color:white; font-family:宋体,Calibri; background-color:rgb(128,128,128)\"><span style=\"line-height:28.8px\">全部代码：</span></p><p><pre code_snippet_id=\"1582395\" snippet_file_name=\"blog_20160219_1_3086956\" name=\"code\" class=\"html\">&lt;!DOCTYPE HTML&gt;\n&lt;html&gt;\n&lt;head&gt;\n	&lt;title&gt;easydrag实现可拖动的DIV弹出框&lt;/title&gt;\n	&lt;style&gt;\n		/* 重置浏览器默认样式 */\n		body,h1,h2,h3,h4,h5,h6,p,ul,ol,li,form,img,dl,dt,dd,table,th,td,blockquote,fieldset,div,strong,label,em{margin:0;padding:0;border:0;}\n		ul,ol,li{list-style:none;}\n		input,button{margin:0;font-size:12px;vertical-align:middle;}\n		body{font-size:12px;font-family:Arial, Helvetica, sans-serif; color:#333; margin:0 auto; }\n		table{border-collapse:collapse;border-spacing:0;}\n		a{ color:#333; text-decoration:none;}\n		a:hover{ text-decoration:none;}\n\n		.wrap{ width:960px; margin:20px auto;}\n		.box{ display:none; background:#fff; border:1px solid #ccc; position:absolute;}\n\n		#popbox{ width:550px;height:320px;overflow:hidden;}\n		#handler{ width:98%; height:30px; line-height:30px; overflow:hidden; color:#fff; border-bottom:1px solid #ccc; background:#ccc; padding-left:2%; float:left;}\n		.btn{ display:block; width:90px; height:28px; border:1px solid #ccc; line-height:28px; text-align:center; margin-right:20px; float:left; display:inline; margin-right:15px; cursor:pointer;}\n		.close{ display:block; background:url(images/close.gif) no-repeat; width:13px; height:13px; float:right; text-indent:-999em; cursor:pointer; display:inline; margin:8px 12px 0 0;}\n		.head i{ float:left; font-style:normal;}\n		.content{ width:100%; float:left;}\n		.content img{width:100%;}\n	&lt;/style&gt;\n	&lt;!-- 使用百度的jquery在线cdn --&gt;\n	&lt;script src=&quot;http://libs.baidu.com/jquery/2.0.0/jquery.min.js&quot;&gt;&lt;/script&gt;\n	&lt;!-- easydrag.js没有找到在线的cdn，大家可以自行下载 --&gt;\n	&lt;script type=&quot;text/javascript&quot; src=&quot;js/easydrag.js&quot;&gt;&lt;/script&gt;\n	&lt;script language=&quot;javascript&quot;&gt;\n		$(function(){\n			//btn绑定click事件\n			$(\'.btn\').click(function(){\n				//设置弹出框居中\n				$(\'#popbox\').css({\n					left: ($(window).width() - $(\'#popbox\').outerWidth())/2,\n					top: ($(window).height() - $(\'#popbox\').outerHeight())/2 + $(document).scrollTop()\n				});\n				$(\'#popbox\').easydrag();	\n				//淡入已隐藏的div\n				$(\'#popbox\').fadeIn();	\n				$(\'#popbox\').setHandler(\'handler\');\n				$(\'.close\').click(function(){\n					//淡出效果来隐藏弹出的div\n					$(\'#popbox\').fadeOut();\n				});\n			});	\n		});\n	&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;div class=&quot;wrap&quot;&gt;\n	&lt;b class=&quot;btn&quot;&gt;打开弹出框&lt;/b&gt;\n	&lt;div id=&quot;popbox&quot; class=&quot;box&quot;&gt;\n		&lt;div class=&quot;head&quot; id=&quot;handler&quot;&gt;&lt;b class=&quot;close&quot;&gt;关闭&lt;/b&gt;&lt;i&gt;点击标题位置进行拖动&lt;/i&gt;&lt;/div&gt;\n		&lt;div class=&quot;content&quot;&gt;&lt;a href=&quot;http://blog.csdn.net/xmtblog/&quot;&gt;&lt;img src=&quot;images/img03.jpg&quot; /&gt;&lt;/a&gt;&lt;/div&gt;\n	&lt;/div&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;</pre><p style=\"margin-top:15px; margin-bottom:15px; padding:8px; font-size:14px; color:white; font-family:宋体,Calibri; background-color:rgb(128,128,128)\"><span style=\"line-height:28.8px\">欢迎大家关注我的博客，关注我的微博，如有疑问，请加qq群：454796847、135430763 共同进步！</span></p>   \n', '2016-04-16 01:21:26', '0');
INSERT INTO `article` VALUES ('10106', '10003', 'csdn博客栏目装修大全', '\n过年了，各公司都在晒年终奖、办年会。据说小米公司年会中，有免费装修房子的。我们这些可怜的程序员只能想办法装修装修自己的csdn博客了。那么作为csdn的一个忠实用户，今天我教大家如何免费的对自己的csdn博客进行装修。<br><strong>1.添加打赏功能</strong><br><span style=\"white-space:pre\">	</span>之前我写过一篇关于csdn博客添加打赏功能的需求文章，地址：<a target=\"_blank\" target=\"_blank\" href=\"http://blog.csdn.net/xmtblog/article/details/50371814\">http://blog.csdn.net/xmtblog/article/details/50371814</a><br><span style=\"white-space:pre\">	</span>虽然到目前为止csdn还没有实现，但是作为程序员我们可以间接的靠装修博客栏目来实现。<br><span style=\"white-space:pre\">	</span>先看看效果：<br><span style=\"white-space: pre;\">	</span><img src=\"http://img.blog.csdn.net/20160128152126227?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" align=\"middle\" alt=\"\"><br><span style=\"white-space:pre\">	</span>实现方案：找到csdn的个人主页(<a target=\"_blank\" target=\"_blank\" href=\"http://my.csdn.net/\">http://my.csdn.net/</a>)找到我的收藏，有一个小箭头，选择我的相册，上传自己微信和支付宝扫描付的二维码。然后到博客栏目(<a target=\"_blank\" target=\"_blank\" href=\"http://write.blog.csdn.net/configure/column\">http://write.blog.csdn.net/configure/column</a>)<br><span style=\"white-space:pre\">	</span>添加自定义栏目,一个人最多可以添加6个自定义栏目(好像只有博客专家才有添加自定义栏目的权限)。<br><span style=\"white-space:pre\">	</span>在里面添加如下代码：<br><pre code_snippet_id=\"1568534\" snippet_file_name=\"blog_20160128_1_5142045\" code_snippet_id=\"1568534\" snippet_file_name=\"blog_20160128_1_5142045\" name=\"code\" class=\"html\">&lt;img src=&quot;http://img.my.csdn.net/uploads/201601/18/1453086577_7892.png&quot; alt=&quot;支付宝&quot; title=&quot;支付宝二维码&quot; height=&quot;100%&quot; width=&quot;100%&quot;&gt;</pre><span style=\"white-space:pre\">	</span>就可以实现读者扫描打赏功能了。微信做法类似。<br><strong>2.添加外部友情链接</strong><br><span style=\"white-space:pre\">	</span>这个功能很简单了，直接在自定义栏目里的内容中添加a标签即可。如我的代码如下：<span style=\"white-space:pre\"><br></span><pre code_snippet_id=\"1568534\" snippet_file_name=\"blog_20160128_2_3441369\" code_snippet_id=\"1568534\" snippet_file_name=\"blog_20160128_2_3441369\" name=\"code\" class=\"html\">&lt;a href=&quot;http://www.xttblog.com&quot; target=&quot;_blank&quot; title=&quot;业余草&quot; class=&quot;panel_head&quot;&gt;我的个人网站&lt;/a&gt;\n&lt;br&gt;\n&lt;span class=&quot;panel_head&quot;&gt;QQ1群:&lt;/span&gt;135430763\n&lt;br&gt;\n&lt;span class=&quot;panel_head&quot;&gt;QQ2群:&lt;/span&gt;454796847\n&lt;br&gt;</pre><strong><img src=\"http://img.blog.csdn.net/20160128154224829?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"><br>3.播放音乐功能</strong><br><span style=\"white-space:pre\">	</span>这个功能主要找免费的mp3链接，然后添加&lt;audio&gt;标签。如我的做法：<span style=\"white-space:pre\"><br></span><pre code_snippet_id=\"1568534\" snippet_file_name=\"blog_20160128_3_7486767\" code_snippet_id=\"1568534\" snippet_file_name=\"blog_20160128_3_7486767\" name=\"code\" class=\"html\">&lt;audio src=&quot;http://sc.111ttt.com/up/mp3/125738/31A5E4F7BFDEAC3B3CFD7CA5D86E43C6.mp3&quot; autoplay=&quot;autoplay&quot;&gt;&lt;/audio&gt;</pre><span style=\"white-space:pre\">	</span>当然这种做法不可动态调整音乐。这时你可以添加一个&lt;iframe&gt;引入百度随身听音乐台。代码如下：<span style=\"white-space:pre\">	</span><pre code_snippet_id=\"1568534\" snippet_file_name=\"blog_20160128_4_7312826\" code_snippet_id=\"1568534\" snippet_file_name=\"blog_20160128_4_7312826\" name=\"code\" class=\"html\">&lt;iframe src=&quot;http://fm.baidu.com/?embed=ps&quot; style=&quot;display: none;&quot;&gt;&lt;/iframe&gt;</pre><strong><img src=\"http://img.blog.csdn.net/20160128154412142?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"><br>4.加入qq邮箱邮我功能</strong><br><span style=\"white-space:pre\">	</span>这个就不详细些了，给篇教程的地址：<a target=\"_blank\" target=\"_blank\" href=\"http://blog.csdn.net/hjl243632044/article/details/7216284\">http://blog.csdn.net/hjl243632044/article/details/7216284</a><br><strong><img src=\"http://img.blog.csdn.net/20160128154448985?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"><br>5.加入自定义广告展示位</strong><br><span style=\"white-space:pre\">	</span>这个可以自己收一些广告，做个左侧广告展示。做法如下：<span style=\"white-space:pre\"><br></span><pre code_snippet_id=\"1568534\" snippet_file_name=\"blog_20160128_5_8534325\" code_snippet_id=\"1568534\" snippet_file_name=\"blog_20160128_5_8534325\" name=\"code\" class=\"html\">&lt;a href=&quot;http://count.chanet.com.cn/click.cgi?a=434621&amp;d=89940&amp;u=&amp;e=&quot; target=&quot;_blank&quot; id=&quot;csdn_id_123456789_test&quot;&gt;\n&lt;script type=&quot;text/javascript&quot;&gt;\nfunction createImg(){\nvar img_parent = document.getElementById(&quot;csdn_id_123456789_test&quot;),\ntest_img = document.createElement(&quot;img&quot;);\ntest_img.setAttribute(&quot;src&quot;, &quot;http://file.chanet.com.cn/image.cgi?a=434621&amp;d=89940&amp;u=&amp;e=&quot;);\nimg_parent.appendChild(test_img);\n}\ncreateImg();\n&lt;/script&gt;\n&lt;/a&gt; </pre><span style=\"white-space:pre\"><img src=\"http://img.blog.csdn.net/20160128154525658?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"><br></span><strong>由于csdn对img的图片做了限制，不能是其他网站的。这里我们采用动态创建img的做法，绕过csdn的限制。</strong>当然你这样做会损害csdn的利益，骚年们还是不要这样做的好。<br><strong>6.加入微博功能</strong><br><span style=\"white-space:pre\">	</span>点击<a target=\"_blank\" target=\"_blank\" href=\"http://open.weibo.com/widget/bulkfollow.php\">http://open.weibo.com/widget/bulkfollow.php</a>找到一键关注，自己设置微博人物uid。将js代码添加到博客栏目内容中即可。代码如下：<span style=\"white-space:pre\"><br></span><pre code_snippet_id=\"1568534\" snippet_file_name=\"blog_20160128_6_9232436\" code_snippet_id=\"1568534\" snippet_file_name=\"blog_20160128_6_9232436\" name=\"code\" class=\"html\">&lt;script type=&quot;text/javascript&quot;&gt;document.write(\'&lt;iframe width=&quot;260&quot; height=&quot;489&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot; src=&quot;http://widget.weibo.com/relationship/bulkfollow.php?language=zh_cn&amp;uids=1642909335,1782515283&amp;wide=1&amp;color=C2D9F2,FFFFFF,0082CB,666666&amp;showtitle=1&amp;showinfo=1&amp;sense=0&amp;verified=1&amp;count=5&amp;refer=\'+encodeURIComponent(location.href)+\'&amp;dpc=1&quot;&gt;&lt;/iframe&gt;\')&lt;/script&gt;</pre><span style=\"white-space:pre\">	</span>或者找到微博秀，自己设置外观。然后复制嵌入代码，粘贴到博客栏目内容中即可。代码如下：<span style=\"white-space:pre\"><br></span><pre code_snippet_id=\"1568534\" snippet_file_name=\"blog_20160128_7_1882396\" code_snippet_id=\"1568534\" snippet_file_name=\"blog_20160128_7_1882396\" name=\"code\" class=\"html\">&lt;iframe width=&quot;100%&quot; height=&quot;550&quot; class=&quot;share_self&quot;  frameborder=&quot;0&quot; scrolling=&quot;no&quot; src=&quot;http://widget.weibo.com/weiboshow/index.php?language=&amp;width=0&amp;height=550&amp;fansRow=2&amp;ptype=1&amp;speed=0&amp;skin=1&amp;isTitle=1&amp;noborder=1&amp;isWeibo=1&amp;isFans=1&amp;uid=2410011900&amp;verifier=bce1c748&amp;dpc=1&quot;&gt;&lt;/iframe&gt;</pre>&nbsp; &nbsp;<img src=\"http://img.blog.csdn.net/20160128154716894?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"><br><span style=\"white-space: pre;\">	</span> 就扯这么多吧！欢迎大家关注我的博客，关注我的微信，如有疑问，请加qq群：454796847、135430763 共同进步！   \n', '2016-04-16 01:21:27', '11');
INSERT INTO `article` VALUES ('10107', '10003', 'log4j2.x日志按日期分隔', '\nlog4j2.x的日志在性能上有很大的提升，也被标识为下一代的异步日志管理系统。<br>项目组在使用的时候，发现日志没有按照日期进行文件分割。于是亲自上<a target=\"_blank\" target=\"_blank\" href=\"http://logging.apache.org/log4j/2.x/\">log4j2.x的官网</a>查看了部分文档。<br>按如下配置即可实现日志按日期进行分割：<pre name=\"code\" class=\"html\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration&gt;\n  &lt;Appenders&gt;\n  	&lt;!-- 配置日志输出文件名字     追加读写 --&gt;  \n    &lt;RollingFile name=&quot;taoge&quot; fileName=&quot;logs/taoge.log&quot; filePattern=&quot;logs/taoge.%d{yyyy-MM-dd}.log&quot; append=&quot;true&quot;&gt;\n    	&lt;!-- 输出格式 --&gt;  \n        &lt;PatternLayout pattern=&quot;[%l] [%t] [%-4r] [%d{yyyy-MM-dd HH:mm:ss,SSS}] [%p] \\: %m%n&quot;/&gt;\n        &lt;!-- 设置策略 --&gt;\n        &lt;Policies&gt;  \n        	&lt;!-- 基于时间的触发策略。该策略主要是完成周期性的log文件封存工作。有两个参数：\n				interval，integer型，指定两次封存动作之间的时间间隔。单位:以日志的命名精度来确定单位，\n					比如yyyy-MM-dd-HH 单位为小时，yyyy-MM-dd-HH-mm 单位为分钟\n				modulate，boolean型，说明是否对封存时间进行调制。若modulate=true，\n					则封存时间将以0点为边界进行偏移计算。比如，modulate=true，interval=4hours，\n					那么假设上次封存日志的时间为03:00，则下次封存日志的时间为04:00，\n					之后的封存时间依次为08:00，12:00，16:00\n			 --&gt;\n            &lt;TimeBasedTriggeringPolicy interval=&quot;1&quot; modulate=&quot;true&quot; /&gt;  \n        &lt;/Policies&gt;\n    &lt;/RollingFile&gt;\n  	&lt;!-- 标准输出 --&gt;\n    &lt;Console name=&quot;STDOUT&quot; target=&quot;SYSTEM_OUT&quot;&gt;\n      &lt;!-- 输出格式 --&gt;\n      &lt;PatternLayout pattern=&quot;[%l] [%t] [%-4r] [%d{yyyy-MM-dd HH:mm:ss,SSS}] [%p] \\: %m%n&quot;/&gt;\n    &lt;/Console&gt;\n  &lt;/Appenders&gt;\n  &lt;Loggers&gt;\n    &lt;!-- 配置记录器级别 --&gt;\n    &lt;Root level=&quot;debug&quot;&gt;\n    	&lt;AppenderRef ref=&quot;taoge&quot;/&gt;\n      	&lt;!-- 输出设置 --&gt;\n      	&lt;AppenderRef ref=&quot;STDOUT&quot;/&gt;\n    &lt;/Root&gt;\n  &lt;/Loggers&gt;\n&lt;/Configuration&gt;</pre>欢迎大家关注我的博客，如有疑问，请加qq群：454796847、135430763 共同进步！   \n', '2016-04-16 01:21:28', '0');
INSERT INTO `article` VALUES ('10108', '10003', '程序员，一个吃青春饭的行业', '\n<span style=\"white-space: pre;\">	</span>青春易老，容貌不再。程序员都会有这样的感叹。吃“青春饭”的行业挥霍的是年龄、体力和精力，赶在青春消逝之前，便要改弦易辙，另谋出路，吃着自己碗里的，看着别人锅里的。要想做到“步步高”，往往需要具有以下特征：注重学习修养，强调创新拓展，这些就逼着从业者要未雨绸缪。<br><span style=\"white-space:pre\">	</span><br><p><span style=\"white-space:pre\">	</span>程序员在外人看来，看似光鲜，背后却难掩尴尬。光鲜的背后是：<strong>找不到女朋友</strong>，<strong>青春不在</strong>，<strong>健康不在</strong>。</p><span style=\"white-space:pre\">	<br><span style=\"white-space: pre;\">	</span><img src=\"http://img.blog.csdn.net/20160121173206184?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"><br><span style=\"white-space: pre;\">	</span></span><br><span style=\"white-space:pre\">	</span>目前，大部分IT从业者的黄金岁月是在24岁-28岁。很多程序员在工作一段时间后就把自己的目标定位在系统分析员或创业的老板。国内90%的软件开发者年龄介于20岁至30岁之间。<br><p><span style=\"white-space:pre\">	</span>35岁以后就出现天花板。做到上面，经理或者更高级岗位越来越少，竞争越来越大，当然会碰到天花板。很少有IT公司有超过35岁的程序员。<br><span style=\"white-space: pre;\">	</span></p><span style=\"white-space:pre\">	</span>另外IT是不断需要学习的行业，知识体系更新很快，不学习就要被淘汰。<br><span style=\"white-space: pre;\">	</span><br><span style=\"white-space:pre\">	</span>IT行业的知识更新快，优胜劣汰也是非常残酷，不学习就会被淘汰。<br><br><span style=\"white-space:pre\">	</span>如果你到了35岁，那么可能会出现一些情况：<br><span style=\"white-space:pre\">	</span><strong>1.年龄过大，沟通障碍。</strong><br><span style=\"white-space:pre\">		</span>为什么这么说呢？因为年龄大的瞧不起年龄小的，年龄小的瞧不起年龄大的。年龄大的花3年时间学习一门新语言或者新框架，而年龄小的刚毕业就已经会了这门技术。<br><span style=\"white-space:pre\">	</span><strong>2.身体健康状况。</strong><br><span style=\"white-space:pre\">		</span>上次csdn社区聚会就有人提到过，没法和年轻人比，年轻人加班一天啥事没有，年龄大了，坐的时间久了，思想和精力就匮乏了。<br><span style=\"white-space:pre\">	</span><strong>3.薪资报酬。</strong><br><span style=\"white-space:pre\">		</span>年龄大了，经验老道，肯定想拿高工资。从公司角度来讲，这是不情愿的，公司宁愿多招几个年轻人，让他们多加加班。<br><p><span style=\"white-space: pre;\">	</span>就扯这么多吧！IT行业是不是吃青春饭的行业，以及程序员是不是五年十年如一日的对着电脑编程，一目了然。<br><span style=\"white-space: pre;\">	</span></p><span style=\"white-space:pre\">	</span>欢迎大家关注我的博客，<strong>左侧关注我的微博</strong>，喜欢的话，可以打赏！如有疑问，请加qq群：454796847、135430763 共同进步！   \n', '2016-04-16 01:21:28', '10');
INSERT INTO `article` VALUES ('10109', '10003', 'java字符编码转换', '\n<p>在开发的过程中，字符编码常常令我们头痛。经常会出现各种各样的乱码。下面就介绍java的编码转换和常见的乱码是使用什么样的编码去读取的：</p><p>先看一张图片：<img src=\"http://img.blog.csdn.net/20150716140508305?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"></p><p>在看看java中如何处理编码的转换：<pre name=\"code\" class=\"java\">package com.test;\n\n/**\n * 字符串编码转换\n * @author Herman.xiong\n * @date 2015年7月16日09:36:59\n * @version V3.0\n * @since Tomcat6.0,Jdk1.6\n * @copyright Copyright (c) 2015\n */\npublic class HttpServerDecoder {\n	public static void main(String[] args) throws Exception {\n		String str=&quot;欢迎加入请求群：454796847共同学习！&quot;;\n		System.out.println(str);\n		//转换成utf-8输出\n		System.out.println(new String(.getBytes(&quot;utf-8&quot;)));\n		//转换成gbk输出\n		System.out.println(new String(.getBytes(&quot;gbk&quot;)));\n		//将ISO-8859-1转换为utf-8\n		System.out.println(new String(str.getBytes(&quot;ISO-8859-1&quot;),&quot;utf-8&quot;));\n	}\n}\n</pre><br>欢迎大家关注我的博客！如有疑问,请加QQ群：454796847共同学习！</p>   \n', '2016-04-16 01:21:28', '0');
INSERT INTO `article` VALUES ('10110', '10003', 'AnunexpectederrorhasbeendetectedbyJavaRuntimeEnvir', '\n<a href=\"#\" class=\"bds_more\" data-cmd=\"more\" style=\"background-position:0 0 !important; background-image: url(http://bdimg.share.baidu.com/static/api/img/share/icons_0_16.png?v=d754dcc0.png) !important\"></a>\n<a href=\"#\" class=\"bds_qzone\" data-cmd=\"qzone\" title=\"分享到QQ空间\" style=\"background-position:0 -52px !important\"></a>\n<a href=\"#\" class=\"bds_tsina\" data-cmd=\"tsina\" title=\"分享到新浪微博\" style=\"background-position:0 -104px !important\"></a>\n<a href=\"#\" class=\"bds_tqq\" data-cmd=\"tqq\" title=\"分享到腾讯微博\" style=\"background-position:0 -260px !important\"></a>\n<a href=\"#\" class=\"bds_renren\" data-cmd=\"renren\" title=\"分享到人人网\" style=\"background-position:0 -208px !important\"></a>\n<a href=\"#\" class=\"bds_weixin\" data-cmd=\"weixin\" title=\"分享到微信\" style=\"background-position:0 -1612px !important\"></a>\n', '2016-04-16 01:21:28', '0');
INSERT INTO `article` VALUES ('10111', '10003', 'jQueryMobile自定义标签', '\n最近在规划产品国际化的需求，涉及到PC Web，移动Web，和各app。设计了多个版本的移动Web均不理想。<br>由于移动Web采用了jQuery Mobile框架，所以将切换语言放在哪个位置更合理进行了讨论。讨论的过程和多个方案我就不提了，先来看看最终效果：<br><span style=\"white-space:pre\">	<img src=\"http://img.blog.csdn.net/20160105171152406?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"></span><br>是不是感觉很经验，这里一开始尝试了多次，最终自定义了一个下拉选项，代码如下：<br><span style=\"white-space:pre\">	</span><pre name=\"code\" class=\"html\">&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n	&lt;title&gt;涛哥&lt;/title&gt;\n	&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=0&quot;&gt;\n	&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;\n	&lt;meta http-equiv=&quot;Expires&quot; content=&quot;0&quot;&gt;\n	&lt;meta http-equiv=&quot;Pragma&quot; content=&quot;no-cache&quot;&gt;\n	&lt;meta http-equiv=&quot;Cache-control&quot; content=&quot;no-cache, must-revalidate&quot;&gt;\n	&lt;meta http-equiv=&quot;Cache&quot; content=&quot;no-cache&quot;&gt;\n	&lt;link rel=&quot;stylesheet&quot; href=&quot;jQuery/jquery.mobile-1.4.4.min.css&quot; type=&quot;text/css&quot;&gt;\n	&lt;script type=&quot;text/javascript&quot; src=&quot;jQuery/jquery-1.8.3.min.js&quot;&gt;&lt;/script&gt;\n	&lt;script type=&quot;text/javascript&quot; src=&quot;jQuery/jquery.mobile-1.4.4.min.js&quot;&gt;&lt;/script&gt;\n	&lt;script type=&quot;text/javascript&quot; src=&quot;jQuery/jquery.cookie.js&quot;&gt;&lt;/script&gt;\n	&lt;script type=&quot;text/javascript&quot; src=&quot;jQuery/jquery.i18n.properties-min-1.0.9.js&quot;&gt;&lt;/script&gt;\n	&lt;style type=&quot;text/css&quot;&gt;\n		.comFooter{\n			position: absolute;  bottom: 0; left:0; height: 40px; width: 100%;\n		}\n	&lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n	&lt;div data-role=&quot;page&quot; id=&quot;pageWel&quot; data-title=&quot;涛哥&quot;&gt;\n		&lt;div data-role=&quot;header&quot; data-theme=&quot;b&quot;&gt;\n			&lt;a href=&quot;#&quot; data-role=&quot;button&quot; class=&quot;ui-btn-left&quot; data-icon=&quot;check&quot;&gt;测试&lt;/a&gt;\n			&lt;h1 class=&quot;title&quot; data-i18n=&quot;global_title&quot;&gt;\n				涛哥\n			&lt;/h1&gt;\n			&lt;!-- 具体代码 --&gt;\n		    &lt;a href=&quot;javascript:void(0);&quot; data-role=&quot;none&quot; aria-haspopup=&quot;true&quot; class=&quot;ui-btn-right&quot;&gt;\n		    	&lt;select class=&quot;hupu_i18n_select&quot; data-icon=&quot;check&quot; data-role=&quot;button&quot; data-inline=&quot;false&quot; data-native-menu=&quot;false&quot;&gt;\n			        &lt;option value=&quot;zh-CN&quot;&gt;简体中文&lt;/option&gt;\n    				&lt;option value=&quot;zh-TW&quot;&gt;繁體中文&lt;/option&gt;\n    				&lt;option value=&quot;en&quot;&gt;English&lt;/option&gt;\n    				&lt;option value=&quot;ja&quot;&gt;日本語の&lt;/option&gt;\n			    &lt;/select&gt;\n		    &lt;/a&gt;\n			&lt;/div&gt;\n		&lt;div role=&quot;main&quot; class=&quot;ui-content&quot;&gt;\n			欢迎大家关注我的博客，如有疑问，请加qq群：454796847、135430763 共同进步！\n		&lt;/div&gt;\n		&lt;div data-role=&quot;footer&quot; data-theme=&quot;b&quot; class=&quot;comFooter&quot;&gt;\n			&lt;span style=&quot;height: 40px; line-height: 40px; text-align: center; display: block; font-size: 9px;&quot;&gt;Copyright&copy;2013-2015 涛哥 All Rights Reserved 123456&lt;/span&gt;\n		&lt;/div&gt;\n	&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;</pre><br>看起来还是很简单的，其中具体国际化代码我就不贴了！欢迎大家关注我的博客，如有疑问，请加qq群：454796847、135430763 共同进步！   \n', '2016-04-16 01:21:28', '3');
INSERT INTO `article` VALUES ('10112', '10003', '使用mina解析http协议的使用', '\n在使用mina的过程中，我们通常会自定义各种报文，以使用于自己的业务。今天就为大家带来一款类似http协议的解码过程。<br>mina有自带的解析http数据包的解码类。可以使用maven配置一下内容获取源码：<br><pre name=\"code\" class=\"html\">&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.mina&lt;/groupId&gt;\n    &lt;artifactId&gt;mina-http&lt;/artifactId&gt;\n    &lt;version&gt;3.0.0-M2&lt;/version&gt;\n&lt;/dependency&gt;</pre>或者下载mina的源码包，查看org.apache.mina.http.HttpServerDecoder类。下面为自己写的解析方法：<pre name=\"code\" class=\"java\">package com.server;\n\nimport java.lang.reflect.Method;\nimport java.nio.charset.Charset;\n\nimport org.apache.commons.lang3.StringUtils;\nimport org.apache.log4j.Logger;\nimport org.apache.mina.core.buffer.IoBuffer;\nimport org.apache.mina.core.session.IoSession;\nimport org.apache.mina.filter.codec.CumulativeProtocolDecoder;\nimport org.apache.mina.filter.codec.ProtocolDecoderOutput;\nimport org.apache.mina.filter.codec.textline.LineDelimiter;\n\n/**\n * 解码HTTP协议类\n * @author Herman.xiong\n * @date 2015年7月16日09:36:59\n * @version V3.0\n * @since Tomcat6.0,Jdk1.6\n * @copyright Copyright (c) 2015\n */\npublic class HttpServerDecoder extends CumulativeProtocolDecoder {\n	private static final Logger log = Logger.getLogger(HttpServerDecoder.class);\n\n	private LineDelimiter codecLineDelimiter = null;\n	private Charset charset = null;\n	private static final String MessageLength = &quot;MessageLength&quot;;\n\n	public HttpServerDecoder(Charset charset, LineDelimiter codecLineDelimiter) {\n		this.charset = charset;\n		this.codecLineDelimiter = codecLineDelimiter;\n	}\n\n	public Charset getCharset() {\n		return charset;\n	}\n\n	public void setCharset(Charset charset) {\n		this.charset = charset;\n	}\n\n	public LineDelimiter getCodecLineDelimiter() {\n		return codecLineDelimiter;\n	}\n\n	public void setCodecLineDelimiter(LineDelimiter codecLineDelimiter) {\n		this.codecLineDelimiter = codecLineDelimiter;\n	}\n	\n	public static void main(String [] args){\n		IoBuffer buf = IoBuffer.allocate(100).setAutoExpand(true);\n		Charset charset = Charset.forName(&quot;UTF-8&quot;);\n		CharsetEncoder ce=charset.newEncoder();\n		HttpServerDecoder socket=new HttpServerDecoder(Charset.forName(&quot;UTF-8&quot;),LineDelimiter.CRLF);\n		try{\n			System.out.println(&quot;测试数据，测试数据&quot;.getBytes(charset).length);\n			buf.putString(&quot;MessageMethod:UserAction&quot;, ce);\n			buf.putString(LineDelimiter.CRLF.getValue(), ce);\n			buf.putString(&quot;MessageType:GET&quot;, ce);\n			buf.putString(LineDelimiter.CRLF.getValue(), ce);\n			buf.putString(&quot;Content-Type:text/html; charset=iso-8859-1&quot;, ce);\n			buf.putString(LineDelimiter.CRLF.getValue(), ce);\n			buf.putString(&quot;Connection:keep-alive&quot;, ce);\n			buf.putString(LineDelimiter.CRLF.getValue(), ce);\n			buf.putString(&quot;Keep-Alive:200&quot;, ce);\n			buf.putString(LineDelimiter.CRLF.getValue(), ce);			\n			buf.putString(&quot;CompressType:jzip&quot;, ce);\n			buf.putString(LineDelimiter.CRLF.getValue(), ce);\n			buf.putString(&quot;Params:id=1&amp;uid=2&amp;name=3&quot;, ce);\n			buf.putString(LineDelimiter.CRLF.getValue(), ce);\n			buf.putString(&quot;accept-ranges:bytes&quot;, ce);\n			buf.putString(LineDelimiter.CRLF.getValue(), ce);\n			buf.putString(&quot;DateTime:DateTime&quot;, ce);\n			buf.putString(LineDelimiter.CRLF.getValue(), ce);\n			buf.putString(&quot;MessageLength:27&quot;, ce);\n			buf.putString(LineDelimiter.CRLF.getValue(), ce);\n			//body\n			buf.putString(&quot;测试数据，测试数据&quot;, ce);\n			buf.putString(LineDelimiter.CRLF.getValue(), ce);\n			buf.flip();\n			System.out.println(&quot;输出的内容为：&quot;+buf.getString(charset.newDecoder()));\n			buf.flip();\n			socket.doDecode(null,buf,null);\n		}catch(Exception e){\n			e.printStackTrace();\n		}\n	}\n	\n	\n	/**\n	 * 数据包解码\n	 */\n	protected boolean doDecode(IoSession session, IoBuffer in, ProtocolDecoderOutput out) throws Exception {\n		Map&lt;String,Object&gt; map = (Map&lt;String,Object&gt;) session.getAttribute(&quot;pocket&quot;);\n		IoBuffer buf = (IoBuffer)session.getAttribute(&quot;pocket_state&quot;);\n		if(null ==buf)\n			buf = IoBuffer.allocate(100).setAutoExpand(true).setAutoShrink(true);\n		if(null == map)\n			map = new HashMap&lt;String,Object&gt;();\n		Integer len = 0;\n		while (in.hasRemaining()) {\n			len = 0;\n            byte b = in.get();\n            switch (b){\n                case \'\\r\':\n                    buf.put(b);\n                    break;\n                case \'\\n\':\n                	buf.put(b);\n                	buf.flip();\n                    String msg=buf.getString(charset.newDecoder());\n					String[] arr = msg.split(&quot;:&quot;);\n                    if(StringUtils.isEmpty(map.get(&quot;MessageLength&quot;))){\n    					if (2 == arr.length &amp;&amp; StringUtils.isNotEmpty(arr[0]) &amp;&amp; StringUtils.isNotEmpty(arr[1])) {\n							map.put(arr[0],arr[1]);\n    					} else {\n    						log.error(&quot;收到的数据包中存在非法内容!&quot;);\n    					}\n    					if(Constant.HUPU_ZERO.equals(map.get(&quot;MessageLength&quot;))){\n                        	out.write(map);\n    						if(in.position()==in.limit()){\n    							session.setAttribute(&quot;pocket_state&quot;, null);\n    							session.setAttribute(&quot;pocket&quot;,null);\n    							return true;\n    						}\n    						map = new HashMap&lt;String,Object&gt;();\n    					}\n                    }else{\n						map.put(StringUtils.isEmpty(map.get(&quot;MessageContent&quot;))?msg:map.get(&quot;MessageContent&quot;)+msg);\n						len=((null == map.get(&quot;MessageContent&quot;)) ? StringUtils.EMPTY : String.valueOf(map.get(&quot;MessageContent&quot;))).getBytes(charset).length;\n						if(len==Integer.parseInt(map.get(&quot;MessageContent&quot;))+2){\n							out.write(map);\n							if(in.position()==in.limit()){\n								session.setAttribute(&quot;pocket_state&quot;, null);\n								session.setAttribute(&quot;pocket&quot;,null);\n								return true;\n							}\n						}\n						map = new HashMap&lt;String,Object&gt;();\n					}\n					buf.clear();\n                    break;\n                default:\n                	buf.put(b);\n            }\n        }\n		if(StringUtils.isEmpty(map.get(&quot;MessageLength&quot;)) || len&lt;Integer.parseInt(map.get(&quot;MessageLength&quot;))){\n			session.setAttribute(&quot;pocket&quot;,map);\n			session.setAttribute(&quot;pocket_state&quot;, buf);\n		}\n		return false;\n	}\n	\n}</pre>欢迎大家关注我的博客！如有疑问,请加QQ群：454796847共同学习！   \n', '2016-04-16 01:21:29', '0');
INSERT INTO `article` VALUES ('10113', '10003', '华为交换机常用命令', '\n<p>总结了一下常用的华为交换机常用命令如下：</p><p><strong>1.查看<span style=\"font-family:Times New Roman;\">Linux</span><span style=\"font-family:宋体;\">下查看端口状态</span></strong></p><p><pre name=\"code\" class=\"plain\">root@root:~# netstat -an|grep -E &quot;6002|6003&quot;</pre><p><p><strong>2.<span style=\"font-family:宋体;\">华为交换机显示当前配置</span></strong></p><p><pre name=\"code\" class=\"plain\">&lt;huawei&gt;display current-configuration\n或者简写\n&lt;huawei&gt;display cur\n3.显示端口信息\n&lt;huawei&gt;display interface  \n或者简写\n&lt;huawei&gt;dis int</pre><p><p><strong>4.显示当前所有<span style=\"font-family:Times New Roman;\">vlan</span></strong></p><p><pre name=\"code\" class=\"plain\">&lt;huawei&gt;display vlan\n或者简写\n&lt;huawei&gt;dis vl</pre><p><p>注意：所有简写命令是补全命令的唯一代表即可</p><p><strong>5.显示版本信息</strong></p><p><pre name=\"code\" class=\"plain\">&lt;huawei&gt;display version</pre><p><p><strong>6.修改交换机命令</strong></p><p><pre name=\"code\" class=\"plain\">&lt;huawei&gt;sysname huawei</pre><p><p><strong>7.进入接口视图</strong></p><p><pre name=\"code\" class=\"plain\">[huawei]interface GigabitEthernet0/0/12\n[huawei-GigabitEthernet0/0/12]</pre><p><p><strong>8.<span style=\"font-family:宋体;\">设置端口的工作模式</span></strong></p><p><pre name=\"code\" class=\"plain\"><p>Trunk&nbsp;<span style=\"font-family: 宋体;\">模式</span></p><p>[huawei-GigabitEthernet0/0/12]port&nbsp;link-type&nbsp;trunk</p><p>Access<span style=\"font-family: 宋体;\">模式</span></p><p>[huawei-GigabitEthernet0/0/12]port&nbsp;link-type&nbsp;access</p><p>Hybrid<span style=\"font-family: 宋体;\">模式</span></p>[huawei-GigabitEthernet0/0/12]port link-type hybrid</pre><p><p><strong>9.<span style=\"font-family:宋体;\">改变端口的</span><span style=\"font-family:Times New Roman;\">vlan</span></strong></p><p><pre name=\"code\" class=\"plain\">[huawei-GigabitEthernet0/0/12]port default vlan 3</pre><p><p><strong>10.<span style=\"font-family:宋体;\">关闭端口</span></strong></p><p><pre name=\"code\" class=\"plain\">[huawei-GigabitEthernet0/0/12]shutdown</pre><p><p><strong>11.<span style=\"font-family:宋体;\">激活端口</span></strong></p><pre name=\"code\" class=\"plain\">[huawei-GigabitEthernet0/0/12]undo shutdown</pre><p><strong>12.<span style=\"font-family:宋体;\">保存配置文件</span></strong></p><pre name=\"code\" class=\"plain\">[huawei]display saved-configuration </pre><p><span style=\"font-weight: bold;\">13.</span><span style=\" font-family: 宋体;\"><strong>进入</strong></span><span style=\" font-family: \'Times New Roman\';\"><strong>vlan</strong></span><span style=\" font-family: 宋体;\"><strong>视图</strong></span></p><pre name=\"code\" class=\"plain\">&lt;huawei&gt;display vlan 3</pre><p><span style=\"font-weight: bold;\">14.</span><span style=\" font-family: 宋体;\"><strong>进入系统视图</strong></span></p><pre name=\"code\" class=\"plain\">&lt;huawei&gt;system-view</pre><p><span style=\"font-weight: bold;\">15.</span><span style=\" font-family: 宋体;\"><strong>进入虚拟终端</strong></span></p><pre name=\"code\" class=\"plain\">[huawei]user-interface vty 0 4</pre><p><strong>16.<span style=\"font-family:宋体;\">设置口令模式</span></strong></p><pre name=\"code\" class=\"plain\">[huawei-ui-vty0-4]authentication-mode password taoge</pre><p><strong>17.<span style=\"font-family:宋体;\">设置口令</span></strong></p><p><span style=\"background-color: rgb(240, 240, 240);\">[huawei-ui-vty0-4]set authentication password taotao</span></p><p><span style=\"font-weight: bold;\">18.</span><span style=\" font-family: 宋体;\"><strong>设置用户级别</strong></span></p><p><span style=\"background-color: rgb(240, 240, 240);\">[huawei-ui-vty0-4]user privilege level 3</span></p><p><span style=\"font-weight: bold;\">19.</span><span style=\" font-family: 宋体;\"><strong>创建</strong></span><span style=\" font-family: \'Times New Roman\';\"><strong>vlan</strong></span></p><pre name=\"code\" class=\"plain\">[huawei]display vlan 121\nError: The VLAN does not exist.\n提示当前vlan 121不存在\n[huawei]vlan 121\n[huawei-vlan121]\nVlan 121创建成功</pre><p><span style=\"font-weight: bold;\">20.</span><span style=\" font-family: 宋体;\"><strong>在</strong></span><span style=\" font-family: \'Times New Roman\';\"><strong>vlan</strong></span><span style=\" font-family: 宋体;\"><strong>中加入端口</strong></span></p><pre name=\"code\" class=\"plain\">[huawei-vlan121]port GigabitEthernet0/0/12</pre><p><strong>21.<span style=\"font-family:宋体;\">添加</span><span style=\"font-family:Times New Roman;\">vlan</span><span style=\"font-family:宋体;\">描述</span></strong></p><pre name=\"code\" class=\"plain\">[huawei-vlan121]description taotao.test</pre><p><strong>22.<span style=\"font-family:宋体;\">删除</span><span style=\"font-family:Times New Roman;\">vlan</span><span style=\"font-family:宋体;\">描述</span></strong></p><pre name=\"code\" class=\"plain\">[huawei-vlan121]description \'\'</pre><p><span style=\"font-weight: bold;\">23.</span><span style=\" font-family: 宋体;\"><strong>退出</strong></span><span style=\" font-family: \'Times New Roman\';\"><strong>vlan</strong></span><span style=\" font-family: 宋体;\"><strong>视图</strong></span></p><pre name=\"code\" class=\"plain\">[huawei-vlan121]quit</pre><p>具体命令还与型号有关,好了就到这里吧！欢迎大家关注我的博客，如有疑问，请加qq群：454796847、135430763 共同进步！</p>   \n', '2016-04-16 01:21:29', '1');
INSERT INTO `article` VALUES ('10114', '10003', '作为程序员我给csdn博客添加打赏功能', '\n<strong>作为程序员我给csdn博客添加打赏功能</strong><br><br>&nbsp;&nbsp; &nbsp;前几天在专家微信群里提到c币太多，无法消费的问题，就提出了博客打赏功能。<br><br>&nbsp;&nbsp; &nbsp;目前我们csdn的c币除了兑换论坛积分，下载积分，c币商城，csdn学院外几乎没有可消费的地方了。现在感觉博客没有打赏功能是不是有些遗憾？<br>&nbsp;&nbsp; &nbsp;<br>&nbsp;&nbsp; &nbsp;c币也就是一个虚拟币，由csdn为大家提供。详情点击：<a target=\"_blank\" target=\"_self\" href=\"http://blog.csdn.net/csdnproduct/article/details/40372423\">公告</a>。看到这里，你发现c币出来一年了，还是没有太多的用武之地。连我都为csdn感到着急了！<br>&nbsp;&nbsp; &nbsp;<br>&nbsp;&nbsp; &nbsp;具体打赏功能的产品现在有很多。微信公众号，支付宝生活圈，微博等一些自媒体都具有，并且在加大推广。就连百度都说打赏具有革命性。<br>&nbsp;&nbsp; &nbsp;<br>&nbsp;&nbsp; &nbsp;打赏功能一方面能刺激大家积极写出高质量的博客，也能增加csdn的用户数。毕竟“比第一更难的是保持第一”，csdn不要让广大的用户流失才是最重要的。<br>&nbsp;&nbsp; &nbsp;<br>&nbsp;&nbsp; &nbsp;大家都积极的进行c币充值，互相打赏，c币流动性增加，拥有交易才会具有价值。这样你情我愿的想法是不是很完美！<br>&nbsp;&nbsp; &nbsp;<br>&nbsp;&nbsp; &nbsp;当然还可以增加一些其他的<strong>转赠功能</strong>，<strong>借条功能</strong>。不仅仅是博客需要这样的功能，论坛也可以有的哦。<br>&nbsp;&nbsp; &nbsp;<br>&nbsp;&nbsp; &nbsp;不要谢我，我就是这么天真！这么的无私，为csdn提供宝贵的意见！如果你有更好的想法，请留言，大家互相评论，思想碰撞，造就更好的未来！<br>&nbsp;&nbsp; &nbsp;<br>&nbsp;&nbsp; &nbsp;原标题：<strong><span style=\"color:#990000;\">《给csdn的一封信》</span></strong>。(后来我觉得不够醒目，就改了)<br><br>欢迎大家关注我的博客，如有疑问，请加qq群：454796847、135430763 共同进步！   \n', '2016-04-16 01:21:29', '8');
INSERT INTO `article` VALUES ('10115', '10003', '几行代码搞定java生成解析二维码功能', '\n<p>最近公司要求扫描二维码和生成二维码的功能。而群里部分网友也提到了。我这里就写了一个demo，和大家分享。代码很简介，希望大家能够喜欢。</p><p>网友表示在网上搜索了很多，发现不是代码不全，就是jar不匹配。</p><p>我这里共享了一个zxing的2.2版本的例子，也提供了下载地址。实现代码如下：</p><p><pre name=\"code\" class=\"java\">package com.herman.test;\n\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport javax.imageio.ImageIO;\n\nimport com.google.zxing.BarcodeFormat;\nimport com.google.zxing.BinaryBitmap;\nimport com.google.zxing.DecodeHintType;\nimport com.google.zxing.EncodeHintType;\nimport com.google.zxing.MultiFormatReader;\nimport com.google.zxing.MultiFormatWriter;\nimport com.google.zxing.NotFoundException;\nimport com.google.zxing.WriterException;\nimport com.google.zxing.client.j2se.BufferedImageLuminanceSource;\nimport com.google.zxing.client.j2se.MatrixToImageWriter;\nimport com.google.zxing.common.HybridBinarizer;\nimport com.google.zxing.qrcode.decoder.ErrorCorrectionLevel;\n\n/**\n * 二维码工具类\n * @author Herman.Xiong\n * @date 2015-7-10 上午10:52:15\n * @version V3.0\n * @since jdk 1.6,tomcat 6.0\n */\npublic class ZxingUtil {\n	private static final Map&lt;EncodeHintType, ErrorCorrectionLevel&gt; encodeMap = new HashMap&lt;EncodeHintType, ErrorCorrectionLevel&gt;();\n	private static final Map&lt;DecodeHintType, ErrorCorrectionLevel&gt; decodeMap=new HashMap&lt;DecodeHintType, ErrorCorrectionLevel&gt;();\n	private static final String charset=&quot;UTF-8&quot;,format=&quot;png&quot;;\n	private static final int size=150;\n	private ZxingUtil() {}\n\n	/**\n	 * 生成二维码图片\n	 * @author Herman.Xiong\n	 * @date 2015-7-10 上午10:26:33\n	 * @param file\n	 * @throws WriterException\n	 * @throws IOException\n	 */\n	public static void createQRCode(String data, File file)\n			throws WriterException, IOException {\n		MatrixToImageWriter.writeToFile(new MultiFormatWriter().encode(\n				new String(data.getBytes(charset), charset),\n				BarcodeFormat.QR_CODE, size, size, encodeMap), format, file);\n	}\n\n	/**\n	 * 读取二维码信息\n	 * @author Herman.Xiong\n	 * @date 2015-7-10 上午10:25:58\n	 * @param filePath 二维码图片路径\n	 * @return\n	 * @throws FileNotFoundException\n	 * @throws IOException\n	 * @throws NotFoundException\n	 */\n	public static String readQRCode(String filePath)\n			throws FileNotFoundException, IOException, NotFoundException {\n		return new MultiFormatReader().decode(new BinaryBitmap(new HybridBinarizer(new BufferedImageLuminanceSource(ImageIO.read(new FileInputStream(filePath))))),decodeMap).getText();\n	}\n	\n	public static void main(String [] arg){\n		try{\n			createQRCode(&quot;http://blog.csdn.net/xmtblog&quot;, new File(&quot;D:\\\\111.png&quot;));\n			System.out.println(readQRCode(&quot;D:\\\\111.png&quot;));\n			//源码下载地址：http://download.csdn.net/detail/xmt1139057136/8886473\n			//欢迎大家关注我的博客！如有疑问,请加QQ群：454796847共同学习！\n		}catch(Exception e){\n			e.printStackTrace();\n		}\n	}\n}</pre>运行效果如下：<img src=\"http://img.blog.csdn.net/20150710111532072?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"><br>欢迎大家关注我的博客！如有疑问,请加QQ群：454796847共同学习！<br></p><p>源码下载地址：<a target=\"_blank\" href=\"http://download.csdn.net/detail/xmt1139057136/8886473\" target=\"_blank\">http://download.csdn.net/detail/xmt1139057136/8886473</a></p>   \n', '2016-04-16 01:21:29', '0');
INSERT INTO `article` VALUES ('10116', '10003', 'java常见的几种内存溢出和解决方案', '\n项目组最近在开发中经常会出现一些意想不到的内存溢出问题。下面我就说说我们常见的几种内存溢出吧！<br><strong>1.JVM Heap（堆）溢出：java.lang.OutOfMemoryError: Java heap space</strong><br>JVM在启动的时候会自动设置JVM Heap的值， 可以利用JVM提供的-Xmn -Xms -Xmx等选项可进行设置。Heap的大小是Young Generation 和Tenured Generaion 之和。在JVM中如果98%的时间是用于GC,且可用的Heap size 不足2%的时候将抛出此异常信息。<br>解决方法：手动设置JVM Heap（堆）的大小。<br><strong>2.PermGen space溢出： java.lang.OutOfMemoryError: PermGen space</strong><br>PermGen space的全称是Permanent Generation space,是指内存的永久保存区域。为什么会内存溢出，这是由于这块内存主要是被JVM存放Class和Meta信息的，Class在被Load的时候被放入PermGen space区域，它和存放Instance的Heap区域不同，sun的 GC不会在主程序运行期对PermGen space进行清理，所以如果你的APP会载入很多CLASS的话，就很可能出现PermGen space溢出。一般发生在程序的启动阶段。<br>解决方法： 通过-XX:PermSize和-XX:MaxPermSize设置永久代大小即可。<br><strong>3.栈溢出： java.lang.StackOverflowError : Thread Stack space</strong><br>栈溢出了，JVM依然是采用栈式的虚拟机，这个和C和Pascal都是一样的。函数的调用过程都体现在堆栈和退栈上了。调用构造函数的 “层”太多了，以致于把栈区溢出了。 通常来讲，一般栈区远远小于堆区的，因为函数调用过程往往不会多于上千层，而即便每个函数调用需要 1K的空间（这个大约相当于在一个C函数内声明了256个int类型的变量），那么栈区也不过是需要1MB的空间。通常栈的大小是1-2MB的。通俗一点讲就是单线程的程序需要的内存太大了。 通常递归也不要递归的层次过多，很容易溢出。<br>解决方法：1：修改程序。2：通过 -Xss: 来设置每个线程的Stack大小即可。<br><strong>4.but has failed to stop it. This is very likely to create a memory leak.</strong><br>这一般是启动程序时一些定时器或其他正在操作的线程还没有停掉造成的。<br>解决方法：实现ServletContextListener的监听，在contextDestroyed方法中进行关闭。<br><strong>5. 所以Server容器启动的时候我们经常关心和设置JVM的几个参数如下：</strong><br>-Xms：java Heap初始大小， 默认是物理内存的1/64。<br>-Xmx：ava Heap最大值，不可超过物理内存。<br>-Xmn：young generation的heap大小，一般设置为Xmx的3、4分之一 。增大年轻代后,将会减小年老代大小，可以根据监控合理设置。<br>-Xss：每个线程的Stack大小，而最佳值应该是128K,默认值好像是512k。<br>-XX:PermSize：设定内存的永久保存区初始大小，缺省值为64M。<br>-XX:MaxPermSize：设定内存的永久保存区最大大小，缺省值为64M。<br>-XX:SurvivorRatio：Eden区与Survivor区的大小比值,设置为8,则两个Survivor区与一个Eden区的比值为2:8,一个Survivor区占整个年轻代的1/10<br>-XX:+UseParallelGC：F年轻代使用并发收集,而年老代仍旧使用串行收集.<br>-XX:+UseParNewGC：设置年轻代为并行收集,JDK5.0以上,JVM会根据系统配置自行设置,所无需再设置此值。<br>-XX:ParallelGCThreads：并行收集器的线程数，值最好配置与处理器数目相等 同样适用于CMS。<br>-XX:+UseParallelOldGC：年老代垃圾收集方式为并行收集(Parallel Compacting)。<br>-XX:MaxGCPauseMillis：每次年轻代垃圾回收的最长时间(最大暂停时间)，如果无法满足此时间,JVM会自动调整年轻代大小,以满足此值。<br>-XX:+ScavengeBeforeFullGC：Full GC前调用YGC,默认是true。<br><p>实例如：JAVA_OPTS=”-Xms4g -Xmx4g -Xmn1024m -XX:PermSize=320M -XX:MaxPermSize=320m -XX:SurvivorRatio=6″</p><p><strong>好了就到这里吧！欢迎大家关注我的博客，如有疑问，请加qq群：454796847、135430763 共同进步！</strong><br></p>   \n', '2016-04-16 01:21:29', '0');
INSERT INTO `article` VALUES ('10117', '10003', '论程序员的取财之道', '\n就在这两天，世界互联网大会在乌镇隆重召开，IT圈可是热闹极了。各大老在谈论互联网的同时，也谈论了属于我们的机会。特摘录了下面3句话送给大家。<br><br><br><span style=\"color:#666666;\"><u>习主席说：“赚不到钱，并不是没钱可赚，而是你不在赚钱的圈子内。<br>马云说：“成不了富人，并不是不能变富，而是没有富人的思维。”<br>我们不缺机会，缺的是了解机会的意愿，判断机会的眼光，尝试机会的勇气，坚持机会的恒心以及相信自己的信念。</u></span><br><span style=\"white-space:pre\">	</span><br><strong>抢购商机</strong><br><br><br><span style=\"white-space:pre\">	</span>现在每次有抢购机会都有黄牛存在。以前抢购火车票的黄牛现在没了机会，但他们又出现在各大团购网站上。<br><span style=\"white-space:pre\">	</span>前段时间的淘宝众筹上的迅雷赚钱宝，非常火，淘宝上搜索一下立马就出现代购，代抢的了。这就是商机。一个简单的程序，加上高配的电脑，和优质的带宽。搞定普通用户还是不成问题的。<br><span style=\"white-space:pre\">	</span>也有用户一次抢购很多，然后高价在淘宝上卖。赚些差价。这虽然是一种商机，但却是我痛恨的，我深受其害。<br><span style=\"white-space:pre\">	</span><br><strong>爬虫商机</strong><br><span style=\"white-space:pre\">	</span><br><span style=\"white-space:pre\">	</span>自从有了互联网，盗版的东西就非常多。现在网络小说，网络写手都很赚钱。程序员写一个爬虫，把别人写的爬出来，放到自己的“圈里”，赚黑钱。<br><span style=\"white-space:pre\">	</span>这种做法我也是很痛恨的，但是没办法，时代造就了机会。<br><span style=\"white-space:pre\">	</span><br><strong>自己建站赚钱</strong><br><span style=\"white-space:pre\">	</span><br><span style=\"white-space:pre\">	</span>对程序员来说，自己创建一个网站很简单的。主要是内容来源，可以自己写技术博客，资讯博客，科技博客等，当你的浏览器达到一定的程度。<br><span style=\"white-space:pre\">	</span>可以使用百度广告联盟，阿里妈妈广告联盟等加入广告赚钱。这种赚钱方式干净，并且盈利也很可观。<br><span style=\"white-space:pre\">	</span><br><strong>接私活赚钱</strong><br><br><br><span style=\"white-space:pre\">	</span>程序员可以上猪八戒网站接一些自己可以做的私活进行赚钱。但是一定要谈好需求，如果一个很小的需求，你理解错了，那么花更多的时间，就不划算了。<br><span style=\"white-space:pre\">	</span><br><strong>录制视频赚钱</strong><br><br><br><span style=\"white-space:pre\">	</span>现在各大在线视频网站很火，再加上北京宣布的，雾霾停课等方案，在线视频网络越来越火，程序员可以录制一些有价值的教学视频，发布到csdn学院等，赚取利润分成。<br><span style=\"white-space:pre\">	</span><br><strong>成立外包公司赚钱</strong><br><span style=\"white-space:pre\">	</span><br><span style=\"white-space:pre\">	</span>这种做法还是有一定难度的。不是人人都可以实现的。就是程序员自己开一家公司，招聘一些程序员，外派到其他公司干活，赚取利益。自己公司其实就是一个空壳。<br><p><br></p><p><span style=\"white-space:pre\"><strong>外出培训赚钱</strong><br><span style=\"white-space:pre\">	</span><br><span style=\"white-space:pre\">	</span>我就经常收到很多外出培训的邀请，这种方式只能赚一些小钱，没有持续的盈利能力。	</span></p><p><br></p><p>当然还有更多的商机，写书(这种其实不太赚钱),比别人更容易创业，什么5毛党，刷浏览量，刷评论，刷用户数，火车共享Wifi等我这里就不在过多描述了。最后我强调一句话，这些灰色产业链，我是坚决反对的！</p>我觉得这个标题不太好，请大家帮忙想个好点的标题。<br><br><br>欢迎大家关注我的博客，如有疑问，请加qq群：454796847、135430763 共同进步！   \n', '2016-04-16 01:21:29', '19');
INSERT INTO `article` VALUES ('10118', '10003', '网页固定侧栏的做法', '\n<p>固定侧边的做法有很多种，今天为大家介绍一种非常简单的做法。整个html文档只有23行代码就搞定了。</p><p>网上也有很多做法，但是都太过复杂，一大堆代码。而且有的很采用一些jquery的一些插件。</p><p>侧栏的做法和顶部、页脚都大致雷同。掌握其中的一种，其他的都很容易实现。常见的例子有：新浪微博的菜单栏，新浪体育的右侧二维码扫描等功能都是这样的实现。</p><p>这种固定特定部位，而不随滚动条滚动的做法，见下面代码：</p><p><pre name=\"code\" class=\"html\">&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n	&lt;head&gt;\n		&lt;title&gt;测试&lt;/title&gt;\n		&lt;style&gt;\n			#left{\n				position:fixed;\n				top:100px;\n				right:0px;\n			}\n			.content{\n				height:1700px;\n				border:1px solid red;\n			}\n		&lt;/style&gt;\n	&lt;/head&gt;&lt;!-- 欢迎大家关注我的博客！如有疑问,请加QQ群：454796847共同学习！&nbsp;--&gt;\n	&lt;body&gt;\n		&lt;div id=&quot;left&quot;&gt;\n			&lt;img src=&quot;1.png&quot;/&gt;\n		&lt;/div&gt;\n		&lt;div class=&quot;content&quot;&gt;&lt;/div&gt;\n	&lt;/body&gt;\n&lt;/html&gt;</pre>运行效果如下：<img src=\"http://img.blog.csdn.net/20150709150953464?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\">欢迎大家关注我的博客！如有疑问,请加QQ群：454796847共同学习！&nbsp;<br><br></p>   \n', '2016-04-16 01:21:30', '0');
INSERT INTO `article` VALUES ('10119', '10003', '关于java获取本地ip的几种方法', '\n关于java获取本地ip的几种方法<br>1.获取本地ip的方法<span style=\"white-space:pre\">	</span><pre name=\"code\" class=\"java\">System.out.println(InetAddress.getLocalHost().getHostAddress());</pre>2.域名解析ip的方法<span style=\"white-space:pre\"><br></span><pre name=\"code\" class=\"java\">System.out.println(InetAddress.getByName(&quot;www.sina.com.cn&quot;));</pre>3.获取本地出口ip的方法(局域网NAT或本地找交换机出口ip的方法)<br><span style=\"white-space:pre\">	</span>建立通讯TCP，telnet，mina通讯等。<br><pre name=\"code\" class=\"java\">Socket client = new Socket(&quot;192.168.6.8&quot;, 80);\nSystem.out.println(client.getInetAddress().getHostAddress());</pre><p>4.获取本地的互联网ip的方法</p><span style=\"white-space:pre\">	</span>百度搜索输入ip，结果截图如下：<img src=\"http://img.blog.csdn.net/20150916173457159?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"><br><span style=\"white-space:pre\">	</span>或者自己写http请求http://www.ip138.com/网站就会返回你的互联网ip<br>5.java通过管道runtime调用cmd获取ip<br><p>6.其他使用jndi的方式获取ip</p><p>好了就到这里吧！欢迎大家关注我的博客，如有疑问，请加qq群：454796847、135430763 共同进步！<br></p>   \n', '2016-04-16 01:21:30', '3');
INSERT INTO `article` VALUES ('10120', '10003', '做个程序员到底好不好', '\n<p>今天闲着无事，我们就来聊聊做个程序员到底好不好？</p><p><br><strong>问题</strong><br><br><br><span style=\"white-space:pre\">	</span>我今年27了，大学学的是经济与贸易，我现在转行做IT可以转吗？<br><span style=\"white-space:pre\">	</span>我大学学的是建筑设计专业，今年30，想转行做IT晚不晚？<br><span style=\"white-space:pre\">	</span>我今年高三了，我想知道IT行业到底好不好？不知道志愿填那个专业好？<br><span style=\"white-space:pre\">	</span>......<br><span style=\"white-space:pre\">	</span><br><strong>程序员生涯</strong><br><br><br><span style=\"white-space:pre\">	</span>人的一生中，工作和婚姻很相像。选对了人和选对了职业道路是很难得。用《围城》中的一句话说，“外面的人想进来，里面的人想出去”。IT行业就是这样。<br><span style=\"white-space:pre\">	</span>都说35岁是程序员的一个坎，35岁是程序员第二次面临择业的时刻。<br><span style=\"white-space:pre\">	</span>这时因为大多数程序员在35岁要么选择转行，要么选择做管理，要么选择创业.....很少有超过35岁的程序员还在继续写代码。<br><span style=\"white-space:pre\">	</span>创业的艰苦我就不说了，能做到管理的又是很少一部分了。所以说选择当程序员还是要慎重。<br><span style=\"white-space:pre\">	</span><br><strong>工作环境</strong><br><span style=\"white-space:pre\">	</span><br><span style=\"white-space:pre\">	</span>在帝都的人都知道雾霾严重，所以很多人都逃之夭夭跑到魔都，或者其他一线城市。<br><span style=\"white-space:pre\">	</span>工作环境的重要性不言而喻。对程序员来说就是每天坐到晚的敲代码，周围都是电脑，辐射大。偶尔有时间就喝喝咖啡。<br><span style=\"white-space:pre\">	</span>程序员经常与加班加班加班联系在一起。程序员也离不开加班，自己技能的提升等都要靠自己，同时大多数公司都是要求程序员加班的。<br><span style=\"white-space:pre\">	</span>程序员工作空闲之余也就是逛逛论坛，上上网，聊聊天。下班时间宅在家里，打打游戏，写写代码，写写博客，很少锻炼身体，以至于某天的头条就有可能是某某公司大老猝死了(就在今天极客头条上报到腾讯一个游戏主管猝死了)。<br><span style=\"white-space:pre\">	</span>很多人羡慕程序员，想加入程序员这个集体。等你进来你就知道了，周围全是男的，没一个妹子，而且都还单身，他们大多都很闷骚。<br><span style=\"white-space:pre\">	</span><br><strong>到底好不好</strong><br><span style=\"white-space:pre\">	</span><br><span style=\"white-space:pre\">	</span>说了这么多，那么程序员到底好不好做。实话实话，这个行业不太好。竞争非常激烈，技术升级很快，每天都要学，以防自己被淘汰。<br><span style=\"white-space:pre\">	</span>如果运气不好，公司还可能倒闭。尤其是今年的o2o，p2p这些创业者，大多死的很惨。<br><span style=\"white-space:pre\">	</span>天天久坐和加班，部分程序员的身体确实不怎么好。还有些人说辐射会掉头发，秃顶。<br><span style=\"white-space:pre\">	</span>不是一个专业的同学孩子都几个了，程序员连对象都不好找。圈子小，狼(男)多肉(女)少，结婚什么时候是个尽头。<br><span style=\"white-space:pre\">	</span>偶尔出去玩一次，大家都在讨论电影，电视剧，理财，好吃的好玩的等，程序员很少能插上话。<br><span style=\"white-space:pre\">	</span>改别人代码改到呕吐，需求变化比变脸还快。天天上班背个包，穿着朴素，缺乏气质，勤俭节约，任劳任怨。<br><span style=\"white-space:pre\">	</span>不过最近听说有程序员职业鼓励师，安慰下。</p><p><span style=\"white-space:pre\">	<img src=\"http://img.blog.csdn.net/20151217113546983?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"></span></p><p>说了这么多，到底好不好，还是要看个人。仁者见仁智者见智，爱一行干一行，否则事事无成！<br></p><p>欢迎大家关注我的博客，如有疑问，请加qq群：454796847、135430763 共同进步！<br></p>   \n', '2016-04-16 01:21:30', '16');
INSERT INTO `article` VALUES ('10121', '10003', 'HTML5的data-*自定义属性', '\nHTML5增加了一项新功能是自定义数据属性，也就是data-*自定义属性。在HTML5中我们可以使用以data-为前缀来设置我们需要的自定义属性，来进行一些数据的存放。当然高级浏览器下可通过脚本进行定义和数据存取。在项目实践中非常有用。目前采取这样的做法的框架也有很多，最常见的当属jQueryMobile。<br>具体使用方法例下：<br><pre name=\"code\" class=\"html\">&lt;div id = &quot;head&quot; data-home = &quot;http://blog.csdn.net/xmtblog&quot; data-author = &quot;伪专家&quot;&gt;&lt;/div&gt;</pre>在传统的做法中我们可以配合jquery使用，如下：<pre name=\"code\" class=\"javascript\">$(&quot;#head&quot;).attr(&quot;data-home&quot;);\n$(&quot;#head&quot;).attr(&quot;data-home&quot;,&quot;new&quot;);</pre>或者纯js做法：<br>在IE浏览器里，我们通过获取对象后直接调用就可以了<br><pre name=\"code\" class=\"javascript\">document.getElementById(&quot;head&quot;).[&quot;data-home&quot;];\ndocument.getElementById(&quot;head&quot;).[&quot;data-home&quot;] = &quot;new&quot;;</pre>在火狐和谷歌浏览器里，我们可以通过getAttribute方法来实现调用：<br><pre name=\"code\" class=\"javascript\">document.getElementById(&quot;head&quot;).getAttribute(&quot;data-home&quot;);\ndocument.getElementById(&quot;head&quot;).setAttribute(&quot;data-home&quot;,&quot;new&quot;);</pre><strong>再HTML5中的简洁操作方法：（dataset属性存取data-*自定义属性的值）</strong><br>这种方式通过访问一个元素的 dataset 属性来存取 data-* 自定义属性的值。这个 dataset 属性是HTML5 JavaScript API的一部分，用来返回一个所有选择元素 data- 属性的DOMStringMap对象。<br>使用这种方法时，不是使用完整的属性名，如data-home来存取数据，应该去掉data-前缀。<br>还有一点特别注意的是：data-属性名如果包含了连字符，例如：data-date-of-birth ，连字符将被去掉，并转换为驼峰式的命名，前面的属性名转换后应该是：dateOfBirth。<pre name=\"code\" class=\"html\">&lt;div id = &quot;head&quot; data-home = &quot;http://blog.csdn.net/xmtblog&quot; data-author = &quot;伪专家&quot; data-date-of-birth&gt;QQ群：135430763&lt;/div&gt;\n&lt;script type=&quot;text/javascript&quot;&gt;\n	var el = document.querySelector(\'#head\');\n	console.log(el.id); \n	console.log(el.dataset);//一个DOMStringMap\n	console.log(el.dataset.home); \n	console.log(el.dataset.author); \n	console.log(el.dataset.dateOfBirth); \n	el.dataset.dateOfBirth = \'1985-01-05\'; // 设置data-date-of-birth的值.\n	//判断属性\n	console.log(\'testAttr\' in el.dataset);//false\n	el.dataset.testAttr = \'testAttr\';\n	console.log(\'testAttr\' in el.dataset);//true\n&lt;/script&gt;</pre>如果你想删掉一个 data-属性 ，可以这么做： delete el.dataset.home ; &nbsp;或者 el.dataset.home = null;。<br>这样操作起来是不是非常的方便。但有些浏览器可能还不支持。所以在此期间最好用的getAttribute和setAttribute来操作或配合jquery进行使用。<br><strong>data-属性选择器</strong><br>在实际开发时，可以根据自定义的data-属性选择相关的元素。例如使用querySelectorAll选择元素：<br>//选择所有包含\'data-div\'属性的元素<br>document.querySelectorAll (\'[data-div]\') ;<br>//选择所有包含\'data-a-href\' 属性值为red的元素<br>document.querySelectorAll (\'[data-a-href=&quot;#&quot;]\') ;<br>同样的我们也可以通过data-属性值对相应的元素设置CSS样式，例如下面这个例子：<br><pre name=\"code\" class=\"html\">&lt;style type =&quot;text/css&quot;&gt;\n    .head {\n         width : 256px ;\n         height : 200px ;\n     }\n \n    .head[data-a=\'btn-a\'] {\n         color : brown\n    }\n \n    .head[data-a=\'btn-color\'] {\n         color : red\n    }\n&lt;/style&gt;\n&lt;div class = &quot;head&quot; data-qq = &quot;QQ群：135430763&quot; data-a = &quot;btn-a&quot; &gt; button按钮 &lt;/div&gt;\n&lt;div class = &quot;head&quot; data-qq = &quot;QQ群：135430763&quot; data-a = &quot;btn-color&quot; &gt; button按钮&lt;/div&gt;</pre><strong>欢迎大家关注我的博客！如有疑问,请加QQ群：135430763共同学习！&nbsp;</strong><br>   \n', '2016-04-16 01:21:30', '5');
INSERT INTO `article` VALUES ('10122', '10003', 'input中加入图片的做法', '\n<p>有很多高大上的网站中都有这一做法。尤其是在登录页面，输入用户名和密码时加入小图标，看起来简单舒服。</p><p>下面就列举一下我们公司中手机网站应用的截图：<br></p><p><img src=\"http://img.blog.csdn.net/20150829102610820?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"><br></p><p>怎么样看起来还不错吧。下面直接上代码：<pre name=\"code\" class=\"html\">&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n	&lt;head&gt;\n		&lt;title&gt;input中加入图片的做法&lt;/title&gt;\n		&lt;!-- 这里图片用的是base64的做法，避免大家在使用我的demo的时候没有对应的图标 --&gt;\n		&lt;style&gt;\n			.username {width:130px; background:#FFFFFF url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAANfSURBVDhPRZRNaFxlFIa7dSuICzcuXERRKkh37uxGUGNB3KSCUqUIkaItVtDQpqUMlSYWUxo1qaYGbTRg1VItjS6sNGjF1CZVM5m/O/fOvfN77/xl/jPz+H63URcfd7jzneec85733B12pYdd6WCV2uQ2IZarkql2sfwmjt4ni5vE8zWSpQZufYt0uUu80MDTXac6IB0MCCGOgtJ+B682wC63cWs9Kn3wFKR71CEEGFCxA5laX6BWCMpUuQMJK1HmfwHXV2O8dWKCN45EGN77MhMffUpJweZ/U4Xfg5TfDStxKtsQU7ZX6ep0iNp5JqdnmZo5x9iJCC+8sp8HHt7J+zNz+C3YyFZwq32soKfWTHtb/0OygTTx61z9YYmRvc9zbuY9Dh7Yx57hJxgaup+hhx7k99W/yOquLf1M+5mKIEHLQPohxC012ZIOiY01Rp7bzcjwLg68tJtDrz7NY4/cyz1338VP15fJVnthK56EMtUY3f6DOBItXygReFHcP5fI/nGB4to8zsp5jh58lkd33kfctYipJ6sB6750kR5Ouc8O05MdiBx0qNVbFJ11Ujcv00kvEf35DCtLpzk/fYiFL6bJ1sskNMkNTeVvA9FkksE2xPSXE8hxipRyLpcW57i1/C3rK5f55dqXnJka5+J3X1Fod1gvNFWF/NGEeM2ABAlVFiSZq4Xq/3Y7yuznC4ydjDDx4TRjp06y//BhjkxOcSPmEC22SFYGOkouXRIVCWsqSZY7xOsdVssNJr++ym35YP5WmncWf+TYxWvMLUc5+sk3jH+wQGHLeKQpJ9flqS6poHEHkpJHYuUmlqYzevpjTn1/g0vugM9iLWZvlnj3yiqPv/gmb5+9gCNRjTGz0iajpJYvSDidcg9Xfs6VYXktw/jZRfa8dpynRo/zzOsRnhw9RmT+Cr9aNby2xJR9XcWYcduyRggxL9xci3ypR0li5ZXN0QQS+h03fUurlIS09UwqUVz3XE3GK8v20jOEGNeapTLaWHJgWr06mxJOz4TeJZQkITE3tDTGG7bglt8nVVScv202o4lVU1BjgFXXqqtPs7Hmk2CsbT4TZoopk1mVmWOropwq1rC2faJvREK7Y46BesqkPVOWAZniQHsFvtrzFJgsaCLSL4TK/omgzT+uj/fDrpBPrwAAAABJRU5ErkJggg==&quot;) 2px 2px no-repeat; padding-left:18px;BORDER: #E7AD01 1px solid; FONT-SIZE: 13px;COLOR: #000000; HEIGHT: 20px }\n			.password {width:130px; background:#FFFFFF url(&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAALiSURBVDhPNVNLaxNRGO2fceNKf4AUxIWCuFIKoiAIiig+QN2UVhcGRKsUrNgWpS0+aG1tUWq11lrUim+tpC/TzGQmM5nJcyZJk0wnk8nx3Fu7uDDJd+8533fO+Vp0pwkt34DhhjCLDZjOBoyCx+MjVwG0XAg1EyCe8ZFab/I0kHQ3YJWbSKR9tGiFEIlcgFQJSDp1fnuyKADFY5sgRhHIeqwXA6j5KjI18H4IIx9uAqTKvFRqwiyHUHI1xHlbJ2As08Cq3cBalmAE0csNqK6HNAHUvCdJN0cQXRTqfNSExWKSrMl1XuIj2wcUF1hiwaiSqMJxS3VJZJFYAgj2FIvL6QpUdvF+JYVI/zN09oxiZG4FCi+aHEGlRopT4yj/9RAASaIni+zApYBkXyPY2chd7Nh3FPtPXMGeI5fRO/4JJjuJUwO9EsCusmvHl51LAM0JNgE2gOdfltF6+DQezi0iTtZL3aNobTsHVbTP37FCBUbZh04npAaC3eLMMQqXDoCe8Vls230Qk4s53JuK4vrjj2i7cANxtrua87HmVGF5TdmFQmslgJr3YRIkSn8GZr7iD5HHftnoHHiHmZiP2yPzuPnoNVIkUIoedajKDkyKLAGMEsNBhs9KFg/efIMGIDI8j13HrmLog4G+V1FEBl/CDkUXZdodyCPy06JzdjVbA8EwH0tjcPY3ljhr++Asth84j74ZFR33p9HZOwGNIgsRhY0GnbBptQQQEU6uh1igGLeevsXYQhqnuiews60d14Z/4NDFO+if/C4BhI0CQMTZoAESQMRSdX0YdWBqycbJric43jWGQx1D2HumG+3900iIQJHRrIZYtVxY3InsVgdiB7RSgL/8VmjlMplGf6bxIlqmiB60BlgTFjIHjLMQUHf4P5dQJlGCCDeYh7hDTeiCLiJNLXS6E+diiRSKrIiF2jrinQzSFoBIl1iSRIHz0Rkxq0amRKEmj6jrLneGRybRCfAPXa6W+aBnyAcAAAAASUVORK5CYII=&quot;) 2px 2px no-repeat; padding-left:18px;BORDER: #E7AD01 1px solid; FONT-SIZE: 13px; COLOR: #000000;HEIGHT: 20px}\n		&lt;/style&gt;\n	&lt;/head&gt;\n	&lt;body&gt;\n		&lt;!-- 做法的原理其实很简单：\n			1. 就是给input添加一个背景图片\n			2. 背景图片不要平铺，设置padding-left的值为背景图片的宽度\n		--&gt;\n		&lt;input class=&quot;username&quot; onMouseOver=&quot;this.style.borderColor=\'#99E300\'&quot; onMouseOut=&quot;this.style.borderColor=\'#A1BCA3\'&quot; maxLength=&quot;12&quot; name=&quot;UserName&quot;&gt;\n		&lt;input class=&quot;password&quot; onMouseOver=&quot;this.style.borderColor=\'#99E300\'&quot; onMouseOut=&quot;this.style.borderColor=\'#A1BCA3\'&quot; maxLength=&quot;12&quot; name=&quot;password&quot;&gt;\n		&lt;!-- 涛哥伪专家\n			欢迎大家关注我的博客，如有疑问，请加qq群：454796847、135430763 共同进步\n		--&gt;\n	&lt;/body&gt;\n&lt;/html&gt;\n</pre>好了就到这里吧！欢迎大家关注我的博客，如有疑问，请加qq群：454796847、135430763 共同进步！</p>   \n', '2016-04-16 01:21:30', '6');
INSERT INTO `article` VALUES ('10123', '10003', 'Html5实现手机九宫格密码解锁功能', '\n<p>HTML5真的是很强大，前端时间看到一个canvas实现九宫格的密码解锁。今天抽出时间模仿了一个，特定分享一下！</p><p>效果截图如下：</p><p><img src=\"http://img.blog.csdn.net/20151210172338673?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"><br></p><p>效果看起来还不错吧！</p><p>源码如下：<pre name=\"code\" class=\"html\">&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head lang=&quot;zh-CN&quot;&gt;\n    &lt;meta content=&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0&quot; name=&quot;viewport&quot;/&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;title&gt;html5实现网页解锁功能&lt;/title&gt;\n    &lt;style type=&quot;text/css&quot;&gt;\n        html, body {\n            margin: 0;\n            padding: 0;\n            width: 100%;\n            height: 100%;\n        }\n    &lt;/style&gt;\n    &lt;script type=&quot;text/javascript&quot;&gt;\n    	/**\n    	 * 半径，画布宽度，画布高度，画布x内边距，画布y内边距\n    	 */\n        var R = 26, canvasWidth = 400, canvasHeight = 320, OffsetX = 30, OffsetY = 30;\n    	var circleArr = [];\n        function createCirclePoint(diffX, diffY) {\n            for (var row = 0; row &lt; 3; row++) {\n                for (var col = 0; col &lt; 3; col++) {\n                	// 计算圆心坐标\n                    var Point = {\n                        X: (OffsetX + col * diffX + ( col * 2 + 1) * R),\n                        Y: (OffsetY + row * diffY + (row * 2 + 1) * R)\n                    };\n                    circleArr.push(Point);\n                }\n            }\n        }\n        window.onload = function () {\n            var canvas = document.getElementById(&quot;lockCanvas&quot;);\n            canvasWidth = document.body.offsetWidth;//网页可见区域宽\n            canvas.width = canvasWidth;\n            canvas.height = canvasHeight;\n            var cxt = canvas.getContext(&quot;2d&quot;);\n            /**\n             * 每行3个圆\n             * OffsetX为canvas x方向内边距\n             * */\n            var X = (canvasWidth - 2 * OffsetX - R * 2 * 3) / 2;\n            var Y = (canvasHeight - 2 * OffsetY - R * 2 * 3) / 2;\n            \n            createCirclePoint(X, Y);\n            \n            bindEvent(canvas, cxt);\n            //CW=2*offsetX+R*2*3+2*X\n            Draw(cxt, circleArr, [],null);\n        }\n        function Draw(cxt, circleArr, pwdArr,touchPoint) {\n            if (pwdArr.length &gt; 0) {\n                cxt.beginPath();\n                for (var i = 0; i &lt; pwdArr.length; i++) {\n                    var pointIndex = pwdArr[i];\n                    cxt.lineTo(circleArr[pointIndex].X, circleArr[pointIndex].Y);\n                }\n                cxt.lineWidth = 10;\n                cxt.strokeStyle = &quot;#627eed&quot;;\n                cxt.stroke();\n                cxt.closePath();\n                if(touchPoint!=null){\n                    var lastPointIndex=pwdArr[pwdArr.length-1];\n                    var lastPoint=circleArr[lastPointIndex];\n                    cxt.beginPath();\n                    cxt.moveTo(lastPoint.X,lastPoint.Y);\n                    cxt.lineTo(touchPoint.X,touchPoint.Y);\n                    cxt.stroke();\n                    cxt.closePath();\n                }\n            }\n            for (var i = 0; i &lt; circleArr.length; i++) {\n                var Point = circleArr[i];\n                cxt.fillStyle = &quot;#627eed&quot;;\n                cxt.beginPath();\n                cxt.arc(Point.X, Point.Y, R, 0, Math.PI * 2, true);\n                cxt.closePath();\n                cxt.fill();\n                cxt.fillStyle = &quot;#ffffff&quot;;\n                cxt.beginPath();\n                cxt.arc(Point.X, Point.Y, R - 3, 0, Math.PI * 2, true);\n                cxt.closePath();\n                cxt.fill();\n                if(pwdArr.indexOf(i)&gt;=0){\n                    cxt.fillStyle = &quot;#627eed&quot;;\n                    cxt.beginPath();\n                    cxt.arc(Point.X, Point.Y, R -16, 0, Math.PI * 2, true);\n                    cxt.closePath();\n                    cxt.fill();\n                }\n\n            }\n        }\n        \n        /**\n         * 计算选中的密码 \n         */\n        function getSelectPwd(touches,pwdArr){\n            for (var i = 0; i &lt; circleArr.length; i++) {\n                var currentPoint = circleArr[i];\n                var xdiff = Math.abs(currentPoint.X - touches.pageX);\n                var ydiff = Math.abs(currentPoint.Y - touches.pageY);\n                var dir = Math.pow((xdiff * xdiff + ydiff * ydiff), 0.5);\n                if(dir &gt; R || pwdArr.indexOf(i) &gt;= 0)\n                	continue;\n                 pwdArr.push(i);\n                 break;\n            }\n        }\n        \n        /**\n         * 给画布绑定事件\n         */\n        function bindEvent(canvas, cxt) {\n            var pwdArr = [];\n            canvas.addEventListener(&quot;touchstart&quot;, function (e) {\n                getSelectPwd(e.touches[0],pwdArr);\n            }, false);\n            canvas.addEventListener(&quot;touchmove&quot;, function (e) {\n                e.preventDefault();\n                var touches = e.touches[0];\n                getSelectPwd(touches,pwdArr);\n                cxt.clearRect(0,0,canvasWidth,canvasHeight);\n                Draw(cxt,circleArr,pwdArr,{X:touches.pageX,Y:touches.pageY});\n            }, false);\n            canvas.addEventListener(&quot;touchend&quot;, function (e) {\n                cxt.clearRect(0,0,canvasWidth,canvasHeight);\n                Draw(cxt,circleArr,pwdArr,null);\n                alert(&quot;密码结果是：&quot;+pwdArr.join(&quot;-&gt;&quot;));\n                pwdArr=[];\n            }, false);\n        }\n    &lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;canvas id=&quot;lockCanvas&quot;&gt;&lt;/canvas&gt;\n&lt;/body&gt;\n&lt;/html&gt;</pre>好了下班了，就写这么多了！</p><p>欢迎大家关注我的博客，如有疑问，请加qq群：454796847、135430763 共同进步！<br></p>   \n', '2016-04-16 01:21:31', '10');
INSERT INTO `article` VALUES ('10124', '10003', 'H3C交换机常用命令汇总', '\n<p><span style=\"white-space:pre\">														</span><strong>H3C<span style=\"font-family:宋体;\">交换机常用命令</span></strong></p><p><strong>1.查看<span style=\"font-family:Times New Roman;\">Linux</span><span style=\"font-family:宋体;\">下查看端口状态</span></strong></p><p>	root@root:~#&nbsp;netstat&nbsp;-an|grep&nbsp;-E&nbsp;&quot;6002|6003&quot;</p><p><strong>2.H3C<span style=\"font-family:宋体;\">交换机显示当前配置</span></strong></p><p>	[H3C]display&nbsp;current-configuration</p><p><strong>3.H3C<span style=\"font-family:宋体;\">交换机显示</span><span style=\"font-family:Times New Roman;\">arp</span><span style=\"font-family:宋体;\">信息</span></strong></p><p>	[H3C]dis&nbsp;arp</p><p><strong>4.H3C<span style=\"font-family:宋体;\">交换机显示</span><span style=\"font-family:Times New Roman;\">mac</span><span style=\"font-family:宋体;\">列表信息</span></strong></p><p>	[H3C]dis&nbsp;mac-address</p><p><strong>5.H3C<span style=\"font-family:宋体;\">交换机显示端口信息</span></strong></p><p>	[H3C]display&nbsp;interface</p><p><strong>6.进入系统视图</strong></p><p>&lt;H3C&gt;system-view</p><p><strong>7.打开路由器的<span style=\"font-family:Times New Roman;\">telnet</span><span style=\"font-family:宋体;\">功能</span></strong></p><p>[H3C]telnet&nbsp;server&nbsp;enable</p><p><strong>8.设置允许同时配置路由器的用户数</strong></p><p>[H3C]configure-user&nbsp;count&nbsp;5</p><p><strong>9.添加本地用户<span style=\"font-family:Times New Roman;\">(</span><span style=\"font-family:宋体;\">此处为</span><span style=\"font-family:Times New Roman;\">telnet</span><span style=\"font-family:宋体;\">用户登录时使用的用户名</span><span style=\"font-family:Times New Roman;\">)</span></strong></p><p>[H3C]local-user&nbsp;telnet</p><p><strong>10.设置<span style=\"font-family:Times New Roman;\">telnet</span><span style=\"font-family:宋体;\">用户登录时所使用的密码</span></strong></p><p>[H3C-luser-telnet]password&nbsp;simple&nbsp;h3c</p><p><strong>11.设置本地用户的服务类型<span style=\"font-family:Times New Roman;\">(</span><span style=\"font-family:宋体;\">此处为</span><span style=\"font-family:Times New Roman;\">telnet)</span></strong></p><p>[H3C-luser-telnet]service-type&nbsp;telnet</p><p><strong>12.设置本地用户的服务级别</strong></p><p>[H3C-luser-telnet]level&nbsp;3</p><p><strong>13.退出本地用户视图</strong></p><p>[H3C-luser-telnet]quit</p><p><strong>14.进入用户视图</strong></p><p>[H3C]user-interface&nbsp;vty&nbsp;0&nbsp;4</p><p><strong>15.选择“<span style=\"font-family:Times New Roman;\">scheme</span><span style=\"font-family:宋体;\">”认证方式</span></strong></p><p>[H3C-ui-vty0-4]authentication-mode&nbsp;scheme</p><p><strong>16.进入某个端口</strong></p><p>[H3C]&nbsp;interface&nbsp;serial&nbsp;3/0</p><p><strong>17.为该端口设置<span style=\"font-family:Times New Roman;\">ip</span></strong></p><p>[H3C-Serial3/0]ip&nbsp;address&nbsp;200.1.1.1&nbsp;255.255.255.0</p><p><strong>18.对该端口进行复位</strong></p><p>[H3C-Serial3/0]undo&nbsp;shutdown</p><p><strong>19.添加一条静态路由</strong></p><p>[H3C]ip&nbsp;route-static&nbsp;192.168.1.0&nbsp;255.255.255.0&nbsp;192.168.0.1</p><p><strong>20.添加一条默认路由</strong></p><p>[H3C]ip&nbsp;route-static&nbsp;0.0.0.0&nbsp;&nbsp;0.0.0.0&nbsp;&nbsp;192.168.0.1</p><p><strong>21.保存配置文件</strong></p><p>[H3C]save</p><p><strong>22.查看某端口的状态</strong></p><p>[H3C]display&nbsp;interface&nbsp;GigabitEthernet&nbsp;0/0</p><p><strong>23.创建<span style=\"font-family:Times New Roman;\">vlan</span></strong></p><p>[H3C]vlan&nbsp;10</p><p><strong>24.将某个端口加入到<span style=\"font-family:Times New Roman;\">vlan</span><span style=\"font-family:宋体;\">中</span></strong></p><p>[H3C-vlan100]port&nbsp;ethernet&nbsp;0/1</p><p><strong>25.创建<span style=\"font-family:Times New Roman;\">vlan</span><span style=\"font-family:宋体;\">虚拟口</span></strong></p><p>[H3C]interface&nbsp;vlan-interface&nbsp;1</p><p><strong>26.配置<span style=\"font-family:Times New Roman;\">ip</span><span style=\"font-family:宋体;\">地址</span></strong></p><p>[H3C-Vlan-interface100]ip&nbsp;address&nbsp;192.168.1.4&nbsp;&nbsp;255.255.255.0</p><p><strong>27.将端口类型设置为<span style=\"font-family:Times New Roman;\">trunk</span></strong></p><p>[H3C]port&nbsp;&nbsp;link-type&nbsp;trunk</p><p><strong>28.设置<span style=\"font-family:Times New Roman;\">trunk</span><span style=\"font-family:宋体;\">口允许所有</span><span style=\"font-family:Times New Roman;\">vlan</span><span style=\"font-family:宋体;\">通过</span><span style=\"font-family:Times New Roman;\">(</span><span style=\"font-family:宋体;\">需要执行</span><span style=\"font-family:Times New Roman;\">save</span><span style=\"font-family:宋体;\">保存</span><span style=\"font-family:Times New Roman;\">)</span></strong></p><p>[H3C]port&nbsp;&nbsp;trunk&nbsp;permit&nbsp;vlan&nbsp;all&nbsp;</p><p><span style=\"color:#ff0000;\">注意：<span style=\"font-family:Times New Roman;\">Trunk&nbsp;</span><span style=\"font-family:宋体;\">可以收发多个</span><span style=\"font-family:Times New Roman;\">vlan</span><span style=\"font-family:宋体;\">的报文，用于交换机与交换机之间的互连</span></span></p><p><strong>29.关闭端口</strong></p><p>[H3C-GigabitEthernet1/1/1]shutdown</p><p><strong>30.设置端口备注</strong></p><p>[H3C-Ethernet1/0/15]description&nbsp;<span style=\"font-family:宋体;\">测试数据</span></p><p><span style=\"font-family:宋体;\"></span></p><p>6.切换端口<span style=\"font-family:Times New Roman;\">vlan</span></p><table><tbody><tr><td valign=\"top\"><p>操作</p></td><td valign=\"top\"><p>命令</p></td><td valign=\"top\"><p>说明</p></td></tr><tr><td valign=\"top\"><p>进入系统视图</p></td><td valign=\"top\"><p>system-view</p></td><td valign=\"top\"><p>&nbsp;</p></td></tr><tr><td valign=\"top\"><p>进入网口</p></td><td valign=\"top\"><p>interface&nbsp;ethernet&nbsp;interface_num</p></td><td valign=\"top\"><p>网口注意千兆口<span style=\"font-family:Times New Roman;\">,</span><span style=\"font-family:宋体;\">百兆口等</span><span style=\"font-family:Times New Roman;\">;</span></p></td></tr><tr><td valign=\"top\"><p>将<span style=\"font-family:Times New Roman;\">Access</span><span style=\"font-family:宋体;\">端口加入指定</span><span style=\"font-family:Times New Roman;\">VLAN</span></p></td><td valign=\"top\"><p>port&nbsp;access&nbsp;vlan&nbsp;vlan-id</p></td><td valign=\"top\"><p>vlan-id<span style=\"font-family:宋体;\">：</span><span style=\"font-family:Times New Roman;\">IEEE&nbsp;802.1q</span><span style=\"font-family:宋体;\">中定义的</span><span style=\"font-family:Times New Roman;\">VLAN&nbsp;ID</span><span style=\"font-family:宋体;\">，取值范围为</span><span style=\"font-family:Times New Roman;\">2</span><span style=\"font-family:宋体;\">～</span><span style=\"font-family:Times New Roman;\">4094</span></p></td></tr><tr><td valign=\"top\"><p>把<span style=\"font-family:Times New Roman;\">Access</span><span style=\"font-family:宋体;\">端口从指定</span><span style=\"font-family:Times New Roman;\">VLAN</span><span style=\"font-family:宋体;\">中删除</span></p></td><td valign=\"top\"><p>undo&nbsp;port&nbsp;access&nbsp;vlan</p></td><td valign=\"top\"><p><br></p></td></tr></tbody></table><p><strong>&nbsp;欢迎大家关注我的博客！如有疑问,请加QQ群：135430763共同学习！&nbsp;</strong></p>   \n', '2016-04-16 01:21:31', '0');
INSERT INTO `article` VALUES ('10125', '10003', '使用jQuery的ajax同步请求吃过的亏', '\njQuery是一个很常用的js库。甚至我们开发任何一个项目都首先把jquery导入进行。jQuery太过强大，使用起来非常方便。<br>但是在使用的过程中也遇到过很多坑。我在这里分享一下，避免大家也遇到同样的问题束手无策，也方便以后回归学习。<br>普通的写法:<br><pre name=\"code\" class=\"javascript\">$.ajax({\n	url:url,\n	type:\'POST\',\n	async:false,\n	data:{\n		id:1\n	},\n	dataType:\'json\',\n	timeout:666666,\n	success:function(resultObj){\n	}\n});</pre>这里有两个要点：<br>1.有些版本的async这个属性，不能加引号(如：\'false\'或&quot;false&quot;就不起作用)<br>2.dataType这个属性必须和返回的响应内容对应。即返回xml的话，就不能使用dataType:\'json\',这样会导致success回调函数不执行。<br>3.timeout设置请求超时时间（毫秒）。此设置将覆盖全局设置。设置过大，数字过长，部分浏览器就不支持了。<br><p>具体使用查看<a target=\"_blank\" target=\"_blank\" href=\"http://jquery.cuishifeng.cn/jQuery.Ajax.html\">http://jquery.cuishifeng.cn/jQuery.Ajax.html</a>在线api</p><p>欢迎大家关注我的博客！如有疑问,请加QQ群：454796847共同学习！<br></p>   \n', '2016-04-16 01:21:31', '13');
INSERT INTO `article` VALUES ('10126', '10003', '你意想不到的的编程问题', '\n1.java中1000不等于1000<br><pre name=\"code\" class=\"java\">public static void main(String[] args) {\n	Integer a = 1000, b = 1000; \n	System.out.println(a == b);//1 false\n	Integer c = 100, d = 100; \n	System.out.println(c == d);//2 true\n}</pre>以上两个位置1和2输出结果不相同，这是为什么呢？<br>详细解释见：<a target=\"_blank\" target=\"_blank\" href=\"http://www.evget.com/article/2015/11/19/23028.html\">http://www.evget.com/article/2015/11/19/23028.html</a><br>2.javascript 中 0.1 + 0.2 !== 0.3 为 True<br>0.1 + 0.2 !== 0.3，赶忙计算得验证，发现，0.1 加 0.2 等于 0.30000000000000004<br>这又是为什么呢？<br><p>详细解释见：<a target=\"_blank\" target=\"_blank\" href=\"http://segmentfault.com/q/1010000000137297\">http://segmentfault.com/q/1010000000137297</a></p><p>3.System.out.println(1+1+\'1\'+1+1+1+1+\'1\');结果为多少？</p><p>结果为104，这是为什么？为什么不是11111111或者2141等其他值</p><p>1+1+\'1\'+1+1+1+1+\'1\' &nbsp; &nbsp; 实际为 &nbsp;1+1+49+1+1+1+1+49 &nbsp; &nbsp;结果为104<br></p><p>4.java中3元运算符的问题</p><p><pre name=\"code\" class=\"java\">Integer abc =null;\nif(1!=2)\n   abc =abc;\nInteger num = null;\n   num = 1==2 ? 0 : num;</pre>运行一下，为什么第一处abc可以赋值，第二处3元运算符报空异常<br>详细解释见：<a target=\"_blank\" href=\"http://blog.csdn.net/tiwerbao/article/details/34244139\" target=\"_blank\">http://blog.csdn.net/tiwerbao/article/details/34244139</a></p><p><a target=\"_blank\" href=\"http://bbs.csdn.net/topics/390822163\" target=\"_blank\">http://bbs.csdn.net/topics/390822163</a><br></p><p>欢迎大家关注我的博客，如有疑问，请加qq群：454796847、135430763 共同进步！</p>   \n', '2016-04-16 01:21:31', '12');
INSERT INTO `article` VALUES ('10127', '10003', 'wireshark抓包分析', '\n<p style=\"text-align: center;\"><strong><span style=\"font-size:24px;\">wireshark抓包分析</span></strong></p><p>wireshark是非常流行的网络封包分析软件，功能十分强大。可以抓取各种网络包，并显示网络包的详细信息。</p><h1>开始界面</h1><div><img src=\"http://img.blog.csdn.net/20150615144310203?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveG10YmxvZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"><br></div><p>wireshark是捕获机器上的某一块网卡的网络包，当你的机器上有多块网卡的时候，你需要选择一个网卡。</p><p>点击Caputre-&gt;Interfaces..&nbsp;出现下面对话框，选择正确的网卡。然后点击&quot;Start&quot;按钮,&nbsp;开始抓包</p><p><img src=\"http://img.blog.csdn.net/20150615144346440?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveG10YmxvZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"><br></p><h1>Wireshark&nbsp;窗口介绍</h1><div><img src=\"http://img.blog.csdn.net/20150615144407993?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveG10YmxvZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"><br></div><p>WireShark&nbsp;主要分为这几个界面</p><p>1.&nbsp;Display&nbsp;Filter(显示过滤器)，&nbsp;&nbsp;用于过滤</p><p>2.&nbsp;Packet&nbsp;List&nbsp;Pane(封包列表)，&nbsp;显示捕获到的封包，&nbsp;有源地址和目标地址，端口号。&nbsp;颜色不同，代表</p><p>3.&nbsp;Packet&nbsp;Details&nbsp;Pane(封包详细信息),&nbsp;显示封包中的字段</p><p>4.&nbsp;Dissector&nbsp;Pane(16进制数据)</p><p>5.&nbsp;Miscellanous(地址栏，杂项)</p><p>&nbsp;<img src=\"http://img.blog.csdn.net/20150615144424576?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveG10YmxvZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"></p><p>使用过滤是非常重要的，&nbsp;初学者使用wireshark时，将会得到大量的冗余信息，在几千甚至几万条记录中，以至于很难找到自己需要的部分。搞得晕头转向。</p><p>过滤器会帮助我们在大量的数据中迅速找到我们需要的信息。</p><p>过滤器有两种，</p><p>一种是显示过滤器，就是主界面上那个，用来在捕获的记录中找到所需要的记录</p><p>一种是捕获过滤器，用来过滤捕获的封包，以免捕获太多的记录。&nbsp;在Capture&nbsp;-&gt;&nbsp;Capture&nbsp;Filters&nbsp;中设置</p><p>保存过滤</p><p>在Filter栏上，填好Filter的表达式后，点击Save按钮，&nbsp;取个名字。比如&quot;Filter&nbsp;102&quot;,</p><p>&nbsp;<img src=\"http://img.blog.csdn.net/20150615144713214?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveG10YmxvZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"></p><p>Filter栏上就多了个&quot;Filter&nbsp;102&quot;&nbsp;的按钮。</p><p>&nbsp;<img src=\"http://img.blog.csdn.net/20150615144730540?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveG10YmxvZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"></p><p>过滤表达式的规则</p><p>表达式规则</p><p>&nbsp;1.&nbsp;协议过滤</p><p>比如TCP，只显示TCP协议。</p><p>2.&nbsp;IP&nbsp;过滤</p><p>比如&nbsp;ip.src&nbsp;==192.168.1.102&nbsp;显示源地址为192.168.1.102，</p><p>ip.dst==192.168.1.102,&nbsp;目标地址为192.168.1.102</p><p>3.&nbsp;端口过滤</p><p>tcp.port&nbsp;==80,&nbsp;&nbsp;端口为80的</p><p>tcp.srcport&nbsp;==&nbsp;80,&nbsp;&nbsp;只显示TCP协议的愿端口为80的。</p><p>4.&nbsp;Http模式过滤</p><p>http.request.method==&quot;GET&quot;,&nbsp;&nbsp;&nbsp;只显示HTTP&nbsp;GET方法的。</p><p>5.&nbsp;逻辑运算符为&nbsp;AND/&nbsp;OR</p><p>常用的过滤表达式</p><table><tbody><tr><td valign=\"center\"><p>过滤表达式</p></td><td valign=\"center\"><p>用途</p></td></tr><tr><td valign=\"center\"><p>http</p></td><td valign=\"center\"><p>只查看<span style=\"font-family:Arial;\">HTTP</span><span style=\"font-family:宋体;\">协议的记录</span></p></td></tr><tr><td valign=\"center\"><p>ip.src&nbsp;==192.168.1.102&nbsp;or&nbsp;ip.dst==192.168.1.102</p></td><td valign=\"center\"><p>&nbsp;<span style=\"font-family:宋体;\">源地址或者目标地址是</span><span style=\"font-family:Arial;\">192.168.1.102</span></p></td></tr><tr><td valign=\"center\"><p>&nbsp;</p></td><td valign=\"center\"><p>&nbsp;</p></td></tr><tr><td valign=\"center\"><p>&nbsp;</p></td><td valign=\"center\"><p>&nbsp;</p></td></tr></tbody></table><p>封包列表(Packet&nbsp;List&nbsp;Pane)</p><p>封包列表的面板中显示，编号，时间戳，源地址，目标地址，协议，长度，以及封包信息。&nbsp;你可以看到不同的协议用了不同的颜色显示。</p><p>你也可以修改这些显示颜色的规则，&nbsp;&nbsp;View&nbsp;-&gt;Coloring&nbsp;Rules.</p><p>&nbsp;<img src=\"http://img.blog.csdn.net/20150615144757959?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveG10YmxvZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"></p><p>封包详细信息&nbsp;(Packet&nbsp;Details&nbsp;Pane)</p><p>这个面板是我们最重要的，用来查看协议中的每一个字段。</p><p>各行信息分别为</p><p>Frame:&nbsp;&nbsp;&nbsp;物理层的数据帧概况</p><p>Ethernet&nbsp;II:&nbsp;数据链路层以太网帧头部信息</p><p>Internet&nbsp;Protocol&nbsp;Version&nbsp;4:&nbsp;互联网层IP包头部信息</p><p>Transmission&nbsp;Control&nbsp;Protocol:&nbsp;&nbsp;传输层T的数据段头部信息，此处是TCP</p><p>Hypertext&nbsp;Transfer&nbsp;Protocol:&nbsp;&nbsp;应用层的信息，此处是HTTP协议</p><p>&nbsp;<img src=\"http://img.blog.csdn.net/20150615144905509?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveG10YmxvZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"></p><h1>ARP包</h1><div><img src=\"http://img.blog.csdn.net/20150615144953777?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveG10YmxvZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"><br></div><h1>IP包</h1><h1>&nbsp;<img src=\"http://img.blog.csdn.net/20150615145017341?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveG10YmxvZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"></h1><h1>UDP包</h1><h1>&nbsp;<img src=\"http://img.blog.csdn.net/20150615145301879?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveG10YmxvZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"></h1><h1>TCP包</h1><p>&nbsp;<img src=\"http://img.blog.csdn.net/20150615145324156?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveG10YmxvZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"></p><h1>HTTP包</h1><div><img src=\"http://img.blog.csdn.net/20150615145420694?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveG10YmxvZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"><br></div><p>linux抓包工具<span style=\"color:rgb(64,64,64);\">tcpdump</span></p><p><span style=\"color:rgb(64,64,64);\">tcpdump<span style=\"font-family:宋体;\">的选项</span></span><span style=\"color:rgb(64,64,64);\">&nbsp;</span></p><p><span style=\"color:rgb(64,64,64);\">·&nbsp;</span><span style=\"color:rgb(64,64,64);\">-a&nbsp;——&nbsp;<span style=\"font-family:宋体;\">将网络地址和广播地址转变成名字&nbsp;</span></span></p><p><span style=\"color:rgb(64,64,64);\">·&nbsp;</span><span style=\"color:rgb(64,64,64);\">-d&nbsp;——&nbsp;<span style=\"font-family:宋体;\">将匹配信息包的代码以人们能够理解的汇编格式给出&nbsp;</span></span></p><p><span style=\"color:rgb(64,64,64);\">·&nbsp;</span><span style=\"color:rgb(64,64,64);\">-dd&nbsp;——&nbsp;<span style=\"font-family:宋体;\">将匹配信息包的代码以</span><span style=\"font-family:Tahoma;\">c</span><span style=\"font-family:宋体;\">语言程序段的格式给出&nbsp;</span></span></p><p><span style=\"color:rgb(64,64,64);\">·&nbsp;</span><span style=\"color:rgb(64,64,64);\">-ddd&nbsp;——&nbsp;<span style=\"font-family:宋体;\">将匹配信息包的代码以十进制的形式给出&nbsp;</span></span></p><p><span style=\"color:rgb(64,64,64);\">·&nbsp;</span><span style=\"color:rgb(64,64,64);\">-e&nbsp;——&nbsp;<span style=\"font-family:宋体;\">在输出行打印出数据链路层的头部信息&nbsp;</span></span></p><p><span style=\"color:rgb(64,64,64);\">·&nbsp;</span><span style=\"color:rgb(64,64,64);\">-f&nbsp;——&nbsp;<span style=\"font-family:宋体;\">将外部的</span><span style=\"font-family:Tahoma;\">Internet</span><span style=\"font-family:宋体;\">地址以数字的形式打印出来&nbsp;</span></span></p><p><span style=\"color:rgb(64,64,64);\">·&nbsp;</span><span style=\"color:rgb(64,64,64);\">-l&nbsp;——&nbsp;<span style=\"font-family:宋体;\">使标准输出变为缓冲行形式&nbsp;</span></span></p><p><span style=\"color:rgb(64,64,64);\">·&nbsp;</span><span style=\"color:rgb(64,64,64);\">-n&nbsp;——&nbsp;<span style=\"font-family:宋体;\">不把网络地址转换成名字&nbsp;</span></span></p><p><span style=\"color:rgb(64,64,64);\">·&nbsp;</span><span style=\"color:rgb(64,64,64);\">-t&nbsp;——&nbsp;<span style=\"font-family:宋体;\">在输出的每一行不打印时间戳&nbsp;</span></span></p><p><span style=\"color:rgb(64,64,64);\">·&nbsp;</span><span style=\"color:rgb(64,64,64);\">-v&nbsp;——&nbsp;<span style=\"font-family:宋体;\">输出一个稍微详细的信息，例如在</span><span style=\"font-family:Tahoma;\">ip</span><span style=\"font-family:宋体;\">包中可以包括</span><span style=\"font-family:Tahoma;\">ttl</span><span style=\"font-family:宋体;\">和服务类型的信息&nbsp;</span></span></p><p><span style=\"color:rgb(64,64,64);\">·&nbsp;</span><span style=\"color:rgb(64,64,64);\">-vv&nbsp;——&nbsp;<span style=\"font-family:宋体;\">输出详细的报文信息&nbsp;</span></span></p><p><span style=\"color:rgb(64,64,64);\">·&nbsp;</span><span style=\"color:rgb(64,64,64);\">-c&nbsp;——&nbsp;<span style=\"font-family:宋体;\">在收到指定的包的数目后，</span><span style=\"font-family:Tahoma;\">tcpdump</span><span style=\"font-family:宋体;\">就会停止&nbsp;</span></span></p><p><span style=\"color:rgb(64,64,64);\">·&nbsp;</span><span style=\"color:rgb(64,64,64);\">-F&nbsp;——&nbsp;<span style=\"font-family:宋体;\">从指定的文件中读取表达式</span><span style=\"font-family:Tahoma;\">,</span><span style=\"font-family:宋体;\">忽略其它的表达式&nbsp;</span></span></p><p><span style=\"color:rgb(64,64,64);\">·&nbsp;</span><span style=\"color:rgb(64,64,64);\">-i&nbsp;——&nbsp;<span style=\"font-family:宋体;\">指定监听的网络接口&nbsp;</span></span></p><p><span style=\"color:rgb(64,64,64);\">·&nbsp;</span><span style=\"color:rgb(64,64,64);\">-r&nbsp;——&nbsp;<span style=\"font-family:宋体;\">从指定的文件中读取包</span><span style=\"font-family:Tahoma;\">(</span><span style=\"font-family:宋体;\">这些包一般通过</span><span style=\"font-family:Tahoma;\">-w</span><span style=\"font-family:宋体;\">选项产生</span><span style=\"font-family:Tahoma;\">)&nbsp;</span></span></p><p><span style=\"color:rgb(64,64,64);\">·&nbsp;</span><span style=\"color:rgb(64,64,64);\">-w&nbsp;——&nbsp;<span style=\"font-family:宋体;\">直接将包写入文件中，并不分析和打印出来&nbsp;</span></span></p><p><span style=\"color:rgb(64,64,64);\">-T&nbsp;——&nbsp;<span style=\"font-family:宋体;\">将监听到的包直接解释为指定的类型的报文</span></span></p><p>示例</p><p>在eth2网口抓包，并把结果保存在<span style=\"font-family:Calibri;\">test.cap</span><span style=\"font-family:宋体;\">文件中</span>，然后直接用wireshark<span style=\"font-family:宋体;\">打开</span>该文件就可以看见包内容。</p><p>&nbsp;<img src=\"http://img.blog.csdn.net/20150615145514285?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveG10YmxvZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"></p><p><span style=\"color: rgb(85, 85, 85); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 35px;\">欢迎大家关注我的博客！如有疑问,请加QQ群：135430763共同学习！</span><br></p>   \n', '2016-04-16 01:21:31', '4');
INSERT INTO `article` VALUES ('10128', '10003', '浅谈如何提高编程效率？', '\n浅谈如何提高编程效率？<br><strong>1.提高工作经验</strong><br><span style=\"white-space:pre\">	</span>经验来自实践。平时多阅读一些技能方面的书籍和来自各网站上的优秀文章。如果说，一本书就是一个台阶，那么在人的一生中将有千万道台阶等着我去跨越。每跨越一步台阶，将得到不可估量的财富，而下一步台阶，又将带我步入一个新的境界，获取新的知识。<br>　　看到学到做到。平时有时间多看看大牛写的代码，多看看开源的项目并参与一些开源项目的编码工作。<br><strong>2.和大牛、勤奋的人一起工作</strong><br><span style=\"white-space:pre\">	</span>和大牛有经验的程序猿一起工作。和勤奋的人一起共事。永远不要相信“你改变不了环境，但可以改变自已。”这句话。这一般只有牛人才能做到。和勤奋的人一起，才能潜移默化的影响自己更勤奋。<br><strong>3.好的开发工具</strong><br><span style=\"white-space:pre\">	</span>好的开发工具也能事半功倍。高效的开发工具，超牛的电脑配置。当然基础也要好。<br><strong>4.学会做笔记</strong><br><span style=\"white-space:pre\">	</span>好记性不如一个乱笔头。在学习和工作的过程中多做笔记，对曾经走过的坑，多总结并记录下来。可以整理成文章并分享，增加互动。当某一天忘记了再翻过来看看。<br><strong>5.锻炼身体</strong><br>　　身体是革命的本钱，只有好身体才能有好的工作、学习状态。平时也好休息好，生性乐观，保持积极向上的心态。<br><strong>6.练习快速打字</strong><br>　　快速的键盘输入可以让编程工作更加高效。<br><strong>7.学习并掌握好的编程思想</strong><br><span style=\"white-space:pre\">	</span>思路决定出路。好的编程思想可以引导大家更快的写出更高效的代码。<br><strong>8.良好的沟通技巧</strong><br><span style=\"white-space:pre\">	</span>有效的沟通取决於沟通者对议题的充分掌握，而非措辞的甜美。只有充分的沟通，才能更好的掌握并理解客户的需求，做出更完美的程序。<br><strong>9.良好的架构设计</strong><br><span style=\"white-space:pre\">	</span>好设计是一种再设计。好设计是能够再复制的设计。好的设计就是最简单的设计。好的架构能适应各种业务和需求。像建筑开发一样，先要有设计图纸。写程序也是一样，先要有需求分析等各种分析业务逻辑图。<br><strong>10.编写单元测试</strong><br><span style=\"white-space:pre\">	</span>良好的测试习惯是必不可少的。如果你这么要求自己的话，代码质量能提高很多。进步神速。<br><strong>11.学习其他编程语言</strong><br><span style=\"white-space:pre\">	</span>在学习其他编程语言中，你会发现各种语言不同实现思想。对你的思维会进行重构和进化。<br>欢迎大家关注我的博客！如有疑问,请加QQ群：454796847共同学习！<br>   \n', '2016-04-16 01:21:31', '0');
INSERT INTO `article` VALUES ('10129', '10003', 'JAVA_OPTS', '\n<p style=\"margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px; font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.2000007629395px;\"><span style=\"font-family: \'courier new\', courier;\">JAVA_OPTS ，顾名思义，是用来设置JVM相关运行参数的变量。</span></p><p style=\"margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px; font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.2000007629395px;\"><span style=\"font-family: \'courier new\', courier;\"><br></span></p><p style=\"margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px; font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 25.2000007629395px;\"><span style=\"line-height: 24px;\"><span style=\"font-family: \'courier new\', courier;font-size:10px;\">JVM:JAVA_OPTS=&quot;-server -Xms2048m -Xmx2048m -Xss512k&quot;</span></span></p><p style=\"margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px; font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 24px;\"><span style=\"font-family: \'courier new\', courier;font-size:10px;\">-server:一定要作为第一个参数，在多个CPU时性能佳<br>-Xms：初始Heap大小，使用的最小内存,cpu性能高时此值应设的大一些<br>-Xmx：java heap最大值，使用的最大内存<br>上面两个值是分配JVM的最小和最大内存，取决于硬件物理内存的大小，建议均设为物理内存的一半。<br>-XX:PermSize:设定内存的永久保存区域<br>-XX:MaxPermSize:设定最大内存的永久保存区域<br>-XX:MaxNewSize:<br>-Xss 15120 这使得<span class=\"hl1\">JBoss</span>每增加一个线程（thread)就会立即消耗15M内存，而最佳值应该是128K,默认值好像是512k.<br>+XX:AggressiveHeap 会使得 Xms没有意义。这个参数让jvm忽略Xmx参数,疯狂地吃完一个G物理内存,再吃尽一个G的swap。<br>-Xss：每个线程的Stack大小<br>-verbose:gc 现实垃圾收集信息<br>-Xloggc:gc.log 指定垃圾收集日志文件<br>-Xmn：young generation的heap大小，一般设置为Xmx的3、4分之一<br>-XX:+UseParNewGC ：缩短minor收集的时间<br>-XX:+UseConcMarkSweepGC ：缩短major收集的时间<br>提示：此选项在Heap Size 比较大而且Major收集时间较长的情况下使用更合适。</span></p><p style=\"margin-top: 0px; margin-bottom: 0px; padding-top: 0px; padding-bottom: 0px; font-family: Helvetica, Tahoma, Arial, sans-serif; font-size: 14px; line-height: 24px;\"><span style=\"font-family: \'courier new\', courier;font-size:10px;\">欢迎大家关注我的博客，如有疑问，请加qq群：454796847、135430763 共同进步！<br></span></p>   \n', '2016-04-16 01:21:32', '0');
INSERT INTO `article` VALUES ('10130', '10003', 'Socket套接字通信原理', '\n<p>Socket<span style=\"font-family:宋体;\">套接字通信</span>原理</p><h1>Tcp/IP协议关系图</h1><p>&nbsp;<img src=\"http://img.blog.csdn.net/20150612131642952?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveG10YmxvZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"></p><p>&nbsp;</p><h1>Socket在哪里？<span style=\"font-size: 12px;\">&nbsp;</span></h1><div><span style=\"font-size: 12px;\"><img src=\"http://img.blog.csdn.net/20150612131739684?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveG10YmxvZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"><br></span></div><p>原来<span style=\"font-family: Verdana;\">Socket</span><span style=\"font-family:宋体;\">在这里</span></p><h1>Socket<span style=\"font-family:宋体;\">是什么呢</span><span style=\"font-family:Verdana;\">?</span></h1><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Socket<span style=\"font-family:宋体;\">是应用层与</span><span style=\"font-family:Calibri;\">TCP/IP</span><span style=\"font-family:宋体;\">协议族通信的中间软件抽象层</span><span style=\"font-family:Calibri;\">,</span><span style=\"font-family:宋体;\">它是一组接口</span><span style=\"font-family:Calibri;\">.</span><span style=\"font-family:宋体;\">在设计模式中</span><span style=\"font-family:Calibri;\">,Socket</span><span style=\"font-family:宋体;\">其实就是一个门面模式</span><span style=\"font-family:Calibri;\">,</span><span style=\"font-family:宋体;\">它把复杂的</span><span style=\"font-family:Calibri;\">TCP/IP</span><span style=\"font-family:宋体;\">协议族隐藏在</span><span style=\"font-family:Calibri;\">Socket</span><span style=\"font-family:宋体;\">接口后面</span><span style=\"font-family:Calibri;\">,</span><span style=\"font-family:宋体;\">对用户来说</span><span style=\"font-family:Calibri;\">,</span><span style=\"font-family:宋体;\">一组简单的接口就是全部</span><span style=\"font-family:Calibri;\">,</span><span style=\"font-family:宋体;\">让</span><span style=\"font-family:Calibri;\">Socket</span><span style=\"font-family:宋体;\">去组织数据</span><span style=\"font-family:Calibri;\">,</span><span style=\"font-family:宋体;\">以符合指定的协议</span><span style=\"font-family:Calibri;\">.</span></p><h1>TCP协议</h1><div><img src=\"http://img.blog.csdn.net/20150612131903479?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveG10YmxvZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"><br></div><h1>三次握手</h1><div><img src=\"http://img.blog.csdn.net/20150612131945438?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveG10YmxvZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"><br></div><h1>四次握手断开</h1><div><img src=\"http://img.blog.csdn.net/20150612132021386?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveG10YmxvZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"><br></div><h1>UDP<span style=\"font-family:宋体;\">协议</span></h1><p>&nbsp;<img src=\"http://img.blog.csdn.net/20150612132102586?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveG10YmxvZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"></p><h1>问题</h1><p>1.为什么握手需要<span style=\"font-family:Calibri;\">3</span><span style=\"font-family:宋体;\">次，断开需要</span><span style=\"font-family:Calibri;\">4</span><span style=\"font-family:宋体;\">次？</span></p><p>2.阻塞和非阻塞的实现原理？</p><p><span style=\"color: rgb(85, 85, 85); font-family: \'microsoft yahei\'; font-size: 14px; line-height: 35px;\">欢迎大家关注我的博客！如有疑问,请加QQ群：135430763共同学习！</span><br></p>   \n', '2016-04-16 01:21:32', '0');
INSERT INTO `article` VALUES ('10131', '10003', 'MySQL主从同步读写分离的集群配置', '\n大型网站为了解决大量的高并发访问问题，除了在网站实现分布式负载均衡，远远不够。到了数据业务层、数据访问层，如果还是传统的数据结构，或者只是单单靠一台服务器支持，如此多的数据库连接操作，服务器性能再好数据库必然会崩溃。数据丢失的话，后果更是不堪设想。这时候，我们会考虑如何减少数据库的连接，一方面采用优秀的代码框架，进行代码的优化，采用优秀的数据缓存技术如：memcached等。如果资金充足的话，必然会想到假设服务器集群，来分担主数据库的压力。或者在硬件设备上，投入大量资金，购买高性能的服务器。出名的有f5，硬件负载，软件负载等。<br>Ok切入今天的主题，利用MySQL主从配置，实现读写分离，减轻数据库压力。这种方式，在如今很多网站里都有使用，也不是什么新鲜事情，今天总结一下，方便大家学习参考一下。<br><strong>读写分离：</strong><br>1.多个服务器肯定比一个服务器好。<br>2.在数据库写入的时候，会加入大量的锁(排它锁,共享锁等等)，从而影响性能。<br>3.数据更安全,多数据库存在备份数据。<br><strong>搭建环境：</strong><br>1.搭设一台Master服务器（win7系统64bit,Ip：10.10.2.33）<br>2.一台台Slave服务器（winXp系统32bit,ip:10.10.2.157）<br>原理：主服务器（Master）负责网站写操作，从服务器负责查询操作。主从服务器利用MySQL的二进制日志文件，实现数据同步。二进制日志由主服务器产生，从服务器响应获取同步数据库。<br><pre name=\"code\" class=\"sql\">-- 在主服务器上创建为10.10.2.157一个dbadmin用户，密码为123456\n-- CREATE USER \'dbadmin\'@\'10.10.2.157\' IDENTIFIED BY \'123456\';\n-- 为用户dbadmin赋从复制权限(如果不想创建用户的话，可以使用root用户)。\n-- grant replication slave,replication client on *.* to \'slave\'@\'10.10.2.157\' identified by \'dbadmin\'; \n-- 锁定所有表的写操作\n-- flush tables with read lock; \n-- 显示主服务器的状态\n-- show master status;\n-- 更改从服务器从主的二进制文件mysql-test-bin.000002中的8042位置开始同步\n-- change master to  master_host=\'10.10.2.33\', master_user=\'slave\', master_password=\'root\', master_log_file=\'mysql-test-bin.000002\', master_log_pos=8042;\n-- 开始同步\n-- start slave;\n-- 显示同步状态\n-- show slave status;\n-- 放开锁定的所有表\n-- unlock tables;</pre>在主服务器上找到my.ini文件(版本不同可能文件名字不同，如：my.cnf)。<br>mysql中有好几种日志方式，我们只要启动二进制日志log-bin就ok。在[mysqld]下面增加下面几行代码<br><pre name=\"code\" class=\"plain\">server-id=1   //给数据库服务的唯一标识，一般为大家设置服务器Ip的末尾号\nlog-bin=master-bin \nlog-bin-index=master-bin.index\nbinlog-do-db=test 需要同步的数据库 如果有不需要同步的数据库可以用binlog_ignore_db，两个都不设置，则全部同步     \nauto_increment_offset=1 避免主键冲突重新设置自增主键的初始值\nauto_increment_increment=2 自增主键的增量\nexpire_logs_days=1 设置log过期时间为两天，只保留两天的log日志\nlog_bin_trust_function_creators=1 给函数赋值权限</pre>在从的服务器上也找到my.ini文件。在[mysqld]下面增加下面几行代码<br><pre name=\"code\" class=\"plain\">server-id=2\nrelay-log-index=slave-relay-bin.index\nrelay-log=slave-relay-bin \nauto_increment_offset=2 自增主键的初始值\nauto_increment_increment=2 自增主键的增量</pre>欢迎大家关注我的博客！如有疑问,请加QQ群：454796847共同学习！<br>   \n', '2016-04-16 01:21:32', '1');
INSERT INTO `article` VALUES ('10132', '10003', 'java打包exe程序需要注意的几个地方', '\n这两天使用java写了一个小程序。然后想使用exe4j给打包成一个exe的程序。出现了一个启动的异常，这里分享一下使用exe4j打包程序注意的事项，以免其他网友出错能够快速定位。如下：<br><pre name=\"code\" class=\"plain\">No JVM could be found on your system.\nPlease define EXE4J_JAVA_HOME\nto point to an installed 32-bit JDK or JRE or download a JRE\nfrom www.java.com.</pre><p>截图如下：</p><p><img src=\"http://img.blog.csdn.net/20150925175439142?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"><br></p>出现这种问题的原因可能如下：<br>1.jdk的版本不对<br><span style=\"white-space:pre\">	</span>64位的电脑，使用的32位的电脑的jdk。<br>2.运行环境中jdk<br><p><span style=\"white-space:pre\">	</span>或者打包自带jdk时，因做如下操作。</p><p><span style=\"white-space:pre\">	<img src=\"http://img.blog.csdn.net/20150925175459112?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"></span></p>3.打包的版本不对<br><p><span style=\"white-space:pre\">	</span>32的电脑打的是64位的包等等，操作如下：</p><p><span style=\"white-space:pre\">	</span></p>其他打包操作详见<br><p>百度文库：<a target=\"_blank\" href=\"http://wenku.baidu.com/link?url=oX9CBH9n5j1kPN5otZV4q6PHrMOgFHkVOflmp-iSphqwOanLLNdz63RRMOqD2KGfoBYs277qGY5FP_xXnzkLkA2WoeLNFf4PJ5Y7sBwKNs3\" target=\"_blank\">http://wenku.baidu.com/link?url=oX9CBH9n5j1kPN5otZV4q6PHrMOgFHkVOflmp-iSphqwOanLLNdz63RRMOqD2KGfoBYs277qGY5FP_xXnzkLkA2WoeLNFf4PJ5Y7sBwKNs3</a></p><p>欢迎大家关注我的博客，如有疑问，请加qq群：454796847、135430763 共同进步！<br></p>   \n', '2016-04-16 01:21:32', '0');
INSERT INTO `article` VALUES ('10133', '10003', 'Html5响应式设计实现九宫格', '\n        <div class=\"markdown_views\"><p>自从响应式设计的理念提出以来，越来越大的网站采用这种思想。各类大型网站也如雨后春笋般的涌了出来。如：<a href=\"http://www.mi.com/%20%E5%B0%8F%E7%B1%B3%E5%AE%98%E7%BD%91\">小米商城</a>，<a href=\"http://www.tmall.com/%20%E5%A4%A9%E7%8C%AB%E5%95%86%E5%9F%8E\">天猫</a>等。 <br>\n至于响应式设计的概念等大家可以去百度百度，我这里就不相信讲解了。直接为大家带来源码，用Html5实现响应式的九宫格。代码如下：</p>\n\n<pre class=\"prettyprint\"><code class=\" hljs xml\"><span class=\"hljs-doctype\">&lt;!DOCTYPE html&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">html</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">head</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">title</span>&gt;</span>html5响应式九宫格<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">title</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">http-equiv</span>=<span class=\"hljs-value\">\"Content-Type\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"text/html; charset=UTF-8\"</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"viewport\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"width=device-width,height=device-height,inital-scale=1.0,maximum-scale=1.0,user-scalable=no;\"</span> /&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"apple-mobile-web-app-capable\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"yes\"</span> /&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"apple-mobile-web-app-status-bar-style\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"black\"</span> /&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"format-detection\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"telephone=no\"</span> /&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">charset</span>=<span class=\"hljs-value\">\"utf-8\"</span> /&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">style</span> <span class=\"hljs-attribute\">type</span>=<span class=\"hljs-value\">\"text/css\"</span>&gt;</span><span class=\"css\">\n    <span class=\"hljs-tag\">html</span>, <span class=\"hljs-tag\">body</span> <span class=\"hljs-rules\">{ <span class=\"hljs-rule\"><span class=\"hljs-attribute\">color</span>:<span class=\"hljs-value\"><span class=\"hljs-hexcolor\">#222</span></span></span>; <span class=\"hljs-rule\"><span class=\"hljs-attribute\">font-family</span>:<span class=\"hljs-value\">Microsoft YaHei, Helvitica, Verdana, Tohoma, Arial, san-serif</span></span>; <span class=\"hljs-rule\"><span class=\"hljs-attribute\">margin</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">0</span></span></span>; <span class=\"hljs-rule\"><span class=\"hljs-attribute\">padding</span>:<span class=\"hljs-value\"> <span class=\"hljs-number\">0</span></span></span>; <span class=\"hljs-rule\"><span class=\"hljs-attribute\">text-decoration</span>:<span class=\"hljs-value\"> none</span></span>; <span class=\"hljs-rule\">}</span></span>\n    <span class=\"hljs-tag\">img</span> <span class=\"hljs-rules\">{ <span class=\"hljs-rule\"><span class=\"hljs-attribute\">border</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">0</span></span></span>; <span class=\"hljs-rule\">}</span></span>\n    <span class=\"hljs-tag\">ul</span> <span class=\"hljs-rules\">{ <span class=\"hljs-rule\"><span class=\"hljs-attribute\">list-style</span>:<span class=\"hljs-value\"> none outside none</span></span>; <span class=\"hljs-rule\"><span class=\"hljs-attribute\">margin</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">0</span></span></span>; <span class=\"hljs-rule\"><span class=\"hljs-attribute\">padding</span>:<span class=\"hljs-value\"> <span class=\"hljs-number\">0</span></span></span>; <span class=\"hljs-rule\">}</span></span>\n    <span class=\"hljs-tag\">body</span> <span class=\"hljs-rules\">{\n        <span class=\"hljs-rule\"><span class=\"hljs-attribute\">background-color</span>:<span class=\"hljs-value\"><span class=\"hljs-hexcolor\">#eee</span></span></span>; \n    <span class=\"hljs-rule\">}</span></span>\n    <span class=\"hljs-tag\">body</span> <span class=\"hljs-class\">.mainmenu</span><span class=\"hljs-pseudo\">:after</span> <span class=\"hljs-rules\">{ <span class=\"hljs-rule\"><span class=\"hljs-attribute\">clear</span>:<span class=\"hljs-value\"> both</span></span>; <span class=\"hljs-rule\"><span class=\"hljs-attribute\">content</span>:<span class=\"hljs-value\"> <span class=\"hljs-string\">\" \"</span></span></span>; <span class=\"hljs-rule\"><span class=\"hljs-attribute\">display</span>:<span class=\"hljs-value\"> block</span></span>; <span class=\"hljs-rule\">}</span></span>\n\n    <span class=\"hljs-tag\">body</span> <span class=\"hljs-class\">.mainmenu</span> <span class=\"hljs-tag\">li</span><span class=\"hljs-rules\">{ \n        <span class=\"hljs-rule\"><span class=\"hljs-attribute\">float</span>:<span class=\"hljs-value\">left</span></span>;\n        <span class=\"hljs-rule\"><span class=\"hljs-attribute\">margin-left</span>:<span class=\"hljs-value\"> <span class=\"hljs-number\">2.5</span>%</span></span>;\n        <span class=\"hljs-rule\"><span class=\"hljs-attribute\">margin-top</span>:<span class=\"hljs-value\"> <span class=\"hljs-number\">2.5</span>%</span></span>;\n        <span class=\"hljs-rule\"><span class=\"hljs-attribute\">width</span>:<span class=\"hljs-value\"> <span class=\"hljs-number\">30</span>%</span></span>;  \n        <span class=\"hljs-rule\"><span class=\"hljs-attribute\">border-radius</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">3</span>px</span></span>; \n        <span class=\"hljs-rule\"><span class=\"hljs-attribute\">overflow</span>:<span class=\"hljs-value\">hidden</span></span>;\n    <span class=\"hljs-rule\">}</span></span>\n\n    <span class=\"hljs-tag\">body</span> <span class=\"hljs-class\">.mainmenu</span> <span class=\"hljs-tag\">li</span> <span class=\"hljs-tag\">a</span><span class=\"hljs-rules\">{ <span class=\"hljs-rule\"><span class=\"hljs-attribute\">display</span>:<span class=\"hljs-value\">block</span></span>;  <span class=\"hljs-rule\"><span class=\"hljs-attribute\">color</span>:<span class=\"hljs-value\"><span class=\"hljs-hexcolor\">#FFF</span></span></span>;   <span class=\"hljs-rule\"><span class=\"hljs-attribute\">text-align</span>:<span class=\"hljs-value\">center </span></span></span>}\n    <span class=\"hljs-tag\">body</span> <span class=\"hljs-class\">.mainmenu</span> <span class=\"hljs-tag\">li</span> <span class=\"hljs-tag\">a</span> <span class=\"hljs-tag\">b</span><span class=\"hljs-rules\">{ \n        <span class=\"hljs-rule\"><span class=\"hljs-attribute\">display</span>:<span class=\"hljs-value\">block</span></span>; <span class=\"hljs-rule\"><span class=\"hljs-attribute\">height</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">80</span>px</span></span>;\n    <span class=\"hljs-rule\">}</span></span>\n    <span class=\"hljs-tag\">body</span> <span class=\"hljs-class\">.mainmenu</span> <span class=\"hljs-tag\">li</span> <span class=\"hljs-tag\">a</span> <span class=\"hljs-tag\">img</span><span class=\"hljs-rules\">{ \n        <span class=\"hljs-rule\"><span class=\"hljs-attribute\">margin</span>:<span class=\"hljs-value\"> <span class=\"hljs-number\">15</span>px auto <span class=\"hljs-number\">15</span>px</span></span>;\n        <span class=\"hljs-rule\"><span class=\"hljs-attribute\">width</span>:<span class=\"hljs-value\"> <span class=\"hljs-number\">50</span>px</span></span>;\n        <span class=\"hljs-rule\"><span class=\"hljs-attribute\">height</span>:<span class=\"hljs-value\"> <span class=\"hljs-number\">50</span>px</span></span>;\n    <span class=\"hljs-rule\">}</span></span>\n\n    <span class=\"hljs-tag\">body</span> <span class=\"hljs-class\">.mainmenu</span> <span class=\"hljs-tag\">li</span> <span class=\"hljs-tag\">a</span> <span class=\"hljs-tag\">span</span><span class=\"hljs-rules\">{ <span class=\"hljs-rule\"><span class=\"hljs-attribute\">display</span>:<span class=\"hljs-value\">block</span></span>; <span class=\"hljs-rule\"><span class=\"hljs-attribute\">height</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">30</span>px</span></span>; <span class=\"hljs-rule\"><span class=\"hljs-attribute\">line-height</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">30</span>px</span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">background-color</span>:<span class=\"hljs-value\"><span class=\"hljs-hexcolor\">#FFF</span></span></span>; <span class=\"hljs-rule\"><span class=\"hljs-attribute\">color</span>:<span class=\"hljs-value\"> <span class=\"hljs-hexcolor\">#999</span></span></span>; <span class=\"hljs-rule\"><span class=\"hljs-attribute\">font-size</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">14</span>px</span></span>; <span class=\"hljs-rule\">}</span></span>\n\n    <span class=\"hljs-tag\">body</span> <span class=\"hljs-class\">.mainmenu</span> <span class=\"hljs-tag\">li</span><span class=\"hljs-pseudo\">:nth-child(8n+1)</span> <span class=\"hljs-rules\">{<span class=\"hljs-rule\"><span class=\"hljs-attribute\">background-color</span>:<span class=\"hljs-value\"><span class=\"hljs-hexcolor\">#36A1DB</span></span></span></span>}\n    <span class=\"hljs-tag\">body</span> <span class=\"hljs-class\">.mainmenu</span> <span class=\"hljs-tag\">li</span><span class=\"hljs-pseudo\">:nth-child(8n+2)</span> <span class=\"hljs-rules\">{<span class=\"hljs-rule\"><span class=\"hljs-attribute\">background-color</span>:<span class=\"hljs-value\"><span class=\"hljs-hexcolor\">#678ce1</span></span></span></span>}\n    <span class=\"hljs-tag\">body</span> <span class=\"hljs-class\">.mainmenu</span> <span class=\"hljs-tag\">li</span><span class=\"hljs-pseudo\">:nth-child(8n+3)</span> <span class=\"hljs-rules\">{<span class=\"hljs-rule\"><span class=\"hljs-attribute\">background-color</span>:<span class=\"hljs-value\"><span class=\"hljs-hexcolor\">#8c67df</span></span></span></span>}\n    <span class=\"hljs-tag\">body</span> <span class=\"hljs-class\">.mainmenu</span> <span class=\"hljs-tag\">li</span><span class=\"hljs-pseudo\">:nth-child(8n+4)</span> <span class=\"hljs-rules\">{<span class=\"hljs-rule\"><span class=\"hljs-attribute\">background-color</span>:<span class=\"hljs-value\"><span class=\"hljs-hexcolor\">#84d018</span></span></span></span>}\n    <span class=\"hljs-tag\">body</span> <span class=\"hljs-class\">.mainmenu</span> <span class=\"hljs-tag\">li</span><span class=\"hljs-pseudo\">:nth-child(8n+5)</span> <span class=\"hljs-rules\">{<span class=\"hljs-rule\"><span class=\"hljs-attribute\">background-color</span>:<span class=\"hljs-value\"><span class=\"hljs-hexcolor\">#14c760</span></span></span></span>}\n    <span class=\"hljs-tag\">body</span> <span class=\"hljs-class\">.mainmenu</span> <span class=\"hljs-tag\">li</span><span class=\"hljs-pseudo\">:nth-child(8n+6)</span> <span class=\"hljs-rules\">{<span class=\"hljs-rule\"><span class=\"hljs-attribute\">background-color</span>:<span class=\"hljs-value\"><span class=\"hljs-hexcolor\">#f3b613</span></span></span></span>}\n    <span class=\"hljs-tag\">body</span> <span class=\"hljs-class\">.mainmenu</span> <span class=\"hljs-tag\">li</span><span class=\"hljs-pseudo\">:nth-child(8n+7)</span> <span class=\"hljs-rules\">{<span class=\"hljs-rule\"><span class=\"hljs-attribute\">background-color</span>:<span class=\"hljs-value\"><span class=\"hljs-hexcolor\">#ff8a4a</span></span></span></span>}\n    <span class=\"hljs-tag\">body</span> <span class=\"hljs-class\">.mainmenu</span> <span class=\"hljs-tag\">li</span><span class=\"hljs-pseudo\">:nth-child(8n+8)</span> <span class=\"hljs-rules\">{<span class=\"hljs-rule\"><span class=\"hljs-attribute\">background-color</span>:<span class=\"hljs-value\"><span class=\"hljs-hexcolor\">#fc5366</span></span></span></span>}\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">style</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">head</span>&gt;</span>\n\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">body</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">ul</span> <span class=\"hljs-attribute\">class</span>=<span class=\"hljs-value\">\"mainmenu\"</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">a</span> <span class=\"hljs-attribute\">href</span>=<span class=\"hljs-value\">\"/\"</span> &gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">b</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">img</span> <span class=\"hljs-attribute\">src</span>=<span class=\"hljs-value\">\"images/tb01.png\"</span> /&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">b</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">span</span>&gt;</span>关于我们<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">span</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">li</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">a</span> <span class=\"hljs-attribute\">href</span>=<span class=\"hljs-value\">\"/\"</span> &gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">b</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">img</span> <span class=\"hljs-attribute\">src</span>=<span class=\"hljs-value\">\"images/tb02.png\"</span> /&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">b</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">span</span>&gt;</span>新闻中心<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">span</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">li</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">a</span> <span class=\"hljs-attribute\">href</span>=<span class=\"hljs-value\">\"/\"</span> &gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">b</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">img</span> <span class=\"hljs-attribute\">src</span>=<span class=\"hljs-value\">\"images/tb03.png\"</span> /&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">b</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">span</span>&gt;</span>产品展示<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">span</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">li</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">a</span> <span class=\"hljs-attribute\">href</span>=<span class=\"hljs-value\">\"/\"</span> &gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">b</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">img</span> <span class=\"hljs-attribute\">src</span>=<span class=\"hljs-value\">\"images/tb04.png\"</span> /&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">b</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">span</span>&gt;</span>成功案例<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">span</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">li</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">a</span> <span class=\"hljs-attribute\">href</span>=<span class=\"hljs-value\">\"/\"</span> &gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">b</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">img</span> <span class=\"hljs-attribute\">src</span>=<span class=\"hljs-value\">\"images/tb05.png\"</span> /&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">b</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">span</span>&gt;</span>下载中心<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">span</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">li</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">a</span> <span class=\"hljs-attribute\">href</span>=<span class=\"hljs-value\">\"/\"</span> &gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">b</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">img</span> <span class=\"hljs-attribute\">src</span>=<span class=\"hljs-value\">\"images/tb06.png\"</span> /&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">b</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">span</span>&gt;</span>团队介绍<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">span</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">li</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">a</span> <span class=\"hljs-attribute\">href</span>=<span class=\"hljs-value\">\"/\"</span> &gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">b</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">img</span> <span class=\"hljs-attribute\">src</span>=<span class=\"hljs-value\">\"images/tb06.png\"</span> /&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">b</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">span</span>&gt;</span>人才招聘<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">span</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">li</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">a</span> <span class=\"hljs-attribute\">href</span>=<span class=\"hljs-value\">\"/\"</span> &gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">b</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">img</span> <span class=\"hljs-attribute\">src</span>=<span class=\"hljs-value\">\"images/tb07.png\"</span> /&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">b</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">span</span>&gt;</span>联系我们<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">span</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">li</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">a</span> <span class=\"hljs-attribute\">href</span>=<span class=\"hljs-value\">\"/\"</span> &gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">b</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">img</span> <span class=\"hljs-attribute\">src</span>=<span class=\"hljs-value\">\"images/tb08.png\"</span> /&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">b</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">span</span>&gt;</span>在线留言<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">span</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">li</span>&gt;</span>          \n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">ul</span>&gt;</span>\n    <span class=\"hljs-comment\">&lt;!-- 欢迎大家关注我的博客！如有疑问,请加QQ群：135430763共同学习！ --&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">html</span>&gt;</span></code></pre>\n\n<p>窄屏运行效果如下：<img src=\"http://img.blog.csdn.net/20150602162740491\" alt=\"这里写图片描述\" title=\"\"> <br>\n宽屏运行效果如下：<img src=\"http://img.blog.csdn.net/20150602162628250\" alt=\"这里写图片描述\" title=\"\"> <br>\n欢迎大家关注我的博客！如有疑问,请加QQ群：135430763共同学习！</p></div>\n        <script type=\"text/javascript\">\n            $(function () {\n                $(\'pre.prettyprint code\').each(function () {\n                    var lines = $(this).text().split(\'\\n\').length;\n                    var $numbering = $(\'<ul/>\').addClass(\'pre-numbering\').hide();\n                    $(this).addClass(\'has-numbering\').parent().append($numbering);\n                    for (i = 1; i <= lines; i++) {\n                        $numbering.append($(\'<li/>\').text(i));\n                    };\n                    $numbering.fadeIn(1700);\n                });\n            });\n        </script>\n   \n', '2016-04-16 01:21:32', '0');
INSERT INTO `article` VALUES ('10134', '10003', '程序的bug排查流程总结', '\n<h1><span style=\"font-size: 12px;\">只要是人写的程序，不可能没有</span><span style=\"font-size: 12px; font-family: Calibri;\">bug</span><span style=\"font-size: 12px; font-family: 宋体;\">，那么解决</span><span style=\"font-size: 12px; font-family: Calibri;\">bug</span><span style=\"font-size: 12px; font-family: 宋体;\">，</span><span style=\"font-size: 12px;\">将伴随程序员的一生</span><span style=\"font-size: 12px; font-family: Calibri;\">:</span></h1><p>Ø&nbsp;只会写代码，但不会排查<span style=\"font-family:Calibri;\">bug</span><span style=\"font-family:宋体;\">的程序员，</span>只能算是业余程序员</p><p>Ø&nbsp;能解决一般bug<span style=\"font-family:宋体;\">的</span>,只能算是初级程序员</p><p>Ø&nbsp;代码写的质量较好,还能查找较难<span style=\"font-family:Calibri;\">bug</span><span style=\"font-family:宋体;\">的</span>,<span style=\"font-family:宋体;\">中级</span>程序员</p><p>Ø&nbsp;代码写的质量好,<span style=\"font-family:宋体;\">注重性能</span><span style=\"font-family:Calibri;\">,</span><span style=\"font-family:宋体;\">不但</span>能排查疑难<span style=\"font-family:Calibri;\">bug</span><span style=\"font-family:宋体;\">的</span>,<span style=\"font-family:宋体;\">还能</span>解决疑难<span style=\"font-family:Calibri;\">bug</span><span style=\"font-family:宋体;\">的</span>,高级程序员</p><p>Ø&nbsp;代码写的质量好<span style=\"font-family:Calibri;\">,</span><span style=\"font-family:宋体;\">注重性能</span><span style=\"font-family:Calibri;\">,</span><span style=\"font-family:宋体;\">稳定性</span><span style=\"font-family:Calibri;\">,</span><span style=\"font-family:宋体;\">可靠性</span><span style=\"font-family:Calibri;\">,</span><span style=\"font-family:宋体;\">架构设计合理</span><span style=\"font-family:Calibri;\">,</span><span style=\"font-family:宋体;\">能解决绝大部分疑难问题，属于资深程序员</span></p><p>以上的话引自某个论坛网站，不一定说的绝对正确，但基本是有道理的。</p><p>&nbsp;</p><p><strong>面对出现的<span style=\"font-family:Calibri;\">bug</span><span style=\"font-family:宋体;\">，每个人心态都不一样</span>:</strong></p><p>1.&nbsp;积极主动，从容应对</p><p>自己负责的模块出现<span style=\"font-family:Calibri;\">bug</span><span style=\"font-family:宋体;\">，不管是自己发现的还是别人发现的</span>，都主动的去查找，搭环境，想办法去解决。</p><p>2.&nbsp;消极被动</p><p>对出现的<span style=\"font-family:Calibri;\">bug</span><span style=\"font-family:宋体;\">，消极应对，</span>你催我动，不催不动。</p><p><br></p><p><strong>排查流程:</strong></p><p><strong><img src=\"http://img.blog.csdn.net/20150717143335483?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"><br></strong></p><p><strong><br></strong></p><p><strong>总结:</strong></p><p><p>解决bug<span style=\"font-family: 宋体;\">过程可能痛苦，</span>累人，难受，压力大，甚至暂时还解决不了，关键看是不是尽力了。要想自己得到提高，达到更高层次，这个坎必须跨过，否则只能是平庸的程序员，只能承担一些简单的任务。</p><p>解决bug<span style=\"font-family:宋体;\">的过程也能学到很多东西，也有很多乐趣</span>，自己也能得到很大的提升，解决bug是属于自己职责范围内的事情，是种乐趣还是种包袱，关键看个人的心态。</p><p>最后，给大家分享一句很有名的话叫”峰高无坦途<span style=\"font-family: Calibri;\">“</span><span style=\"font-family: 宋体;\">，意思是</span>:要想登上最高峰欣赏美景，没有平坦的道路可走，都是悬崖峭壁，想登上高峰欣赏美景，必须跨过这些坎。</p><span style=\"font-family: Arial; font-size: 14px; line-height: 26px;\">欢迎大家关注我的博客！如有疑问,请加QQ群：454796847共同学习！</span><br>   \n', '2016-04-16 01:21:33', '1');
INSERT INTO `article` VALUES ('10135', '10003', 'AD域中常见属性名词解释', '\n        <div class=\"markdown_views\"><p><strong>AD域中常见属性名词解释</strong> <br>\nActive Directory（AD）活动目录 <br>\nschema对象模型 <br>\nOrganizational Unit（OU）组织单位 <br>\nDistinguished name（DN）识别名 <br>\nCanonical Name（CN）正式名称 <br>\nDomain Controllers（DC）域控制器 <br>\ndisplayname显示名称  <br>\nhomephone住宅电话 家庭电话(M) <br>\ngivenname名(F)  <br>\nsamaccounttype账号类型  <br>\nmobile手机  <br>\nprimarygroupid分组ID <br>\nobjectclass对象类 取值person, organizationalPerson, user <br>\nsn姓(L) <br>\ndisplayName 显示名称(S) <br>\ndescription 描述(D) <br>\n physicalDeliveryOfficeName 办公室(C) <br>\ninitials英文缩写(I) <br>\ntelephoneNumber电话号码(T) <br>\nmail电子邮件(M) <br>\nwWWHomePage网页(W) <br>\notherTelephone电话号码-其它(O) <br>\nurl网页-其它(R) <br>\nco国家/地区(O) <br>\nst省/自治区(V) <br>\nl市/县(C) <br>\nstreetAddress 街道(S)  <br>\npostOfficeBox 邮政信箱(B)  <br>\npostalCode邮政编码(Z) <br>\nuserPrincipalName 用户登录名(U)  <br>\nsAMAccountName 用户登录名(Windows 2000 以前版本)(W) <br>\npager寻呼机(P) <br>\nmobile 移动电话(B)  <br>\nfacsimileTelephoneNumber传真(F) <br>\nipPhone IP电话(I)  <br>\ninfo 注释  <br>\notherHomePhone 家庭电话-其它(O) <br>\notherPager     寻呼机-其它(T) <br>\notherMobile移动电话-其它(B) <br>\notherFacsimileTelephoneNumber传真-其它(E) <br>\notherIpPhone  IP电话-其它(R) <br>\ncompany   公司(C) <br>\ndepartment   部门(D) <br>\ntitle 职务(J) <br>\nmanager 经理-姓名(N) <br>\ndirectReports 直接下属(E) <br>\n<img src=\"http://img.blog.csdn.net/20150520085438660\" alt=\"这里写图片描述\" title=\"\"><img src=\"http://img.blog.csdn.net/20150520085500624\" alt=\"这里写图片描述\" title=\"\"><img src=\"http://img.blog.csdn.net/20150520085606051\" alt=\"这里写图片描述\" title=\"\"><img src=\"http://img.blog.csdn.net/20150520085535424\" alt=\"这里写图片描述\" title=\"\"><img src=\"http://img.blog.csdn.net/20150520085703584\" alt=\"这里写图片描述\" title=\"\"><img src=\"http://img.blog.csdn.net/20150520085631756\" alt=\"这里写图片描述\" title=\"\"> <br>\n欢迎大家关注我的博客！如有疑问,请加QQ群：135430763共同学习！</p></div>\n        <script type=\"text/javascript\">\n            $(function () {\n                $(\'pre.prettyprint code\').each(function () {\n                    var lines = $(this).text().split(\'\\n\').length;\n                    var $numbering = $(\'<ul/>\').addClass(\'pre-numbering\').hide();\n                    $(this).addClass(\'has-numbering\').parent().append($numbering);\n                    for (i = 1; i <= lines; i++) {\n                        $numbering.append($(\'<li/>\').text(i));\n                    };\n                    $numbering.fadeIn(1700);\n                });\n            });\n        </script>\n   \n', '2016-04-16 01:21:33', '0');
INSERT INTO `article` VALUES ('10136', '10003', 'HTML5中meta属性的使用详解', '\n        <div class=\"markdown_views\"><p>meta属性在HTML中占据了很重要的位置。如：针对搜索引擎的SEO，文档的字符编码，设置刷新缓存等。虽然一些网页可能没有使用meta，但是作为正规军，我们还是有必要了解一些meta的属性，并且能够熟练使用它们。 <br>\n<strong>1、声明文档使用的字符编码</strong></p>\n\n\n\n<pre class=\"prettyprint\"><code class=\" hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">charset</span>=<span class=\"hljs-value\">\'utf-8\'</span>&gt;</span></code></pre>\n\n<p><strong>2、声明文档的兼容模式</strong></p>\n\n\n\n<pre class=\"prettyprint\"><code class=\" hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">http-equiv</span>=<span class=\"hljs-value\">\"X-UA-Compatible\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"IE=edge\"</span> /&gt;</span> 指示IE以目前可用的最高模式显示内容\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">http-equiv</span>=<span class=\"hljs-value\">\"X-UA-Compatible\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"IE=Emulate IE7\"</span> /&gt;</span>指示IE使用 <span class=\"hljs-doctype\">&lt;!DOCTYPE&gt;</span> 指令确定如何呈现内容。标准模式指令以IE7 标准模式显示，而 Quirks 模式指令以 IE5 模式显示。</code></pre>\n\n<p><strong>3、SEO 优化</strong></p>\n\n\n\n<pre class=\"prettyprint\"><code class=\" hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"description\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"不超过150个字符\"</span> /&gt;</span>页面描述\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"keywords\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"html5, css3, 关键字\"</span>/&gt;</span>页面关键词\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"author\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"魔法小栈\"</span> /&gt;</span>定义网页作者\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"robots\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"index,follow\"</span> /&gt;</span>定义网页搜索引擎索引方式，robotterms是一组使用英文逗号「,」分割的值，通常有如下几种取值：none，noindex，nofollow，all，index和follow。</code></pre>\n\n<p><strong>4、为移动设备添加 viewport</strong></p>\n\n\n\n<pre class=\"prettyprint\"><code class=\" hljs lasso\"><span class=\"hljs-subst\">&lt;</span>meta name <span class=\"hljs-subst\">=</span><span class=\"hljs-string\">\"viewport\"</span> content <span class=\"hljs-subst\">=</span><span class=\"hljs-string\">\"width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no\"</span><span class=\"hljs-subst\">&gt;</span>\n    content 参数解释：\n    width  　　　　 viewport 宽度(数值/device<span class=\"hljs-attribute\">-width</span>)\n    height            viewport 高度(数值/device<span class=\"hljs-attribute\">-height</span>)\n    initial<span class=\"hljs-attribute\">-scale</span>  初始缩放比例\n    maximum<span class=\"hljs-attribute\">-scale</span>  最大缩放比例\n    minimum<span class=\"hljs-attribute\">-scale</span>  最小缩放比例\n    user<span class=\"hljs-attribute\">-scalable</span>  是否允许用户缩放(yes/no)\n    <span class=\"hljs-literal\">minimal</span><span class=\"hljs-attribute\">-ui</span>      iOS <span class=\"hljs-number\">7.1</span> beta <span class=\"hljs-number\">2</span> 中新增属性，可以在页面加载时最小化上下状态栏。这是一个布尔值，可以直接这样写：\n<span class=\"hljs-subst\">&lt;</span>meta name<span class=\"hljs-subst\">=</span><span class=\"hljs-string\">\"viewport\"</span> content<span class=\"hljs-subst\">=</span><span class=\"hljs-string\">\"width=device-width, initial-scale=1, minimal-ui\"</span><span class=\"hljs-subst\">&gt;</span></code></pre>\n\n<p><strong>5、iOS 设备</strong></p>\n\n\n\n<pre class=\"prettyprint\"><code class=\" hljs haskell\">&lt;meta name=<span class=\"hljs-string\">\"apple-mobile-web-app-title\"</span> content=<span class=\"hljs-string\">\"标题\"</span>&gt;添加到主屏后的标题（iOS <span class=\"hljs-number\">6</span> 新增）\n&lt;meta name=<span class=\"hljs-string\">\"apple-mobile-web-app-capable\"</span> content=<span class=\"hljs-string\">\"yes\"</span> /&gt;是否启用 <span class=\"hljs-type\">WebApp</span> 全屏模式\n&lt;meta name=<span class=\"hljs-string\">\"apple-mobile-web-app-status-bar-style\"</span> content=<span class=\"hljs-string\">\"black-translucent\"</span> /&gt;设置状态栏的背景颜色\n    只有在 <span class=\"hljs-string\">\"apple-mobile-web-app-capable\"</span> content=<span class=\"hljs-string\">\"yes\"</span> 时生效\n    content 参数：\n    <span class=\"hljs-default\"><span class=\"hljs-keyword\">default</span> 默认值。</span>\n    black 状态栏背景是黑色。\n    black-translucent 状态栏背景是黑色半透明。\n    设置为 <span class=\"hljs-default\"><span class=\"hljs-keyword\">default</span> 或 black ,网页内容从状态栏底部开始。</span>\n    设置为 black-translucent ,网页内容充满整个屏幕，顶部会被状态栏遮挡。</code></pre>\n\n<p><strong>6、iOS 图标 rel 参数</strong></p>\n\n\n\n<pre class=\"prettyprint\"><code class=\" hljs lasso\">apple<span class=\"hljs-attribute\">-touch</span><span class=\"hljs-attribute\">-icon</span> 图片自动处理成圆角和高光等效果。\napple<span class=\"hljs-attribute\">-touch</span><span class=\"hljs-attribute\">-icon</span><span class=\"hljs-attribute\">-precomposed</span> 禁止系统自动添加效果，直接显示设计原图。\n<span class=\"hljs-subst\">&lt;</span><span class=\"hljs-keyword\">link</span> rel<span class=\"hljs-subst\">=</span><span class=\"hljs-string\">\"apple-touch-icon-precomposed\"</span> href<span class=\"hljs-subst\">=</span><span class=\"hljs-string\">\"/apple-touch-icon-57x57-precomposed.png\"</span> <span class=\"hljs-subst\">/</span><span class=\"hljs-subst\">&gt;</span>iPhone 和 iTouch，默认 <span class=\"hljs-number\">57</span>x57 像素，必须有\n<span class=\"hljs-subst\">&lt;</span><span class=\"hljs-keyword\">link</span> rel<span class=\"hljs-subst\">=</span><span class=\"hljs-string\">\"apple-touch-icon-precomposed\"</span> sizes<span class=\"hljs-subst\">=</span><span class=\"hljs-string\">\"72x72\"</span> href<span class=\"hljs-subst\">=</span><span class=\"hljs-string\">\"/apple-touch-icon-72x72-precomposed.png\"</span> <span class=\"hljs-subst\">/</span><span class=\"hljs-subst\">&gt;</span>iPad，<span class=\"hljs-number\">72</span>x72 像素，可以没有，但推荐有\n<span class=\"hljs-subst\">&lt;</span><span class=\"hljs-keyword\">link</span> rel<span class=\"hljs-subst\">=</span><span class=\"hljs-string\">\"apple-touch-icon-precomposed\"</span> sizes<span class=\"hljs-subst\">=</span><span class=\"hljs-string\">\"114x114\"</span> href<span class=\"hljs-subst\">=</span><span class=\"hljs-string\">\"/apple-touch-icon-114x114-precomposed.png\"</span> <span class=\"hljs-subst\">/</span><span class=\"hljs-subst\">&gt;</span>Retina iPhone 和 Retina iTouch，<span class=\"hljs-number\">114</span>x114 像素，可以没有，但推荐有\n<span class=\"hljs-subst\">&lt;</span><span class=\"hljs-keyword\">link</span> rel<span class=\"hljs-subst\">=</span><span class=\"hljs-string\">\"apple-touch-icon-precomposed\"</span> sizes<span class=\"hljs-subst\">=</span><span class=\"hljs-string\">\"144x144\"</span> href<span class=\"hljs-subst\">=</span><span class=\"hljs-string\">\"/apple-touch-icon-144x144-precomposed.png\"</span> <span class=\"hljs-subst\">/</span><span class=\"hljs-subst\">&gt;</span>Retina iPad，<span class=\"hljs-number\">144</span>x144 像素，可以没有，推荐大家使用\n<span class=\"hljs-subst\">&lt;</span>meta name<span class=\"hljs-subst\">=</span><span class=\"hljs-string\">\"apple-mobile-web-app-title\"</span> content<span class=\"hljs-subst\">=</span><span class=\"hljs-string\">\"标题\"</span><span class=\"hljs-subst\">&gt;</span>title最好限制在六个中文长度内，超长的内容会被隐藏，添加到主屏后的标题（iOS <span class=\"hljs-number\">6</span> 新增）</code></pre>\n\n<p><strong>7、iOS 启动画面</strong></p>\n\n\n\n<pre class=\"prettyprint\"><code class=\" hljs xml\">iPad 的启动画面是不包括状态栏区域的。\niPad 竖屏 768 x 1004（标准分辨率）\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">link</span> <span class=\"hljs-attribute\">rel</span>=<span class=\"hljs-value\">\"apple-touch-startup-image\"</span> <span class=\"hljs-attribute\">sizes</span>=<span class=\"hljs-value\">\"768x1004\"</span> <span class=\"hljs-attribute\">href</span>=<span class=\"hljs-value\">\"/splash-screen-768x1004.png\"</span> /&gt;</span>iPad 竖屏 1536x2008（Retina）\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">link</span> <span class=\"hljs-attribute\">rel</span>=<span class=\"hljs-value\">\"apple-touch-startup-image\"</span> <span class=\"hljs-attribute\">sizes</span>=<span class=\"hljs-value\">\"1536x2008\"</span> <span class=\"hljs-attribute\">href</span>=<span class=\"hljs-value\">\"/splash-screen-1536x2008.png\"</span> /&gt;</span>iPad 横屏 1024x748（标准分辨率）\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">link</span> <span class=\"hljs-attribute\">rel</span>=<span class=\"hljs-value\">\"apple-touch-startup-image\"</span> <span class=\"hljs-attribute\">sizes</span>=<span class=\"hljs-value\">\"1024x748\"</span> <span class=\"hljs-attribute\">href</span>=<span class=\"hljs-value\">\"/Default-Portrait-1024x748.png\"</span> /&gt;</span>iPad 横屏 2048x1496（Retina）\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">link</span> <span class=\"hljs-attribute\">rel</span>=<span class=\"hljs-value\">\"apple-touch-startup-image\"</span> <span class=\"hljs-attribute\">sizes</span>=<span class=\"hljs-value\">\"2048x1496\"</span> <span class=\"hljs-attribute\">href</span>=<span class=\"hljs-value\">\"/splash-screen-2048x1496.png\"</span> /&gt;</span>\niPhone 和 iPod touch 的启动画面是包含状态栏区域的。\niPhone/iPod Touch 竖屏 320x480 (标准分辨率)\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">link</span> <span class=\"hljs-attribute\">rel</span>=<span class=\"hljs-value\">\"apple-touch-startup-image\"</span> <span class=\"hljs-attribute\">href</span>=<span class=\"hljs-value\">\"/splash-screen-320x480.png\"</span> /&gt;</span>iPhone/iPod Touch 竖屏 640x960 (Retina)\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">link</span> <span class=\"hljs-attribute\">rel</span>=<span class=\"hljs-value\">\"apple-touch-startup-image\"</span> <span class=\"hljs-attribute\">sizes</span>=<span class=\"hljs-value\">\"640x960\"</span> <span class=\"hljs-attribute\">href</span>=<span class=\"hljs-value\">\"/splash-screen-640x960.png\"</span> /&gt;</span>iPhone 5/iPod Touch 5 竖屏 640x1136 (Retina)\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">link</span> <span class=\"hljs-attribute\">rel</span>=<span class=\"hljs-value\">\"apple-touch-startup-image\"</span> <span class=\"hljs-attribute\">sizes</span>=<span class=\"hljs-value\">\"640x1136\"</span> <span class=\"hljs-attribute\">href</span>=<span class=\"hljs-value\">\"/splash-screen-640x1136.png\"</span> /&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">link</span> <span class=\"hljs-attribute\">rel</span>=<span class=\"hljs-value\">\"apple-touch-startup-image\"</span> <span class=\"hljs-attribute\">href</span>=<span class=\"hljs-value\">\"Startup.png\"</span> /&gt;</span>  当用户点击主屏图标打开 WebApp 时，系统会展示启动画面，在未设置情况下系统会默认显示该网站的首页截图，当然这个体验不是很好</code></pre>\n\n<p><strong>8、Windows 8</strong></p>\n\n\n\n<pre class=\"prettyprint\"><code class=\" hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"msapplication-TileColor\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"#000\"</span>/&gt;</span> Windows 8 磁贴颜色\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"msapplication-TileImage\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"icon.png\"</span>/&gt;</span>Windows 8 磁贴图标</code></pre>\n\n<p><strong>9、不常用的</strong></p>\n\n\n\n<pre class=\"prettyprint\"><code class=\" hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">link</span> <span class=\"hljs-attribute\">rel</span>=<span class=\"hljs-value\">\"alternate\"</span> <span class=\"hljs-attribute\">type</span>=<span class=\"hljs-value\">\"application/rss+xml\"</span> <span class=\"hljs-attribute\">title</span>=<span class=\"hljs-value\">\"RSS\"</span> <span class=\"hljs-attribute\">href</span>=<span class=\"hljs-value\">\"/rss.xml\"</span> /&gt;</span>添加 RSS 订阅\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">link</span> <span class=\"hljs-attribute\">rel</span>=<span class=\"hljs-value\">\"shortcut icon\"</span> <span class=\"hljs-attribute\">type</span>=<span class=\"hljs-value\">\"image/ico\"</span> <span class=\"hljs-attribute\">href</span>=<span class=\"hljs-value\">\"/favicon.ico\"</span> /&gt;</span>添加 favicon icon\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"format-detection\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"telephone=no\"</span> /&gt;</span>禁止数字识自动别为电话号码\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"format-detection\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"email=no\"</span> /&gt;</span>不让android识别邮箱\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"renderer\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"webkit\"</span>&gt;</span>启用360浏览器的极速模式(webkit)\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">http-equiv</span>=<span class=\"hljs-value\">\"X-UA-Compatible\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"IE=edge\"</span>&gt;</span>避免IE使用兼容模式\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"HandheldFriendly\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"true\"</span>&gt;</span>针对手持设备优化，主要是针对一些老的不识别viewport的浏览器，比如黑莓\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"MobileOptimized\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"320\"</span>&gt;</span>微软的老式浏览器\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"x5-orientation\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"portrait\"</span>&gt;</span>QQ强制竖屏\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"full-screen\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"yes\"</span>&gt;</span>UC强制全屏\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"x5-fullscreen\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"true\"</span>&gt;</span>QQ强制全屏\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"browsermode\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"application\"</span>&gt;</span>UC应用模式\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"x5-page-mode\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"app\"</span>&gt;</span>QQ应用模式\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">http-equiv</span>=<span class=\"hljs-value\">\"Cache-Control\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"no-siteapp\"</span> /&gt;</span>禁止百度转码\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"msapplication-tap-highlight\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"no\"</span>&gt;</span>windows phone 点击无高光\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"keywords\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"\"</span> /&gt;</span>  关键字\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"description\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"\"</span> /&gt;</span>  描述\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"title\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"\"</span> /&gt;</span>  标题\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"author\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"-06\"</span> /&gt;</span>  作者\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"Copyright\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"\"</span> /&gt;</span>  公司\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">http-equiv</span>=<span class=\"hljs-value\">\"X-UA-Compatible\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"IE=edge,chrome=1\"</span>&gt;</span>   让IE浏览器用最高级内核渲染页面 还有用 Chrome 框架的页面用webkit 内核 \n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"apple-mobile-web-app-capable\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"yes\"</span>&gt;</span>  IOS6全屏\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"mobile-web-app-capable\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"yes\"</span>&gt;</span>  Chrome高版本全屏\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"renderer\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"webkit\"</span>&gt;</span>  让360双核浏览器用webkit内核渲染页面\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"apple-itunes-app\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"app-id=myAppStoreID, affiliate-data=myAffiliateData, app-argument=myURL\"</span>&gt;</span> 添加智能 App 广告条 Smart App Banner（iOS 6+ Safari）</code></pre>\n\n<p><strong>10、sns 社交标签</strong> <br>\n    参考微博API</p>\n\n\n\n<pre class=\"prettyprint\"><code class=\" hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">property</span>=<span class=\"hljs-value\">\"og:type\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"类型\"</span> /&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">property</span>=<span class=\"hljs-value\">\"og:url\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"URL地址\"</span> /&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">property</span>=<span class=\"hljs-value\">\"og:title\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"标题\"</span> /&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">property</span>=<span class=\"hljs-value\">\"og:image\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"图片\"</span> /&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">property</span>=<span class=\"hljs-value\">\"og:description\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"描述\"</span> /&gt;</span></code></pre>\n\n<p><strong>11、条件注释判断IE浏览器</strong></p>\n\n\n\n<pre class=\"prettyprint\"><code class=\" hljs xml\"><span class=\"hljs-comment\">&lt;!--[if IE]&gt;条件注释区分非IE浏览器\n&lt;!--[if lt IE 7 ]&gt;&lt;html class=\"oldie ie ie6\"&gt; &lt;![endif]--&gt;</span>  \n<span class=\"hljs-comment\">&lt;!--[if IE 7 ]&gt;&lt;html class=\"oldie ie ie7\"&gt; &lt;![endif]--&gt;</span>  \n<span class=\"hljs-comment\">&lt;!--[if IE 8 ]&gt;&lt;html class=\"ie ie8\"&gt; &lt;![endif]--&gt;</span>  \n<span class=\"hljs-comment\">&lt;!--[if (gte IE 9)|!(IE)]&gt;&lt;!--&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">html</span>&gt;</span> <span class=\"hljs-comment\">&lt;!--&lt;![endif]--&gt;</span> \n<span class=\"hljs-comment\">&lt;!--[if lt IE 9]&gt;  &lt;![endif]--&gt;</span></code></pre>\n\n<p><strong>12.如果页面上出现很多http请求会自动转换成https</strong></p>\n\n\n\n<pre class=\"prettyprint\"><code class=\" hljs xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">http-equiv</span>=<span class=\"hljs-value\">\"Content-Security-Policy\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"upgrade-insecure-requests\"</span> /&gt;</span></code></pre>\n\n<p><strong>欢迎大家关注我的博客！如有疑问,请加QQ群：135430763、454796847共同学习！</strong></p></div>\n        <script type=\"text/javascript\">\n            $(function () {\n                $(\'pre.prettyprint code\').each(function () {\n                    var lines = $(this).text().split(\'\\n\').length;\n                    var $numbering = $(\'<ul/>\').addClass(\'pre-numbering\').hide();\n                    $(this).addClass(\'has-numbering\').parent().append($numbering);\n                    for (i = 1; i <= lines; i++) {\n                        $numbering.append($(\'<li/>\').text(i));\n                    };\n                    $numbering.fadeIn(1700);\n                });\n            });\n        </script>\n   \n', '2016-04-16 01:21:33', '6');
INSERT INTO `article` VALUES ('10137', '10003', 'html5调用摄像头实现拍照', '\n\n<p>技术时刻都在前进着。我们的需求也是时刻在改变着。最近在开发中遇到了用户进行账号注册时需要个人图像，网站提供自动拍照功能。还有在登录了PC之后，手机端进行登录时只需要扫描一下PC上的二维码就可以登录。这对一个网络来说难度是极大的。</p>\n<p>技术的进步使我们遇到了html5。下面这个简单粗暴的demo就是来完成这些功能的。直接看代码：<pre code_snippet_id=\"613412\" snippet_file_name=\"blog_20150306_1_2284719\" name=\"code\" class=\"html\">&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n	&lt;title&gt;html5调用摄像头实现拍照&lt;/title&gt;\n	&lt;meta charset=&quot;utf-8&quot;&gt;\n	&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;video id=&quot;video&quot; autoplay=&quot;&quot;style=&#39;width:640px;height:480px&#39;&gt;&lt;/video&gt;\n&lt;button id=&quot;paizhao&quot;&gt;拍照&lt;/button&gt; \n&lt;canvas id=&quot;canvas&quot; width=&quot;640&quot; height=&quot;480&quot;&gt;&lt;/canvas&gt;\n&lt;script type=&quot;text/javascript&quot;&gt;\n	var video=document.getElementById(&quot;video&quot;);\n	var context=canvas.getContext(&quot;2d&quot;);\n	var errocb=function(){\n		console.log(&quot;sth srong&quot;);\n	}\n	if(navigator.getUserMedia){\n		navigator.getUserMedia({&quot;video&quot;:true},function(stream){\n			video.src=stream;\n			video.play();\n		},errocb);\n	}else if(navigator.webkitGetUserMedia){\n		navigator.webkitGetUserMedia({&quot;video&quot;:true},function(stream){\n			video.src=window.webkitURL.createObjectURL(stream);\n			video.play();\n		},errocb);\n	}\n	document.getElementById(&quot;paizhao&quot;).addEventListener(&quot;click&quot;,function(){\n		context.drawImage(video,0,0,640,480);\n	});\n&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;</pre></p>\n<p>虽然丑陋，但是整理整理还是可以使用的！</p>\n如有不懂，请加qq群：135430763共同学习！<br>\n   \n', '2016-04-16 01:21:33', '0');
INSERT INTO `article` VALUES ('10138', '10003', 'jQuery实现网页右下角悬浮层提示', '\n        <div class=\"markdown_views\"><p>最近有同事提到类似网页右下角的消息悬浮提示框的制作。我之前也做过一个类似的例子，很简单。是<a href=\"http://blog.csdn.net/xmtblog/article/details/22999351%20%E4%BB%BFQQ%E6%B6%88%E6%81%AF%E5%BC%B9%E5%87%BA%E6%A1%86\">仿QQ消息</a>。现在感觉之前的那个例子只是说了实现原理，整体上给你的感觉还是太丑，今天为大家带来一个新的例子。是Discuz右下角悬浮层提示的。运行效果如下：<img src=\"http://img.blog.csdn.net/20150507211241874\" alt=\"这里写图片描述\" title=\"\"> <br>\n代码如下：</p>\n\n\n\n<pre class=\"prettyprint\"><code class=\"language-html hljs \"><span class=\"hljs-doctype\">&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">html</span> <span class=\"hljs-attribute\">xmlns</span>=<span class=\"hljs-value\">\"http://www.w3.org/1999/xhtml\"</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">head</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">http-equiv</span>=<span class=\"hljs-value\">\"Content-Type\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"text/html; charset=utf-8\"</span> /&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">title</span>&gt;</span>jQuery实现网页右下角悬浮层提示<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">title</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">style</span> <span class=\"hljs-attribute\">type</span>=<span class=\"hljs-value\">\"text/css\"</span>&gt;</span><span class=\"css\">\n            *<span class=\"hljs-rules\">{<span class=\"hljs-rule\"><span class=\"hljs-attribute\">margin</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">0</span></span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">padding</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">0</span></span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">list-style-type</span>:<span class=\"hljs-value\">none</span></span>;<span class=\"hljs-rule\">}</span></span>\n            <span class=\"hljs-tag\">a</span>,<span class=\"hljs-tag\">img</span><span class=\"hljs-rules\">{<span class=\"hljs-rule\"><span class=\"hljs-attribute\">border</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">0</span></span></span>;<span class=\"hljs-rule\">}</span></span>\n            <span class=\"hljs-tag\">body</span><span class=\"hljs-rules\">{<span class=\"hljs-rule\"><span class=\"hljs-attribute\">font</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">12</span>px/<span class=\"hljs-number\">180</span>% Arial, Helvetica, sans-serif, <span class=\"hljs-string\">\"新宋体\"</span></span></span>;<span class=\"hljs-rule\">}</span></span>\n\n            <span class=\"hljs-comment\">/* pop */</span>\n            <span class=\"hljs-id\">#pop</span><span class=\"hljs-rules\">{<span class=\"hljs-rule\"><span class=\"hljs-attribute\">background</span>:<span class=\"hljs-value\"><span class=\"hljs-hexcolor\">#fff</span></span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">width</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">260</span>px</span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">border</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">1</span>px solid <span class=\"hljs-hexcolor\">#e0e0e0</span></span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">font-size</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">12</span>px</span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">position</span>:<span class=\"hljs-value\">fixed</span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">right</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">10</span>px</span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">bottom</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">10</span>px</span></span>;<span class=\"hljs-rule\">}</span></span>\n            <span class=\"hljs-id\">#popHead</span><span class=\"hljs-rules\">{<span class=\"hljs-rule\"><span class=\"hljs-attribute\">line-height</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">32</span>px</span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">background</span>:<span class=\"hljs-value\"><span class=\"hljs-hexcolor\">#f6f0f3</span></span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">border-bottom</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">1</span>px solid <span class=\"hljs-hexcolor\">#e0e0e0</span></span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">position</span>:<span class=\"hljs-value\">relative</span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">font-size</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">12</span>px</span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">padding</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">0</span> <span class=\"hljs-number\">0</span> <span class=\"hljs-number\">0</span> <span class=\"hljs-number\">10</span>px</span></span>;<span class=\"hljs-rule\">}</span></span>\n            <span class=\"hljs-id\">#popHead</span> <span class=\"hljs-tag\">h2</span><span class=\"hljs-rules\">{<span class=\"hljs-rule\"><span class=\"hljs-attribute\">font-size</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">14</span>px</span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">color</span>:<span class=\"hljs-value\"><span class=\"hljs-hexcolor\">#666</span></span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">line-height</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">32</span>px</span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">height</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">32</span>px</span></span>;<span class=\"hljs-rule\">}</span></span>\n            <span class=\"hljs-id\">#popHead</span> <span class=\"hljs-id\">#popClose</span><span class=\"hljs-rules\">{<span class=\"hljs-rule\"><span class=\"hljs-attribute\">position</span>:<span class=\"hljs-value\">absolute</span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">right</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">10</span>px</span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">top</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">1</span>px</span></span>;<span class=\"hljs-rule\">}</span></span>\n            <span class=\"hljs-id\">#popHead</span> <span class=\"hljs-tag\">a</span><span class=\"hljs-id\">#popClose</span><span class=\"hljs-pseudo\">:hover</span><span class=\"hljs-rules\">{<span class=\"hljs-rule\"><span class=\"hljs-attribute\">color</span>:<span class=\"hljs-value\"><span class=\"hljs-hexcolor\">#f00</span></span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">cursor</span>:<span class=\"hljs-value\">pointer</span></span>;<span class=\"hljs-rule\">}</span></span>\n            <span class=\"hljs-id\">#popContent</span><span class=\"hljs-rules\">{<span class=\"hljs-rule\"><span class=\"hljs-attribute\">padding</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">5</span>px <span class=\"hljs-number\">10</span>px</span></span>;<span class=\"hljs-rule\">}</span></span>\n            <span class=\"hljs-id\">#popTitle</span> <span class=\"hljs-tag\">a</span><span class=\"hljs-rules\">{<span class=\"hljs-rule\"><span class=\"hljs-attribute\">line-height</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">24</span>px</span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">font-size</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">14</span>px</span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">font-family</span>:<span class=\"hljs-value\"><span class=\"hljs-string\">\'微软雅黑\'</span></span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">color</span>:<span class=\"hljs-value\"><span class=\"hljs-hexcolor\">#333</span></span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">font-weight</span>:<span class=\"hljs-value\">bold</span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">text-decoration</span>:<span class=\"hljs-value\">none</span></span>;<span class=\"hljs-rule\">}</span></span>\n            <span class=\"hljs-id\">#popTitle</span> <span class=\"hljs-tag\">a</span><span class=\"hljs-pseudo\">:hover</span><span class=\"hljs-rules\">{<span class=\"hljs-rule\"><span class=\"hljs-attribute\">color</span>:<span class=\"hljs-value\"><span class=\"hljs-hexcolor\">#f60</span></span></span>;<span class=\"hljs-rule\">}</span></span>\n            <span class=\"hljs-id\">#popIntro</span><span class=\"hljs-rules\">{<span class=\"hljs-rule\"><span class=\"hljs-attribute\">text-indent</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">24</span>px</span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">line-height</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">160</span>%</span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">margin</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">5</span>px <span class=\"hljs-number\">0</span></span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">color</span>:<span class=\"hljs-value\"><span class=\"hljs-hexcolor\">#666</span></span></span>;<span class=\"hljs-rule\">}</span></span>\n            <span class=\"hljs-id\">#popMore</span><span class=\"hljs-rules\">{<span class=\"hljs-rule\"><span class=\"hljs-attribute\">text-align</span>:<span class=\"hljs-value\">right</span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">border-top</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">1</span>px dotted <span class=\"hljs-hexcolor\">#ccc</span></span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">line-height</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">24</span>px</span></span>;<span class=\"hljs-rule\"><span class=\"hljs-attribute\">margin</span>:<span class=\"hljs-value\"><span class=\"hljs-number\">8</span>px <span class=\"hljs-number\">0</span> <span class=\"hljs-number\">0</span> <span class=\"hljs-number\">0</span></span></span>;<span class=\"hljs-rule\">}</span></span>\n            <span class=\"hljs-id\">#popMore</span> <span class=\"hljs-tag\">a</span><span class=\"hljs-rules\">{<span class=\"hljs-rule\"><span class=\"hljs-attribute\">color</span>:<span class=\"hljs-value\"><span class=\"hljs-hexcolor\">#f60</span></span></span>;<span class=\"hljs-rule\">}</span></span>\n            <span class=\"hljs-id\">#popMore</span> <span class=\"hljs-tag\">a</span><span class=\"hljs-pseudo\">:hover</span><span class=\"hljs-rules\">{<span class=\"hljs-rule\"><span class=\"hljs-attribute\">color</span>:<span class=\"hljs-value\"><span class=\"hljs-hexcolor\">#f00</span></span></span>;<span class=\"hljs-rule\">}</span></span>\n        </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">style</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">head</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">body</span> <span class=\"hljs-attribute\">style</span>=<span class=\"hljs-value\">\"height:1200px;\"</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">script</span> <span class=\"hljs-attribute\">type</span>=<span class=\"hljs-value\">\"text/javascript\"</span> <span class=\"hljs-attribute\">src</span>=<span class=\"hljs-value\">\"js/jquery.min.js\"</span>&gt;</span><span class=\"javascript\"></span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">script</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">script</span> <span class=\"hljs-attribute\">type</span>=<span class=\"hljs-value\">\"text/javascript\"</span>&gt;</span><span class=\"javascript\">\n            (<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">($j)</span>{</span>\n                $j.positionFixed = <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">(el)</span>{</span>\n                    $j(el).each(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">()</span>{</span>\n                        <span class=\"hljs-keyword\">new</span> fixed(<span class=\"hljs-keyword\">this</span>)\n                    })\n                    <span class=\"hljs-keyword\">return</span> el;                  \n                }\n                $j.fn.positionFixed = <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">()</span>{</span>\n                    <span class=\"hljs-keyword\">return</span> $j.positionFixed(<span class=\"hljs-keyword\">this</span>)\n                }\n                <span class=\"hljs-keyword\">var</span> fixed = $j.positionFixed.impl = <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">(el)</span>{</span>\n                    <span class=\"hljs-keyword\">var</span> o=<span class=\"hljs-keyword\">this</span>;\n                    o.sts={\n                        target : $j(el).css(<span class=\"hljs-string\">\'position\'</span>,<span class=\"hljs-string\">\'fixed\'</span>),\n                        container : $j(window)\n                    }\n                    o.sts.currentCss = {\n                        top : o.sts.target.css(<span class=\"hljs-string\">\'top\'</span>),              \n                        right : o.sts.target.css(<span class=\"hljs-string\">\'right\'</span>),              \n                        bottom : o.sts.target.css(<span class=\"hljs-string\">\'bottom\'</span>),                \n                        left : o.sts.target.css(<span class=\"hljs-string\">\'left\'</span>)             \n                    }\n                    <span class=\"hljs-keyword\">if</span>(!o.ie6)<span class=\"hljs-keyword\">return</span>;\n                    o.bindEvent();\n                }\n                $j.extend(fixed.prototype,{\n                    ie6 : $.browser.msie &amp;&amp; $.browser.version &lt; <span class=\"hljs-number\">7.0</span>,\n                    bindEvent : <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">()</span>{</span>\n                        <span class=\"hljs-keyword\">var</span> o=<span class=\"hljs-keyword\">this</span>;\n                        o.sts.target.css(<span class=\"hljs-string\">\'position\'</span>,<span class=\"hljs-string\">\'absolute\'</span>)\n                        o.overRelative().initBasePos();\n                        o.sts.target.css(o.sts.basePos)\n                        o.sts.container.scroll(o.scrollEvent()).resize(o.resizeEvent());\n                        o.setPos();\n                    },\n                    overRelative : <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">()</span>{</span>\n                        <span class=\"hljs-keyword\">var</span> o=<span class=\"hljs-keyword\">this</span>;\n                        <span class=\"hljs-keyword\">var</span> relative = o.sts.target.parents().filter(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">()</span>{</span>\n                            <span class=\"hljs-keyword\">if</span>($j(<span class=\"hljs-keyword\">this</span>).css(<span class=\"hljs-string\">\'position\'</span>)==<span class=\"hljs-string\">\'relative\'</span>)<span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>;\n                        })\n                        <span class=\"hljs-keyword\">if</span>(relative.size()&gt;<span class=\"hljs-number\">0</span>)relative.after(o.sts.target)\n                        <span class=\"hljs-keyword\">return</span> o;\n                    },\n                    initBasePos : <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">()</span>{</span>\n                        <span class=\"hljs-keyword\">var</span> o=<span class=\"hljs-keyword\">this</span>;\n                        o.sts.basePos = {\n                            top: o.sts.target.offset().top - (o.sts.currentCss.top==<span class=\"hljs-string\">\'auto\'</span>?o.sts.container.scrollTop():<span class=\"hljs-number\">0</span>),\n                            left: o.sts.target.offset().left - (o.sts.currentCss.left==<span class=\"hljs-string\">\'auto\'</span>?o.sts.container.scrollLeft():<span class=\"hljs-number\">0</span>)\n                        }\n                        <span class=\"hljs-keyword\">return</span> o;\n                    },\n                    setPos : <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">()</span>{</span>\n                        <span class=\"hljs-keyword\">var</span> o=<span class=\"hljs-keyword\">this</span>;\n                        o.sts.target.css({\n                            top: o.sts.container.scrollTop() + o.sts.basePos.top,\n                            left: o.sts.container.scrollLeft() + o.sts.basePos.left\n                        })\n                    },\n                    scrollEvent : <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">()</span>{</span>\n                        <span class=\"hljs-keyword\">var</span> o=<span class=\"hljs-keyword\">this</span>;\n                        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">()</span>{</span>\n                            o.setPos();\n                        }\n                    },\n                    resizeEvent : <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">()</span>{</span>\n                        <span class=\"hljs-keyword\">var</span> o=<span class=\"hljs-keyword\">this</span>;\n                        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">()</span>{</span>\n                            setTimeout(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">()</span>{</span>\n                                o.sts.target.css(o.sts.currentCss)      \n                                o.initBasePos();\n                                o.setPos()\n                            },<span class=\"hljs-number\">1</span>)    \n                        }           \n                    }\n                })\n            })(jQuery)\n            <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">Pop</span><span class=\"hljs-params\">(title,url,intro)</span>{</span>\n                <span class=\"hljs-keyword\">this</span>.title=title;\n                <span class=\"hljs-keyword\">this</span>.url=url;\n                <span class=\"hljs-keyword\">this</span>.intro=intro;\n                <span class=\"hljs-keyword\">this</span>.apearTime=<span class=\"hljs-number\">1000</span>;\n                <span class=\"hljs-keyword\">this</span>.hideTime=<span class=\"hljs-number\">500</span>;\n                <span class=\"hljs-keyword\">this</span>.delay=<span class=\"hljs-number\">10000</span>;\n                <span class=\"hljs-comment\">//添加信息</span>\n                <span class=\"hljs-keyword\">this</span>.addInfo();\n                <span class=\"hljs-comment\">//显示</span>\n                <span class=\"hljs-keyword\">this</span>.showDiv();\n                <span class=\"hljs-comment\">//关闭</span>\n              <span class=\"hljs-keyword\">this</span>.closeDiv();\n            }\n            Pop.prototype={\n              addInfo:<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">()</span>{</span>\n                $(<span class=\"hljs-string\">\"#popTitle a\"</span>).attr(<span class=\"hljs-string\">\'href\'</span>,<span class=\"hljs-keyword\">this</span>.url).html(<span class=\"hljs-keyword\">this</span>.title);\n                $(<span class=\"hljs-string\">\"#popIntro\"</span>).html(<span class=\"hljs-keyword\">this</span>.intro);\n                $(<span class=\"hljs-string\">\"#popMore a\"</span>).attr(<span class=\"hljs-string\">\'href\'</span>,<span class=\"hljs-keyword\">this</span>.url);\n              },\n              showDiv:<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">(time)</span>{</span>\n                    <span class=\"hljs-keyword\">if</span> (!($.browser.msie &amp;&amp; ($.browser.version == <span class=\"hljs-string\">\"6.0\"</span>) &amp;&amp; !$.support.style)) {\n                  $(<span class=\"hljs-string\">\'#pop\'</span>).slideDown(<span class=\"hljs-keyword\">this</span>.apearTime).delay(<span class=\"hljs-keyword\">this</span>.delay).fadeOut(<span class=\"hljs-number\">400</span>);;\n                } <span class=\"hljs-keyword\">else</span>{<span class=\"hljs-comment\">//调用jquery.fixed.js,解决ie6不能用fixed</span>\n                  $(<span class=\"hljs-string\">\'#pop\'</span>).show();\n                        jQuery(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">($j)</span>{</span>\n                            $j(<span class=\"hljs-string\">\'#pop\'</span>).positionFixed()\n                        })\n                }\n              },\n              closeDiv:<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">()</span>{</span>\n                $(<span class=\"hljs-string\">\"#popClose\"</span>).click(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">()</span>{</span>\n                      $(<span class=\"hljs-string\">\'#pop\'</span>).hide();\n                    }\n                );\n              }\n            }\n        </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">script</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">script</span> <span class=\"hljs-attribute\">type</span>=<span class=\"hljs-value\">\"text/javascript\"</span> &gt;</span><span class=\"javascript\">\n        <span class=\"hljs-comment\">//页面加载调用</span>\n        window.onload=<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span><span class=\"hljs-params\">()</span>{</span>\n            <span class=\"hljs-comment\">//使用参数：1.标题，2.链接地址，3.内容简介</span>\n            <span class=\"hljs-keyword\">new</span> Pop(<span class=\"hljs-string\">\"这里是标题，哈哈\"</span>,\n                <span class=\"hljs-string\">\"http://www.xttblog.com\"</span>,\n                <span class=\"hljs-string\">\"欢迎大家关注我的博客！如有疑问,请加QQ群：135430763共同学习！\"</span>);\n        }\n        </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">script</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">div</span> <span class=\"hljs-attribute\">id</span>=<span class=\"hljs-value\">\"pop\"</span> <span class=\"hljs-attribute\">style</span>=<span class=\"hljs-value\">\"display:none;\"</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">div</span> <span class=\"hljs-attribute\">id</span>=<span class=\"hljs-value\">\"popHead\"</span>&gt;</span> <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">a</span> <span class=\"hljs-attribute\">id</span>=<span class=\"hljs-value\">\"popClose\"</span> <span class=\"hljs-attribute\">title</span>=<span class=\"hljs-value\">\"关闭\"</span>&gt;</span>关闭<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">a</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">h2</span>&gt;</span>温馨提示<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">h2</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">div</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">div</span> <span class=\"hljs-attribute\">id</span>=<span class=\"hljs-value\">\"popContent\"</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">dl</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">dt</span> <span class=\"hljs-attribute\">id</span>=<span class=\"hljs-value\">\"popTitle\"</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">a</span> <span class=\"hljs-attribute\">href</span>=<span class=\"hljs-value\">\"http://blog.csdn.net/xmtblog/\"</span> <span class=\"hljs-attribute\">target</span>=<span class=\"hljs-value\">\"_blank\"</span>&gt;</span>这里是标题<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">dt</span>&gt;</span>\n                    <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">dd</span> <span class=\"hljs-attribute\">id</span>=<span class=\"hljs-value\">\"popIntro\"</span>&gt;</span>这里是内容简介<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">dd</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">dl</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">p</span> <span class=\"hljs-attribute\">id</span>=<span class=\"hljs-value\">\"popMore\"</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">a</span> <span class=\"hljs-attribute\">href</span>=<span class=\"hljs-value\">\"http://blog.csdn.net/xmtblog/\"</span> <span class=\"hljs-attribute\">target</span>=<span class=\"hljs-value\">\"_blank\"</span>&gt;</span>查看 »<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">p</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">div</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">div</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">div</span> <span class=\"hljs-attribute\">style</span>=<span class=\"hljs-value\">\"text-align:center;clear:both\"</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">p</span>&gt;</span>欢迎大家关注我的个人博客，或者加qq群135430763共同学习！<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">p</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">p</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">a</span> <span class=\"hljs-attribute\">href</span>=<span class=\"hljs-value\">\"http://blog.csdn.net/xmtblog/\"</span> <span class=\"hljs-attribute\">target</span>=<span class=\"hljs-value\">\"_blank\"</span>&gt;</span>伪专家<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">p</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">div</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">html</span>&gt;</span></code></pre>\n\n<hr>\n\n<p>欢迎大家关注我的博客！如有疑问,请加QQ群：135430763共同学习！</p></div>\n        <script type=\"text/javascript\">\n            $(function () {\n                $(\'pre.prettyprint code\').each(function () {\n                    var lines = $(this).text().split(\'\\n\').length;\n                    var $numbering = $(\'<ul/>\').addClass(\'pre-numbering\').hide();\n                    $(this).addClass(\'has-numbering\').parent().append($numbering);\n                    for (i = 1; i <= lines; i++) {\n                        $numbering.append($(\'<li/>\').text(i));\n                    };\n                    $numbering.fadeIn(1700);\n                });\n            });\n        </script>\n   \n', '2016-04-16 01:21:33', '1');
INSERT INTO `article` VALUES ('10139', '10003', 'HTML5CanvasAPI详解', '\n\nHTML5 是一个新兴标准，它正在以越来越快的速度替代久经考验的 HTML4。HTML5 是一个 W3C “工作草案” — 意味着它仍然处于开发阶段 — 它包含丰富的元素和属性，它们都支持现行的 HTML 4.01 版本规范。它还引入了几个新元素和属性，它们适用许多使用 web 页面的领域 — 音频、视频、图形、数据存储、内容呈现，等等。本文主要关注图形方面的增强：canvas。<br>\n新的 HTML5 canvas 是一个原生 HTML 绘图簿，用于 JavaScript 代码，不使用第三方工具。跨所有 web 浏览器的完整 HTML5 支持还没有完成，但在新兴的支持中，canvas 已经可以在几乎所有现代浏览器上良好运行了，但 Windows® Internet Explorer® 除外。幸运的是，一个解决方案已经出现，将 Internet Explorer 也包含进来。<br>\n本质上，canvas 元素是一个白板，直到您在它上面 “绘制” 一些可视内容。与拥有各种画笔的艺术家不同，您使用不同的方法在 canvas 上作画。您甚至可以在 canvas 上创建并操作动画，这不是使用画笔和油彩所能够实现的。\n<p><strong>Canvas API（画布）用于在网页实时生成图像，并且可以操作图像内容，基本上它是一个可以用JavaScript操作的位图（bitmap）。<br>\n使用前，首先需要新建一个canvas网页元素。</strong></p>\n<pre code_snippet_id=\"601613\" snippet_file_name=\"blog_20150210_1_5673374\" name=\"code\" class=\"html\">&lt;canvas id=&quot;myCanvas&quot; width=&quot;400&quot; height=&quot;200&quot;&gt;\n    您的浏览器不支持canvas！\n&lt;/canvas&gt;\n&lt;!-- 如果浏览器不支持这个API，则就会显示canvas标签中间的文字——“您的浏览器不支持canvas！”。 --&gt;</pre>每个canvas元素都有一个对应的context对象（上下文对象），Canvas API定义在这个context对象上面，所以需要获取这个对象，方法是使用getContext方法。<br>\n<pre code_snippet_id=\"601613\" snippet_file_name=\"blog_20150210_2_4994513\" name=\"code\" class=\"javascript\">var canvas = document.getElementById(&#39;myCanvas&#39;);\nif (canvas.getContext) {\n    var ctx = canvas.getContext(&#39;2d&#39;);\n}\n// getContext方法指定参数2d，表示该canvas对象用于生成2D图案（即平面图案）。如果参数是3d，就表示用于生成3D图像（即立体图案），这部分实际上单独叫做WebGL API（看博主其他文章）。 </pre>canvas画布提供了一个用来作图的平面空间，该空间的每个点都有自己的坐标，x表示横坐标，y表示竖坐标。原点(0, 0)位于图像左上角，x轴的正向是原点向右，y轴的正向是原点向下。<br>\n<strong>绘制路径</strong><br>\nbeginPath方法表示开始绘制路径，moveTo(x, y)方法设置线段的起点，lineTo(x, y)方法设置线段的终点，stroke方法用来给透明的线段着色。<br>\n<pre code_snippet_id=\"601613\" snippet_file_name=\"blog_20150210_3_5045999\" name=\"code\" class=\"javascript\">ctx.beginPath(); // 开始路径绘制\nctx.moveTo(20, 20); // 设置路径起点，坐标为(20,20)\nctx.lineTo(200, 20); // 绘制一条到(200,20)的直线\nctx.lineWidth = 1.0; // 设置线宽\nctx.strokeStyle = &quot;#CC0000&quot;; // 设置线的颜色\nctx.stroke(); // 进行线的着色，这时整条线才变得可见\n//moveto和lineto方法可以多次使用。最后，还可以使用closePath方法，自动绘制一条当前点到起点的直线，形成一个封闭图形，省却使用一次lineto方法。</pre><strong>绘制矩形</strong><br>\nfillRect(x, y, width, height)方法用来绘制矩形，它的四个参数分别为矩形左上角顶点的x坐标、y坐标，以及矩形的宽和高。fillStyle属性用来设置矩形的填充色。<br>\n<pre code_snippet_id=\"601613\" snippet_file_name=\"blog_20150210_4_7290096\" name=\"code\" class=\"javascript\">ctx.fillStyle = &#39;yellow&#39;;\nctx.fillRect(50, 50, 200, 100);\n//strokeRect方法与fillRect类似，用来绘制空心矩形。\nctx.strokeRect(10,10,200,100);\n//clearRect方法用来清除某个矩形区域的内容。\nctx.clearRect(100,50,50,50);</pre><strong>绘制文本</strong><br>\nfillText(string, x, y) 用来绘制文本，它的三个参数分别为文本内容、起点的x坐标、y坐标。使用之前，需用font设置字体、大小、样式（写法类&#20284;与CSS的font属性）。与此类&#20284;的还有strokeText方法，用来添加空心字。<pre code_snippet_id=\"601613\" snippet_file_name=\"blog_20150210_5_1693784\" name=\"code\" class=\"javascript\">// 设置字体\nctx.font = &quot;Bold 20px Arial&quot;; \n// 设置对齐方式\nctx.textAlign = &quot;left&quot;;\n// 设置填充颜色\nctx.fillStyle = &quot;#008600&quot;; \n// 设置字体内容，以及在画布上的位置\nctx.fillText(&quot;Hello!&quot;, 10, 50); \n// 绘制空心字\nctx.strokeText(&quot;Hello!&quot;, 10, 100);\n//fillText方法不支持文本断行，即所有文本出现在一行内。所以，如果要生成多行文本，只有调用多次fillText方法。</pre><strong>绘制圆形和扇形</strong><br>\narc方法用来绘制扇形<pre code_snippet_id=\"601613\" snippet_file_name=\"blog_20150210_6_8397983\" name=\"code\" class=\"javascript\">ctx.arc(x, y, radius, startAngle, endAngle, anticlockwise);\n//arc方法的x和y参数是圆心坐标，radius是半径，startAngle和endAngle则是扇形的起始角度和终止角度（以弧度表示）//，anticlockwise表示做图时应该逆时针画（true）还是顺时针画（false）\n//绘制实心的圆形\nctx.beginPath(); \nctx.arc(60, 60, 50, 0, Math.PI*2, true); \nctx.fillStyle = &quot;#000000&quot;; \nctx.fill();\n//绘制空心圆形\nctx.beginPath(); \nctx.arc(60, 60, 50, 0, Math.PI*2, true); \nctx.lineWidth = 1.0; \nctx.strokeStyle = &quot;#000&quot;; \nctx.stroke();</pre><strong>设置渐变色</strong><br>\ncreateLinearGradient方法用来设置渐变色。<pre code_snippet_id=\"601613\" snippet_file_name=\"blog_20150210_7_3989368\" name=\"code\" class=\"javascript\">var myGradient = ctx.createLinearGradient(0, 0, 0, 160); \nmyGradient.addColorStop(0, &quot;#BABABA&quot;); \nmyGradient.addColorStop(1, &quot;#636363&quot;);\n//createLinearGradient方法的参数是(x1, y1, x2, y2)，其中x1和y1是起点坐标，x2和y2是终点坐标。通过不同的坐标值，可以生成从上至下、从左到右的渐变等等\nctx.fillStyle = myGradient;\nctx.fillRect(10,10,200,100);</pre><strong>设置阴影</strong><br>\n一系列与阴影相关的方法，可以用来设置阴影。<pre code_snippet_id=\"601613\" snippet_file_name=\"blog_20150210_8_6723833\" name=\"code\" class=\"javascript\">ctx.shadowOffsetX = 10; // 设置水平位移\nctx.shadowOffsetY = 10; // 设置垂直位移\nctx.shadowBlur = 5; // 设置模糊度\nctx.shadowColor = &quot;rgba(0,0,0,0.5)&quot;; // 设置阴影颜色\nctx.fillStyle = &quot;#CC0000&quot;; \nctx.fillRect(10,10,200,100);</pre>\n<p>\n<pre code_snippet_id=\"601613\" snippet_file_name=\"blog_20150210_9_886758\" name=\"code\" class=\"javascript\">//canvas允许将图像文件插入画布，做法是读取图片后，使用drawImage方法在画布内进行重绘。\nvar img = new Image();\nimg.src = &quot;image.png&quot;;\nctx.drawImage(img, 0, 0); // 设置对应的图像对象，以及它在画布上的位置\n//由于图像的载入需要时间，drawImage方法只能在图像完全载入后才能调用，因此上面的代码需要改写。\nvar image = new Image(); \nimage.onload = function() { \n    if (image.width != canvas.width)\n        canvas.width = image.width;\n    if (image.height != canvas.height)\n        canvas.height = image.height;\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.drawImage(image, 0, 0);\n} \nimage.src = &quot;image.png&quot;;\n//drawImage()方法接受三个参数，第一个参数是图像文件的DOM元素（即img标签），第二个和第三个参数是图像左上角在//Canvas元素中的坐标，上例中的（0, 0）就表示将图像左上角放置在Canvas元素的左上角。\n\n//getImageData方法可以用来读取Canvas的内容，返回一个对象，包含了每个像素的信息。\nvar imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n//imageData对象有一个data属性，它的值是一个一维数组。该数组的值，依次是每个像素的红、绿、蓝、alpha通道值，因//此该数组的长度等于 图像的像素宽度 x 图像的像素高度 x 4，每个值的范围是0–255。这个数组不仅可读，而且可写，//因此通过操作这个数组的值，就可以达到操作图像的目的。修改这个数组以后，使用putImageData方法将数组内容重新绘//制在Canvas上。\ncontext.putImageData(imageData, 0, 0);\n\n//对图像数据做出修改以后，可以使用toDataURL方法，将Canvas数据重新转化成一般的图像文件形式。\nfunction convertCanvasToImage(canvas) {\n  var image = new Image();\n  image.src = canvas.toDataURL(&quot;image/png&quot;);\n  return image;\n}\n\n//save方法用于保存上下文环境，restore方法用于恢复到上一次保存的上下文环境。\nctx.save(); \nctx.shadowOffsetX = 10;\nctx.shadowOffsetY = 10;\nctx.shadowBlur = 5;\nctx.shadowColor = &quot;rgba(0,0,0,0.5)&quot;;\nctx.fillStyle = &quot;#CC0000&quot;;\nctx.fillRect(10,10,150,100);\nctx.restore(); \nctx.fillStyle = &quot;#000000&quot;;\nctx.fillRect(180,10,150,100);\n//先用save方法，保存了当前设置，然后绘制了一个有阴影的矩形。接着，使用restore方法，恢复了保存前的设置，绘制//了一个没有阴影的矩形\n\n//利用JavaScript，可以在canvas元素上很容易地产生动画效果\nvar posX = 20,\n    posY = 100;\nsetInterval(function() {\n    context.fillStyle = &quot;black&quot;;\n    context.fillRect(0,0,canvas.width, canvas.height);\n    posX += 1;\n    posY += 0.25;\n    context.beginPath();\n    context.fillStyle = &quot;white&quot;;\n    context.arc(posX, posY, 10, 0, Math.PI*2, true); \n    context.closePath();\n    context.fill();\n}, 30);\n//产生一个小圆点，每隔30毫秒就向右下方移动的效果。setInterval函数的一开始，之所以要将画布重新渲染黑色底色，//是为了抹去上一步的小圆点。\n//通过设置圆心坐标，可以产生各种运动轨迹。\n//先上升后下降。\nvar vx = 10,\n    vy = -10,\n    gravity = 1;\nsetInterval(function() {\n    posX += vx;\n    posY += vy;\n    vy += gravity;\n    // ...\n});\n//x坐标始终增大，表示持续向右运动。y坐标先变小，然后在重力作用下，不断增大，表示先上升后下降。\n//小球不断反弹后，逐步趋于静止\nvar vx = 10,\n    vy = -10,\n    gravity = 1;\nsetInterval(function() {\n    posX += vx;\n    posY += vy;\n    if (posY &gt; canvas.height * 0.75) {\n          vy *= -0.6;\n          vx *= 0.75;\n          posY = canvas.height * 0.75;\n    }\n    vy += gravity;\n    // ...\n});\n//一旦小球的y坐标处于屏幕下方75%的位置，向x轴移动的速度变为原来的75%，而向y轴反弹上一次反弹高度的40%。\n\n//通过getImageData方法和putImageData方法，可以处理每个像素，进而操作图像内容。\n//假定filter是一个处理像素的函数，那么整个对Canvas的处理流程，可以用下面的代码表示。\nif (canvas.width &gt; 0 &amp;&amp; canvas.height &gt; 0) {\n    var imageData = context.getImageData(0, 0, canvas.width, canvas.height);\n    filter(imageData);\n    context.putImageData(imageData, 0, 0);\n}\n\n//以下是几种常见的处理方法。\n//灰度图（grayscale）就是取红、绿、蓝三个像素值的算术平均值，这实际上将图像转成了黑白形式。假定d[i]是像素数组中一个象素的红色值，则d[i+1]为绿色值，d[i+2]为蓝色值，d[i+3]就//是alpha通道值。转成灰度的算法，就是将红、绿、蓝三个值相加后除以3，再将结果写回数组。\ngrayscale = function (pixels) {\n    var d = pixels.data;\n    for (var i = 0; i &lt; d.length; i += 4) {\n      var r = d[i];\n      var g = d[i + 1];\n      var b = d[i + 2];\n      d[i] = d[i + 1] = d[i + 2] = (r+g+b)/3;\n    }\n    return pixels;\n};\n\n//复古效果（sepia）则是将红、绿、蓝三个像素，分别取这三个值的某种加权平均值，使得图像有一种古旧的效果。\nsepia = function (pixels) {\n    var d = pixels.data;\n    for (var i = 0; i &lt; d.length; i += 4) {\n      var r = d[i];\n      var g = d[i + 1];\n      var b = d[i + 2];\n      d[i]     = (r * 0.393)+(g * 0.769)+(b * 0.189); // red\n      d[i + 1] = (r * 0.349)+(g * 0.686)+(b * 0.168); // green\n      d[i + 2] = (r * 0.272)+(g * 0.534)+(b * 0.131); // blue\n    }\n    return pixels;\n};\n\n//红色蒙版指的是，让图像呈现一种偏红的效果。算法是将红色通道设为红、绿、蓝三个值的平均值，而将绿色通道和蓝色通道都设为0。\nred = function (pixels) { \n    var d = pixels.data;\n    for (var i = 0; i &lt; d.length; i += 4) {\n      var r = d[i];\n      var g = d[i + 1];\n      var b = d[i + 2];\n      d[i] = (r+g+b)/3;        // 红色通道取平均值\n      d[i + 1] = d[i + 2] = 0; // 绿色通道和蓝色通道都设为0\n    }\n    return pixels;\n};\n\n//亮度效果（brightness）是指让图像变得更亮或更暗。算法将红色通道、绿色通道、蓝色通道，同时加上一个正值或负值。\nbrightness = function (pixels, delta) {\n    var d = pixels.data;\n    for (var i = 0; i &lt; d.length; i += 4) {\n          d[i] += delta;     // red\n          d[i + 1] += delta; // green\n          d[i + 2] += delta; // blue   \n    }\n    return pixels;\n};\n\n//反转效果（invert）是指图片呈现一种色彩颠倒的效果。算法为红、绿、蓝通道都取各自的相反值（255-原值）。\ninvert = function (pixels) {\n    var d = pixels.data;\n    for (var i = 0; i &lt; d.length; i += 4) {\n        d[i] = 255 - d[i];\n        d[i+1] = 255 - d[i + 1];\n        d[i+2] = 255 - d[i + 2];\n    }\n    return pixels;\n};\n</pre>如有不懂，请加qq群：135430763共同学习！\n   \n', '2016-04-16 01:21:34', '1');
INSERT INTO `article` VALUES ('10140', '10003', 'Html5Web的5中离线存储方式之localStorage', '\n        <div class=\"markdown_views\"><h1 id=\"html5-web的5中离线存储方式之localstorage\">Html5 Web的5中离线存储方式之localStorage</h1>\n\n<p>在HTML5越来越流行的今天，如果你还不知道离线存储，那就说明你落后了很多。 <br>\nHTML5的离线存储方式有多种：Web SQL Database、LocalStorage、Cookie、WebStorage、IndexedDB、FileSystem。 <br>\nWeb SQL Database目前虽然还有浏览器支持，是唯一的关系数据库结构的存储，但W3C以及停止对其的维护和发展。我就不多说了。 <br>\n今天我们主要看LocalStorage这种最简单的本地存储方式。</p>\n\n\n\n<h3 id=\"先来看一个小例子\">先来看一个小例子</h3>\n\n<pre class=\"prettyprint\"><code class=\"language-html hljs \"><span class=\"hljs-doctype\">&lt;!DOCTYPE html&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">html</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">head</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">charset</span>=<span class=\"hljs-value\">\"utf-8\"</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">meta</span> <span class=\"hljs-attribute\">name</span>=<span class=\"hljs-value\">\"viewport\"</span> <span class=\"hljs-attribute\">content</span>=<span class=\"hljs-value\">\"width=device-width, initial-scale=1\"</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">title</span>&gt;</span>HTML5中LocalStorage的使用<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">title</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">head</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">body</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">p</span>&gt;</span>\n  你浏览当前页面\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">span</span> <span class=\"hljs-attribute\">id</span>=<span class=\"hljs-value\">\"count\"</span>&gt;</span>N<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">span</span>&gt;</span>\n  次.\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">p</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-title\">script</span>&gt;</span><span class=\"javascript\">\n    <span class=\"hljs-keyword\">if</span> (!localStorage.pageLoadCount)\n        localStorage.pageLoadCount = <span class=\"hljs-number\">0</span>;\n    localStorage.pageLoadCount = <span class=\"hljs-built_in\">parseInt</span>(localStorage.pageLoadCount) + <span class=\"hljs-number\">1</span>;\n    document.getElementById(<span class=\"hljs-string\">\'count\'</span>).textContent = localStorage.pageLoadCount;\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">script</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-title\">html</span>&gt;</span></code></pre>\n\n\n\n<h2 id=\"看看运行效果\">看看运行效果<img src=\"http://img.blog.csdn.net/20150505110811147\" alt=\"这里写图片描述\" title=\"\"></h2>\n\n<pre class=\"prettyprint\"><code class=\"language-javascript hljs \"><span class=\"hljs-comment\">/**\n * 保存/更新数据\n */</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">saveDm</span><span class=\"hljs-params\">(dataModel)</span>{</span>\n    window.localStorage[<span class=\"hljs-string\">\'DataModel\'</span>] = dataModel;\n}\n\n<span class=\"hljs-comment\">/**\n * 获取数据\n */</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">getDm</span><span class=\"hljs-params\">()</span>{</span>  \n    <span class=\"hljs-keyword\">var</span> value = window.localStorage[<span class=\"hljs-string\">\'DataModel\'</span>];\n    <span class=\"hljs-keyword\">if</span>(value){\n        <span class=\"hljs-keyword\">return</span> value;\n    }    \n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">\'\'</span>;\n}\n\n<span class=\"hljs-comment\">/**\n * 删除数据\n */</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">clearDm</span><span class=\"hljs-params\">()</span>{</span>\n    <span class=\"hljs-keyword\">if</span>(window.localStorage[<span class=\"hljs-string\">\'DataModel\'</span>]){\n        <span class=\"hljs-keyword\">delete</span> window.localStorage[<span class=\"hljs-string\">\'DataModel\'</span>];        \n    }   \n}</code></pre>\n\n<p>欢迎大家关注我的博客！如有疑问,请加QQ群：135430763共同学习！</p></div>\n        <script type=\"text/javascript\">\n            $(function () {\n                $(\'pre.prettyprint code\').each(function () {\n                    var lines = $(this).text().split(\'\\n\').length;\n                    var $numbering = $(\'<ul/>\').addClass(\'pre-numbering\').hide();\n                    $(this).addClass(\'has-numbering\').parent().append($numbering);\n                    for (i = 1; i <= lines; i++) {\n                        $numbering.append($(\'<li/>\').text(i));\n                    };\n                    $numbering.fadeIn(1700);\n                });\n            });\n        </script>\n   \n', '2016-04-16 01:21:34', '0');
INSERT INTO `article` VALUES ('10141', '10003', 'HTML5环形音乐播放器', '\n\n通过 HTML5，音乐在网络上东山再起。添加音频文件就像插入图像那样简单，并且用户能在浏览器外播放音乐，从而实现惊人的音乐体验。&lt;audio&gt; 标签的推出使您不再需要外部音乐播放器，在网站上实现真正的声音融合。<br>\n随着 HTML5 的出现，发生了一些重大变化，特别是在音乐和音频方面。开发人员不再要求 web 冲浪者使用 Adobe Flash、Apple QuickTime 或 Microsoft Windows 媒体播放器等特殊的播放器。这意味着用户不必担心是否有最新的兼容插件（或任何播放器插件）。他们只需打开自己喜欢的浏览器并聆听能发出声音的任何内容，如音乐、有声读物、FX 声音效果或朋友和家人录制的消息。\n<p>好吧，直接看代码：</p>\n<p>\n<pre code_snippet_id=\"601523\" snippet_file_name=\"blog_20150210_1_2050779\" code_snippet_id=\"601523\" snippet_file_name=\"blog_20150210_1_2050779\" name=\"code\" class=\"html\">&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;meta charset=&quot;UTF-8&quot;&gt;\n  &lt;title&gt;HTML5环形音乐播放器&lt;/title&gt;\n  &lt;link rel=&quot;stylesheet&quot; href=&quot;css/style.css&quot; media=&quot;screen&quot; type=&quot;text/css&quot; /&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div style=&quot;text-align:center;clear:both&quot;&gt;\n&lt;/div&gt;\n  &lt;div id=&quot;container&quot;&gt;\n	&lt;label class=&quot;to-back-label&quot; for=&quot;to-back&quot;&gt;&lt;i class=&quot;fa fa-bars fa-lg&quot;&gt;&lt;/i&gt;&lt;/label&gt;&lt;!-- 歌曲播放列表按钮 --&gt;\n	&lt;input type=&quot;checkbox&quot; id=&quot;to-back&quot;&gt;\n	&lt;canvas id=&quot;progress&quot; width=&quot;320&quot; height=&quot;320&quot;&gt;&lt;/canvas&gt;&lt;!-- 进度条 --&gt;\n	&lt;div id=&quot;player&quot;&gt;\n		&lt;audio id=&quot;audio&quot; controls&gt;\n			&lt;source src=&quot;爱的就是你.mp3&quot; type=&quot;audio/mpeg&quot; codecs=&quot;mp3&quot;&gt;&lt;/source&gt;		\n		&lt;/audio&gt;\n		&lt;img src=&quot;album_cover.jpg&quot;&gt;&lt;!-- 专辑封面 --&gt;\n		&lt;label class=&quot;to-lyrics-label&quot; for=&quot;to-lyrics&quot;&gt;&lt;i class=&quot;fa fa-caret-down fa-lg&quot;&gt;&lt;/i&gt;&lt;/label&gt;\n		&lt;input type=&quot;checkbox&quot; id=&quot;to-lyrics&quot;&gt;&lt;!-- 歌词切换 --&gt;\n		&lt;div class=&quot;cover&quot;&gt;\n			&lt;div class=&quot;controls&quot;&gt;\n				&lt;button id=&quot;backward&quot; title=&quot;播放模式&quot;&gt;&lt;i class=&quot;fa fa-retweet fa-lg&quot;&gt;&lt;/i&gt;&lt;/button&gt;\n				&lt;button id=&quot;backward&quot; title=&quot;后退&quot;&gt;&lt;i class=&quot;fa fa-backward fa-2x&quot;&gt;&lt;/i&gt;&lt;/button&gt;			\n				&lt;!-- 暂停 --&gt;\n				&lt;button id=&quot;play-pause&quot; title=&quot;暂停&quot; onclick=&quot;togglePlayPause()&quot;&gt;&lt;i class=&quot;fa fa-play fa-3x&quot;&gt;&lt;/i&gt;&lt;/button&gt;\n				&lt;!-- 前进 --&gt;\n				&lt;button id=&quot;forward&quot; title=&quot;前进&quot;&gt;&lt;i class=&quot;fa fa-forward fa-2x&quot;&gt;&lt;/i&gt;&lt;/button&gt;\n				&lt;!-- 循环播放 --&gt;\n				&lt;button id=&quot;backward&quot; title=&quot;循环播放&quot;&gt;&lt;i class=&quot;fa fa-random fa-lg&quot;&gt;&lt;/i&gt;&lt;/button&gt;\n				&lt;!-- 音量控制 --&gt;\n				&lt;input id=&quot;volume&quot; name=&quot;volume&quot; min=&quot;0&quot; max=&quot;1&quot; step=&quot;0.1&quot; type=&quot;range&quot; onchange=&quot;setVolume()&quot; /&gt;\n			&lt;/div&gt;\n			&lt;div class=&quot;info&quot;&gt;\n				&lt;p class=&quot;song&quot;&gt;&lt;a href=&quot;#&quot; target=&quot;_blank&quot;&gt;爱的就是你&lt;/a&gt;&lt;/p&gt;\n				&lt;p class=&quot;author&quot;&gt;&lt;a href=&quot;#&quot; target=&quot;_blank&quot;&gt;王力宏&lt;/a&gt;&lt;/p&gt;\n			&lt;/div&gt;\n			&lt;div class=&quot;lyrics&quot;&gt;\n				&lt;p&gt;爱的就是你&lt;/p&gt;\n				&lt;p&gt;演唱：王力宏&lt;/p&gt;\n				&lt;p&gt;&lt;/p&gt; \n				&lt;p&gt;失去才会懂得珍惜&lt;/p&gt;\n				&lt;p&gt;但我珍惜你&lt;/p&gt;\n				&lt;p&gt;伤越痛就是爱越深&lt;/p&gt;\n				&lt;p&gt;我不相信&lt;/p&gt;\n				&lt;p&gt;你和我同时停止呼吸&lt;/p&gt;\n				&lt;p&gt;每一次我们靠近&lt;/p&gt;\n				&lt;p&gt;你让我忘了困惑&lt;/p&gt;\n				&lt;p&gt;忘了所有烦心&lt;/p&gt;\n				&lt;p&gt;我把你紧紧拥入怀里&lt;/p&gt;\n				&lt;p&gt;捧你在我手心&lt;/p&gt;\n				&lt;p&gt;谁叫我真的爱的就是你&lt;/p&gt;\n				&lt;p&gt;在爱的纯净世界&lt;/p&gt;\n				&lt;p&gt;你就是我唯一&lt;/p&gt;\n				&lt;p&gt;永远永远不要怀疑&lt;/p&gt;\n				&lt;p&gt;我把你当作我的空气&lt;/p&gt;\n				&lt;p&gt;如此形影不离&lt;/p&gt;\n				&lt;p&gt;我大声说我爱的就是你&lt;/p&gt;\n				&lt;p&gt;在爱的幸福国度&lt;/p&gt;\n				&lt;p&gt;你就是我唯一&lt;/p&gt;\n				&lt;p&gt;我唯一爱的就是你&lt;/p&gt;\n				&lt;p&gt;我真的爱的就是你&lt;/p&gt;\n				&lt;p&gt;&lt;/p&gt;\n				&lt;p&gt;失去才会懂得珍惜&lt;/p&gt;\n				&lt;p&gt;但我珍惜你&lt;/p&gt;\n				&lt;p&gt;伤越痛就是爱越深&lt;/p&gt;\n				&lt;p&gt;我不相信&lt;/p&gt;\n				&lt;p&gt;你和我同时停止呼吸&lt;/p&gt;\n				&lt;p&gt;每一次我们靠近&lt;/p&gt;\n				&lt;p&gt;你让我忘了困惑&lt;/p&gt;\n				&lt;p&gt;忘了所有烦心 OH&lt;/p&gt;\n				&lt;p&gt;我把你紧紧拥入怀里&lt;/p&gt;\n				&lt;p&gt;捧你在我手心&lt;/p&gt;\n				&lt;p&gt;谁叫我真的爱的就是你&lt;/p&gt;\n				&lt;p&gt;在爱的纯净世界&lt;/p&gt;\n				&lt;p&gt;你就是我唯一&lt;/p&gt;\n				&lt;p&gt;永远永远不要怀疑&lt;/p&gt;\n				&lt;p&gt;我把你当作我的空气&lt;/p&gt;\n				&lt;p&gt;如此形影不离&lt;/p&gt;\n				&lt;p&gt;我大声说我爱的就是你&lt;/p&gt;\n				&lt;p&gt;在爱的就幸福国度&lt;/p&gt;\n				&lt;p&gt;你就是我唯一&lt;/p&gt;\n				&lt;p&gt;我唯一爱的就是你&lt;/p&gt;\n				&lt;p&gt;我真的爱的就是你&lt;/p&gt;\n				&lt;p&gt;就是你 YEYE&lt;/p&gt;\n				&lt;p&gt;就是你&lt;/p&gt;\n				&lt;p&gt;就是你 YEYE&lt;/p&gt;\n				&lt;p&gt;唯一爱的就是你&lt;/p&gt;\n				&lt;p&gt;&lt;/p&gt;\n				&lt;p&gt;我把你紧紧拥入怀里&lt;/p&gt;\n				&lt;p&gt;捧你在我手心&lt;/p&gt;\n				&lt;p&gt;谁叫我真的爱的就是你&lt;/p&gt;\n				&lt;p&gt;在爱的纯净世界&lt;/p&gt;\n				&lt;p&gt;你就是我唯一&lt;/p&gt;\n				&lt;p&gt;永远永远不要怀疑&lt;/p&gt;\n				&lt;p&gt;我把你当作我的空气&lt;/p&gt;\n				&lt;p&gt;如此形影不离&lt;/p&gt;\n				&lt;p&gt;我大声说我爱的就是你&lt;/p&gt;\n				&lt;p&gt;在爱的就幸福国度&lt;/p&gt;\n				&lt;p&gt;你就是我唯一&lt;/p&gt;\n				&lt;p&gt;我唯一爱的就是你&lt;/p&gt;\n				&lt;p&gt;我真的爱的就是你&lt;/p&gt;\n				&lt;p&gt;我唯一爱的就是你&lt;/p&gt;\n				&lt;p&gt;我真的爱的就是你&lt;/p&gt;\n			&lt;/div&gt;&lt;!-- 歌词 --&gt;\n			&lt;p class=&quot;scroll&quot;&gt;向下滚动&lt;/p&gt;\n		&lt;/div&gt;\n	&lt;/div&gt;&lt;!-- #播放列表 --&gt;\n	&lt;div id=&quot;flip-back&quot;&gt;\n		&lt;ul class=&quot;playlist&quot;&gt;\n			&lt;h3&gt;专辑列表&lt;/h3&gt;\n			&lt;li&gt;&lt;a href=&quot;#&quot;&gt;1. 习大大爱着彭麻麻&lt;/a&gt;&lt;/li&gt;\n			&lt;li&gt;&lt;a href=&quot;#&quot;&gt;2. 一路上有你&lt;/a&gt;&lt;/li&gt;\n			&lt;li&gt;&lt;a href=&quot;#&quot; style=&quot;color:#26C5CB;&quot;&gt;&lt;i class=&quot;fa fa-play&quot; style=&quot;margin-right:4px;&quot;&gt;&lt;/i&gt; 3. 爱的就是你&lt;/a&gt;&lt;/li&gt;&lt;!-- 正在播放列表 --&gt;\n			&lt;li&gt;&lt;a href=&quot;#&quot;&gt;4. 老公赚钱老婆花&lt;/a&gt;&lt;/li&gt;\n			&lt;li&gt;&lt;a href=&quot;#&quot;&gt;5. 北京北京&lt;/a&gt;&lt;/li&gt;\n			&lt;li&gt;&lt;a href=&quot;#&quot;&gt;6. 小苹果&lt;/a&gt;&lt;/li&gt;\n			&lt;li&gt;&lt;a href=&quot;#&quot;&gt;7. 好男人都死哪去了&lt;/a&gt;&lt;/li&gt;\n			&lt;li&gt;&lt;a href=&quot;#&quot;&gt;8. 你是我的眼&lt;/a&gt;&lt;/li&gt;\n			&lt;li&gt;&lt;a href=&quot;#&quot;&gt;9. 朋友&lt;/a&gt;&lt;/li&gt;\n			&lt;li&gt;&lt;a href=&quot;#&quot;&gt;10. 吻别&lt;/a&gt;&lt;/li&gt;\n		&lt;/ul&gt;\n	&lt;/div&gt;\n&lt;/div&gt;\n&lt;!-- 如有不懂，请加qq群：135430763共同学习！ --&gt;\n&lt;!-- 另一篇播放器地址：http://blog.csdn.net/xmtblog/article/details/32957663 --&gt;\n&lt;script src=&quot;js/index.js&quot;&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;</pre><pre code_snippet_id=\"601523\" snippet_file_name=\"blog_20150210_2_7750847\" code_snippet_id=\"601523\" snippet_file_name=\"blog_20150210_2_7750847\" name=\"code\" class=\"javascript\">var audio = document.getElementById(&#39;audio&#39;);\nvar progress = document.getElementById(&#39;progress&#39;);\nvar playpause = document.getElementById(&quot;play-pause&quot;);\nvar volume = document.getElementById(&quot;volume&quot;);\naudio.controls = false;\naudio.addEventListener(&#39;timeupdate&#39;, function() {\n  	updateProgress();\n}, false);\n/**\n * 暂停播放\n */\nfunction togglePlayPause() {\n   if (audio.paused || audio.ended) {\n      playpause.title = &quot;Pause&quot;;\n      playpause.innerHTML = &#39;&lt;i class=&quot;fa fa-pause fa-3x&quot;&gt;&lt;/i&gt;&#39;;\n      audio.play();\n   } else {\n      playpause.title = &quot;Play&quot;;\n      playpause.innerHTML = &#39;&lt;i class=&quot;fa fa-play fa-3x&quot;&gt;&lt;/i&gt;&#39;;\n      audio.pause();\n   }\n}\n/**\n * 设置音量\n */\nfunction setVolume() {\n   audio.volume = volume.value;\n}\n/**\n * 更新进度\n */\nfunction updateProgress() {\n	var percent = Math.floor((100 / audio.duration) * audio.currentTime);\n	progress.value = percent;\n	var canvas = document.getElementById(&#39;progress&#39;);\n	var context = canvas.getContext(&#39;2d&#39;);\n	var centerX = canvas.width / 2;\n	var centerY = canvas.height / 2;\n	var radius = 150;\n	var circ = Math.PI * 2;\n	var quart = Math.PI / 2;\n	var cpercent = percent / 100; \n	context.beginPath();\n	context.arc(centerX, centerY, radius, 0, ((circ) * cpercent), false);\n	context.lineWidth = 10;\n	context.strokeStyle = &#39;#26C5CB&#39;;\n	context.stroke();\n	if (audio.ended) resetPlayer();\n}\nfunction resetPlayer() {\n	  audio.currentTime = 0; context.clearRect(0,0,canvas.width,canvas.height);\n  playpause.title = &quot;Play&quot;;\n	  playpause.innerHTML = &#39;&lt;i class=&quot;fa fa-play fa-3x&quot;&gt;&lt;/i&gt;&#39;;\n}</pre><pre code_snippet_id=\"601523\" snippet_file_name=\"blog_20150210_3_2437160\" code_snippet_id=\"601523\" snippet_file_name=\"blog_20150210_3_2437160\" name=\"code\" class=\"css\">/* Font Awesome */\n@import url(http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css);\n\n/* Roboto Condensed */\n@import url(http://fonts.googleapis.com/css?family=Roboto+Condensed:300);\n\n/* Basic */\n*, *:before, *:after { box-sizing: border-box; }\nbody { margin: 0; min-height: 100%; background: #EEE; font-family: &#39;Roboto Condensed&#39;, sans-serif; font-weight: 300; }\na { color: #FFF; text-decoration: none; }\na:hover { color: #26C5CB; }\np { margin: 0; }\n.credits { position: absolute; left: 20px; bottom: 20px; color: #ccc; font-size: 14px; }\n.credits a  { color: #26C5CB; }\n\n/* Centering */\n#container, #progress, #player, #flip-back, .cover, .playlist {\n	  position: absolute;\n	  margin: auto;\n	  top: 0;\n	  left: 0;\n	  right: 0;\n  	bottom: 0;\n}\n\n#container {\n	  width: 320px;\n	  height: 320px;\n  perspective: 550px;\n	  -webkit-perspective: 550px;\n  transform-style: preserve-3d;\n	  -webkit-transform-style: preserve-3d;\n}\n\n#player {\n  	width: 300px;\n	  height: 300px;\n	  background: #fff;\n  	border-radius: 50%;\n	  overflow: hidden;\n	  box-shadow: 2px 2px 20px 0 rgba(0,0,0,.3);\n	  z-index: 300;\n}\n\n#progress {\n	  width: 320px;\n	  height: 320px;\n	  z-index: 200;\n  transform: rotate(147deg);\n	  -webkit-transform: rotate(147deg);\n  filter: blur(1px);\n	  -webkit-filter: blur(1px);\n	  transition: all .5s ease-in-out;\n	  -webkit-transition: all .5s ease-in-out;\n}\n\n#flip-back {\n	  width: 300px;\n	  height: 300px;\n	  background: #4D4D4D;\n	  border: 4px solid #AEAEAE;\n	  border-radius: 50%;\n	  overflow: hidden;\n	  box-shadow: inset 0 -10px 10px -5px rgba(0,0,0,.3), 2px 2px 20px 0 rgba(0,0,0,.3); /* inner + outer */\n  transform: rotateY(-180deg);\n	  -webkit-transform: rotateY(-180deg);\n}\n\n/* Album Cover */\nimg {\n  	width: 100%;\n	  height: 100%;\n	  background: #fff;\n	  opacity: .75;\n	  transition: .3s all ease-in-out;\n  -webkit-transition: .3s all ease-in-out;\n}\n\n/* Fade */\n#container:hover .cover,\n#container:hover .to-lyrics-label,\n#container:hover .to-back-label {\n	  opacity: .9;\n}\n\n.cover,\n.to-lyrics-label,\n.to-back-label {\n	  opacity: .3;\n	  transition: all .3s ease-in-out;\n	  -webkit-transition: all .3s ease-in-out;\n}\n\n/* Player Buttons */\n.controls {\n	  position: relative;\n	  width: 100%;\n	  color: #fff;\n	  text-align: center;\n}\n\nbutton {\n	  margin: 10px;\n	  color: #fff;\n	  background: transparent;\n	  border: 0;\n	  outline: 0;\n	  cursor: pointer;\n	  text-align: center;\n	  text-shadow: 1px 1px 3px #000;\n	  transition: all .3s ease-in-out;\n	  -webkit-transition: all .3s ease-in-out;\n}\n\nbutton:hover {\n	  color: #26C5CB;\n}\n\n#play-pause {\n	  width: 46px;\n	  height: 46px;\n	  transition: all .5s ease-in-out;\n	  -webkit-transition: all .5s ease-in-out;\n	}\n\n/* Song Info */\n.info {\n  	position: relative;\n	  margin-top: 28px;\n	  bottom: 10px;\n	  color: #fff;\n	  text-align: center;\n	  text-shadow: 1px 1px 3px #000;\n}\n\n.song {\n	  font-size: 18px;\n}\n\n.author {\n	  font-size: 14px;\n	  margin-bottom: -8px;\n}\n\n/* ... */\n.song,\n.author,\n.playlist a {\n	  white-space: nowrap; \n	  overflow: hidden;\n	  text-overflow: ellipsis;\n}\n\n/* Volume */\ninput[type=&#39;range&#39;] {\n	  display: block;\n	  margin: 14px auto;\n	  width: 80px;\n  height: 2px; \n	  outline: 0;\n	  cursor: pointer;\n	  box-shadow: 1px 1px 3px 0 #000;\n	  -webkit-appearance: none !important;\n}\n\ninput[type=&#39;range&#39;]::-webkit-slider-thumb {\n  background: #AEAEAE;\n  height: 6px;\n  width: 6px;\n	  border-radius: 50%;\n  transition: .1s all linear;\n	  -webkit-transition: .1s all linear;\n  -webkit-appearance: none !important;\n}\n\ninput[type=&#39;range&#39;]:hover::-webkit-slider-thumb {\n  	background: #26C5CB;\n	  -webkit-transform:scale(2);\n}\n\n/* Checkboxes */\ninput[type=checkbox] {\n  	position: absolute;\n	  top: -9999px;\n	  left: -9999px;\n}\n\nlabel {\n	  text-shadow: 1px 1px 3px #000;\n}\n\n.to-back-label:hover,\n.to-lyrics-label:hover {\n	  color: #26C5CB;\n}\n	\nlabel:active,\nlabel:focus {\n	  top: 0;\n	  opacity: 0;\n}\n\nlabel.to-back-label {\n	  position: absolute;\n	  top: 20px;\n	  left: 50%;\n	  width: 30px;\n	  height: 30px;\n	  margin-left: -15px;\n	  color: #fff;\n	  text-align: center;	\n	  cursor: pointer;\n	  z-index: 500;\n}\n\nlabel.to-lyrics-label {\n	  position: absolute;\n	  top: 276px;\n	  left: 50%;\n	  width: 20px;\n	  height: 20px;\n	  margin-left: -5px;\n	  color: #fff;\n	  cursor: pointer;\n	  z-index: 500;\n}\n\n/* Flip Back */\n#player, #flip-back {\n	  backface-visibility: hidden;\n	  -webkit-backface-visibility: hidden;\n	  transition: transform .5s ease-in-out;\n	  -webkit-transition: -webkit-transform .5s ease-in-out;\n}\n\n#to-back:checked ~ #flip-back {\n	  z-index: 400;\n	  transform: rotateY(0deg);\n	  -webkit-transform: rotateY(0deg);\n}\n\n#to-back:checked ~ #player {\n	  z-index: -1;\n  transform: rotateY(180deg);\n	  -webkit-transform: rotateY(180deg);\n}\n\n#to-back:checked ~ #progress {\n	  opacity: 0;\n  transform: rotate(0);\n	  -webkit-transform: rotate(0);\n}\n\n#to-back:checked ~ #flip-back .playlist {\n	  transform: translateY(0);\n  -webkit-transform: translateY(0);\n}\n\n/* Lyrics */\n.lyrics {\n	  position: relative;\n	  width: 100%;\n	  height: 96px;\n	  margin-top: 30px;\n	  padding: 4px 24px;\n	  color: #000;\n	  background: rgba(255,255,255,.3);\n	  font-size: 12px;\n	  text-align: center;\n	  overflow-y: scroll;\n	  box-shadow: inset 0 -3px 5px 0 rgba(0,0,0,.5);\n  	transition: all .5s ease-in-out;\n	  -webkit-transition: all .5s ease-in-out;\n}\n\n.lyrics:hover {\n  	background: rgba(255,255,255,.8);\n}\n\n.lyrics::-webkit-scrollbar {\n	  display: none;\n}\n\n.scroll {\n	  color: #fff;\n	  text-align: center;\n	  font-size: 9px;\n	  font-weight: bold; \n	  text-shadow: 1px 1px 3px #000;\n}\n\n.cover {\n	  padding-top: 130px;\n	  transition: all .5s ease-in-out;\n	  -webkit-transition: all .5s ease-in-out;\n}\n\n#to-lyrics:checked ~ .cover {\n	  padding-top: 40px;\n}\n\n#to-lyrics:checked ~ .cover .lyrics {\n	  margin-top: 0px;\n}\n\n#to-lyrics:checked ~ .cover button {\n	  margin: 4px;\n}\n\n/* Playlist */\n.playlist {\n  	margin-top: 20px;\n	  padding: 14px 20px;\n	  font-size: 12px;\n	  text-align: center;\n	  list-style: none;\n	  overflow-y: auto;\n	  z-index: 9999;\n  transform: translateY(300px);\n	  -webkit-transform: translateY(300px);\n  transition: transform .5s ease-in-out .3s;\n	  -webkit-transition: -webkit-transform .5s ease-in-out .3s;\n}\n\n.playlist h3 {\n	  color: #aeaeae;\n}\n\n.playlist li {\n	  display: block;\n	  padding: 4px 0;\n	  color: #AEAEAE;\n	  cursor: pointer;\n	  text-decoration: none;\n}\n\n.playlist li:hover {\n	  color: #26C5CB;\n}\n\n.playlist li:nth-child(1) {\n	  padding: 0 24px;\n}\n\n.playlist::-webkit-scrollbar {\n	  display: none;\n}\n\n/* Media Queries */\n@media all and (max-width: 768px) {\n	  #container, #player { width: 150px; height: 150px;}\n	  #progress { width: 160px; height: 160px; margin-top: -5px; margin-left: -5px; }\n	  label, .lyrics, .scroll { display: none; }\n	  .cover { padding-top: 46px; }\n	  button { margin: 4px; }\n	  button:first-of-type, button:last-of-type { display: none; }\n	  input[type=&#39;range&#39;] { display: block; margin-top: -76px; height: 1px; }\n	  .info { margin-top: 70px; }\n	  .song { font-size: 12px; }\n	  .author { font-size: 10px; }\n}</pre>好了，看看效果：\n<p>\n<p><img src=\"http://img.blog.csdn.net/20150210105847990?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveG10YmxvZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"></p>\n<p>如有不懂，请加qq群：135430763共同学习！<br>\n</p>\n   \n', '2016-04-16 01:21:34', '0');
INSERT INTO `article` VALUES ('10142', '10003', '破解md5加密的方法', '\n\n我们知道md5加密是不可逆转的，但是要破解md5的加密也很简单。<br>\n网上也有很多在线的破解。既然是不可逆转的，那么网上的那些破解是怎么来的呢？<br>\n原因很简单，就是使用穷举法来进行破解。<br>\n如：我们计算出键盘上所有字符的组合的md5，将加密前后的字符串分别存入数据库中；<br>\n然后拿你的md5加密后的字符串进行查询得出加密前的字符串。这就是在线破解的奥秘。<br>\n但是这种破解方法也有局限性。如：我对单一一个字符串进行多次的md5加密，那么我们破解就要反复的进行穷举。<br>\n如果你不知道字符串被md5加密了多少次，那么就要反复的多试几次了。当然一般的网站使用的md5加密的密码不会太复杂。<br>\n我们就可以使用我今天所讲的这种方法来破解了。<br>\n1.<strong>首先我们要找出键盘上所有的字符，存入数组中，如下</strong>：<pre code_snippet_id=\"650260\" snippet_file_name=\"blog_20150422_1_9066836\" code_snippet_id=\"650260\" snippet_file_name=\"blog_20150422_1_9066836\" name=\"code\" class=\"java\">/**\n	 * 键盘上除功能键外的所有字符\n	 */\n	static char[] buf = {&#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39; ,&#39;5&#39;,&#39;6&#39;,&#39;7&#39;,&#39;8&#39;,&#39;9&#39;,&#39;0&#39;,\n			&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;, &#39;e&#39;, &#39;f&#39;, &#39;g&#39; ,&#39;h&#39;,&#39;i&#39;,&#39;j&#39;,&#39;k&#39;,&#39;l&#39;,&#39;m&#39;,&#39;n&#39;,&#39;o&#39;,&#39;p&#39;,&#39;q&#39;,&#39;r&#39;,&#39;s&#39;,&#39;t&#39;, &#39;u&#39;, &#39;v&#39;, &#39;w&#39; ,&#39;x&#39;,&#39;y&#39;,&#39;z&#39;,\n			&#39;A&#39;,&#39;B&#39;,&#39;C&#39;,&#39;D&#39;, &#39;E&#39;, &#39;F&#39;, &#39;G&#39; ,&#39;H&#39;,&#39;I&#39;,&#39;J&#39;,&#39;K&#39;,&#39;L&#39;,&#39;M&#39;,&#39;N&#39;,&#39;O&#39;,&#39;P&#39;,&#39;Q&#39;,&#39;R&#39;,&#39;S&#39;,&#39;T&#39;, &#39;U&#39;, &#39;V&#39;, &#39;W&#39; ,&#39;X&#39;,&#39;Y&#39;,&#39;Z&#39;,\n			&#39; &#39;,&#39;~&#39;,&#39;!&#39;,&#39;@&#39;,&#39;#&#39;,&#39;$&#39;,&#39;%&#39;,&#39;^&#39;,&#39;&amp;&#39;,&#39;*&#39;,&#39;?&#39;,&#39;`&#39;,&#39;&quot;&#39;,&#39;:&#39;,&#39;(&#39;,&#39;)&#39;,&#39;;&#39;,&#39;,&#39;,&#39;.&#39;,&#39;/&#39;,&#39;&lt;&#39;,&#39;&gt;&#39;,&#39;\\&#39;&#39;,&#39;|&#39;,&#39;]&#39;,&#39;[&#39;,&#39;{&#39;,&#39;}&#39;};</pre>2.<strong>我们要实现md5的计算方法，如下</strong>：<pre code_snippet_id=\"650260\" snippet_file_name=\"blog_20150422_2_3239386\" code_snippet_id=\"650260\" snippet_file_name=\"blog_20150422_2_3239386\" name=\"code\" class=\"java\">/**\n	 * 实现md5加密\n	 * @author Herman.Xiong\n	 * @date 2015-4-22 上午10:19:05\n	 * @param str\n	 * @return\n	 */\n	static String md5(String str){\n		StringBuffer sb = new StringBuffer(32);\n		try {\n			MessageDigest md = MessageDigest.getInstance(&quot;MD5&quot;);\n			byte[] array = md.digest(str.getBytes(&quot;UTF-8&quot;));\n			for (int i = 0; i &lt; array.length; i++) {\n				sb.append(Integer.toHexString((array[i] &amp; 0xFF) | 0x100).toUpperCase().substring(1, 3));\n			}\n		} catch (Exception e) {\n			return null;\n		}\n		return sb.toString();\n	}</pre>3.<strong>我们要键盘上所有的字符进行自由组合，可以重复。组合代码如下</strong>：<pre code_snippet_id=\"650260\" snippet_file_name=\"blog_20150422_3_8698691\" code_snippet_id=\"650260\" snippet_file_name=\"blog_20150422_3_8698691\" name=\"code\" class=\"java\">/**\n	 * 递归组合字符\n	 * @author Herman.Xiong\n	 * @date 2015-4-22 下午03:35:41\n	 */\n	static void select(String str,char [] data) {\n		if(1 &gt; data.length)\n			return;\n		for (int i = 0; i &lt; data.length; i++) {\n			String result=str+data[i];\n			System.out.println(result);\n			//System.out.println(md5(result));\n			if(result.length()&lt;data.length){\n				select(result,data);\n			}\n		}\n	}\n\n	public static void main(String[] args) {\n		for (int i = 0; i &lt; buf.length; i++) {\n			System.out.println(buf[i]);\n			//System.out.println(md5(buf[i]+&quot;&quot;));\n			select(buf[i]+&quot;&quot;,buf);\n		}\n	}</pre>4.<strong>数组{&quot;1&quot;,&quot;2&quot;,&quot;3&quot;}组合效果如下</strong>：<br>\n<span style=\"white-space:pre\"></span>1 11 111 112 113 12 121 122 123 13 131 132 133<br>\n<span style=\"white-space:pre\"></span>2 21 211 212 213 22 221 222 223 23 231 232 233<br>\n<span style=\"white-space:pre\"></span>3 31 311 312 313 32 321 322 323 33 331 332 333<br>\n<p>5.<strong>将计算的md5存入数据库，随便进行md5加密，然后破解。</strong></p>\n<p><strong>实例代码如下：</strong></p>\n<pre code_snippet_id=\"650260\" snippet_file_name=\"blog_20150422_4_3776313\" code_snippet_id=\"650260\" snippet_file_name=\"blog_20150422_4_3776313\" name=\"code\" class=\"java\">package com.herman.test;\n\nimport java.security.MessageDigest;\n\n/**\n * 我们知道md5加密是不可逆转的，但是要破解md5的加密也很简单。\n * 网上也有很多在线的破解。既然是不可逆转的，那么网上的那些破解是怎么来的呢？\n * 原因很简单，就是使用穷举法来进行破解。\n * 如：我们计算出键盘上所有字符的组合的md5，将加密前后的字符串分别存入数据库中；\n * 然后拿你的md5加密后的字符串进行查询得出加密前的字符串。这就是在线破解的奥秘。\n * 但是这种破解方法也有局限性。如：我对单一一个字符串进行多次的md5加密，那么我们破解就要反复的进行穷举。\n * 如果你不知道字符串被md5加密了多少次，那么就要反复的多试几次了。当然一般的网站使用的md5加密的密码不会太复杂。\n * 我们就可以使用我今天所讲的这种方法来破解了。\n * 1.首先我们要找出键盘上所有的字符，存入数组中，如下：\n * 2.我们要实现md5的计算方法，如下：\n * 3.我们要键盘上所有的字符进行自由组合，可以重复。组合代码如下：\n * 4.数组{&quot;1&quot;,&quot;2&quot;,&quot;3&quot;}组合效果如下：\n		1 11 111 112 113 12 121 122 123 13 131 132 133\n		2 21 211 212 213 22 221 222 223 23 231 232 233\n		3 31 311 312 313 32 321 322 323 33 331 332 333\n   5.将计算的md5存入数据库，随便进行md5加密，然后破解。\n * @author Herman.Xiong\n * @date 2015-4-22 上午10:18:19\n * @version V3.0\n * @since jdk 1.6,tomcat 6.0\n */\npublic class Test {\n	\n	/**\n	 * 键盘上除功能键外的所有字符\n	 */\n	static char[] buf = {&#39;1&#39;, &#39;2&#39;, &#39;3&#39;, &#39;4&#39; ,&#39;5&#39;,&#39;6&#39;,&#39;7&#39;,&#39;8&#39;,&#39;9&#39;,&#39;0&#39;,\n			&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;, &#39;e&#39;, &#39;f&#39;, &#39;g&#39; ,&#39;h&#39;,&#39;i&#39;,&#39;j&#39;,&#39;k&#39;,&#39;l&#39;,&#39;m&#39;,&#39;n&#39;,&#39;o&#39;,&#39;p&#39;,&#39;q&#39;,&#39;r&#39;,&#39;s&#39;,&#39;t&#39;, &#39;u&#39;, &#39;v&#39;, &#39;w&#39; ,&#39;x&#39;,&#39;y&#39;,&#39;z&#39;,\n			&#39;A&#39;,&#39;B&#39;,&#39;C&#39;,&#39;D&#39;, &#39;E&#39;, &#39;F&#39;, &#39;G&#39; ,&#39;H&#39;,&#39;I&#39;,&#39;J&#39;,&#39;K&#39;,&#39;L&#39;,&#39;M&#39;,&#39;N&#39;,&#39;O&#39;,&#39;P&#39;,&#39;Q&#39;,&#39;R&#39;,&#39;S&#39;,&#39;T&#39;, &#39;U&#39;, &#39;V&#39;, &#39;W&#39; ,&#39;X&#39;,&#39;Y&#39;,&#39;Z&#39;,\n			&#39; &#39;,&#39;~&#39;,&#39;!&#39;,&#39;@&#39;,&#39;#&#39;,&#39;$&#39;,&#39;%&#39;,&#39;^&#39;,&#39;&amp;&#39;,&#39;*&#39;,&#39;?&#39;,&#39;`&#39;,&#39;&quot;&#39;,&#39;:&#39;,&#39;(&#39;,&#39;)&#39;,&#39;;&#39;,&#39;,&#39;,&#39;.&#39;,&#39;/&#39;,&#39;&lt;&#39;,&#39;&gt;&#39;,&#39;\\&#39;&#39;,&#39;|&#39;,&#39;]&#39;,&#39;[&#39;,&#39;{&#39;,&#39;}&#39;};\n\n	/**\n	 * 实现md5加密\n	 * @author Herman.Xiong\n	 * @date 2015-4-22 上午10:19:05\n	 * @param str\n	 * @return\n	 */\n	static String md5(String str){\n		StringBuffer sb = new StringBuffer(32);\n		try {\n			MessageDigest md = MessageDigest.getInstance(&quot;MD5&quot;);\n			byte[] array = md.digest(str.getBytes(&quot;UTF-8&quot;));\n			for (int i = 0; i &lt; array.length; i++) {\n				sb.append(Integer.toHexString((array[i] &amp; 0xFF) | 0x100).toUpperCase().substring(1, 3));\n			}\n		} catch (Exception e) {\n			return null;\n		}\n		return sb.toString();\n	}\n	\n	/**\n	 * 递归组合字符\n	 * @author Herman.Xiong\n	 * @date 2015-4-22 下午03:35:41\n	 */\n	static void select(String str,char [] data) {\n		if(1 &gt; data.length)\n			return;\n		for (int i = 0; i &lt; data.length; i++) {\n			String result=str+data[i];\n			System.out.println(result);\n			//System.out.println(md5(result));\n			if(result.length()&lt;data.length){\n				select(result,data);\n			}\n		}\n	}\n\n	public static void main(String[] args) {\n		for (int i = 0; i &lt; buf.length; i++) {\n			System.out.println(buf[i]);\n			//System.out.println(md5(buf[i]+&quot;&quot;));\n			select(buf[i]+&quot;&quot;,buf);\n		}\n	}\n}\n</pre>为加密的运行效果如下：<img src=\"http://img.blog.csdn.net/20150422155429914?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveG10YmxvZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" align=\"top\" width=\"494\" height=\"746\" alt=\"\"><br>\n<span style=\"color:rgb(85,85,85); font-family:\'microsoft yahei\'; font-size:15px; line-height:35px\">欢迎大家关注我的博客！如有疑问,请加QQ群：135430763共同学习！</span>\n   \n', '2016-04-16 01:21:34', '1');
INSERT INTO `article` VALUES ('10143', '10003', 'jQueryMobile修改button的内容', '\n\njQuery Mobile修改button的内容。<br>\n<p><span style=\"white-space:pre\"></span>使用jQuery Mobile也有一段时间了，最近同事提出，他需要更改button的内容，但是修改不了。我也试着修改了几次，button的内容其实是更改了，但是页面并未刷新。在调试中使用了console.log()方法打印各种日志，再结合api文档，发现button方法可以进行刷新。</p>\n<p><span style=\"white-space:pre\"></span>打印信息：<img src=\"http://img.blog.csdn.net/20150202160845635?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveG10YmxvZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"></p>\n<p>更新内容：<pre code_snippet_id=\"595726\" snippet_file_name=\"blog_20150202_1_1651819\" name=\"code\" class=\"javascript\">$(&#39;#btn&#39;).val(&quot;如有疑问,请加QQ群：135430763共同学习!&quot;).button(&quot;refresh&quot;);</pre>禁用按钮：<pre code_snippet_id=\"595726\" snippet_file_name=\"blog_20150202_2_2335377\" name=\"code\" class=\"javascript\">$(&#39;#btn&#39;).attr(&#39;disabled&#39;,&quot;&quot;);</pre>隐藏按钮：<pre code_snippet_id=\"595726\" snippet_file_name=\"blog_20150202_3_1481792\" name=\"code\" class=\"javascript\">$(&#39;#btn&#39;).parent(&quot;div&quot;).css(&#39;display&#39;,&#39;none&#39;);</pre>设置按钮左侧为圆角：<pre code_snippet_id=\"595726\" snippet_file_name=\"blog_20150202_4_7837327\" name=\"code\" class=\"javascript\">$(&#39;#btn&#39;).parent(&quot;div&quot;).addClass(&#39;ui-first-child&#39;);</pre>设置按钮右侧为圆角：<pre code_snippet_id=\"595726\" snippet_file_name=\"blog_20150202_5_5936966\" name=\"code\" class=\"javascript\">$(&#39;#btn&#39;).parent(&quot;div&quot;).addClass(&#39;ui-last-child&#39;);</pre>如有疑问,请加QQ群：135430763共同学习!<br>\n</p>\n   \n', '2016-04-16 01:21:35', '0');
INSERT INTO `article` VALUES ('10144', '10003', 'HTML5调用百度地图API进行地理定位实例', '\n\n自从HTML5的标准确定以后，越来越多的网站使用HTML5来进行开发。虽然对HTML5支持的浏览器不是很多，但是依然抵挡不了大伙对HTML5开发的热情。今天为大家带来的是使用HTML5调用百度地图API进行地理定位实例。请看下面代码：<pre code_snippet_id=\"646150\" snippet_file_name=\"blog_20150417_1_9322150\" code_snippet_id=\"646150\" snippet_file_name=\"blog_20150417_1_9322150\" name=\"code\" class=\"html\">&lt;!DOCTYPE html&gt;  \n&lt;html&gt;  \n&lt;title&gt;HTML5调用百度地图API进行地理定位实例&lt;/title&gt;  \n    &lt;head&gt;  \n        &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;  \n        &lt;script type=&quot;text/javascript&quot; src=&quot;http://api.map.baidu.com/api?v=2.0&amp;ak=134db1b9cf1f1f2b4427210932b34dcb&quot;&gt;&lt;/script&gt;  \n    &lt;/head&gt;  \n    &lt;body style=&quot;margin:50px 10px;&quot;&gt;  \n        &lt;div id=&quot;status&quot; style=&quot;text-align: center&quot;&gt;&lt;/div&gt;  \n        &lt;div style=&quot;width:600px;height:480px;border:1px solid gray;margin:30px auto&quot; id=&quot;container&quot;&gt;&lt;/div&gt;  \n    &lt;/body&gt;  \n&lt;/html&gt;  \n  \n&lt;script type=&quot;text/javascript&quot;&gt;  \n	//默认地理位置设置为上海市浦东新区\n	var x=121.48789949,y=31.24916171;	\n    window.onload = function() {  \n        if(navigator.geolocation) {  \n			navigator.geolocation.getCurrentPosition(showPosition);\n            document.getElementById(&quot;status&quot;).innerHTML = &quot;HTML5 Geolocation is supported in your browser.&quot;;  \n                // 百度地图API功能  \n                var map = new BMap.Map(&quot;container&quot;);  \n                var point = new BMap.Point(x,y);  \n                map.centerAndZoom(point,12);  \n  \n                var geolocation = new BMap.Geolocation();  \n                geolocation.getCurrentPosition(function(r){  \n                    if(this.getStatus() == BMAP_STATUS_SUCCESS){  \n                        var mk = new BMap.Marker(r.point);  \n                        map.addOverlay(mk);  \n                        map.panTo(r.point);  \n                    }  \n                    else {  \n                        alert(&#39;failed&#39;+this.getStatus());  \n                    }          \n                },{enableHighAccuracy: true})  \n			return;\n        }  \n		alert(&quot;你的浏览器不支持获取地理位置！&quot;);\n    };  \n	function showPosition(position){\n	  x=position.coords.latitude; \n	  y=position.coords.longitude;	\n	}\n&lt;/script&gt;  </pre>\n<p>看看运行效果：<img src=\"http://img.blog.csdn.net/20150417103624304?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveG10YmxvZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\" align=\"top\" width=\"697\" height=\"591\"></p>\n<p><span style=\"color:rgb(85,85,85); font-family:\'microsoft yahei\'; font-size:15px; line-height:35px\">欢迎大家关注我的博客！如有疑问,请加QQ群：135430763共同学习！</span><br>\n</p>\n   \n', '2016-04-16 01:21:35', '2');
INSERT INTO `article` VALUES ('10145', '10003', 'java属性文件properties常用操作工具类', '\n\n对于java.util.Properties类，通常我们只需要做到以下3个学习目标：<br>\n1、认识properties文件，理解其含义，会正确创建properties文件。<br>\n2、会使用java.util.Properties类来操作properties文件。<br>\n3、掌握相对路径，能正确书写一个properties文件的相对路径。<br>\n而在平时的工作中，会遇到各种各样的需求，以下是一个封装。<pre code_snippet_id=\"593163\" snippet_file_name=\"blog_20150130_1_176921\" name=\"code\" class=\"java\">package com.herman.util;\n\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.util.Properties;\n\n/**\n * properties 文件操作工具类\n * @author Herman.Xiong\n * @date 2015-1-29 下午04:27:19\n * @version V3.0\n * @since jdk 1.6,tomcat 6.0\n */\npublic class PropertiesUtil {\n	private static Properties prop = new Properties(); \n	private static InputStream in;\n	private static final String path=&quot;src/com/herman/config/conf.properties&quot;;\n	\n	/**\n	 * 加载\n	 */\n	static{\n		init();\n	}\n	\n	/**\n	 * 初始化\n	 */\n	private static void init(){\n		try {\n			in=new FileInputStream(new File(path));\n			prop.load(in);\n		} catch (Exception e) {\n			e.printStackTrace();\n		}\n	}\n	\n	/**\n	 * 关闭InputStream\n	 * @author Herman.Xiong\n	 * @date 2015-1-30 上午09:41:04\n	 */\n	private static void close(){\n		try {\n			if(null != in)\n				in.close(); \n		} catch (Exception e) {\n			e.printStackTrace();\n		}\n	}\n	\n	/**\n	 * 重新加载Properties\n	 * @author Herman.Xiong\n	 * @date 2015-1-30 上午09:41:04\n	 */\n	public static void reload(){\n		close();\n		prop.clear();//清除所有装载的 键 - 值对\n		init();\n	}\n	\n	/**\n	 * 删除所有键值\n	 * @author Herman.Xiong\n	 * @date 2015-1-30 上午09:42:04\n	 */\n	public static void removeAll(){\n		close();\n		File file=new File(path);\n		if(file.exists())\n			file.delete();\n		try {\n			if(!file.exists())\n				new File(path).createNewFile();\n		} catch (IOException e) {\n			e.printStackTrace();\n		}\n	}\n	\n	/**\n	 * 输出所有内容到控制台\n	 * @author Herman.Xiong\n	 * @date 2015-1-30 上午09:42:33\n	 */\n	public static void outList(){\n		prop.list(System.out);\n	}\n	\n	public static void main(String[] args) {\n		System.out.println(prop.getProperty(&quot;abc&quot;));\n		outList();\n		reload();\n		outList();\n		removeAll();\n		System.out.println(&quot;重新加载.....&quot;);\n		outList();\n	}\n}\n</pre><br>\n欢迎大家关注我的博客！如有疑问,请加QQ群：135430763共同学习！\n   \n', '2016-04-16 01:21:35', '1');
INSERT INTO `article` VALUES ('10146', '10003', 'HTML5拖放(Drag和drop)', '\n\n<p>在工作当中，我们会常常见到像UC浏览器的新选项卡一样的可以自定义拖拽摆放效果。大的像淘宝的装修，QQ空间装扮等，小到一些游戏等等随处可见拖放的使用场景。</p>\n<p>在 HTML5 中，拖放是标准的一部分，任何元素都能够拖放。<br>\n</p>\n<p>拖放是一种常见的特性，即抓取对象以后拖到另一个位置。</p>\n<p>目前浏览器支持情况：Internet Explorer 9、Firefox、Opera 12、Chrome 以及 Safari 5 支持拖放。<strong>注释：在 Safari 5.1.2 中不支持拖放。</strong></p>\n<p>下面看看一个具体的字母拖放demo：</p>\n<p>\n<pre code_snippet_id=\"639625\" snippet_file_name=\"blog_20150409_1_9848270\" code_snippet_id=\"639625\" snippet_file_name=\"blog_20150409_1_9848270\" name=\"code\" class=\"html\">&lt;!DOCTYPE HTML&gt;\n &lt;html&gt;\n  &lt;head&gt;\n   &lt;!-- 请加qq群：135430763共同学习！--&gt;\n   &lt;meta charset=&quot;gbk&quot;/&gt;\n   &lt;title&gt;HTML5 拖放(Drag和drop)&lt;/title&gt;\n   &lt;style&gt;\n    html,body{width:100%;height:100%;background-color:gray;}\n    .wrapper{ width:500px;margin:0px auto;margin-top:80px;}\n    ul{list-style:none;width:500px;}\n    li{float:left;margin:0px 20px 20px 0px;position: relative;width:132px;height:132px;}\n    img{border-radius:12px;width:100px;height:100px;position: relative;-moz-user-select:none;cursor: move;}\n    .rubbish{position:absolute;bottom:80px;background:url(&quot;empty.png&quot;) \n       no-repeat;width:128px;height:128px;left:50%;margin-left:-64px;}\n    .hover{border:3px dashed #fff;}\n    &lt;/style&gt;\n &lt;/head&gt;\n &lt;body&gt;\n &lt;div class=&quot;wrapper&quot;&gt;\n  &lt;ul&gt;\n   &lt;li draggable=&quot;true&quot;&gt;&lt;img src=&quot;1.png&quot;/&gt;&lt;/li&gt;\n   &lt;li draggable=&quot;true&quot;&gt;&lt;img src=&quot;2.png&quot;/&gt;&lt;/li&gt;\n   &lt;li draggable=&quot;true&quot;&gt;&lt;img src=&quot;3.png&quot;/&gt;&lt;/li&gt;\n   &lt;li draggable=&quot;true&quot;&gt;&lt;img src=&quot;4.png&quot;/&gt;&lt;/li&gt;\n   &lt;li draggable=&quot;true&quot;&gt;&lt;img src=&quot;5.png&quot;/&gt;&lt;/li&gt;\n   &lt;li draggable=&quot;true&quot;&gt;&lt;img src=&quot;6.png&quot;/&gt;&lt;/li&gt;\n   &lt;li draggable=&quot;true&quot;&gt;&lt;img src=&quot;7.png&quot;/&gt;&lt;/li&gt;\n   &lt;li draggable=&quot;true&quot;&gt;&lt;img src=&quot;8.png&quot;/&gt;&lt;/li&gt;\n   &lt;li draggable=&quot;true&quot;&gt;&lt;img src=&quot;9.png&quot;/&gt;&lt;/li&gt;\n   &lt;li draggable=&quot;true&quot;&gt;&lt;img src=&quot;10.png&quot;/&gt;&lt;/li&gt;\n   &lt;li draggable=&quot;true&quot;&gt;&lt;img src=&quot;11.png&quot;/&gt;&lt;/li&gt;\n   &lt;li draggable=&quot;true&quot;&gt;&lt;img src=&quot;12.png&quot;/&gt;&lt;/li&gt;\n   &lt;!-- &lt;li draggable=&quot;true&quot;&gt;&lt;img src=&quot;13.png&quot;/&gt;&lt;/li&gt;\n   &lt;li draggable=&quot;true&quot;&gt;&lt;img src=&quot;14.png&quot;/&gt;&lt;/li&gt;\n   &lt;li draggable=&quot;true&quot;&gt;&lt;img src=&quot;15.png&quot;/&gt;&lt;/li&gt;\n   &lt;li draggable=&quot;true&quot;&gt;&lt;img src=&quot;16.png&quot;/&gt;&lt;/li&gt;\n   &lt;li draggable=&quot;true&quot;&gt;&lt;img src=&quot;17.png&quot;/&gt;&lt;/li&gt;\n   &lt;li draggable=&quot;true&quot;&gt;&lt;img src=&quot;18.png&quot;/&gt;&lt;/li&gt;\n   &lt;li draggable=&quot;true&quot;&gt;&lt;img src=&quot;19.png&quot;/&gt;&lt;/li&gt;\n   &lt;li draggable=&quot;true&quot;&gt;&lt;img src=&quot;20.png&quot;/&gt;&lt;/li&gt;\n   &lt;li draggable=&quot;true&quot;&gt;&lt;img src=&quot;21.png&quot;/&gt;&lt;/li&gt;\n   &lt;li draggable=&quot;true&quot;&gt;&lt;img src=&quot;22.png&quot;/&gt;&lt;/li&gt;\n   &lt;li draggable=&quot;true&quot;&gt;&lt;img src=&quot;23.png&quot;/&gt;&lt;/li&gt;\n   &lt;li draggable=&quot;true&quot;&gt;&lt;img src=&quot;24.png&quot;/&gt;&lt;/li&gt;\n   &lt;li draggable=&quot;true&quot;&gt;&lt;img src=&quot;25.png&quot;/&gt;&lt;/li&gt;\n   &lt;li draggable=&quot;true&quot;&gt;&lt;img src=&quot;26.png&quot;/&gt;&lt;/li&gt; --&gt;\n&lt;/ul&gt;\n&lt;/div&gt;\n&lt;script&gt;\n  //请加qq群：135430763共同学习！\n  var imgarrs = document.querySelectorAll(&quot;img&quot;);\n  var dragnow=null;//目前被拽着的物体\n  for(var i=0;i&lt; imgarrs.length;i++ ){\n      addHandler(imgarrs[i],&#39;dragstart&#39;,dragstart);\n      addHandler(imgarrs[i],&#39;dragenter&#39;,dragenter);\n      addHandler(imgarrs[i],&#39;dragover&#39;,dragover);\n      addHandler(imgarrs[i],&#39;dragleave&#39;,dragleave);\n      addHandler(imgarrs[i],&#39;drop&#39;,drop);\n      addHandler(imgarrs[i],&#39;dragend&#39;,dragend);\n   }\n   function addHandler(node,type,handler){\n      if(window.addEventListener){\n            node.addEventListener(type,handler,false);\n      }else if(window.attachEvent){\n            node.attachEvent(&#39;on&#39;+type,handler);\n      }\n   }\n                \n   function dragstart(e){//被拖拽元素\n     if(typeof e.target.style.opacity!=&#39;undefined&#39;){\n         e.target.style.opacity=&#39;0.4&#39;;\n     }else{\n         e.target.style.filter = &quot;alpha(opacity=40)&quot;;        \n     }\n   \n     addClass(e.target,&quot;zIndex&quot;);\n     e.dataTransfer.setData(&quot;text&quot;,e.target.src);//存储图片的src\n     dragnow=e.target;//目前被拽的物体\n   }\n   \n    function dragover(e){//拖拽目标身上的效果\n       e.preventDefault();\n       e.dataTransfer.dropEffect=&#39;move&#39;;\n    }\n   \n    function dragenter(e){\n       if(e.stopPropagation){e.stopPropagation();}\n          if(typeof e.target.classList !=&#39;undefined&#39;){\n             e.target.classList.add(&#39;hover&#39;);\n          }else{\n             addClass(e.target,&quot;hover&quot;);\n          }\n       }\n    \n	function dragleave(e){\n       removeClass(e.target,&quot;hover&quot;);\n    }\n    \n	function drop(e){\n       var src = e.dataTransfer.getData(&quot;text&quot;);//获取src\n       e.preventDefault();\n       if(e.stopPropagation){\n          e.stopPropagation();\n       }else if(e.attachEvent){\n          e.cancelBubble=true;\n       }\n       if(dragnow == e.target){\n          removeClass(e.target,&quot;hover&quot;);\n          removeClass(e.target,&quot;zIndex&quot;);\n          return;\n      }else{//如果拽着的元素与被拽着的元素一样，不用处理\n         dragnow.src = e.target.src;\n         e.target.src = src;\n         removeClass(e.target,&quot;hover&quot;);\n         removeClass(e.target,&quot;zIndex&quot;);\n      }\n     }\n    \n	 function dragend(e){\n        e.preventDefault();\n        if(typeof e.target.style.opacity!=&#39;undefined&#39;){\n           e.target.style.opacity=&#39;1&#39;;\n        }else{\n           e.target.style.filter = &quot;alpha(opacity=100)&quot;;        \n        }//针对FF 在dragend 时候阻止冒泡\n           removeClass(e.target,&quot;zIndex&quot;);\n        }//发生在被拖拽物体身上\n                \n     function addClass(node,newclass){\n       if(node.className.indexOf(newclass)&gt;0){\n            return;\n       }\n       node.className = node.className?node.className+&quot; &quot;+newclass:newclass;\n    }\n    \n	function removeClass(node,className){\n        if(typeof node.classList !=&#39;undefined&#39;){\n          node.classList.remove(className);\n        }else{\n          var classarr = node.className.split(/\\s+/);\n          var arr = [];\n          for( var i=0;i&lt; classarr.length;i++ ){\n             if(classarr[i] == className)continue;\n             arr.push(classarr[i]);\n          }\n          node.className = arr.join(&quot; &quot;);\n       }\n    }\n	//请加qq群：135430763共同学习！\n&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;</pre>\n<p>运行效果如下：<img src=\"http://img.blog.csdn.net/20150409162923542\" alt=\"\"></p>\n<p><a target=\"_blank\" href=\"http://download.csdn.net/detail/xmt1139057136/8647753\" target=\"_blank\">源码下载地址</a>：http://download.csdn.net/detail/xmt1139057136/8647753</p>\n   \n', '2016-04-16 01:21:36', '2');
INSERT INTO `article` VALUES ('10147', '10003', 'jQueryMobile中jQuery.mobile.changePage方法使用详解', '\n\njQuery.mobile.changePage方法用的还是很多的。作为一个老手，有必要对jQuery mobile中实用方法做一些总结。系列文章请看<a target=\"_blank\" target=\"_blank\" href=\"http://blog.csdn.net/column/details/jquerymobile.html\">jQuery Mobile专栏</a>。jquery.mobile.changepage是过时的jQuery Mobile 1.4.0及将被删除在1.5.0。使用pagecontainer部件的change()法代替。<br>\n注意该方法是在内部使用的页面加载和转换作为一个结果，点击一个链接或提交表单时。跳转外部页面全部没有效果，必须是内部的DIV页面才有效果。<br>\n<strong>jQuery.mobile.changePage( to [, options ] )</strong>参数解释说明：<br>\n<strong>to</strong>：字符串类型或Object类型，将要跳转到的目的页面。<br>\n<strong>options</strong>：可选参数，Object类型。其对象内的属性解释如下：<br>\n<strong>allowSamePageTransition</strong>：布尔类型，默认为false。默认情况下，changepage()忽略请求改变当前的活动页面。设置为true，允许请求执行。注意的一些页面转换到另一个页面(changepage请求的页和页是不同的)，他们可能不会如预期的动画。<br>\n<strong>changeHash</strong>:布尔类型，默认为true。设置为true时地址栏中的Hash更新会创建一个新的浏览器历史记录的影响。设置为false，传入的页面在浏览器历史替换当前页面，用户导航无法通过浏览器的“后退”按钮回到上一个页面。<br>\n<strong>data</strong>：Object类型或字符串类型，默认为 undefined。跳转页面发送ajax请求的参数。<br>\n<strong>dataUrl</strong>：字符串类型，默认为 undefined。完成页面转换时要更新浏览器地址的URL地址。如不特别指定，则使用页面page元素的data-url属性&#20540;。<br>\n<strong>pageContainer</strong>：（jQuery选择器，默认：$.mobile.pageContainer)指定应该包含页面的容器。<br>\n<strong>reloadPage</strong>：布尔类型，默认false。强制刷新页面, 即使当页面容器中的dom元素已经准备好时，也强制刷新。只在changePage()的to参数是一个可用地址的时候。<br>\n<strong>reverse</strong>：布尔类型，默认false。设定页面转场动画的方向，设置为true时将导致反方向的转场。<br>\n<strong>role</strong>：字符串类型，默认为 undefined。显示页面的时候使用data-role&#20540;。默认情况下此参数为认：undefined，取决于元素的@data-role属性。<br>\n<strong>showLoadMsg</strong>：布尔类型，默认true。设定加载外部页面时是否显示loading信息。<br>\n<strong>transition</strong>：字符串类型，默认为 $.mobile.defaultPageTransition。过渡到其他页面时呈现。<br>\n<strong>type</strong>:字符串类型，默认为get。只有到to的参数被指定时使用。<br>\n使用例子如下：添加changehash：假以避免iframe引起的问题。<br>\n<pre code_snippet_id=\"634096\" snippet_file_name=\"blog_20150402_1_4319976\" code_snippet_id=\"634096\" snippet_file_name=\"blog_20150402_1_4319976\" name=\"code\" class=\"javascript\">$.mobile.changePage( &quot;../resources/us.html&quot;, { \n	transition: &quot;slideup&quot;, \n	changeHash: false \n});\n$.mobile.changePage( &quot;../resources/results.php&quot;, {\n  type: &quot;post&quot;,\n  data: $( &quot;form#search&quot; ).serialize(),\n  changeHash: false\n});\n$.mobile.changePage( &quot;../resources/confirm.html&quot;, {\n  transition: &quot;pop&quot;,\n  reverse: false,\n  changeHash: false\n});\n//以slideup效果 跳转到 &quot;about us&quot; 页面\n$.mobile.changePage(&quot;about/us.html&quot;, &quot;slideup&quot;);\n \n//以pop效果 跳转到 &quot;confirm&quot; 页面 并且在url hash里不记录其历史\n$.mobile.changePage(&quot;../alerts/confirm.html&quot;， &quot;pop&quot;， false， false); \n\n\n//跳转到 &quot;search results&quot; 页面，提交id为 &quot;search&quot;的表单数据\n$.mobile.changePage({url:&quot;searchresults.php&quot; , type:&quot;get&quot; , data: $(&quot;form#search&quot;).serialize() }); \n\n\n//将页面url，类型，数据定义为变量来传递。\n$.mobile.changePage({ url: formresults.php, type: &#39;get&#39;, data:$(&#39;form#myform&#39;).serialize () });\n\n\n//使用changepage来加载第三个页面\n$.mobile.changePage([$.mobile.activePage.data (&#39;ui.prevPage&#39;), anotherPreviousPage], &#39;pop&#39;);</pre>\n   \n', '2016-04-16 01:21:36', '0');
INSERT INTO `article` VALUES ('10148', '10003', 'jQueryMobile中$.mobile.buttonMarkup方法使用详解', '\n\n<p>最近在群里遇到多数网友提到$.mobile.buttonMarkup()方法的使用。我这里就列了一下api的使用说明，以后大家看博客就能解决问题。如有不正确的地方，请留言指出！</p>\n<p><strong>jQuery Mobile暴露的方法都是使用$.mobile来引用。</strong><br>\n$.mobile.buttonMarkup( options, overwriteClasses ) 添加按钮的样式元素<br>\n其中options为对象,overwriteClasses为布尔类型，默认为false。当设置为true，buttonmarkup()丢弃所有样式；相反，当设置为false，在当前已经存在的样式基础上增加样式。<br>\n<strong>options对象的属性解释如下</strong>：<br>\n<strong>corners属性</strong>：设置圆角，布尔类型，默认为true。当为true时增加ui-corner-all样式，当为false是删除ui-corner-all样式。它的使用类&#20284;于data-corners=&quot;false&quot;。<br>\n<strong>icon属性</strong>：设置图标，字符串类型，默认为&quot;&quot;。它的使用类&#20284;于data-icon=&quot;arrow-r&quot;。和class添加&quot;ui-icon-&quot;属性类&#20284;。<br>\n<strong>iconpos属性</strong>：设置图标位置，字符串类型，默认为&quot;left&quot;。它的使用类&#20284;于data-iconpos=&quot;right&quot;。和class添加&quot;ui-btn-icon-&quot;属性类&#20284;。<br>\n<strong>iconshadow属性</strong>：设置阴影图标，布尔类型，默认为false。这个选项是使用1.4.0将会被删除在1.5.0。它的使用类&#20284;于data-iconshadow=&quot;true&quot;。和class添加&quot;ui-shadow-icon&quot;属性类&#20284;。<br>\n<strong>inline属性</strong>：设置元素的行内样式，布尔类型，默认为false。它的使用类&#20284;于data-inline=&quot;true&quot;。和class添加&quot;ui-btn-inline&quot;属性类&#20284;。<br>\n<strong>mini属性</strong>：设置元素的较小样式，布尔类型，默认为false。它的使用类&#20284;于data-mini=&quot;true&quot;。和class添加&quot;ui-mini&quot;属性类&#20284;。<br>\n<strong>shadow属性</strong>：设置元素的阴影，布尔类型，默认为true。它的使用类&#20284;于data-shadow=&quot;false&quot;。和class添加&quot;ui-shadow&quot;属性类&#20284;。<br>\n<strong>theme属性</strong>：设置主题，默认为null,继承自父元素，字符串类型。它的使用类&#20284;于data-theme=&quot;b&quot;。和class添加&quot;ui-btn-&quot;属性类&#20284;，如：ui-btn-b。<br>\n如下使用：<br>\n$(&quot;#myAnchor&quot;).buttonMarkup({corners:false});//取消圆角<br>\n$(&quot;#myAnchor&quot;).buttonMarkup({shadow:false});//设置阴影<br>\n$(&quot;#myAnchor&quot;).buttonMarkup({corners:true});//设置圆角<br>\n</p>\n<p>如有不懂，请加qq群：135430763共同学习！<br>\n</p>\n   \n', '2016-04-16 01:21:37', '0');
INSERT INTO `article` VALUES ('10149', '10003', 'jquery顶部固定层下拉导航', '\n\n<p>最近有人在论坛里讨论怎么制作导航菜单！我关注了一下，这里就写了一个简单的demo。供大家参考。代码如下：</p>\n<p>\n<pre code_snippet_id=\"631359\" snippet_file_name=\"blog_20150330_1_4249296\" name=\"code\" class=\"html\">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;\n&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;\n	&lt;head&gt;\n		&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;\n		&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;  /&gt;\n		&lt;title&gt;jquery顶部固定层下拉导航&lt;/title&gt;\n		&lt;style type=&quot;text/css&quot;&gt;\n			@charset &quot;utf-8&quot;;\n			/* CSS Document */\n			html,*,body, div, ul,ol, li,h1,h2,h3,h4,h5,h6,p,span{margin:0;padding:0;}\n			body{font-family:&quot;微软雅黑&quot;, Arial, Helvetica, sans-serif;color:#666666;line-height:25px;font-size:14px;background:#f2f2f2 url(bg.gif) repeat-x left top;height:2000PX;}\n			img{vertical-align:middle;}\n			em{font-style:normal;}\n			a img, :link img, :visited img{border:0;}\n			a:link, a:visited{text-decoration:none;color:#666666;}\n			a:hover,a:focus{text-decoration:underline;color:#0573bd;text-decoration:none;}\n			ul, ul li{list-style-type:none;}\n\n			#top_bg{height:40px;width:100%;background:#333;box-shadow:1px 1px 7px #999;position:fixed;z-index:999;left:0;border-bottom:#C6C6C6 solid 1px;}\n			.top{width:1640px;height:40px;margin:0 auto;}\n			.top .logo_l{width:145px;height:40px;float:left;background:url(logo.png) no-repeat left;}\n\n			.nav_z{width:auto!important;height:40px;float:left;position:relative;z-index:999 ;}\n			#navul li{float:left;width:80px;height:40px;position:relative;text-align:center;line-height:40px;}\n			#navul li a:link, #navul li a:visited{color:#FFF;font-weight:500;letter-spacing:2px;}\n			#navul li ul{display:none;position:absolute;z-index:999;background:#e6e6e6;border:#c6c6c6 1px solid;border-bottom:none;left:-1px;}\n			#navul li ul li{display:block;width:78px;float:none;height:35px;position:relative;line-height:35px;border-bottom:#C6C6C6 1px solid;font-size:12px;overflow:hidden}\n			#navul li.navmoon{background:#E6E6E6;border:#C6C6C6 1px solid;width:78px;height:38px;line-height:38px;}\n			#navul li.navmoon a{color:#404a58;}\n			#navul li.navhome a:hover{color:#FCFF00;}\n			#navul li.navmoon ul{display:block;}\n			#navul li.navmoon ul a{display:block;width:78px;height:35px;line-height:35px;}\n			#navul li.navmoon ul a:hover{color:#0573bd;background:#FFF;}\n		&lt;/style&gt;\n		&lt;script type=&quot;text/javascript&quot; src=&quot;http://apps.bdimg.com/libs/jquery/1.10.2/jquery.min.js&quot;&gt;&lt;/script&gt;\n		&lt;script type=&quot;text/javascript&quot;&gt;\n			$(function(){		   \n				$(&quot;#navul &gt; li&quot;).not(&quot;.navhome&quot;).hover(function(){\n					$(this).addClass(&quot;navmoon&quot;)\n				},function(){\n					$(this).removeClass(&quot;navmoon&quot;)\n				});\n			}); \n\n			(function($){\n				$.fn.capacityFixed = function(options) {\n					var opts = $.extend({},$.fn.capacityFixed.deflunt,options);\n					var FixedFun = function(element) {\n						var top = opts.top;\n						element.css({\n							&quot;top&quot;:top\n						});\n						$(window).scroll(function() {\n							var scrolls = $(this).scrollTop();\n							if (scrolls &gt; top) {\n\n								if (window.XMLHttpRequest) {\n									element.css({\n										position: &quot;fixed&quot;,\n										top: 0							\n									});\n								} else {\n									element.css({\n										top: scrolls\n									});\n								}\n							}else {\n								element.css({\n									position: &quot;absolute&quot;,\n									top: top\n								});\n							}\n						});\n						element.find(&quot;.close-ico&quot;).click(function(event){\n							element.remove();\n							event.preventDefault();\n						})\n					};\n					return $(this).each(function() {\n						FixedFun($(this));\n					});\n				};\n				$.fn.capacityFixed.deflunt={\n					right : 0,//相对于页面宽度的右边定位\n					top:0\n				};\n			})(jQuery);\n		&lt;/script&gt;\n	&lt;/head&gt;\n	&lt;body&gt;\n		&lt;div id=&quot;top_bg&quot;&gt;\n			&lt;div class=&quot;top&quot;&gt;\n				&lt;a class=&quot;logo_l&quot; href=&quot;/&quot; title=&quot;返回首页&quot;&gt;&lt;/a&gt;\n				&lt;!--导航开始--&gt;\n				&lt;div class=&quot;nav_z&quot;&gt;\n					&lt;ul id=&quot;navul&quot; class=&quot;cl&quot;&gt;\n						&lt;li&gt;\n							&lt;a href=&quot;#&quot;&gt;新闻&lt;/a&gt;\n							&lt;ul&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;企业文化&lt;/a&gt;&lt;/li&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;企业资质&lt;/a&gt;&lt;/li&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;服务团队&lt;/a&gt;&lt;/li&gt;\n							&lt;/ul&gt;\n						&lt;/li&gt;\n						&lt;li&gt;\n							&lt;a href=&quot;#&quot;&gt;视频&lt;/a&gt;\n							&lt;ul&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;企业文化&lt;/a&gt;&lt;/li&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;企业资质&lt;/a&gt;&lt;/li&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;服务团队&lt;/a&gt;&lt;/li&gt;\n							&lt;/ul&gt;\n						&lt;/li&gt;\n						&lt;li&gt;\n							&lt;a href=&quot;#&quot;&gt;音乐&lt;/a&gt;\n							&lt;ul&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;企业文化&lt;/a&gt;&lt;/li&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;企业资质&lt;/a&gt;&lt;/li&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;服务团队&lt;/a&gt;&lt;/li&gt;\n							&lt;/ul&gt;\n						&lt;/li&gt;\n						&lt;li&gt;\n							&lt;a href=&quot;#&quot;&gt;图片&lt;/a&gt;\n							&lt;ul&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;企业文化&lt;/a&gt;&lt;/li&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;企业资质&lt;/a&gt;&lt;/li&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;服务团队&lt;/a&gt;&lt;/li&gt;\n							&lt;/ul&gt;\n						&lt;/li&gt;\n						&lt;li&gt;\n							&lt;a href=&quot;#&quot;&gt;购物&lt;/a&gt;\n							&lt;ul&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;企业文化&lt;/a&gt;&lt;/li&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;企业资质&lt;/a&gt;&lt;/li&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;服务团队&lt;/a&gt;&lt;/li&gt;\n							&lt;/ul&gt;\n						&lt;/li&gt;\n						&lt;li&gt;\n							&lt;a href=&quot;#&quot;&gt;小说&lt;/a&gt;\n							&lt;ul&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;企业文化&lt;/a&gt;&lt;/li&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;企业资质&lt;/a&gt;&lt;/li&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;服务团队&lt;/a&gt;&lt;/li&gt;\n							&lt;/ul&gt;\n						&lt;/li&gt;\n						&lt;li&gt;\n							&lt;a href=&quot;#&quot;&gt;社区&lt;/a&gt;\n							&lt;ul&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;企业文化&lt;/a&gt;&lt;/li&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;企业资质&lt;/a&gt;&lt;/li&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;服务团队&lt;/a&gt;&lt;/li&gt;\n							&lt;/ul&gt;\n						&lt;/li&gt;\n						&lt;li&gt;\n							&lt;a href=&quot;#&quot;&gt;笑话&lt;/a&gt;\n							&lt;ul&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;企业文化&lt;/a&gt;&lt;/li&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;企业资质&lt;/a&gt;&lt;/li&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;服务团队&lt;/a&gt;&lt;/li&gt;\n							&lt;/ul&gt;\n						&lt;/li&gt;\n						&lt;li&gt;\n							&lt;a href=&quot;#&quot;&gt;游戏&lt;/a&gt;\n							&lt;ul&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;企业文化&lt;/a&gt;&lt;/li&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;企业资质&lt;/a&gt;&lt;/li&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;服务团队&lt;/a&gt;&lt;/li&gt;\n							&lt;/ul&gt;\n						&lt;/li&gt;\n						&lt;li&gt;\n							&lt;a href=&quot;#&quot;&gt;更多&lt;/a&gt;\n							&lt;ul&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;企业文化&lt;/a&gt;&lt;/li&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;企业资质&lt;/a&gt;&lt;/li&gt;\n								&lt;li&gt;&lt;a href=&quot;#&quot;&gt;服务团队&lt;/a&gt;&lt;/li&gt;\n							&lt;/ul&gt;\n						&lt;/li&gt;\n						&lt;!--可在此处直接添加导航--&gt;\n					&lt;/ul&gt;\n				&lt;/div&gt;&lt;!--导航结束--&gt;\n				&lt;script  type=&quot;text/javascript&quot;&gt; \n				$(&quot;.navbg&quot;).capacityFixed();\n				&lt;/script&gt;\n\n			&lt;/div&gt;\n\n			&lt;div style=&quot;text-align:center;margin:350px 0; font:normal 14px/24px &#39;MicroSoft YaHei&#39;;&quot;&gt;\n				&lt;p&gt;如有不懂，请加qq群：135430763共同学习！ &lt;/p&gt;\n				&lt;p&gt;&lt;a href=&quot;http://download.csdn.net/download/xmt1139057136/8547089&quot;&gt;完整例子下载&lt;/a&gt;&lt;/p&gt;\n			&lt;/div&gt;\n\n		&lt;/div&gt;\n	&lt;/body&gt;\n&lt;/html&gt;\n</pre>运行效果如下：<img src=\"http://img.blog.csdn.net/20150330143812975?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveG10YmxvZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"><br>\n<p><span style=\"font-family:Arial; font-size:14px; line-height:26px\">如有不懂，请加qq群：135430763共同学习！</span></p>\n<p><span style=\"font-family:Arial\"><span style=\"font-size:14px; line-height:26px\"><a target=\"_blank\" href=\"http://download.csdn.net/download/xmt1139057136/8547089\" target=\"_blank\">完整demo下载地址</a>：http://download.csdn.net/download/xmt1139057136/8547089</span></span></p>\n   \n', '2016-04-16 01:21:37', '0');
INSERT INTO `article` VALUES ('10150', '10003', '分享一款jQuery全屏滚动页面特性案例', '\n\n分享一款jQuery全屏滚动页面特性案例。<br>\n我们在来往官网，或者小米官网都会看到全屏滚动页面的一些例子。可以说全屏滚动页面越来越受欢迎。它们就像是竖着的图片轮转一样。<br>\n这样的页面有很多，如：iPhone 5C页面：<a target=\"_blank\" href=\"http://www.dowebok.com/demo/2014/77/index8.html\" target=\"_blank\">http://www.dowebok.com/demo/2014/77/index8.html&nbsp;</a><br>\n网易邮箱6.0：<a target=\"_blank\" href=\"http://www.dowebok.com/demo/2014/97/\" target=\"_blank\">http://www.dowebok.com/demo/2014/97/</a><br>\n来往官网：<a target=\"_blank\" href=\"http://www.laiwang.com\" target=\"_blank\">http://www.laiwang.com</a><br>\n百度百科史记2013：<a target=\"_blank\" href=\"http://www.dowebok.com/demo/2014/78/\" target=\"_blank\">http://www.dowebok.com/demo/2014/78/</a><br>\n搜狐快站：<a target=\"_blank\" href=\"http://www.dowebok.com/demo/2014/80/\" target=\"_blank\">http://www.dowebok.com/demo/2014/80/</a><br>\n证券时报网移动产品：<a target=\"_blank\" href=\"http://www.dowebok.com/demo/2014/77/index9.html\">http://www.dowebok.com/demo/2014/77/index9.html</a><br>\n邮箱大师：<a target=\"_blank\" href=\"http://www.dowebok.com/demo/126/\" target=\"_blank\">http://www.dowebok.com/demo/126/</a><br>\n360安全路由：<a target=\"_blank\" href=\"http://www.dowebok.com/demo/2014/77/index10.html\" target=\"_blank\">http://www.dowebok.com/demo/2014/77/index10.html</a><br>\n等等一些例子。看看实际代码：<pre code_snippet_id=\"629270\" snippet_file_name=\"blog_20150327_1_6083709\" name=\"code\" class=\"html\">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;\n&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;&lt;head&gt;\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;\n&lt;meta http-equiv=&quot;Content-Language&quot; content=&quot;zh-CN&quot;&gt;\n&lt;title&gt;jQuery实现滚屏翻页效果&lt;/title&gt;\n&lt;script type=&quot;text/javascript&quot; src=&quot;http://apps.bdimg.com/libs/jquery/1.10.2/jquery.min.js&quot;&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n	&lt;style type=&quot;text/css&quot;&gt;\n		/* css 重置 */\n		*{margin:0; padding:0; list-style:none; }\n		body{ color:#333;font:14px/150% &quot;Microsoft YaHei&quot;, Arial,&quot;宋体&quot;,sans-serif; text-align:center; background:#DCDCDC;  }\n		img{ border:0;  }\n		a{ text-decoration:none; color:#333;  }\n		a:hover{ text-decoration:underline;   }\n\n		/* 顶部导航条 - 可无视 */\n		#header{ position:fixed; _position:absolute; z-index:1; top:0; left:0; width:100%;  height:32px; line-height:30px; color:#fff; text-align:left; overflow:hidden; background: #333;}\n		#header span{ float:right; padding-right:20px;   }\n		#header span a{ margin:0 10px; color:#fff; text-decoration:underline;   }\n		#header h1{ padding:0 10px; font-size:14px; float:left;  }\n		#header .change{ text-align:center; position:absolute; top:0; left:50%; width:280px; margin-left:-140px;   height:32px;   }\n		#header .change a{ color:#fff; display:inline-block; *display:inline; zoom:1; padding:0 10px; background:#666; height:32px; line-height:32px; margin:0 5px;     }\n		#header .change a:hover{ text-decoration:none; color:#ff0;  }\n		#header .change a.on{ background:#e60;  }\n		#footer{ height:34px; line-height:34px;}\n	&lt;/style&gt;\n	&lt;style type=&quot;text/css&quot;&gt;\n		html{  overflow-x:hidden; overflow-y:hidden;  _background-image:url(about:blank); _background-attachment:fixed; }/* html加上这段代码用于取消ie6滚动时候元素震动bug */\n		#content{ position:relative; z-index:0; }\n		.article{ background:#04caca; text-align:left; }\n		.article dt{ width:60%; padding-top:50px;   margin:0 auto; font:normal 40px/200% &quot;Microsoft YaHei&quot;; color:#fff; text-shadow:1px 1px 1px #666;  }\n		.article dt em{ font:italic 80px/150% Verdana; margin-right:10px;  }\n		.article dd{ position:relative; z-index:1; width:60%;  margin:20px auto 0 auto;   }\n		.article dd .con{ position:relative; z-index:1; padding:30px; font:normal 16px/200% &quot;Microsoft YaHei&quot;; color:#fff; }\n		.article dd .con p{ text-indent:24px; margin-bottom:20px;  }\n		#art2{ background:#7eb906;  }\n		#art3{ background:#d68432;  }\n		#art4{ background:#aa89d8;  }\n		.sideGuide{ position:fixed;  _position:absolute;  z-index:1; left:50px; top:150px; width:150px; background:#fff;  _top:expression(eval(document.documentElement.scrollTop+150))  }\n		.sideGuide h3{ height:40px; line-height:40px; background:#f50; font-weight:bold; color:#fff;   }\n		.sideGuide ul{ padding:10px 0;  }\n		.sideGuide li{ height:32px; line-height:32px; position:relative; border-bottom:1px solid #f4f4f4; vertical-align:middle;  }\n		.sideGuide li s{ display:none; position:absolute; top:0; left:-10px; width:10px; background:#555; height:32px;     }\n		.sideGuide li a{ display:block; color:#999;   }\n		.sideGuide li a:hover{ text-decoration:none; color:#f50;  }\n		.sideGuide li.on s{ display:block;  }\n		.sideGuide li.on a{ background:#f4f4f4; color:#333;  }\n		.ie6fixedTL{position:absolute;left:expression(eval(document.documentElement.scrollLeft));}\n	&lt;/style&gt;\n	&lt;div id=&quot;content&quot;&gt;\n			&lt;dl id=&quot;art1&quot; class=&quot;article&quot;&gt;\n				&lt;dt&gt;&lt;em&gt;01&lt;/em&gt;作者声明&lt;/dt&gt;\n				&lt;dd&gt;\n						&lt;div class=&quot;con&quot;&gt;\n							&lt;p&gt;jquery纵向定位滚屏特效代码,是个人业余兴趣爱好写的，是基于jquery一个特效，没有任何封装，只是提供一种思考方式和实现方法，代码共享可随便使用，可能存在bug，但本人不承担任何修复bug的责任。&lt;/p&gt;\n						&lt;/div&gt;\n				&lt;/dd&gt;\n			&lt;/dl&gt;\n			&lt;dl id=&quot;art2&quot; class=&quot;article&quot;&gt;\n				&lt;dt&gt;&lt;em&gt;02&lt;/em&gt;电影新闻&lt;/dt&gt;\n				&lt;dd&gt;\n						&lt;div class=&quot;con&quot;&gt;\n							&lt;p&gt;乔治&#183;R&#183;R&#183;马丁用一部奇幻巨著笼络了亿万粉丝，终使得它被搬上小荧屏，却炮制出了瑰丽如电影的史诗之作。紧接着，它创造高收视，成为金球与艾美的常客，以大投资获得大回报，更吊足了“冰火迷”的胃口。自2011年暖春推出《权力的游戏》以来，第一季的浩瀚铺陈，第二季的华丽发展，至今年第三季的彪悍回归，HBO缔造了美剧史上的一段奇迹，赢得口碑与收视的大高潮。七国争战的壮烈、宫廷权谋的迂回、人性与兽性的激烈碰撞，以及活色生香的情色场面，使得它光彩熠熠，且一直呈“渐入佳境”的趋势。&lt;/p&gt;\n							&lt;p&gt;如今《权力的游戏》带着它浩荡的异鬼军团，以及错综复杂的人际关系脉络，再次让观众一同见证辉煌，以彰显其恢弘与细腻，美丽与残酷。让我们在此用图解的形式回溯这部神作的“前世今生”，解读它的伟大，并且一同期待它华丽的后续吧！&lt;/p&gt;\n							&lt;p&gt;这场“权力的游戏”，观众将奉陪到底！本专题将图解“冰火”数字图腾，换个轻松的角度，迎接冰火的回归。&lt;/p&gt;\n						&lt;/div&gt;\n				&lt;/dd&gt;\n			&lt;/dl&gt;\n			&lt;dl id=&quot;art3&quot; class=&quot;article&quot;&gt;\n				&lt;dt&gt;&lt;em&gt;03&lt;/em&gt;人物新闻&lt;/dt&gt;\n				&lt;dd&gt;\n						&lt;div class=&quot;con&quot;&gt;\n							&lt;p&gt;乔治&#183;R&#183;R&#183;马丁用一部奇幻巨著笼络了亿万粉丝，终使得它被搬上小荧屏，却炮制出了瑰丽如电影的史诗之作。紧接着，它创造高收视，成为金球与艾美的常客，以大投资获得大回报，更吊足了“冰火迷”的胃口。自2011年暖春推出《权力的游戏》以来，第一季的浩瀚铺陈，第二季的华丽发展，至今年第三季的彪悍回归，HBO缔造了美剧史上的一段奇迹，赢得口碑与收视的大高潮。七国争战的壮烈、宫廷权谋的迂回、人性与兽性的激烈碰撞，以及活色生香的情色场面，使得它光彩熠熠，且一直呈“渐入佳境”的趋势。&lt;/p&gt;\n							&lt;p&gt;如今《权力的游戏》带着它浩荡的异鬼军团，以及错综复杂的人际关系脉络，再次让观众一同见证辉煌，以彰显其恢弘与细腻，美丽与残酷。让我们在此用图解的形式回溯这部神作的“前世今生”，解读它的伟大，并且一同期待它华丽的后续吧！&lt;/p&gt;\n							&lt;p&gt;这场“权力的游戏”，观众将奉陪到底！本专题将图解“冰火”数字图腾，换个轻松的角度，迎接冰火的回归。&lt;/p&gt;\n						&lt;/div&gt;\n				&lt;/dd&gt;\n			&lt;/dl&gt;\n			&lt;dl id=&quot;art4&quot; class=&quot;article&quot;&gt;\n				&lt;dt&gt;&lt;em&gt;04&lt;/em&gt;电视新闻&lt;/dt&gt;\n				&lt;dd&gt;\n						&lt;div class=&quot;con&quot;&gt;\n							&lt;p&gt;乔治&#183;R&#183;R&#183;马丁用一部奇幻巨著笼络了亿万粉丝，终使得它被搬上小荧屏，却炮制出了瑰丽如电影的史诗之作。紧接着，它创造高收视，成为金球与艾美的常客，以大投资获得大回报，更吊足了“冰火迷”的胃口。自2011年暖春推出《权力的游戏》以来，第一季的浩瀚铺陈，第二季的华丽发展，至今年第三季的彪悍回归，HBO缔造了美剧史上的一段奇迹，赢得口碑与收视的大高潮。七国争战的壮烈、宫廷权谋的迂回、人性与兽性的激烈碰撞，以及活色生香的情色场面，使得它光彩熠熠，且一直呈“渐入佳境”的趋势。&lt;/p&gt;\n							&lt;p&gt;如今《权力的游戏》带着它浩荡的异鬼军团，以及错综复杂的人际关系脉络，再次让观众一同见证辉煌，以彰显其恢弘与细腻，美丽与残酷。让我们在此用图解的形式回溯这部神作的“前世今生”，解读它的伟大，并且一同期待它华丽的后续吧！&lt;/p&gt;\n							&lt;p&gt;这场“权力的游戏”，观众将奉陪到底！本专题将图解“冰火”数字图腾，换个轻松的角度，迎接冰火的回归。&lt;/p&gt;\n						&lt;/div&gt;\n				&lt;/dd&gt;\n			&lt;/dl&gt;\n			&lt;div class=&quot;sideGuide&quot;&gt;\n				&lt;h3&gt;导航&lt;/h3&gt;\n				&lt;ul&gt;\n					&lt;li class=&quot;on&quot;&gt;&lt;a href=&quot;javascript:void(0)&quot;&gt;作者声明&lt;/a&gt;&lt;s&gt;&lt;/s&gt;&lt;/li&gt;\n					&lt;li&gt;&lt;a href=&quot;javascript:void(0)&quot;&gt;电影新闻&lt;/a&gt;&lt;s&gt;&lt;/s&gt;&lt;/li&gt;\n					&lt;li&gt;&lt;a href=&quot;javascript:void(0)&quot;&gt;人物新闻&lt;/a&gt;&lt;s&gt;&lt;/s&gt;&lt;/li&gt;\n					&lt;li&gt;&lt;a href=&quot;javascript:void(0)&quot;&gt;电视新闻&lt;/a&gt;&lt;s&gt;&lt;/s&gt;&lt;/li&gt;\n				&lt;/ul&gt;\n			&lt;/div&gt;\n	&lt;script type=&quot;text/javascript&quot;&gt; \n	(function($){\n		var goTo = $(&quot;.article&quot;);\n		var guide = $(&quot;.sideGuide&quot;);\n		var guideLi = $(&quot;.sideGuide li&quot;);\n		var index=0;\n		var direct=0; \n		//设置宽高\n		var resetFun = function(){ goTo.each(function(){  $(this).height( $(window).height() ) }); }\n		resetFun();\n		//屏幕滚动\n		var goToFun = function(){ \n			direct=0; \n			if(index&lt;0){ index=0; return }\n			if(index&gt;=guideLi.size()){ index=guideLi.size()-1; return }\n			$(&quot;html,body&quot;).stop().animate({ scrollTop:$(window).height()*index },300,&quot;swing&quot;,function(){direct=0; }); guideLi.removeClass(&quot;on&quot;).eq(index).addClass(&quot;on&quot;);  \n		}\n		guideLi.each(function(i){ $(this).click(function(){  index=guideLi.index( $(this) ); goToFun(); }) });\n		$(window).resize(function(){ resetFun() });\n		/* 滚轮事件 */ \n		var scrollFunc=function(e){ \n			e=e || window.event; \n			if(e.wheelDelta){ direct+= (-e.wheelDelta/120); }else if(e.detail){ direct+=e.detail/3 ; } \n			\n			if( direct&gt;=8 ){ goToFun( index++ ) }\n			if( direct&lt;=-8 ){ goToFun( index-- ) }\n		} \n		if( document.addEventListener){ document.addEventListener(&#39;DOMMouseScroll&#39;,scrollFunc,false); }\n		 window.onmousewheel=document.onmousewheel=scrollFunc; \n\n	})(jQuery);\n	&lt;/script&gt;\n	&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;</pre>\n<p>运行效果：<img src=\"http://img.blog.csdn.net/20150327134248554?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQveG10YmxvZw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center\" alt=\"\"></p>\n<p>如有不懂，请加qq群：135430763共同学习！<br>\n</p>\n   \n', '2016-04-16 01:21:38', '1');
INSERT INTO `article` VALUES ('10151', '10010', '我的第一篇博客', '无所谓', '2016-04-20 14:00:06', '0');
INSERT INTO `article` VALUES ('10152', '10010', '<p>我的第二篇博客<br></p>', '', '2016-04-22 20:52:57', '0');
INSERT INTO `article` VALUES ('10153', '10010', '<p>我的第二篇博客</p><p>我的第二篇博客</p><p>我的第二篇博客<br></p>', '', '2016-04-22 20:57:57', '0');
INSERT INTO `article` VALUES ('10154', '10010', '<p><br></p>', '', '2016-04-22 21:01:07', '0');
INSERT INTO `article` VALUES ('10155', '10010', '<p>123456123456123456<br></p>', '', '2016-04-22 21:05:27', '0');
INSERT INTO `article` VALUES ('10156', '10010', '<p><br></p>', '', '2016-04-22 21:06:07', '0');
INSERT INTO `article` VALUES ('10157', '10010', '<p>dasdsa14d5sa1das651das56as6d1as65<br></p>', '', '2016-04-22 21:06:17', '0');
INSERT INTO `article` VALUES ('10158', '10010', '<p>dsad1as2d31sa23d1sa23d1sa32<br></p>', '', '2016-04-22 21:07:36', '0');
INSERT INTO `article` VALUES ('10159', '10010', '<p>dsadasdasdsdsadsaasdasdas<br></p>', '', '2016-04-22 21:07:56', '0');
INSERT INTO `article` VALUES ('10160', '10010', '<p>1231456456616<br></p>', '', '2016-04-22 21:08:25', '0');
INSERT INTO `article` VALUES ('10161', '10010', '456456416', '<p>456456416<br></p>', '2016-04-22 21:14:11', '0');
INSERT INTO `article` VALUES ('10162', '10010', 'zssadas', '<p>dasdasdsadsadsadsadasdasdsa</p><p>dsadasdasd</p><p>sad</p><p>sa</p><p>dsa</p><p>das<br></p>', '2016-04-22 21:14:53', '0');
INSERT INTO `article` VALUES ('10163', '10010', 'sdadasdassdadasdassdadasdas', '<p>sdadasdassdadasdassdadasdassdadasdassdadasdassdadasdassdadasdassdadasdassdadasdassdadasdassdadasdassdadasdassdadasdas</p><p>sdadasdassdadasdassdadasdassdadasdassdadasdassdadasdassdadasdassdadasdassdadasdassdadasdassdadasdassdadasdassdadasdassdadasdassdadasdassdadasdassdadasdassdadasdas</p><hr><p>sdadasdassdadasdassdadasdassdadasdassdadasdassdadasdassdadasdassdadasdassdadasdassdadasdassdadasdas<br></p>', '2016-04-22 21:26:19', '0');
INSERT INTO `article` VALUES ('10164', '10010', 'sdadasdassdadasdassdadasdas', '<p>SerializableSerializableSerializableSerializableSerializableSerializableSerializableSerializableSerializableSerializableSerializableSerializableSerializableSerializableSerializable</p><hr><p><br></p><hr><p>SerializableSerializableSerializableSerializableSerializableSerializableSerializableSerializ</p><p><br></p><p>bleSerializableSerializableSerializableSerializableSerializableSerializableSerializableSerializableSerializa</p><p><br></p><p>bleSerializableSerializableSerializableSerializableSerializableSerializableSerializableSerializableSerializable</p><hr><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p><br></p><p>Serializable<br></p>', '2016-04-22 21:27:55', '0');
INSERT INTO `article` VALUES ('10165', '10010', 'articleId.toString()', '<p>articleId.toString()articleId.toString()articleId.toString()articleId.toString()articleId.toString()articleId.toString()</p><br>', '2016-04-22 21:30:15', '0');
INSERT INTO `article` VALUES ('10166', '10010', 'this.executeSQLUpdate(sql, parameters);', '<p>this.executeSQLUpdate(sql, parameters);this.executeSQLUpdate(sql, parameters);<br></p>', '2016-04-22 21:33:27', '0');
INSERT INTO `article` VALUES ('10167', '10010', 'articleIdarticleIdarticleId', '<p>articleIdarticleIdarticleId</p><p>articleIdarticleIdarticleIdarticleIdarticleIdarticleIdarticleIdarticleIdarticleId</p><hr><p>articleIdarticleIdarticleIdarticleIdarticleIdarticleIdarticleIdarticleIdarticleIdarticleIdarticleId</p><hr><p>articleId</p><hr><p>articleId</p><hr><p>articleIdarticleIdarticleIdarticleIdarticleIdarticleIdarticleIdarticleIdarticleIdarticleIdarticleIdarticleIdarticleId<br></p>', '2016-04-22 21:37:59', '0');
INSERT INTO `article` VALUES ('10169', '10010', 'this.executeSQLQuery(sql, null)', '<p>this.executeSQLQuery(sql, null)this.executeSQLQuery(sql, null)this.executeSQLQuery(sql, null)this.executeSQLQuery(sql, null)</p><hr><p>this.executeSQLQuery(sql, null)</p><hr><p>this.executeSQLQuery(sql, null)</p><hr><p>this.executeSQLQuery(sql, null)</p><hr><p>this.executeSQLQuery(sql, null)</p><hr><p>this.executeSQLQuery(sql, null)</p><hr><p>this.executeSQLQuery(sql, null)this.executeSQLQuery(sql, null)</p><hr><p>this.executeSQLQuery(sql, null)</p><hr><p>this.executeSQLQuery(sql, null)</p><hr><p>this.executeSQLQuery(sql, null)this.executeSQLQuery(sql, null)</p><hr><p>this.executeSQLQuery(sql, null)this.executeSQLQuery(sql, null)this.executeSQLQuery(sql, null)this.executeSQLQuery(sql, null)<br></p>', '2016-04-22 21:42:28', '0');
INSERT INTO `article` VALUES ('10170', '10010', 'asdadas', '<p>list.get(0).toString()list.get(0).toString()list.get(0).toString()list.get(0).toString()<br></p>', '2016-04-22 21:43:19', '0');
INSERT INTO `article` VALUES ('10171', '10000', 'list.get(0).toString()', '<p>list.get(0).toString()list.get(0).toString()list.get(0).toString()</p><hr><p>list.get(0).toString()</p><p>list.get(0).toString()</p><hr><p>list.get(0).toString()list.get(0).toString()list.get(0).toString()list.get(0).toString()list.get(0).toString()</p><hr><p>list.get(0).toString()list.get(0).toString()list.get(0).toString()<br></p>', '2016-04-22 21:50:01', '0');
INSERT INTO `article` VALUES ('10172', '10011', 'lslslsls', '<p>lslslslslslslslslslslslslslslslslslslslsls</p><p>ls</p><hr><p>ls</p><hr><p>ls</p><hr><p>ls</p><hr><p>ls</p><hr><p>ls</p><hr><p>ls</p><hr><p>lslsls</p><hr><p>ls</p><hr><p>lslslslslslslslslslslslslslslslslslslslslslslslslslslsls<br></p>', '2016-04-22 21:50:50', '0');
INSERT INTO `article` VALUES ('10173', '10011', 'lslslslslslslslsls', '<p>lslslslslslslslslslslslslslsls</p><hr><p>lslslslslslslslslslslslsls</p><hr><p>lslslslslslslslslslslslslslslslslslslslsls</p><hr><p><br></p>', '2016-04-22 21:53:24', '0');
INSERT INTO `article` VALUES ('10174', '10010', '456456416', '<p>456456416dasdasd</p><p>dasdas2das123d1as23d123sad</p><p><br></p><p>dsadsadsa<br></p>', '2016-04-23 17:52:32', '0');
INSERT INTO `article` VALUES ('10175', '10010', '456456416', '<p>456456416dasdasd</p><p>dasdas2das123d1as23d123sad</p><p><span style=\"background-color: rgb(255, 0, 0);\"><br></span></p><p><span style=\"background-color: rgb(255, 0, 0);\">dsadsadsafsdafaf541as6f</span></p><p><span style=\"background-color: rgb(255, 0, 0);\">fasfasd5f4asd56f456asdf</span></p><p><span style=\"background-color: rgb(255, 0, 0);\">f</span></p><p><span style=\"background-color: rgb(255, 0, 0);\">asdf4sda5f4asd56f</span></p><p><span style=\"background-color: rgb(255, 0, 0);\">fas4d5f6asd456fs4ad</span><br></p>', '2016-04-23 17:52:59', '0');
INSERT INTO `article` VALUES ('10176', '10010', '456456416dasdasdas', '<p>456456416dasdasd</p><p>dasdas2das123d1as23d123sad</p><p><br></p><p><br></p><p>fasfasfas<br></p><p></p>', '2016-04-23 18:02:36', '0');
INSERT INTO `article` VALUES ('10177', '10010', '456456416dasdasdas', '<p>456456416dasdasd</p><p>dasdas2das123d1as23d123sad</p><p><br></p><p><br></p><p>fasfasfas<br></p><p></p>', '2016-04-23 18:03:32', '0');
INSERT INTO `article` VALUES ('10178', '10010', 'dasdasd', '<p>list.get(0).toString()list.get(0).toString()list.get(0).toString()list.get(0).toString()</p><p>list.get(0).toString()list.get(0).toString()list.get(0).toString()list.get(0).toString()</p><hr><p>list.get(0).toString()list.get(0).toString()list.get(0).toString()list.get(0).toString()<br></p>', '2016-04-23 18:13:13', '0');
INSERT INTO `article` VALUES ('10179', '10010', 'fdsafas', '<p><span style=\"background-color: rgb(255, 255, 0);\">list.get(0).toString()list.get(0).toString()list.get(0).toString()list.get(0).toString()</span></p><p>list.get(0).toString()list.get(0).toString()list.get(0).toString()list.get(0).toString()</p><p>list.get(0).toString()list.get(0).toString()list.get(0).toString()list.get(0).toString()</p><p>list.get(0).toString()list.get(0).toString()list.get(0).toString()list.get(0).toString()<span style=\"background-color: rgb(255, 255, 0);\"><br></span><br></p>', '2016-04-23 18:14:46', '0');
INSERT INTO `article` VALUES ('10180', '10010', 'asdas', '<p>list.get(0).toString()list.get(0).toString()list.get(0).toString()list.get(0).toString()list.get(0).toString()list.get(0).toString()list.get(0).toString()list.get(0).toString()<br></p>', '2016-04-23 18:16:05', '0');
INSERT INTO `article` VALUES ('10181', '10010', 'loginUserInfo', '<p><span style=\"background-color: rgb(255, 0, 0);\">loginUserInfologinUserInfo</span></p><p><span style=\"background-color: rgb(255, 0, 0);\">loginUserInfo</span></p><hr><p><span style=\"background-color: rgb(255, 0, 0);\">loginUserInfologinUserInfologinUserInfo</span></p><p>loginUserInfo<span style=\"background-color: rgb(255, 0, 0);\"><br></span></p><p><span style=\"background-color: rgb(255, 0, 0);\">loginUserInfologinUserInfo</span>loginUserInfo<br></p>', '2016-04-23 18:27:25', '0');
INSERT INTO `article` VALUES ('10182', '10010', 'gotoUpdateBlogUIupdateArticle', '<blockquote><p>gotoUpdateBlogUIupdateArticle</p></blockquote><pre>updateArticle<br></pre><pre>updateArticle</pre><p><span style=\"background-color: rgb(255, 255, 0);\">asfadsa</span>.</p><p>fasfasfa<br></p><p>fasfasf<br></p><p></p>', '2016-04-23 18:34:28', '0');

-- ----------------------------
-- Table structure for `bloginfo`
-- ----------------------------
DROP TABLE IF EXISTS `bloginfo`;
CREATE TABLE `bloginfo` (
  `blogId` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `userId` int(11) unsigned NOT NULL,
  `blogtitle` varchar(50) DEFAULT NULL,
  `idiograph` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`blogId`),
  UNIQUE KEY `userId` (`userId`),
  KEY `FKD89AF3503ECE7FE8` (`userId`),
  CONSTRAINT `bloginfo_fk_1` FOREIGN KEY (`userId`) REFERENCES `user` (`userId`),
  CONSTRAINT `FKD89AF3503ECE7FE8` FOREIGN KEY (`userId`) REFERENCES `user` (`userId`)
) ENGINE=InnoDB AUTO_INCREMENT=10007 DEFAULT CHARSET=utf8 COMMENT='个性设置表';

-- ----------------------------
-- Records of bloginfo
-- ----------------------------
INSERT INTO `bloginfo` VALUES ('10000', '10000', 'Switch的博客', '学无止境');
INSERT INTO `bloginfo` VALUES ('10001', '10001', 'Switch1的博客', '分享并记录所学所见');
INSERT INTO `bloginfo` VALUES ('10002', '10002', 'Switch2的博客', '分享并记录所学所见');
INSERT INTO `bloginfo` VALUES ('10003', '10003', '', '互联网时代+');
INSERT INTO `bloginfo` VALUES ('10004', '10010', null, 'sadasdas');
INSERT INTO `bloginfo` VALUES ('10005', '10011', null, null);
INSERT INTO `bloginfo` VALUES ('10006', '10012', null, '学无止境');

-- ----------------------------
-- Table structure for `click`
-- ----------------------------
DROP TABLE IF EXISTS `click`;
CREATE TABLE `click` (
  `clickId` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `articleId` int(11) unsigned NOT NULL,
  `ip` varchar(255) DEFAULT NULL,
  `date` datetime DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`clickId`),
  KEY `FK5A5C588CA4E8830` (`articleId`),
  CONSTRAINT `click_fk_1` FOREIGN KEY (`articleId`) REFERENCES `article` (`articleId`),
  CONSTRAINT `FK5A5C588CA4E8830` FOREIGN KEY (`articleId`) REFERENCES `article` (`articleId`)
) ENGINE=InnoDB AUTO_INCREMENT=10372 DEFAULT CHARSET=utf8 COMMENT='点击量表';

-- ----------------------------
-- Records of click
-- ----------------------------
INSERT INTO `click` VALUES ('10000', '10000', '127.0.0.1', '2016-04-16 00:54:48');
INSERT INTO `click` VALUES ('10001', '10001', '127.0.0.1', '2016-04-16 00:54:48');
INSERT INTO `click` VALUES ('10002', '10001', '127.0.0.1', '2016-04-16 00:54:48');
INSERT INTO `click` VALUES ('10003', '10002', '127.0.0.1', '2016-04-16 00:54:48');
INSERT INTO `click` VALUES ('10004', '10003', '127.0.0.1', '2016-04-16 00:54:48');
INSERT INTO `click` VALUES ('10005', '10004', '127.0.0.1', '2016-04-16 00:54:48');
INSERT INTO `click` VALUES ('10006', '10004', '127.0.0.1', '2016-04-16 00:54:48');
INSERT INTO `click` VALUES ('10007', '10004', '127.0.0.1', '2016-04-16 00:54:48');
INSERT INTO `click` VALUES ('10008', '10146', '192.168.0.100', '2016-04-21 18:49:58');
INSERT INTO `click` VALUES ('10009', '10148', '192.168.0.100', '2016-04-21 18:55:30');
INSERT INTO `click` VALUES ('10010', '10134', '192.168.0.100', '2016-04-21 19:53:32');
INSERT INTO `click` VALUES ('10011', '10140', '192.168.0.100', '2016-04-21 19:54:02');
INSERT INTO `click` VALUES ('10012', '10135', '192.168.0.100', '2016-04-21 19:54:09');
INSERT INTO `click` VALUES ('10013', '10145', '192.168.0.100', '2016-04-21 20:13:21');
INSERT INTO `click` VALUES ('10014', '10148', '192.168.0.100', '2016-04-21 20:14:16');
INSERT INTO `click` VALUES ('10015', '10148', '192.168.0.100', '2016-04-21 20:15:34');
INSERT INTO `click` VALUES ('10016', '10148', '192.168.0.100', '2016-04-21 20:15:41');
INSERT INTO `click` VALUES ('10017', '10148', '192.168.0.100', '2016-04-21 20:15:56');
INSERT INTO `click` VALUES ('10018', '10148', '192.168.0.100', '2016-04-21 20:15:58');
INSERT INTO `click` VALUES ('10019', '10148', '192.168.0.100', '2016-04-21 20:16:02');
INSERT INTO `click` VALUES ('10020', '10148', '192.168.0.100', '2016-04-21 20:16:15');
INSERT INTO `click` VALUES ('10021', '10148', '192.168.0.100', '2016-04-21 20:16:16');
INSERT INTO `click` VALUES ('10022', '10148', '192.168.0.100', '2016-04-21 20:16:16');
INSERT INTO `click` VALUES ('10023', '10148', '192.168.0.100', '2016-04-21 20:16:16');
INSERT INTO `click` VALUES ('10024', '10148', '192.168.0.100', '2016-04-21 20:16:17');
INSERT INTO `click` VALUES ('10025', '10148', '192.168.0.100', '2016-04-21 20:16:17');
INSERT INTO `click` VALUES ('10026', '10148', '192.168.0.100', '2016-04-21 20:16:17');
INSERT INTO `click` VALUES ('10027', '10148', '192.168.0.100', '2016-04-21 20:16:17');
INSERT INTO `click` VALUES ('10028', '10148', '192.168.0.100', '2016-04-21 20:16:17');
INSERT INTO `click` VALUES ('10029', '10148', '192.168.0.100', '2016-04-21 20:16:18');
INSERT INTO `click` VALUES ('10030', '10148', '192.168.0.100', '2016-04-21 20:16:18');
INSERT INTO `click` VALUES ('10031', '10148', '192.168.0.100', '2016-04-21 20:16:18');
INSERT INTO `click` VALUES ('10032', '10148', '192.168.0.100', '2016-04-21 20:16:18');
INSERT INTO `click` VALUES ('10033', '10148', '192.168.0.100', '2016-04-21 20:16:18');
INSERT INTO `click` VALUES ('10034', '10148', '192.168.0.100', '2016-04-21 20:17:05');
INSERT INTO `click` VALUES ('10035', '10148', '192.168.0.100', '2016-04-21 20:17:11');
INSERT INTO `click` VALUES ('10036', '10148', '192.168.0.100', '2016-04-21 20:17:37');
INSERT INTO `click` VALUES ('10037', '10150', '192.168.0.100', '2016-04-21 20:19:06');
INSERT INTO `click` VALUES ('10038', '10150', '192.168.0.100', '2016-04-21 20:22:43');
INSERT INTO `click` VALUES ('10039', '10129', '192.168.0.100', '2016-04-21 20:24:11');
INSERT INTO `click` VALUES ('10040', '10129', '192.168.0.100', '2016-04-21 20:29:28');
INSERT INTO `click` VALUES ('10041', '10129', '192.168.0.100', '2016-04-21 20:31:51');
INSERT INTO `click` VALUES ('10042', '10150', '192.168.0.100', '2016-04-21 20:32:20');
INSERT INTO `click` VALUES ('10043', '10150', '192.168.0.100', '2016-04-21 20:33:16');
INSERT INTO `click` VALUES ('10044', '10150', '192.168.0.100', '2016-04-21 20:33:17');
INSERT INTO `click` VALUES ('10045', '10150', '192.168.0.100', '2016-04-21 20:33:18');
INSERT INTO `click` VALUES ('10046', '10150', '192.168.0.100', '2016-04-21 20:33:22');
INSERT INTO `click` VALUES ('10047', '10150', '192.168.0.100', '2016-04-21 20:33:24');
INSERT INTO `click` VALUES ('10048', '10150', '192.168.0.100', '2016-04-21 20:33:30');
INSERT INTO `click` VALUES ('10049', '10150', '192.168.0.100', '2016-04-21 20:34:06');
INSERT INTO `click` VALUES ('10050', '10150', '192.168.0.100', '2016-04-21 20:34:08');
INSERT INTO `click` VALUES ('10051', '10150', '192.168.0.100', '2016-04-21 20:34:09');
INSERT INTO `click` VALUES ('10052', '10150', '192.168.0.100', '2016-04-21 20:34:10');
INSERT INTO `click` VALUES ('10053', '10150', '192.168.0.100', '2016-04-21 20:34:14');
INSERT INTO `click` VALUES ('10054', '10150', '192.168.0.100', '2016-04-21 20:35:58');
INSERT INTO `click` VALUES ('10055', '10150', '192.168.0.100', '2016-04-21 20:35:59');
INSERT INTO `click` VALUES ('10056', '10150', '192.168.0.100', '2016-04-21 20:36:02');
INSERT INTO `click` VALUES ('10057', '10150', '192.168.0.100', '2016-04-21 20:36:03');
INSERT INTO `click` VALUES ('10058', '10150', '192.168.0.100', '2016-04-21 20:36:32');
INSERT INTO `click` VALUES ('10059', '10150', '192.168.0.100', '2016-04-21 20:36:34');
INSERT INTO `click` VALUES ('10060', '10150', '192.168.0.100', '2016-04-21 20:36:37');
INSERT INTO `click` VALUES ('10061', '10150', '192.168.0.100', '2016-04-21 20:36:40');
INSERT INTO `click` VALUES ('10062', '10150', '192.168.0.100', '2016-04-21 20:36:44');
INSERT INTO `click` VALUES ('10063', '10150', '192.168.0.100', '2016-04-21 20:38:05');
INSERT INTO `click` VALUES ('10064', '10150', '192.168.0.100', '2016-04-21 20:38:06');
INSERT INTO `click` VALUES ('10065', '10150', '192.168.0.100', '2016-04-21 20:38:09');
INSERT INTO `click` VALUES ('10066', '10150', '192.168.0.100', '2016-04-21 20:38:13');
INSERT INTO `click` VALUES ('10067', '10150', '192.168.0.100', '2016-04-21 20:38:20');
INSERT INTO `click` VALUES ('10068', '10150', '192.168.0.100', '2016-04-21 20:40:05');
INSERT INTO `click` VALUES ('10069', '10150', '192.168.0.100', '2016-04-21 20:40:41');
INSERT INTO `click` VALUES ('10070', '10150', '192.168.0.100', '2016-04-21 20:40:43');
INSERT INTO `click` VALUES ('10071', '10150', '192.168.0.100', '2016-04-21 20:41:09');
INSERT INTO `click` VALUES ('10072', '10150', '192.168.0.100', '2016-04-21 20:41:10');
INSERT INTO `click` VALUES ('10073', '10150', '192.168.0.100', '2016-04-21 20:41:11');
INSERT INTO `click` VALUES ('10074', '10150', '192.168.0.100', '2016-04-21 20:41:12');
INSERT INTO `click` VALUES ('10075', '10150', '192.168.0.100', '2016-04-21 20:41:14');
INSERT INTO `click` VALUES ('10076', '10150', '192.168.0.100', '2016-04-21 20:41:15');
INSERT INTO `click` VALUES ('10077', '10150', '192.168.0.100', '2016-04-21 20:41:17');
INSERT INTO `click` VALUES ('10078', '10150', '192.168.0.100', '2016-04-21 20:41:19');
INSERT INTO `click` VALUES ('10079', '10150', '192.168.0.100', '2016-04-21 20:41:22');
INSERT INTO `click` VALUES ('10080', '10150', '192.168.0.100', '2016-04-21 20:41:46');
INSERT INTO `click` VALUES ('10081', '10150', '192.168.0.100', '2016-04-21 20:41:51');
INSERT INTO `click` VALUES ('10082', '10150', '192.168.0.100', '2016-04-21 20:41:52');
INSERT INTO `click` VALUES ('10083', '10150', '192.168.0.100', '2016-04-21 20:41:53');
INSERT INTO `click` VALUES ('10084', '10150', '192.168.0.100', '2016-04-21 20:41:54');
INSERT INTO `click` VALUES ('10085', '10150', '192.168.0.100', '2016-04-21 20:41:55');
INSERT INTO `click` VALUES ('10086', '10148', '192.168.0.100', '2016-04-21 20:42:56');
INSERT INTO `click` VALUES ('10087', '10144', '192.168.0.100', '2016-04-21 20:44:48');
INSERT INTO `click` VALUES ('10088', '10144', '192.168.0.100', '2016-04-21 20:51:37');
INSERT INTO `click` VALUES ('10089', '10144', '192.168.0.100', '2016-04-21 20:51:53');
INSERT INTO `click` VALUES ('10090', '10144', '192.168.0.100', '2016-04-21 20:51:57');
INSERT INTO `click` VALUES ('10091', '10144', '192.168.0.100', '2016-04-21 20:51:58');
INSERT INTO `click` VALUES ('10092', '10144', '192.168.0.100', '2016-04-21 20:52:11');
INSERT INTO `click` VALUES ('10093', '10144', '192.168.0.100', '2016-04-21 20:52:57');
INSERT INTO `click` VALUES ('10094', '10144', '192.168.0.100', '2016-04-21 20:53:14');
INSERT INTO `click` VALUES ('10095', '10144', '192.168.0.100', '2016-04-21 20:55:25');
INSERT INTO `click` VALUES ('10096', '10144', '192.168.0.100', '2016-04-21 20:55:59');
INSERT INTO `click` VALUES ('10097', '10144', '192.168.0.100', '2016-04-21 20:56:50');
INSERT INTO `click` VALUES ('10098', '10144', '192.168.0.100', '2016-04-21 20:57:30');
INSERT INTO `click` VALUES ('10099', '10144', '192.168.0.100', '2016-04-21 20:57:32');
INSERT INTO `click` VALUES ('10100', '10151', '192.168.0.100', '2016-04-21 21:03:09');
INSERT INTO `click` VALUES ('10101', '10151', '192.168.0.100', '2016-04-21 21:03:16');
INSERT INTO `click` VALUES ('10102', '10118', '192.168.0.100', '2016-04-21 21:03:25');
INSERT INTO `click` VALUES ('10103', '10029', '192.168.0.100', '2016-04-21 21:08:23');
INSERT INTO `click` VALUES ('10104', '10148', '192.168.0.100', '2016-04-22 17:35:12');
INSERT INTO `click` VALUES ('10105', '10148', '192.168.0.100', '2016-04-22 17:38:02');
INSERT INTO `click` VALUES ('10106', '10148', '192.168.0.100', '2016-04-22 17:38:39');
INSERT INTO `click` VALUES ('10107', '10150', '192.168.0.100', '2016-04-22 17:38:43');
INSERT INTO `click` VALUES ('10108', '10150', '192.168.0.100', '2016-04-22 17:38:45');
INSERT INTO `click` VALUES ('10109', '10150', '192.168.0.100', '2016-04-22 17:38:47');
INSERT INTO `click` VALUES ('10110', '10150', '192.168.0.100', '2016-04-22 17:38:48');
INSERT INTO `click` VALUES ('10111', '10150', '192.168.0.100', '2016-04-22 17:38:50');
INSERT INTO `click` VALUES ('10112', '10118', '192.168.0.100', '2016-04-22 17:38:54');
INSERT INTO `click` VALUES ('10113', '10126', '192.168.0.100', '2016-04-22 17:38:56');
INSERT INTO `click` VALUES ('10114', '10141', '192.168.0.100', '2016-04-22 17:39:23');
INSERT INTO `click` VALUES ('10115', '10141', '192.168.0.100', '2016-04-22 17:39:44');
INSERT INTO `click` VALUES ('10116', '10145', '192.168.0.100', '2016-04-22 17:41:24');
INSERT INTO `click` VALUES ('10117', '10147', '192.168.0.100', '2016-04-22 17:42:05');
INSERT INTO `click` VALUES ('10118', '10136', '192.168.0.100', '2016-04-22 17:42:57');
INSERT INTO `click` VALUES ('10119', '10131', '192.168.0.100', '2016-04-22 17:45:38');
INSERT INTO `click` VALUES ('10120', '10131', '192.168.0.100', '2016-04-22 17:46:46');
INSERT INTO `click` VALUES ('10121', '10131', '192.168.0.100', '2016-04-22 17:47:07');
INSERT INTO `click` VALUES ('10122', '10150', '192.168.0.100', '2016-04-22 18:00:15');
INSERT INTO `click` VALUES ('10123', '10149', '192.168.0.100', '2016-04-22 18:00:22');
INSERT INTO `click` VALUES ('10124', '10148', '192.168.0.100', '2016-04-22 19:02:27');
INSERT INTO `click` VALUES ('10125', '10146', '192.168.0.100', '2016-04-22 19:33:37');
INSERT INTO `click` VALUES ('10126', '10149', '192.168.0.100', '2016-04-22 19:35:56');
INSERT INTO `click` VALUES ('10127', '10149', '192.168.0.100', '2016-04-22 20:38:34');
INSERT INTO `click` VALUES ('10129', '10164', '192.168.0.100', '2016-04-22 21:29:28');
INSERT INTO `click` VALUES ('10130', '10159', '192.168.0.100', '2016-04-22 21:29:34');
INSERT INTO `click` VALUES ('10131', '10155', '192.168.0.100', '2016-04-22 21:29:37');
INSERT INTO `click` VALUES ('10132', '10156', '192.168.0.100', '2016-04-22 21:29:40');
INSERT INTO `click` VALUES ('10133', '10156', '192.168.0.100', '2016-04-22 21:29:43');
INSERT INTO `click` VALUES ('10134', '10154', '192.168.0.100', '2016-04-22 21:29:46');
INSERT INTO `click` VALUES ('10135', '10165', '192.168.0.100', '2016-04-22 21:37:27');
INSERT INTO `click` VALUES ('10136', '10172', '192.168.0.100', '2016-04-22 21:51:10');
INSERT INTO `click` VALUES ('10137', '10172', '192.168.0.100', '2016-04-22 21:53:13');
INSERT INTO `click` VALUES ('10138', '10173', '192.168.0.100', '2016-04-22 21:53:24');
INSERT INTO `click` VALUES ('10139', '10171', '0:0:0:0:0:0:0:1', '2016-04-23 15:07:07');
INSERT INTO `click` VALUES ('10140', '10000', '0:0:0:0:0:0:0:1', '2016-04-23 15:07:25');
INSERT INTO `click` VALUES ('10141', '10001', '0:0:0:0:0:0:0:1', '2016-04-23 15:07:29');
INSERT INTO `click` VALUES ('10142', '10148', '0:0:0:0:0:0:0:1', '2016-04-23 15:07:38');
INSERT INTO `click` VALUES ('10143', '10171', '0:0:0:0:0:0:0:1', '2016-04-23 15:09:00');
INSERT INTO `click` VALUES ('10144', '10150', '0:0:0:0:0:0:0:1', '2016-04-23 15:17:52');
INSERT INTO `click` VALUES ('10145', '10150', '0:0:0:0:0:0:0:1', '2016-04-23 15:23:30');
INSERT INTO `click` VALUES ('10146', '10150', '0:0:0:0:0:0:0:1', '2016-04-23 15:25:06');
INSERT INTO `click` VALUES ('10147', '10150', '0:0:0:0:0:0:0:1', '2016-04-23 15:25:33');
INSERT INTO `click` VALUES ('10148', '10150', '0:0:0:0:0:0:0:1', '2016-04-23 15:26:16');
INSERT INTO `click` VALUES ('10149', '10150', '0:0:0:0:0:0:0:1', '2016-04-23 15:33:34');
INSERT INTO `click` VALUES ('10150', '10133', '0:0:0:0:0:0:0:1', '2016-04-23 15:37:09');
INSERT INTO `click` VALUES ('10151', '10171', '0:0:0:0:0:0:0:1', '2016-04-23 15:38:01');
INSERT INTO `click` VALUES ('10152', '10171', '0:0:0:0:0:0:0:1', '2016-04-23 15:38:12');
INSERT INTO `click` VALUES ('10153', '10155', '0:0:0:0:0:0:0:1', '2016-04-23 15:40:10');
INSERT INTO `click` VALUES ('10154', '10167', '0:0:0:0:0:0:0:1', '2016-04-23 15:40:13');
INSERT INTO `click` VALUES ('10155', '10169', '0:0:0:0:0:0:0:1', '2016-04-23 15:40:16');
INSERT INTO `click` VALUES ('10156', '10167', '0:0:0:0:0:0:0:1', '2016-04-23 15:46:35');
INSERT INTO `click` VALUES ('10157', '10170', '0:0:0:0:0:0:0:1', '2016-04-23 17:35:51');
INSERT INTO `click` VALUES ('10158', '10169', '0:0:0:0:0:0:0:1', '2016-04-23 17:35:54');
INSERT INTO `click` VALUES ('10159', '10169', '0:0:0:0:0:0:0:1', '2016-04-23 17:36:06');
INSERT INTO `click` VALUES ('10160', '10169', '0:0:0:0:0:0:0:1', '2016-04-23 17:38:59');
INSERT INTO `click` VALUES ('10161', '10169', '0:0:0:0:0:0:0:1', '2016-04-23 17:44:21');
INSERT INTO `click` VALUES ('10162', '10167', '0:0:0:0:0:0:0:1', '2016-04-23 17:45:47');
INSERT INTO `click` VALUES ('10163', '10169', '0:0:0:0:0:0:0:1', '2016-04-23 17:46:04');
INSERT INTO `click` VALUES ('10164', '10169', '0:0:0:0:0:0:0:1', '2016-04-23 17:49:22');
INSERT INTO `click` VALUES ('10165', '10166', '0:0:0:0:0:0:0:1', '2016-04-23 17:49:40');
INSERT INTO `click` VALUES ('10166', '10170', '0:0:0:0:0:0:0:1', '2016-04-23 17:49:45');
INSERT INTO `click` VALUES ('10167', '10167', '0:0:0:0:0:0:0:1', '2016-04-23 17:49:48');
INSERT INTO `click` VALUES ('10168', '10169', '0:0:0:0:0:0:0:1', '2016-04-23 17:50:13');
INSERT INTO `click` VALUES ('10169', '10167', '0:0:0:0:0:0:0:1', '2016-04-23 17:50:36');
INSERT INTO `click` VALUES ('10170', '10167', '0:0:0:0:0:0:0:1', '2016-04-23 17:51:48');
INSERT INTO `click` VALUES ('10171', '10169', '0:0:0:0:0:0:0:1', '2016-04-23 17:51:55');
INSERT INTO `click` VALUES ('10172', '10164', '0:0:0:0:0:0:0:1', '2016-04-23 17:52:03');
INSERT INTO `click` VALUES ('10173', '10165', '0:0:0:0:0:0:0:1', '2016-04-23 17:52:15');
INSERT INTO `click` VALUES ('10174', '10161', '0:0:0:0:0:0:0:1', '2016-04-23 17:52:24');
INSERT INTO `click` VALUES ('10175', '10174', '0:0:0:0:0:0:0:1', '2016-04-23 17:52:32');
INSERT INTO `click` VALUES ('10176', '10174', '0:0:0:0:0:0:0:1', '2016-04-23 17:52:41');
INSERT INTO `click` VALUES ('10177', '10175', '0:0:0:0:0:0:0:1', '2016-04-23 17:52:59');
INSERT INTO `click` VALUES ('10178', '10175', '0:0:0:0:0:0:0:1', '2016-04-23 17:53:18');
INSERT INTO `click` VALUES ('10179', '10174', '0:0:0:0:0:0:0:1', '2016-04-23 17:53:21');
INSERT INTO `click` VALUES ('10180', '10175', '0:0:0:0:0:0:0:1', '2016-04-23 17:53:29');
INSERT INTO `click` VALUES ('10181', '10175', '0:0:0:0:0:0:0:1', '2016-04-23 18:02:27');
INSERT INTO `click` VALUES ('10182', '10176', '0:0:0:0:0:0:0:1', '2016-04-23 18:02:36');
INSERT INTO `click` VALUES ('10183', '10177', '0:0:0:0:0:0:0:1', '2016-04-23 18:03:32');
INSERT INTO `click` VALUES ('10184', '10176', '0:0:0:0:0:0:0:1', '2016-04-23 18:03:47');
INSERT INTO `click` VALUES ('10185', '10176', '0:0:0:0:0:0:0:1', '2016-04-23 18:03:53');
INSERT INTO `click` VALUES ('10186', '10177', '0:0:0:0:0:0:0:1', '2016-04-23 18:04:25');
INSERT INTO `click` VALUES ('10187', '10177', '0:0:0:0:0:0:0:1', '2016-04-23 18:04:30');
INSERT INTO `click` VALUES ('10188', '10177', '0:0:0:0:0:0:0:1', '2016-04-23 18:04:42');
INSERT INTO `click` VALUES ('10189', '10177', '0:0:0:0:0:0:0:1', '2016-04-23 18:04:51');
INSERT INTO `click` VALUES ('10190', '10177', '0:0:0:0:0:0:0:1', '2016-04-23 18:04:57');
INSERT INTO `click` VALUES ('10191', '10176', '0:0:0:0:0:0:0:1', '2016-04-23 18:05:01');
INSERT INTO `click` VALUES ('10192', '10177', '0:0:0:0:0:0:0:1', '2016-04-23 18:05:11');
INSERT INTO `click` VALUES ('10193', '10177', '0:0:0:0:0:0:0:1', '2016-04-23 18:05:24');
INSERT INTO `click` VALUES ('10194', '10177', '0:0:0:0:0:0:0:1', '2016-04-23 18:05:29');
INSERT INTO `click` VALUES ('10195', '10177', '0:0:0:0:0:0:0:1', '2016-04-23 18:08:13');
INSERT INTO `click` VALUES ('10196', '10177', '0:0:0:0:0:0:0:1', '2016-04-23 18:08:28');
INSERT INTO `click` VALUES ('10197', '10177', '0:0:0:0:0:0:0:1', '2016-04-23 18:08:34');
INSERT INTO `click` VALUES ('10198', '10177', '0:0:0:0:0:0:0:1', '2016-04-23 18:09:24');
INSERT INTO `click` VALUES ('10199', '10177', '0:0:0:0:0:0:0:1', '2016-04-23 18:09:31');
INSERT INTO `click` VALUES ('10200', '10170', '0:0:0:0:0:0:0:1', '2016-04-23 18:11:13');
INSERT INTO `click` VALUES ('10201', '10170', '0:0:0:0:0:0:0:1', '2016-04-23 18:11:23');
INSERT INTO `click` VALUES ('10202', '10170', '0:0:0:0:0:0:0:1', '2016-04-23 18:11:27');
INSERT INTO `click` VALUES ('10203', '10178', '0:0:0:0:0:0:0:1', '2016-04-23 18:13:13');
INSERT INTO `click` VALUES ('10204', '10178', '0:0:0:0:0:0:0:1', '2016-04-23 18:13:21');
INSERT INTO `click` VALUES ('10205', '10178', '0:0:0:0:0:0:0:1', '2016-04-23 18:13:46');
INSERT INTO `click` VALUES ('10206', '10178', '0:0:0:0:0:0:0:1', '2016-04-23 18:13:57');
INSERT INTO `click` VALUES ('10207', '10178', '0:0:0:0:0:0:0:1', '2016-04-23 18:14:16');
INSERT INTO `click` VALUES ('10208', '10178', '0:0:0:0:0:0:0:1', '2016-04-23 18:14:29');
INSERT INTO `click` VALUES ('10209', '10179', '0:0:0:0:0:0:0:1', '2016-04-23 18:14:46');
INSERT INTO `click` VALUES ('10210', '10179', '0:0:0:0:0:0:0:1', '2016-04-23 18:14:56');
INSERT INTO `click` VALUES ('10211', '10180', '0:0:0:0:0:0:0:1', '2016-04-23 18:16:05');
INSERT INTO `click` VALUES ('10212', '10180', '0:0:0:0:0:0:0:1', '2016-04-23 18:24:12');
INSERT INTO `click` VALUES ('10213', '10180', '0:0:0:0:0:0:0:1', '2016-04-23 18:24:30');
INSERT INTO `click` VALUES ('10214', '10180', '0:0:0:0:0:0:0:1', '2016-04-23 18:24:40');
INSERT INTO `click` VALUES ('10215', '10181', '0:0:0:0:0:0:0:1', '2016-04-23 18:27:25');
INSERT INTO `click` VALUES ('10216', '10181', '0:0:0:0:0:0:0:1', '2016-04-23 18:27:31');
INSERT INTO `click` VALUES ('10217', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 18:34:28');
INSERT INTO `click` VALUES ('10218', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 18:35:39');
INSERT INTO `click` VALUES ('10219', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 18:36:59');
INSERT INTO `click` VALUES ('10220', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 18:38:12');
INSERT INTO `click` VALUES ('10221', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 18:38:21');
INSERT INTO `click` VALUES ('10222', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 18:38:32');
INSERT INTO `click` VALUES ('10223', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 18:38:38');
INSERT INTO `click` VALUES ('10224', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 18:40:11');
INSERT INTO `click` VALUES ('10225', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 18:40:24');
INSERT INTO `click` VALUES ('10226', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 18:40:36');
INSERT INTO `click` VALUES ('10227', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 18:47:24');
INSERT INTO `click` VALUES ('10228', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 18:48:16');
INSERT INTO `click` VALUES ('10229', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 18:50:13');
INSERT INTO `click` VALUES ('10230', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 18:51:45');
INSERT INTO `click` VALUES ('10231', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 18:52:53');
INSERT INTO `click` VALUES ('10232', '10179', '0:0:0:0:0:0:0:1', '2016-04-23 18:54:34');
INSERT INTO `click` VALUES ('10233', '10181', '0:0:0:0:0:0:0:1', '2016-04-23 18:54:56');
INSERT INTO `click` VALUES ('10234', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 18:55:09');
INSERT INTO `click` VALUES ('10235', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 19:15:24');
INSERT INTO `click` VALUES ('10236', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 19:15:53');
INSERT INTO `click` VALUES ('10237', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 19:16:33');
INSERT INTO `click` VALUES ('10238', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 19:16:34');
INSERT INTO `click` VALUES ('10239', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 19:19:58');
INSERT INTO `click` VALUES ('10240', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 19:21:20');
INSERT INTO `click` VALUES ('10241', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 19:23:06');
INSERT INTO `click` VALUES ('10242', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 19:23:24');
INSERT INTO `click` VALUES ('10243', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 19:24:41');
INSERT INTO `click` VALUES ('10244', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 19:25:23');
INSERT INTO `click` VALUES ('10245', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 19:26:51');
INSERT INTO `click` VALUES ('10246', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 19:28:31');
INSERT INTO `click` VALUES ('10247', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 19:36:50');
INSERT INTO `click` VALUES ('10248', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 19:40:11');
INSERT INTO `click` VALUES ('10249', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 19:44:05');
INSERT INTO `click` VALUES ('10250', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 19:44:48');
INSERT INTO `click` VALUES ('10251', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 19:45:58');
INSERT INTO `click` VALUES ('10252', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 19:49:46');
INSERT INTO `click` VALUES ('10253', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 19:53:45');
INSERT INTO `click` VALUES ('10254', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:05:54');
INSERT INTO `click` VALUES ('10255', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:06:12');
INSERT INTO `click` VALUES ('10256', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:06:15');
INSERT INTO `click` VALUES ('10257', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:06:20');
INSERT INTO `click` VALUES ('10258', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:07:04');
INSERT INTO `click` VALUES ('10259', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:07:06');
INSERT INTO `click` VALUES ('10260', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:07:08');
INSERT INTO `click` VALUES ('10261', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:07:11');
INSERT INTO `click` VALUES ('10262', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:07:13');
INSERT INTO `click` VALUES ('10263', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:07:14');
INSERT INTO `click` VALUES ('10264', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:08:31');
INSERT INTO `click` VALUES ('10265', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:08:32');
INSERT INTO `click` VALUES ('10266', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:08:45');
INSERT INTO `click` VALUES ('10267', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:10:05');
INSERT INTO `click` VALUES ('10268', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:24:13');
INSERT INTO `click` VALUES ('10269', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:24:27');
INSERT INTO `click` VALUES ('10270', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:25:03');
INSERT INTO `click` VALUES ('10271', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:25:05');
INSERT INTO `click` VALUES ('10272', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:25:06');
INSERT INTO `click` VALUES ('10273', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:25:07');
INSERT INTO `click` VALUES ('10274', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:25:12');
INSERT INTO `click` VALUES ('10275', '10177', '0:0:0:0:0:0:0:1', '2016-04-23 20:26:27');
INSERT INTO `click` VALUES ('10276', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:26:45');
INSERT INTO `click` VALUES ('10277', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:27:25');
INSERT INTO `click` VALUES ('10278', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:27:58');
INSERT INTO `click` VALUES ('10279', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:28:00');
INSERT INTO `click` VALUES ('10280', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:28:01');
INSERT INTO `click` VALUES ('10281', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:28:02');
INSERT INTO `click` VALUES ('10282', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:28:03');
INSERT INTO `click` VALUES ('10283', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:28:04');
INSERT INTO `click` VALUES ('10284', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:28:07');
INSERT INTO `click` VALUES ('10285', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:28:09');
INSERT INTO `click` VALUES ('10286', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:28:09');
INSERT INTO `click` VALUES ('10287', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:28:49');
INSERT INTO `click` VALUES ('10288', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:28:51');
INSERT INTO `click` VALUES ('10289', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:28:53');
INSERT INTO `click` VALUES ('10290', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:28:54');
INSERT INTO `click` VALUES ('10291', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:28:55');
INSERT INTO `click` VALUES ('10292', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:28:57');
INSERT INTO `click` VALUES ('10293', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:29:03');
INSERT INTO `click` VALUES ('10294', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:31:19');
INSERT INTO `click` VALUES ('10295', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:31:21');
INSERT INTO `click` VALUES ('10296', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:34:14');
INSERT INTO `click` VALUES ('10297', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:34:17');
INSERT INTO `click` VALUES ('10298', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:34:18');
INSERT INTO `click` VALUES ('10299', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:34:19');
INSERT INTO `click` VALUES ('10300', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:35:11');
INSERT INTO `click` VALUES ('10301', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:36:15');
INSERT INTO `click` VALUES ('10302', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:36:36');
INSERT INTO `click` VALUES ('10303', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:37:50');
INSERT INTO `click` VALUES ('10304', '10182', '0:0:0:0:0:0:0:1', '2016-04-23 20:56:08');
INSERT INTO `click` VALUES ('10305', '10000', '0:0:0:0:0:0:0:1', '2016-04-23 20:56:27');
INSERT INTO `click` VALUES ('10306', '10001', '0:0:0:0:0:0:0:1', '2016-04-23 20:56:36');
INSERT INTO `click` VALUES ('10307', '10000', '0:0:0:0:0:0:0:1', '2016-04-23 20:58:10');
INSERT INTO `click` VALUES ('10308', '10000', '0:0:0:0:0:0:0:1', '2016-04-23 21:04:52');
INSERT INTO `click` VALUES ('10309', '10001', '0:0:0:0:0:0:0:1', '2016-04-23 21:05:02');
INSERT INTO `click` VALUES ('10310', '10001', '0:0:0:0:0:0:0:1', '2016-04-23 21:05:27');
INSERT INTO `click` VALUES ('10311', '10001', '0:0:0:0:0:0:0:1', '2016-04-23 21:07:28');
INSERT INTO `click` VALUES ('10312', '10001', '0:0:0:0:0:0:0:1', '2016-04-23 21:07:30');
INSERT INTO `click` VALUES ('10313', '10001', '0:0:0:0:0:0:0:1', '2016-04-23 21:07:31');
INSERT INTO `click` VALUES ('10314', '10001', '0:0:0:0:0:0:0:1', '2016-04-23 21:07:37');
INSERT INTO `click` VALUES ('10315', '10001', '0:0:0:0:0:0:0:1', '2016-04-23 21:08:06');
INSERT INTO `click` VALUES ('10316', '10001', '0:0:0:0:0:0:0:1', '2016-04-23 21:08:07');
INSERT INTO `click` VALUES ('10317', '10001', '0:0:0:0:0:0:0:1', '2016-04-23 21:08:08');
INSERT INTO `click` VALUES ('10318', '10001', '0:0:0:0:0:0:0:1', '2016-04-23 21:08:09');
INSERT INTO `click` VALUES ('10319', '10001', '0:0:0:0:0:0:0:1', '2016-04-23 21:08:10');
INSERT INTO `click` VALUES ('10320', '10001', '0:0:0:0:0:0:0:1', '2016-04-23 21:08:11');
INSERT INTO `click` VALUES ('10321', '10001', '0:0:0:0:0:0:0:1', '2016-04-23 21:08:13');
INSERT INTO `click` VALUES ('10322', '10001', '0:0:0:0:0:0:0:1', '2016-04-23 21:08:14');
INSERT INTO `click` VALUES ('10323', '10001', '0:0:0:0:0:0:0:1', '2016-04-23 21:08:15');
INSERT INTO `click` VALUES ('10324', '10001', '0:0:0:0:0:0:0:1', '2016-04-23 21:08:56');
INSERT INTO `click` VALUES ('10325', '10001', '0:0:0:0:0:0:0:1', '2016-04-23 21:08:57');
INSERT INTO `click` VALUES ('10326', '10000', '0:0:0:0:0:0:0:1', '2016-04-23 21:09:01');
INSERT INTO `click` VALUES ('10327', '10000', '0:0:0:0:0:0:0:1', '2016-04-23 21:12:42');
INSERT INTO `click` VALUES ('10328', '10000', '0:0:0:0:0:0:0:1', '2016-04-23 21:13:31');
INSERT INTO `click` VALUES ('10329', '10000', '0:0:0:0:0:0:0:1', '2016-04-23 21:26:28');
INSERT INTO `click` VALUES ('10330', '10000', '0:0:0:0:0:0:0:1', '2016-04-23 21:27:18');
INSERT INTO `click` VALUES ('10331', '10000', '0:0:0:0:0:0:0:1', '2016-04-23 21:27:21');
INSERT INTO `click` VALUES ('10332', '10000', '0:0:0:0:0:0:0:1', '2016-04-23 21:28:08');
INSERT INTO `click` VALUES ('10333', '10171', '0:0:0:0:0:0:0:1', '2016-04-23 21:31:12');
INSERT INTO `click` VALUES ('10334', '10171', '0:0:0:0:0:0:0:1', '2016-04-23 21:32:08');
INSERT INTO `click` VALUES ('10335', '10000', '0:0:0:0:0:0:0:1', '2016-04-23 21:33:08');
INSERT INTO `click` VALUES ('10336', '10000', '0:0:0:0:0:0:0:1', '2016-04-23 21:34:04');
INSERT INTO `click` VALUES ('10337', '10000', '0:0:0:0:0:0:0:1', '2016-04-23 21:34:16');
INSERT INTO `click` VALUES ('10338', '10003', '0:0:0:0:0:0:0:1', '2016-04-23 21:34:54');
INSERT INTO `click` VALUES ('10339', '10003', '0:0:0:0:0:0:0:1', '2016-04-23 21:35:14');
INSERT INTO `click` VALUES ('10340', '10003', '0:0:0:0:0:0:0:1', '2016-04-23 21:36:42');
INSERT INTO `click` VALUES ('10341', '10003', '0:0:0:0:0:0:0:1', '2016-04-23 21:41:20');
INSERT INTO `click` VALUES ('10342', '10003', '0:0:0:0:0:0:0:1', '2016-04-23 21:41:59');
INSERT INTO `click` VALUES ('10343', '10003', '0:0:0:0:0:0:0:1', '2016-04-23 21:42:38');
INSERT INTO `click` VALUES ('10344', '10003', '0:0:0:0:0:0:0:1', '2016-04-23 21:43:19');
INSERT INTO `click` VALUES ('10345', '10003', '0:0:0:0:0:0:0:1', '2016-04-23 21:43:35');
INSERT INTO `click` VALUES ('10346', '10001', '0:0:0:0:0:0:0:1', '2016-04-23 22:01:00');
INSERT INTO `click` VALUES ('10347', '10001', '0:0:0:0:0:0:0:1', '2016-04-23 22:01:32');
INSERT INTO `click` VALUES ('10348', '10001', '0:0:0:0:0:0:0:1', '2016-04-23 22:02:07');
INSERT INTO `click` VALUES ('10349', '10001', '0:0:0:0:0:0:0:1', '2016-04-23 22:02:39');
INSERT INTO `click` VALUES ('10350', '10150', '0:0:0:0:0:0:0:1', '2016-04-24 13:09:52');
INSERT INTO `click` VALUES ('10351', '10148', '0:0:0:0:0:0:0:1', '2016-04-24 13:15:46');
INSERT INTO `click` VALUES ('10352', '10148', '0:0:0:0:0:0:0:1', '2016-04-24 13:16:28');
INSERT INTO `click` VALUES ('10353', '10148', '0:0:0:0:0:0:0:1', '2016-04-24 14:15:05');
INSERT INTO `click` VALUES ('10354', '10150', '0:0:0:0:0:0:0:1', '2016-04-24 17:07:45');
INSERT INTO `click` VALUES ('10355', '10008', '0:0:0:0:0:0:0:1', '2016-04-24 17:08:38');
INSERT INTO `click` VALUES ('10356', '10011', '0:0:0:0:0:0:0:1', '2016-04-24 17:08:41');
INSERT INTO `click` VALUES ('10357', '10008', '0:0:0:0:0:0:0:1', '2016-04-24 17:09:15');
INSERT INTO `click` VALUES ('10358', '10008', '0:0:0:0:0:0:0:1', '2016-04-24 17:09:30');
INSERT INTO `click` VALUES ('10359', '10008', '0:0:0:0:0:0:0:1', '2016-04-24 17:09:36');
INSERT INTO `click` VALUES ('10360', '10008', '0:0:0:0:0:0:0:1', '2016-04-24 17:11:39');
INSERT INTO `click` VALUES ('10361', '10008', '0:0:0:0:0:0:0:1', '2016-04-24 17:11:53');
INSERT INTO `click` VALUES ('10362', '10004', '0:0:0:0:0:0:0:1', '2016-04-24 17:41:44');
INSERT INTO `click` VALUES ('10363', '10003', '0:0:0:0:0:0:0:1', '2016-04-24 17:41:49');
INSERT INTO `click` VALUES ('10364', '10002', '0:0:0:0:0:0:0:1', '2016-04-24 17:41:53');
INSERT INTO `click` VALUES ('10365', '10013', '0:0:0:0:0:0:0:1', '2016-04-24 17:41:56');
INSERT INTO `click` VALUES ('10366', '10013', '0:0:0:0:0:0:0:1', '2016-04-24 17:42:24');
INSERT INTO `click` VALUES ('10367', '10010', '0:0:0:0:0:0:0:1', '2016-04-24 17:42:31');
INSERT INTO `click` VALUES ('10368', '10017', '0:0:0:0:0:0:0:1', '2016-04-24 17:42:38');
INSERT INTO `click` VALUES ('10369', '10159', '0:0:0:0:0:0:0:1', '2016-04-24 18:52:00');
INSERT INTO `click` VALUES ('10370', '10159', '0:0:0:0:0:0:0:1', '2016-04-24 18:52:19');
INSERT INTO `click` VALUES ('10371', '10182', '0:0:0:0:0:0:0:1', '2016-04-24 19:09:39');

-- ----------------------------
-- Table structure for `critique`
-- ----------------------------
DROP TABLE IF EXISTS `critique`;
CREATE TABLE `critique` (
  `critiqueId` int(11) NOT NULL AUTO_INCREMENT,
  `articleId` int(11) unsigned NOT NULL,
  `userId` int(11) unsigned NOT NULL,
  `content` text NOT NULL,
  PRIMARY KEY (`critiqueId`),
  KEY `FK745BAE92CA4E8830` (`articleId`),
  KEY `FK745BAE923ECE7FE8` (`userId`),
  CONSTRAINT `critique_fk_1` FOREIGN KEY (`articleId`) REFERENCES `article` (`articleId`),
  CONSTRAINT `critique_fk_2` FOREIGN KEY (`userId`) REFERENCES `user` (`userId`),
  CONSTRAINT `FK745BAE923ECE7FE8` FOREIGN KEY (`userId`) REFERENCES `user` (`userId`),
  CONSTRAINT `FK745BAE92CA4E8830` FOREIGN KEY (`articleId`) REFERENCES `article` (`articleId`)
) ENGINE=InnoDB AUTO_INCREMENT=10009 DEFAULT CHARSET=utf8 COMMENT='评论表';

-- ----------------------------
-- Records of critique
-- ----------------------------
INSERT INTO `critique` VALUES ('10000', '10000', '10002', '<p>是啊，太冷了，我还好！！！</p>');
INSERT INTO `critique` VALUES ('10001', '10000', '10002', '<p>我们公司的暖气坏了，好冷啊！！</p>');
INSERT INTO `critique` VALUES ('10002', '10001', '10001', '<p>测试一下！</p>');
INSERT INTO `critique` VALUES ('10003', '10002', '10000', '<p>评论！！</p>');
INSERT INTO `critique` VALUES ('10004', '10003', '10002', '<p>测试一下！！</p>');
INSERT INTO `critique` VALUES ('10005', '10004', '10000', '<p>测试一下！！！！</p>');
INSERT INTO `critique` VALUES ('10006', '10001', '10000', '<p>测试一下2</p><p><br></p><pre>阿萨德撒<br></pre><p><p><br></p></p>');
INSERT INTO `critique` VALUES ('10007', '10001', '10000', '<blockquote><p>public ActionForward comment(ActionMapping mapping, ActionForm form,<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;HttpServletRequest request, HttpServletResponse response)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;throws Exception {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;String userId = request.getParameter(\"userId\");<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;String articleId = request.getParameter(\"articleId\");<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;String content = request.getParameter(\"content\");<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;User user = (User) userService.findById(User.class, Integer.parseInt(userId));<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Article article = (Article) articleService.findById(Article.class, Integer.parseInt(articleId));<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Critique critique = new Critique(user, article, content);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;critiqueService.add(critique);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;prepareArticleContent(request, articleId);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return mapping.findForward(\"gotoArticleContentPage\");<br>&nbsp;&nbsp; &nbsp;}<br></p></blockquote>');
INSERT INTO `critique` VALUES ('10008', '10001', '10000', '<p>public ActionForward comment(ActionMapping mapping, ActionForm form,<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;HttpServletRequest request, HttpServletResponse response)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;throws Exception {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;String userId = request.getParameter(\"userId\");<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;String articleId = request.getParameter(\"articleId\");<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;String content = request.getParameter(\"content\");<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;User user = (User) userService.findById(User.class, Integer.parseInt(userId));<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Article article = (Article) articleService.findById(Article.class, Integer.parseInt(articleId));<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Critique critique = new Critique(user, article, content);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;critiqueService.add(critique);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;prepareArticleContent(request, articleId);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return mapping.findForward(\"gotoArticleContentPage\");<br>&nbsp;&nbsp; &nbsp;}</p><p>public ActionForward comment(ActionMapping mapping, ActionForm form,<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;HttpServletRequest request, HttpServletResponse response)<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;throws Exception {<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;String userId = request.getParameter(\"userId\");<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;String articleId = request.getParameter(\"articleId\");<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;String content = request.getParameter(\"content\");<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;User user = (User) userService.findById(User.class, Integer.parseInt(userId));<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Article article = (Article) articleService.findById(Article.class, Integer.parseInt(articleId));<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;Critique critique = new Critique(user, article, content);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;critiqueService.add(critique);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;prepareArticleContent(request, articleId);<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;return mapping.findForward(\"gotoArticleContentPage\");<br>&nbsp;&nbsp; &nbsp;}</p><p>撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 撒旦的 </p><p>撒旦的 </p><hr><p><br></p>');

-- ----------------------------
-- Table structure for `user`
-- ----------------------------
DROP TABLE IF EXISTS `user`;
CREATE TABLE `user` (
  `userId` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `userName` varchar(20) NOT NULL,
  `password` varchar(50) NOT NULL,
  `nickName` varchar(20) DEFAULT '',
  `question` varchar(50) NOT NULL,
  `answer` varchar(50) NOT NULL,
  PRIMARY KEY (`userId`),
  UNIQUE KEY `userName` (`userName`)
) ENGINE=InnoDB AUTO_INCREMENT=10013 DEFAULT CHARSET=utf8 COMMENT='用户表';

-- ----------------------------
-- Records of user
-- ----------------------------
INSERT INTO `user` VALUES ('10000', 'Switch', 'e10adc3949ba59abbe56e057f20f883e', 'Switch', '你的家乡', '湖南怀化市');
INSERT INTO `user` VALUES ('10001', 'Switch2', 'e10adc3949ba59abbe56e057f20f883e', 'Switch2', '你的家乡', '湖南怀化市');
INSERT INTO `user` VALUES ('10002', 'Switch3', 'e10adc3949ba59abbe56e057f20f883e', 'Switch3', '你的家乡', '湖南怀化市');
INSERT INTO `user` VALUES ('10003', 'hulianwang', 'e10adc3949ba59abbe56e057f20f883e', '互联网+', '你的家乡', '湖南怀化市');
INSERT INTO `user` VALUES ('10010', 'zs', 'e10adc3949ba59abbe56e057f20f883e', '张三', '您父亲的名字是？', '张二');
INSERT INTO `user` VALUES ('10011', 'ls', 'e10adc3949ba59abbe56e057f20f883e', '李四', '您母亲的名字是？', '王四');
INSERT INTO `user` VALUES ('10012', 'ww', 'e10adc3949ba59abbe56e057f20f883e', '王五', '您父亲的名字是？', '王四');
